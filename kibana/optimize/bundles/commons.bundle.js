/*! Copyright Elasticsearch B.V. and/or license to Elasticsearch B.V. under one or more contributor license agreements
 * Licensed under the Elastic License; you may not use this file except in compliance with the Elastic License. */
webpackJsonp([0],[,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.uiModules=void 0;exports.link=link;exports.get=get;exports.close=close;var _angular=__webpack_require__(16);var _angular2=_interopRequireDefault(_angular);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var existingModules={};var links=[];function link(module){links.push(module);module.requires=_lodash2.default.union(module.requires,_lodash2.default.keys(existingModules))}function get(moduleName,requires){var module=existingModules[moduleName];if(void 0===module){module=existingModules[moduleName]=_angular2.default.module(moduleName,[]);module.close=_lodash2.default.partial(close,moduleName);_lodash2.default.each(links,function(app){~app.requires.indexOf(moduleName)||app.requires.push(moduleName)})}requires&&(module.requires=_lodash2.default.union(module.requires,requires));return module}function close(moduleName){var module=existingModules[moduleName];if(!module)return;var i=links.indexOf(module);i>-1&&links.splice(i,1);_lodash2.default.each(links,function(app){_lodash2.default.pull(app.requires,moduleName)});delete existingModules[moduleName]}exports.uiModules={link:link,get:get,close:close}},,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _chrome=__webpack_require__(1795);exports.default=_chrome.chrome;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _notify=__webpack_require__(1842);Object.defineProperty(exports,"notify",{enumerable:true,get:function get(){return _notify.notify}});var _notifier=__webpack_require__(1034);Object.defineProperty(exports,"Notifier",{enumerable:true,get:function get(){return _notifier.Notifier}});var _lib=__webpack_require__(547);Object.defineProperty(exports,"getPainlessError",{enumerable:true,get:function get(){return _lib.getPainlessError}});var _fatal_error=__webpack_require__(715);Object.defineProperty(exports,"fatalError",{enumerable:true,get:function get(){return _fatal_error.fatalError}});Object.defineProperty(exports,"fatalErrorInternals",{enumerable:true,get:function get(){return _fatal_error.fatalErrorInternals}});Object.defineProperty(exports,"addFatalErrorCallback",{enumerable:true,get:function get(){return _fatal_error.addFatalErrorCallback}});var _toasts=__webpack_require__(2743);Object.defineProperty(exports,"GlobalToastList",{enumerable:true,get:function get(){return _toasts.GlobalToastList}});Object.defineProperty(exports,"toastNotifications",{enumerable:true,get:function get(){return _toasts.toastNotifications}});var _banners=__webpack_require__(1043);Object.defineProperty(exports,"GlobalBannerList",{enumerable:true,get:function get(){return _banners.GlobalBannerList}});Object.defineProperty(exports,"banners",{enumerable:true,get:function get(){return _banners.banners}})},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(1931)},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _routes=__webpack_require__(2763);exports.default=_routes.uiRoutes;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";var $=window.jQuery=window.$=module.exports=__webpack_require__(1796);__webpack_require__(1797)($)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _timefilter=__webpack_require__(2933);Object.defineProperty(exports,"timefilter",{enumerable:true,get:function get(){return _timefilter.timefilter}});Object.defineProperty(exports,"registerTimefilterWithGlobalState",{enumerable:true,get:function get(){return _timefilter.registerTimefilterWithGlobalState}})},,function(module,exports,__webpack_require__){"use strict";__webpack_require__(13);__webpack_require__(1799);module.exports=window.angular;__webpack_require__(1800);__webpack_require__(2).get("kibana",["monospaced.elastic"])},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true}):obj[key]=value;return obj}exports.default=function(handleChange){return function(name){return function(selectedOptions){if(_lodash2.default.isFunction(handleChange))return handleChange(_defineProperty({},name,_lodash2.default.get(selectedOptions,"[0].value",null)))}}};module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _detect_ie=__webpack_require__(1544);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true}):obj[key]=value;return obj}exports.default=function(handleChange){return function(name,defaultValue){return function(e){(0,_detect_ie.detectIE)()&&13!==e.keyCode||e.preventDefault();var value=_lodash2.default.get(e,"target.value",defaultValue);if(_lodash2.default.isFunction(handleChange))return handleChange(_defineProperty({},name,value))}}};module.exports=exports["default"]},,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NoResults=exports.StackedBarChartConfig=exports.InvalidLogScaleValues=exports.PieContainsAllZeros=exports.InvalidWiggleSelection=exports.ContainerTooSmall=exports.VislibError=exports.InvalidJSONProperty=exports.PersistedStateError=exports.NoDefaultIndexPattern=exports.NoDefinedIndexPatterns=exports.IndexPatternMissingIndices=exports.SavedObjectNotFound=exports.IndexPatternAlreadyExists=exports.DuplicateField=exports.FieldNotFoundInCache=exports.CacheWriteFailure=exports.RestrictedMapping=exports.MappingConflict=exports.VersionConflict=exports.FetchFailure=exports.RequestFailure=exports.KbnError=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _angular=__webpack_require__(16);var _angular2=_interopRequireDefault(_angular);var _legacy_class=__webpack_require__(77);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var canStack=(err=new Error,!!err.stack);var err;var KbnError=exports.KbnError=function(){function KbnError(msg,constructor){_classCallCheck(this,KbnError);this.message=msg;Error.captureStackTrace?Error.captureStackTrace(this,constructor||KbnError):this.stack=canStack?(new Error).stack:""}_createClass(KbnError,[{key:"displayToScreen",value:function displayToScreen(){throw this}}]);return KbnError}();(0,_legacy_class.createLegacyClass)(KbnError).inherits(Error);exports.RequestFailure=function(_KbnError){_inherits(RequestFailure,_KbnError);function RequestFailure(err,resp){_classCallCheck(this,RequestFailure);err=err||false;var _this=_possibleConstructorReturn(this,(RequestFailure.__proto__||Object.getPrototypeOf(RequestFailure)).call(this,"Request to Elasticsearch failed: "+_angular2.default.toJson(resp||err.message),RequestFailure));_this.origError=err;_this.resp=resp;return _this}return RequestFailure}(KbnError);exports.FetchFailure=function(_KbnError2){_inherits(FetchFailure,_KbnError2);function FetchFailure(resp){_classCallCheck(this,FetchFailure);var _this2=_possibleConstructorReturn(this,(FetchFailure.__proto__||Object.getPrototypeOf(FetchFailure)).call(this,"Failed to get the doc: "+_angular2.default.toJson(resp),FetchFailure));_this2.resp=resp;return _this2}return FetchFailure}(KbnError);exports.VersionConflict=function(_KbnError3){_inherits(VersionConflict,_KbnError3);function VersionConflict(resp){_classCallCheck(this,VersionConflict);var _this3=_possibleConstructorReturn(this,(VersionConflict.__proto__||Object.getPrototypeOf(VersionConflict)).call(this,"Failed to store document changes do to a version conflict.",VersionConflict));_this3.resp=resp;return _this3}return VersionConflict}(KbnError);exports.MappingConflict=function(_KbnError4){_inherits(MappingConflict,_KbnError4);function MappingConflict(field){_classCallCheck(this,MappingConflict);return _possibleConstructorReturn(this,(MappingConflict.__proto__||Object.getPrototypeOf(MappingConflict)).call(this,'Field "'+field+'" is defined with at least two different types in indices matching the pattern',MappingConflict))}return MappingConflict}(KbnError);exports.RestrictedMapping=function(_KbnError5){_inherits(RestrictedMapping,_KbnError5);function RestrictedMapping(field,index){_classCallCheck(this,RestrictedMapping);var msg='"'+field+'" is a restricted field name';index&&(msg+=", found it while attempting to fetch mapping for index pattern: "+index);return _possibleConstructorReturn(this,(RestrictedMapping.__proto__||Object.getPrototypeOf(RestrictedMapping)).call(this,msg,RestrictedMapping))}return RestrictedMapping}(KbnError);exports.CacheWriteFailure=function(_KbnError6){_inherits(CacheWriteFailure,_KbnError6);function CacheWriteFailure(){_classCallCheck(this,CacheWriteFailure);return _possibleConstructorReturn(this,(CacheWriteFailure.__proto__||Object.getPrototypeOf(CacheWriteFailure)).call(this,"A Elasticsearch cache write has failed.",CacheWriteFailure))}return CacheWriteFailure}(KbnError);exports.FieldNotFoundInCache=function(_KbnError7){_inherits(FieldNotFoundInCache,_KbnError7);function FieldNotFoundInCache(name){_classCallCheck(this,FieldNotFoundInCache);return _possibleConstructorReturn(this,(FieldNotFoundInCache.__proto__||Object.getPrototypeOf(FieldNotFoundInCache)).call(this,'The "'+name+'" field was not found in the cached mappings',FieldNotFoundInCache))}return FieldNotFoundInCache}(KbnError);exports.DuplicateField=function(_KbnError8){_inherits(DuplicateField,_KbnError8);function DuplicateField(name){_classCallCheck(this,DuplicateField);return _possibleConstructorReturn(this,(DuplicateField.__proto__||Object.getPrototypeOf(DuplicateField)).call(this,'The field "'+name+'" already exists in this mapping',DuplicateField))}return DuplicateField}(KbnError);exports.IndexPatternAlreadyExists=function(_KbnError9){_inherits(IndexPatternAlreadyExists,_KbnError9);function IndexPatternAlreadyExists(name){_classCallCheck(this,IndexPatternAlreadyExists);return _possibleConstructorReturn(this,(IndexPatternAlreadyExists.__proto__||Object.getPrototypeOf(IndexPatternAlreadyExists)).call(this,'An index pattern of "'+name+'" already exists',IndexPatternAlreadyExists))}return IndexPatternAlreadyExists}(KbnError);exports.SavedObjectNotFound=function(_KbnError10){_inherits(SavedObjectNotFound,_KbnError10);function SavedObjectNotFound(type,id,link){_classCallCheck(this,SavedObjectNotFound);var idMsg=id?" (id: "+id+")":"";var message="Could not locate that "+type+idMsg;link&&(message+=", [click here to re-create it]("+link+")");var _this10=_possibleConstructorReturn(this,(SavedObjectNotFound.__proto__||Object.getPrototypeOf(SavedObjectNotFound)).call(this,message,SavedObjectNotFound));_this10.savedObjectType=type;_this10.savedObjectId=id;return _this10}return SavedObjectNotFound}(KbnError);exports.IndexPatternMissingIndices=function(_KbnError11){_inherits(IndexPatternMissingIndices,_KbnError11);function IndexPatternMissingIndices(message){_classCallCheck(this,IndexPatternMissingIndices);var defaultMessage="IndexPattern's configured pattern does not match any indices";return _possibleConstructorReturn(this,(IndexPatternMissingIndices.__proto__||Object.getPrototypeOf(IndexPatternMissingIndices)).call(this,message&&message.length?"No matching indices found: "+message:defaultMessage,IndexPatternMissingIndices))}return IndexPatternMissingIndices}(KbnError);exports.NoDefinedIndexPatterns=function(_KbnError12){_inherits(NoDefinedIndexPatterns,_KbnError12);function NoDefinedIndexPatterns(){_classCallCheck(this,NoDefinedIndexPatterns);return _possibleConstructorReturn(this,(NoDefinedIndexPatterns.__proto__||Object.getPrototypeOf(NoDefinedIndexPatterns)).call(this,"Define at least one index pattern to continue",NoDefinedIndexPatterns))}return NoDefinedIndexPatterns}(KbnError);exports.NoDefaultIndexPattern=function(_KbnError13){_inherits(NoDefaultIndexPattern,_KbnError13);function NoDefaultIndexPattern(){_classCallCheck(this,NoDefaultIndexPattern);return _possibleConstructorReturn(this,(NoDefaultIndexPattern.__proto__||Object.getPrototypeOf(NoDefaultIndexPattern)).call(this,"Please specify a default index pattern",NoDefaultIndexPattern))}return NoDefaultIndexPattern}(KbnError);exports.PersistedStateError=function(_KbnError14){_inherits(PersistedStateError,_KbnError14);function PersistedStateError(){_classCallCheck(this,PersistedStateError);return _possibleConstructorReturn(this,(PersistedStateError.__proto__||Object.getPrototypeOf(PersistedStateError)).call(this,"Error with the persisted state",PersistedStateError))}return PersistedStateError}(KbnError);exports.InvalidJSONProperty=function(_KbnError15){_inherits(InvalidJSONProperty,_KbnError15);function InvalidJSONProperty(message){_classCallCheck(this,InvalidJSONProperty);return _possibleConstructorReturn(this,(InvalidJSONProperty.__proto__||Object.getPrototypeOf(InvalidJSONProperty)).call(this,message))}return InvalidJSONProperty}(KbnError);var VislibError=exports.VislibError=function(_KbnError16){_inherits(VislibError,_KbnError16);function VislibError(message){_classCallCheck(this,VislibError);return _possibleConstructorReturn(this,(VislibError.__proto__||Object.getPrototypeOf(VislibError)).call(this,message))}_createClass(VislibError,[{key:"displayToScreen",value:function displayToScreen(handler){handler.error(this.message)}}]);return VislibError}(KbnError);exports.ContainerTooSmall=function(_VislibError){_inherits(ContainerTooSmall,_VislibError);function ContainerTooSmall(){_classCallCheck(this,ContainerTooSmall);return _possibleConstructorReturn(this,(ContainerTooSmall.__proto__||Object.getPrototypeOf(ContainerTooSmall)).call(this,"This container is too small to render the visualization"))}return ContainerTooSmall}(VislibError);exports.InvalidWiggleSelection=function(_VislibError2){_inherits(InvalidWiggleSelection,_VislibError2);function InvalidWiggleSelection(){_classCallCheck(this,InvalidWiggleSelection);return _possibleConstructorReturn(this,(InvalidWiggleSelection.__proto__||Object.getPrototypeOf(InvalidWiggleSelection)).call(this,"In wiggle mode the area chart requires ordered values on the x-axis. Try using a Histogram or Date Histogram aggregation."))}return InvalidWiggleSelection}(VislibError);exports.PieContainsAllZeros=function(_VislibError3){_inherits(PieContainsAllZeros,_VislibError3);function PieContainsAllZeros(){_classCallCheck(this,PieContainsAllZeros);return _possibleConstructorReturn(this,(PieContainsAllZeros.__proto__||Object.getPrototypeOf(PieContainsAllZeros)).call(this,"No results displayed because all values equal 0."))}return PieContainsAllZeros}(VislibError);exports.InvalidLogScaleValues=function(_VislibError4){_inherits(InvalidLogScaleValues,_VislibError4);function InvalidLogScaleValues(){_classCallCheck(this,InvalidLogScaleValues);return _possibleConstructorReturn(this,(InvalidLogScaleValues.__proto__||Object.getPrototypeOf(InvalidLogScaleValues)).call(this,"Values less than 1 cannot be displayed on a log scale"))}return InvalidLogScaleValues}(VislibError);exports.StackedBarChartConfig=function(_VislibError5){_inherits(StackedBarChartConfig,_VislibError5);function StackedBarChartConfig(message){_classCallCheck(this,StackedBarChartConfig);return _possibleConstructorReturn(this,(StackedBarChartConfig.__proto__||Object.getPrototypeOf(StackedBarChartConfig)).call(this,message))}return StackedBarChartConfig}(VislibError);exports.NoResults=function(_VislibError6){_inherits(NoResults,_VislibError6);function NoResults(){_classCallCheck(this,NoResults);return _possibleConstructorReturn(this,(NoResults.__proto__||Object.getPrototypeOf(NoResults)).call(this,"No results found"))}return NoResults}(VislibError)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _saved_objects_client=__webpack_require__(2893);Object.defineProperty(exports,"SavedObjectsClient",{enumerable:true,get:function get(){return _saved_objects_client.SavedObjectsClient}});var _saved_object_registry=__webpack_require__(294);Object.defineProperty(exports,"SavedObjectRegistryProvider",{enumerable:true,get:function get(){return _saved_object_registry.SavedObjectRegistryProvider}});var _saved_objects_client_provider=__webpack_require__(2900);Object.defineProperty(exports,"SavedObjectsClientProvider",{enumerable:true,get:function get(){return _saved_objects_client_provider.SavedObjectsClientProvider}});var _saved_object=__webpack_require__(1258);Object.defineProperty(exports,"SavedObject",{enumerable:true,get:function get(){return _saved_object.SavedObject}});var _find_object_by_title=__webpack_require__(2901);Object.defineProperty(exports,"findObjectByTitle",{enumerable:true,get:function get(){return _find_object_by_title.findObjectByTitle}})},,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FeatureCatalogueCategory=exports.FeatureCatalogueRegistryProvider=void 0;var _registry=__webpack_require__(107);exports.FeatureCatalogueRegistryProvider=(0,_registry.uiRegistry)({name:"featureCatalogue",index:["id"],group:["category"],order:["title"],filter:function filter(featureCatalogItem){return Object.keys(featureCatalogItem).length>0}});exports.FeatureCatalogueCategory={ADMIN:"admin",DATA:"data",OTHER:"other"}},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MetricAggType=void 0;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _agg_type=__webpack_require__(822);var _field_formats=__webpack_require__(116);var _legacy_class=__webpack_require__(77);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(0,_legacy_class.createLegacyClass)(MetricAggType).inherits(_agg_type.AggType);function MetricAggType(config){MetricAggType.Super.call(this,config);_lodash2.default.forOwn(config,function(val,key){_lodash2.default.has(MetricAggType.prototype,key)&&(this[key]=val)},this)}MetricAggType.prototype.subtype="Metric Aggregations";MetricAggType.prototype.getValue=function(agg,bucket){var isSettableToZero=-1!==["cardinality","sum"].indexOf(agg.__type.name);if(!bucket[agg.id]&&isSettableToZero)return 0;return bucket[agg.id]&&bucket[agg.id].value};MetricAggType.prototype.getFormat=function(agg){var field=agg.getField();return field?field.format:_field_formats.fieldFormats.getDefaultInstance("number")};MetricAggType.prototype.isScalable=function(){return false};exports.MetricAggType=MetricAggType},,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _init_after_bindings_workaround=__webpack_require__(3225);Object.defineProperty(exports,"InitAfterBindingsWorkaround",{enumerable:true,get:function get(){return _init_after_bindings_workaround.InitAfterBindingsWorkaround}});Object.defineProperty(exports,"callAfterBindingsWorkaround",{enumerable:true,get:function get(){return _init_after_bindings_workaround.callAfterBindingsWorkaround}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _CATEGORY_DISPLAY_NAM;function _defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true}):obj[key]=value;return obj}var CATEGORY={BASIC:"basic",DATA:"data",GRAPHIC:"graphic",MAP:"map",OTHER:"other",TIME:"time",HIDDEN:"hidden"};var CATEGORY_DISPLAY_NAMES=(_CATEGORY_DISPLAY_NAM={},_defineProperty(_CATEGORY_DISPLAY_NAM,CATEGORY.BASIC,"Basic Charts"),_defineProperty(_CATEGORY_DISPLAY_NAM,CATEGORY.DATA,"Data"),_defineProperty(_CATEGORY_DISPLAY_NAM,CATEGORY.GRAPHIC,"Graphic"),_defineProperty(_CATEGORY_DISPLAY_NAM,CATEGORY.MAP,"Maps"),_defineProperty(_CATEGORY_DISPLAY_NAM,CATEGORY.OTHER,"Other"),_defineProperty(_CATEGORY_DISPLAY_NAM,CATEGORY.TIME,"Time Series"),_CATEGORY_DISPLAY_NAM);exports.CATEGORY=CATEGORY;exports.CATEGORY_DISPLAY_NAMES=CATEGORY_DISPLAY_NAMES},,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createLegacyClass=createLegacyClass;function describeConst(val){return{writable:false,enumerable:false,configurable:false,value:val}}var props={inherits:describeConst(function(SuperClass){var prototype=Object.create(SuperClass.prototype,{constructor:describeConst(this),superConstructor:describeConst(SuperClass)});Object.defineProperties(this,{prototype:describeConst(prototype),Super:describeConst(SuperClass)});return this})};function createLegacyClass(ClassConstructor){return Object.defineProperties(ClassConstructor,props)}},,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VisFactoryProvider=void 0;var _vis_types=__webpack_require__(4059);exports.VisFactoryProvider=function VisFactoryProvider(Private){var AngularVisType=Private(_vis_types.AngularVisTypeProvider);var VislibVisType=Private(_vis_types.VislibVisTypeProvider);return{createBaseVisualization:function createBaseVisualization(config){return new _vis_types.BaseVisType(config)},createAngularVisualization:function createAngularVisualization(config){return new AngularVisType(config)},createReactVisualization:function createReactVisualization(config){return new _vis_types.ReactVisType(config)},createVislibVisualization:function createVislibVisualization(config){return new VislibVisType(config)}}}},,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _add_delete_buttons=__webpack_require__(147);var _add_delete_buttons2=_interopRequireDefault(_add_delete_buttons);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function AggRow(props){var iconClassName="fa fa-eye-slash";var iconRowClassName="vis_editor__agg_row-icon";var last=_lodash2.default.last(props.siblings);if(last.id===props.model.id){iconClassName="fa fa-eye";iconRowClassName+=" last"}var dragHandle=void 0;props.disableDelete||(dragHandle=_react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiToolTip,{content:"Sort"},_react2.default.createElement("div",{className:"vis_editor__agg_sort thor__button-outlined-default sm"},_react2.default.createElement("i",{className:"fa fa-sort"})))));return _react2.default.createElement("div",{className:"vis_editor__agg_row"},_react2.default.createElement("div",{className:"vis_editor__agg_row-item","data-test-subj":"aggRow"},_react2.default.createElement("div",{className:iconRowClassName},_react2.default.createElement("i",{className:iconClassName})),props.children,dragHandle,_react2.default.createElement(_add_delete_buttons2.default,{testSubj:"addMetric",addTooltip:"Add Metric",deleteTooltip:"Delete Metric",onAdd:props.onAdd,onDelete:props.onDelete,disableDelete:props.disableDelete})))}AggRow.propTypes={disableDelete:_propTypes2.default.bool,model:_propTypes2.default.object,onAdd:_propTypes2.default.func,onDelete:_propTypes2.default.func,siblings:_propTypes2.default.array};exports.default=AggRow;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.__newPlatformInit__=__newPlatformInit__;var metadata=exports.metadata=null;function __newPlatformInit__(legacyMetadata){if(null!==metadata)throw new Error("ui/metadata can only be initialized once");exports.metadata=metadata=legacyMetadata}},,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isDefaultTypeIndexPattern=exports.hasSearchStategyForIndexPattern=exports.luceneStringToDsl=exports.buildQueryFromFilters=exports.decorateQuery=exports.migrateFilter=exports.SearchSourceProvider=exports.SavedObjectProvider=void 0;var _saved_object=__webpack_require__(2984);Object.defineProperty(exports,"SavedObjectProvider",{enumerable:true,get:function get(){return _saved_object.SavedObjectProvider}});var _search_source=__webpack_require__(812);Object.defineProperty(exports,"SearchSourceProvider",{enumerable:true,get:function get(){return _search_source.SearchSourceProvider}});Object.defineProperty(exports,"migrateFilter",{enumerable:true,get:function get(){return _search_source.migrateFilter}});Object.defineProperty(exports,"decorateQuery",{enumerable:true,get:function get(){return _search_source.decorateQuery}});Object.defineProperty(exports,"buildQueryFromFilters",{enumerable:true,get:function get(){return _search_source.buildQueryFromFilters}});Object.defineProperty(exports,"luceneStringToDsl",{enumerable:true,get:function get(){return _search_source.luceneStringToDsl}});var _search_strategy=__webpack_require__(1282);Object.defineProperty(exports,"hasSearchStategyForIndexPattern",{enumerable:true,get:function get(){return _search_strategy.hasSearchStategyForIndexPattern}});Object.defineProperty(exports,"isDefaultTypeIndexPattern",{enumerable:true,get:function get(){return _search_strategy.isDefaultTypeIndexPattern}});__webpack_require__(3033)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VisTypesRegistryProvider=void 0;var _registry=__webpack_require__(107);exports.VisTypesRegistryProvider=(0,_registry.uiRegistry)({name:"visTypes",index:["name"],order:["title"]})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Schemas=void 0;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _indexed_array=__webpack_require__(249);var _agg_params=__webpack_require__(819);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var Schemas=function Schemas(schemas){var _this=this;_classCallCheck(this,Schemas);(0,_lodash2.default)(schemas||[]).map(function(schema){if(!schema.name)throw new Error("all schema must have a unique name");if("split"===schema.name){schema.params=[{name:"row",default:true}];schema.editor=__webpack_require__(3084)}else"radius"===schema.name&&(schema.editor=__webpack_require__(3085));_lodash2.default.defaults(schema,{min:0,max:Infinity,group:"buckets",title:schema.name,aggFilter:"*",editor:false,params:[],deprecate:false});schema.params=new _agg_params.AggParams(schema.params);return schema}).tap(function(schemas){_this.all=new _indexed_array.IndexedArray({index:["name"],group:["group"],immutable:true,initialSet:schemas})}).groupBy("group").forOwn(function(group,groupName){_this[groupName]=new _indexed_array.IndexedArray({index:["name"],immutable:true,initialSet:group})}).commit()};exports.Schemas=Schemas},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var metricAggs=[{label:"Average",value:"avg"},{label:"Cardinality",value:"cardinality"},{label:"Count",value:"count"},{label:"Filter Ratio",value:"filter_ratio"},{label:"Max",value:"max"},{label:"Min",value:"min"},{label:"Percentile",value:"percentile"},{label:"Percentile Rank",value:"percentile_rank"},{label:"Static Value",value:"static"},{label:"Std. Deviation",value:"std_deviation"},{label:"Sum",value:"sum"},{label:"Sum of Squares",value:"sum_of_squares"},{label:"Top Hit",value:"top_hit"},{label:"Value Count",value:"value_count"},{label:"Variance",value:"variance"}];var pipelineAggs=[{label:"Bucket Script",value:"calculation"},{label:"Cumulative Sum",value:"cumulative_sum"},{label:"Derivative",value:"derivative"},{label:"Moving Average",value:"moving_average"},{label:"Positive Only",value:"positive_only"},{label:"Serial Difference",value:"serial_diff"}];var siblingAggs=[{label:"Overall Average",value:"avg_bucket"},{label:"Overall Max",value:"max_bucket"},{label:"Overall Min",value:"min_bucket"},{label:"Overall Std. Deviation",value:"std_deviation_bucket"},{label:"Overall Sum",value:"sum_bucket"},{label:"Overall Sum of Squares",value:"sum_of_squares_bucket"},{label:"Overall Variance",value:"variance_bucket"}];var specialAggs=[{label:"Series Agg",value:"series_agg"},{label:"Math",value:"math"}];var allAggOptions=[].concat(metricAggs,pipelineAggs,siblingAggs,specialAggs);function filterByPanelType(panelType){return function(agg){if("table"===panelType)return"series_agg"!==agg.value;return true}}function AggSelect(props){var siblings=props.siblings,panelType=props.panelType,value=props.value;var selectedOption=allAggOptions.find(function(option){return value===option.value});var selectedOptions=selectedOption?[selectedOption]:[];var enablePipelines=siblings.some(function(s){return!!metricAggs.find(function(m){return m.value===s.type})});siblings.length<=1&&(enablePipelines=false);var options=void 0;options="metrics"===panelType?metricAggs:[{label:"Metric Aggregations",options:metricAggs},{label:"Parent Pipeline Aggregations",options:pipelineAggs.filter(filterByPanelType(panelType)).map(function(agg){return _extends({},agg,{disabled:!enablePipelines})})},{label:"Sibling Pipeline Aggregations",options:siblingAggs.map(function(agg){return _extends({},agg,{disabled:!enablePipelines})})},{label:"Special Aggregations",options:specialAggs.map(function(agg){return _extends({},agg,{disabled:!enablePipelines})})}];var handleChange=function handleChange(selectedOptions){if(!selectedOptions||selectedOptions.length<=0)return;props.onChange(selectedOptions)};return _react2.default.createElement("div",{"data-test-subj":"aggSelector",className:"vis_editor__row_item"},_react2.default.createElement(_eui.EuiComboBox,{isClearable:false,placeholder:"Select aggregation",options:options,selectedOptions:selectedOptions,onChange:handleChange,singleSelection:true}))}AggSelect.propTypes={onChange:_propTypes2.default.func,panelType:_propTypes2.default.string,siblings:_propTypes2.default.array,value:_propTypes2.default.string};exports.default=AggSelect;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function(handleChange,model){return function(part){var doc=_lodash2.default.assign({},model,part);handleChange(doc)}};module.exports=exports["default"]},,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.uiRegistry=uiRegistry;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _indexed_array=__webpack_require__(249);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var notPropsOptNames=_indexed_array.IndexedArray.OPT_NAMES.concat("constructor","invokeProviders");function uiRegistry(spec){spec=spec||{};var constructor=_lodash2.default.has(spec,"constructor")&&spec.constructor;var filter=_lodash2.default.has(spec,"filter")&&spec.filter;var invokeProviders=_lodash2.default.has(spec,"invokeProviders")&&spec.invokeProviders;var iaOpts=_lodash2.default.defaults(_lodash2.default.pick(spec,_indexed_array.IndexedArray.OPT_NAMES),{index:["name"]});var props=_lodash2.default.omit(spec,notPropsOptNames);var providers=[];var registry=function registry(Private,$injector){iaOpts.initialSet=invokeProviders?$injector.invoke(invokeProviders,void 0,{providers:providers}):providers.map(Private);filter&&_lodash2.default.isFunction(filter)&&(iaOpts.initialSet=iaOpts.initialSet.filter(function(item){return filter(item)}));var modules=new _indexed_array.IndexedArray(iaOpts);_lodash2.default.assign(modules,props);constructor&&(modules=$injector.invoke(constructor,modules)||modules);return modules};registry.displayName="[registry "+props.name+"]";registry.register=function(privateModule){providers.push(privateModule);return registry};return registry}},,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fieldFormats=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _chrome=__webpack_require__(8);var _chrome2=_interopRequireDefault(_chrome);var _field_format=__webpack_require__(596);var _indexed_array=__webpack_require__(249);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var FieldFormatRegistry=function(_IndexedArray){_inherits(FieldFormatRegistry,_IndexedArray);function FieldFormatRegistry(){_classCallCheck(this,FieldFormatRegistry);var _this=_possibleConstructorReturn(this,(FieldFormatRegistry.__proto__||Object.getPrototypeOf(FieldFormatRegistry)).call(this,{group:["fieldType"],index:["id","name"]}));_this.getDefaultConfig=function(fieldType){return _this._defaultMap[fieldType]||_this._defaultMap._default_};_this.getType=function(formatId){return _this.byId[formatId]};_this.getDefaultType=function(fieldType){return _this.byId[_this.getDefaultConfig(fieldType).id]};_this.getInstance=_lodash2.default.memoize(function(formatId){var FieldFormat=this.byId[formatId];if(!FieldFormat)throw new Error("Field Format '"+formatId+"' not found!");return new FieldFormat(null,this.getConfig)});_this.getDefaultInstance=_lodash2.default.memoize(function(fieldType){var conf=this.getDefaultConfig(fieldType);var FieldFormat=this.byId[conf.id];return new FieldFormat(conf.params,this.getConfig)});_this.name="fieldFormats";_this.displayName="[registry "+_this.name+"]";_this.register=function(module){_this.push(module(_field_format.FieldFormat));return _this};_this._uiSettings=_chrome2.default.getUiSettingsClient();_this.getConfig=function(){var _this$_uiSettings;return(_this$_uiSettings=_this._uiSettings).get.apply(_this$_uiSettings,arguments)};_this._defaultMap=[];_this._providers=[];_this.init();return _this}_createClass(FieldFormatRegistry,[{key:"init",value:function init(){var _this2=this;this.parseDefaultTypeMap(this._uiSettings.get("format:defaultTypeMap"));this._uiSettings.subscribe(function(_ref){var key=_ref.key,newValue=_ref.newValue;"format:defaultTypeMap"===key&&_this2.parseDefaultTypeMap(newValue)})}},{key:"parseDefaultTypeMap",value:function parseDefaultTypeMap(value){this._defaultMap=value;_lodash2.default.forOwn(this,function(fn){_lodash2.default.isFunction(fn)&&fn.cache&&(fn.cache=new _lodash2.default.memoize.Cache)})}}]);return FieldFormatRegistry}(_indexed_array.IndexedArray);exports.fieldFormats=new FieldFormatRegistry},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.parseInterval=parseInterval;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _moment=__webpack_require__(10);var _moment2=_interopRequireDefault(_moment);var _datemath=__webpack_require__(83);var _datemath2=_interopRequireDefault(_datemath);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var INTERVAL_STRING_RE=new RegExp("^([0-9\\.]*)\\s*("+_datemath2.default.units.join("|")+")$");function parseInterval(interval){var matches=String(interval).trim().match(INTERVAL_STRING_RE);if(!matches)return null;try{var value=parseFloat(matches[1])||1;var unit=matches[2];var duration=_moment2.default.duration(value,unit);var selectedUnit=_lodash2.default.find(_datemath2.default.units,function(unit){return Math.abs(duration.as(unit))>=1});return _moment2.default.duration(duration.as(selectedUnit),selectedUnit)}catch(e){return null}}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(112);__webpack_require__(1335);__webpack_require__(3229);__webpack_require__(2).get("kibana",["ui.ace"]);module.exports=window.ace},,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});(function(DashboardViewMode){DashboardViewMode["EDIT"]="edit";DashboardViewMode["VIEW"]="view"})(exports.DashboardViewMode||(exports.DashboardViewMode={}))},,,,function(module,exports,__webpack_require__){"use strict";var moment=module.exports=__webpack_require__(2927);moment.tz.load(__webpack_require__(2928))},,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _url=__webpack_require__(2769);Object.defineProperty(exports,"KbnUrlProvider",{enumerable:true,get:function get(){return _url.KbnUrlProvider}});var _redirect_when_missing=__webpack_require__(2771);Object.defineProperty(exports,"RedirectWhenMissingProvider",{enumerable:true,get:function get(){return _redirect_when_missing.RedirectWhenMissingProvider}});var _modify_url=__webpack_require__(2850);Object.defineProperty(exports,"modifyUrl",{enumerable:true,get:function get(){return _modify_url.modifyUrl}})},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.nodeTypes=void 0;var _function=__webpack_require__(3011);var functionType=_interopRequireWildcard(_function);var _literal=__webpack_require__(599);var literal=_interopRequireWildcard(_literal);var _named_arg=__webpack_require__(3021);var namedArg=_interopRequireWildcard(_named_arg);var _wildcard=__webpack_require__(814);var wildcard=_interopRequireWildcard(_wildcard);function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);newObj.default=obj;return newObj}exports.nodeTypes={function:functionType,literal:literal,namedArg:namedArg,wildcard:wildcard}},,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function AddDeleteButtons(props){var testSubj=props.testSubj;var createDelete=function createDelete(){if(props.disableDelete)return null;return _react2.default.createElement(_eui.EuiToolTip,{content:props.deleteTooltip},_react2.default.createElement("button",{"data-test-subj":testSubj+"DeleteBtn","aria-label":props.deleteTooltip,className:"thor__button-outlined-danger thor__button-delete sm",onClick:props.onDelete},_react2.default.createElement("i",{className:"fa fa-trash-o"})))};var createAdd=function createAdd(){if(props.disableAdd)return null;return _react2.default.createElement(_eui.EuiToolTip,{content:props.addTooltip},_react2.default.createElement("button",{"data-test-subj":testSubj+"AddBtn","aria-label":props.addTooltip,className:"thor__button-outlined-default sm thor__button-add",onClick:props.onAdd},_react2.default.createElement("i",{className:"fa fa-plus"})))};var deleteBtn=createDelete();var addBtn=createAdd();var clone=void 0;props.onClone&&!props.disableAdd&&(clone=_react2.default.createElement(_eui.EuiToolTip,{content:props.cloneTooltip},_react2.default.createElement("button",{"data-test-subj":testSubj+"CloneBtn","aria-label":props.cloneTooltip,className:"thor__button-outlined-default thor__button-clone sm",onClick:props.onClone},_react2.default.createElement("i",{className:"fa fa-files-o"}))));return _react2.default.createElement("div",{className:"add_delete__buttons"},clone,addBtn,deleteBtn)}AddDeleteButtons.defaultProps={testSubj:"Add",addTooltip:"Add",deleteTooltip:"Delete",cloneTooltip:"Clone"};AddDeleteButtons.propTypes={addTooltip:_propTypes2.default.string,deleteTooltip:_propTypes2.default.string,cloneTooltip:_propTypes2.default.string,disableAdd:_propTypes2.default.bool,disableDelete:_propTypes2.default.bool,onClone:_propTypes2.default.func,onAdd:_propTypes2.default.func,onDelete:_propTypes2.default.func};exports.default=AddDeleteButtons;module.exports=exports["default"]},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";arr=[Element.prototype,CharacterData.prototype,DocumentType.prototype],void arr.forEach(function(item){if(item.hasOwnProperty("remove"))return;Object.defineProperty(item,"remove",{configurable:true,enumerable:true,writable:true,value:function remove(){null!==this.parentNode&&this.parentNode.removeChild(this)}})});var arr},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var core_system_1=__webpack_require__(1789);exports.CoreSystem=core_system_1.CoreSystem},,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _indexed_array=__webpack_require__(2874);Object.defineProperty(exports,"IndexedArray",{enumerable:true,get:function get(){return _indexed_array.IndexedArray}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.recentlyAccessed=exports.PersistedLog=void 0;var _persisted_log=__webpack_require__(1268);Object.defineProperty(exports,"PersistedLog",{enumerable:true,get:function get(){return _persisted_log.PersistedLog}});var _recently_accessed=__webpack_require__(2936);Object.defineProperty(exports,"recentlyAccessed",{enumerable:true,get:function get(){return _recently_accessed.recentlyAccessed}});__webpack_require__(1268)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createDashboardEditUrl=createDashboardEditUrl;exports.DashboardConstants={ADD_VISUALIZATION_TO_DASHBOARD_MODE_PARAM:"addToDashboard",NEW_VISUALIZATION_ID_PARAM:"addVisualization",LANDING_PAGE_PATH:"/dashboards",CREATE_NEW_DASHBOARD_URL:"/dashboard"};var DASHBOARD_GRID_COLUMN_COUNT=exports.DASHBOARD_GRID_COLUMN_COUNT=48;exports.DASHBOARD_GRID_HEIGHT=20;exports.DEFAULT_PANEL_WIDTH=DASHBOARD_GRID_COLUMN_COUNT/2;exports.DEFAULT_PANEL_HEIGHT=15;function createDashboardEditUrl(id){return"/dashboard/"+id}},,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(3);var _custom_color_picker=__webpack_require__(4580);var _custom_color_picker2=_interopRequireDefault(_custom_color_picker);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var ColorPicker=function(_Component){_inherits(ColorPicker,_Component);function ColorPicker(props){_classCallCheck(this,ColorPicker);var _this=_possibleConstructorReturn(this,(ColorPicker.__proto__||Object.getPrototypeOf(ColorPicker)).call(this,props));_this.state={displayPicker:false,color:{}};_this.handleClick=_this.handleClick.bind(_this);_this.handleChange=_this.handleChange.bind(_this);_this.handleClear=_this.handleClear.bind(_this);_this.handleClose=_this.handleClose.bind(_this);return _this}_createClass(ColorPicker,[{key:"handleChange",value:function handleChange(color){var rgb=color.rgb;var part={};part[this.props.name]="rgba("+rgb.r+","+rgb.g+","+rgb.b+","+rgb.a+")";this.props.onChange&&this.props.onChange(part)}},{key:"handleClick",value:function handleClick(){this.setState({displayPicker:!this.state.displayColorPicker})}},{key:"handleClose",value:function handleClose(){this.setState({displayPicker:false})}},{key:"handleClear",value:function handleClear(){var part={};part[this.props.name]=null;this.props.onChange(part)}},{key:"renderSwatch",value:function renderSwatch(){if(!this.props.value)return _react2.default.createElement("button",{"aria-label":"Color picker, not accessible",className:"vis_editor__color_picker-swatch-empty",onClick:this.handleClick});return _react2.default.createElement("button",{"aria-label":"Color picker ({this.props.value}), not accessible",style:{backgroundColor:this.props.value},className:"vis_editor__color_picker-swatch",onClick:this.handleClick})}},{key:"render",value:function render(){var swatch=this.renderSwatch();var value=this.props.value||void 0;var clear=void 0;this.props.disableTrash||(clear=_react2.default.createElement("div",{className:"vis_editor__color_picker-clear",onClick:this.handleClear},_react2.default.createElement(_eui.EuiToolTip,{content:"Clear"},_react2.default.createElement("i",{className:"fa fa-ban"}))));return _react2.default.createElement("div",{className:"vis_editor__color_picker"},swatch,clear,this.state.displayPicker?_react2.default.createElement("div",{className:"vis_editor__color_picker-popover"},_react2.default.createElement("div",{className:"vis_editor__color_picker-cover",onClick:this.handleClose}),_react2.default.createElement(_custom_color_picker2.default,{color:value,onChangeComplete:this.handleChange})):null)}}]);return ColorPicker}(_react.Component);ColorPicker.propTypes={name:_propTypes2.default.string.isRequired,value:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.number]),disableTrash:_propTypes2.default.bool,onChange:_propTypes2.default.func};exports.default=ColorPicker;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true}):obj[key]=value;return obj}function YesNo(props){var name=props.name,value=props.value;var handleChange=function handleChange(value){var name=props.name;return function(){var parts=_defineProperty({},name,value);props.onChange(parts)}};var inputName=name+_lodash2.default.uniqueId();return _react2.default.createElement("div",{className:"thor__yes_no"},_react2.default.createElement("label",null,_react2.default.createElement("input",{type:"radio",name:inputName,checked:Boolean(value),value:"yes",onChange:handleChange(1)}),"Yes"),_react2.default.createElement("label",null,_react2.default.createElement("input",{type:"radio",name:inputName,checked:!Boolean(value),value:"no",onChange:handleChange(0)}),"No"))}YesNo.propTypes={name:_propTypes2.default.string,value:_propTypes2.default.oneOfType([_propTypes2.default.number,_propTypes2.default.string])};exports.default=YesNo;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(3);var _generate_by_type_filter=__webpack_require__(4583);var _generate_by_type_filter2=_interopRequireDefault(_generate_by_type_filter);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function FieldSelect(props){var type=props.type,fields=props.fields,indexPattern=props.indexPattern,value=props.value,onChange=props.onChange,disabled=props.disabled;if("count"===type)return null;var options=(fields[indexPattern]||[]).filter((0,_generate_by_type_filter2.default)(props.restrict)).map(function(field){return{label:field.name,value:field.name}});var selectedOption=options.find(function(option){return value===option.value});var selectedOptions=selectedOption?[selectedOption]:[];return _react2.default.createElement(_eui.EuiComboBox,{placeholder:"Select field...",isDisabled:disabled,options:options,selectedOptions:selectedOptions,onChange:onChange,singleSelection:true})}FieldSelect.defaultProps={indexPattern:"*",disabled:false,restrict:"none"};FieldSelect.propTypes={disabled:_propTypes2.default.bool,fields:_propTypes2.default.object,id:_propTypes2.default.string,indexPattern:_propTypes2.default.string,onChange:_propTypes2.default.func,restrict:_propTypes2.default.string,type:_propTypes2.default.string,value:_propTypes2.default.string};exports.default=FieldSelect;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";__webpack_require__(4690);window.L=module.exports=__webpack_require__(4691);window.L.Browser.touch=false;window.L.Browser.pointer=false;__webpack_require__(4692);__webpack_require__(4693);__webpack_require__(4694);__webpack_require__(4695);__webpack_require__(4696)},,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _ast=__webpack_require__(1290);Object.defineProperty(exports,"fromLegacyKueryExpression",{enumerable:true,get:function get(){return _ast.fromLegacyKueryExpression}});Object.defineProperty(exports,"fromKueryExpression",{enumerable:true,get:function get(){return _ast.fromKueryExpression}});Object.defineProperty(exports,"fromLiteralExpression",{enumerable:true,get:function get(){return _ast.fromLiteralExpression}});Object.defineProperty(exports,"toElasticsearchQuery",{enumerable:true,get:function get(){return _ast.toElasticsearchQuery}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _documentation_links=__webpack_require__(483);Object.defineProperty(exports,"ELASTIC_WEBSITE_URL",{enumerable:true,get:function get(){return _documentation_links.ELASTIC_WEBSITE_URL}});Object.defineProperty(exports,"DOC_LINK_VERSION",{enumerable:true,get:function get(){return _documentation_links.DOC_LINK_VERSION}});Object.defineProperty(exports,"documentationLinks",{enumerable:true,get:function get(){return _documentation_links.documentationLinks}});var _get_doc_link=__webpack_require__(3031);Object.defineProperty(exports,"getDocLink",{enumerable:true,get:function get(){return _get_doc_link.getDocLink}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BucketAggType=void 0;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _agg_type=__webpack_require__(822);var _legacy_class=__webpack_require__(77);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(0,_legacy_class.createLegacyClass)(BucketAggType).inherits(_agg_type.AggType);function BucketAggType(config){BucketAggType.Super.call(this,config);_lodash2.default.isFunction(config.getKey)&&(this.getKey=config.getKey)}BucketAggType.prototype.getKey=function(bucket,key){return key||bucket.key};exports.BucketAggType=BucketAggType},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _time_buckets=__webpack_require__(3092);Object.defineProperty(exports,"TimeBuckets",{enumerable:true,get:function get(){return _time_buckets.TimeBuckets}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterBarQueryFilterProvider=FilterBarQueryFilterProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _only_disabled=__webpack_require__(3132);var _only_state_changed=__webpack_require__(3133);var _uniq_filters=__webpack_require__(1325);var _compare_filters=__webpack_require__(607);var _events=__webpack_require__(398);var _map_and_flatten_filters=__webpack_require__(830);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function FilterBarQueryFilterProvider(Private,$rootScope,getAppState,globalState,config){var EventEmitter=Private(_events.EventsProvider);var mapAndFlattenFilters=Private(_map_and_flatten_filters.FilterBarLibMapAndFlattenFiltersProvider);var queryFilter=new EventEmitter;queryFilter.getFilters=function(){var compareOptions={disabled:true,negate:true};var appFilters=queryFilter.getAppFilters();var globalFilters=queryFilter.getGlobalFilters();return(0,_uniq_filters.uniqFilters)(globalFilters.concat(appFilters),compareOptions)};queryFilter.getAppFilters=function(){var appState=getAppState();if(!appState||!appState.filters)return[];appState.filters=validateStateFilters(appState);return appState.filters?_lodash2.default.map(appState.filters,appendStoreType("appState")):[]};queryFilter.getGlobalFilters=function(){if(!globalState.filters)return[];globalState.filters=validateStateFilters(globalState);return _lodash2.default.map(globalState.filters,appendStoreType("globalState"))};queryFilter.addFilters=function(filters,global){if(void 0===global){var configDefault=config.get("filters:pinnedByDefault");false!==configDefault&&true!==configDefault||(global=configDefault)}var appState=getAppState();var filterState=global?globalState:appState;Array.isArray(filters)||(filters=[filters]);return mapAndFlattenFilters(filters).then(function(filters){filterState.filters||(filterState.filters=[]);filterState.filters=filterState.filters.concat(filters)})};queryFilter.removeFilter=function(matchFilter){var appState=getAppState();var filter=_lodash2.default.omit(matchFilter,["$$hashKey"]);var state=void 0;var index=void 0;if(appState){index=_lodash2.default.findIndex(appState.filters,filter);-1!==index&&(state=appState)}if(!state){index=_lodash2.default.findIndex(globalState.filters,filter);if(-1===index)return;state=globalState}state.filters.splice(index,1)};queryFilter.removeAll=function(){var appState=getAppState();appState.filters=[];globalState.filters=[]};queryFilter.toggleFilter=function(filter,force){var disabled=_lodash2.default.isUndefined(force)?!filter.meta.disabled:!!force;filter.meta.disabled=disabled;return filter};queryFilter.toggleAll=function(force){function doToggle(filter){queryFilter.toggleFilter(filter,force)}executeOnFilters(doToggle)};queryFilter.invertFilter=function(filter){filter.meta.negate=!filter.meta.negate;return filter};queryFilter.invertAll=function(){executeOnFilters(queryFilter.invertFilter)};queryFilter.pinFilter=function(filter,force){var appState=getAppState();if(!appState)return filter;Array.isArray(globalState.filters)||(globalState.filters=[]);Array.isArray(appState.filters)||(appState.filters=[]);var appIndex=_lodash2.default.findIndex(appState.filters,function(appFilter){return _lodash2.default.isEqual(appFilter,filter)});if(-1!==appIndex&&false!==force){appState.filters.splice(appIndex,1);globalState.filters.push(filter)}else{var globalIndex=_lodash2.default.findIndex(globalState.filters,function(globalFilter){return _lodash2.default.isEqual(globalFilter,filter)});if(-1===globalIndex||true===force)return filter;globalState.filters.splice(globalIndex,1);appState.filters.push(filter)}return filter};queryFilter.pinAll=function(force){function pin(filter){queryFilter.pinFilter(filter,force)}executeOnFilters(pin)};initWatchers();return queryFilter;function validateStateFilters(state){var compacted=_lodash2.default.compact(state.filters);if(state.filters.length!==compacted.length){state.filters=compacted;state.replace()}return state.filters}function saveState(){var appState=getAppState();appState&&appState.save();globalState.save()}function appendStoreType(type){return function(filter){filter.$state={store:type};return filter}}function executeOnFilters(fn){var appState=getAppState();var globalFilters=[];var appFilters=[];globalState.filters&&(globalFilters=globalState.filters);appState&&appState.filters&&(appFilters=appState.filters);globalFilters.concat(appFilters).forEach(fn)}function mergeStateFilters(gFilters,aFilters,compareOptions){var globalFilters=gFilters?_lodash2.default.cloneDeep(gFilters):[];var appFilters=aFilters?_lodash2.default.cloneDeep(aFilters):[];compareOptions=_lodash2.default.defaults(compareOptions||{},{disabled:true});_lodash2.default.each(appFilters,function(filter,i){var match=_lodash2.default.find(globalFilters,function(globalFilter){return(0,_compare_filters.compareFilters)(globalFilter,filter,compareOptions)});if(!match)return;_lodash2.default.assign(match.meta,filter.meta);appFilters.splice(i,1)});globalFilters.reverse();appFilters.reverse();return[(0,_uniq_filters.uniqFilters)(globalFilters,{disabled:true}).reverse(),(0,_uniq_filters.uniqFilters)(appFilters,{disabled:true}).reverse()]}function initWatchers(){var removeAppStateWatchers=void 0;$rootScope.$watch(getAppState,function(){removeAppStateWatchers&&removeAppStateWatchers();removeAppStateWatchers=initAppStateWatchers()});function initAppStateWatchers(){var stateWatchers=[{fn:$rootScope.$watch,deep:true,get:queryFilter.getGlobalFilters},{fn:$rootScope.$watch,deep:true,get:queryFilter.getAppFilters}];return $rootScope.$watchMulti(stateWatchers,function(next,prev){if(_lodash2.default.isEqual(next,prev))return;var doUpdate=false;var doFetch=false;var filters=mergeStateFilters(next[0],next[1]);var globalFilters=filters[0];var appFilters=filters[1];var appState=getAppState();var globalChanged=!_lodash2.default.isEqual(next[0],globalFilters);var appChanged=!_lodash2.default.isEqual(next[1],appFilters);if(globalChanged||appChanged){globalState.filters=globalFilters;appState&&(appState.filters=appFilters);return}getActions();if(!doUpdate)return;saveState();queryFilter.emit("update").then(function(){if(!doFetch)return;queryFilter.emit("fetch")});function getActions(){var newFilters=[];var oldFilters=[];stateWatchers.forEach(function(watcher,i){var nextVal=next[i];var prevVal=prev[i];newFilters=newFilters.concat(nextVal);oldFilters=oldFilters.concat(prevVal);if(nextVal===prevVal)return;nextVal&&(doUpdate=true);(0,_only_disabled.onlyDisabled)(nextVal,prevVal)||(doFetch=true)});doFetch&&newFilters.length===oldFilters.length&&(0,_only_state_changed.onlyStateChanged)(newFilters,oldFilters)&&(doFetch=false)}})}}}},,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SavedObjectRegistryProvider=void 0;var _registry=__webpack_require__(107);exports.SavedObjectRegistryProvider=(0,_registry.uiRegistry)({name:"savedObjects",index:["loaderProperties.name"],order:["loaderProperties.name"]})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildRangeFilter=buildRangeFilter;exports.getRangeScript=getRangeScript;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var OPERANDS_IN_RANGE=2;var operators={gt:">",gte:">=",lte:"<=",lt:"<"};var comparators={gt:"boolean gt(Supplier s, def v) {return s.get() > v}",gte:"boolean gte(Supplier s, def v) {return s.get() >= v}",lte:"boolean lte(Supplier s, def v) {return s.get() <= v}",lt:"boolean lt(Supplier s, def v) {return s.get() < v}"};function formatValue(field,params){return _lodash2.default.map(params,function(val,key){return operators[key]+field.format.convert(val)}).join(" ")}function buildRangeFilter(field,params,indexPattern,formattedValue){var filter={meta:{index:indexPattern.id}};formattedValue&&(filter.meta.formattedValue=formattedValue);params=_lodash2.default.mapValues(params,function(value){return"number"===field.type?parseFloat(value):value});if("gte"in params&&"gt"in params)throw new Error("gte and gt are mutually exclusive");if("lte"in params&&"lt"in params)throw new Error("lte and lt are mutually exclusive");var totalInfinite=["gt","lt"].reduce(function(totalInfinite,op){var key=op in params?op:op+"e";var isInfinite=Infinity===Math.abs(params[key]);if(isInfinite){totalInfinite++;delete params[key]}return totalInfinite},0);if(totalInfinite===OPERANDS_IN_RANGE){filter.match_all={};filter.meta.field=field.name}else if(field.scripted){filter.script=getRangeScript(field,params);filter.script.script.params.value=formatValue(field,filter.script.script.params);filter.meta.field=field.name}else{filter.range={};filter.range[field.name]=params}return filter}function getRangeScript(field,params){var knownParams=_lodash2.default.pick(params,function(val,key){return key in operators});var script=_lodash2.default.map(knownParams,function(val,key){return"("+field.script+")"+operators[key]+key}).join(" && ");if("painless"===field.lang){var currentComparators=_lodash2.default.reduce(knownParams,function(acc,val,key){return acc.concat(comparators[key])},[]).join(" ");var comparisons=_lodash2.default.map(knownParams,function(val,key){return key+"(() -> { "+field.script+" }, params."+key+")"}).join(" && ");script=""+currentComparators+comparisons}return{script:{inline:script,params:knownParams,lang:field.lang}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AggConfig=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _field_formats=__webpack_require__(116);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var AggConfig=function(){_createClass(AggConfig,null,[{key:"ensureIds",value:function ensureIds(list){var have=[];var haveNot=[];list.forEach(function(obj){(obj.id?have:haveNot).push(obj)});var nextId=AggConfig.nextId(have);haveNot.forEach(function(obj){obj.id=String(nextId++)});return list}},{key:"nextId",value:function nextId(list){return 1+list.reduce(function(max,obj){return Math.max(max,+obj.id||0)},0)}}]);function AggConfig(vis){var opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var aggs=arguments[2];_classCallCheck(this,AggConfig);this.id=String(opts.id||AggConfig.nextId(vis.aggs));this.vis=vis;this._indexPattern=vis.indexPattern;this._aggs=aggs||vis.aggs;this._opts=opts;this.enabled="boolean"!==typeof opts.enabled||opts.enabled;this.params={};this.type=opts.type;this.schema=opts.schema;this.setParams(opts.params||{})}_createClass(AggConfig,[{key:"setParams",value:function setParams(from){var _this=this;from=from||this.params||{};var to=this.params={};this.getAggParams().forEach(function(aggParam){var val=from[aggParam.name];if(null==val){if(null==aggParam.default)return;if(_lodash2.default.isFunction(aggParam.default)){val=aggParam.default(_this);if(null==val)return}else val=aggParam.default}if(aggParam.deserialize){var isTyped=_lodash2.default.isFunction(aggParam.type);var isType=isTyped&&val instanceof aggParam.type;var isObject=!isTyped&&_lodash2.default.isObject(val);var isDeserialized=isType||isObject;isDeserialized||(val=aggParam.deserialize(val,_this));to[aggParam.name]=val;return}to[aggParam.name]=_lodash2.default.cloneDeep(val)})}},{key:"write",value:function write(aggs){return this.type.params.write(this,aggs)}},{key:"isFilterable",value:function isFilterable(){return _lodash2.default.isFunction(this.type.createFilter)}},{key:"createFilter",value:function createFilter(key){var params=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isFilterable())throw new TypeError('The "'+this.type.title+'" aggregation does not support filtering.');var field=this.getField();var label=this.getFieldDisplayName();if(field&&!field.filterable){var message='The "'+label+'" field can not be used for filtering.';field.scripted&&(message='The "'+label+'" field is scripted and can not be used for filtering.');throw new TypeError(message)}return this.type.createFilter(this,key,params)}},{key:"onSearchRequestStart",value:function onSearchRequestStart(searchSource,searchRequest){var _this2=this;if(!this.type)return Promise.resolve();return Promise.all(this.type.params.map(function(param){return param.modifyAggConfigOnSearchRequestStart(_this2,searchSource,searchRequest)}))}},{key:"toDsl",value:function toDsl(aggConfigs){if(this.type.hasNoDsl)return;var output=this.write(aggConfigs);var configDsl={};configDsl[this.type.dslName||this.type.name]=output.params;this.subAggs&&!output.subAggs&&(output.subAggs=this.subAggs);if(output.subAggs){var subDslLvl=configDsl.aggs||(configDsl.aggs={});output.subAggs.forEach(function nestAdhocSubAggs(subAggConfig){subDslLvl[subAggConfig.id]=subAggConfig.toDsl(aggConfigs)})}if(output.parentAggs){var _subDslLvl=configDsl.parentAggs||(configDsl.parentAggs={});output.parentAggs.forEach(function nestAdhocSubAggs(subAggConfig){_subDslLvl[subAggConfig.id]=subAggConfig.toDsl(aggConfigs)})}return configDsl}},{key:"toJSON",value:function toJSON(){var _this3=this;var params=this.params;var outParams=_lodash2.default.transform(this.getAggParams(),function(out,aggParam){var val=params[aggParam.name];if(null==val)return;aggParam.serialize&&(val=aggParam.serialize(val,_this3));if(null==val)return;out[aggParam.name]=_lodash2.default.cloneDeep(val)},{});return{id:this.id,enabled:this.enabled,type:this.type&&this.type.name,schema:this.schema&&this.schema.name,params:outParams}}},{key:"getAggParams",value:function getAggParams(){return[].concat(_toConsumableArray(this.type?this.type.params.raw:[]),_toConsumableArray(_lodash2.default.has(this,"schema.params")?this.schema.params.raw:[]))}},{key:"getRequestAggs",value:function getRequestAggs(){if(!this.type)return;return this.type.getRequestAggs(this)||[this]}},{key:"getResponseAggs",value:function getResponseAggs(){if(!this.type)return;return this.type.getResponseAggs(this)||[this]}},{key:"getValue",value:function getValue(bucket){return this.type.getValue(this,bucket)}},{key:"getKey",value:function getKey(bucket,key){return this.type.getKey(bucket,key,this)}},{key:"getFieldDisplayName",value:function getFieldDisplayName(){var field=this.getField();return field?field.displayName||this.fieldName():""}},{key:"getField",value:function getField(){return this.params.field}},{key:"makeLabel",value:function makeLabel(){if(this.params.customLabel)return this.params.customLabel;if(!this.type)return"";var pre="percentage"===_lodash2.default.get(this.vis,"params.mode")?"Percentage of ":"";return pre+this.type.makeLabel(this)}},{key:"getIndexPattern",value:function getIndexPattern(){return this.vis.indexPattern}},{key:"getFieldOptions",value:function getFieldOptions(){var fieldParamType=this.type&&this.type.params.byName.field;if(!fieldParamType||!fieldParamType.getFieldOptions)return null;return fieldParamType.getFieldOptions(this)}},{key:"fieldFormatter",value:function fieldFormatter(contentType,defaultFormat){var format=this.type&&this.type.getFormat(this);if(format)return format.getConverterFor(contentType);return this.fieldOwnFormatter(contentType,defaultFormat)}},{key:"fieldOwnFormatter",value:function fieldOwnFormatter(contentType,defaultFormat){var field=this.getField();var format=field&&field.format;format||(format=defaultFormat);format||(format=_field_formats.fieldFormats.getDefaultInstance("string"));return format.getConverterFor(contentType)}},{key:"fieldName",value:function fieldName(){var field=this.getField();return field?field.name:""}},{key:"fieldIsTimeField",value:function fieldIsTimeField(){var timeFieldName=this.vis.indexPattern.timeFieldName;return timeFieldName&&this.fieldName()===timeFieldName}},{key:"type",get:function get(){return this.__type},set:function set(type){this.__typeDecorations&&_lodash2.default.forOwn(this.__typeDecorations,function(prop,name){delete this[name]},this);_lodash2.default.isString(type)&&(type=__webpack_require__(364).aggTypes.byName[type]);if(type&&_lodash2.default.isFunction(type.decorateAggConfig)){this.__typeDecorations=type.decorateAggConfig();Object.defineProperties(this,this.__typeDecorations)}this.__type=type;this.setParams({row:this.params.row,field:_lodash2.default.get(this.getFieldOptions(),["byName",this.getField()])})}},{key:"schema",get:function get(){return this.__schema},set:function set(schema){_lodash2.default.isString(schema)&&(schema=this.vis.type.schemas.all.byName[schema]);this.__schema=schema}}]);return AggConfig}();exports.AggConfig=AggConfig},function(module,exports,__webpack_require__){"use strict";__webpack_require__(3203);__webpack_require__(3209);__webpack_require__(3425);__webpack_require__(3561);__webpack_require__(422)},,,,,,function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}Object.defineProperty(exports,"__esModule",{value:true});__export(__webpack_require__(4920));__export(__webpack_require__(1629));__export(__webpack_require__(4965));__export(__webpack_require__(4968))},,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.makeNestedLabel=void 0;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var makeNestedLabel=function makeNestedLabel(aggConfig,label){var uppercaseLabel=_lodash2.default.startCase(label);if(aggConfig.params.customMetric){var metricLabel=aggConfig.params.customMetric.makeLabel();if(metricLabel.includes(uppercaseLabel+" of ")){metricLabel=metricLabel.substring((uppercaseLabel+" of ").length);metricLabel="2. "+label+" of "+metricLabel}else metricLabel=metricLabel.includes(label+" of ")?parseInt(metricLabel.substring(0,1))+1+metricLabel.substring(1):uppercaseLabel+" of "+metricLabel;return metricLabel}var metric=aggConfig._aggs.find(function(agg){return agg.id===aggConfig.params.metricAgg});if(!metric)return"";return uppercaseLabel+" of "+metric.makeLabel()};exports.makeNestedLabel=makeNestedLabel},,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function(data){var lookback=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(_lodash2.default.isNumber(data))return data;if(!Array.isArray(data))return 0;var last=data[data.length-1];var lastValue=Array.isArray(last)&&last[1];if(lastValue)return lastValue;var lookbackCounter=1;var value=void 0;while(lookback>lookbackCounter&&!value){var next=data[data.length-++lookbackCounter];value=_lodash2.default.isArray(next)&&next[1]||0}return value||0};module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPattern=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _field_select=__webpack_require__(260);var _field_select2=_interopRequireDefault(_field_select);var _create_select_handler=__webpack_require__(45);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _create_text_handler=__webpack_require__(46);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _yes_no=__webpack_require__(259);var _yes_no2=_interopRequireDefault(_yes_no);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true}):obj[key]=value;return obj}var IndexPattern=exports.IndexPattern=function IndexPattern(props){var _defaults;var fields=props.fields,prefix=props.prefix;var handleSelectChange=(0,_create_select_handler2.default)(props.onChange);var handleTextChange=(0,_create_text_handler2.default)(props.onChange);var timeFieldName=prefix+"time_field";var indexPatternName=prefix+"index_pattern";var intervalName=prefix+"interval";var dropBucketName=prefix+"drop_last_bucket";var defaults=(_defaults={},_defineProperty(_defaults,indexPatternName,"*"),_defineProperty(_defaults,intervalName,"auto"),_defineProperty(_defaults,dropBucketName,1),_defaults);var htmlId=(0,_eui.htmlIdGenerator)();var model=_extends({},defaults,props.model);return _react2.default.createElement("div",{className:props.className},_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("indexPattern")},"Index Pattern"),_react2.default.createElement("input",{id:htmlId("indexPattern"),className:"vis_editor__input",disabled:props.disabled,onChange:handleTextChange(indexPatternName,"*"),value:model[indexPatternName]}),_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("timeField")},"Time Field"),_react2.default.createElement("div",{className:"vis_editor__index_pattern-fields"},_react2.default.createElement(_field_select2.default,{id:htmlId("timeField"),restrict:"date",value:model[timeFieldName],disabled:props.disabled,onChange:handleSelectChange(timeFieldName),indexPattern:model[indexPatternName],fields:fields})),_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("interval")},"Interval (auto, 1m, 1d, 7d, 1y, >=1m)"),_react2.default.createElement("input",{id:htmlId("interval"),className:"vis_editor__input",disabled:props.disabled,onChange:handleTextChange(intervalName,"auto"),value:model[intervalName]}),_react2.default.createElement("div",{className:"vis_editor__label"},"Drop Last Bucket"),_react2.default.createElement(_yes_no2.default,{value:model[dropBucketName],name:dropBucketName,onChange:props.onChange}))};IndexPattern.defaultProps={prefix:"",disabled:false,className:"vis_editor__row"};IndexPattern.propTypes={model:_propTypes2.default.object.isRequired,fields:_propTypes2.default.object.isRequired,onChange:_propTypes2.default.func.isRequired,prefix:_propTypes2.default.string,disabled:_propTypes2.default.bool,className:_propTypes2.default.string}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.filterRows=filterRows;var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _eui=__webpack_require__(3);var _calculate_siblings=__webpack_require__(4585);var _calculate_siblings2=_interopRequireDefault(_calculate_siblings);var _calculate_label=__webpack_require__(908);var _calculate_label2=_interopRequireDefault(_calculate_label);var _basic_aggs=__webpack_require__(1541);var _basic_aggs2=_interopRequireDefault(_basic_aggs);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function createTypeFilter(restrict,exclude){return function(metric){if(_lodash2.default.includes(exclude,metric.type))return false;switch(restrict){case"basic":return _lodash2.default.includes(_basic_aggs2.default,metric.type);default:return true}}}function filterRows(includeSiblings){return function(row){if(includeSiblings)return!/^series/.test(row.type)&&!/^percentile/.test(row.type)&&"math"!==row.type;return!/_bucket$/.test(row.type)&&!/^series/.test(row.type)&&!/^percentile/.test(row.type)&&"math"!==row.type}}function MetricSelect(props){var restrict=props.restrict,metric=props.metric,onChange=props.onChange,value=props.value,exclude=props.exclude,includeSiblings=props.includeSiblings;var metrics=props.metrics.filter(createTypeFilter(restrict,exclude));var siblings=(0,_calculate_siblings2.default)(metrics,metric);var percentileOptions=siblings.filter(function(row){return/^percentile/.test(row.type)}).reduce(function(acc,row){var label=(0,_calculate_label2.default)(row,metrics);row.percentiles.forEach(function(p){if(p.value){var _value=/\./.test(p.value)?p.value:p.value+".0";acc.push({value:row.id+"["+_value+"]",label:label+" ("+_value+")"})}});return acc},[]);var options=siblings.filter(filterRows(includeSiblings)).map(function(row){var label=(0,_calculate_label2.default)(row,metrics);return{value:row.id,label:label}});var allOptions=[].concat(_toConsumableArray(options),_toConsumableArray(props.additionalOptions),_toConsumableArray(percentileOptions));var selectedOption=allOptions.find(function(option){return value===option.value});var selectedOptions=selectedOption?[selectedOption]:[];return _react2.default.createElement(_eui.EuiComboBox,{placeholder:"Select metric...",options:allOptions,selectedOptions:selectedOptions,onChange:onChange,singleSelection:true})}MetricSelect.defaultProps={additionalOptions:[],exclude:[],metric:{},restrict:"none",includeSiblings:false};MetricSelect.propTypes={additionalOptions:_propTypes2.default.array,exclude:_propTypes2.default.array,metric:_propTypes2.default.object,onChange:_propTypes2.default.func,restrict:_propTypes2.default.string,value:_propTypes2.default.string,includeSiblings:_propTypes2.default.bool};exports.default=MetricSelect},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.handleChange=handleChange;exports.handleDelete=handleDelete;exports.handleAdd=handleAdd;var _uuid=__webpack_require__(78);var _uuid2=_interopRequireDefault(_uuid);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var newFn=function newFn(){return{id:_uuid2.default.v1()}};function handleChange(props,doc){var model=props.model,name=props.name;var collection=model[name]||[];var part={};part[name]=collection.map(function(row){if(row.id===doc.id)return doc;return row});_lodash2.default.isFunction(props.onChange)&&props.onChange(_lodash2.default.assign({},model,part))}function handleDelete(props,doc){var model=props.model,name=props.name;var collection=model[name]||[];var part={};part[name]=collection.filter(function(row){return row.id!==doc.id});_lodash2.default.isFunction(props.onChange)&&props.onChange(_lodash2.default.assign({},model,part))}function handleAdd(props){var fn=arguments.length>1&&void 0!==arguments[1]?arguments[1]:newFn;_lodash2.default.isFunction(fn)||(fn=newFn);var model=props.model,name=props.name;var collection=model[name]||[];var part={};part[name]=collection.concat([fn()]);_lodash2.default.isFunction(props.onChange)&&props.onChange(_lodash2.default.assign({},model,part))}exports.default={handleAdd:handleAdd,handleDelete:handleDelete,handleChange:handleChange}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildPhraseFilter=buildPhraseFilter;exports.getPhraseScript=getPhraseScript;exports.getConvertedValueForField=getConvertedValueForField;exports.buildInlineScriptForPhraseFilter=buildInlineScriptForPhraseFilter;function buildPhraseFilter(field,value,indexPattern){var filter={meta:{index:indexPattern.id}};var convertedValue=getConvertedValueForField(field,value);if(field.scripted){filter.script=getPhraseScript(field,value);filter.meta.field=field.name}else{filter.query={match:{}};filter.query.match[field.name]={query:convertedValue,type:"phrase"}}return filter}function getPhraseScript(field,value){var convertedValue=getConvertedValueForField(field,value);var script=buildInlineScriptForPhraseFilter(field);return{script:{inline:script,lang:field.lang,params:{value:convertedValue}}}}function getConvertedValueForField(field,value){if("boolean"!==typeof value&&"boolean"===field.type){if([1,"true"].includes(value))return true;if([0,"false"].includes(value))return false;throw new Error(value+" is not a valid boolean value for boolean field "+field.name)}return value}function buildInlineScriptForPhraseFilter(scriptedField){return"painless"===scriptedField.lang?"boolean compare(Supplier s, def v) {return s.get() == v;}compare(() -> { "+scriptedField.script+" }, params.value);":"("+scriptedField.script+") == value"}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.aggTypes=void 0;__webpack_require__(1307);__webpack_require__(819);var _indexed_array=__webpack_require__(249);var _count=__webpack_require__(3062);var _avg=__webpack_require__(3063);var _sum=__webpack_require__(3064);var _median=__webpack_require__(3065);var _min=__webpack_require__(3071);var _max=__webpack_require__(3072);var _top_hit=__webpack_require__(3073);var _std_deviation=__webpack_require__(3076);var _cardinality=__webpack_require__(3077);var _percentiles=__webpack_require__(1310);var _geo_bounds=__webpack_require__(3078);var _geo_centroid=__webpack_require__(3079);var _percentile_ranks=__webpack_require__(3080);var _derivative=__webpack_require__(3082);var _cumulative_sum=__webpack_require__(3088);var _moving_avg=__webpack_require__(3089);var _serial_diff=__webpack_require__(3090);var _date_histogram=__webpack_require__(3091);var _histogram=__webpack_require__(3097);var _range=__webpack_require__(3102);var _date_range=__webpack_require__(3106);var _ip_range=__webpack_require__(3109);var _terms=__webpack_require__(3112);var _filter=__webpack_require__(3116);var _filters=__webpack_require__(3117);var _significant_terms=__webpack_require__(3120);var _geo_hash=__webpack_require__(3121);var _bucket_sum=__webpack_require__(3124);var _bucket_avg=__webpack_require__(3128);var _bucket_min=__webpack_require__(3129);var _bucket_max=__webpack_require__(3130);var aggs={metrics:[_count.countMetricAgg,_avg.avgMetricAgg,_sum.sumMetricAgg,_median.medianMetricAgg,_min.minMetricAgg,_max.maxMetricAgg,_std_deviation.stdDeviationMetricAgg,_cardinality.cardinalityMetricAgg,_percentiles.percentilesMetricAgg,_percentile_ranks.percentileRanksMetricAgg,_top_hit.topHitMetricAgg,_derivative.derivativeMetricAgg,_cumulative_sum.cumulativeSumMetricAgg,_moving_avg.movingAvgMetricAgg,_serial_diff.serialDiffMetricAgg,_bucket_avg.bucketAvgMetricAgg,_bucket_sum.bucketSumMetricAgg,_bucket_min.bucketMinMetricAgg,_bucket_max.bucketMaxMetricAgg,_geo_bounds.geoBoundsMetricAgg,_geo_centroid.geoCentroidMetricAgg],buckets:[_date_histogram.dateHistogramBucketAgg,_histogram.histogramBucketAgg,_range.rangeBucketAgg,_date_range.dateRangeBucketAgg,_ip_range.ipRangeBucketAgg,_terms.termsBucketAgg,_filter.filterBucketAgg,_filters.filtersBucketAgg,_significant_terms.significantTermsBucketAgg,_geo_hash.geoHashBucketAgg]};Object.keys(aggs).forEach(function(type){aggs[type].forEach(function(agg){agg.type=type})});exports.aggTypes=new _indexed_array.IndexedArray({index:["name"],group:["type"],initialSet:aggs.metrics.concat(aggs.buckets)})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DocTitleProvider=void 0;var _doc_title=__webpack_require__(1330);Object.defineProperty(exports,"DocTitleProvider",{enumerable:true,get:function get(){return _doc_title.DocTitleProvider}});__webpack_require__(1330)},function(module,exports,__webpack_require__){"use strict";var _moment=__webpack_require__(10);var _moment2=_interopRequireDefault(_moment);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _modules=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana").filter("moment",function(config){return function(datetime){var format=config.get("dateFormat");if(_moment2.default.isMoment(datetime))return datetime.format(format);if(_lodash2.default.isDate(datetime))return(0,_moment2.default)(datetime).format(format);return datetime}})},,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Pager=void 0;var _pager=__webpack_require__(1456);Object.defineProperty(exports,"Pager",{enumerable:true,get:function get(){return _pager.Pager}});__webpack_require__(3967)},,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var _numeral=__webpack_require__(88);var _numeral2=_interopRequireDefault(_numeral);var _handlebars=__webpack_require__(1533);var _handlebars2=_interopRequireDefault(_handlebars);var _durations=__webpack_require__(1534);var _lodash=__webpack_require__(1);var _duration=__webpack_require__(1274);var _field_format=__webpack_require__(596);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DurationFormat=(0,_duration.createDurationFormat)(_field_format.FieldFormat);var formatLookup={bytes:"0.0b",number:"0,0.[00]",percent:"0.[00]%"};var durationsLookup=_durations.durationInputOptions.reduce(function(acc,row){acc[row.value]=row.label;return acc},{});exports.default=function(){var format=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0,0.[00]";var template=arguments[1];template||(template="{{value}}");var render=_handlebars2.default.compile(template);var durationFormatTest=/[pnumshdwMY]+,[pnumshdwMY]+,\d+/;return function(val){var formatString=formatLookup[format]||format;var value=void 0;if((0,_lodash.isNumber)(val))if(durationFormatTest.test(format)){var _format$split=format.split(","),_format$split2=_slicedToArray(_format$split,3),from=_format$split2[0],to=_format$split2[1],decimals=_format$split2[2];var inputFormat=durationsLookup[from];var outputFormat="as"+(0,_lodash.capitalize)(durationsLookup[to]);var formatter=new DurationFormat({inputFormat:inputFormat,outputFormat:outputFormat,outputPrecision:decimals});value=formatter.convert(val,"text")}else try{value=(0,_numeral2.default)(val).format(formatString)}catch(e){value=val}else value=0;try{return render({value:value})}catch(e){return String(value)}}};module.exports=exports["default"]},,,,function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}Object.defineProperty(exports,"__esModule",{value:true});var embeddable_factory_1=__webpack_require__(4853);exports.EmbeddableFactory=embeddable_factory_1.EmbeddableFactory;__export(__webpack_require__(4854));var embeddable_factories_registry_1=__webpack_require__(668);exports.EmbeddableFactoriesRegistryProvider=embeddable_factories_registry_1.EmbeddableFactoriesRegistryProvider},,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _binder=__webpack_require__(709);Object.defineProperty(exports,"BinderBase",{enumerable:true,get:function get(){return _binder.BinderBase}});var _binder_for=__webpack_require__(1801);Object.defineProperty(exports,"BinderFor",{enumerable:true,get:function get(){return _binder_for.BinderFor}});var _deep_clone_with_buffers=__webpack_require__(1802);Object.defineProperty(exports,"deepCloneWithBuffers",{enumerable:true,get:function get(){return _deep_clone_with_buffers.deepCloneWithBuffers}});var _from_root=__webpack_require__(1805);Object.defineProperty(exports,"fromRoot",{enumerable:true,get:function get(){return _from_root.fromRoot}});var _package_json=__webpack_require__(710);Object.defineProperty(exports,"pkg",{enumerable:true,get:function get(){return _package_json.pkg}});var _unset=__webpack_require__(1806);Object.defineProperty(exports,"unset",{enumerable:true,get:function get(){return _unset.unset}});var _encode_query_component=__webpack_require__(1814);Object.defineProperty(exports,"encodeQueryComponent",{enumerable:true,get:function get(){return _encode_query_component.encodeQueryComponent}});var _modify_url=__webpack_require__(1023);Object.defineProperty(exports,"modifyUrl",{enumerable:true,get:function get(){return _modify_url.modifyUrl}});var _get_flattened_object=__webpack_require__(1816);Object.defineProperty(exports,"getFlattenedObject",{enumerable:true,get:function get(){return _get_flattened_object.getFlattenedObject}});var _watch_stdio_for_line=__webpack_require__(1817);Object.defineProperty(exports,"watchStdioForLine",{enumerable:true,get:function get(){return _watch_stdio_for_line.watchStdioForLine}});var _artifact_type=__webpack_require__(1837);Object.defineProperty(exports,"IS_KIBANA_DISTRIBUTABLE",{enumerable:true,get:function get(){return _artifact_type.IS_KIBANA_DISTRIBUTABLE}});var _kbn_field_types=__webpack_require__(1032);Object.defineProperty(exports,"getKbnTypeNames",{enumerable:true,get:function get(){return _kbn_field_types.getKbnTypeNames}});Object.defineProperty(exports,"getKbnFieldType",{enumerable:true,get:function get(){return _kbn_field_types.getKbnFieldType}});Object.defineProperty(exports,"castEsToKbnFieldTypeName",{enumerable:true,get:function get(){return _kbn_field_types.castEsToKbnFieldTypeName}});var _streams=__webpack_require__(1030);Object.defineProperty(exports,"concatStreamProviders",{enumerable:true,get:function get(){return _streams.concatStreamProviders}});Object.defineProperty(exports,"createConcatStream",{enumerable:true,get:function get(){return _streams.createConcatStream}});Object.defineProperty(exports,"createIntersperseStream",{enumerable:true,get:function get(){return _streams.createIntersperseStream}});Object.defineProperty(exports,"createJsonParseStream",{enumerable:true,get:function get(){return _streams.createJsonParseStream}});Object.defineProperty(exports,"createJsonStringifyStream",{enumerable:true,get:function get(){return _streams.createJsonStringifyStream}});Object.defineProperty(exports,"createListStream",{enumerable:true,get:function get(){return _streams.createListStream}});Object.defineProperty(exports,"createPromiseFromStreams",{enumerable:true,get:function get(){return _streams.createPromiseFromStreams}});Object.defineProperty(exports,"createReduceStream",{enumerable:true,get:function get(){return _streams.createReduceStream}});Object.defineProperty(exports,"createSplitStream",{enumerable:true,get:function get(){return _streams.createSplitStream}});Object.defineProperty(exports,"createMapStream",{enumerable:true,get:function get(){return _streams.createMapStream}});Object.defineProperty(exports,"createReplaceStream",{enumerable:true,get:function get(){return _streams.createReplaceStream}});var _strings=__webpack_require__(1838);Object.defineProperty(exports,"parseCommaSeparatedList",{enumerable:true,get:function get(){return _strings.parseCommaSeparatedList}});Object.defineProperty(exports,"formatListAsProse",{enumerable:true,get:function get(){return _strings.formatListAsProse}})},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EventsProvider=EventsProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _notify=__webpack_require__(9);var _simple_emitter=__webpack_require__(588);var _legacy_class=__webpack_require__(77);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var location="EventEmitter";function EventsProvider(Private,Promise){(0,_legacy_class.createLegacyClass)(Events).inherits(_simple_emitter.SimpleEmitter);function Events(){Events.Super.call(this);this._listeners={};this._emitChain=Promise.resolve()}Events.prototype.on=function(name,handler){Array.isArray(this._listeners[name])||(this._listeners[name]=[]);var listener={handler:handler};this._listeners[name].push(listener);(function rebuildDefer(){listener.defer=Promise.defer();listener.resolved=listener.defer.promise.then(function(args){rebuildDefer();Promise.resolve(handler.apply(handler,args)).catch(function(error){return(0,_notify.fatalError)(error,location)})})})();return this};Events.prototype.off=function(name,handler){if(!name&&!handler)return this.removeAllListeners();if(!this._listeners[name])return this;handler?this._listeners[name]=_lodash2.default.filter(this._listeners[name],function(listener){return handler!==listener.handler}):delete this._listeners[name];return this};Events.prototype.emit=function(name){var self=this;var args=_lodash2.default.rest(arguments);if(!self._listeners[name])return self._emitChain;return Promise.map(self._listeners[name],function(listener){return self._emitChain=self._emitChain.then(function(){if(!self._listeners[name]||self._listeners[name].indexOf(listener)<0)return;listener.defer.resolve(args);return listener.resolved})})};Events.prototype.listeners=function(name){return _lodash2.default.pluck(this._listeners[name],"handler")};return Events}},,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.move=move;exports.organizeBy=organizeBy;exports.pushAll=pushAll;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function move(objs,obj,below,qualifier){var origI=_lodash2.default.isNumber(obj)?obj:objs.indexOf(obj);if(-1===origI)return objs;if(_lodash2.default.isNumber(below)){objs.splice(below,0,objs.splice(origI,1)[0]);return objs}below=!!below;qualifier=_lodash2.default.callback(qualifier);var above=!below;var finder=below?_lodash2.default.findIndex:_lodash2.default.findLastIndex;var targetI=finder(objs,function(otherAgg,otherI){if(below&&otherI<=origI)return;if(above&&otherI>=origI)return;return!!qualifier(otherAgg,otherI)});if(-1===targetI)return objs;objs.splice(targetI,0,objs.splice(origI,1)[0])}function organizeBy(collection,callback){var buckets={};var prop="function"!==typeof callback&&callback;function add(key,obj){buckets[key]||(buckets[key]=[]);buckets[key].push(obj)}_lodash2.default.each(collection,function(obj){var keys=false===prop?callback(obj):obj[prop];if(!Array.isArray(keys)){add(keys,obj);return}var length=keys.length;while(length-- >0)add(keys[length],obj)});return buckets}function pushAll(source,dest){var start=dest.length;var adding=source.length;dest.length=start+adding;var i=-1;while(++i<adding)dest[start+i]=source[i];return dest}},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DevToolsRegistryProvider=void 0;var _registry=__webpack_require__(107);exports.DevToolsRegistryProvider=(0,_registry.uiRegistry)({name:"devTools",index:["name"],order:["order"]})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.savedObjectManagementRegistry=void 0;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var registry=[];exports.savedObjectManagementRegistry={register:function register(service){registry.push(service)},all:function all(){return registry},get:function get(id){return _lodash2.default.find(registry,{service:id})}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BaseParamType=void 0;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function BaseParamType(config){_lodash2.default.assign(this,config)}BaseParamType.prototype.modifyAggConfigOnSearchRequestStart=function(aggconfig,searchSource,searchRequest){};exports.BaseParamType=BaseParamType},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VisualizeConstants={LANDING_PAGE_PATH:"/visualize",WIZARD_STEP_1_PAGE_PATH:"/visualize/new",WIZARD_STEP_2_PAGE_PATH:"/visualize/new/configure",CREATE_PATH:"/visualize/create",EDIT_PATH:"/visualize/edit"}},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(2);var _module=_modules.uiModules.get("kibana");_module.directive("inputFocus",function($parse,$timeout){return{restrict:"A",link:function link($scope,$elem,attrs){var isDisabled=attrs.disableInputFocus&&$parse(attrs.disableInputFocus)($scope);isDisabled||$timeout(function(){$elem.focus();"select"===attrs.inputFocus&&$elem.select()})}}})},function(module,exports,__webpack_require__){"use strict";__webpack_require__(13);__webpack_require__(16);__webpack_require__(587);__webpack_require__(3233);__webpack_require__(3234);__webpack_require__(2).get("kibana",["ui.select","ngSanitize"])},,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=AggConfigResult;var _chrome=__webpack_require__(8);var _chrome2=_interopRequireDefault(_chrome);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function AggConfigResult(aggConfig,parent,value,key,filters){this.key=key;this.value=value;this.aggConfig=aggConfig;this.filters=filters;this.$parent=parent;"buckets"===aggConfig.type.type?this.type="bucket":this.type="metric"}AggConfigResult.prototype.getPath=function(){return function walk(result,path){path.unshift(result);if(result.$parent)return walk(result.$parent,path);return path}(this,[])};AggConfigResult.prototype.createFilter=function(){return this.filters||this.aggConfig.createFilter(this.key)};AggConfigResult.prototype.toString=function(contentType){var parsedUrl={origin:window.location.origin,pathname:window.location.pathname,basePath:_chrome2.default.getBasePath()};return this.aggConfig.fieldFormatter(contentType)(this.value,null,null,parsedUrl)};AggConfigResult.prototype.valueOf=function(){return this.value};module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";var theme=__webpack_require__(1408);__webpack_require__(3565);var euiThemeLight=__webpack_require__(3566);theme.registerTheme("light",euiThemeLight);var euiThemeDark=__webpack_require__(3567);theme.registerTheme("dark",euiThemeDark);theme.applyTheme("light");var context=__webpack_require__(3568);context.keys().forEach(function(key){return context(key)})},,,function(module,exports){},,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var vislibColorMaps=exports.vislibColorMaps=[];vislibColorMaps.Blues=[[0,[.969,.984,1]],[.002,[.969,.984,1]],[.004,[.966,.982,.999]],[.006,[.966,.982,.999]],[.008,[.962,.98,.998]],[.01,[.962,.98,.998]],[.012,[.959,.978,.997]],[.014,[.959,.978,.997]],[.016,[.956,.976,.996]],[.018,[.956,.976,.996]],[.02,[.953,.974,.995]],[.022,[.953,.974,.995]],[.023,[.95,.973,.994]],[.025,[.95,.973,.994]],[.027,[.947,.971,.993]],[.029,[.947,.971,.993]],[.031,[.944,.969,.992]],[.033,[.944,.969,.992]],[.035,[.941,.967,.991]],[.037,[.941,.967,.991]],[.039,[.938,.965,.99]],[.041,[.938,.965,.99]],[.043,[.935,.963,.989]],[.045,[.935,.963,.989]],[.047,[.932,.961,.988]],[.049,[.932,.961,.988]],[.051,[.929,.959,.987]],[.053,[.929,.959,.987]],[.055,[.926,.957,.986]],[.057,[.926,.957,.986]],[.059,[.922,.955,.985]],[.061,[.922,.955,.985]],[.063,[.919,.953,.984]],[.065,[.919,.953,.984]],[.067,[.916,.951,.983]],[.068,[.916,.951,.983]],[.07,[.913,.949,.982]],[.072,[.913,.949,.982]],[.074,[.91,.947,.981]],[.076,[.91,.947,.981]],[.078,[.907,.945,.98]],[.08,[.907,.945,.98]],[.082,[.904,.943,.979]],[.084,[.904,.943,.979]],[.086,[.901,.941,.978]],[.088,[.901,.941,.978]],[.09,[.898,.939,.977]],[.092,[.898,.939,.977]],[.094,[.895,.937,.976]],[.096,[.895,.937,.976]],[.098,[.892,.935,.975]],[.1,[.892,.935,.975]],[.102,[.889,.933,.974]],[.104,[.889,.933,.974]],[.106,[.886,.931,.973]],[.108,[.886,.931,.973]],[.11,[.883,.929,.972]],[.112,[.883,.929,.972]],[.114,[.879,.927,.971]],[.115,[.879,.927,.971]],[.117,[.876,.925,.97]],[.119,[.876,.925,.97]],[.121,[.873,.923,.969]],[.123,[.873,.923,.969]],[.125,[.87,.921,.969]],[.127,[.87,.921,.969]],[.129,[.867,.919,.968]],[.131,[.867,.919,.968]],[.133,[.864,.917,.967]],[.135,[.864,.917,.967]],[.137,[.861,.915,.966]],[.139,[.861,.915,.966]],[.141,[.858,.913,.965]],[.143,[.858,.913,.965]],[.145,[.855,.911,.964]],[.147,[.855,.911,.964]],[.149,[.853,.91,.963]],[.151,[.853,.91,.963]],[.153,[.85,.908,.962]],[.155,[.85,.908,.962]],[.157,[.847,.906,.961]],[.159,[.847,.906,.961]],[.16,[.844,.904,.96]],[.162,[.844,.904,.96]],[.164,[.841,.902,.959]],[.166,[.841,.902,.959]],[.168,[.838,.9,.958]],[.17,[.838,.9,.958]],[.172,[.835,.898,.957]],[.174,[.835,.898,.957]],[.176,[.832,.896,.956]],[.178,[.832,.896,.956]],[.18,[.829,.894,.955]],[.182,[.829,.894,.955]],[.184,[.826,.892,.954]],[.186,[.826,.892,.954]],[.188,[.823,.89,.953]],[.19,[.823,.89,.953]],[.192,[.82,.888,.952]],[.194,[.82,.888,.952]],[.196,[.817,.886,.951]],[.198,[.817,.886,.951]],[.2,[.814,.884,.95]],[.202,[.814,.884,.95]],[.204,[.811,.882,.949]],[.205,[.811,.882,.949]],[.207,[.808,.88,.948]],[.209,[.808,.88,.948]],[.211,[.805,.878,.947]],[.213,[.805,.878,.947]],[.215,[.802,.876,.946]],[.217,[.802,.876,.946]],[.219,[.799,.874,.945]],[.221,[.799,.874,.945]],[.223,[.796,.872,.944]],[.225,[.796,.872,.944]],[.227,[.793,.87,.943]],[.229,[.793,.87,.943]],[.231,[.79,.868,.942]],[.233,[.79,.868,.942]],[.235,[.788,.866,.941]],[.237,[.788,.866,.941]],[.239,[.785,.864,.94]],[.241,[.785,.864,.94]],[.243,[.782,.862,.939]],[.245,[.782,.862,.939]],[.247,[.779,.86,.938]],[.249,[.779,.86,.938]],[.25,[.775,.858,.937]],[.252,[.775,.858,.937]],[.254,[.77,.856,.935]],[.256,[.77,.856,.935]],[.258,[.765,.854,.933]],[.26,[.765,.854,.933]],[.262,[.76,.852,.932]],[.264,[.76,.852,.932]],[.266,[.756,.85,.93]],[.268,[.756,.85,.93]],[.27,[.751,.848,.928]],[.272,[.751,.848,.928]],[.274,[.746,.846,.926]],[.276,[.746,.846,.926]],[.278,[.741,.844,.925]],[.28,[.741,.844,.925]],[.282,[.736,.842,.923]],[.284,[.736,.842,.923]],[.286,[.731,.839,.921]],[.288,[.731,.839,.921]],[.29,[.726,.837,.92]],[.292,[.726,.837,.92]],[.294,[.721,.835,.918]],[.295,[.721,.835,.918]],[.297,[.716,.833,.916]],[.299,[.716,.833,.916]],[.301,[.711,.831,.914]],[.303,[.711,.831,.914]],[.305,[.706,.829,.913]],[.307,[.706,.829,.913]],[.309,[.701,.827,.911]],[.311,[.701,.827,.911]],[.313,[.697,.825,.909]],[.315,[.697,.825,.909]],[.317,[.692,.823,.908]],[.319,[.692,.823,.908]],[.321,[.687,.821,.906]],[.323,[.687,.821,.906]],[.325,[.682,.819,.904]],[.327,[.682,.819,.904]],[.329,[.677,.816,.902]],[.331,[.677,.816,.902]],[.333,[.672,.814,.901]],[.335,[.672,.814,.901]],[.337,[.667,.812,.899]],[.339,[.667,.812,.899]],[.341,[.662,.81,.897]],[.342,[.662,.81,.897]],[.344,[.657,.808,.895]],[.346,[.657,.808,.895]],[.348,[.652,.806,.894]],[.35,[.652,.806,.894]],[.352,[.647,.804,.892]],[.354,[.647,.804,.892]],[.356,[.642,.802,.89]],[.358,[.642,.802,.89]],[.36,[.637,.8,.889]],[.362,[.637,.8,.889]],[.364,[.633,.798,.887]],[.366,[.633,.798,.887]],[.368,[.628,.796,.885]],[.37,[.628,.796,.885]],[.372,[.623,.793,.883]],[.374,[.623,.793,.883]],[.376,[.617,.791,.882]],[.378,[.617,.791,.882]],[.38,[.611,.787,.88]],[.382,[.611,.787,.88]],[.384,[.605,.784,.879]],[.386,[.605,.784,.879]],[.387,[.598,.781,.878]],[.389,[.598,.781,.878]],[.391,[.592,.777,.876]],[.393,[.592,.777,.876]],[.395,[.586,.774,.875]],[.397,[.586,.774,.875]],[.399,[.58,.77,.874]],[.401,[.58,.77,.874]],[.403,[.573,.767,.872]],[.405,[.573,.767,.872]],[.407,[.567,.763,.871]],[.409,[.567,.763,.871]],[.411,[.561,.76,.87]],[.413,[.561,.76,.87]],[.415,[.555,.756,.868]],[.417,[.555,.756,.868]],[.419,[.548,.753,.867]],[.421,[.548,.753,.867]],[.423,[.542,.75,.866]],[.425,[.542,.75,.866]],[.427,[.536,.746,.864]],[.429,[.536,.746,.864]],[.431,[.529,.743,.863]],[.432,[.529,.743,.863]],[.434,[.523,.739,.862]],[.436,[.523,.739,.862]],[.438,[.517,.736,.86]],[.44,[.517,.736,.86]],[.442,[.511,.732,.859]],[.444,[.511,.732,.859]],[.446,[.504,.729,.857]],[.448,[.504,.729,.857]],[.45,[.498,.725,.856]],[.452,[.498,.725,.856]],[.454,[.492,.722,.855]],[.456,[.492,.722,.855]],[.458,[.485,.719,.853]],[.46,[.485,.719,.853]],[.462,[.479,.715,.852]],[.464,[.479,.715,.852]],[.466,[.473,.712,.851]],[.468,[.473,.712,.851]],[.47,[.467,.708,.849]],[.472,[.467,.708,.849]],[.474,[.46,.705,.848]],[.476,[.46,.705,.848]],[.477,[.454,.701,.847]],[.479,[.454,.701,.847]],[.481,[.448,.698,.845]],[.483,[.448,.698,.845]],[.485,[.442,.694,.844]],[.487,[.442,.694,.844]],[.489,[.435,.691,.843]],[.491,[.435,.691,.843]],[.493,[.429,.688,.841]],[.495,[.429,.688,.841]],[.497,[.423,.684,.84]],[.499,[.423,.684,.84]],[.501,[.417,.681,.838]],[.503,[.417,.681,.838]],[.505,[.412,.677,.836]],[.507,[.412,.677,.836]],[.509,[.407,.674,.834]],[.511,[.407,.674,.834]],[.513,[.402,.67,.832]],[.515,[.402,.67,.832]],[.517,[.397,.667,.83]],[.519,[.397,.667,.83]],[.521,[.392,.663,.828]],[.523,[.392,.663,.828]],[.524,[.387,.66,.826]],[.526,[.387,.66,.826]],[.528,[.382,.657,.824]],[.53,[.382,.657,.824]],[.532,[.377,.653,.822]],[.534,[.377,.653,.822]],[.536,[.372,.65,.821]],[.538,[.372,.65,.821]],[.54,[.367,.646,.819]],[.542,[.367,.646,.819]],[.544,[.362,.643,.817]],[.546,[.362,.643,.817]],[.548,[.357,.639,.815]],[.55,[.357,.639,.815]],[.552,[.352,.636,.813]],[.554,[.352,.636,.813]],[.556,[.346,.632,.811]],[.558,[.346,.632,.811]],[.56,[.341,.629,.809]],[.562,[.341,.629,.809]],[.564,[.336,.626,.807]],[.566,[.336,.626,.807]],[.568,[.331,.622,.805]],[.569,[.331,.622,.805]],[.571,[.326,.619,.803]],[.573,[.326,.619,.803]],[.575,[.321,.615,.801]],[.577,[.321,.615,.801]],[.579,[.316,.612,.799]],[.581,[.316,.612,.799]],[.583,[.311,.608,.797]],[.585,[.311,.608,.797]],[.587,[.306,.605,.795]],[.589,[.306,.605,.795]],[.591,[.301,.601,.793]],[.593,[.301,.601,.793]],[.595,[.296,.598,.791]],[.597,[.296,.598,.791]],[.599,[.291,.595,.789]],[.601,[.291,.595,.789]],[.603,[.286,.591,.787]],[.605,[.286,.591,.787]],[.607,[.281,.588,.785]],[.609,[.281,.588,.785]],[.611,[.276,.584,.783]],[.613,[.276,.584,.783]],[.614,[.271,.581,.781]],[.616,[.271,.581,.781]],[.618,[.266,.577,.779]],[.62,[.266,.577,.779]],[.622,[.261,.574,.777]],[.624,[.261,.574,.777]],[.626,[.256,.57,.775]],[.628,[.256,.57,.775]],[.63,[.252,.566,.773]],[.632,[.252,.566,.773]],[.634,[.248,.562,.771]],[.636,[.248,.562,.771]],[.638,[.244,.558,.769]],[.64,[.244,.558,.769]],[.642,[.24,.554,.767]],[.644,[.24,.554,.767]],[.646,[.236,.55,.765]],[.648,[.236,.55,.765]],[.65,[.232,.546,.763]],[.652,[.232,.546,.763]],[.654,[.228,.542,.761]],[.656,[.228,.542,.761]],[.658,[.224,.538,.758]],[.659,[.224,.538,.758]],[.661,[.22,.533,.756]],[.663,[.22,.533,.756]],[.665,[.216,.529,.754]],[.667,[.216,.529,.754]],[.669,[.212,.525,.752]],[.671,[.212,.525,.752]],[.673,[.208,.521,.75]],[.675,[.208,.521,.75]],[.677,[.204,.517,.748]],[.679,[.204,.517,.748]],[.681,[.199,.513,.746]],[.683,[.199,.513,.746]],[.685,[.195,.509,.744]],[.687,[.195,.509,.744]],[.689,[.191,.505,.742]],[.691,[.191,.505,.742]],[.693,[.187,.501,.74]],[.695,[.187,.501,.74]],[.697,[.183,.497,.738]],[.699,[.183,.497,.738]],[.701,[.179,.493,.735]],[.703,[.179,.493,.735]],[.705,[.175,.489,.733]],[.706,[.175,.489,.733]],[.708,[.171,.485,.731]],[.71,[.171,.485,.731]],[.712,[.167,.481,.729]],[.714,[.167,.481,.729]],[.716,[.163,.477,.727]],[.718,[.163,.477,.727]],[.72,[.159,.473,.725]],[.722,[.159,.473,.725]],[.724,[.155,.469,.723]],[.726,[.155,.469,.723]],[.728,[.151,.464,.721]],[.73,[.151,.464,.721]],[.732,[.147,.46,.719]],[.734,[.147,.46,.719]],[.736,[.143,.456,.717]],[.738,[.143,.456,.717]],[.74,[.139,.452,.715]],[.742,[.139,.452,.715]],[.744,[.134,.448,.712]],[.746,[.134,.448,.712]],[.748,[.13,.444,.71]],[.75,[.13,.444,.71]],[.751,[.127,.44,.707]],[.753,[.127,.44,.707]],[.755,[.124,.436,.704]],[.757,[.124,.436,.704]],[.759,[.121,.432,.701]],[.761,[.121,.432,.701]],[.763,[.118,.428,.698]],[.765,[.118,.428,.698]],[.767,[.115,.424,.695]],[.769,[.115,.424,.695]],[.771,[.112,.42,.692]],[.773,[.112,.42,.692]],[.775,[.109,.417,.689]],[.777,[.109,.417,.689]],[.779,[.106,.413,.686]],[.781,[.106,.413,.686]],[.783,[.102,.409,.683]],[.785,[.102,.409,.683]],[.787,[.099,.405,.68]],[.789,[.099,.405,.68]],[.791,[.096,.401,.677]],[.793,[.096,.401,.677]],[.795,[.093,.397,.674]],[.796,[.093,.397,.674]],[.798,[.09,.393,.671]],[.8,[.09,.393,.671]],[.802,[.087,.389,.668]],[.804,[.087,.389,.668]],[.806,[.084,.385,.664]],[.808,[.084,.385,.664]],[.81,[.081,.381,.661]],[.812,[.081,.381,.661]],[.814,[.078,.377,.658]],[.816,[.078,.377,.658]],[.818,[.075,.373,.655]],[.82,[.075,.373,.655]],[.822,[.072,.369,.652]],[.824,[.072,.369,.652]],[.826,[.069,.365,.649]],[.828,[.069,.365,.649]],[.83,[.066,.361,.646]],[.832,[.066,.361,.646]],[.834,[.063,.358,.643]],[.836,[.063,.358,.643]],[.838,[.059,.354,.64]],[.84,[.059,.354,.64]],[.841,[.056,.35,.637]],[.843,[.056,.35,.637]],[.845,[.053,.346,.634]],[.847,[.053,.346,.634]],[.849,[.05,.342,.631]],[.851,[.05,.342,.631]],[.853,[.047,.338,.628]],[.855,[.047,.338,.628]],[.857,[.044,.334,.624]],[.859,[.044,.334,.624]],[.861,[.041,.33,.621]],[.863,[.041,.33,.621]],[.865,[.038,.326,.618]],[.867,[.038,.326,.618]],[.869,[.035,.322,.615]],[.871,[.035,.322,.615]],[.873,[.032,.318,.612]],[.875,[.032,.318,.612]],[.877,[.031,.314,.606]],[.879,[.031,.314,.606]],[.881,[.031,.31,.6]],[.883,[.031,.31,.6]],[.885,[.031,.306,.594]],[.886,[.031,.306,.594]],[.888,[.031,.302,.588]],[.89,[.031,.302,.588]],[.892,[.031,.298,.582]],[.894,[.031,.298,.582]],[.896,[.031,.294,.576]],[.898,[.031,.294,.576]],[.9,[.031,.29,.57]],[.902,[.031,.29,.57]],[.904,[.031,.286,.564]],[.906,[.031,.286,.564]],[.908,[.031,.282,.558]],[.91,[.031,.282,.558]],[.912,[.031,.278,.552]],[.914,[.031,.278,.552]],[.916,[.031,.273,.546]],[.918,[.031,.273,.546]],[.92,[.031,.269,.54]],[.922,[.031,.269,.54]],[.924,[.031,.265,.534]],[.926,[.031,.265,.534]],[.928,[.031,.261,.528]],[.93,[.031,.261,.528]],[.932,[.031,.257,.522]],[.933,[.031,.257,.522]],[.935,[.031,.253,.516]],[.937,[.031,.253,.516]],[.939,[.031,.249,.51]],[.941,[.031,.249,.51]],[.943,[.031,.245,.504]],[.945,[.031,.245,.504]],[.947,[.031,.241,.498]],[.949,[.031,.241,.498]],[.951,[.031,.237,.492]],[.953,[.031,.237,.492]],[.955,[.031,.233,.486]],[.957,[.031,.233,.486]],[.959,[.031,.229,.48]],[.961,[.031,.229,.48]],[.963,[.031,.225,.474]],[.965,[.031,.225,.474]],[.967,[.031,.221,.468]],[.969,[.031,.221,.468]],[.971,[.031,.217,.462]],[.973,[.031,.217,.462]],[.975,[.031,.213,.456]],[.977,[.031,.213,.456]],[.978,[.031,.209,.45]],[.98,[.031,.209,.45]],[.982,[.031,.204,.444]],[.984,[.031,.204,.444]],[.986,[.031,.2,.438]],[.988,[.031,.2,.438]],[.99,[.031,.196,.432]],[.992,[.031,.196,.432]],[.994,[.031,.192,.426]],[.996,[.031,.192,.426]],[.998,[.031,.188,.42]],[1,[.031,.188,.42]]];vislibColorMaps.Greens=[[0,[.969,.988,.961]],[.002,[.969,.988,.961]],[.004,[.966,.987,.958]],[.006,[.966,.987,.958]],[.008,[.964,.987,.956]],[.01,[.964,.987,.956]],[.012,[.962,.986,.953]],[.014,[.962,.986,.953]],[.016,[.96,.985,.95]],[.018,[.96,.985,.95]],[.02,[.958,.984,.948]],[.022,[.958,.984,.948]],[.023,[.955,.983,.945]],[.025,[.955,.983,.945]],[.027,[.953,.982,.943]],[.029,[.953,.982,.943]],[.031,[.951,.981,.94]],[.033,[.951,.981,.94]],[.035,[.949,.98,.938]],[.037,[.949,.98,.938]],[.039,[.946,.98,.935]],[.041,[.946,.98,.935]],[.043,[.944,.979,.932]],[.045,[.944,.979,.932]],[.047,[.942,.978,.93]],[.049,[.942,.978,.93]],[.051,[.94,.977,.927]],[.053,[.94,.977,.927]],[.055,[.938,.976,.925]],[.057,[.938,.976,.925]],[.059,[.935,.975,.922]],[.061,[.935,.975,.922]],[.063,[.933,.974,.919]],[.065,[.933,.974,.919]],[.067,[.931,.974,.917]],[.068,[.931,.974,.917]],[.07,[.929,.973,.914]],[.072,[.929,.973,.914]],[.074,[.927,.972,.912]],[.076,[.927,.972,.912]],[.078,[.924,.971,.909]],[.08,[.924,.971,.909]],[.082,[.922,.97,.907]],[.084,[.922,.97,.907]],[.086,[.92,.969,.904]],[.088,[.92,.969,.904]],[.09,[.918,.968,.901]],[.092,[.918,.968,.901]],[.094,[.915,.968,.899]],[.096,[.915,.968,.899]],[.098,[.913,.967,.896]],[.1,[.913,.967,.896]],[.102,[.911,.966,.894]],[.104,[.911,.966,.894]],[.106,[.909,.965,.891]],[.108,[.909,.965,.891]],[.11,[.907,.964,.888]],[.112,[.907,.964,.888]],[.114,[.904,.963,.886]],[.115,[.904,.963,.886]],[.117,[.902,.962,.883]],[.119,[.902,.962,.883]],[.121,[.9,.962,.881]],[.123,[.9,.962,.881]],[.125,[.898,.961,.878]],[.127,[.898,.961,.878]],[.129,[.894,.959,.874]],[.131,[.894,.959,.874]],[.133,[.89,.958,.87]],[.135,[.89,.958,.87]],[.137,[.887,.956,.866]],[.139,[.887,.956,.866]],[.141,[.883,.955,.862]],[.143,[.883,.955,.862]],[.145,[.879,.953,.858]],[.147,[.879,.953,.858]],[.149,[.875,.952,.854]],[.151,[.875,.952,.854]],[.153,[.872,.95,.85]],[.155,[.872,.95,.85]],[.157,[.868,.949,.846]],[.159,[.868,.949,.846]],[.16,[.864,.947,.843]],[.162,[.864,.947,.843]],[.164,[.861,.946,.839]],[.166,[.861,.946,.839]],[.168,[.857,.944,.835]],[.17,[.857,.944,.835]],[.172,[.853,.943,.831]],[.174,[.853,.943,.831]],[.176,[.85,.941,.827]],[.178,[.85,.941,.827]],[.18,[.846,.94,.823]],[.182,[.846,.94,.823]],[.184,[.842,.938,.819]],[.186,[.842,.938,.819]],[.188,[.839,.937,.815]],[.19,[.839,.937,.815]],[.192,[.835,.936,.811]],[.194,[.835,.936,.811]],[.196,[.831,.934,.807]],[.198,[.831,.934,.807]],[.2,[.827,.933,.803]],[.202,[.827,.933,.803]],[.204,[.824,.931,.799]],[.205,[.824,.931,.799]],[.207,[.82,.93,.795]],[.209,[.82,.93,.795]],[.211,[.816,.928,.791]],[.213,[.816,.928,.791]],[.215,[.813,.927,.787]],[.217,[.813,.927,.787]],[.219,[.809,.925,.783]],[.221,[.809,.925,.783]],[.223,[.805,.924,.78]],[.225,[.805,.924,.78]],[.227,[.802,.922,.776]],[.229,[.802,.922,.776]],[.231,[.798,.921,.772]],[.233,[.798,.921,.772]],[.235,[.794,.919,.768]],[.237,[.794,.919,.768]],[.239,[.791,.918,.764]],[.241,[.791,.918,.764]],[.243,[.787,.916,.76]],[.245,[.787,.916,.76]],[.247,[.783,.915,.756]],[.249,[.783,.915,.756]],[.25,[.779,.913,.752]],[.252,[.779,.913,.752]],[.254,[.775,.911,.747]],[.256,[.775,.911,.747]],[.258,[.77,.909,.743]],[.26,[.77,.909,.743]],[.262,[.765,.907,.738]],[.264,[.765,.907,.738]],[.266,[.761,.905,.734]],[.268,[.761,.905,.734]],[.27,[.756,.903,.729]],[.272,[.756,.903,.729]],[.274,[.751,.901,.724]],[.276,[.751,.901,.724]],[.278,[.746,.899,.72]],[.28,[.746,.899,.72]],[.282,[.742,.897,.715]],[.284,[.742,.897,.715]],[.286,[.737,.896,.711]],[.288,[.737,.896,.711]],[.29,[.732,.894,.706]],[.292,[.732,.894,.706]],[.294,[.728,.892,.702]],[.295,[.728,.892,.702]],[.297,[.723,.89,.697]],[.299,[.723,.89,.697]],[.301,[.718,.888,.693]],[.303,[.718,.888,.693]],[.305,[.714,.886,.688]],[.307,[.714,.886,.688]],[.309,[.709,.884,.684]],[.311,[.709,.884,.684]],[.313,[.704,.882,.679]],[.315,[.704,.882,.679]],[.317,[.7,.88,.674]],[.319,[.7,.88,.674]],[.321,[.695,.878,.67]],[.323,[.695,.878,.67]],[.325,[.69,.876,.665]],[.327,[.69,.876,.665]],[.329,[.686,.874,.661]],[.331,[.686,.874,.661]],[.333,[.681,.872,.656]],[.335,[.681,.872,.656]],[.337,[.676,.87,.652]],[.339,[.676,.87,.652]],[.341,[.672,.868,.647]],[.342,[.672,.868,.647]],[.344,[.667,.866,.643]],[.346,[.667,.866,.643]],[.348,[.662,.864,.638]],[.35,[.662,.864,.638]],[.352,[.658,.862,.633]],[.354,[.658,.862,.633]],[.356,[.653,.86,.629]],[.358,[.653,.86,.629]],[.36,[.648,.858,.624]],[.362,[.648,.858,.624]],[.364,[.644,.856,.62]],[.366,[.644,.856,.62]],[.368,[.639,.854,.615]],[.37,[.639,.854,.615]],[.372,[.634,.852,.611]],[.374,[.634,.852,.611]],[.376,[.629,.85,.606]],[.378,[.629,.85,.606]],[.38,[.624,.847,.602]],[.382,[.624,.847,.602]],[.384,[.618,.845,.597]],[.386,[.618,.845,.597]],[.387,[.613,.842,.592]],[.389,[.613,.842,.592]],[.391,[.607,.84,.588]],[.393,[.607,.84,.588]],[.395,[.602,.837,.583]],[.397,[.602,.837,.583]],[.399,[.596,.835,.579]],[.401,[.596,.835,.579]],[.403,[.591,.832,.574]],[.405,[.591,.832,.574]],[.407,[.585,.829,.57]],[.409,[.585,.829,.57]],[.411,[.579,.827,.565]],[.413,[.579,.827,.565]],[.415,[.574,.824,.561]],[.417,[.574,.824,.561]],[.419,[.568,.822,.556]],[.421,[.568,.822,.556]],[.423,[.563,.819,.552]],[.425,[.563,.819,.552]],[.427,[.557,.816,.547]],[.429,[.557,.816,.547]],[.431,[.552,.814,.542]],[.432,[.552,.814,.542]],[.434,[.546,.811,.538]],[.436,[.546,.811,.538]],[.438,[.541,.809,.533]],[.44,[.541,.809,.533]],[.442,[.535,.806,.529]],[.444,[.535,.806,.529]],[.446,[.53,.804,.524]],[.448,[.53,.804,.524]],[.45,[.524,.801,.52]],[.452,[.524,.801,.52]],[.454,[.519,.798,.515]],[.456,[.519,.798,.515]],[.458,[.513,.796,.511]],[.46,[.513,.796,.511]],[.462,[.507,.793,.506]],[.464,[.507,.793,.506]],[.466,[.502,.791,.501]],[.468,[.502,.791,.501]],[.47,[.496,.788,.497]],[.472,[.496,.788,.497]],[.474,[.491,.785,.492]],[.476,[.491,.785,.492]],[.477,[.485,.783,.488]],[.479,[.485,.783,.488]],[.481,[.48,.78,.483]],[.483,[.48,.78,.483]],[.485,[.474,.778,.479]],[.487,[.474,.778,.479]],[.489,[.469,.775,.474]],[.491,[.469,.775,.474]],[.493,[.463,.773,.47]],[.495,[.463,.773,.47]],[.497,[.458,.77,.465]],[.499,[.458,.77,.465]],[.501,[.452,.767,.461]],[.503,[.452,.767,.461]],[.505,[.445,.764,.458]],[.507,[.445,.764,.458]],[.509,[.439,.761,.455]],[.511,[.439,.761,.455]],[.513,[.433,.758,.452]],[.515,[.433,.758,.452]],[.517,[.427,.755,.449]],[.519,[.427,.755,.449]],[.521,[.42,.752,.446]],[.523,[.42,.752,.446]],[.524,[.414,.749,.443]],[.526,[.414,.749,.443]],[.528,[.408,.746,.44]],[.53,[.408,.746,.44]],[.532,[.402,.742,.437]],[.534,[.402,.742,.437]],[.536,[.395,.739,.434]],[.538,[.395,.739,.434]],[.54,[.389,.736,.43]],[.542,[.389,.736,.43]],[.544,[.383,.733,.427]],[.546,[.383,.733,.427]],[.548,[.376,.73,.424]],[.55,[.376,.73,.424]],[.552,[.37,.727,.421]],[.554,[.37,.727,.421]],[.556,[.364,.724,.418]],[.558,[.364,.724,.418]],[.56,[.358,.721,.415]],[.562,[.358,.721,.415]],[.564,[.351,.718,.412]],[.566,[.351,.718,.412]],[.568,[.345,.715,.409]],[.569,[.345,.715,.409]],[.571,[.339,.712,.406]],[.573,[.339,.712,.406]],[.575,[.333,.709,.403]],[.577,[.333,.709,.403]],[.579,[.326,.706,.4]],[.581,[.326,.706,.4]],[.583,[.32,.702,.397]],[.585,[.32,.702,.397]],[.587,[.314,.699,.394]],[.589,[.314,.699,.394]],[.591,[.307,.696,.39]],[.593,[.307,.696,.39]],[.595,[.301,.693,.387]],[.597,[.301,.693,.387]],[.599,[.295,.69,.384]],[.601,[.295,.69,.384]],[.603,[.289,.687,.381]],[.605,[.289,.687,.381]],[.607,[.282,.684,.378]],[.609,[.282,.684,.378]],[.611,[.276,.681,.375]],[.613,[.276,.681,.375]],[.614,[.27,.678,.372]],[.616,[.27,.678,.372]],[.618,[.264,.675,.369]],[.62,[.264,.675,.369]],[.622,[.257,.672,.366]],[.624,[.257,.672,.366]],[.626,[.253,.668,.363]],[.628,[.253,.668,.363]],[.63,[.249,.664,.36]],[.632,[.249,.664,.36]],[.634,[.245,.66,.357]],[.636,[.245,.66,.357]],[.638,[.242,.656,.354]],[.64,[.242,.656,.354]],[.642,[.238,.652,.351]],[.644,[.238,.652,.351]],[.646,[.234,.648,.348]],[.648,[.234,.648,.348]],[.65,[.23,.645,.345]],[.652,[.23,.645,.345]],[.654,[.227,.641,.342]],[.656,[.227,.641,.342]],[.658,[.223,.637,.339]],[.659,[.223,.637,.339]],[.661,[.219,.633,.336]],[.663,[.219,.633,.336]],[.665,[.216,.629,.333]],[.667,[.216,.629,.333]],[.669,[.212,.625,.33]],[.671,[.212,.625,.33]],[.673,[.208,.621,.327]],[.675,[.208,.621,.327]],[.677,[.205,.617,.324]],[.679,[.205,.617,.324]],[.681,[.201,.613,.322]],[.683,[.201,.613,.322]],[.685,[.197,.609,.319]],[.687,[.197,.609,.319]],[.689,[.194,.605,.316]],[.691,[.194,.605,.316]],[.693,[.19,.601,.313]],[.695,[.19,.601,.313]],[.697,[.186,.597,.31]],[.699,[.186,.597,.31]],[.701,[.182,.593,.307]],[.703,[.182,.593,.307]],[.705,[.179,.589,.304]],[.706,[.179,.589,.304]],[.708,[.175,.585,.301]],[.71,[.175,.585,.301]],[.712,[.171,.582,.298]],[.714,[.171,.582,.298]],[.716,[.168,.578,.295]],[.718,[.168,.578,.295]],[.72,[.164,.574,.292]],[.722,[.164,.574,.292]],[.724,[.16,.57,.289]],[.726,[.16,.57,.289]],[.728,[.157,.566,.286]],[.73,[.157,.566,.286]],[.732,[.153,.562,.283]],[.734,[.153,.562,.283]],[.736,[.149,.558,.28]],[.738,[.149,.558,.28]],[.74,[.146,.554,.277]],[.742,[.146,.554,.277]],[.744,[.142,.55,.274]],[.746,[.142,.55,.274]],[.748,[.138,.546,.271]],[.75,[.138,.546,.271]],[.751,[.134,.542,.268]],[.753,[.134,.542,.268]],[.755,[.13,.539,.265]],[.757,[.13,.539,.265]],[.759,[.125,.535,.262]],[.761,[.125,.535,.262]],[.763,[.121,.531,.259]],[.765,[.121,.531,.259]],[.767,[.117,.528,.256]],[.769,[.117,.528,.256]],[.771,[.112,.524,.253]],[.773,[.112,.524,.253]],[.775,[.108,.52,.25]],[.777,[.108,.52,.25]],[.779,[.104,.516,.247]],[.781,[.104,.516,.247]],[.783,[.1,.513,.244]],[.785,[.1,.513,.244]],[.787,[.095,.509,.241]],[.789,[.095,.509,.241]],[.791,[.091,.505,.238]],[.793,[.091,.505,.238]],[.795,[.087,.502,.234]],[.796,[.087,.502,.234]],[.798,[.082,.498,.231]],[.8,[.082,.498,.231]],[.802,[.078,.494,.228]],[.804,[.078,.494,.228]],[.806,[.074,.491,.225]],[.808,[.074,.491,.225]],[.81,[.069,.487,.222]],[.812,[.069,.487,.222]],[.814,[.065,.483,.219]],[.816,[.065,.483,.219]],[.818,[.061,.48,.216]],[.82,[.061,.48,.216]],[.822,[.057,.476,.213]],[.824,[.057,.476,.213]],[.826,[.052,.472,.21]],[.828,[.052,.472,.21]],[.83,[.048,.469,.207]],[.832,[.048,.469,.207]],[.834,[.044,.465,.204]],[.836,[.044,.465,.204]],[.838,[.039,.461,.201]],[.84,[.039,.461,.201]],[.841,[.035,.457,.198]],[.843,[.035,.457,.198]],[.845,[.031,.454,.194]],[.847,[.031,.454,.194]],[.849,[.026,.45,.191]],[.851,[.026,.45,.191]],[.853,[.022,.446,.188]],[.855,[.022,.446,.188]],[.857,[.018,.443,.185]],[.859,[.018,.443,.185]],[.861,[.013,.439,.182]],[.863,[.013,.439,.182]],[.865,[.009,.435,.179]],[.867,[.009,.435,.179]],[.869,[.005,.432,.176]],[.871,[.005,.432,.176]],[.873,[.001,.428,.173]],[.875,[.001,.428,.173]],[.877,[0,.423,.171]],[.879,[0,.423,.171]],[.881,[0,.418,.169]],[.883,[0,.418,.169]],[.885,[0,.413,.167]],[.886,[0,.413,.167]],[.888,[0,.408,.164]],[.89,[0,.408,.164]],[.892,[0,.403,.162]],[.894,[0,.403,.162]],[.896,[0,.398,.16]],[.898,[0,.398,.16]],[.9,[0,.393,.158]],[.902,[0,.393,.158]],[.904,[0,.388,.156]],[.906,[0,.388,.156]],[.908,[0,.383,.154]],[.91,[0,.383,.154]],[.912,[0,.378,.152]],[.914,[0,.378,.152]],[.916,[0,.373,.15]],[.918,[0,.373,.15]],[.92,[0,.368,.148]],[.922,[0,.368,.148]],[.924,[0,.363,.146]],[.926,[0,.363,.146]],[.928,[0,.357,.144]],[.93,[0,.357,.144]],[.932,[0,.352,.141]],[.933,[0,.352,.141]],[.935,[0,.347,.139]],[.937,[0,.347,.139]],[.939,[0,.342,.137]],[.941,[0,.342,.137]],[.943,[0,.337,.135]],[.945,[0,.337,.135]],[.947,[0,.332,.133]],[.949,[0,.332,.133]],[.951,[0,.327,.131]],[.953,[0,.327,.131]],[.955,[0,.322,.129]],[.957,[0,.322,.129]],[.959,[0,.317,.127]],[.961,[0,.317,.127]],[.963,[0,.312,.125]],[.965,[0,.312,.125]],[.967,[0,.307,.123]],[.969,[0,.307,.123]],[.971,[0,.302,.121]],[.973,[0,.302,.121]],[.975,[0,.297,.118]],[.977,[0,.297,.118]],[.978,[0,.292,.116]],[.98,[0,.292,.116]],[.982,[0,.287,.114]],[.984,[0,.287,.114]],[.986,[0,.282,.112]],[.988,[0,.282,.112]],[.99,[0,.277,.11]],[.992,[0,.277,.11]],[.994,[0,.272,.108]],[.996,[0,.272,.108]],[.998,[0,.267,.106]],[1,[0,.267,.106]]];vislibColorMaps.Greys=[[0,[1,1,1]],[.002,[1,1,1]],[.004,[.998,.998,.998]],[.006,[.998,.998,.998]],[.008,[.996,.996,.996]],[.01,[.996,.996,.996]],[.012,[.994,.994,.994]],[.014,[.994,.994,.994]],[.016,[.993,.993,.993]],[.018,[.993,.993,.993]],[.02,[.991,.991,.991]],[.022,[.991,.991,.991]],[.023,[.989,.989,.989]],[.025,[.989,.989,.989]],[.027,[.987,.987,.987]],[.029,[.987,.987,.987]],[.031,[.985,.985,.985]],[.033,[.985,.985,.985]],[.035,[.983,.983,.983]],[.037,[.983,.983,.983]],[.039,[.982,.982,.982]],[.041,[.982,.982,.982]],[.043,[.98,.98,.98]],[.045,[.98,.98,.98]],[.047,[.978,.978,.978]],[.049,[.978,.978,.978]],[.051,[.976,.976,.976]],[.053,[.976,.976,.976]],[.055,[.974,.974,.974]],[.057,[.974,.974,.974]],[.059,[.972,.972,.972]],[.061,[.972,.972,.972]],[.063,[.97,.97,.97]],[.065,[.97,.97,.97]],[.067,[.969,.969,.969]],[.068,[.969,.969,.969]],[.07,[.967,.967,.967]],[.072,[.967,.967,.967]],[.074,[.965,.965,.965]],[.076,[.965,.965,.965]],[.078,[.963,.963,.963]],[.08,[.963,.963,.963]],[.082,[.961,.961,.961]],[.084,[.961,.961,.961]],[.086,[.959,.959,.959]],[.088,[.959,.959,.959]],[.09,[.958,.958,.958]],[.092,[.958,.958,.958]],[.094,[.956,.956,.956]],[.096,[.956,.956,.956]],[.098,[.954,.954,.954]],[.1,[.954,.954,.954]],[.102,[.952,.952,.952]],[.104,[.952,.952,.952]],[.106,[.95,.95,.95]],[.108,[.95,.95,.95]],[.11,[.948,.948,.948]],[.112,[.948,.948,.948]],[.114,[.946,.946,.946]],[.115,[.946,.946,.946]],[.117,[.945,.945,.945]],[.119,[.945,.945,.945]],[.121,[.943,.943,.943]],[.123,[.943,.943,.943]],[.125,[.941,.941,.941]],[.127,[.941,.941,.941]],[.129,[.938,.938,.938]],[.131,[.938,.938,.938]],[.133,[.935,.935,.935]],[.135,[.935,.935,.935]],[.137,[.932,.932,.932]],[.139,[.932,.932,.932]],[.141,[.93,.93,.93]],[.143,[.93,.93,.93]],[.145,[.927,.927,.927]],[.147,[.927,.927,.927]],[.149,[.924,.924,.924]],[.151,[.924,.924,.924]],[.153,[.921,.921,.921]],[.155,[.921,.921,.921]],[.157,[.918,.918,.918]],[.159,[.918,.918,.918]],[.16,[.915,.915,.915]],[.162,[.915,.915,.915]],[.164,[.913,.913,.913]],[.166,[.913,.913,.913]],[.168,[.91,.91,.91]],[.17,[.91,.91,.91]],[.172,[.907,.907,.907]],[.174,[.907,.907,.907]],[.176,[.904,.904,.904]],[.178,[.904,.904,.904]],[.18,[.901,.901,.901]],[.182,[.901,.901,.901]],[.184,[.898,.898,.898]],[.186,[.898,.898,.898]],[.188,[.896,.896,.896]],[.19,[.896,.896,.896]],[.192,[.893,.893,.893]],[.194,[.893,.893,.893]],[.196,[.89,.89,.89]],[.198,[.89,.89,.89]],[.2,[.887,.887,.887]],[.202,[.887,.887,.887]],[.204,[.884,.884,.884]],[.205,[.884,.884,.884]],[.207,[.881,.881,.881]],[.209,[.881,.881,.881]],[.211,[.879,.879,.879]],[.213,[.879,.879,.879]],[.215,[.876,.876,.876]],[.217,[.876,.876,.876]],[.219,[.873,.873,.873]],[.221,[.873,.873,.873]],[.223,[.87,.87,.87]],[.225,[.87,.87,.87]],[.227,[.867,.867,.867]],[.229,[.867,.867,.867]],[.231,[.864,.864,.864]],[.233,[.864,.864,.864]],[.235,[.862,.862,.862]],[.237,[.862,.862,.862]],[.239,[.859,.859,.859]],[.241,[.859,.859,.859]],[.243,[.856,.856,.856]],[.245,[.856,.856,.856]],[.247,[.853,.853,.853]],[.249,[.853,.853,.853]],[.25,[.85,.85,.85]],[.252,[.85,.85,.85]],[.254,[.847,.847,.847]],[.256,[.847,.847,.847]],[.258,[.843,.843,.843]],[.26,[.843,.843,.843]],[.262,[.84,.84,.84]],[.264,[.84,.84,.84]],[.266,[.836,.836,.836]],[.268,[.836,.836,.836]],[.27,[.833,.833,.833]],[.272,[.833,.833,.833]],[.274,[.829,.829,.829]],[.276,[.829,.829,.829]],[.278,[.826,.826,.826]],[.28,[.826,.826,.826]],[.282,[.823,.823,.823]],[.284,[.823,.823,.823]],[.286,[.819,.819,.819]],[.288,[.819,.819,.819]],[.29,[.816,.816,.816]],[.292,[.816,.816,.816]],[.294,[.812,.812,.812]],[.295,[.812,.812,.812]],[.297,[.809,.809,.809]],[.299,[.809,.809,.809]],[.301,[.805,.805,.805]],[.303,[.805,.805,.805]],[.305,[.802,.802,.802]],[.307,[.802,.802,.802]],[.309,[.798,.798,.798]],[.311,[.798,.798,.798]],[.313,[.795,.795,.795]],[.315,[.795,.795,.795]],[.317,[.792,.792,.792]],[.319,[.792,.792,.792]],[.321,[.788,.788,.788]],[.323,[.788,.788,.788]],[.325,[.785,.785,.785]],[.327,[.785,.785,.785]],[.329,[.781,.781,.781]],[.331,[.781,.781,.781]],[.333,[.778,.778,.778]],[.335,[.778,.778,.778]],[.337,[.774,.774,.774]],[.339,[.774,.774,.774]],[.341,[.771,.771,.771]],[.342,[.771,.771,.771]],[.344,[.767,.767,.767]],[.346,[.767,.767,.767]],[.348,[.764,.764,.764]],[.35,[.764,.764,.764]],[.352,[.761,.761,.761]],[.354,[.761,.761,.761]],[.356,[.757,.757,.757]],[.358,[.757,.757,.757]],[.36,[.754,.754,.754]],[.362,[.754,.754,.754]],[.364,[.75,.75,.75]],[.366,[.75,.75,.75]],[.368,[.747,.747,.747]],[.37,[.747,.747,.747]],[.372,[.743,.743,.743]],[.374,[.743,.743,.743]],[.376,[.739,.739,.739]],[.378,[.739,.739,.739]],[.38,[.735,.735,.735]],[.382,[.735,.735,.735]],[.384,[.73,.73,.73]],[.386,[.73,.73,.73]],[.387,[.725,.725,.725]],[.389,[.725,.725,.725]],[.391,[.72,.72,.72]],[.393,[.72,.72,.72]],[.395,[.715,.715,.715]],[.397,[.715,.715,.715]],[.399,[.711,.711,.711]],[.401,[.711,.711,.711]],[.403,[.706,.706,.706]],[.405,[.706,.706,.706]],[.407,[.701,.701,.701]],[.409,[.701,.701,.701]],[.411,[.696,.696,.696]],[.413,[.696,.696,.696]],[.415,[.691,.691,.691]],[.417,[.691,.691,.691]],[.419,[.687,.687,.687]],[.421,[.687,.687,.687]],[.423,[.682,.682,.682]],[.425,[.682,.682,.682]],[.427,[.677,.677,.677]],[.429,[.677,.677,.677]],[.431,[.672,.672,.672]],[.432,[.672,.672,.672]],[.434,[.667,.667,.667]],[.436,[.667,.667,.667]],[.438,[.663,.663,.663]],[.44,[.663,.663,.663]],[.442,[.658,.658,.658]],[.444,[.658,.658,.658]],[.446,[.653,.653,.653]],[.448,[.653,.653,.653]],[.45,[.648,.648,.648]],[.452,[.648,.648,.648]],[.454,[.643,.643,.643]],[.456,[.643,.643,.643]],[.458,[.639,.639,.639]],[.46,[.639,.639,.639]],[.462,[.634,.634,.634]],[.464,[.634,.634,.634]],[.466,[.629,.629,.629]],[.468,[.629,.629,.629]],[.47,[.624,.624,.624]],[.472,[.624,.624,.624]],[.474,[.619,.619,.619]],[.476,[.619,.619,.619]],[.477,[.615,.615,.615]],[.479,[.615,.615,.615]],[.481,[.61,.61,.61]],[.483,[.61,.61,.61]],[.485,[.605,.605,.605]],[.487,[.605,.605,.605]],[.489,[.6,.6,.6]],[.491,[.6,.6,.6]],[.493,[.595,.595,.595]],[.495,[.595,.595,.595]],[.497,[.591,.591,.591]],[.499,[.591,.591,.591]],[.501,[.586,.586,.586]],[.503,[.586,.586,.586]],[.505,[.582,.582,.582]],[.507,[.582,.582,.582]],[.509,[.577,.577,.577]],[.511,[.577,.577,.577]],[.513,[.573,.573,.573]],[.515,[.573,.573,.573]],[.517,[.569,.569,.569]],[.519,[.569,.569,.569]],[.521,[.565,.565,.565]],[.523,[.565,.565,.565]],[.524,[.56,.56,.56]],[.526,[.56,.56,.56]],[.528,[.556,.556,.556]],[.53,[.556,.556,.556]],[.532,[.552,.552,.552]],[.534,[.552,.552,.552]],[.536,[.547,.547,.547]],[.538,[.547,.547,.547]],[.54,[.543,.543,.543]],[.542,[.543,.543,.543]],[.544,[.539,.539,.539]],[.546,[.539,.539,.539]],[.548,[.534,.534,.534]],[.55,[.534,.534,.534]],[.552,[.53,.53,.53]],[.554,[.53,.53,.53]],[.556,[.526,.526,.526]],[.558,[.526,.526,.526]],[.56,[.521,.521,.521]],[.562,[.521,.521,.521]],[.564,[.517,.517,.517]],[.566,[.517,.517,.517]],[.568,[.513,.513,.513]],[.569,[.513,.513,.513]],[.571,[.509,.509,.509]],[.573,[.509,.509,.509]],[.575,[.504,.504,.504]],[.577,[.504,.504,.504]],[.579,[.5,.5,.5]],[.581,[.5,.5,.5]],[.583,[.496,.496,.496]],[.585,[.496,.496,.496]],[.587,[.491,.491,.491]],[.589,[.491,.491,.491]],[.591,[.487,.487,.487]],[.593,[.487,.487,.487]],[.595,[.483,.483,.483]],[.597,[.483,.483,.483]],[.599,[.478,.478,.478]],[.601,[.478,.478,.478]],[.603,[.474,.474,.474]],[.605,[.474,.474,.474]],[.607,[.47,.47,.47]],[.609,[.47,.47,.47]],[.611,[.466,.466,.466]],[.613,[.466,.466,.466]],[.614,[.461,.461,.461]],[.616,[.461,.461,.461]],[.618,[.457,.457,.457]],[.62,[.457,.457,.457]],[.622,[.453,.453,.453]],[.624,[.453,.453,.453]],[.626,[.448,.448,.448]],[.628,[.448,.448,.448]],[.63,[.444,.444,.444]],[.632,[.444,.444,.444]],[.634,[.44,.44,.44]],[.636,[.44,.44,.44]],[.638,[.436,.436,.436]],[.64,[.436,.436,.436]],[.642,[.432,.432,.432]],[.644,[.432,.432,.432]],[.646,[.428,.428,.428]],[.648,[.428,.428,.428]],[.65,[.424,.424,.424]],[.652,[.424,.424,.424]],[.654,[.42,.42,.42]],[.656,[.42,.42,.42]],[.658,[.416,.416,.416]],[.659,[.416,.416,.416]],[.661,[.412,.412,.412]],[.663,[.412,.412,.412]],[.665,[.408,.408,.408]],[.667,[.408,.408,.408]],[.669,[.404,.404,.404]],[.671,[.404,.404,.404]],[.673,[.4,.4,.4]],[.675,[.4,.4,.4]],[.677,[.396,.396,.396]],[.679,[.396,.396,.396]],[.681,[.392,.392,.392]],[.683,[.392,.392,.392]],[.685,[.388,.388,.388]],[.687,[.388,.388,.388]],[.689,[.383,.383,.383]],[.691,[.383,.383,.383]],[.693,[.379,.379,.379]],[.695,[.379,.379,.379]],[.697,[.375,.375,.375]],[.699,[.375,.375,.375]],[.701,[.371,.371,.371]],[.703,[.371,.371,.371]],[.705,[.367,.367,.367]],[.706,[.367,.367,.367]],[.708,[.363,.363,.363]],[.71,[.363,.363,.363]],[.712,[.359,.359,.359]],[.714,[.359,.359,.359]],[.716,[.355,.355,.355]],[.718,[.355,.355,.355]],[.72,[.351,.351,.351]],[.722,[.351,.351,.351]],[.724,[.347,.347,.347]],[.726,[.347,.347,.347]],[.728,[.343,.343,.343]],[.73,[.343,.343,.343]],[.732,[.339,.339,.339]],[.734,[.339,.339,.339]],[.736,[.335,.335,.335]],[.738,[.335,.335,.335]],[.74,[.331,.331,.331]],[.742,[.331,.331,.331]],[.744,[.327,.327,.327]],[.746,[.327,.327,.327]],[.748,[.323,.323,.323]],[.75,[.323,.323,.323]],[.751,[.317,.317,.317]],[.753,[.317,.317,.317]],[.755,[.312,.312,.312]],[.757,[.312,.312,.312]],[.759,[.306,.306,.306]],[.761,[.306,.306,.306]],[.763,[.301,.301,.301]],[.765,[.301,.301,.301]],[.767,[.295,.295,.295]],[.769,[.295,.295,.295]],[.771,[.29,.29,.29]],[.773,[.29,.29,.29]],[.775,[.284,.284,.284]],[.777,[.284,.284,.284]],[.779,[.279,.279,.279]],[.781,[.279,.279,.279]],[.783,[.273,.273,.273]],[.785,[.273,.273,.273]],[.787,[.268,.268,.268]],[.789,[.268,.268,.268]],[.791,[.262,.262,.262]],[.793,[.262,.262,.262]],[.795,[.257,.257,.257]],[.796,[.257,.257,.257]],[.798,[.251,.251,.251]],[.8,[.251,.251,.251]],[.802,[.245,.245,.245]],[.804,[.245,.245,.245]],[.806,[.24,.24,.24]],[.808,[.24,.24,.24]],[.81,[.234,.234,.234]],[.812,[.234,.234,.234]],[.814,[.229,.229,.229]],[.816,[.229,.229,.229]],[.818,[.223,.223,.223]],[.82,[.223,.223,.223]],[.822,[.218,.218,.218]],[.824,[.218,.218,.218]],[.826,[.212,.212,.212]],[.828,[.212,.212,.212]],[.83,[.207,.207,.207]],[.832,[.207,.207,.207]],[.834,[.201,.201,.201]],[.836,[.201,.201,.201]],[.838,[.196,.196,.196]],[.84,[.196,.196,.196]],[.841,[.19,.19,.19]],[.843,[.19,.19,.19]],[.845,[.185,.185,.185]],[.847,[.185,.185,.185]],[.849,[.179,.179,.179]],[.851,[.179,.179,.179]],[.853,[.173,.173,.173]],[.855,[.173,.173,.173]],[.857,[.168,.168,.168]],[.859,[.168,.168,.168]],[.861,[.162,.162,.162]],[.863,[.162,.162,.162]],[.865,[.157,.157,.157]],[.867,[.157,.157,.157]],[.869,[.151,.151,.151]],[.871,[.151,.151,.151]],[.873,[.146,.146,.146]],[.875,[.146,.146,.146]],[.877,[.141,.141,.141]],[.879,[.141,.141,.141]],[.881,[.137,.137,.137]],[.883,[.137,.137,.137]],[.885,[.132,.132,.132]],[.886,[.132,.132,.132]],[.888,[.127,.127,.127]],[.89,[.127,.127,.127]],[.892,[.123,.123,.123]],[.894,[.123,.123,.123]],[.896,[.118,.118,.118]],[.898,[.118,.118,.118]],[.9,[.114,.114,.114]],[.902,[.114,.114,.114]],[.904,[.109,.109,.109]],[.906,[.109,.109,.109]],[.908,[.105,.105,.105]],[.91,[.105,.105,.105]],[.912,[.1,.1,.1]],[.914,[.1,.1,.1]],[.916,[.096,.096,.096]],[.918,[.096,.096,.096]],[.92,[.091,.091,.091]],[.922,[.091,.091,.091]],[.924,[.086,.086,.086]],[.926,[.086,.086,.086]],[.928,[.082,.082,.082]],[.93,[.082,.082,.082]],[.932,[.077,.077,.077]],[.933,[.077,.077,.077]],[.935,[.073,.073,.073]],[.937,[.073,.073,.073]],[.939,[.068,.068,.068]],[.941,[.068,.068,.068]],[.943,[.064,.064,.064]],[.945,[.064,.064,.064]],[.947,[.059,.059,.059]],[.949,[.059,.059,.059]],[.951,[.055,.055,.055]],[.953,[.055,.055,.055]],[.955,[.05,.05,.05]],[.957,[.05,.05,.05]],[.959,[.046,.046,.046]],[.961,[.046,.046,.046]],[.963,[.041,.041,.041]],[.965,[.041,.041,.041]],[.967,[.036,.036,.036]],[.969,[.036,.036,.036]],[.971,[.032,.032,.032]],[.973,[.032,.032,.032]],[.975,[.027,.027,.027]],[.977,[.027,.027,.027]],[.978,[.023,.023,.023]],[.98,[.023,.023,.023]],[.982,[.018,.018,.018]],[.984,[.018,.018,.018]],[.986,[.014,.014,.014]],[.988,[.014,.014,.014]],[.99,[.009,.009,.009]],[.992,[.009,.009,.009]],[.994,[.005,.005,.005]],[.996,[.005,.005,.005]],[.998,[0,0,0]],[1,[0,0,0]]];vislibColorMaps.Reds=[[0,[1,.961,.941]],[.002,[1,.961,.941]],[.004,[1,.958,.937]],[.006,[1,.958,.937]],[.008,[1,.956,.934]],[.01,[1,.956,.934]],[.012,[1,.953,.93]],[.014,[1,.953,.93]],[.016,[1,.95,.926]],[.018,[1,.95,.926]],[.02,[.999,.948,.923]],[.022,[.999,.948,.923]],[.023,[.999,.945,.919]],[.025,[.999,.945,.919]],[.027,[.999,.943,.915]],[.029,[.999,.943,.915]],[.031,[.999,.94,.912]],[.033,[.999,.94,.912]],[.035,[.999,.938,.908]],[.037,[.999,.938,.908]],[.039,[.999,.935,.904]],[.041,[.999,.935,.904]],[.043,[.999,.932,.901]],[.045,[.999,.932,.901]],[.047,[.999,.93,.897]],[.049,[.999,.93,.897]],[.051,[.998,.927,.893]],[.053,[.998,.927,.893]],[.055,[.998,.925,.89]],[.057,[.998,.925,.89]],[.059,[.998,.922,.886]],[.061,[.998,.922,.886]],[.063,[.998,.919,.882]],[.065,[.998,.919,.882]],[.067,[.998,.917,.878]],[.068,[.998,.917,.878]],[.07,[.998,.914,.875]],[.072,[.998,.914,.875]],[.074,[.998,.912,.871]],[.076,[.998,.912,.871]],[.078,[.998,.909,.867]],[.08,[.998,.909,.867]],[.082,[.997,.907,.864]],[.084,[.997,.907,.864]],[.086,[.997,.904,.86]],[.088,[.997,.904,.86]],[.09,[.997,.901,.856]],[.092,[.997,.901,.856]],[.094,[.997,.899,.853]],[.096,[.997,.899,.853]],[.098,[.997,.896,.849]],[.1,[.997,.896,.849]],[.102,[.997,.894,.845]],[.104,[.997,.894,.845]],[.106,[.997,.891,.842]],[.108,[.997,.891,.842]],[.11,[.997,.888,.838]],[.112,[.997,.888,.838]],[.114,[.996,.886,.834]],[.115,[.996,.886,.834]],[.117,[.996,.883,.83]],[.119,[.996,.883,.83]],[.121,[.996,.881,.827]],[.123,[.996,.881,.827]],[.125,[.996,.878,.823]],[.127,[.996,.878,.823]],[.129,[.996,.873,.817]],[.131,[.996,.873,.817]],[.133,[.996,.869,.811]],[.135,[.996,.869,.811]],[.137,[.995,.864,.805]],[.139,[.995,.864,.805]],[.141,[.995,.86,.799]],[.143,[.995,.86,.799]],[.145,[.995,.855,.793]],[.147,[.995,.855,.793]],[.149,[.995,.851,.787]],[.151,[.995,.851,.787]],[.153,[.994,.846,.781]],[.155,[.994,.846,.781]],[.157,[.994,.841,.775]],[.159,[.994,.841,.775]],[.16,[.994,.837,.769]],[.162,[.994,.837,.769]],[.164,[.994,.832,.762]],[.166,[.994,.832,.762]],[.168,[.993,.828,.756]],[.17,[.993,.828,.756]],[.172,[.993,.823,.75]],[.174,[.993,.823,.75]],[.176,[.993,.819,.744]],[.178,[.993,.819,.744]],[.18,[.993,.814,.738]],[.182,[.993,.814,.738]],[.184,[.992,.81,.732]],[.186,[.992,.81,.732]],[.188,[.992,.805,.726]],[.19,[.992,.805,.726]],[.192,[.992,.8,.72]],[.194,[.992,.8,.72]],[.196,[.992,.796,.714]],[.198,[.992,.796,.714]],[.2,[.991,.791,.708]],[.202,[.991,.791,.708]],[.204,[.991,.787,.702]],[.205,[.991,.787,.702]],[.207,[.991,.782,.696]],[.209,[.991,.782,.696]],[.211,[.991,.778,.69]],[.213,[.991,.778,.69]],[.215,[.99,.773,.684]],[.217,[.99,.773,.684]],[.219,[.99,.769,.678]],[.221,[.99,.769,.678]],[.223,[.99,.764,.672]],[.225,[.99,.764,.672]],[.227,[.99,.76,.666]],[.229,[.99,.76,.666]],[.231,[.989,.755,.66]],[.233,[.989,.755,.66]],[.235,[.989,.75,.654]],[.237,[.989,.75,.654]],[.239,[.989,.746,.648]],[.241,[.989,.746,.648]],[.243,[.989,.741,.642]],[.245,[.989,.741,.642]],[.247,[.988,.737,.636]],[.249,[.988,.737,.636]],[.25,[.988,.732,.63]],[.252,[.988,.732,.63]],[.254,[.988,.727,.624]],[.256,[.988,.727,.624]],[.258,[.988,.722,.618]],[.26,[.988,.722,.618]],[.262,[.988,.717,.613]],[.264,[.988,.717,.613]],[.266,[.988,.712,.607]],[.268,[.988,.712,.607]],[.27,[.988,.707,.601]],[.272,[.988,.707,.601]],[.274,[.988,.702,.595]],[.276,[.988,.702,.595]],[.278,[.988,.697,.589]],[.28,[.988,.697,.589]],[.282,[.988,.692,.584]],[.284,[.988,.692,.584]],[.286,[.988,.687,.578]],[.288,[.988,.687,.578]],[.29,[.988,.682,.572]],[.292,[.988,.682,.572]],[.294,[.988,.677,.566]],[.295,[.988,.677,.566]],[.297,[.988,.672,.561]],[.299,[.988,.672,.561]],[.301,[.988,.666,.555]],[.303,[.988,.666,.555]],[.305,[.988,.661,.549]],[.307,[.988,.661,.549]],[.309,[.988,.656,.543]],[.311,[.988,.656,.543]],[.313,[.988,.651,.537]],[.315,[.988,.651,.537]],[.317,[.988,.646,.532]],[.319,[.988,.646,.532]],[.321,[.988,.641,.526]],[.323,[.988,.641,.526]],[.325,[.988,.636,.52]],[.327,[.988,.636,.52]],[.329,[.988,.631,.514]],[.331,[.988,.631,.514]],[.333,[.988,.626,.508]],[.335,[.988,.626,.508]],[.337,[.988,.621,.503]],[.339,[.988,.621,.503]],[.341,[.988,.616,.497]],[.342,[.988,.616,.497]],[.344,[.988,.611,.491]],[.346,[.988,.611,.491]],[.348,[.988,.606,.485]],[.35,[.988,.606,.485]],[.352,[.988,.601,.48]],[.354,[.988,.601,.48]],[.356,[.988,.596,.474]],[.358,[.988,.596,.474]],[.36,[.988,.591,.468]],[.362,[.988,.591,.468]],[.364,[.988,.586,.462]],[.366,[.988,.586,.462]],[.368,[.988,.581,.456]],[.37,[.988,.581,.456]],[.372,[.988,.576,.451]],[.374,[.988,.576,.451]],[.376,[.988,.571,.445]],[.378,[.988,.571,.445]],[.38,[.988,.566,.44]],[.382,[.988,.566,.44]],[.384,[.988,.561,.435]],[.386,[.988,.561,.435]],[.387,[.988,.556,.43]],[.389,[.988,.556,.43]],[.391,[.988,.551,.426]],[.393,[.988,.551,.426]],[.395,[.988,.546,.421]],[.397,[.988,.546,.421]],[.399,[.987,.541,.416]],[.401,[.987,.541,.416]],[.403,[.987,.536,.411]],[.405,[.987,.536,.411]],[.407,[.987,.531,.406]],[.409,[.987,.531,.406]],[.411,[.987,.526,.401]],[.413,[.987,.526,.401]],[.415,[.987,.521,.396]],[.417,[.987,.521,.396]],[.419,[.987,.517,.391]],[.421,[.987,.517,.391]],[.423,[.987,.512,.386]],[.425,[.987,.512,.386]],[.427,[.987,.507,.381]],[.429,[.987,.507,.381]],[.431,[.986,.502,.376]],[.432,[.986,.502,.376]],[.434,[.986,.497,.371]],[.436,[.986,.497,.371]],[.438,[.986,.492,.366]],[.44,[.986,.492,.366]],[.442,[.986,.487,.362]],[.444,[.986,.487,.362]],[.446,[.986,.482,.357]],[.448,[.986,.482,.357]],[.45,[.986,.477,.352]],[.452,[.986,.477,.352]],[.454,[.986,.472,.347]],[.456,[.986,.472,.347]],[.458,[.986,.467,.342]],[.46,[.986,.467,.342]],[.462,[.985,.462,.337]],[.464,[.985,.462,.337]],[.466,[.985,.458,.332]],[.468,[.985,.458,.332]],[.47,[.985,.453,.327]],[.472,[.985,.453,.327]],[.474,[.985,.448,.322]],[.476,[.985,.448,.322]],[.477,[.985,.443,.317]],[.479,[.985,.443,.317]],[.481,[.985,.438,.312]],[.483,[.985,.438,.312]],[.485,[.985,.433,.307]],[.487,[.985,.433,.307]],[.489,[.985,.428,.302]],[.491,[.985,.428,.302]],[.493,[.984,.423,.298]],[.495,[.984,.423,.298]],[.497,[.984,.418,.293]],[.499,[.984,.418,.293]],[.501,[.984,.413,.288]],[.503,[.984,.413,.288]],[.505,[.982,.407,.285]],[.507,[.982,.407,.285]],[.509,[.981,.401,.281]],[.511,[.981,.401,.281]],[.513,[.979,.395,.277]],[.515,[.979,.395,.277]],[.517,[.978,.39,.274]],[.519,[.978,.39,.274]],[.521,[.976,.384,.27]],[.523,[.976,.384,.27]],[.524,[.975,.378,.266]],[.526,[.975,.378,.266]],[.528,[.973,.372,.263]],[.53,[.973,.372,.263]],[.532,[.972,.367,.259]],[.534,[.972,.367,.259]],[.536,[.97,.361,.255]],[.538,[.97,.361,.255]],[.54,[.969,.355,.251]],[.542,[.969,.355,.251]],[.544,[.967,.349,.248]],[.546,[.967,.349,.248]],[.548,[.966,.343,.244]],[.55,[.966,.343,.244]],[.552,[.964,.338,.24]],[.554,[.964,.338,.24]],[.556,[.963,.332,.237]],[.558,[.963,.332,.237]],[.56,[.961,.326,.233]],[.562,[.961,.326,.233]],[.564,[.96,.32,.229]],[.566,[.96,.32,.229]],[.568,[.958,.314,.226]],[.569,[.958,.314,.226]],[.571,[.957,.309,.222]],[.573,[.957,.309,.222]],[.575,[.956,.303,.218]],[.577,[.956,.303,.218]],[.579,[.954,.297,.215]],[.581,[.954,.297,.215]],[.583,[.953,.291,.211]],[.585,[.953,.291,.211]],[.587,[.951,.286,.207]],[.589,[.951,.286,.207]],[.591,[.95,.28,.203]],[.593,[.95,.28,.203]],[.595,[.948,.274,.2]],[.597,[.948,.274,.2]],[.599,[.947,.268,.196]],[.601,[.947,.268,.196]],[.603,[.945,.262,.192]],[.605,[.945,.262,.192]],[.607,[.944,.257,.189]],[.609,[.944,.257,.189]],[.611,[.942,.251,.185]],[.613,[.942,.251,.185]],[.614,[.941,.245,.181]],[.616,[.941,.245,.181]],[.618,[.939,.239,.178]],[.62,[.939,.239,.178]],[.622,[.938,.234,.174]],[.624,[.938,.234,.174]],[.626,[.934,.229,.171]],[.628,[.934,.229,.171]],[.63,[.93,.224,.17]],[.632,[.93,.224,.17]],[.634,[.926,.22,.168]],[.636,[.926,.22,.168]],[.638,[.921,.216,.166]],[.64,[.921,.216,.166]],[.642,[.917,.211,.164]],[.644,[.917,.211,.164]],[.646,[.912,.207,.162]],[.648,[.912,.207,.162]],[.65,[.908,.203,.16]],[.652,[.908,.203,.16]],[.654,[.903,.199,.158]],[.656,[.903,.199,.158]],[.658,[.899,.194,.157]],[.659,[.899,.194,.157]],[.661,[.895,.19,.155]],[.663,[.895,.19,.155]],[.665,[.89,.186,.153]],[.667,[.89,.186,.153]],[.669,[.886,.181,.151]],[.671,[.886,.181,.151]],[.673,[.881,.177,.149]],[.675,[.881,.177,.149]],[.677,[.877,.173,.147]],[.679,[.877,.173,.147]],[.681,[.872,.168,.146]],[.683,[.872,.168,.146]],[.685,[.868,.164,.144]],[.687,[.868,.164,.144]],[.689,[.864,.16,.142]],[.691,[.864,.16,.142]],[.693,[.859,.155,.14]],[.695,[.859,.155,.14]],[.697,[.855,.151,.138]],[.699,[.855,.151,.138]],[.701,[.85,.147,.136]],[.703,[.85,.147,.136]],[.705,[.846,.143,.134]],[.706,[.846,.143,.134]],[.708,[.841,.138,.133]],[.71,[.841,.138,.133]],[.712,[.837,.134,.131]],[.714,[.837,.134,.131]],[.716,[.833,.13,.129]],[.718,[.833,.13,.129]],[.72,[.828,.125,.127]],[.722,[.828,.125,.127]],[.724,[.824,.121,.125]],[.726,[.824,.121,.125]],[.728,[.819,.117,.123]],[.73,[.819,.117,.123]],[.732,[.815,.112,.122]],[.734,[.815,.112,.122]],[.736,[.81,.108,.12]],[.738,[.81,.108,.12]],[.74,[.806,.104,.118]],[.742,[.806,.104,.118]],[.744,[.802,.1,.116]],[.746,[.802,.1,.116]],[.748,[.797,.095,.114]],[.75,[.797,.095,.114]],[.751,[.793,.093,.113]],[.753,[.793,.093,.113]],[.755,[.788,.092,.112]],[.757,[.788,.092,.112]],[.759,[.783,.091,.111]],[.761,[.783,.091,.111]],[.763,[.779,.09,.11]],[.765,[.779,.09,.11]],[.767,[.774,.089,.109]],[.769,[.774,.089,.109]],[.771,[.769,.088,.108]],[.773,[.769,.088,.108]],[.775,[.765,.087,.107]],[.777,[.765,.087,.107]],[.779,[.76,.086,.106]],[.781,[.76,.086,.106]],[.783,[.755,.084,.105]],[.785,[.755,.084,.105]],[.787,[.75,.083,.104]],[.789,[.75,.083,.104]],[.791,[.746,.082,.103]],[.793,[.746,.082,.103]],[.795,[.741,.081,.102]],[.796,[.741,.081,.102]],[.798,[.736,.08,.101]],[.8,[.736,.08,.101]],[.802,[.732,.079,.1]],[.804,[.732,.079,.1]],[.806,[.727,.078,.099]],[.808,[.727,.078,.099]],[.81,[.722,.077,.098]],[.812,[.722,.077,.098]],[.814,[.718,.076,.097]],[.816,[.718,.076,.097]],[.818,[.713,.074,.096]],[.82,[.713,.074,.096]],[.822,[.708,.073,.095]],[.824,[.708,.073,.095]],[.826,[.704,.072,.094]],[.828,[.704,.072,.094]],[.83,[.699,.071,.093]],[.832,[.699,.071,.093]],[.834,[.694,.07,.092]],[.836,[.694,.07,.092]],[.838,[.69,.069,.091]],[.84,[.69,.069,.091]],[.841,[.685,.068,.09]],[.843,[.685,.068,.09]],[.845,[.68,.067,.089]],[.847,[.68,.067,.089]],[.849,[.676,.066,.088]],[.851,[.676,.066,.088]],[.853,[.671,.064,.087]],[.855,[.671,.064,.087]],[.857,[.666,.063,.086]],[.859,[.666,.063,.086]],[.861,[.662,.062,.085]],[.863,[.662,.062,.085]],[.865,[.657,.061,.084]],[.867,[.657,.061,.084]],[.869,[.652,.06,.083]],[.871,[.652,.06,.083]],[.873,[.648,.059,.082]],[.875,[.648,.059,.082]],[.877,[.64,.057,.081]],[.879,[.64,.057,.081]],[.881,[.633,.055,.081]],[.883,[.633,.055,.081]],[.885,[.625,.054,.08]],[.886,[.625,.054,.08]],[.888,[.618,.052,.079]],[.89,[.618,.052,.079]],[.892,[.61,.05,.078]],[.894,[.61,.05,.078]],[.896,[.602,.048,.077]],[.898,[.602,.048,.077]],[.9,[.595,.046,.076]],[.902,[.595,.046,.076]],[.904,[.587,.044,.075]],[.906,[.587,.044,.075]],[.908,[.579,.042,.074]],[.91,[.579,.042,.074]],[.912,[.572,.041,.073]],[.914,[.572,.041,.073]],[.916,[.564,.039,.072]],[.918,[.564,.039,.072]],[.92,[.556,.037,.071]],[.922,[.556,.037,.071]],[.924,[.549,.035,.07]],[.926,[.549,.035,.07]],[.928,[.541,.033,.069]],[.93,[.541,.033,.069]],[.932,[.534,.031,.068]],[.933,[.534,.031,.068]],[.935,[.526,.03,.067]],[.937,[.526,.03,.067]],[.939,[.518,.028,.066]],[.941,[.518,.028,.066]],[.943,[.511,.026,.065]],[.945,[.511,.026,.065]],[.947,[.503,.024,.064]],[.949,[.503,.024,.064]],[.951,[.495,.022,.063]],[.953,[.495,.022,.063]],[.955,[.488,.02,.062]],[.957,[.488,.02,.062]],[.959,[.48,.018,.061]],[.961,[.48,.018,.061]],[.963,[.473,.017,.06]],[.965,[.473,.017,.06]],[.967,[.465,.015,.059]],[.969,[.465,.015,.059]],[.971,[.457,.013,.058]],[.973,[.457,.013,.058]],[.975,[.45,.011,.057]],[.977,[.45,.011,.057]],[.978,[.442,.009,.056]],[.98,[.442,.009,.056]],[.982,[.434,.007,.055]],[.984,[.434,.007,.055]],[.986,[.427,.006,.054]],[.988,[.427,.006,.054]],[.99,[.419,.004,.053]],[.992,[.419,.004,.053]],[.994,[.412,.002,.052]],[.996,[.412,.002,.052]],[.998,[.404,0,.051]],[1,[.404,0,.051]]];vislibColorMaps["Yellow to Red"]=[[0,[1,1,.8]],[.002,[1,1,.8]],[.004,[1,.998,.795]],[.006,[1,.998,.795]],[.008,[1,.996,.789]],[.01,[1,.996,.789]],[.012,[1,.993,.784]],[.014,[1,.993,.784]],[.016,[1,.991,.778]],[.018,[1,.991,.778]],[.02,[1,.989,.773]],[.022,[1,.989,.773]],[.023,[1,.987,.768]],[.025,[1,.987,.768]],[.027,[1,.984,.762]],[.029,[1,.984,.762]],[.031,[1,.982,.757]],[.033,[1,.982,.757]],[.035,[1,.98,.751]],[.037,[1,.98,.751]],[.039,[1,.978,.746]],[.041,[1,.978,.746]],[.043,[1,.976,.74]],[.045,[1,.976,.74]],[.047,[1,.973,.735]],[.049,[1,.973,.735]],[.051,[1,.971,.73]],[.053,[1,.971,.73]],[.055,[1,.969,.724]],[.057,[1,.969,.724]],[.059,[1,.967,.719]],[.061,[1,.967,.719]],[.063,[1,.965,.713]],[.065,[1,.965,.713]],[.067,[1,.962,.708]],[.068,[1,.962,.708]],[.07,[1,.96,.703]],[.072,[1,.96,.703]],[.074,[1,.958,.697]],[.076,[1,.958,.697]],[.078,[1,.956,.692]],[.08,[1,.956,.692]],[.082,[1,.953,.686]],[.084,[1,.953,.686]],[.086,[1,.951,.681]],[.088,[1,.951,.681]],[.09,[1,.949,.675]],[.092,[1,.949,.675]],[.094,[1,.947,.67]],[.096,[1,.947,.67]],[.098,[1,.945,.665]],[.1,[1,.945,.665]],[.102,[1,.942,.659]],[.104,[1,.942,.659]],[.106,[1,.94,.654]],[.108,[1,.94,.654]],[.11,[1,.938,.648]],[.112,[1,.938,.648]],[.114,[1,.936,.643]],[.115,[1,.936,.643]],[.117,[1,.934,.638]],[.119,[1,.934,.638]],[.121,[1,.931,.632]],[.123,[1,.931,.632]],[.125,[1,.929,.627]],[.127,[1,.929,.627]],[.129,[1,.927,.622]],[.131,[1,.927,.622]],[.133,[1,.924,.616]],[.135,[1,.924,.616]],[.137,[1,.922,.611]],[.139,[1,.922,.611]],[.141,[.999,.919,.606]],[.143,[.999,.919,.606]],[.145,[.999,.917,.601]],[.147,[.999,.917,.601]],[.149,[.999,.914,.596]],[.151,[.999,.914,.596]],[.153,[.999,.912,.591]],[.155,[.999,.912,.591]],[.157,[.999,.909,.585]],[.159,[.999,.909,.585]],[.16,[.999,.907,.58]],[.162,[.999,.907,.58]],[.164,[.999,.904,.575]],[.166,[.999,.904,.575]],[.168,[.999,.902,.57]],[.17,[.999,.902,.57]],[.172,[.999,.9,.565]],[.174,[.999,.9,.565]],[.176,[.998,.897,.56]],[.178,[.998,.897,.56]],[.18,[.998,.895,.554]],[.182,[.998,.895,.554]],[.184,[.998,.892,.549]],[.186,[.998,.892,.549]],[.188,[.998,.89,.544]],[.19,[.998,.89,.544]],[.192,[.998,.887,.539]],[.194,[.998,.887,.539]],[.196,[.998,.885,.534]],[.198,[.998,.885,.534]],[.2,[.998,.882,.529]],[.202,[.998,.882,.529]],[.204,[.998,.88,.523]],[.205,[.998,.88,.523]],[.207,[.997,.877,.518]],[.209,[.997,.877,.518]],[.211,[.997,.875,.513]],[.213,[.997,.875,.513]],[.215,[.997,.873,.508]],[.217,[.997,.873,.508]],[.219,[.997,.87,.503]],[.221,[.997,.87,.503]],[.223,[.997,.868,.498]],[.225,[.997,.868,.498]],[.227,[.997,.865,.492]],[.229,[.997,.865,.492]],[.231,[.997,.863,.487]],[.233,[.997,.863,.487]],[.235,[.997,.86,.482]],[.237,[.997,.86,.482]],[.239,[.996,.858,.477]],[.241,[.996,.858,.477]],[.243,[.996,.855,.472]],[.245,[.996,.855,.472]],[.247,[.996,.853,.467]],[.249,[.996,.853,.467]],[.25,[.996,.85,.461]],[.252,[.996,.85,.461]],[.254,[.996,.845,.456]],[.256,[.996,.845,.456]],[.258,[.996,.84,.451]],[.26,[.996,.84,.451]],[.262,[.996,.835,.446]],[.264,[.996,.835,.446]],[.266,[.996,.831,.441]],[.268,[.996,.831,.441]],[.27,[.996,.826,.436]],[.272,[.996,.826,.436]],[.274,[.996,.821,.43]],[.276,[.996,.821,.43]],[.278,[.996,.816,.425]],[.28,[.996,.816,.425]],[.282,[.996,.811,.42]],[.284,[.996,.811,.42]],[.286,[.996,.807,.415]],[.288,[.996,.807,.415]],[.29,[.996,.802,.41]],[.292,[.996,.802,.41]],[.294,[.996,.797,.405]],[.295,[.996,.797,.405]],[.297,[.996,.792,.399]],[.299,[.996,.792,.399]],[.301,[.996,.787,.394]],[.303,[.996,.787,.394]],[.305,[.996,.783,.389]],[.307,[.996,.783,.389]],[.309,[.996,.778,.384]],[.311,[.996,.778,.384]],[.313,[.996,.773,.379]],[.315,[.996,.773,.379]],[.317,[.996,.768,.374]],[.319,[.996,.768,.374]],[.321,[.996,.763,.368]],[.323,[.996,.763,.368]],[.325,[.996,.759,.363]],[.327,[.996,.759,.363]],[.329,[.996,.754,.358]],[.331,[.996,.754,.358]],[.333,[.996,.749,.353]],[.335,[.996,.749,.353]],[.337,[.996,.744,.348]],[.339,[.996,.744,.348]],[.341,[.996,.739,.343]],[.342,[.996,.739,.343]],[.344,[.996,.735,.337]],[.346,[.996,.735,.337]],[.348,[.996,.73,.332]],[.35,[.996,.73,.332]],[.352,[.996,.725,.327]],[.354,[.996,.725,.327]],[.356,[.996,.72,.322]],[.358,[.996,.72,.322]],[.36,[.996,.715,.317]],[.362,[.996,.715,.317]],[.364,[.996,.711,.312]],[.366,[.996,.711,.312]],[.368,[.996,.706,.306]],[.37,[.996,.706,.306]],[.372,[.996,.701,.301]],[.374,[.996,.701,.301]],[.376,[.996,.696,.297]],[.378,[.996,.696,.297]],[.38,[.996,.692,.295]],[.382,[.996,.692,.295]],[.384,[.996,.687,.293]],[.386,[.996,.687,.293]],[.387,[.996,.683,.291]],[.389,[.996,.683,.291]],[.391,[.996,.678,.289]],[.393,[.996,.678,.289]],[.395,[.995,.674,.287]],[.397,[.995,.674,.287]],[.399,[.995,.669,.285]],[.401,[.995,.669,.285]],[.403,[.995,.664,.284]],[.405,[.995,.664,.284]],[.407,[.995,.66,.282]],[.409,[.995,.66,.282]],[.411,[.995,.655,.28]],[.413,[.995,.655,.28]],[.415,[.995,.651,.278]],[.417,[.995,.651,.278]],[.419,[.995,.646,.276]],[.421,[.995,.646,.276]],[.423,[.995,.642,.274]],[.425,[.995,.642,.274]],[.427,[.994,.637,.272]],[.429,[.994,.637,.272]],[.431,[.994,.633,.27]],[.432,[.994,.633,.27]],[.434,[.994,.628,.268]],[.436,[.994,.628,.268]],[.438,[.994,.623,.266]],[.44,[.994,.623,.266]],[.442,[.994,.619,.264]],[.444,[.994,.619,.264]],[.446,[.994,.614,.262]],[.448,[.994,.614,.262]],[.45,[.994,.61,.26]],[.452,[.994,.61,.26]],[.454,[.994,.605,.258]],[.456,[.994,.605,.258]],[.458,[.993,.601,.256]],[.46,[.993,.601,.256]],[.462,[.993,.596,.254]],[.464,[.993,.596,.254]],[.466,[.993,.592,.252]],[.468,[.993,.592,.252]],[.47,[.993,.587,.25]],[.472,[.993,.587,.25]],[.474,[.993,.583,.248]],[.476,[.993,.583,.248]],[.477,[.993,.578,.246]],[.479,[.993,.578,.246]],[.481,[.993,.573,.244]],[.483,[.993,.573,.244]],[.485,[.993,.569,.242]],[.487,[.993,.569,.242]],[.489,[.992,.564,.24]],[.491,[.992,.564,.24]],[.493,[.992,.56,.238]],[.495,[.992,.56,.238]],[.497,[.992,.555,.236]],[.499,[.992,.555,.236]],[.501,[.992,.549,.234]],[.503,[.992,.549,.234]],[.505,[.992,.541,.232]],[.507,[.992,.541,.232]],[.509,[.992,.534,.23]],[.511,[.992,.534,.23]],[.513,[.992,.526,.228]],[.515,[.992,.526,.228]],[.517,[.992,.518,.225]],[.519,[.992,.518,.225]],[.521,[.991,.51,.223]],[.523,[.991,.51,.223]],[.524,[.991,.503,.221]],[.526,[.991,.503,.221]],[.528,[.991,.495,.219]],[.53,[.991,.495,.219]],[.532,[.991,.487,.216]],[.534,[.991,.487,.216]],[.536,[.991,.479,.214]],[.538,[.991,.479,.214]],[.54,[.991,.472,.212]],[.542,[.991,.472,.212]],[.544,[.991,.464,.21]],[.546,[.991,.464,.21]],[.548,[.991,.456,.208]],[.55,[.991,.456,.208]],[.552,[.99,.448,.205]],[.554,[.99,.448,.205]],[.556,[.99,.441,.203]],[.558,[.99,.441,.203]],[.56,[.99,.433,.201]],[.562,[.99,.433,.201]],[.564,[.99,.425,.199]],[.566,[.99,.425,.199]],[.568,[.99,.417,.197]],[.569,[.99,.417,.197]],[.571,[.99,.41,.194]],[.573,[.99,.41,.194]],[.575,[.99,.402,.192]],[.577,[.99,.402,.192]],[.579,[.99,.394,.19]],[.581,[.99,.394,.19]],[.583,[.99,.386,.188]],[.585,[.99,.386,.188]],[.587,[.989,.379,.185]],[.589,[.989,.379,.185]],[.591,[.989,.371,.183]],[.593,[.989,.371,.183]],[.595,[.989,.363,.181]],[.597,[.989,.363,.181]],[.599,[.989,.355,.179]],[.601,[.989,.355,.179]],[.603,[.989,.348,.177]],[.605,[.989,.348,.177]],[.607,[.989,.34,.174]],[.609,[.989,.34,.174]],[.611,[.989,.332,.172]],[.613,[.989,.332,.172]],[.614,[.989,.324,.17]],[.616,[.989,.324,.17]],[.618,[.988,.317,.168]],[.62,[.988,.317,.168]],[.622,[.988,.309,.166]],[.624,[.988,.309,.166]],[.626,[.986,.302,.164]],[.628,[.986,.302,.164]],[.63,[.983,.295,.162]],[.632,[.983,.295,.162]],[.634,[.98,.289,.16]],[.636,[.98,.289,.16]],[.638,[.977,.283,.158]],[.64,[.977,.283,.158]],[.642,[.974,.276,.157]],[.644,[.974,.276,.157]],[.646,[.971,.27,.155]],[.648,[.971,.27,.155]],[.65,[.968,.263,.153]],[.652,[.968,.263,.153]],[.654,[.965,.257,.152]],[.656,[.965,.257,.152]],[.658,[.962,.251,.15]],[.659,[.962,.251,.15]],[.661,[.959,.244,.148]],[.663,[.959,.244,.148]],[.665,[.956,.238,.146]],[.667,[.956,.238,.146]],[.669,[.952,.232,.145]],[.671,[.952,.232,.145]],[.673,[.949,.225,.143]],[.675,[.949,.225,.143]],[.677,[.946,.219,.141]],[.679,[.946,.219,.141]],[.681,[.943,.212,.14]],[.683,[.943,.212,.14]],[.685,[.94,.206,.138]],[.687,[.94,.206,.138]],[.689,[.937,.2,.136]],[.691,[.937,.2,.136]],[.693,[.934,.193,.134]],[.695,[.934,.193,.134]],[.697,[.931,.187,.133]],[.699,[.931,.187,.133]],[.701,[.928,.18,.131]],[.703,[.928,.18,.131]],[.705,[.925,.174,.129]],[.706,[.925,.174,.129]],[.708,[.922,.168,.127]],[.71,[.922,.168,.127]],[.712,[.919,.161,.126]],[.714,[.919,.161,.126]],[.716,[.916,.155,.124]],[.718,[.916,.155,.124]],[.72,[.912,.148,.122]],[.722,[.912,.148,.122]],[.724,[.909,.142,.121]],[.726,[.909,.142,.121]],[.728,[.906,.136,.119]],[.73,[.906,.136,.119]],[.732,[.903,.129,.117]],[.734,[.903,.129,.117]],[.736,[.9,.123,.115]],[.738,[.9,.123,.115]],[.74,[.897,.116,.114]],[.742,[.897,.116,.114]],[.744,[.894,.11,.112]],[.746,[.894,.11,.112]],[.748,[.891,.104,.11]],[.75,[.891,.104,.11]],[.751,[.887,.1,.111]],[.753,[.887,.1,.111]],[.755,[.882,.096,.112]],[.757,[.882,.096,.112]],[.759,[.877,.093,.113]],[.761,[.877,.093,.113]],[.763,[.873,.09,.114]],[.765,[.873,.09,.114]],[.767,[.868,.087,.116]],[.769,[.868,.087,.116]],[.771,[.863,.084,.117]],[.773,[.863,.084,.117]],[.775,[.859,.08,.118]],[.777,[.859,.08,.118]],[.779,[.854,.077,.119]],[.781,[.854,.077,.119]],[.783,[.849,.074,.121]],[.785,[.849,.074,.121]],[.787,[.845,.071,.122]],[.789,[.845,.071,.122]],[.791,[.84,.068,.123]],[.793,[.84,.068,.123]],[.795,[.835,.064,.124]],[.796,[.835,.064,.124]],[.798,[.831,.061,.125]],[.8,[.831,.061,.125]],[.802,[.826,.058,.127]],[.804,[.826,.058,.127]],[.806,[.821,.055,.128]],[.808,[.821,.055,.128]],[.81,[.817,.052,.129]],[.812,[.817,.052,.129]],[.814,[.812,.048,.13]],[.816,[.812,.048,.13]],[.818,[.807,.045,.132]],[.82,[.807,.045,.132]],[.822,[.803,.042,.133]],[.824,[.803,.042,.133]],[.826,[.798,.039,.134]],[.828,[.798,.039,.134]],[.83,[.793,.036,.135]],[.832,[.793,.036,.135]],[.834,[.789,.032,.137]],[.836,[.789,.032,.137]],[.838,[.784,.029,.138]],[.84,[.784,.029,.138]],[.841,[.779,.026,.139]],[.843,[.779,.026,.139]],[.845,[.774,.023,.14]],[.847,[.774,.023,.14]],[.849,[.77,.02,.141]],[.851,[.77,.02,.141]],[.853,[.765,.016,.143]],[.855,[.765,.016,.143]],[.857,[.76,.013,.144]],[.859,[.76,.013,.144]],[.861,[.756,.01,.145]],[.863,[.756,.01,.145]],[.865,[.751,.007,.146]],[.867,[.751,.007,.146]],[.869,[.746,.004,.148]],[.871,[.746,.004,.148]],[.873,[.742,0,.149]],[.875,[.742,0,.149]],[.877,[.735,0,.149]],[.879,[.735,0,.149]],[.881,[.727,0,.149]],[.883,[.727,0,.149]],[.885,[.72,0,.149]],[.886,[.72,0,.149]],[.888,[.712,0,.149]],[.89,[.712,0,.149]],[.892,[.705,0,.149]],[.894,[.705,0,.149]],[.896,[.697,0,.149]],[.898,[.697,0,.149]],[.9,[.69,0,.149]],[.902,[.69,0,.149]],[.904,[.682,0,.149]],[.906,[.682,0,.149]],[.908,[.675,0,.149]],[.91,[.675,0,.149]],[.912,[.667,0,.149]],[.914,[.667,0,.149]],[.916,[.66,0,.149]],[.918,[.66,0,.149]],[.92,[.652,0,.149]],[.922,[.652,0,.149]],[.924,[.645,0,.149]],[.926,[.645,0,.149]],[.928,[.637,0,.149]],[.93,[.637,0,.149]],[.932,[.63,0,.149]],[.933,[.63,0,.149]],[.935,[.622,0,.149]],[.937,[.622,0,.149]],[.939,[.615,0,.149]],[.941,[.615,0,.149]],[.943,[.607,0,.149]],[.945,[.607,0,.149]],[.947,[.6,0,.149]],[.949,[.6,0,.149]],[.951,[.592,0,.149]],[.953,[.592,0,.149]],[.955,[.585,0,.149]],[.957,[.585,0,.149]],[.959,[.577,0,.149]],[.961,[.577,0,.149]],[.963,[.57,0,.149]],[.965,[.57,0,.149]],[.967,[.562,0,.149]],[.969,[.562,0,.149]],[.971,[.554,0,.149]],[.973,[.554,0,.149]],[.975,[.547,0,.149]],[.977,[.547,0,.149]],[.978,[.539,0,.149]],[.98,[.539,0,.149]],[.982,[.532,0,.149]],[.984,[.532,0,.149]],[.986,[.524,0,.149]],[.988,[.524,0,.149]],[.99,[.517,0,.149]],[.992,[.517,0,.149]],[.994,[.509,0,.149]],[.996,[.509,0,.149]],[.998,[.502,0,.149]],[1,[.502,0,.149]]];vislibColorMaps["Green to Red"]=[[0,[0,.408,.216]],[.002,[0,.408,.216]],[.004,[.004,.415,.22]],[.006,[.004,.415,.22]],[.008,[.008,.423,.223]],[.01,[.008,.423,.223]],[.012,[.012,.43,.227]],[.014,[.012,.43,.227]],[.016,[.016,.437,.231]],[.018,[.016,.437,.231]],[.02,[.02,.445,.235]],[.022,[.02,.445,.235]],[.023,[.024,.452,.239]],[.025,[.024,.452,.239]],[.027,[.028,.46,.243]],[.029,[.028,.46,.243]],[.031,[.032,.467,.246]],[.033,[.032,.467,.246]],[.035,[.036,.474,.25]],[.037,[.036,.474,.25]],[.039,[.04,.482,.254]],[.041,[.04,.482,.254]],[.043,[.044,.489,.258]],[.045,[.044,.489,.258]],[.047,[.048,.496,.262]],[.049,[.048,.496,.262]],[.051,[.052,.504,.266]],[.053,[.052,.504,.266]],[.055,[.056,.511,.27]],[.057,[.056,.511,.27]],[.059,[.06,.519,.273]],[.061,[.06,.519,.273]],[.063,[.064,.526,.277]],[.065,[.064,.526,.277]],[.067,[.068,.533,.281]],[.068,[.068,.533,.281]],[.07,[.072,.541,.285]],[.072,[.072,.541,.285]],[.074,[.076,.548,.289]],[.076,[.076,.548,.289]],[.078,[.08,.555,.293]],[.08,[.08,.555,.293]],[.082,[.084,.563,.296]],[.084,[.084,.563,.296]],[.086,[.088,.57,.3]],[.088,[.088,.57,.3]],[.09,[.092,.578,.304]],[.092,[.092,.578,.304]],[.094,[.096,.585,.308]],[.096,[.096,.585,.308]],[.098,[.1,.592,.312]],[.1,[.1,.592,.312]],[.102,[.108,.599,.315]],[.104,[.108,.599,.315]],[.106,[.119,.605,.318]],[.108,[.119,.605,.318]],[.11,[.131,.61,.321]],[.112,[.131,.61,.321]],[.114,[.143,.616,.324]],[.115,[.143,.616,.324]],[.117,[.155,.622,.327]],[.119,[.155,.622,.327]],[.121,[.166,.627,.33]],[.123,[.166,.627,.33]],[.125,[.178,.633,.333]],[.127,[.178,.633,.333]],[.129,[.19,.639,.336]],[.131,[.19,.639,.336]],[.133,[.201,.644,.339]],[.135,[.201,.644,.339]],[.137,[.213,.65,.341]],[.139,[.213,.65,.341]],[.141,[.225,.656,.344]],[.143,[.225,.656,.344]],[.145,[.236,.662,.347]],[.147,[.236,.662,.347]],[.149,[.248,.667,.35]],[.151,[.248,.667,.35]],[.153,[.26,.673,.353]],[.155,[.26,.673,.353]],[.157,[.271,.679,.356]],[.159,[.271,.679,.356]],[.16,[.283,.684,.359]],[.162,[.283,.684,.359]],[.164,[.295,.69,.362]],[.166,[.295,.69,.362]],[.168,[.306,.696,.365]],[.17,[.306,.696,.365]],[.172,[.318,.701,.368]],[.174,[.318,.701,.368]],[.176,[.33,.707,.371]],[.178,[.33,.707,.371]],[.18,[.342,.713,.374]],[.182,[.342,.713,.374]],[.184,[.353,.718,.377]],[.186,[.353,.718,.377]],[.188,[.365,.724,.379]],[.19,[.365,.724,.379]],[.192,[.377,.73,.382]],[.194,[.377,.73,.382]],[.196,[.388,.735,.385]],[.198,[.388,.735,.385]],[.2,[.4,.741,.388]],[.202,[.4,.741,.388]],[.204,[.41,.745,.389]],[.205,[.41,.745,.389]],[.207,[.42,.75,.39]],[.209,[.42,.75,.39]],[.211,[.43,.754,.391]],[.213,[.43,.754,.391]],[.215,[.439,.758,.393]],[.217,[.439,.758,.393]],[.219,[.449,.763,.394]],[.221,[.449,.763,.394]],[.223,[.459,.767,.395]],[.225,[.459,.767,.395]],[.227,[.469,.771,.396]],[.229,[.469,.771,.396]],[.231,[.479,.776,.397]],[.233,[.479,.776,.397]],[.235,[.489,.78,.398]],[.237,[.489,.78,.398]],[.239,[.498,.784,.399]],[.241,[.498,.784,.399]],[.243,[.508,.789,.4]],[.245,[.508,.789,.4]],[.247,[.518,.793,.401]],[.249,[.518,.793,.401]],[.25,[.528,.797,.402]],[.252,[.528,.797,.402]],[.254,[.538,.801,.403]],[.256,[.538,.801,.403]],[.258,[.548,.806,.404]],[.26,[.548,.806,.404]],[.262,[.557,.81,.405]],[.264,[.557,.81,.405]],[.266,[.567,.814,.407]],[.268,[.567,.814,.407]],[.27,[.577,.819,.408]],[.272,[.577,.819,.408]],[.274,[.587,.823,.409]],[.276,[.587,.823,.409]],[.278,[.597,.827,.41]],[.28,[.597,.827,.41]],[.282,[.607,.832,.411]],[.284,[.607,.832,.411]],[.286,[.617,.836,.412]],[.288,[.617,.836,.412]],[.29,[.626,.84,.413]],[.292,[.626,.84,.413]],[.294,[.636,.845,.414]],[.295,[.636,.845,.414]],[.297,[.646,.849,.415]],[.299,[.646,.849,.415]],[.301,[.655,.853,.418]],[.303,[.655,.853,.418]],[.305,[.663,.856,.423]],[.307,[.663,.856,.423]],[.309,[.671,.859,.428]],[.311,[.671,.859,.428]],[.313,[.678,.863,.433]],[.315,[.678,.863,.433]],[.317,[.686,.866,.439]],[.319,[.686,.866,.439]],[.321,[.694,.87,.444]],[.323,[.694,.87,.444]],[.325,[.702,.873,.449]],[.327,[.702,.873,.449]],[.329,[.71,.876,.454]],[.331,[.71,.876,.454]],[.333,[.718,.88,.459]],[.335,[.718,.88,.459]],[.337,[.725,.883,.464]],[.339,[.725,.883,.464]],[.341,[.733,.887,.469]],[.342,[.733,.887,.469]],[.344,[.741,.89,.474]],[.346,[.741,.89,.474]],[.348,[.749,.893,.479]],[.35,[.749,.893,.479]],[.352,[.757,.897,.484]],[.354,[.757,.897,.484]],[.356,[.765,.9,.489]],[.358,[.765,.9,.489]],[.36,[.773,.903,.494]],[.362,[.773,.903,.494]],[.364,[.78,.907,.499]],[.366,[.78,.907,.499]],[.368,[.788,.91,.504]],[.37,[.788,.91,.504]],[.372,[.796,.914,.51]],[.374,[.796,.914,.51]],[.376,[.804,.917,.515]],[.378,[.804,.917,.515]],[.38,[.812,.92,.52]],[.382,[.812,.92,.52]],[.384,[.82,.924,.525]],[.386,[.82,.924,.525]],[.387,[.827,.927,.53]],[.389,[.827,.927,.53]],[.391,[.835,.93,.535]],[.393,[.835,.93,.535]],[.395,[.843,.934,.54]],[.397,[.843,.934,.54]],[.399,[.851,.937,.545]],[.401,[.851,.937,.545]],[.403,[.857,.94,.553]],[.405,[.857,.94,.553]],[.407,[.863,.942,.561]],[.409,[.863,.942,.561]],[.411,[.869,.945,.569]],[.413,[.869,.945,.569]],[.415,[.874,.947,.577]],[.417,[.874,.947,.577]],[.419,[.88,.95,.585]],[.421,[.88,.95,.585]],[.423,[.886,.952,.593]],[.425,[.886,.952,.593]],[.427,[.892,.954,.601]],[.429,[.892,.954,.601]],[.431,[.898,.957,.609]],[.432,[.898,.957,.609]],[.434,[.904,.959,.617]],[.436,[.904,.959,.617]],[.438,[.909,.962,.625]],[.44,[.909,.962,.625]],[.442,[.915,.964,.633]],[.444,[.915,.964,.633]],[.446,[.921,.967,.641]],[.448,[.921,.967,.641]],[.45,[.927,.969,.649]],[.452,[.927,.969,.649]],[.454,[.933,.972,.657]],[.456,[.933,.972,.657]],[.458,[.939,.974,.665]],[.46,[.939,.974,.665]],[.462,[.944,.977,.673]],[.464,[.944,.977,.673]],[.466,[.95,.979,.681]],[.468,[.95,.979,.681]],[.47,[.956,.982,.689]],[.472,[.956,.982,.689]],[.474,[.962,.984,.697]],[.476,[.962,.984,.697]],[.477,[.968,.986,.705]],[.479,[.968,.986,.705]],[.481,[.974,.989,.713]],[.483,[.974,.989,.713]],[.485,[.98,.991,.721]],[.487,[.98,.991,.721]],[.489,[.985,.994,.729]],[.491,[.985,.994,.729]],[.493,[.991,.996,.737]],[.495,[.991,.996,.737]],[.497,[.997,.999,.745]],[.499,[.997,.999,.745]],[.501,[1,.998,.745]],[.503,[1,.998,.745]],[.505,[1,.993,.737]],[.507,[1,.993,.737]],[.509,[1,.988,.729]],[.511,[1,.988,.729]],[.513,[.999,.983,.721]],[.515,[.999,.983,.721]],[.517,[.999,.979,.713]],[.519,[.999,.979,.713]],[.521,[.999,.974,.705]],[.523,[.999,.974,.705]],[.524,[.999,.969,.697]],[.526,[.999,.969,.697]],[.528,[.999,.964,.689]],[.53,[.999,.964,.689]],[.532,[.999,.959,.681]],[.534,[.999,.959,.681]],[.536,[.999,.955,.673]],[.538,[.999,.955,.673]],[.54,[.998,.95,.665]],[.542,[.998,.95,.665]],[.544,[.998,.945,.657]],[.546,[.998,.945,.657]],[.548,[.998,.94,.649]],[.55,[.998,.94,.649]],[.552,[.998,.936,.641]],[.554,[.998,.936,.641]],[.556,[.998,.931,.633]],[.558,[.998,.931,.633]],[.56,[.998,.926,.625]],[.562,[.998,.926,.625]],[.564,[.997,.921,.617]],[.566,[.997,.921,.617]],[.568,[.997,.917,.609]],[.569,[.997,.917,.609]],[.571,[.997,.912,.601]],[.573,[.997,.912,.601]],[.575,[.997,.907,.593]],[.577,[.997,.907,.593]],[.579,[.997,.902,.585]],[.581,[.997,.902,.585]],[.583,[.997,.898,.577]],[.585,[.997,.898,.577]],[.587,[.997,.893,.569]],[.589,[.997,.893,.569]],[.591,[.996,.888,.561]],[.593,[.996,.888,.561]],[.595,[.996,.883,.553]],[.597,[.996,.883,.553]],[.599,[.996,.878,.545]],[.601,[.996,.878,.545]],[.603,[.996,.871,.539]],[.605,[.996,.871,.539]],[.607,[.996,.863,.532]],[.609,[.996,.863,.532]],[.611,[.996,.855,.526]],[.613,[.996,.855,.526]],[.614,[.995,.848,.519]],[.616,[.995,.848,.519]],[.618,[.995,.84,.513]],[.62,[.995,.84,.513]],[.622,[.995,.832,.506]],[.624,[.995,.832,.506]],[.626,[.995,.825,.5]],[.628,[.995,.825,.5]],[.63,[.995,.817,.493]],[.632,[.995,.817,.493]],[.634,[.995,.809,.487]],[.636,[.995,.809,.487]],[.638,[.995,.802,.481]],[.64,[.995,.802,.481]],[.642,[.994,.794,.474]],[.644,[.994,.794,.474]],[.646,[.994,.786,.468]],[.648,[.994,.786,.468]],[.65,[.994,.778,.461]],[.652,[.994,.778,.461]],[.654,[.994,.771,.455]],[.656,[.994,.771,.455]],[.658,[.994,.763,.448]],[.659,[.994,.763,.448]],[.661,[.994,.755,.442]],[.663,[.994,.755,.442]],[.665,[.993,.748,.435]],[.667,[.993,.748,.435]],[.669,[.993,.74,.429]],[.671,[.993,.74,.429]],[.673,[.993,.732,.422]],[.675,[.993,.732,.422]],[.677,[.993,.725,.416]],[.679,[.993,.725,.416]],[.681,[.993,.717,.409]],[.683,[.993,.717,.409]],[.685,[.993,.709,.403]],[.687,[.993,.709,.403]],[.689,[.993,.702,.397]],[.691,[.993,.702,.397]],[.693,[.992,.694,.39]],[.695,[.992,.694,.39]],[.697,[.992,.686,.384]],[.699,[.992,.686,.384]],[.701,[.991,.677,.378]],[.703,[.991,.677,.378]],[.705,[.99,.667,.373]],[.706,[.99,.667,.373]],[.708,[.989,.657,.369]],[.71,[.989,.657,.369]],[.712,[.987,.647,.364]],[.714,[.987,.647,.364]],[.716,[.986,.637,.36]],[.718,[.986,.637,.36]],[.72,[.985,.627,.355]],[.722,[.985,.627,.355]],[.724,[.983,.617,.35]],[.726,[.983,.617,.35]],[.728,[.982,.607,.346]],[.73,[.982,.607,.346]],[.732,[.98,.597,.341]],[.734,[.98,.597,.341]],[.736,[.979,.587,.337]],[.738,[.979,.587,.337]],[.74,[.978,.577,.332]],[.742,[.978,.577,.332]],[.744,[.976,.567,.327]],[.746,[.976,.567,.327]],[.748,[.975,.557,.323]],[.75,[.975,.557,.323]],[.751,[.973,.547,.318]],[.753,[.973,.547,.318]],[.755,[.972,.537,.313]],[.757,[.972,.537,.313]],[.759,[.971,.527,.309]],[.761,[.971,.527,.309]],[.763,[.969,.517,.304]],[.765,[.969,.517,.304]],[.767,[.968,.507,.3]],[.769,[.968,.507,.3]],[.771,[.967,.497,.295]],[.773,[.967,.497,.295]],[.775,[.965,.487,.29]],[.777,[.965,.487,.29]],[.779,[.964,.477,.286]],[.781,[.964,.477,.286]],[.783,[.962,.467,.281]],[.785,[.962,.467,.281]],[.787,[.961,.457,.277]],[.789,[.961,.457,.277]],[.791,[.96,.447,.272]],[.793,[.96,.447,.272]],[.795,[.958,.437,.267]],[.796,[.958,.437,.267]],[.798,[.957,.427,.263]],[.8,[.957,.427,.263]],[.802,[.952,.418,.258]],[.804,[.952,.418,.258]],[.806,[.948,.409,.254]],[.808,[.948,.409,.254]],[.81,[.943,.399,.25]],[.812,[.943,.399,.25]],[.814,[.939,.39,.246]],[.816,[.939,.39,.246]],[.818,[.935,.381,.241]],[.82,[.935,.381,.241]],[.822,[.93,.371,.237]],[.824,[.93,.371,.237]],[.826,[.926,.362,.233]],[.828,[.926,.362,.233]],[.83,[.921,.352,.228]],[.832,[.921,.352,.228]],[.834,[.917,.343,.224]],[.836,[.917,.343,.224]],[.838,[.912,.334,.22]],[.84,[.912,.334,.22]],[.841,[.908,.324,.215]],[.843,[.908,.324,.215]],[.845,[.903,.315,.211]],[.847,[.903,.315,.211]],[.849,[.899,.305,.207]],[.851,[.899,.305,.207]],[.853,[.894,.296,.202]],[.855,[.894,.296,.202]],[.857,[.89,.287,.198]],[.859,[.89,.287,.198]],[.861,[.886,.277,.194]],[.863,[.886,.277,.194]],[.865,[.881,.268,.19]],[.867,[.881,.268,.19]],[.869,[.877,.259,.185]],[.871,[.877,.259,.185]],[.873,[.872,.249,.181]],[.875,[.872,.249,.181]],[.877,[.868,.24,.177]],[.879,[.868,.24,.177]],[.881,[.863,.23,.172]],[.883,[.863,.23,.172]],[.885,[.859,.221,.168]],[.886,[.859,.221,.168]],[.888,[.854,.212,.164]],[.89,[.854,.212,.164]],[.892,[.85,.202,.159]],[.894,[.85,.202,.159]],[.896,[.845,.193,.155]],[.898,[.845,.193,.155]],[.9,[.839,.185,.153]],[.902,[.839,.185,.153]],[.904,[.832,.177,.153]],[.906,[.832,.177,.153]],[.908,[.824,.17,.153]],[.91,[.824,.17,.153]],[.912,[.816,.162,.152]],[.914,[.816,.162,.152]],[.916,[.809,.155,.152]],[.918,[.809,.155,.152]],[.92,[.801,.148,.152]],[.922,[.801,.148,.152]],[.924,[.793,.14,.152]],[.926,[.793,.14,.152]],[.928,[.785,.133,.152]],[.93,[.785,.133,.152]],[.932,[.778,.125,.152]],[.933,[.778,.125,.152]],[.935,[.77,.118,.151]],[.937,[.77,.118,.151]],[.939,[.762,.111,.151]],[.941,[.762,.111,.151]],[.943,[.755,.103,.151]],[.945,[.755,.103,.151]],[.947,[.747,.096,.151]],[.949,[.747,.096,.151]],[.951,[.739,.089,.151]],[.953,[.739,.089,.151]],[.955,[.732,.081,.151]],[.957,[.732,.081,.151]],[.959,[.724,.074,.151]],[.961,[.724,.074,.151]],[.963,[.716,.066,.15]],[.965,[.716,.066,.15]],[.967,[.709,.059,.15]],[.969,[.709,.059,.15]],[.971,[.701,.052,.15]],[.973,[.701,.052,.15]],[.975,[.693,.044,.15]],[.977,[.693,.044,.15]],[.978,[.686,.037,.15]],[.98,[.686,.037,.15]],[.982,[.678,.03,.15]],[.984,[.678,.03,.15]],[.986,[.67,.022,.149]],[.988,[.67,.022,.149]],[.99,[.662,.015,.149]],[.992,[.662,.015,.149]],[.994,[.655,.007,.149]],[.996,[.655,.007,.149]],[.998,[.647,0,.149]],[1,[.647,0,.149]]]},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var calculate_object_hash_1=__webpack_require__(1527);var Status;(function(Status){Status["AGGS"]="aggs";Status["DATA"]="data";Status["PARAMS"]="params";Status["RESIZE"]="resize";Status["TIME"]="time";Status["UI_STATE"]="uiState"})(Status||(Status={}));exports.Status=Status;function hasHashChanged(valueHash,oldStatus,name){var oldHash=oldStatus[name];return oldHash!==valueHash}function hasSizeChanged(size,oldSize){if(!oldSize)return true;return oldSize.width!==size.width||oldSize.height!==size.height}function getUpdateStatus(){var requiresUpdateStatus=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];var obj=arguments[1];var param=arguments[2];var status={};if(0===requiresUpdateStatus.length)return status;obj._oldStatus||(obj._oldStatus={});var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=void 0;try{for(var _step,_iterator=requiresUpdateStatus[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var requiredStatus=_step.value;var hash=void 0;switch(requiredStatus){case Status.AGGS:hash=calculate_object_hash_1.calculateObjectHash(param.vis.aggs);status.aggs=hasHashChanged(hash,obj._oldStatus,"aggs");obj._oldStatus.aggs=hash;break;case Status.DATA:hash=calculate_object_hash_1.calculateObjectHash(param.visData);status.data=hasHashChanged(hash,obj._oldStatus,"data");obj._oldStatus.data=hash;break;case Status.PARAMS:hash=calculate_object_hash_1.calculateObjectHash(param.vis.params);status.params=hasHashChanged(hash,obj._oldStatus,"param");obj._oldStatus.param=hash;break;case Status.RESIZE:var width=param.vis.size?param.vis.size[0]:0;var height=param.vis.size?param.vis.size[1]:0;var size={width:width,height:height};status.resize=hasSizeChanged(size,obj._oldStatus.resize);obj._oldStatus.resize=size;break;case Status.TIME:var timeRange=param.vis.filters&&param.vis.filters.timeRange;hash=calculate_object_hash_1.calculateObjectHash(timeRange);status.time=hasHashChanged(hash,obj._oldStatus,"time");obj._oldStatus.time=hash;break;case Status.UI_STATE:hash=calculate_object_hash_1.calculateObjectHash(param.uiState);status.uiState=hasHashChanged(hash,obj._oldStatus,"uiState");obj._oldStatus.uiState=hash}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return status}exports.getUpdateStatus=getUpdateStatus},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _re_id_series=__webpack_require__(4577);var _re_id_series2=_interopRequireDefault(_re_id_series);var _series=__webpack_require__(4578);var _series2=_interopRequireDefault(_series);var _collection_actions=__webpack_require__(328);var _new_series_fn=__webpack_require__(4616);var _new_series_fn2=_interopRequireDefault(_new_series_fn);var _reactAnythingSortable=__webpack_require__(301);var _reactAnythingSortable2=_interopRequireDefault(_reactAnythingSortable);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var SeriesEditor=function(_Component){_inherits(SeriesEditor,_Component);function SeriesEditor(props){_classCallCheck(this,SeriesEditor);var _this=_possibleConstructorReturn(this,(SeriesEditor.__proto__||Object.getPrototypeOf(SeriesEditor)).call(this,props));_this.renderRow=_this.renderRow.bind(_this);_this.sortSeries=_this.sortSeries.bind(_this);return _this}_createClass(SeriesEditor,[{key:"handleClone",value:function handleClone(series){var newSeries=(0,_re_id_series2.default)(series);_collection_actions.handleAdd.call(null,this.props,function(){return newSeries})}},{key:"sortSeries",value:function sortSeries(index,direction,allSeries){var newIndex=index+("up"===direction?-1:1);if(newIndex<0||newIndex>=allSeries.length)return;var newSeries=allSeries.slice(0);var changeWithElement=allSeries[newIndex];newSeries[newIndex]=allSeries[index];newSeries[index]=changeWithElement;this.props.onChange({series:newSeries})}},{key:"renderRow",value:function renderRow(row,index,allSeries){var _this2=this;var props=this.props;var fields=props.fields,model=props.model,name=props.name,limit=props.limit,colorPicker=props.colorPicker;return _react2.default.createElement(_series2.default,{colorPicker:colorPicker,disableAdd:model[name].length>=limit,disableDelete:model[name].length<2,fields:fields,key:row.id,onAdd:_collection_actions.handleAdd.bind(null,props,_new_series_fn2.default),onChange:_collection_actions.handleChange.bind(null,props),onClone:function onClone(){return _this2.handleClone(row)},onDelete:_collection_actions.handleDelete.bind(null,props,row),onShouldSortItem:function onShouldSortItem(direction){return _this2.sortSeries(index,direction,allSeries)},model:row,panel:model,sortData:row.id})}},{key:"render",value:function render(){var _this3=this;var _props=this.props,limit=_props.limit,model=_props.model,name=_props.name;var series=model[name].filter(function(val,index){return index<(limit||Infinity)}).map(this.renderRow);var handleSort=function handleSort(data){var series=data.map(function(id){return model[name].find(function(s){return s.id===id})});_this3.props.onChange({series:series})};return _react2.default.createElement("div",{className:"vis_editor__series_editor-container"},_react2.default.createElement(_reactAnythingSortable2.default,{dynamic:true,direction:"vertical",onSort:handleSort,sortHandle:"vis_editor__sort"},series))}}]);return SeriesEditor}(_react.Component);SeriesEditor.defaultProps={name:"series",limit:Infinity,colorPicker:true};SeriesEditor.propTypes={colorPicker:_propTypes2.default.bool,fields:_propTypes2.default.object,limit:_propTypes2.default.number,model:_propTypes2.default.object,name:_propTypes2.default.string,onChange:_propTypes2.default.func};exports.default=SeriesEditor;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=createAggRowRender;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _series_change_handler=__webpack_require__(4590);var _series_change_handler2=_interopRequireDefault(_series_change_handler);var _new_metric_agg_fn=__webpack_require__(911);var _new_metric_agg_fn2=_interopRequireDefault(_new_metric_agg_fn);var _collection_actions=__webpack_require__(328);var _agg=__webpack_require__(4591);var _agg2=_interopRequireDefault(_agg);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function createAggRowRender(props){return function(row,index,items){var panel=props.panel,model=props.model,fields=props.fields;var changeHandler=(0,_series_change_handler2.default)(props,items);return _react2.default.createElement(_agg2.default,{key:row.id,disableDelete:items.length<2,fields:fields,model:row,onAdd:_collection_actions.handleAdd.bind(null,props,_new_metric_agg_fn2.default),onChange:changeHandler,onDelete:_collection_actions.handleDelete.bind(null,props,row),panel:panel,series:model,siblings:items,sortData:row.id})}}module.exports=exports["default"]},,,,function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}Object.defineProperty(exports,"__esModule",{value:true});__export(__webpack_require__(4967))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var dashboard_context_menu_panel_1=__webpack_require__(5001);exports.DashboardContextMenuPanel=dashboard_context_menu_panel_1.DashboardContextMenuPanel;var dashboard_panel_action_1=__webpack_require__(5002);exports.DashboardPanelAction=dashboard_panel_action_1.DashboardPanelAction;var dashboard_panel_actions_registry_1=__webpack_require__(1638);exports.DashboardPanelActionsRegistryProvider=dashboard_panel_actions_registry_1.DashboardPanelActionsRegistryProvider},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";__webpack_require__(2742)},function(module,exports,__webpack_require__){"use strict";__webpack_require__(2755)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AppStateProvider=AppStateProvider;var _modules=__webpack_require__(2);var _state=__webpack_require__(714);__webpack_require__(800);var _legacy_class=__webpack_require__(77);var _function=__webpack_require__(548);var urlParam="_a";function AppStateProvider(Private,$rootScope,$location,$injector){var State=Private(_state.StateProvider);var PersistedState=$injector.get("PersistedState");var persistedStates=void 0;var eventUnsubscribers=void 0;(0,_legacy_class.createLegacyClass)(AppState).inherits(State);function AppState(defaults){persistedStates={};eventUnsubscribers=[];AppState.Super.call(this,urlParam,defaults);AppState.getAppState._set(this)}AppState.prototype._persistAcrossApps=false;AppState.prototype.destroy=function(){AppState.Super.prototype.destroy.call(this);AppState.getAppState._set(null);(0,_function.callEach)(eventUnsubscribers)};AppState.prototype.makeStateful=function(prop){var _this=this;if(persistedStates[prop])return persistedStates[prop];var self=this;persistedStates[prop]=new PersistedState;var updateOnChange=function updateOnChange(){var replaceState=false;self[prop]=persistedStates[prop].getChanges();self.save(replaceState)};var handlerOnChange=function handlerOnChange(method){return persistedStates[prop][method]("change",updateOnChange)};handlerOnChange("on");eventUnsubscribers.push(function(){return handlerOnChange("off")});var persistOnChange=function persistOnChange(changes){if(!changes)return;-1!==changes.indexOf(prop)&&persistedStates[prop].set(self[prop])};var handlePersist=function handlePersist(method){return _this[method]("fetch_with_changes",persistOnChange)};handlePersist("on");eventUnsubscribers.push(function(){return handlePersist("off")});self[prop]&&persistedStates[prop].setSilent(self[prop]);return persistedStates[prop]};AppState.getAppState=function(){var currentAppState=void 0;function get(){return currentAppState}get.previouslyStored=function(){var search=$location.search();return!!search[urlParam]};get._set=function(current){currentAppState=current};return get}();return AppState}_modules.uiModules.get("kibana/global_state").factory("AppState",function(Private){return Private(AppStateProvider)}).service("getAppState",function(Private){return Private(AppStateProvider).getAppState})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _system_api=__webpack_require__(2891);Object.defineProperty(exports,"addSystemApiHeader",{enumerable:true,get:function get(){return _system_api.addSystemApiHeader}});Object.defineProperty(exports,"isSystemApiRequest",{enumerable:true,get:function get(){return _system_api.isSystemApiRequest}})},,function(module,exports,__webpack_require__){__webpack_require__(2965)},function(module,exports,__webpack_require__){__webpack_require__(2982);__webpack_require__(3047);__webpack_require__(3049)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _search_request_queue=__webpack_require__(2989);Object.defineProperty(exports,"searchRequestQueue",{enumerable:true,get:function get(){return _search_request_queue.searchRequestQueue}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RequestStatus={ABORTED:"aborted",DUPLICATE:"duplicate",INCOMPLETE:"incomplete"}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.documentationLinks=exports.ELASTIC_WEBSITE_URL=exports.DOC_LINK_VERSION=void 0;var _metadata=__webpack_require__(91);var DOC_LINK_VERSION=exports.DOC_LINK_VERSION=_metadata.metadata.branch;var ELASTIC_WEBSITE_URL=exports.ELASTIC_WEBSITE_URL="https://www.elastic.co/";var ELASTIC_DOCS=ELASTIC_WEBSITE_URL+"guide/en/elasticsearch/reference/"+DOC_LINK_VERSION+"/";exports.documentationLinks={filebeat:{base:ELASTIC_WEBSITE_URL+"guide/en/beats/filebeat/"+DOC_LINK_VERSION,installation:ELASTIC_WEBSITE_URL+"guide/en/beats/filebeat/"+DOC_LINK_VERSION+"/filebeat-installation.html",configuration:ELASTIC_WEBSITE_URL+"guide/en/beats/filebeat/"+DOC_LINK_VERSION+"/filebeat-configuration.html",elasticsearchOutput:ELASTIC_WEBSITE_URL+"guide/en/beats/filebeat/"+DOC_LINK_VERSION+"/elasticsearch-output.html",elasticsearchOutputAnchorParameters:ELASTIC_WEBSITE_URL+"guide/en/beats/filebeat/"+DOC_LINK_VERSION+"/elasticsearch-output.html#_parameters",startup:ELASTIC_WEBSITE_URL+"guide/en/beats/filebeat/"+DOC_LINK_VERSION+"/filebeat-starting.html",exportedFields:ELASTIC_WEBSITE_URL+"guide/en/beats/filebeat/"+DOC_LINK_VERSION+"/exported-fields.html"},metricbeat:{base:ELASTIC_WEBSITE_URL+"guide/en/beats/metricbeat/"+DOC_LINK_VERSION},logstash:{base:ELASTIC_WEBSITE_URL+"guide/en/logstash/"+DOC_LINK_VERSION},aggs:{date_histogram:ELASTIC_DOCS+"search-aggregations-bucket-datehistogram-aggregation.html",date_range:ELASTIC_DOCS+"search-aggregations-bucket-daterange-aggregation.html",filter:ELASTIC_DOCS+"search-aggregations-bucket-filter-aggregation.html",filters:ELASTIC_DOCS+"search-aggregations-bucket-filters-aggregation.html",geohash_grid:ELASTIC_DOCS+"search-aggregations-bucket-geohashgrid-aggregation.html",histogram:ELASTIC_DOCS+"search-aggregations-bucket-histogram-aggregation.html",ip_range:ELASTIC_DOCS+"search-aggregations-bucket-iprange-aggregation.html",range:ELASTIC_DOCS+"search-aggregations-bucket-range-aggregation.html",significant_terms:ELASTIC_DOCS+"search-aggregations-bucket-significantterms-aggregation.html",terms:ELASTIC_DOCS+"search-aggregations-bucket-terms-aggregation.html",avg:ELASTIC_DOCS+"search-aggregations-metrics-avg-aggregation.html",avg_bucket:ELASTIC_DOCS+"search-aggregations-pipeline-avg-bucket-aggregation.html",max_bucket:ELASTIC_DOCS+"search-aggregations-pipeline-max-bucket-aggregation.html",min_bucket:ELASTIC_DOCS+"search-aggregations-pipeline-min-bucket-aggregation.html",sum_bucket:ELASTIC_DOCS+"search-aggregations-pipeline-sum-bucket-aggregation.html",cardinality:ELASTIC_DOCS+"search-aggregations-metrics-cardinality-aggregation.html",count:ELASTIC_DOCS+"search-aggregations-metrics-valuecount-aggregation.html",cumulative_sum:ELASTIC_DOCS+"search-aggregations-metrics-sum-aggregation.html",derivative:ELASTIC_DOCS+"search-aggregations-pipeline-derivative-aggregation.html",geo_bounds:ELASTIC_DOCS+"search-aggregations-metrics-geobounds-aggregation.html",geo_centroid:ELASTIC_DOCS+"search-aggregations-metrics-geocentroid-aggregation.html",max:ELASTIC_DOCS+"search-aggregations-metrics-max-aggregation.html",median:ELASTIC_DOCS+"search-aggregations-metrics-percentile-aggregation.html",min:ELASTIC_DOCS+"search-aggregations-metrics-min-aggregation.html",moving_avg:ELASTIC_DOCS+"search-aggregations-pipeline-movavg-aggregation.html",percentile_ranks:ELASTIC_DOCS+"search-aggregations-metrics-percentile-rank-aggregation.html",serial_diff:ELASTIC_DOCS+"search-aggregations-pipeline-serialdiff-aggregation.html",std_dev:ELASTIC_DOCS+"search-aggregations-metrics-extendedstats-aggregation.html",sum:ELASTIC_DOCS+"search-aggregations-metrics-sum-aggregation.html",top_hits:ELASTIC_DOCS+"search-aggregations-metrics-top-hits-aggregation.html"},scriptedFields:{scriptFields:ELASTIC_DOCS+"search-request-script-fields.html",scriptAggs:ELASTIC_DOCS+"search-aggregations.html#_values_source",painless:ELASTIC_DOCS+"modules-scripting-painless.html",painlessApi:ELASTIC_DOCS+"modules-scripting-painless.html#painless-api",painlessSyntax:ELASTIC_DOCS+"modules-scripting-painless-syntax.html",luceneExpressions:ELASTIC_DOCS+"modules-scripting-expression.html"},indexPatterns:{loadingData:ELASTIC_WEBSITE_URL+"guide/en/kibana/"+DOC_LINK_VERSION+"/tutorial-load-dataset.html",introduction:ELASTIC_WEBSITE_URL+"guide/en/kibana/"+DOC_LINK_VERSION+"/index-patterns.html"},query:{luceneQuerySyntax:ELASTIC_DOCS+"query-dsl-query-string-query.html#query-string-syntax",queryDsl:ELASTIC_DOCS+"query-dsl.html",kueryQuerySyntax:ELASTIC_WEBSITE_URL+"guide/en/kibana/"+DOC_LINK_VERSION+"/kuery-query.html"},date:{dateMath:ELASTIC_DOCS+"common-options.html#date-math"}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _index_patterns=__webpack_require__(815);Object.defineProperty(exports,"IndexPatternsProvider",{enumerable:true,get:function get(){return _index_patterns.IndexPatternsProvider}});var _index_patterns_api_client_provider=__webpack_require__(1302);Object.defineProperty(exports,"IndexPatternsApiClientProvider",{enumerable:true,get:function get(){return _index_patterns_api_client_provider.IndexPatternsApiClientProvider}})},function(module,exports,__webpack_require__){"use strict";var _documentation_links=__webpack_require__(271);var _modules=__webpack_require__(2);var _module=_modules.uiModules.get("kibana");_module.directive("documentationHref",function(){return{restrict:"A",link:function link(scope,element,attributes){element.attr("href",(0,_documentation_links.getDocLink)(attributes.documentationHref))}}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var ui_1=__webpack_require__(3148);exports.InspectorView=ui_1.InspectorView;var inspector_1=__webpack_require__(3150);exports.Inspector=inspector_1.Inspector;var view_registry_1=__webpack_require__(1327);exports.viewRegistry=view_registry_1.viewRegistry},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(2);var _module=_modules.uiModules.get("kibana");_module.directive("uiSelectFocusOn",function($timeout){return{restrict:"A",require:"uiSelect",link:function link(scope,elem,attrs,uiSelect){scope.$on(attrs.uiSelectFocusOn,function(){$timeout(function(){return uiSelect.activate()})})}}})},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(2);var _sort_prefix_first=__webpack_require__(1336);_modules.uiModules.get("kibana").filter("sortPrefixFirst",function(){return _sort_prefix_first.sortPrefixFirst})},,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";__webpack_require__(3963);__webpack_require__(3965)},,,function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}Object.defineProperty(exports,"__esModule",{value:true});__webpack_require__(4144);var dispatchCustomEvent=function dispatchCustomEvent(el,eventName){el.dispatchEvent(new CustomEvent(eventName,{bubbles:true}))};function dispatchRenderComplete(el){dispatchCustomEvent(el,"renderComplete")}exports.dispatchRenderComplete=dispatchRenderComplete;function dispatchRenderStart(el){dispatchCustomEvent(el,"renderStart")}exports.dispatchRenderStart=dispatchRenderStart;__export(__webpack_require__(1484))},,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _uuid=__webpack_require__(78);var _uuid2=_interopRequireDefault(_uuid);var _terms=__webpack_require__(4584);var _filter=__webpack_require__(4586);var _filters=__webpack_require__(4587);var _filters2=_interopRequireDefault(_filters);var _everything=__webpack_require__(4589);var _everything2=_interopRequireDefault(_everything);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var Split=function(_Component){_inherits(Split,_Component);function Split(){_classCallCheck(this,Split);return _possibleConstructorReturn(this,(Split.__proto__||Object.getPrototypeOf(Split)).apply(this,arguments))}_createClass(Split,[{key:"componentWillReceiveProps",value:function componentWillReceiveProps(nextProps){var model=nextProps.model;"filters"!==model.split_mode||model.split_filters||this.props.onChange({split_filters:[{color:model.color,id:_uuid2.default.v1()}]})}},{key:"render",value:function render(){var _props=this.props,model=_props.model,panel=_props.panel;var indexPattern=model.override_index_pattern&&model.series_index_pattern||panel.index_pattern;if("filter"===model.split_mode)return _react2.default.createElement(_filter.SplitByFilter,{model:model,onChange:this.props.onChange});if("filters"===model.split_mode)return _react2.default.createElement(_filters2.default,{model:model,onChange:this.props.onChange});if("terms"===model.split_mode)return _react2.default.createElement(_terms.SplitByTerms,{model:model,indexPattern:indexPattern,fields:this.props.fields,onChange:this.props.onChange});return _react2.default.createElement(_everything2.default,{model:model,onChange:this.props.onChange})}}]);return Split}(_react.Component);Split.propTypes={fields:_propTypes2.default.object,model:_propTypes2.default.object,onChange:_propTypes2.default.func,panel:_propTypes2.default.object};exports.default=Split;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createUpDownHandler=createUpDownHandler;var _eui=__webpack_require__(3);function createUpDownHandler(callback){return function(ev){if(ev.keyCode===_eui.keyCodes.UP){ev.preventDefault();callback("up")}else if(ev.keyCode===_eui.keyCodes.DOWN){ev.preventDefault();callback("down")}}}},,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.truncatedColorMaps=void 0;var _colormaps=__webpack_require__(430);var truncatedColorMaps=exports.truncatedColorMaps={};var colormaps=_colormaps.vislibColorMaps;for(var key in colormaps)colormaps.hasOwnProperty(key)&&(truncatedColorMaps[key]=colormaps[key].slice(Math.floor(colormaps[key].length/4)))},,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _format_es_msg=__webpack_require__(1033);Object.defineProperty(exports,"formatESMsg",{enumerable:true,get:function get(){return _format_es_msg.formatESMsg}});Object.defineProperty(exports,"getPainlessError",{enumerable:true,get:function get(){return _format_es_msg.getPainlessError}});var _format_msg=__webpack_require__(1843);Object.defineProperty(exports,"formatMsg",{enumerable:true,get:function get(){return _format_msg.formatMsg}});var _format_stack=__webpack_require__(1844);Object.defineProperty(exports,"formatStack",{enumerable:true,get:function get(){return _format_stack.formatStack}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.callEach=callEach;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function callEach(arr){return _lodash2.default.map(arr,function(fn){return _lodash2.default.isFunction(fn)?fn():void 0})}},,,,function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(88)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SimpleEmitter=SimpleEmitter;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _base_object=__webpack_require__(2746);var _legacy_class=__webpack_require__(77);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(0,_legacy_class.createLegacyClass)(SimpleEmitter).inherits(_base_object.BaseObject);function SimpleEmitter(){this._listeners={}}SimpleEmitter.prototype.on=function(name,handler){var handlers=this._listeners[name];handlers||(handlers=this._listeners[name]=[]);handlers.push(handler);return this};SimpleEmitter.prototype.off=function(name,handler){if(!this._listeners[name])return this;handler?_lodash2.default.pull(this._listeners[name],handler):this._listeners[name]=null;return this};SimpleEmitter.prototype.removeAllListeners=function(){this._listeners={};return this};SimpleEmitter.prototype.emit=_lodash2.default.restParam(function(name,args){if(!this._listeners[name])return this;var listeners=this.listeners(name);var i=-1;while(++i<listeners.length)listeners[i].apply(this,args);return this});SimpleEmitter.prototype.activeEvents=function(){return _lodash2.default.reduce(this._listeners,function(active,listeners,name){return active.concat(_lodash2.default.size(listeners)?name:[])},[])};SimpleEmitter.prototype.listeners=function(name){return this._listeners[name]?this._listeners[name].slice(0):[]};SimpleEmitter.prototype.listenerCount=function(name){if(name)return _lodash2.default.size(this._listeners[name]);return _lodash2.default.reduce(this._listeners,function(count,handlers){return count+_lodash2.default.size(handlers)},0)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _markdown_simple=__webpack_require__(2772);Object.defineProperty(exports,"MarkdownSimple",{enumerable:true,get:function get(){return _markdown_simple.MarkdownSimple}})},,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _get_unhashable_states_provider=__webpack_require__(2868);Object.defineProperty(exports,"getUnhashableStatesProvider",{enumerable:true,get:function get(){return _get_unhashable_states_provider.getUnhashableStatesProvider}});var _hash_url=__webpack_require__(2869);Object.defineProperty(exports,"hashUrl",{enumerable:true,get:function get(){return _hash_url.hashUrl}});var _unhash_query_string=__webpack_require__(1253);Object.defineProperty(exports,"unhashQueryString",{enumerable:true,get:function get(){return _unhash_query_string.unhashQueryString}});var _unhash_url=__webpack_require__(2870);Object.defineProperty(exports,"unhashUrl",{enumerable:true,get:function get(){return _unhash_url.unhashUrl}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var kfetch_1=__webpack_require__(1259);exports.kfetch=kfetch_1.kfetch;var kfetch_abortable_1=__webpack_require__(2899);exports.kfetchAbortable=kfetch_abortable_1.kfetchAbortable},,,function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:true});exports.FieldFormat=FieldFormat;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _content_types=__webpack_require__(2966);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function FieldFormat(params){this.type=this.constructor;this._params=params||{};_lodash2.default.isFunction(this._convert)&&(this._convert={text:this._convert});(0,_content_types.contentTypesSetup)(this)}FieldFormat.from=function(converter){var FieldFormatFromConverter=function(_FieldFormat){_inherits(FieldFormatFromConverter,_FieldFormat);function FieldFormatFromConverter(){_classCallCheck(this,FieldFormatFromConverter);return _possibleConstructorReturn(this,(FieldFormatFromConverter.__proto__||Object.getPrototypeOf(FieldFormatFromConverter)).apply(this,arguments))}return FieldFormatFromConverter}(FieldFormat);FieldFormatFromConverter.prototype._convert=converter;return FieldFormatFromConverter};FieldFormat.prototype.convert=function(value,contentType){return this.getConverterFor(contentType)(value)};FieldFormat.prototype.getConverterFor=function(contentType){return this._convert[contentType||"text"]};FieldFormat.prototype.getParamDefaults=function(){return{}};FieldFormat.prototype.param=function(name){var val=this._params[name];if(val||false===val||0===val)return val;return this.getParamDefaults()[name]};FieldFormat.prototype.params=function(){return _lodash2.default.cloneDeep(_lodash2.default.defaults({},this._params,this.getParamDefaults()))};FieldFormat.prototype.toJSON=function(){var type=this.type;var defaults=this.getParamDefaults();var params=_lodash2.default.transform(this._params,function(uniqParams,val,param){val!==defaults[param]&&(uniqParams[param]=val)},{});_lodash2.default.size(params)||(params=void 0);return{id:type.id,params:params}}},function(module,exports,__webpack_require__){"use strict";var _typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"===typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};Object.defineProperty(exports,"__esModule",{value:true});exports.asPrettyString=asPrettyString;function asPrettyString(val){if(null===val||void 0===val)return" - ";switch("undefined"===typeof val?"undefined":_typeof(val)){case"string":return val;case"object":return JSON.stringify(val,null,"  ");default:return""+val}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.shortenDottedString=shortenDottedString;var DOT_PREFIX_RE=/(.).+?\./g;function shortenDottedString(input){return"string"!==typeof input?input:input.replace(DOT_PREFIX_RE,"$1.")}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildNode=buildNode;exports.toElasticsearchQuery=toElasticsearchQuery;function buildNode(value){return{type:"literal",value:value}}function toElasticsearchQuery(node){return node.value}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.migrateLegacyQuery=migrateLegacyQuery;var _lodash=__webpack_require__(1);function migrateLegacyQuery(query){if(!(0,_lodash.has)(query,"language"))return{query:query,language:"lucene"};return query}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SavedObjectLoader=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _scanner=__webpack_require__(3046);var _string_utils=__webpack_require__(1304);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.SavedObjectLoader=function(){function SavedObjectLoader(SavedObjectClass,kbnIndex,kbnUrl,$http,chrome,savedObjectClient){_classCallCheck(this,SavedObjectLoader);this.type=SavedObjectClass.type;this.Class=SavedObjectClass;this.lowercaseType=this.type.toLowerCase();this.kbnIndex=kbnIndex;this.kbnUrl=kbnUrl;this.chrome=chrome;this.scanner=new _scanner.Scanner($http,{index:kbnIndex,type:this.lowercaseType});this.loaderProperties={name:this.lowercaseType+"s",noun:_string_utils.StringUtils.upperFirst(this.type),nouns:this.lowercaseType+"s"};this.savedObjectsClient=savedObjectClient}_createClass(SavedObjectLoader,[{key:"get",value:function get(id){return new this.Class(id).init()}},{key:"urlFor",value:function urlFor(id){return this.kbnUrl.eval("#/"+this.lowercaseType+"/{{id}}",{id:id})}},{key:"delete",value:function _delete(ids){var _this=this;ids=Array.isArray(ids)?ids:[ids];var deletions=ids.map(function(id){var savedObject=new _this.Class(id);return savedObject.delete()});return Promise.all(deletions).then(function(){_this.chrome&&_this.chrome.untrackNavLinksForDeletedSavedObjects(ids)})}},{key:"mapHitSource",value:function mapHitSource(source,id){source.id=id;source.url=this.urlFor(id);return source}},{key:"scanAll",value:function scanAll(queryString){var pageSize=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return this.scanner.scanAndMap(queryString,{pageSize:pageSize,docCount:Infinity})}},{key:"mapSavedObjectApiHits",value:function mapSavedObjectApiHits(hit){return this.mapHitSource(hit.attributes,hit.id)}},{key:"findAll",value:function findAll(){var search=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";var _this2=this;var size=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;var fields=arguments[2];return this.savedObjectsClient.find({type:this.lowercaseType,search:search?search+"*":void 0,perPage:size,page:1,searchFields:["title^3","description"],fields:fields}).then(function(resp){return{total:resp.total,hits:resp.savedObjects.map(function(savedObject){return _this2.mapSavedObjectApiHits(savedObject)})}})}},{key:"find",value:function find(){var search=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";var size=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return this.findAll(search,size).then(function(resp){return{total:resp.total,hits:resp.hits.filter(function(savedObject){return!savedObject.error})}})}}]);return SavedObjectLoader}()},function(module,exports,__webpack_require__){"use strict";__webpack_require__(1305);var _vis_types=__webpack_require__(95);var _modules=__webpack_require__(2);var _saved_object_loader=__webpack_require__(601);var _saved_object_registry=__webpack_require__(413);var _saved_objects=__webpack_require__(57);var app=_modules.uiModules.get("app/visualize");_saved_object_registry.savedObjectManagementRegistry.register({service:"savedVisualizations",title:"visualizations"});app.service("savedVisualizations",function(Promise,kbnIndex,SavedVis,Private,kbnUrl,$http,chrome){var visTypes=Private(_vis_types.VisTypesRegistryProvider);var savedObjectClient=Private(_saved_objects.SavedObjectsClientProvider);var saveVisualizationLoader=new _saved_object_loader.SavedObjectLoader(SavedVis,kbnIndex,kbnUrl,$http,chrome,savedObjectClient);saveVisualizationLoader.mapHitSource=function(source,id){source.id=id;source.url=this.urlFor(id);var typeName=source.typeName;if(source.visState)try{typeName=JSON.parse(source.visState).type}catch(e){}if(!typeName||!visTypes.byName[typeName]){source.error="Unknown visualization type";return source}source.type=visTypes.byName[typeName];source.icon=source.type.icon;return source};saveVisualizationLoader.urlFor=function(id){return kbnUrl.eval("#/visualize/edit/{{id}}",{id:id})};return saveVisualizationLoader})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.keyMap={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capsLock",27:"escape",32:"space",33:"pageUp",34:"pageDown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",91:"leftWindowKey",92:"rightWindowKey",93:"selectKey",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"multiply",107:"add",109:"subtract",110:"period",111:"divide",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numLock",145:"scrollLock",186:"semiColon",187:"equalSign",188:"comma",189:"dash",190:"period",191:"forwardSlash",192:"graveAccent",219:"openBracket",220:"backSlash",221:"closeBracket",222:"singleQuote",224:"meta"}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.parentPipelineAggHelper=void 0;var _sub_agg=__webpack_require__(3083);var _sub_agg2=_interopRequireDefault(_sub_agg);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _agg_config=__webpack_require__(296);var _schemas=__webpack_require__(96);var _parent_pipeline_agg_controller=__webpack_require__(3086);var _parent_pipeline_agg_writer=__webpack_require__(3087);var _nested_agg_helpers=__webpack_require__(1315);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var metricAggFilter=["!top_hits","!percentiles","!percentile_ranks","!median","!std_dev"];var metricAggSchema=new _schemas.Schemas([{group:"none",name:"metricAgg",title:"Metric Agg",hideCustomLabel:true,aggFilter:metricAggFilter}]).all[0];var parentPipelineAggHelper={subtype:"Parent Pipeline Aggregations",params:function params(){return[{name:"customMetric",type:_agg_config.AggConfig,default:null,serialize:function serialize(customMetric){return customMetric.toJSON()},deserialize:function deserialize(state,agg){return this.makeAgg(agg,state)},makeAgg:function makeAgg(termsAgg,state){state=state||{type:"count"};state.schema=metricAggSchema;var metricAgg=new _agg_config.AggConfig(termsAgg.vis,state);metricAgg.id=termsAgg.id+"-metric";return metricAgg},modifyAggConfigOnSearchRequestStart:(0,_nested_agg_helpers.forwardModifyAggConfigOnSearchRequestStart)("customMetric"),write:_lodash2.default.noop},{name:"buckets_path",write:_lodash2.default.noop},{name:"metricAgg",editor:_sub_agg2.default,default:"custom",controller:_parent_pipeline_agg_controller.parentPipelineAggController,write:_parent_pipeline_agg_writer.parentPipelineAggWriter}]},getFormat:function getFormat(agg){var subAgg=void 0;subAgg=agg.params.customMetric?agg.params.customMetric:agg._aggs.byId[agg.params.metricAgg];return subAgg.type.getFormat(subAgg)}};exports.parentPipelineAggHelper=parentPipelineAggHelper},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildPhrasesFilter=buildPhrasesFilter;var _phrase=__webpack_require__(363);function _defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true}):obj[key]=value;return obj}function buildPhrasesFilter(field,params,indexPattern){var index=indexPattern.id;var type="phrases";var key=field.name;var value=params.map(function(value){return field.format.convert(value)}).join(", ");var filter={meta:{index:index,type:type,key:key,value:value,params:params}};var should=void 0;should=field.scripted?params.map(function(value){return{script:(0,_phrase.getPhraseScript)(field,value)}}):params.map(function(value){return{match_phrase:_defineProperty({},field.name,value)}});filter.query={bool:{should:should,minimum_should_match:1}};return filter}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.siblingPipelineAggHelper=void 0;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _agg_config=__webpack_require__(296);var _schemas=__webpack_require__(96);var _sibling_pipeline_agg_controller=__webpack_require__(3125);var _sibling_pipeline_agg_writer=__webpack_require__(3126);var _sub_metric=__webpack_require__(3127);var _sub_metric2=_interopRequireDefault(_sub_metric);var _nested_agg_helpers=__webpack_require__(1315);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var metricAggFilter=["!top_hits","!percentiles","!percentile_ranks","!median","!std_dev","!sum_bucket","!avg_bucket","!min_bucket","!max_bucket","!derivative","!moving_avg","!serial_diff","!cumulative_sum"];var metricAggSchema=new _schemas.Schemas([{group:"none",name:"metricAgg",title:"Metric Agg",aggFilter:metricAggFilter}]).all[0];var bucketAggFilter=[];var bucketAggSchema=new _schemas.Schemas([{group:"none",title:"Bucket Agg",name:"bucketAgg",aggFilter:bucketAggFilter}]).all[0];var siblingPipelineAggHelper={subtype:"Sibling Pipeline Aggregations",params:function params(){return[{name:"customBucket",type:_agg_config.AggConfig,default:null,serialize:function serialize(customMetric){return customMetric.toJSON()},deserialize:function deserialize(state,agg){return this.makeAgg(agg,state)},makeAgg:function makeAgg(agg,state){state=state||{type:"date_histogram"};state.schema=bucketAggSchema;var orderAgg=new _agg_config.AggConfig(agg.vis,state);orderAgg.id=agg.id+"-bucket";return orderAgg},editor:_sub_metric2.default,controller:(0,_sibling_pipeline_agg_controller.siblingPipelineAggController)("customBucket"),modifyAggConfigOnSearchRequestStart:(0,_nested_agg_helpers.forwardModifyAggConfigOnSearchRequestStart)("customBucket"),write:_lodash2.default.noop},{name:"customMetric",type:_agg_config.AggConfig,default:null,serialize:function serialize(customMetric){return customMetric.toJSON()},deserialize:function deserialize(state,agg){return this.makeAgg(agg,state)},makeAgg:function makeAgg(agg,state){state=state||{type:"count"};state.schema=metricAggSchema;var orderAgg=new _agg_config.AggConfig(agg.vis,state);orderAgg.id=agg.id+"-metric";return orderAgg},editor:_sub_metric2.default,controller:(0,_sibling_pipeline_agg_controller.siblingPipelineAggController)("customMetric"),modifyAggConfigOnSearchRequestStart:(0,_nested_agg_helpers.forwardModifyAggConfigOnSearchRequestStart)("customMetric"),write:_sibling_pipeline_agg_writer.siblingPipelineAggWriter}]},getFormat:function getFormat(agg){return agg.params.customMetric.type.getFormat(agg.params.customMetric)}};exports.siblingPipelineAggHelper=siblingPipelineAggHelper},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.compareFilters=compareFilters;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var excludedAttributes=void 0;var comparators=void 0;function compareFilters(first,second,comparatorOptions){excludedAttributes=["$$hashKey","meta"];comparators=_lodash2.default.defaults(comparatorOptions||{},{state:false,negate:false,disabled:false});comparators.state||excludedAttributes.push("$state");return _lodash2.default.isEqual(mapFilter(first),mapFilter(second))}function mapFilter(filter){var cleaned=_lodash2.default.omit(filter,excludedAttributes);comparators.negate&&(cleaned.negate=filter.meta&&!!filter.meta.negate);comparators.disabled&&(cleaned.disabled=filter.meta&&!!filter.meta.disabled);return cleaned}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterBarClickHandlerProvider=FilterBarClickHandlerProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _dedup_filters=__webpack_require__(1326);var _uniq_filters=__webpack_require__(1325);var _find_by_param=__webpack_require__(3146);var _notify=__webpack_require__(9);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function FilterBarClickHandlerProvider(){return function($state){return function(event,simulate){if(!$state)return;var aggConfigResult=void 0;aggConfigResult=event.point.orig?event.point.orig.aggConfigResult:event.point.values?(0,_find_by_param.findByParam)(event.point.values,"aggConfigResult"):event.point.aggConfigResult;if(aggConfigResult){var isLegendLabel=!!event.point.values;var aggBuckets=_lodash2.default.filter(aggConfigResult.getPath(),{type:"bucket"});if(isLegendLabel){var aggConfig=(0,_find_by_param.findByParam)(event.point.values,"aggConfig");aggBuckets=aggBuckets.filter(function(result){return result.aggConfig&&result.aggConfig===aggConfig})}var filters=(0,_lodash2.default)(aggBuckets).map(function(result){try{return result.createFilter()}catch(e){simulate||_notify.toastNotifications.addSuccess(e.message)}}).flatten().filter(Boolean).value();if(!filters.length)return;event.negate&&_lodash2.default.each(filters,function(filter){filter.meta=filter.meta||{};filter.meta.negate=true});filters=(0,_dedup_filters.dedupFilters)($state.filters,(0,_uniq_filters.uniqFilters)(filters),{negate:true});simulate||($state.$newFilters=filters);return filters}}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var data_1=__webpack_require__(3154);exports.DataAdapter=data_1.DataAdapter;exports.FormattedData=data_1.FormattedData;var request_1=__webpack_require__(3157);exports.RequestAdapter=request_1.RequestAdapter;exports.RequestStatus=request_1.RequestStatus},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NavBarExtensionsRegistryProvider=void 0;var _registry=__webpack_require__(107);exports.NavBarExtensionsRegistryProvider=(0,_registry.uiRegistry)({name:"navbarExtensions",index:["name"],group:["appName"],order:["order"]})},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(2);var _module=_modules.uiModules.get("kibana");_module.directive("kbnScrollBottom",function(){return{restrict:"A",link:function link($scope,$element,attr){var checkTimer=void 0;function onScroll(){var position=$element.scrollTop()+$element.outerHeight();var height=$element[0].scrollHeight;var remaining=height-position;var margin=50;if(!height||!position)return;remaining<=margin&&$scope.$evalAsync(attr.kbnScrollBottom)}function scheduleCheck(){if(checkTimer)return;checkTimer=setTimeout(function(){checkTimer=null;onScroll()},50)}$element.on("scroll",scheduleCheck);$scope.$on("$destroy",function(){clearTimeout(checkTimer);$element.off("scroll",scheduleCheck)});scheduleCheck()}}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _filter_manager=__webpack_require__(3255);Object.defineProperty(exports,"FilterManagerProvider",{enumerable:true,get:function get(){return _filter_manager.FilterManagerProvider}})},,function(module,exports,__webpack_require__){"use strict";var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _shorten_dotted_string=__webpack_require__(598);var _modules=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana").filter("shortDots",function(Private){return Private(shortDotsFilterProvider)});function shortDotsFilterProvider(config){var filter=void 0;config.watch("shortDots:enable",updateFilter);return wrapper;function updateFilter(enabled){filter=enabled?_shorten_dotted_string.shortenDottedString:_lodash2.default.identity}function wrapper(str){return filter(str)}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BaseVisType=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _vis_category=__webpack_require__(71);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.BaseVisType=function(){function BaseVisType(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,BaseVisType);if(!opts.name)throw"vis_type must define its name";if(!opts.title)throw"vis_type must define its title";if(!opts.description)throw"vis_type must define its description";if(!opts.icon&&!opts.image)throw"vis_type must define its icon or image";if(!opts.visualization)throw"vis_type must define visualization controller";var _defaults={category:_vis_category.CATEGORY.OTHER,visualization:null,visConfig:{defaults:{}},requestHandler:"courier",responseHandler:"tabify",editor:"default",editorConfig:{collections:{}},options:{showTimePicker:true,showQueryBar:true,showFilterBar:true,showIndexSelection:true,hierarchicalData:false},stage:"production",feedbackMessage:""};_lodash2.default.defaultsDeep(this,opts,_defaults);this.requiresSearch="none"!==this.requestHandler}_createClass(BaseVisType,[{key:"shouldMarkAsExperimentalInUI",value:function shouldMarkAsExperimentalInUI(){return"experimental"===this.stage||"lab"===this.stage}},{key:"schemas",get:function get(){if(this.editorConfig&&this.editorConfig.schemas)return this.editorConfig.schemas;return[]}}]);return BaseVisType}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _vislib=__webpack_require__(4103);exports.default=_vislib.VislibProvider;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();exports.VislibVisualizationsPointSeriesProvider=VislibVisualizationsPointSeriesProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function VislibVisualizationsPointSeriesProvider(){var PointSeries=function(){function PointSeries(handler,seriesEl,seriesData,seriesConfig){_classCallCheck(this,PointSeries);this.handler=handler;this.baseChart=handler.pointSeries;this.chartEl=seriesEl;this.chartData=seriesData;this.seriesConfig=seriesConfig}_createClass(PointSeries,[{key:"getGroupedCount",value:function getGroupedCount(){var _this=this;var stacks=[];return this.baseChart.chartConfig.series.reduce(function(sum,series){var valueAxis=series.valueAxis||_this.baseChart.handler.valueAxes[0].id;var isStacked="stacked"===series.mode;var isHistogram="histogram"===series.type;if(!isHistogram)return sum;if(isStacked&&stacks.includes(valueAxis))return sum;isStacked&&stacks.push(valueAxis);return sum+1},0)}},{key:"getGroupedNum",value:function getGroupedNum(data){var i=0;var stacks=[];var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=void 0;try{for(var _step,_iterator=this.baseChart.chartConfig.series[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var seri=_step.value;var valueAxis=seri.valueAxis||this.baseChart.handler.valueAxes[0].id;var isStacked="stacked"===seri.mode;if(isStacked){valueAxis in stacks||(stacks[valueAxis]=i++);if(seri.data===data)return stacks[valueAxis]}else{if(seri.data===data)return i;i++}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return 0}},{key:"getValueAxis",value:function getValueAxis(){var _this2=this;return _lodash2.default.find(this.handler.valueAxes,function(axis){return axis.axisConfig.get("id")===_this2.seriesConfig.valueAxis})||this.handler.valueAxes[0]}},{key:"getCategoryAxis",value:function getCategoryAxis(){var _this3=this;return _lodash2.default.find(this.handler.categoryAxes,function(axis){return axis.axisConfig.get("id")===_this3.seriesConfig.categoryAxis})||this.handler.categoryAxes[0]}},{key:"addCircleEvents",value:function addCircleEvents(element){var events=this.events;if(this.handler.visConfig.get("enableHover")){var hover=events.addHoverEvent();var mouseout=events.addMouseoutEvent();element.call(hover).call(mouseout)}var click=events.addClickEvent();return element.call(click)}}]);return PointSeries}();return PointSeries}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DefaultEditorSize={SMALL:"small",MEDIUM:"medium",LARGE:"large"}},,,,,,,,,function(module,exports){module.exports='<div>\n  \x3c!-- Global settings --\x3e\n  <div class="kuiSideBarSection">\n    <div class="kuiSideBarSectionTitle">\n      <div class="kuiSideBarSectionTitle__text">\n        Settings\n      </div>\n    </div>\n\n    <div class="kuiSideBarFormRow">\n      <label class="kuiSideBarFormRow__label" for="legendPosition">\n        Legend Position\n      </label>\n      <div class="kuiSideBarFormRow__control">\n        <select\n          id="legendPosition"\n          class="kuiSelect kuiSideBarSelect"\n          ng-model="editorState.params.legendPosition"\n          ng-options="position for position in [\'top\', \'left\', \'right\', \'bottom\']"\n        ></select>\n      </div>\n    </div>\n\n    <div class="kuiSideBarFormRow">\n      <label class="kuiSideBarFormRow__label" for="showCursor">\n        Show Tooltip\n      </label>\n      <div class="kuiSideBarFormRow__control">\n        <input class="kuiCheckBox" id="showCursor" type="checkbox" ng-model="editorState.params.addTooltip">\n      </div>\n    </div>\n\n    <div class="kuiSideBarFormRow" ng-show="vis.hasSchemaAgg(\'segment\', \'date_histogram\')">\n      <label class="kuiSideBarFormRow__label" for="currentTimeMarker">\n        Current Time Marker\n      </label>\n      <div class="kuiSideBarFormRow__control">\n        <input class="kuiCheckBox" id="currentTimeMarker" type="checkbox"\n               ng-model="editorState.params.addTimeMarker"\n               ng-checked="editorState.params.addTimeMarker"\n        >\n      </div>\n    </div>\n\n    <div class="kuiSideBarFormRow" ng-show="!vis.hasSchemaAgg(\'segment\', \'date_histogram\')">\n      <label class="kuiSideBarFormRow__label" for="orderBuckets">\n        Order Buckets by Sum\n      </label>\n      <div class="kuiSideBarFormRow__control">\n        <input class="kuiCheckBox" id="orderBuckets" type="checkbox" ng-model="editorState.params.orderBucketsBySum">\n      </div>\n    </div>\n\n    <vislib-grid></vislib-grid>\n  </div>\n\n</div>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VisResponseHandlersRegistryProvider=void 0;var _registry=__webpack_require__(107);exports.VisResponseHandlersRegistryProvider=(0,_registry.uiRegistry)({name:"visResponseHandlers",index:["name"],order:["title"]})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=replaceVars;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _handlebars=__webpack_require__(1533);var _handlebars2=_interopRequireDefault(_handlebars);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function replaceVars(str){var args=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var vars=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{var template=_handlebars2.default.compile(str,{strict:true});var string=template(_lodash2.default.assign({},vars,{args:args}));return string}catch(e){if(-1!==e.toString().indexOf("Parse error"))return str;if(-1!==e.message.indexOf("not defined in")){var badVar=e.message.split(/"/)[1];e.error={caused_by:{reason:"{{"+badVar+"}} is an unknown variable",title:"Error processing your markdown"}}}else e.error={caused_by:{reason:"Please verify you are only using markdown, known variables, and built-in Handlebars expressions",title:"Error processing your markdown"}};return e}}module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function GroupBySelect(props){var modeOptions=[{label:"Everything",value:"everything"},{label:"Filter",value:"filter"},{label:"Filters",value:"filters"},{label:"Terms",value:"terms"}];var selectedValue=props.value||"everything";var selectedOption=modeOptions.find(function(option){return selectedValue===option.value});return _react2.default.createElement(_eui.EuiComboBox,{isClearable:false,options:modeOptions,selectedOptions:[selectedOption],onChange:props.onChange,singleSelection:true})}GroupBySelect.propTypes={onChange:_propTypes2.default.func,value:_propTypes2.default.string};exports.default=GroupBySelect;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SeriesConfig=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _data_format_picker=__webpack_require__(910);var _data_format_picker2=_interopRequireDefault(_data_format_picker);var _create_select_handler=__webpack_require__(45);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _create_text_handler=__webpack_require__(46);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _yes_no=__webpack_require__(259);var _yes_no2=_interopRequireDefault(_yes_no);var _index_pattern=__webpack_require__(326);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SeriesConfig=exports.SeriesConfig=function SeriesConfig(props){var defaults={offset_time:"",value_template:""};var model=_extends({},defaults,props.model);var handleSelectChange=(0,_create_select_handler2.default)(props.onChange);var handleTextChange=(0,_create_text_handler2.default)(props.onChange);var htmlId=(0,_eui.htmlIdGenerator)();return _react2.default.createElement("div",null,_react2.default.createElement("div",{className:"vis_editor__series_config-container"},_react2.default.createElement("div",{className:"vis_editor__series_config-row"},_react2.default.createElement(_data_format_picker2.default,{onChange:handleSelectChange("formatter"),value:model.formatter}),_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("template")},"Template (eg.",_react2.default.createElement("code",null,"{{value}}/s"),")"),_react2.default.createElement("input",{style:{width:100},id:htmlId("template"),className:"vis_editor__input-grows",onChange:handleTextChange("value_template"),value:model.value_template}),_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("offsetSeries")},"Offset series time by (1m, 1h, 1w, 1d)"),_react2.default.createElement("input",{"data-test-subj":"offsetTimeSeries",style:{width:100},id:htmlId("offsetSeries"),className:"vis_editor__input-grows",type:"text",onChange:handleTextChange("offset_time"),value:model.offset_time})),_react2.default.createElement("div",{className:"vis_editor__series_config-row"},_react2.default.createElement("div",{className:"vis_editor__label"},"Override Index Pattern"),_react2.default.createElement(_yes_no2.default,{value:model.override_index_pattern,name:"override_index_pattern",onChange:props.onChange}),_react2.default.createElement(_index_pattern.IndexPattern,{onChange:props.onChange,model:props.model,fields:props.fields,prefix:"series_",className:"vis_editor__row_item vis_editor__row",disabled:!model.override_index_pattern})),_react2.default.createElement("div",{className:"vis_editor__series_config-row"},_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("series_filter")},"Filter"),_react2.default.createElement("input",{id:htmlId("series_filter"),className:"vis_editor__input-grows",type:"text",onChange:handleTextChange("filter"),value:model.filter}))))};SeriesConfig.propTypes={fields:_propTypes2.default.object,model:_propTypes2.default.object,onChange:_propTypes2.default.func}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _add_delete_buttons=__webpack_require__(147);var _add_delete_buttons2=_interopRequireDefault(_add_delete_buttons);var _collection_actions=__webpack_require__(328);var collectionActions=_interopRequireWildcard(_collection_actions);var _color_picker=__webpack_require__(258);var _color_picker2=_interopRequireDefault(_color_picker);var _eui=__webpack_require__(3);function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);newObj.default=obj;return newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var ColorRules=function(_Component){_inherits(ColorRules,_Component);function ColorRules(props){_classCallCheck(this,ColorRules);var _this=_possibleConstructorReturn(this,(ColorRules.__proto__||Object.getPrototypeOf(ColorRules)).call(this,props));_this.renderRow=_this.renderRow.bind(_this);return _this}_createClass(ColorRules,[{key:"handleChange",value:function handleChange(item,name){var _this2=this;var cast=arguments.length>2&&void 0!==arguments[2]?arguments[2]:String;return function(e){var handleChange=collectionActions.handleChange.bind(null,_this2.props);var part={};part[name]=cast(_lodash2.default.get(e,"[0].value",_lodash2.default.get(e,"target.value")));"undefined"===part[name]&&(part[name]=void 0);NaN===part[name]&&(part[name]=void 0);handleChange(_lodash2.default.assign({},item,part))}}},{key:"renderRow",value:function renderRow(row,i,items){var _this3=this;var defaults={value:0};var model=_extends({},defaults,row);var handleAdd=collectionActions.handleAdd.bind(null,this.props);var handleDelete=collectionActions.handleDelete.bind(null,this.props,model);var operatorOptions=[{label:"> greater than",value:"gt"},{label:">= greater than or equal",value:"gte"},{label:"< less than",value:"lt"},{label:"<= less than or equal",value:"lte"}];var handleColorChange=function handleColorChange(part){var handleChange=collectionActions.handleChange.bind(null,_this3.props);handleChange(_lodash2.default.assign({},model,part))};var htmlId=(0,_eui.htmlIdGenerator)(model.id);var selectedOperatorOption=operatorOptions.find(function(option){return model.operator===option.value});var secondary=void 0;this.props.hideSecondary||(secondary=_react2.default.createElement("div",{className:"color_rules__secondary"},_react2.default.createElement("div",{className:"color_rules__label"},"and ",this.props.secondaryName," to"),_react2.default.createElement(_color_picker2.default,{onChange:handleColorChange,name:this.props.secondaryVarName,value:model[this.props.secondaryVarName]})));return _react2.default.createElement("div",{key:model.id,className:"color_rules__rule"},_react2.default.createElement("div",{className:"color_rules__label"},"Set ",this.props.primaryName," to"),_react2.default.createElement(_color_picker2.default,{onChange:handleColorChange,name:this.props.primaryVarName,value:model[this.props.primaryVarName]}),secondary,_react2.default.createElement("label",{className:"color_rules__label",htmlFor:htmlId("ifMetricIs")},"if metric is"),_react2.default.createElement("div",{className:"color_rules__item"},_react2.default.createElement(_eui.EuiComboBox,{id:htmlId("ifMetricIs"),options:operatorOptions,selectedOptions:selectedOperatorOption?[selectedOperatorOption]:[],onChange:this.handleChange(model,"operator"),singleSelection:true})),_react2.default.createElement("input",{"aria-label":"Value",className:"color_rules__input",type:"number",value:model.value,onChange:this.handleChange(model,"value",Number)}),_react2.default.createElement("div",{className:"color_rules__control"},_react2.default.createElement(_add_delete_buttons2.default,{onAdd:handleAdd,onDelete:handleDelete,disableDelete:items.length<2})))}},{key:"render",value:function render(){var _props=this.props,model=_props.model,name=_props.name;if(!model[name])return _react2.default.createElement("div",null);var rows=model[name].map(this.renderRow);return _react2.default.createElement("div",{className:"color_rules"},rows)}}]);return ColorRules}(_react.Component);ColorRules.defaultProps={name:"color_rules",primaryName:"background",primaryVarName:"background_color",secondaryName:"text",secondaryVarName:"color",hideSecondary:false};ColorRules.propTypes={name:_propTypes2.default.string,model:_propTypes2.default.object,onChange:_propTypes2.default.func,primaryName:_propTypes2.default.string,primaryVarName:_propTypes2.default.string,secondaryName:_propTypes2.default.string,secondaryVarName:_propTypes2.default.string,hideSecondary:_propTypes2.default.bool};exports.default=ColorRules;module.exports=exports["default"]},,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AggResponseIndexProvider=AggResponseIndexProvider;var _build_hierarchical_data=__webpack_require__(4789);var _point_series=__webpack_require__(1472);var _tabify=__webpack_require__(925);function AggResponseIndexProvider(Private){return{hierarchical:Private(_build_hierarchical_data.BuildHierarchicalDataProvider),pointSeries:Private(_point_series.AggResponsePointSeriesProvider),tabify:_tabify.tabifyAggResponse}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _registry_1=__webpack_require__(107);exports.EmbeddableFactoriesRegistryProvider=_registry_1.uiRegistry({index:["name"],name:"embeddableFactories"})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.stateMonitorFactory=void 0;var _lodash=__webpack_require__(1);exports.stateMonitorFactory={create:function create(state,customInitialState){return stateMonitor(state,customInitialState)}};function stateMonitor(state,customInitialState){var destroyed=false;var ignoredProps=[];var changeHandlers=[];var initialState=void 0;_setInitialState(customInitialState);function _setInitialState(customInitialState){initialState=(0,_lodash.cloneDeep)(customInitialState)||(0,_lodash.cloneDeep)(state.toJSON())}function removeIgnoredProps(state){ignoredProps.forEach(function(path){(0,_lodash.set)(state,path,true)});return state}function getStatus(){var currentState=removeIgnoredProps((0,_lodash.cloneDeep)(state.toJSON()));var isClean=(0,_lodash.isEqual)(currentState,initialState);return{clean:isClean,dirty:!isClean}}function dispatchChange(){var type=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;var keys=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];var status=getStatus();changeHandlers.forEach(function(changeHandler){changeHandler(status,type,keys)})}function dispatchFetch(keys){dispatchChange("fetch_with_changes",keys)}function dispatchSave(keys){dispatchChange("save_with_changes",keys)}function dispatchReset(keys){dispatchChange("reset_with_changes",keys)}return{setInitialState:function setInitialState(customInitialState){if(!(0,_lodash.isPlainObject)(customInitialState))throw new TypeError("The default state must be an object");var previousStatus=getStatus();_setInitialState(customInitialState);removeIgnoredProps(initialState);(0,_lodash.isEqual)(previousStatus,getStatus())||dispatchChange()},ignoreProps:function ignoreProps(props){ignoredProps=ignoredProps.concat(props);removeIgnoredProps(initialState);return this},onChange:function onChange(callback){if(destroyed)throw new Error("Monitor has been destroyed");if("function"!==typeof callback)throw new Error("onChange handler must be a function");changeHandlers.push(callback);state.on("fetch_with_changes",dispatchFetch);state.on("save_with_changes",dispatchSave);state.on("reset_with_changes",dispatchReset);var status=getStatus();status.dirty&&dispatchChange();return this},destroy:function destroy(){destroyed=true;changeHandlers=void 0;state.off("fetch_with_changes",dispatchFetch);state.off("save_with_changes",dispatchSave);state.off("reset_with_changes",dispatchReset)}}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:true});var BinderBase=function(){function BinderBase(){_classCallCheck(this,BinderBase);this.disposal=[]}_createClass(BinderBase,[{key:"on",value:function on(emitter){for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];var on=emitter.on||emitter.addListener;var off=emitter.off||emitter.removeListener;on.apply(emitter,args);this.disposal.push(function(){return off.apply(emitter,args)})}},{key:"destroy",value:function destroy(){var destroyers=this.disposal;this.disposal=[];destroyers.forEach(function(fn){return fn()})}}]);return BinderBase}();exports.BinderBase=BinderBase},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.pkg=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _path=__webpack_require__(543);exports.pkg=_extends({__filename:711,__dirname:(0,_path.dirname)(711)},__webpack_require__(711))},function(module,exports){module.exports={name:"kibana",description:"Kibana is an open source (Apache Licensed), browser based analytics and search dashboard for Elasticsearch. Kibana is a snap to setup and start using. Kibana strives to be easy to get started with, while also being flexible and powerful, just like Elasticsearch.",keywords:["kibana","elasticsearch","logstash","analytics","visualizations","dashboards","dashboarding"],version:"6.4.1",branch:"6.4",build:{number:17999,sha:"2872c74872c54d91e3e00b67c7bbc61659df0ba7",distributable:true},repository:{type:"git",url:"https://github.com/elastic/kibana.git"},engines:{node:"8.11.4"}}},,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StateProvider=StateProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _angular=__webpack_require__(16);var _angular2=_interopRequireDefault(_angular);var _risonNode=__webpack_require__(310);var _risonNode2=_interopRequireDefault(_risonNode);var _diff_object=__webpack_require__(1841);var _events=__webpack_require__(398);var _notify=__webpack_require__(9);__webpack_require__(2747);var _legacy_class=__webpack_require__(77);var _function=__webpack_require__(548);var _state_storage=__webpack_require__(2748);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function StateProvider(Private,$rootScope,$location,stateManagementConfig,config,kbnUrl){var Events=Private(_events.EventsProvider);(0,_legacy_class.createLegacyClass)(State).inherits(Events);function State(urlParam,defaults){var _this=this;var hashedItemStore=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_state_storage.HashedItemStoreSingleton;State.Super.call(this);this.setDefaults(defaults);this._urlParam=urlParam||"_s";this._hashedItemStore=hashedItemStore;this._cleanUpListeners=_lodash2.default.partial(_function.callEach,[$rootScope.$on("$routeUpdate",function(){_this.fetch()}),$rootScope.$on("$routeChangeStart",function(){_this._persistAcrossApps||_this.destroy()}),$rootScope.$on("$routeChangeSuccess",function(){_this._persistAcrossApps&&_this.fetch()})]);this.fetch()}State.prototype._readFromURL=function(){var search=$location.search();var urlVal=search[this._urlParam];if(!urlVal)return null;if((0,_state_storage.isStateHash)(urlVal))return this._parseStateHash(urlVal);var risonEncoded=void 0;var unableToParse=void 0;try{risonEncoded=_risonNode2.default.decode(urlVal)}catch(e){unableToParse=true}if(unableToParse){_notify.toastNotifications.addDanger("Unable to parse URL");search[this._urlParam]=this.toQueryParam(this._defaults);$location.search(search).replace()}if(!risonEncoded)return null;if(this.isHashingEnabled()){search[this._urlParam]=this.toQueryParam(risonEncoded);$location.search(search).replace()}return risonEncoded};State.prototype.fetch=function(){if(!stateManagementConfig.enabled)return;var stash=this._readFromURL();if(null===stash){if(this._persistAcrossApps)return this.save();stash={}}_lodash2.default.defaults(stash,this._defaults);var diffResults=(0,_diff_object.applyDiff)(this,stash);diffResults.keys.length&&this.emit("fetch_with_changes",diffResults.keys)};State.prototype.save=function(replace){if(!stateManagementConfig.enabled)return;var stash=this._readFromURL();var state=this.toObject();replace=replace||false;if(!stash){replace=true;stash={}}var diffResults=(0,_diff_object.applyDiff)(stash,_lodash2.default.defaults({},state,this._defaults));diffResults.keys.length&&this.emit("save_with_changes",diffResults.keys);var search=$location.search();search[this._urlParam]=this.toQueryParam(state);replace?$location.search(search).replace():$location.search(search)};State.prototype.replace=function(){if(!stateManagementConfig.enabled)return;this.save(true)};State.prototype.reset=function(){if(!stateManagementConfig.enabled)return;kbnUrl.removeParam(this.getQueryParamName());var diffResults=(0,_diff_object.applyDiff)(this,this._defaults);diffResults.keys.length&&this.emit("reset_with_changes",diffResults.keys);this.save()};State.prototype.destroy=function(){this.off();this._cleanUpListeners()};State.prototype.setDefaults=function(defaults){this._defaults=defaults||{}};State.prototype._parseStateHash=function(stateHash){var json=this._hashedItemStore.getItem(stateHash);null===json&&_notify.toastNotifications.addDanger("Unable to completely restore the URL, be sure to use the share functionality.");return JSON.parse(json)};State.prototype.translateHashToRison=function(stateHashOrRison){if((0,_state_storage.isStateHash)(stateHashOrRison))return _risonNode2.default.encode(this._parseStateHash(stateHashOrRison));return stateHashOrRison};State.prototype.isHashingEnabled=function(){return!!config.get("state:storeInSessionStorage")};State.prototype.toQueryParam=function(){var _this2=this;var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.toObject();if(!this.isHashingEnabled())return _risonNode2.default.encode(state);var json=_angular2.default.toJson(state);var hash=(0,_state_storage.createStateHash)(json,function(hash){return _this2._hashedItemStore.getItem(hash)});var isItemSet=this._hashedItemStore.setItem(hash,json);if(isItemSet)return hash;(0,_notify.fatalError)(new Error("Kibana is unable to store history items in your session because it is full and there don't seem to be items any items safe to delete.\n\nThis can usually be fixed by moving to a fresh tab, but could be caused by a larger issue. If you are seeing this message regularly, please file an issue at https://github.com/elastic/kibana/issues."))};State.prototype.getQueryParamName=function(){return this._urlParam};return State}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fatalErrorInternals=exports.addFatalErrorCallback=void 0;exports.fatalError=fatalError;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _jquery=__webpack_require__(13);var _jquery2=_interopRequireDefault(_jquery);var _metadata=__webpack_require__(91);var _lib=__webpack_require__(547);var _fatal_splash_screen=__webpack_require__(1845);var _fatal_splash_screen2=_interopRequireDefault(_fatal_splash_screen);var _function=__webpack_require__(548);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var version=_metadata.metadata.version,buildNum=_metadata.metadata.buildNum;var firstFatal=true;var fatalToastTemplate=function lazyTemplate(tmpl){var compiled=void 0;return function(vars){return(compiled||(compiled=_lodash2.default.template(tmpl)))(vars)}}(__webpack_require__(1846));var fatalCallbacks=[];exports.addFatalErrorCallback=function addFatalErrorCallback(callback){fatalCallbacks.push(callback)};function formatInfo(){var info=[];_lodash2.default.isUndefined(version)||info.push("Version: "+version);_lodash2.default.isUndefined(buildNum)||info.push("Build: "+buildNum);return info.join("\n")}var fatalErrorInternals=exports.fatalErrorInternals={show:function show(err,location){if(firstFatal){(0,_function.callEach)(fatalCallbacks);firstFatal=false;window.addEventListener("hashchange",function(){window.location.reload()})}var html=fatalToastTemplate({info:formatInfo(),msg:(0,_lib.formatMsg)(err,location),stack:(0,_lib.formatStack)(err)});var $container=(0,_jquery2.default)("#fatal-splash-screen");if(!$container.length){(0,_jquery2.default)(document.body).removeAttr("ng-cloak").html(_fatal_splash_screen2.default);$container=(0,_jquery2.default)("#fatal-splash-screen")}$container.append(html)}};function fatalError(err,location){fatalErrorInternals.show(err,location);console.error(err.stack);throw err}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";var _truncText=__webpack_require__(2731);var _truncText2=_interopRequireDefault(_truncText);var _truncHtml=__webpack_require__(2732);var _truncHtml2=_interopRequireDefault(_truncHtml);var _modules=__webpack_require__(2);var _truncated=__webpack_require__(2741);var _truncated2=_interopRequireDefault(_truncated);__webpack_require__(587);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana",["ngSanitize"]);_module.directive("kbnTruncated",function(){return{restrict:"E",scope:{source:"@",length:"@",isHtml:"@"},template:_truncated2.default,link:function link($scope){var source=$scope.source;var max=$scope.length;var truncated=$scope.isHtml?(0,_truncHtml2.default)(source,max).html:(0,_truncText2.default)(source,max);$scope.content=truncated;if(source===truncated)return;$scope.truncated=true;$scope.expanded=false;$scope.action="more";$scope.toggle=function(){$scope.expanded=!$scope.expanded;$scope.content=$scope.expanded?source:truncated;$scope.action=$scope.expanded?"less":"more"}}}})},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _storage=__webpack_require__(2756);Object.defineProperty(exports,"Storage",{enumerable:true,get:function get(){return _storage.Storage}})},function(module,exports,__webpack_require__){"use strict";__webpack_require__(2757)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PersistedState=void 0;var _persisted_state=__webpack_require__(1244);Object.defineProperty(exports,"PersistedState",{enumerable:true,get:function get(){return _persisted_state.PersistedState}});__webpack_require__(2770)},,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.KibanaParsedUrl=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _url=__webpack_require__(66);var _prepend_path=__webpack_require__(1255);var _utils=__webpack_require__(396);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.KibanaParsedUrl=function(){function KibanaParsedUrl(options){_classCallCheck(this,KibanaParsedUrl);var appId=options.appId,_options$basePath=options.basePath,basePath=void 0===_options$basePath?"":_options$basePath,_options$appPath=options.appPath,appPath=void 0===_options$appPath?"":_options$appPath,hostname=options.hostname,protocol=options.protocol,port=options.port;var hostOrProtocolSpecified=hostname||protocol||port;this.basePath=basePath;this.appId=appId;this.appPath=appPath;this.hostname=hostOrProtocolSpecified?hostname:window.location.hostname;this.port=hostOrProtocolSpecified?port:window.location.port;this.protocol=hostOrProtocolSpecified?protocol:window.location.protocol}_createClass(KibanaParsedUrl,[{key:"getGlobalState",value:function getGlobalState(){if(!this.appPath)return"";var parsedUrl=(0,_url.parse)(this.appPath,true);var query=parsedUrl.query||{};return query._g||""}},{key:"setGlobalState",value:function setGlobalState(newGlobalState){if(!this.appPath)return;this.appPath=(0,_utils.modifyUrl)(this.appPath,function(parsed){parsed.query._g=newGlobalState})}},{key:"addQueryParameter",value:function addQueryParameter(name,val){this.appPath=(0,_utils.modifyUrl)(this.appPath,function(parsed){parsed.query[name]=val})}},{key:"getHashedAppPath",value:function getHashedAppPath(){return"#"+this.appPath}},{key:"getAppBasePath",value:function getAppBasePath(){return"/"+this.appId}},{key:"getAppRootPath",value:function getAppRootPath(){return"/app"+this.getAppBasePath()+this.getHashedAppPath()}},{key:"getRootRelativePath",value:function getRootRelativePath(){return(0,_prepend_path.prependPath)(this.getAppRootPath(),this.basePath)}},{key:"getAbsoluteUrl",value:function getAbsoluteUrl(){var _this=this;return(0,_utils.modifyUrl)(this.getRootRelativePath(),function(parsed){parsed.protocol=_this.protocol;parsed.port=_this.port;parsed.hostname=_this.hostname})}}]);return KibanaParsedUrl}()},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _registry=__webpack_require__(107);exports.default=(0,_registry.uiRegistry)({name:"timelionPanels",index:["name"],order:["name"]});module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.calculateBounds=calculateBounds;exports.getTime=getTime;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _datemath=__webpack_require__(83);var _datemath2=_interopRequireDefault(_datemath);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function calculateBounds(timeRange){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{min:_datemath2.default.parse(timeRange.from,{forceNow:options.forceNow}),max:_datemath2.default.parse(timeRange.to,{roundUp:true,forceNow:options.forceNow})}}function getTime(indexPattern,timeRange,forceNow){if(!indexPattern)return;var filter=void 0;var timefield=indexPattern.timeFieldName&&_lodash2.default.find(indexPattern.fields,{name:indexPattern.timeFieldName});if(timefield){var bounds=calculateBounds(timeRange,{forceNow:forceNow});filter={range:{}};filter.range[timefield.name]={gte:bounds.min.valueOf(),lte:bounds.max.valueOf(),format:"epoch_millis"}}return filter}},function(module,exports,__webpack_require__){"use strict";var _typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"===typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};Object.defineProperty(exports,"__esModule",{value:true});exports.getHighlightHtml=getHighlightHtml;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _highlight_tags=__webpack_require__(1273);var _html_tags=__webpack_require__(2967);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getHighlightHtml(fieldValue,highlights){var highlightHtml="object"===("undefined"===typeof fieldValue?"undefined":_typeof(fieldValue))?JSON.stringify(fieldValue):fieldValue;_lodash2.default.each(highlights,function(highlight){var escapedHighlight=_lodash2.default.escape(highlight);var untaggedHighlight=escapedHighlight.split(_highlight_tags.highlightTags.pre).join("").split(_highlight_tags.highlightTags.post).join("");var taggedHighlight=escapedHighlight.split(_highlight_tags.highlightTags.pre).join(_html_tags.htmlTags.pre).split(_highlight_tags.highlightTags.post).join(_html_tags.htmlTags.post);highlightHtml=highlightHtml.split(untaggedHighlight).join(taggedHighlight)});return highlightHtml}},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:true});exports.createNumeralFormat=createNumeralFormat;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _numeral=__webpack_require__(88);var _numeral2=_interopRequireDefault(_numeral);var _languages=__webpack_require__(2970);var _languages2=_interopRequireDefault(_languages);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var numeralInst=(0,_numeral2.default)();_languages2.default.forEach(function(numeralLanguage){_numeral2.default.language(numeralLanguage.id,numeralLanguage.lang)});function createNumeralFormat(FieldFormat,opts){var NumeralFormat=function(_FieldFormat){_inherits(NumeralFormat,_FieldFormat);function NumeralFormat(params,getConfig){_classCallCheck(this,NumeralFormat);var _this=_possibleConstructorReturn(this,(NumeralFormat.__proto__||Object.getPrototypeOf(NumeralFormat)).call(this,params));_this.getConfig=getConfig;return _this}_createClass(NumeralFormat,[{key:"getParamDefaults",value:function getParamDefaults(){if(_lodash2.default.has(opts,"getParamDefaults"))return opts.getParamDefaults(this.getConfig);return{pattern:this.getConfig("format:"+opts.id+":defaultPattern")}}},{key:"_convert",value:function _convert(val){if(-Infinity===val)return"-";if(Infinity===val)return"+";"number"!==typeof val&&(val=parseFloat(val));if(isNaN(val))return"";var previousLocale=_numeral2.default.language();var defaultLocale=this.getConfig&&this.getConfig("format:number:defaultLocale")||"en";_numeral2.default.language(defaultLocale);var formatted=numeralInst.set(val).format(this.param("pattern"));_numeral2.default.language(previousLocale);return opts.afterConvert?opts.afterConvert.call(this,formatted):formatted}}]);return NumeralFormat}(FieldFormat);NumeralFormat.id=opts.id;NumeralFormat.title=opts.title;NumeralFormat.fieldType="number";opts.prototype&&_lodash2.default.assign(NumeralFormat.prototype,opts.prototype);return NumeralFormat}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _search_source=__webpack_require__(2986);Object.defineProperty(exports,"SearchSourceProvider",{enumerable:true,get:function get(){return _search_source.SearchSourceProvider}});var _migrate_filter=__webpack_require__(1294);Object.defineProperty(exports,"migrateFilter",{enumerable:true,get:function get(){return _migrate_filter.migrateFilter}});var _decorate_query=__webpack_require__(1288);Object.defineProperty(exports,"decorateQuery",{enumerable:true,get:function get(){return _decorate_query.decorateQuery}});var _build_query=__webpack_require__(1287);Object.defineProperty(exports,"buildQueryFromFilters",{enumerable:true,get:function get(){return _build_query.buildQueryFromFilters}});Object.defineProperty(exports,"luceneStringToDsl",{enumerable:true,get:function get(){return _build_query.luceneStringToDsl}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _fetch_soon=__webpack_require__(2993);Object.defineProperty(exports,"FetchSoonProvider",{enumerable:true,get:function get(){return _fetch_soon.FetchSoonProvider}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.wildcardSymbol=void 0;exports.buildNode=buildNode;exports.test=test;exports.toElasticsearchQuery=toElasticsearchQuery;exports.toQueryStringQuery=toQueryStringQuery;exports.hasLeadingWildcard=hasLeadingWildcard;var _ast=__webpack_require__(1290);var wildcardSymbol=exports.wildcardSymbol="@kuery-wildcard@";function escapeRegExp(string){return string.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function escapeQueryString(string){return string.replace(/[+-=&|><!(){}[\]^"~*?:\\/]/g,"\\$&")}function buildNode(value){if(!value.includes(wildcardSymbol))return(0,_ast.fromLiteralExpression)(value);return{type:"wildcard",value:value}}function test(node,string){var value=node.value;var regex=value.split(wildcardSymbol).map(escapeRegExp).join(".*");var regexp=new RegExp("^"+regex+"$");return regexp.test(string)}function toElasticsearchQuery(node){var value=node.value;return value.split(wildcardSymbol).join("*")}function toQueryStringQuery(node){var value=node.value;return value.split(wildcardSymbol).map(escapeQueryString).join("*")}function hasLeadingWildcard(node){var value=node.value;return value.startsWith(wildcardSymbol)&&value.replace(wildcardSymbol,"").length>0}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPatternsProvider=IndexPatternsProvider;var _errors=__webpack_require__(56);var _index_pattern=__webpack_require__(3036);var _pattern_cache=__webpack_require__(1300);var _get=__webpack_require__(816);var _intervals=__webpack_require__(1297);var _fields_fetcher_provider=__webpack_require__(1301);var _field_formats=__webpack_require__(116);var _modules=__webpack_require__(2);function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}var _module=_modules.uiModules.get("kibana/index_patterns");function IndexPatternsProvider(Notifier,Private,config){var _this=this;var self=this;var IndexPattern=Private(_index_pattern.IndexPatternProvider);var patternCache=Private(_pattern_cache.IndexPatternsPatternCacheProvider);var getProvider=Private(_get.IndexPatternsGetProvider);self.get=function(id){if(!id)return self.make();var cache=patternCache.get(id);return cache||patternCache.set(id,self.make(id))};self.getDefault=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var defaultIndexPatternId;return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:defaultIndexPatternId=config.get("defaultIndex");if(!defaultIndexPatternId){_context.next=5;break}_context.next=4;return self.get(defaultIndexPatternId);case 4:return _context.abrupt("return",_context.sent);case 5:return _context.abrupt("return",null);case 6:case"end":return _context.stop()}},_callee,_this)}));self.make=function(id){return new IndexPattern(id).init()};self.delete=function(pattern){self.getIds.clearCache();return pattern.destroy()};self.errors={MissingIndices:_errors.IndexPatternMissingIndices};self.cache=patternCache;self.getIds=getProvider("id");self.getTitles=getProvider("attributes.title");self.getFields=getProvider.multiple;self.intervals=Private(_intervals.IndexPatternsIntervalsProvider);self.fieldsFetcher=Private(_fields_fetcher_provider.FieldsFetcherProvider);self.fieldFormats=_field_formats.fieldFormats;self.IndexPattern=IndexPattern}_module.service("indexPatterns",function(Private){return Private(IndexPatternsProvider)})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPatternsGetProvider=IndexPatternsGetProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _saved_objects=__webpack_require__(57);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function IndexPatternsGetProvider(Private){var _this=this;var savedObjectsClient=Private(_saved_objects.SavedObjectsClientProvider);var cachedIdPromise=void 0;var get=function get(field){if("id"===field&&cachedIdPromise)return cachedIdPromise.then(function(cachedResp){return _lodash2.default.clone(cachedResp)});var promise=savedObjectsClient.find({type:"index-pattern",fields:[],perPage:1e4}).then(function(resp){return resp.savedObjects.map(function(obj){return _lodash2.default.get(obj,field)})});"id"===field&&(cachedIdPromise=promise);return promise.then(function(resp){return _lodash2.default.clone(resp)})};var retFunction=function retFunction(field){var getter=get.bind(get,field);"id"===field&&(getter.clearCache=function(){cachedIdPromise=null});return getter};retFunction.multiple=(_ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(fields){return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return savedObjectsClient.find({type:"index-pattern",fields:fields,perPage:1e4});case 2:return _context.abrupt("return",_context.sent.savedObjects);case 3:case"end":return _context.stop()}},_callee,_this)})),function(_x){return _ref.apply(this,arguments)});var _ref;return retFunction}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isNumeric=isNumeric;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function isNumeric(v){return!_lodash2.default.isNaN(v)&&("number"===typeof v||!Array.isArray(v)&&!_lodash2.default.isNaN(parseFloat(v)))}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(3048);__webpack_require__(9);var _modules=__webpack_require__(2);var _saved_object_loader=__webpack_require__(601);var _saved_object_registry=__webpack_require__(413);var _saved_objects=__webpack_require__(57);var _module=_modules.uiModules.get("discover/saved_searches",["kibana/notify"]);_saved_object_registry.savedObjectManagementRegistry.register({service:"savedSearches",title:"searches"});_module.service("savedSearches",function(Private,Promise,config,kbnIndex,createNotifier,SavedSearch,kbnUrl,$http,chrome){var savedObjectClient=Private(_saved_objects.SavedObjectsClientProvider);var savedSearchLoader=new _saved_object_loader.SavedObjectLoader(SavedSearch,kbnIndex,kbnUrl,$http,chrome,savedObjectClient);savedSearchLoader.loaderProperties={name:"searches",noun:"Saved Search",nouns:"saved searches"};savedSearchLoader.urlFor=function(id){return kbnUrl.eval("#/discover/{{id}}",{id:id})};return savedSearchLoader})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AggParams=void 0;__webpack_require__(1308);var _indexed_array=__webpack_require__(249);var _field=__webpack_require__(3052);var _optioned=__webpack_require__(3055);var _regex=__webpack_require__(3056);var _string=__webpack_require__(3058);var _json=__webpack_require__(3060);var _base=__webpack_require__(414);var _legacy_class=__webpack_require__(77);var paramTypeMap={field:_field.FieldParamType,optioned:_optioned.OptionedParamType,regex:_regex.RegexParamType,string:_string.StringParamType,json:_json.JsonParamType,_default:_base.BaseParamType};(0,_legacy_class.createLegacyClass)(AggParams).inherits(_indexed_array.IndexedArray);function AggParams(params){AggParams.Super.call(this,{index:["name"],initialSet:params.map(function(config){var type="field"===config.name?config.name:config.type;var Class=paramTypeMap[type]||paramTypeMap._default;return new Class(config)})})}AggParams.prototype.write=function(aggConfig,aggs,locals){var output={params:{}};locals=locals||{};this.forEach(function(param){param.write?param.write(aggConfig,output,aggs,locals):output.params[param.name]=aggConfig.params[param.name]});return output};exports.AggParams=AggParams},function(module,exports,__webpack_require__){"use strict";var _prop_filter=__webpack_require__(821);var _modules=__webpack_require__(2);_modules.uiModules.get("kibana").filter("fieldType",function(){return(0,_prop_filter.propFilter)("type")})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.propFilter=propFilter;var _lodash=__webpack_require__(1);function propFilter(prop){return function(list){var filters=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if((0,_lodash.isFunction)(filters))return list.filter(function(item){return filters(item[prop])});Array.isArray(filters)||(filters=filters.split(","));if(0===filters.length)return list;if(filters.includes("*"))return list;var options=filters.reduce(function(options,filter){var type="include";var value=filter;if("!"===filter.charAt(0)){type="exclude";value=filter.substr(1)}options[type]||(options[type]=[]);options[type].push(value);return options},{});return list.filter(function(item){var value=item[prop];var excluded=options.exclude&&options.exclude.includes(value);if(excluded)return false;var included=!options.include||options.include.includes(value);if(included)return true;return false})}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AggType=void 0;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _agg_params=__webpack_require__(819);var _field_formats=__webpack_require__(116);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function AggType(config){this.name=config.name;this.dslName=config.dslName||config.name;this.title=config.title;this.makeLabel=config.makeLabel||_lodash2.default.constant(this.name);this.ordered=config.ordered;this.hasNoDsl=!!config.hasNoDsl;this.createFilter=config.createFilter;this.params=config.params||[];if(!(this.params instanceof _agg_params.AggParams)){this.params.push({name:"json",type:"json",advanced:true});false!==config.customLabels&&this.params.push({name:"customLabel",type:"string",write:_lodash2.default.noop});this.params=new _agg_params.AggParams(this.params)}this.getRequestAggs=config.getRequestAggs||_lodash2.default.noop;this.getResponseAggs=config.getResponseAggs||_lodash2.default.noop;this.decorateAggConfig=config.decorateAggConfig||null;this.postFlightRequest=config.postFlightRequest||_lodash2.default.identity;config.getFormat&&(this.getFormat=config.getFormat)}AggType.prototype.getFormat=function(agg){var field=agg.getField();return field?field.format:_field_formats.fieldFormats.getDefaultInstance("string")};exports.AggType=AggType},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getResponseAggConfigClass=getResponseAggConfigClass;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getResponseAggConfigClass(agg,props){return agg.$$_ResponseAggConfigClass?agg.$$_ResponseAggConfigClass:agg.$$_ResponseAggConfigClass=create(agg,props)}function create(parentAgg,props){function ResponseAggConfig(key){this.key=key;this.parentId=this.id;var subId=String(key);subId.indexOf(".")>-1?this.id=this.parentId+"['"+subId.replace(/'/g,"\\'")+"']":this.id=this.parentId+"."+subId}ResponseAggConfig.prototype=Object.create(parentAgg,{constructor:ResponseAggConfig});_lodash2.default.assign(ResponseAggConfig.prototype,props);return ResponseAggConfig}},,function(module,exports,__webpack_require__){"use strict";var _parse_interval=__webpack_require__(117);var _modules=__webpack_require__(2);_modules.uiModules.get("kibana").directive("validateDateInterval",function(){return{restrict:"A",require:"ngModel",link:function link($scope,$el,attrs,ngModelCntrl){ngModelCntrl.$parsers.push(check);ngModelCntrl.$formatters.push(check);function check(value){ngModelCntrl.$setValidity("dateInterval",null!=(0,_parse_interval.parseInterval)(value));return value}}}})},function(module,exports,__webpack_require__){"use strict";var _datemath=__webpack_require__(83);var _datemath2=_interopRequireDefault(_datemath);var _modules=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana").directive("validateDateMath",function(){return{restrict:"A",require:"ngModel",scope:{ngModel:"="},link:function link($scope,elem,attr,ngModel){ngModel.$parsers.unshift(validateDateMath);ngModel.$formatters.unshift(validateDateMath);function validateDateMath(input){if(null==input||""===input){ngModel.$setValidity("validDateMath",true);return null}var moment=_datemath2.default.parse(input);ngModel.$setValidity("validDateMath",null!=moment&&moment.isValid());return input}}}})},function(module,exports,__webpack_require__){"use strict";var _ipv4_address=__webpack_require__(1318);var _ipv4_address2=_interopRequireDefault(_ipv4_address);var _modules=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana").directive("validateIp",function(){return{restrict:"A",require:"ngModel",scope:{ngModel:"="},link:function link($scope,elem,attr,ngModel){function validateIp(ipAddress){if(null==ipAddress||""===ipAddress){ngModel.$setValidity("ipInput",true);return null}try{ipAddress=new _ipv4_address2.default(ipAddress);ngModel.$setValidity("ipInput",true);return ipAddress.toString()}catch(e){ngModel.$setValidity("ipInput",false)}}ngModel.$parsers.unshift(validateIp);ngModel.$formatters.unshift(validateIp)}}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildExistsFilter=buildExistsFilter;function buildExistsFilter(field,indexPattern){return{meta:{index:indexPattern.id},exists:{field:field.name}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.decodeGeoHash=decodeGeoHash;exports.geohashColumns=geohashColumns;function decodeGeoHash(geohash){var BITS=[16,8,4,2,1];var BASE32="0123456789bcdefghjkmnpqrstuvwxyz";var is_even=1;var lat=[];var lon=[];lat[0]=-90;lat[1]=90;lon[0]=-180;lon[1]=180;var lat_err=90;var lon_err=180;for(var i=0;i<geohash.length;i++){var c=geohash[i];var cd=BASE32.indexOf(c);for(var j=0;j<5;j++){var mask=BITS[j];if(is_even){lon_err/=2;refine_interval(lon,cd,mask)}else{lat_err/=2;refine_interval(lat,cd,mask)}is_even=!is_even}}lat[2]=(lat[0]+lat[1])/2;lon[2]=(lon[0]+lon[1])/2;return{latitude:lat,longitude:lon}}function refine_interval(interval,cd,mask){cd&mask?interval[0]=(interval[0]+interval[1])/2:interval[1]=(interval[0]+interval[1])/2}function geohashCells(precision,axis){var cells=1;for(var i=1;i<=precision;i+=1)cells*=i%2===axis?4:8;return cells}function geohashColumns(precision){return geohashCells(precision,0)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterBarLibMapAndFlattenFiltersProvider=FilterBarLibMapAndFlattenFiltersProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _map_filter=__webpack_require__(3134);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function FilterBarLibMapAndFlattenFiltersProvider(Private,Promise){var mapFilter=Private(_map_filter.FilterBarLibMapFilterProvider);return function(filters){return(0,_lodash2.default)(filters).flatten().compact().map(mapFilter).thru(Promise.all).value()}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});(function(RequestStatus){RequestStatus[RequestStatus["PENDING"]=0]="PENDING";RequestStatus[RequestStatus["OK"]=1]="OK";RequestStatus[RequestStatus["ERROR"]=2]="ERROR"})(exports.RequestStatus||(exports.RequestStatus={}))},function(module,exports,__webpack_require__){"use strict";__webpack_require__(16);__webpack_require__(3161);var uiModules=__webpack_require__(2).uiModules;var kibana=uiModules.get("kibana",["ui.bootstrap"]);module.exports=kibana.config(function($tooltipProvider){$tooltipProvider.setTriggers({mouseenter:"mouseleave click"})})},function(module,exports,__webpack_require__){"use strict";__webpack_require__(3210)},function(module,exports,__webpack_require__){"use strict";var _angular=__webpack_require__(16);var _angular2=_interopRequireDefault(_angular);var _modules=__webpack_require__(2);__webpack_require__(3231);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var aceKeyboardModeId=0;_modules.uiModules.get("kibana").factory("kbnUiAceKeyboardModeService",function(){return{initialize:function initialize(scope,element){var uniqueId="uiAceKeyboardHint-"+scope.$id+"-"+aceKeyboardModeId++;var hint=_angular2.default.element('<div\n          class="uiAceKeyboardHint"\n          id="'+uniqueId+'"\n          tabindex="0"\n          role="application"\n        >\n          <p class="kuiText kuiVerticalRhythmSmall">\n            Press Enter to start editing.\n          </p>\n          <p class="kuiText kuiVerticalRhythmSmall">\n            When you&rsquo;re done, press Escape to stop editing.\n          </p>\n        </div>');var uiAceTextbox=element.find("textarea");function startEditing(){hint.addClass("uiAceKeyboardHint-isInactive");uiAceTextbox.focus()}function enableOverlay(){hint.removeClass("uiAceKeyboardHint-isInactive")}hint.keydown(function(ev){if(ev.keyCode===_eui.keyCodes.ENTER){ev.preventDefault();startEditing()}});uiAceTextbox.blur(function(){enableOverlay()});var isAutoCompleterOpen=void 0;document.addEventListener("keydown",function(){var autoCompleter=document.querySelector(".ace_autocomplete");if(!autoCompleter){isAutoCompleterOpen=false;return}isAutoCompleterOpen="none"!==autoCompleter.style.display},{capture:true});uiAceTextbox.keydown(function(ev){if(ev.keyCode===_eui.keyCodes.ESCAPE&&!isAutoCompleterOpen){ev.preventDefault();ev.stopPropagation();enableOverlay();hint.focus()}});hint.click(startEditing);uiAceTextbox.attr("tabindex","-1");element.prepend(hint)}}}).directive("kbnUiAceKeyboardMode",function(kbnUiAceKeyboardModeService){return{restrict:"A",link:function link(scope,element){kbnUiAceKeyboardModeService.initialize(scope,element)}}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getQueryDslFromFilter=getQueryDslFromFilter;exports.getFieldFromFilter=getFieldFromFilter;exports.getOperatorFromFilter=getOperatorFromFilter;exports.getParamsFromFilter=getParamsFromFilter;exports.getFieldOptions=getFieldOptions;exports.getOperatorOptions=getOperatorOptions;exports.isFilterValid=isFilterValid;exports.buildFilter=buildFilter;exports.areIndexPatternsProvided=areIndexPatternsProvided;exports.isFilterPinned=isFilterPinned;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _filter_operators=__webpack_require__(1334);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function _defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true}):obj[key]=value;return obj}function getQueryDslFromFilter(filter){return(0,_lodash2.default)(filter).omit(["meta","$state"]).cloneDeep()}function getFieldFromFilter(filter,indexPatterns){var _filter$meta=filter.meta,index=_filter$meta.index,key=_filter$meta.key;return indexPatterns.get(index).then(function(indexPattern){return indexPattern.id&&indexPattern.fields.byName[key]})}function getOperatorFromFilter(filter){var _filter$meta2=filter.meta,type=_filter$meta2.type,negate=_filter$meta2.negate;return _filter_operators.FILTER_OPERATORS.find(function(operator){return operator.type===type&&operator.negate===negate})}function getParamsFromFilter(filter){var _filter$meta3=filter.meta,type=_filter$meta3.type,key=_filter$meta3.key;var params=void 0;if("phrase"===type)params=filter.query?filter.query.match[key].query:filter.script.script.params.value;else if("phrases"===type)params=filter.meta.params;else if("range"===type){var range=filter.range?filter.range[key]:filter.script.script.params;var from=_lodash2.default.has(range,"gte")?range.gte:range.gt;var to=_lodash2.default.has(range,"lte")?range.lte:range.lt;params={from:from,to:to}}return _defineProperty({},type,params)}function getFieldOptions(indexPatterns){return(indexPatterns||[]).reduce(function(fields,indexPattern){var filterableFields=indexPattern.fields.filter(function(field){return field.filterable});return[].concat(_toConsumableArray(fields),_toConsumableArray(filterableFields))},[])}function getOperatorOptions(field){var type=_lodash2.default.get(field,"type");return _filter_operators.FILTER_OPERATORS.filter(function(operator){return!operator.fieldTypes||operator.fieldTypes.includes(type)})}function isFilterValid(_ref2){var field=_ref2.field,operator=_ref2.operator,params=_ref2.params;if(!field||!operator)return false;if("phrase"===operator.type)return _lodash2.default.has(params,"phrase")&&""!==params.phrase;if("phrases"===operator.type)return _lodash2.default.has(params,"phrases")&&params.phrases.length>0;if("range"===operator.type){var hasFrom=_lodash2.default.has(params,["range","from"])&&""!==params.range.from;var hasTo=_lodash2.default.has(params,["range","to"])&&""!==params.range.to;return hasFrom||hasTo}return true}function buildFilter(_ref3){var indexPattern=_ref3.indexPattern,field=_ref3.field,operator=_ref3.operator,params=_ref3.params,filterBuilder=_ref3.filterBuilder;var filter=void 0;"phrase"===operator.type?filter=filterBuilder.buildPhraseFilter(field,params.phrase,indexPattern):"phrases"===operator.type?filter=filterBuilder.buildPhrasesFilter(field,params.phrases,indexPattern):"range"===operator.type?filter=filterBuilder.buildRangeFilter(field,{gte:params.range.from,lt:params.range.to},indexPattern):"exists"===operator.type&&(filter=filterBuilder.buildExistsFilter(field,indexPattern));filter.meta.negate=operator.negate;return filter}function areIndexPatternsProvided(indexPatterns){return 0!==_lodash2.default.compact(indexPatterns).length}function isFilterPinned(filter,pinnedByDefault){if(!filter.hasOwnProperty("$state"))return pinnedByDefault;return"globalState"===filter.$state.store}},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(2);var _module=_modules.uiModules.get("kibana");_module.directive("focusOn",function($timeout){return{restrict:"A",link:function link(scope,elem,attrs){scope.$on(attrs.focusOn,function(){$timeout(function(){return elem.find("input,select").addBack("input,select").focus()})})}}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ConfirmationButtonTypes=void 0;var _angular=__webpack_require__(16);var _angular2=_interopRequireDefault(_angular);var _lodash=__webpack_require__(1);var _modules=__webpack_require__(2);var _confirm_modal=__webpack_require__(3262);var _confirm_modal2=_interopRequireDefault(_confirm_modal);var _modal_overlay=__webpack_require__(1342);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");var ConfirmationButtonTypes=exports.ConfirmationButtonTypes={CONFIRM:_eui.EUI_MODAL_CONFIRM_BUTTON,CANCEL:_eui.EUI_MODAL_CANCEL_BUTTON};_module.factory("confirmModal",function($rootScope,$compile){var modalPopover=void 0;var confirmQueue=[];return function confirmModal(message,customOptions){var defaultOptions={onCancel:_lodash.noop,cancelButtonText:"Cancel",defaultFocusedButton:ConfirmationButtonTypes.CONFIRM};if(!customOptions.confirmButtonText||!customOptions.onConfirm)throw new Error("Please specify confirmation button text and onConfirm action");var options=Object.assign(defaultOptions,customOptions);options.onClose=customOptions.onClose||options.onCancel;var confirmScope=$rootScope.$new();confirmScope.message=message;confirmScope.defaultFocusedButton=options.defaultFocusedButton;confirmScope.confirmButtonText=options.confirmButtonText;confirmScope.cancelButtonText=options.cancelButtonText;confirmScope.title=options.title;confirmScope.onConfirm=function(){destroy();options.onConfirm()};confirmScope.onCancel=function(){destroy();options.onCancel()};confirmScope.onClose=function(){destroy();options.onClose()};function showModal(confirmScope){var modalInstance=$compile(_confirm_modal2.default)(confirmScope);modalPopover=new _modal_overlay.ModalOverlay(modalInstance)}modalPopover?confirmQueue.unshift(confirmScope):showModal(confirmScope);function destroy(){modalPopover.destroy();modalPopover=void 0;_angular2.default.element(document.body).off("keydown");confirmScope.$destroy();confirmQueue.length>0&&showModal(confirmQueue.pop())}}})},function(module,exports,__webpack_require__){"use strict";__webpack_require__(3268)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.relativeOptions=[{text:"Seconds ago",value:"s"},{text:"Minutes ago",value:"m"},{text:"Hours ago",value:"h"},{text:"Days ago",value:"d"},{text:"Weeks ago",value:"w"},{text:"Months ago",value:"M"},{text:"Years ago",value:"y"},{text:"Seconds from now",value:"s+"},{text:"Minutes from now",value:"m+"},{text:"Hours from now",value:"h+"},{text:"Days from now",value:"d+"},{text:"Weeks from now",value:"w+"},{text:"Months from now",value:"M+"},{text:"Years from now",value:"y+"}]},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(2);function makeDirectiveDef(id,compare){return function($parse){return{require:"ngModel",link:function link($scope,$el,$attr,ngModel){var getBound=function getBound(){return $parse($attr[id])()};var defaultVal={greaterThan:-Infinity,greaterOrEqualThan:-Infinity,lessThan:Infinity}[id];ngModel.$parsers.push(validate);ngModel.$formatters.push(validate);$scope.$watch(getBound,function(){validate(ngModel.$viewValue)});function validate(val){var bound=isNaN(getBound())?defaultVal:+getBound();var valid=!isNaN(bound)&&!isNaN(val)&&compare(val,bound);ngModel.$setValidity(id,valid);return val}}}}}_modules.uiModules.get("kibana").directive("greaterThan",makeDirectiveDef("greaterThan",function(a,b){return a>b})).directive("lessThan",makeDirectiveDef("lessThan",function(a,b){return a<b})).directive("greaterOrEqualThan",makeDirectiveDef("greaterOrEqualThan",function(a,b){return a>=b}))},function(module,exports,__webpack_require__){"use strict";__webpack_require__(93);var _components=__webpack_require__(33);var _eui=__webpack_require__(3);var _modules=__webpack_require__(2);var app=_modules.uiModules.get("app/kibana",["react"]);app.directive("toolBarSearchBox",function(reactDirective){return reactDirective(_components.KuiToolBarSearchBox)});app.directive("confirmModal",function(reactDirective){return reactDirective(_eui.EuiConfirmModal)});app.directive("icon",function(reactDirective){return reactDirective(_eui.EuiIcon)});app.directive("colorPicker",function(reactDirective){return reactDirective(_eui.EuiColorPicker)});app.directive("iconTip",function(reactDirective){return reactDirective(_eui.EuiIconTip,["content","type","position","title"])});app.directive("callOut",function(reactDirective){return reactDirective(_eui.EuiCallOut,["title","color","size","iconType","children"])})},,function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(2);_modules.uiModules.get("kibana").directive("confirmClick",function($window){return{restrict:"A",link:function link($scope,$elem,attrs){$elem.bind("click",function(){var message=attrs.confirmation||"Are you sure?";if($window.confirm(message)){var action=attrs.confirmClick;action&&$scope.$apply($scope.$eval(action))}});$scope.$on("$destroy",function(){$elem.unbind("click")})}}})},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(2);var _module=_modules.uiModules.get("kibana");_module.directive("cssTruncate",function(){return{restrict:"A",scope:{},link:function link($scope,$elem,attrs){$elem.css({overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis","word-break":"break-all"});null!=attrs.cssTruncateExpandable&&$scope.$watch(function(){return $elem.html()},function(){if($elem[0].offsetWidth<$elem[0].scrollWidth){$elem.css({cursor:"pointer"});$elem.bind("click",function(){$scope.toggle()})}});$scope.toggle=function(){"normal"!==$elem.css("white-space")?$elem.css({"white-space":"normal"}):$elem.css({"white-space":"nowrap"})};$scope.$on("$destroy",function(){$elem.unbind("click");$elem.unbind("mouseenter")})}}})},function(module,exports,__webpack_require__){"use strict";var _jquery=__webpack_require__(13);var _jquery2=_interopRequireDefault(_jquery);__webpack_require__(614);var _boolean_field_name_icon=__webpack_require__(3429);var _boolean_field_name_icon2=_interopRequireDefault(_boolean_field_name_icon);var _conflict_field_name_icon=__webpack_require__(3430);var _conflict_field_name_icon2=_interopRequireDefault(_conflict_field_name_icon);var _date_field_name_icon=__webpack_require__(3431);var _date_field_name_icon2=_interopRequireDefault(_date_field_name_icon);var _geo_point_field_name_icon=__webpack_require__(3432);var _geo_point_field_name_icon2=_interopRequireDefault(_geo_point_field_name_icon);var _ip_field_name_icon=__webpack_require__(3433);var _ip_field_name_icon2=_interopRequireDefault(_ip_field_name_icon);var _murmur3_field_name_icon=__webpack_require__(3434);var _murmur3_field_name_icon2=_interopRequireDefault(_murmur3_field_name_icon);var _number_field_name_icon=__webpack_require__(3435);var _number_field_name_icon2=_interopRequireDefault(_number_field_name_icon);var _source_field_name_icon=__webpack_require__(3436);var _source_field_name_icon2=_interopRequireDefault(_source_field_name_icon);var _string_field_name_icon=__webpack_require__(3437);var _string_field_name_icon2=_interopRequireDefault(_string_field_name_icon);var _unknown_field_name_icon=__webpack_require__(3438);var _unknown_field_name_icon2=_interopRequireDefault(_unknown_field_name_icon);var _modules=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");_module.directive("fieldName",function($compile,$rootScope,$filter){return{restrict:"AE",scope:{field:"=",fieldName:"=",fieldType:"="},link:function link($scope,$el){var typeToIconMap={boolean:_boolean_field_name_icon2.default,conflict:_conflict_field_name_icon2.default,date:_date_field_name_icon2.default,geo_point:_geo_point_field_name_icon2.default,ip:_ip_field_name_icon2.default,murmur3:_murmur3_field_name_icon2.default,number:_number_field_name_icon2.default,source:_source_field_name_icon2.default,string:_string_field_name_icon2.default};function typeIcon(fieldType){if(typeToIconMap.hasOwnProperty(fieldType))return typeToIconMap[fieldType];return _unknown_field_name_icon2.default}$rootScope.$watchMulti.call($scope,["field","fieldName","fieldType","field.rowCount"],function(){var type=$scope.field?$scope.field.type:$scope.fieldType;var name=$scope.field?$scope.field.name:$scope.fieldName;var results=!!$scope.field&&(!$scope.field.rowCount&&!$scope.field.scripted);var scripted=!!$scope.field&&$scope.field.scripted;var displayName=$filter("shortDots")(name);$el.attr("title",name).toggleClass("no-results",results).toggleClass("scripted",scripted).prepend(typeIcon(type)).append((0,_jquery2.default)("<span>").text(displayName).addClass("discover-field-name"))})}}})},,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _risonNode=__webpack_require__(310);var _risonNode2=_interopRequireDefault(_risonNode);var _key_map=__webpack_require__(603);var _saved_object_registry=__webpack_require__(294);var _modules=__webpack_require__(2);var _saved_object_finder=__webpack_require__(3558);var _saved_object_finder2=_interopRequireDefault(_saved_object_finder);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");_module.directive("savedObjectFinder",function($location,$injector,kbnUrl,Private,config){var services=Private(_saved_object_registry.SavedObjectRegistryProvider).byLoaderPropertiesName;return{restrict:"E",scope:{type:"@",userMakeUrl:"=?makeUrl",userOnChoose:"=?onChoose",useLocalManagement:"=?useLocalManagement",onAddNew:"=",disableAutoFocus:"="},template:_saved_object_finder2.default,controllerAs:"finder",controller:function controller($scope,$element){var self=this;var $input=$element.find("input[ng-model=filter]");$scope.perPage=config.get("savedObjects:perPage");var $list=$element.find("ul");var currentFilter=$scope.filter;var prevSearch=void 0;self.hits=[];self.service=services[$scope.type];self.properties=self.service.loaderProperties;filterResults();self.isAscending=true;self.sortHits=function(hits){self.isAscending=!self.isAscending;self.hits=self.isAscending?_lodash2.default.sortBy(hits,"title"):_lodash2.default.sortBy(hits,"title").reverse()};self.makeUrl=function(hit){if($scope.userMakeUrl)return $scope.userMakeUrl(hit);if(!$scope.userOnChoose)return hit.url;return"#"};self.preventClick=function($event){$event.preventDefault()};self.onChoose=function(hit,$event){$scope.userOnChoose&&$scope.userOnChoose(hit,$event);var url=self.makeUrl(hit);if(!url||"#"===url||"#"!==url.charAt(0))return;$event.preventDefault();kbnUrl.change(url.substr(1))};$scope.$watch("filter",function(newFilter){currentFilter=newFilter||"";filterResults()});$scope.pageFirstItem=0;$scope.pageLastItem=0;$scope.onPageChanged=function(page){$scope.pageFirstItem=page.firstItem;$scope.pageLastItem=page.lastItem};self.selector={enabled:false,index:-1};self.filterKeyDown=function($event){switch(_key_map.keyMap[$event.keyCode]){case"enter":if(1!==self.hitCount)return;var hit=self.hits[0];if(!hit)return;self.onChoose(hit,$event);$event.preventDefault()}};self.hitKeyDown=function($event,page,paginate){switch(_key_map.keyMap[$event.keyCode]){case"tab":if(!self.selector.enabled)break;self.selector.index=-1;self.selector.enabled=false;$event.shiftKey?$input.focus():$list.find("li.active a").focus();$event.preventDefault();break;case"down":if(!self.selector.enabled)break;self.selector.index+1<page.length&&(self.selector.index+=1);$event.preventDefault();break;case"up":if(!self.selector.enabled)break;self.selector.index>0&&(self.selector.index-=1);$event.preventDefault();break;case"right":if(!self.selector.enabled)break;if(page.number<page.count){paginate.goToPage(page.number+1);self.selector.index=0;selectTopHit()}$event.preventDefault();break;case"left":if(!self.selector.enabled)break;if(page.number>1){paginate.goToPage(page.number-1);self.selector.index=0;selectTopHit()}$event.preventDefault();break;case"escape":if(!self.selector.enabled)break;$input.focus();$event.preventDefault();break;case"enter":if(!self.selector.enabled)break;var hitIndex=(page.number-1)*paginate.perPage+self.selector.index;var hit=self.hits[hitIndex];if(!hit)break;self.onChoose(hit,$event);$event.preventDefault();break;case"shift":break;default:$input.focus()}};self.hitBlur=function(){self.selector.index=-1;self.selector.enabled=false};self.manageObjects=function(type){$location.url("/management/kibana/objects?_a="+_risonNode2.default.encode({tab:type}))};self.hitCountNoun=function(){return(1===self.hitCount?self.properties.noun:self.properties.nouns).toLowerCase()};function selectTopHit(){setTimeout(function(){$list.find("a:first").focus()},0)}function filterResults(){if(!self.service)return;if(!self.properties)return;var filter=currentFilter;if(prevSearch===filter)return;prevSearch=filter;var isLabsEnabled=config.get("visualize:enableLabs");self.service.find(filter).then(function(hits){hits.hits=hits.hits.filter(function(hit){return isLabsEnabled||"lab"!==_lodash2.default.get(hit,"type.stage")});hits.total=hits.hits.length;if(currentFilter===filter){self.hitCount=hits.total;self.hits=_lodash2.default.sortBy(hits.hits,"title")}})}}}})},,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var resize_checker_1=__webpack_require__(3929);exports.ResizeChecker=resize_checker_1.ResizeChecker},function(module,exports,__webpack_require__){"use strict";__webpack_require__(3968)},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.timezoneProvider=timezoneProvider;var _moment=__webpack_require__(10);var _moment2=_interopRequireDefault(_moment);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var tzDetect=__webpack_require__(824).jstz;function timezoneProvider(config){return function(){if(config.isDefault("dateFormat:tz")){var detectedTimezone=tzDetect.determine().name();return detectedTimezone||(0,_moment2.default)().format("Z")}return config.get("dateFormat:tz","Browser")}}},function(module,exports,__webpack_require__){"use strict";var _panel_registry=__webpack_require__(808);var _panel_registry2=_interopRequireDefault(_panel_registry);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}__webpack_require__(2).get("apps/timelion",[]).directive("chart",function(Private){return{restrict:"A",scope:{seriesList:"=chart",search:"=",interval:"="},link:function link($scope,$elem){var panelRegistry=Private(_panel_registry2.default);var panelScope=$scope.$new(true);function render(seriesList){panelScope.$destroy();if(!seriesList)return;seriesList.render=seriesList.render||{type:"timechart"};var panelSchema=panelRegistry.byName[seriesList.render.type];if(!panelSchema){$elem.text("No such panel type: "+seriesList.render.type);return}panelScope=$scope.$new(true);panelScope.seriesList=seriesList;panelScope.interval=$scope.interval;panelScope.search=$scope.search;panelSchema.render(panelScope,$elem)}$scope.$watch("seriesList",render)}}})},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(2);var _vislib_basic_options=__webpack_require__(4062);var _vislib_basic_options2=_interopRequireDefault(_vislib_basic_options);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");_module.directive("vislibBasicOptions",function(){return{restrict:"E",template:_vislib_basic_options2.default,replace:true}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();exports.VislibLibDataProvider=VislibLibDataProvider;var _d=__webpack_require__(19);var _d2=_interopRequireDefault(_d);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _inject_zeros=__webpack_require__(4082);var _ordered_x_keys=__webpack_require__(1469);var _labels=__webpack_require__(4087);var _color=__webpack_require__(4091);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function VislibLibDataProvider(Private){var _injectZeros=Private(_inject_zeros.VislibComponentsZeroInjectionInjectZerosProvider);var orderKeys=Private(_ordered_x_keys.VislibComponentsZeroInjectionOrderedXKeysProvider);var _getLabels2=Private(_labels.VislibComponentsLabelsLabelsProvider);var color=Private(_color.VislibComponentsColorColorProvider);var Data=function(){function Data(data,uiState){_classCallCheck(this,Data);this.uiState=uiState;this.data=this.copyDataObj(data);this.type=this.getDataType();this.labels=this._getLabels(this.data);this.color=this.labels?color(this.labels,uiState.get("vis.colors")):void 0;this._normalizeOrdered()}_createClass(Data,[{key:"copyDataObj",value:function copyDataObj(data){var copyChart=function copyChart(data){var newData={};Object.keys(data).forEach(function(key){newData[key]="series"!==key?data[key]:data[key].map(function(seri){return{label:seri.label,aggLabel:seri.aggLabel,aggId:seri.aggId,values:seri.values.map(function(val){var newVal=_lodash2.default.clone(val);newVal.aggConfig=val.aggConfig;newVal.aggConfigResult=val.aggConfigResult;newVal.extraMetrics=val.extraMetrics;newVal.series=val.series||seri.label;return newVal})}})});return newData};if(!data.series){var newData={};Object.keys(data).forEach(function(key){["rows","columns"].includes(key)?newData[key]=data[key].map(function(chart){return copyChart(chart)}):newData[key]=data[key]});return newData}return copyChart(data)}},{key:"_getLabels",value:function _getLabels(data){return"series"===this.type?_getLabels2(data):this.pieNames()}},{key:"getDataType",value:function getDataType(){var data=this.getVisData();var type=void 0;data.forEach(function(obj){obj.series?type="series":obj.slices?type="slices":obj.geoJson&&(type="geoJson")});return type}},{key:"chartData",value:function chartData(){if(!this.data.series){var arr=this.data.rows?this.data.rows:this.data.columns;return _lodash2.default.toArray(arr)}return[this.data]}},{key:"shouldBeStacked",value:function shouldBeStacked(seriesConfig){if(!seriesConfig)return false;return"stacked"===seriesConfig.mode}},{key:"getStackedSeries",value:function getStackedSeries(chartConfig,axis,series){var _this=this;var first=arguments.length>3&&void 0!==arguments[3]&&arguments[3];var matchingSeries=[];chartConfig.series.forEach(function(seriArgs,i){var matchingAxis=seriArgs.valueAxis===axis.axisConfig.get("id")||!seriArgs.valueAxis&&first;matchingAxis&&(_this.shouldBeStacked(seriArgs)||axis.axisConfig.get("scale.stacked"))&&matchingSeries.push(series[i])});return matchingSeries}},{key:"stackChartData",value:function stackChartData(handler,data,chartConfig){var _this2=this;var stackedData={};handler.valueAxes.forEach(function(axis,i){var id=axis.axisConfig.get("id");stackedData[id]=_this2.getStackedSeries(chartConfig,axis,data,0===i);stackedData[id]=_this2.injectZeros(stackedData[id],handler.visConfig.get("orderBucketsBySum",false));axis.axisConfig.set("stackedSeries",stackedData[id].length);axis.stack(_lodash2.default.map(stackedData[id],"values"))});return stackedData}},{key:"stackData",value:function stackData(handler){var _this3=this;var data=this.data;if(data.rows||data.columns){var charts=data.rows?data.rows:data.columns;charts.forEach(function(chart,i){_this3.stackChartData(handler,chart.series,handler.visConfig.get("charts["+i+"]"))})}else this.stackChartData(handler,data.series,handler.visConfig.get("charts[0]"))}},{key:"getVisData",value:function getVisData(){var visData=void 0;visData=this.data.rows?this.data.rows:this.data.columns?this.data.columns:[this.data];return visData}},{key:"getGeoExtents",value:function getGeoExtents(){var visData=this.getVisData();return _lodash2.default.reduce(_lodash2.default.pluck(visData,"geoJson.properties"),function(minMax,props){return{min:Math.min(props.min,minMax.min),max:Math.max(props.max,minMax.max)}},{min:Infinity,max:-Infinity})}},{key:"pieData",value:function pieData(){if(!this.data.slices)return this.data.rows?this.data.rows:this.data.columns;return[this.data]}},{key:"get",value:function get(thing,def){var source=(this.data.rows||this.data.columns||[this.data])[0];return _lodash2.default.get(source,thing,def)}},{key:"hasNullValues",value:function hasNullValues(){var chartData=this.chartData();return chartData.some(function(chart){return chart.series.some(function(obj){return obj.values.some(function(d){return null===d.y})})})}},{key:"flatten",value:function flatten(){return(0,_lodash2.default)(this.chartData()).pluck("series").flattenDeep().pluck("values").flattenDeep().value()}},{key:"validateUserDefinedYMin",value:function validateUserDefinedYMin(val){if(!_lodash2.default.isNumber(val))throw new Error("validateUserDefinedYMin expects a number");return val}},{key:"returnNames",value:function returnNames(array,index,columns){var names=[];var self=this;_lodash2.default.forEach(array,function(obj){names.push({label:obj.name,values:obj,index:index});if(obj.children){var plusIndex=index+1;_lodash2.default.forEach(self.returnNames(obj.children,plusIndex,columns),function(namedObj){names.push(namedObj)})}});return names}},{key:"getNames",value:function getNames(data,columns){var slices=data.slices;if(slices.children){var namedObj=this.returnNames(slices.children,0,columns);return(0,_lodash2.default)(namedObj).sortBy(function(obj){return obj.index}).unique(function(d){return d.label}).value()}}},{key:"_removeZeroSlices",value:function _removeZeroSlices(slices){var self=this;if(!slices.children)return slices;slices=_lodash2.default.clone(slices);slices.children=slices.children.reduce(function(children,child){0!==child.size&&children.push(self._removeZeroSlices(child));return children},[]);return slices}},{key:"pieNames",value:function pieNames(data){var self=this;var names=[];_lodash2.default.forEach(data,function(obj){var columns=obj.raw?obj.raw.columns:void 0;obj.slices=self._removeZeroSlices(obj.slices);_lodash2.default.forEach(self.getNames(obj,columns),function(name){names.push(name)})});return _lodash2.default.uniq(names,"label")}},{key:"injectZeros",value:function injectZeros(data){var orderBucketsBySum=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return _injectZeros(data,this.data,orderBucketsBySum)}},{key:"xValues",value:function xValues(){var orderBucketsBySum=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return orderKeys(this.data,orderBucketsBySum)}},{key:"getLabels",value:function getLabels(){return _getLabels2(this.data)}},{key:"getColorFunc",value:function getColorFunc(){if("slices"===this.type)return this.getPieColorFunc();var defaultColors=this.uiState.get("vis.defaultColors");var overwriteColors=this.uiState.get("vis.colors");var colors=defaultColors?_lodash2.default.defaults({},overwriteColors,defaultColors):overwriteColors;return color(this.getLabels(),colors)}},{key:"getPieColorFunc",value:function getPieColorFunc(){return color(this.pieNames(this.getVisData()).map(function(d){return d.label}),this.uiState.get("vis.colors"))}},{key:"_normalizeOrdered",value:function _normalizeOrdered(){var data=this.getVisData();var self=this;data.forEach(function(d){if(!d.ordered||!d.ordered.date)return;var missingMin=null==d.ordered.min;var missingMax=null==d.ordered.max;if(missingMax||missingMin){var extent=_d2.default.extent(self.xValues());missingMin&&(d.ordered.min=extent[0]);missingMax&&(d.ordered.max=extent[1])}})}},{key:"mapDataExtents",value:function mapDataExtents(series){var values=_lodash2.default.map(series.rows,function(row){return row[row.length-1]});return[_lodash2.default.min(values),_lodash2.default.max(values)]}},{key:"maxNumberOfSeries",value:function maxNumberOfSeries(){return this.chartData().reduce(function(max,chart){return Math.max(max,chart.series.length)},0)}}]);return Data}();return Data}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _tooltip=__webpack_require__(4116);Object.defineProperty(exports,"Tooltip",{enumerable:true,get:function get(){return _tooltip.Tooltip}});Object.defineProperty(exports,"TooltipProvider",{enumerable:true,get:function get(){return _tooltip.TooltipProvider}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();exports.VislibVisualizationsChartProvider=VislibVisualizationsChartProvider;var _d=__webpack_require__(19);var _d2=_interopRequireDefault(_d);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _data_label=__webpack_require__(4119);var _dispatch=__webpack_require__(4120);var _tooltip=__webpack_require__(886);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function VislibVisualizationsChartProvider(Private){var Dispatch=Private(_dispatch.VislibLibDispatchProvider);var Tooltip=Private(_tooltip.TooltipProvider);var Chart=function(){function Chart(handler,el,chartData){_classCallCheck(this,Chart);this.handler=handler;this.chartEl=el;this.chartData=chartData;this.tooltips=[];var events=this.events=new Dispatch(handler);if(this.handler.visConfig&&this.handler.visConfig.get("addTooltip",false)){var $el=this.handler.el;var formatter=this.handler.data.get("tooltipFormatter");this.tooltip=new Tooltip("chart",$el,formatter,events);this.tooltips.push(this.tooltip)}this._addIdentifier=_lodash2.default.bind(this._addIdentifier,this)}_createClass(Chart,[{key:"render",value:function render(){var selection=_d2.default.select(this.chartEl);selection.selectAll("*").remove();selection.call(this.draw())}},{key:"_addIdentifier",value:function _addIdentifier(selection,labelProp){labelProp=labelProp||"label";var labels=this.handler.data.labels;function resolveLabel(datum){if(1===labels.length)return labels[0];if(datum[0])return datum[0][labelProp];return datum[labelProp]}selection.each(function(datum){var label=resolveLabel(datum);null!=label&&(0,_data_label.dataLabel)(this,label)})}},{key:"destroy",value:function destroy(){var selection=_d2.default.select(this.chartEl);this.events.removeAllListeners();this.tooltips.forEach(function(tooltip){tooltip.destroy()});selection.remove()}}]);return Chart}();return Chart}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getHeatmapColors=getHeatmapColors;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _colormaps=__webpack_require__(430);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function enforceBounds(x){return x<0?0:x>1?1:x}function interpolateLinearly(x,values){var xValues=[];var rValues=[];var gValues=[];var bValues=[];values.forEach(function(value){xValues.push(value[0]);rValues.push(value[1][0]);gValues.push(value[1][1]);bValues.push(value[1][2])});var i=1;while(xValues[i]<x)i++;var width=Math.abs(xValues[i-1]-xValues[i]);var scalingFactor=(x-xValues[i-1])/width;var r=rValues[i-1]+scalingFactor*(rValues[i]-rValues[i-1]);var g=gValues[i-1]+scalingFactor*(gValues[i]-gValues[i-1]);var b=bValues[i-1]+scalingFactor*(bValues[i]-bValues[i-1]);return[enforceBounds(r),enforceBounds(g),enforceBounds(b)]}function getHeatmapColors(value,colorSchemaName){if(!_lodash2.default.isNumber(value)||value<0||value>1)throw new Error("heatmap_color expects a number from 0 to 1 as first parameter");var colorSchema=_colormaps.vislibColorMaps[colorSchemaName];if(!colorSchema)throw new Error("invalid colorSchemaName provided");var color=interpolateLinearly(value,colorSchema);var r=Math.round(255*color[0]);var g=Math.round(255*color[1]);var b=Math.round(255*color[2]);return"rgb("+r+","+g+","+b+")"}function drawColormap(colorSchema){var width=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;var height=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;var canvas=document.createElement("canvas");canvas.width=width;canvas.height=height;var ctx=canvas.getContext("2d");for(var i=0;i<=width;i++){ctx.fillStyle=getHeatmapColors(i/width,colorSchema);ctx.fillRect(i,0,1,height)}return canvas}getHeatmapColors.prototype.drawColormap=drawColormap},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.dashboardContextProvider=dashboardContextProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _query_filter=__webpack_require__(274);__webpack_require__(476);var _courier=__webpack_require__(94);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function dashboardContextProvider(Private,getAppState){return function(){var appState=getAppState();var queryFilter=Private(_query_filter.FilterBarQueryFilterProvider);var bool={must:[],must_not:[]};if(!appState)return{bool:bool};var filterBarFilters=queryFilter.getFilters();var queryBarQuery=appState.query;if("lucene"===queryBarQuery.language){var query=(0,_courier.luceneStringToDsl)(queryBarQuery.query);query&&bool.must.push(query)}_lodash2.default.each(filterBarFilters,function(filter){var esFilter=_lodash2.default.omit(filter,function(val,key){if("meta"===key||"$"===key[0])return true;return false});if(filter.meta.disabled)return;if(filter.meta.negate){bool.must_not=bool.must_not||[];(esFilter.query||esFilter)&&bool.must_not.push((0,_courier.migrateFilter)(esFilter.query||esFilter))}else{bool.must=bool.must||[];(esFilter.query||esFilter)&&bool.must.push((0,_courier.migrateFilter)(esFilter.query||esFilter))}});return{bool:bool}}}},,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}var CONTROL_TYPES=exports.CONTROL_TYPES={LIST:"list",RANGE:"range"};exports.setControl=function setControl(controls,controlIndex,control){return[].concat(_toConsumableArray(controls.slice(0,controlIndex)),[control],_toConsumableArray(controls.slice(controlIndex+1)))};exports.addControl=function addControl(controls,control){return[].concat(_toConsumableArray(controls),[control])};exports.moveControl=function moveControl(controls,controlIndex,direction){var newIndex=void 0;newIndex=direction>=0?controlIndex+1:controlIndex-1;if(newIndex<0)return[].concat(_toConsumableArray(controls.slice(1)),[controls[0]]);if(newIndex>=controls.length){var lastItemIndex=controls.length-1;return[controls[lastItemIndex]].concat(_toConsumableArray(controls.slice(0,lastItemIndex)))}var swapped=controls.slice();var temp=swapped[newIndex];swapped[newIndex]=swapped[controlIndex];swapped[controlIndex]=temp;return swapped};exports.removeControl=function removeControl(controls,controlIndex){return[].concat(_toConsumableArray(controls.slice(0,controlIndex)),_toConsumableArray(controls.slice(controlIndex+1)))};var getDefaultOptions=exports.getDefaultOptions=function getDefaultOptions(type){var defaultOptions={};switch(type){case CONTROL_TYPES.RANGE:defaultOptions.decimalPlaces=0;defaultOptions.step=1;break;case CONTROL_TYPES.LIST:defaultOptions.type="terms";defaultOptions.multiselect=true;defaultOptions.dynamicOptions=true;defaultOptions.size=5;defaultOptions.order="desc"}return defaultOptions};exports.newControl=function newControl(type){return{id:(new Date).getTime().toString(),indexPattern:"",fieldName:"",parent:"",label:"",type:type,options:getDefaultOptions(type)}};exports.getTitle=function getTitle(controlParams,controlIndex){var title=controlParams.type+": "+controlIndex;controlParams.label?title=""+controlParams.label:controlParams.fieldName&&(title=""+controlParams.fieldName);return title}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.defaultFeedbackMessage='Have feedback? Please create an issue in\n<a href="https://github.com/elastic/kibana/issues/new" rel="noopener noreferrer" target="_blank">GitHub</a>.'},function(module,exports,__webpack_require__){"use strict";var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var __importDefault=(void 0,function(mod){return mod&&mod.__esModule?mod:{default:mod}});Object.defineProperty(exports,"__esModule",{value:true});var chrome_1=__importDefault(__webpack_require__(8));var query_filter_1=__webpack_require__(274);var embedded_visualize_handler_1=__webpack_require__(4524);var VisualizeLoader=function(){function VisualizeLoader(savedVisualizations,Private){_classCallCheck(this,VisualizeLoader);this.savedVisualizations=savedVisualizations;this.Private=Private}_createClass(VisualizeLoader,[{key:"embedVisualizationWithId",value:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(element,savedVisualizationId,params){var _this=this;return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.abrupt("return",new Promise(function(resolve,reject){_this.savedVisualizations.get(savedVisualizationId).then(function(savedObj){var handler=_this.renderVis(element,savedObj,params);resolve(handler)},reject)}));case 1:case"end":return _context.stop()}},_callee,this)}));function embedVisualizationWithId(_x,_x2,_x3){return _ref.apply(this,arguments)}return embedVisualizationWithId}()},{key:"embedVisualizationWithSavedObject",value:function embedVisualizationWithSavedObject(el,savedObj,params){return this.renderVis(el,savedObj,params)}},{key:"getVisualizationList",value:function getVisualizationList(){return this.savedVisualizations.find().then(function(result){return result.hits})}},{key:"renderVis",value:function renderVis(container,savedObj,params){var vis=savedObj.vis,description=savedObj.description,searchSource=savedObj.searchSource;vis.description=description;vis.searchSource=searchSource;params.append||(container.innerHTML="");var element=document.createElement("div");element.className="visualize";element.setAttribute("data-test-subj","visualizationLoader");container.appendChild(element);params.cssClass&&params.cssClass.split(" ").forEach(function(cssClass){element.classList.add(cssClass)});var dataAttrs=params.dataAttrs;dataAttrs&&Object.keys(dataAttrs).forEach(function(key){element.setAttribute("data-"+key,dataAttrs[key])});var handlerParams=_extends({},params,{queryFilter:this.Private(query_filter_1.FilterBarQueryFilterProvider),Private:this.Private});return new embedded_visualize_handler_1.EmbeddedVisualizeHandler(element,savedObj,handlerParams)}}]);return VisualizeLoader}();function VisualizeLoaderProvider(savedVisualizations,Private){return new VisualizeLoader(savedVisualizations,Private)}exports.VisualizeLoaderProvider=VisualizeLoaderProvider;function getVisualizeLoader(){return chrome_1.default.dangerouslyGetActiveInjector().then(function($injector){var Private=$injector.get("Private");return Private(VisualizeLoaderProvider)})}exports.getVisualizeLoader=getVisualizeLoader},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VisRequestHandlersRegistryProvider=void 0;var _registry=__webpack_require__(107);exports.VisRequestHandlersRegistryProvider=(0,_registry.uiRegistry)({name:"visRequestHandlers",index:["name"],order:["title"]})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=calculateLabel;var _lodash=__webpack_require__(1);var _agg_lookup=__webpack_require__(1540);var _agg_lookup2=_interopRequireDefault(_agg_lookup);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var paths=["cumulative_sum","derivative","moving_average","avg_bucket","sum_bucket","min_bucket","max_bucket","std_deviation_bucket","variance_bucket","sum_of_squares_bucket","serial_diff","positive_only"];function calculateLabel(metric,metrics){if(!metric)return"Unknown";if(metric.alias)return metric.alias;if("count"===metric.type)return"Count";if("calculation"===metric.type)return"Bucket Script";if("math"===metric.type)return"Math";if("series_agg"===metric.type)return"Series Agg ("+metric.function+")";if("filter_ratio"===metric.type)return"Filter Ratio";if("static"===metric.type)return"Static Value of "+metric.value;if("percentile_rank"===metric.type)return _agg_lookup2.default[metric.type]+" ("+metric.value+") of "+metric.field;if((0,_lodash.includes)(paths,metric.type)){var additionalLabel="";var targetMetric=metrics.find(function(m){return(0,_lodash.startsWith)(metric.field,m.id)});var targetLabel=calculateLabel(targetMetric,metrics);if(targetMetric&&"percentile"===targetMetric.type){var percentileValueMatch=/\[([0-9\.]+)\]$/;var matches=metric.field.match(percentileValueMatch);matches&&(additionalLabel+=" ("+matches[1]+")")}return _agg_lookup2.default[metric.type]+" of "+targetLabel+additionalLabel}return _agg_lookup2.default[metric.type]+" of "+metric.field}module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();exports.default=calculateCoordinates;var _reactDom=__webpack_require__(15);var _calc_dimensions=__webpack_require__(4563);var _calc_dimensions2=_interopRequireDefault(_calc_dimensions);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function calculateCoordinates(innerRef,resizeRef,state){var inner=(0,_reactDom.findDOMNode)(innerRef);var resize=(0,_reactDom.findDOMNode)(resizeRef);var scale=state.scale;scale=resize.clientWidth-resize.clientHeight<0?resize.clientWidth/inner.clientWidth:resize.clientHeight/inner.clientHeight;var _calcDimensions=(0,_calc_dimensions2.default)(inner,scale),_calcDimensions2=_slicedToArray(_calcDimensions,2),newWidth=_calcDimensions2[0],newHeight=_calcDimensions2[1];newWidth>resize.clientWidth&&(scale=resize.clientWidth/inner.clientWidth);newHeight>resize.clientHeight&&(scale=resize.clientHeight/inner.clientHeight);var _calcDimensions3=(0,_calc_dimensions2.default)(inner,scale);var _calcDimensions4=_slicedToArray(_calcDimensions3,2);newWidth=_calcDimensions4[0];newHeight=_calcDimensions4[1];var translateX=(newWidth-inner.clientWidth)/2;var translateY=(newHeight-inner.clientHeight)/2;var top=Math.floor((resize.clientHeight-newHeight)/2);var left=Math.floor((resize.clientWidth-newWidth)/2);return{scale:scale,top:top,left:left,translateY:translateY,translateX:translateX}}module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _eui=__webpack_require__(3);var _durations=__webpack_require__(1534);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true}):obj[key]=value;return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var durationFormatTest=/[pnumshdwMY]+,[pnumshdwMY]+/;var DataFormatPicker=function(_Component){_inherits(DataFormatPicker,_Component);function DataFormatPicker(props){_classCallCheck(this,DataFormatPicker);var _this=_possibleConstructorReturn(this,(DataFormatPicker.__proto__||Object.getPrototypeOf(DataFormatPicker)).call(this,props));_this.handleChange=_this.handleChange.bind(_this);_this.handleCustomChange=_this.handleCustomChange.bind(_this);var from="ms";var to="ms";var decimals=2;if(durationFormatTest.test(props.value)){var _props$value$split=props.value.split(",");var _props$value$split2=_slicedToArray(_props$value$split,3);from=_props$value$split2[0];to=_props$value$split2[1];decimals=_props$value$split2[2]}_this.state={from:from,to:to,decimals:decimals};return _this}_createClass(DataFormatPicker,[{key:"handleCustomChange",value:function handleCustomChange(){this.props.onChange([{value:this.custom&&this.custom.value||""}])}},{key:"handleChange",value:function handleChange(selectedOptions){if(selectedOptions.length<1)return;if("custom"===selectedOptions[0].value)this.handleCustomChange();else if("duration"===selectedOptions[0].value){var _state=this.state,from=_state.from,to=_state.to,decimals=_state.decimals;this.props.onChange([{value:from+","+to+","+decimals}])}else this.props.onChange(selectedOptions)}},{key:"handleDurationChange",value:function handleDurationChange(name){var _this2=this;return function(selectedOptions){if(selectedOptions.length<1)return;var newValue=void 0;newValue="decimals"===name?_this2.decimals.value:selectedOptions[0].value;_this2.setState(_defineProperty({},name,newValue),function(){var _state2=_this2.state,from=_state2.from,to=_state2.to,decimals=_state2.decimals;_this2.props.onChange([{value:from+","+to+","+decimals}])})}}},{key:"render",value:function render(){var _this3=this;var value=this.props.value||"";var defaultValue=value;_lodash2.default.includes(["bytes","number","percent"],value)||(defaultValue="custom");durationFormatTest.test(value)&&(defaultValue="duration");var options=[{label:"Bytes",value:"bytes"},{label:"Number",value:"number"},{label:"Percent",value:"percent"},{label:"Duration",value:"duration"},{label:"Custom",value:"custom"}];var selectedOption=options.find(function(option){return defaultValue===option.value});var custom=void 0;if("duration"===defaultValue){var _value$split=value.split(","),_value$split2=_slicedToArray(_value$split,3),from=_value$split2[0],to=_value$split2[1],decimals=_value$split2[2];var selectedFrom=_durations.durationInputOptions.find(function(option){return from===option.value});var selectedTo=_durations.durationOutputOptions.find(function(option){return to===option.value});return _react2.default.createElement("div",{className:"vis_editor__data_format_picker-container"},_react2.default.createElement("div",{className:"vis_editor__label"},this.props.label),_react2.default.createElement("div",{className:"vis_editor__item"},_react2.default.createElement(_eui.EuiComboBox,{isClearable:false,options:options,selectedOptions:selectedOption?[selectedOption]:[],onChange:this.handleChange,singleSelection:true})),_react2.default.createElement("div",{className:"vis_editor__label"},"From"),_react2.default.createElement("div",{className:"vis_editor__item"},_react2.default.createElement(_eui.EuiComboBox,{isClearable:false,options:_durations.durationInputOptions,selectedOptions:selectedFrom?[selectedFrom]:[],onChange:this.handleDurationChange("from"),singleSelection:true})),_react2.default.createElement("div",{className:"vis_editor__label"},"To"),_react2.default.createElement("div",{className:"vis_editor__item"},_react2.default.createElement(_eui.EuiComboBox,{isClearable:false,options:_durations.durationOutputOptions,selectedOptions:selectedTo?[selectedTo]:[],onChange:this.handleDurationChange("to"),singleSelection:true})),_react2.default.createElement("div",{className:"vis_editor__label"},"Decimal Places"),_react2.default.createElement("input",{style:{width:60},className:"vis_editor__input",defaultValue:decimals,ref:function ref(el){return _this3.decimals=el},onChange:this.handleDurationChange("decimals"),type:"text"}))}"custom"===defaultValue&&(custom=_react2.default.createElement("div",{className:"vis_editor__data_format_picker-custom_row"},_react2.default.createElement("div",{className:"vis_editor__label"},"Format String (See ",_react2.default.createElement("a",{href:"http://numeraljs.com/#format",target:"_BLANK"},"Numeral.js"),")"),_react2.default.createElement("input",{style:{width:100},className:"vis_editor__input",defaultValue:value,ref:function ref(el){return _this3.custom=el},onChange:this.handleCustomChange,type:"text"})));return _react2.default.createElement("div",{className:"vis_editor__data_format_picker-container"},_react2.default.createElement("div",{className:"vis_editor__label"},this.props.label),_react2.default.createElement("div",{className:"vis_editor__item"},_react2.default.createElement(_eui.EuiComboBox,{isClearable:false,options:options,selectedOptions:selectedOption?[selectedOption]:[],onChange:this.handleChange,singleSelection:true})),custom)}}]);return DataFormatPicker}(_react.Component);DataFormatPicker.defaultProps={label:"Data Formatter"};DataFormatPicker.propTypes={value:_propTypes2.default.string,label:_propTypes2.default.string,onChange:_propTypes2.default.func};exports.default=DataFormatPicker;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _uuid=__webpack_require__(78);var _uuid2=_interopRequireDefault(_uuid);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function(){return{id:_uuid2.default.v1(),type:"count"}};module.exports=exports["default"]},,,,,,,,,,function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _modules=__webpack_require__(2);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _markdownIt=__webpack_require__(457);var _markdownIt2=_interopRequireDefault(_markdownIt);var _url=__webpack_require__(138);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var markdownIt=new _markdownIt2.default({html:false,linkify:true});_modules.uiModules.get("kibana").service("serviceSettings",function($http,$sanitize,mapConfig,tilemapsConfig,kbnVersion){var attributionFromConfig=$sanitize(markdownIt.render(tilemapsConfig.deprecated.config.options.attribution||""));var tmsOptionsFromConfig=_lodash2.default.assign({},tilemapsConfig.deprecated.config.options,{attribution:attributionFromConfig});var extendUrl=function extendUrl(url,props){return(0,_url.modifyUrl)(url,function(parsed){return _lodash2.default.merge(parsed,props)})};var unescapeTemplateVars=function unescapeTemplateVars(url){var ENCODED_TEMPLATE_VARS_RE=/%7B(\w+?)%7D/g;return url.replace(ENCODED_TEMPLATE_VARS_RE,function(total,varName){return"{"+varName+"}"})};var ServiceSettings=function(){function ServiceSettings(){_classCallCheck(this,ServiceSettings);this._queryParams={my_app_version:kbnVersion};this._loadCatalogue=null;this._loadFileLayers=null;this._loadTMSServices=null;this._invalidateSettings()}_createClass(ServiceSettings,[{key:"_invalidateSettings",value:function _invalidateSettings(){var _this=this;this._loadCatalogue=_lodash2.default.once(_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var response;return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(mapConfig.includeElasticMapsService){_context.next=2;break}return _context.abrupt("return",{services:[]});case 2:_context.prev=2;_context.next=5;return _this._getManifest(mapConfig.manifestServiceUrl,_this._queryParams);case 5:response=_context.sent;return _context.abrupt("return",response.data);case 9:_context.prev=9;_context.t0=_context["catch"](2);_context.t0||(_context.t0=new Error("Unknown error"));_context.t0 instanceof Error||(_context.t0=new Error(_context.t0.data||"status "+(_context.t0.statusText||_context.t0.status)));throw new Error("Could not retrieve manifest from the tile service: "+_context.t0.message);case 14:case"end":return _context.stop()}},_callee,_this,[[2,9]])})));this._loadFileLayers=_lodash2.default.once(_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var catalogue,fileService,manifest,layers;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _this._loadCatalogue();case 2:catalogue=_context2.sent;fileService=catalogue.services.find(function(service){return"file"===service.type});if(fileService){_context2.next=6;break}return _context2.abrupt("return",[]);case 6:_context2.next=8;return _this._getManifest(fileService.manifest,_this._queryParams);case 8:manifest=_context2.sent;layers=manifest.data.layers.filter(function(layer){return"geojson"===layer.format||"topojson"===layer.format});layers.forEach(function(layer){layer.url=_this._extendUrlWithParams(layer.url);layer.attribution=$sanitize(markdownIt.render(layer.attribution))});return _context2.abrupt("return",layers);case 12:case"end":return _context2.stop()}},_callee2,_this)})));this._loadTMSServices=_lodash2.default.once(_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var catalogue,tmsService,tmsManifest,preppedTMSServices;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _this._loadCatalogue();case 2:catalogue=_context3.sent;tmsService=catalogue.services.find(function(service){return"tms"===service.type});if(tmsService){_context3.next=6;break}return _context3.abrupt("return",[]);case 6:_context3.next=8;return _this._getManifest(tmsService.manifest,_this._queryParams);case 8:tmsManifest=_context3.sent;preppedTMSServices=tmsManifest.data.services.map(function(tmsService){var preppedService=_lodash2.default.cloneDeep(tmsService);preppedService.attribution=$sanitize(markdownIt.render(preppedService.attribution));preppedService.subdomains=preppedService.subdomains||[];preppedService.url=_this._extendUrlWithParams(preppedService.url);return preppedService});return _context3.abrupt("return",preppedTMSServices);case 11:case"end":return _context3.stop()}},_callee3,_this)})))}},{key:"_extendUrlWithParams",value:function _extendUrlWithParams(url){return unescapeTemplateVars(extendUrl(url,{query:this._queryParams}))}},{key:"_getManifest",value:function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(manifestUrl){return regeneratorRuntime.wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return _context4.abrupt("return",$http({url:extendUrl(manifestUrl,{query:this._queryParams}),method:"GET"}));case 1:case"end":return _context4.stop()}},_callee4,this)}));function _getManifest(_x){return _ref4.apply(this,arguments)}return _getManifest}()},{key:"getFileLayers",value:function(){var _ref5=_asyncToGenerator(regeneratorRuntime.mark(function _callee5(){return regeneratorRuntime.wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:_context5.next=2;return this._loadFileLayers();case 2:return _context5.abrupt("return",_context5.sent);case 3:case"end":return _context5.stop()}},_callee5,this)}));function getFileLayers(){return _ref5.apply(this,arguments)}return getFileLayers}()},{key:"getTMSServices",value:function(){var _ref6=_asyncToGenerator(regeneratorRuntime.mark(function _callee6(){var allServices,tmsService,servicesFromManifest;return regeneratorRuntime.wrap(function _callee6$(_context6){while(1)switch(_context6.prev=_context6.next){case 0:allServices=[];if(tilemapsConfig.deprecated.isOverridden){tmsService=_lodash2.default.cloneDeep(tmsOptionsFromConfig);tmsService.url=tilemapsConfig.deprecated.config.url;tmsService.id="TMS in config/kibana.yml";allServices.push(tmsService)}_context6.next=4;return this._loadTMSServices();case 4:servicesFromManifest=_context6.sent;return _context6.abrupt("return",allServices.concat(servicesFromManifest));case 6:case"end":return _context6.stop()}},_callee6,this)}));function getTMSServices(){return _ref6.apply(this,arguments)}return getTMSServices}()},{key:"addQueryParams",value:function addQueryParams(additionalQueryParams){for(var key in additionalQueryParams)if(additionalQueryParams.hasOwnProperty(key)&&additionalQueryParams[key]!==this._queryParams[key]){this._queryParams=_lodash2.default.assign({},this._queryParams,additionalQueryParams);this._invalidateSettings();break}}},{key:"getEMSHotLink",value:function getEMSHotLink(fileLayer){var id="file/"+fileLayer.name;return mapConfig.emsLandingPageUrl+"#"+id}}]);return ServiceSettings}();return new ServiceSettings})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.KibanaMapLayer=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _events=__webpack_require__(104);function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.KibanaMapLayer=function(_EventEmitter){_inherits(KibanaMapLayer,_EventEmitter);function KibanaMapLayer(){_classCallCheck(this,KibanaMapLayer);var _this=_possibleConstructorReturn(this,(KibanaMapLayer.__proto__||Object.getPrototypeOf(KibanaMapLayer)).call(this));_this._leafletLayer=null;return _this}_createClass(KibanaMapLayer,[{key:"getBounds",value:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.abrupt("return",this._leafletLayer.getBounds());case 1:case"end":return _context.stop()}},_callee,this)}));function getBounds(){return _ref.apply(this,arguments)}return getBounds}()},{key:"addToLeafletMap",value:function addToLeafletMap(leafletMap){this._leafletLayer.addTo(leafletMap)}},{key:"removeFromLeafletMap",value:function removeFromLeafletMap(leafletMap){leafletMap.removeLayer(this._leafletLayer)}},{key:"appendLegendContents",value:function appendLegendContents(){}},{key:"updateExtent",value:function updateExtent(){}},{key:"movePointer",value:function movePointer(){}},{key:"getAttributions",value:function getAttributions(){return this._attribution}}]);return KibanaMapLayer}(_events.EventEmitter)},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ScaledCirclesMarkers=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _leaflet=__webpack_require__(261);var _leaflet2=_interopRequireDefault(_leaflet);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _d=__webpack_require__(19);var _d2=_interopRequireDefault(_d);var _jquery=__webpack_require__(13);var _jquery2=_interopRequireDefault(_jquery);var _events=__webpack_require__(104);var _truncated_colormaps=__webpack_require__(522);var _color_util=__webpack_require__(1572);var colorUtil=_interopRequireWildcard(_color_util);function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);newObj.default=obj;return newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.ScaledCirclesMarkers=function(_EventEmitter){_inherits(ScaledCirclesMarkers,_EventEmitter);function ScaledCirclesMarkers(featureCollection,featureCollectionMetaData,options,targetZoom,kibanaMap,metricAgg){_classCallCheck(this,ScaledCirclesMarkers);var _this=_possibleConstructorReturn(this,(ScaledCirclesMarkers.__proto__||Object.getPrototypeOf(ScaledCirclesMarkers)).call(this));_this._featureCollection=featureCollection;_this._featureCollectionMetaData=featureCollectionMetaData;_this._zoom=targetZoom;_this._metricAgg=metricAgg;_this._valueFormatter=options.valueFormatter||function(x){x};_this._tooltipFormatter=options.tooltipFormatter||function(x){x};_this._label=options.label;_this._colorRamp=options.colorRamp;_this._legendColors=null;_this._legendQuantizer=null;_this._popups=[];var layerOptions={pointToLayer:_this.getMarkerFunction(),style:_this.getStyleFunction(),onEachFeature:function onEachFeature(feature,layer){_this._bindPopup(feature,layer)}};options.isFilteredByCollar||(layerOptions.filter=function(feature){var bucketRectBounds=feature.properties.geohash_meta.rectangle;return kibanaMap.isInside(bucketRectBounds)});_this._leafletLayer=_leaflet2.default.geoJson(null,layerOptions);_this._leafletLayer.addData(_this._featureCollection);return _this}_createClass(ScaledCirclesMarkers,[{key:"getLeafletLayer",value:function getLeafletLayer(){return this._leafletLayer}},{key:"getStyleFunction",value:function getStyleFunction(){var min=_lodash2.default.get(this._featureCollectionMetaData,"min",0);var max=_lodash2.default.get(this._featureCollectionMetaData,"max",1);var quantizeDomain=min!==max?[min,max]:_d2.default.scale.quantize().domain();this._legendColors=makeLegendColors(this._colorRamp);this._legendQuantizer=_d2.default.scale.quantize().domain(quantizeDomain).range(this._legendColors);return makeStyleFunction(this._legendColors,quantizeDomain)}},{key:"movePointer",value:function movePointer(){}},{key:"getLabel",value:function getLabel(){if(this._popups.length)return this._label;return""}},{key:"appendLegendContents",value:function appendLegendContents(jqueryDiv){var _this2=this;if(!this._legendColors||!this._legendQuantizer)return;var titleText=this.getLabel();var $title=(0,_jquery2.default)("<div>").addClass("tilemap-legend-title").text(titleText);jqueryDiv.append($title);this._legendColors.forEach(function(color){var labelText=_this2._legendQuantizer.invertExtent(color).map(_this2._valueFormatter).join(" ");var label=(0,_jquery2.default)("<div>");var icon=(0,_jquery2.default)("<i>").css({background:color,"border-color":makeColorDarker(color)});var text=(0,_jquery2.default)("<span>").text(labelText);label.append(icon);label.append(text);jqueryDiv.append(label)})}},{key:"_bindPopup",value:function _bindPopup(feature,layer){var _this3=this;var popup=layer.on({mouseover:function mouseover(e){var layer=e.target;_leaflet2.default.Browser.ie||_leaflet2.default.Browser.opera||layer.bringToFront();_this3._showTooltip(feature)},mouseout:function mouseout(){_this3.emit("hideTooltip")}});this._popups.push(popup)}},{key:"_showTooltip",value:function _showTooltip(feature){var content=this._tooltipFormatter(feature);if(!content)return;var latLng=_leaflet2.default.latLng(feature.geometry.coordinates[1],feature.geometry.coordinates[0]);this.emit("showTooltip",{content:content,position:latLng})}},{key:"getMarkerFunction",value:function getMarkerFunction(){var _this4=this;var scaleFactor=.6;return function(feature,latlng){var value=feature.properties.value;var scaledRadius=_this4._radiusScale(value)*scaleFactor;return _leaflet2.default.circleMarker(latlng).setRadius(scaledRadius)}}},{key:"_radiusScale",value:function _radiusScale(value){var precisionBiasBase=5;var precisionBiasNumerator=200;var precision=_lodash2.default.max(this._featureCollection.features.map(function(feature){return String(feature.properties.geohash).length}));var pct=Math.abs(value)/Math.abs(this._featureCollectionMetaData.max);var zoomRadius=.5*Math.pow(2,this._zoom);var precisionScale=precisionBiasNumerator/Math.pow(precisionBiasBase,precision);return Math.pow(pct,.5)*zoomRadius*precisionScale}},{key:"getBounds",value:function getBounds(){return this._leafletLayer.getBounds()}}]);return ScaledCirclesMarkers}(_events.EventEmitter);function makeLegendColors(colorRampKey){var colorRamp=_truncated_colormaps.truncatedColorMaps[colorRampKey];return colorUtil.getLegendColors(colorRamp)}function makeColorDarker(color){var amount=1.3;return _d2.default.hcl(color).darker(amount).toString()}function makeStyleFunction(legendColors,quantizeDomain){var legendQuantizer=_d2.default.scale.quantize().domain(quantizeDomain).range(legendColors);return function(feature){var value=_lodash2.default.get(feature,"properties.value");var color=legendQuantizer(value);return{fillColor:color,color:makeColorDarker(color),weight:1.5,opacity:1,fillOpacity:.75}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.tabifyAggResponse=tabifyAggResponse;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _response_writer=__webpack_require__(4747);var _buckets=__webpack_require__(4750);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function tabifyAggResponse(aggs,esResponse){var respOpts=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var write=new _response_writer.TabbedAggResponseWriter(aggs,respOpts);var topLevelBucket=_lodash2.default.assign({},esResponse.aggregations,{doc_count:esResponse.hits.total});collectBucket(write,topLevelBucket,"",1);return write.response()}function collectBucket(write,bucket,key,aggScale){var agg=write.aggStack.shift();var aggInfo=agg.write(write.aggs);aggScale*=aggInfo.metricScale||1;switch(agg.type.type){case"buckets":var buckets=new _buckets.TabifyBuckets(bucket[agg.id],agg.params);if(buckets.length){var splitting=write.canSplit&&"split"===agg.schema.name;splitting?write.split(agg,buckets,function forEachBucket(subBucket,key){collectBucket(write,subBucket,agg.getKey(subBucket,key),aggScale)}):buckets.forEach(function(subBucket,key){write.cell(agg,agg.getKey(subBucket,key),function(){collectBucket(write,subBucket,agg.getKey(subBucket,key),aggScale)},subBucket.filters)})}else if(write.partialRows&&write.metricsForAllBuckets&&write.minimalColumns){write.aggStack.unshift(agg);passEmptyBuckets(write,bucket,key,aggScale);write.aggStack.shift()}else write.row();break;case"metrics":var value=agg.getValue(bucket);1!==aggScale&&(value*=aggScale);write.cell(agg,value,function(){write.aggStack.length?collectBucket(write,bucket,key,aggScale):write.row()})}write.aggStack.unshift(agg)}function passEmptyBuckets(write,bucket,key,aggScale){var agg=write.aggStack.shift();switch(agg.type.type){case"metrics":write.aggStack.unshift(agg);collectBucket(write,bucket,key,aggScale);return;case"buckets":write.cell(agg,"",function(){passEmptyBuckets(write,bucket,key,aggScale)})}write.aggStack.unshift(agg)}},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VegaBaseView=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();exports.bypassExternalUrlCheck=bypassExternalUrlCheck;var _jquery=__webpack_require__(13);var _jquery2=_interopRequireDefault(_jquery);var _moment=__webpack_require__(10);var _moment2=_interopRequireDefault(_moment);var _datemath=__webpack_require__(83);var _datemath2=_interopRequireDefault(_datemath);var _vegaLib=__webpack_require__(665);var vega=_interopRequireWildcard(_vegaLib);var _vegaLite=__webpack_require__(1576);var vegaLite=_interopRequireWildcard(_vegaLite);var _utils=__webpack_require__(1578);var _eui=__webpack_require__(3);var _vega_tooltip=__webpack_require__(4769);var _lib=__webpack_require__(1340);function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);newObj.default=obj;return newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}vega.scheme("elastic",_eui.VISUALIZATION_COLORS);var vegaFunctions={kibanaAddFilter:"addFilterHandler",kibanaRemoveFilter:"removeFilterHandler",kibanaRemoveAllFilters:"removeAllFiltersHandler",kibanaSetTimeFilter:"setTimeFilterHandler"};var _loop=function _loop(funcName){vega.expressionFunction(funcName)||vega.expressionFunction(funcName,function handlerFwd(){for(var _len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];var view=this.context.dataflow;view.runAfter(function(){var _view$_kibanaView;return(_view$_kibanaView=view._kibanaView).vegaFunctionsHandler.apply(_view$_kibanaView,[funcName].concat(args))})})};var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=void 0;try{for(var _step,_iterator=Object.keys(vegaFunctions)[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var funcName=_step.value;_loop(funcName)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}var bypassToken=Symbol();function bypassExternalUrlCheck(url){return{url:url,bypassToken:bypassToken}}exports.VegaBaseView=function(){function VegaBaseView(opts){_classCallCheck(this,VegaBaseView);this._$rootScope=opts.$rootScope;this._vegaConfig=opts.vegaConfig;this._$parentEl=(0,_jquery2.default)(opts.parentEl);this._parser=opts.vegaParser;this._serviceSettings=opts.serviceSettings;this._queryfilter=opts.queryfilter;this._timefilter=opts.timefilter;this._findIndex=opts.findIndex;this._view=null;this._vegaViewConfig=null;this._$messages=null;this._destroyHandlers=[];this._initialized=false}_createClass(VegaBaseView,[{key:"init",value:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var _this=this;var _iteratorNormalCompletion2,_didIteratorError2,_iteratorError2,_iterator2,_step2,warn;return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!this._initialized){_context.next=2;break}throw new Error;case 2:this._initialized=true;_context.prev=3;this._$parentEl.empty().addClass("vega-main").css("flex-direction",this._parser.containerDir);_iteratorNormalCompletion2=true;_didIteratorError2=false;_iteratorError2=void 0;_context.prev=8;for(_iterator2=this._parser.warnings[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){warn=_step2.value;this._addMessage("warn",warn)}_context.next=16;break;case 12:_context.prev=12;_context.t0=_context["catch"](8);_didIteratorError2=true;_iteratorError2=_context.t0;case 16:_context.prev=16;_context.prev=17;!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return();case 19:_context.prev=19;if(!_didIteratorError2){_context.next=22;break}throw _iteratorError2;case 22:return _context.finish(19);case 23:return _context.finish(16);case 24:if(!this._parser.error){_context.next=27;break}this._addMessage("err",this._parser.error);return _context.abrupt("return");case 27:this._$container=(0,_jquery2.default)('<div class="vega-view-container">').appendTo(this._$parentEl);this._$controls=(0,_jquery2.default)('<div class="vega-controls-container">').css("flex-direction",this._parser.controlsDir).appendTo(this._$parentEl);this._addDestroyHandler(function(){if(_this._$container){_this._$container.remove();_this._$container=null}if(_this._$controls){_this._$controls.remove();_this._$controls=null}if(_this._$messages){_this._$messages.remove();_this._$messages=null}_this._view&&_this._view.finalize();_this._view=null});this._vegaViewConfig=this.createViewConfig();_context.next=33;return this._initViewCustomizations();case 33:_context.next=38;break;case 35:_context.prev=35;_context.t1=_context["catch"](3);this.onError(_context.t1);case 38:case"end":return _context.stop()}},_callee,this,[[3,35],[8,12,16,24],[17,,19,23]])}));function init(){return _ref.apply(this,arguments)}return init}()},{key:"createViewConfig",value:function createViewConfig(){var _this2=this;var config={logLevel:vega.Warn,renderer:this._parser.renderer};var loader=vega.loader();var originalSanitize=loader.sanitize.bind(loader);loader.sanitize=function(uri,options){if(uri.bypassToken===bypassToken)uri=uri.url;else if(!_this2._vegaConfig.enableExternalUrls)throw new Error("External URLs are not enabled. Add   vega.enableExternalUrls: true   to kibana.yml");return originalSanitize(uri,options)};config.loader=loader;return config}},{key:"onError",value:function onError(){this._addMessage("err",_utils.Utils.formatErrorToStr.apply(_utils.Utils,arguments))}},{key:"onWarn",value:function onWarn(){this._parser&&this._parser.hideWarnings||this._addMessage("warn",_utils.Utils.formatWarningToStr.apply(_utils.Utils,arguments))}},{key:"_addMessage",value:function _addMessage(type,text){this._$messages||(this._$messages=(0,_jquery2.default)('<ul class="vega-messages">').appendTo(this._$parentEl));this._$messages.append((0,_jquery2.default)('<li class="vega-message-'+type+'">').append((0,_jquery2.default)("<pre>").text(text)))}},{key:"resize",value:function resize(){if(this._parser.useResize&&this._view&&this.updateVegaSize(this._view))return this._view.runAsync()}},{key:"updateVegaSize",value:function updateVegaSize(view){var heightExtraPadding=6;var width=Math.max(0,this._$container.width()-this._parser.paddingWidth);var height=Math.max(0,this._$container.height()-this._parser.paddingHeight)-heightExtraPadding;if(view.width()!==width||view.height()!==height){view.width(width).height(height);return true}return false}},{key:"setView",value:function setView(view){if(this._view===view)return;this._view&&this._view.finalize();this._view=view;if(view){view._kibanaView=this;if(this._parser.tooltips){var tthandler=new _vega_tooltip.TooltipHandler(this._$container[0],view,this._parser.tooltips);this._addDestroyHandler(function(){return tthandler.hideTooltip()})}return view.runAsync()}}},{key:"vegaFunctionsHandler",value:function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(funcName){var handlerFunc,_len,args,_key,_args2=arguments;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;handlerFunc=vegaFunctions[funcName];if(!(!handlerFunc||!this[handlerFunc])){_context2.next=4;break}throw new Error(funcName+"() is not defined for this graph");case 4:for(_len=_args2.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=_args2[_key];_context2.next=7;return this[handlerFunc].apply(this,_toConsumableArray(args));case 7:_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2["catch"](0);this.onError(_context2.t0);case 12:case"end":return _context2.stop()}},_callee2,this,[[0,9]])}));function vegaFunctionsHandler(_x){return _ref2.apply(this,arguments)}return vegaFunctionsHandler}()},{key:"addFilterHandler",value:function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(query,index){var indexId,filter;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return this._findIndex(index);case 2:indexId=_context3.sent;filter=(0,_lib.buildQueryFilter)(query,indexId);_context3.next=6;return this._queryfilter.addFilters(filter);case 6:case"end":return _context3.stop()}},_callee3,this)}));function addFilterHandler(_x2,_x3){return _ref3.apply(this,arguments)}return addFilterHandler}()},{key:"removeFilterHandler",value:function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(query,index){var _this3=this;var indexId,filter;return regeneratorRuntime.wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.next=2;return this._findIndex(index);case 2:indexId=_context4.sent;filter=(0,_lib.buildQueryFilter)(query,indexId);this._$rootScope.$evalAsync(function(){try{_this3._queryfilter.removeFilter(filter)}catch(err){_this3.onError(err)}});case 5:case"end":return _context4.stop()}},_callee4,this)}));function removeFilterHandler(_x4,_x5){return _ref4.apply(this,arguments)}return removeFilterHandler}()},{key:"removeAllFiltersHandler",value:function removeAllFiltersHandler(){this._queryfilter.removeAll()}},{key:"setTimeFilterHandler",value:function setTimeFilterHandler(start,end){this._timefilter.setTime(VegaBaseView._parseTimeRange(start,end))}},{key:"setDebugValues",value:function setDebugValues(view,spec,vlspec){if(window){if(void 0===window.VEGA_DEBUG&&console){console.log("%cWelcome to Kibana Vega Plugin!","font-size: 16px; font-weight: bold;");console.log("You can access the Vega view with VEGA_DEBUG. Learn more at https://vega.github.io/vega/docs/api/debugging/.")}var debugObj={};window.VEGA_DEBUG=debugObj;window.VEGA_DEBUG.VEGA_VERSION=vega.version;window.VEGA_DEBUG.VEGA_LITE_VERSION=vegaLite.version;window.VEGA_DEBUG.view=view;window.VEGA_DEBUG.vega_spec=spec;window.VEGA_DEBUG.vegalite_spec=vlspec;this._addDestroyHandler(function(){debugObj===window.VEGA_DEBUG&&(window.VEGA_DEBUG=null)})}}},{key:"destroy",value:function destroy(){if(this._destroyHandlers){this._ongoingDestroy=Promise.all(this._destroyHandlers.map(function(v){return v()}));this._destroyHandlers=null}return this._ongoingDestroy}},{key:"_addDestroyHandler",value:function _addDestroyHandler(handler){this._destroyHandlers?this._destroyHandlers.push(handler):handler()}}],[{key:"_parseTimeRange",value:function _parseTimeRange(start,end){var absStart=(0,_moment2.default)(start);var absEnd=(0,_moment2.default)(end);var isValidAbsStart=absStart.isValid();var isValidAbsEnd=absEnd.isValid();var mode="absolute";var from=void 0;var to=void 0;var reverse=void 0;if(isValidAbsStart&&isValidAbsEnd){from=absStart;to=absEnd;reverse=absStart.isAfter(absEnd)}else{var startDate=_datemath2.default.parse(start);var endDate=_datemath2.default.parse(end);if(!startDate||!endDate||!startDate.isValid()||!endDate.isValid())throw new Error("Error setting time filter: both time values must be either relative or absolute dates. start="+JSON.stringify(start)+", end="+JSON.stringify(end));reverse=startDate.isAfter(endDate);if(isValidAbsStart||isValidAbsEnd){from=startDate;to=endDate}else{mode="relative";from=start;to=end}}if(reverse){var _ref5=[to,from];from=_ref5[0];to=_ref5[1]}return{from:from,to:to,mode:mode}}}]);return VegaBaseView}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.extractBuckets=extractBuckets;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function decorateWithKey(agg,bucket,key){var decorated=_lodash2.default.cloneDeep(bucket);decorated.key=agg?agg.getKey(bucket,key):key;return decorated}function extractBuckets(bucket,agg){if(bucket){if(_lodash2.default.isPlainObject(bucket.buckets))return _lodash2.default.map(bucket.buckets,function(value,key){return decorateWithKey(agg,value,key)});if(_lodash2.default.isArray(bucket.buckets))return bucket.buckets.map(function(value){return decorateWithKey(agg,value,value.key)})}return bucket&&bucket.buckets||[]}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DocViewsRegistryProvider=void 0;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _registry=__webpack_require__(107);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.DocViewsRegistryProvider=(0,_registry.uiRegistry)({name:"docViews",index:["name"],order:["order"],constructor:function constructor(){this.forEach(function(docView){docView.shouldShow=docView.shouldShow||_lodash2.default.constant(true);docView.name=docView.name||docView.title})}})},function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}Object.defineProperty(exports,"__esModule",{value:true});__export(__webpack_require__(906))},,,function(module,exports,__webpack_require__){__webpack_require__(4888)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isFilterable=isFilterable;exports.getFromSavedObject=getFromSavedObject;exports.getFromLegacyIndexPattern=getFromLegacyIndexPattern;var _kbn_field_types=__webpack_require__(1032);var filterableTypes=_kbn_field_types.KBN_FIELD_TYPES.filter(function(type){return type.filterable}).map(function(type){return type.name});function isFilterable(field){return filterableTypes.includes(field.type)}function getFromSavedObject(savedObject){if(!savedObject)return null;return{fields:JSON.parse(savedObject.attributes.fields),title:savedObject.attributes.title}}function getFromLegacyIndexPattern(indexPatterns){return indexPatterns.map(function(indexPattern){return{fields:indexPattern.fields.raw,title:indexPattern.title}})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.addAutocompleteProvider=addAutocompleteProvider;exports.getAutocompleteProvider=getAutocompleteProvider;var autocompleteProviders=new Map;function addAutocompleteProvider(language,provider){autocompleteProviders.set(language,provider)}function getAutocompleteProvider(language){return autocompleteProviders.get(language)}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(4894)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterUtils=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _moment=__webpack_require__(10);var _moment2=_interopRequireDefault(_moment);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.FilterUtils=function(){function FilterUtils(){_classCallCheck(this,FilterUtils)}_createClass(FilterUtils,null,[{key:"isQueryFilter",value:function isQueryFilter(filter){return filter.query&&!filter.meta}},{key:"getDashboardFilters",value:function getDashboardFilters(dashboard){return dashboard.searchSource.getOwnField("filter")}},{key:"getQueryFilterForDashboard",value:function getQueryFilterForDashboard(dashboard){if(dashboard.searchSource.getOwnField("query"))return dashboard.searchSource.getOwnField("query");var dashboardFilters=this.getDashboardFilters(dashboard);var dashboardQueryFilter=_lodash2.default.find(dashboardFilters,this.isQueryFilter);return dashboardQueryFilter?dashboardQueryFilter.query:""}},{key:"getFilterBarsForDashboard",value:function getFilterBarsForDashboard(dashboard){return _lodash2.default.reject(this.getDashboardFilters(dashboard),this.isQueryFilter)}},{key:"convertTimeToUTCString",value:function convertTimeToUTCString(time){return(0,_moment2.default)(time).isValid()?(0,_moment2.default)(time).utc():time}},{key:"areTimesEqual",value:function areTimesEqual(timeA,timeB){return this.convertTimeToUTCString(timeA)===this.convertTimeToUTCString(timeB)}},{key:"cleanFiltersForComparison",value:function cleanFiltersForComparison(filters){return _lodash2.default.map(filters,function(filter){return _lodash2.default.omit(filter,["$$hashKey","$state"])})}}]);return FilterUtils}()},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GlobalStateProvider=GlobalStateProvider;var _query_string=__webpack_require__(1019);var _state=__webpack_require__(714);var _modules=__webpack_require__(2);var _legacy_class=__webpack_require__(77);var _module=_modules.uiModules.get("kibana/global_state");function GlobalStateProvider(Private){var State=Private(_state.StateProvider);(0,_legacy_class.createLegacyClass)(GlobalState).inherits(State);function GlobalState(defaults){GlobalState.Super.call(this,"_g",defaults)}GlobalState.prototype._persistAcrossApps=true;GlobalState.prototype.removeFromUrl=function(url){return _query_string.QueryString.replaceParamInUrl(url,this._urlParam,null)};return new GlobalState}_module.service("globalState",function(Private){return Private(GlobalStateProvider)})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.QueryString=void 0;var _utils=__webpack_require__(396);var QueryString=exports.QueryString={};function tryDecodeURIComponent(value){try{return decodeURIComponent(value)}catch(e){}}QueryString.decode=function(keyValue){var obj={};var keyValueParts=void 0;var key=void 0;(keyValue||"").split("&").forEach(function(keyValue){if(keyValue){keyValueParts=keyValue.split("=");key=tryDecodeURIComponent(keyValueParts[0]);if(void 0!==key){var val=void 0===keyValueParts[1]||tryDecodeURIComponent(keyValueParts[1]);obj[key]?Array.isArray(obj[key])?obj[key].push(val):obj[key]=[obj[key],val]:obj[key]=val}}});return obj};QueryString.encode=function(obj){var parts=[];var keys=Object.keys(obj).sort();keys.forEach(function(key){var value=obj[key];Array.isArray(value)?value.forEach(function(arrayValue){parts.push(QueryString.param(key,arrayValue))}):parts.push(QueryString.param(key,value))});return parts.length?parts.join("&"):""};QueryString.param=function(key,val){return(0,_utils.encodeQueryComponent)(key,true)+(true===val?"":"="+(0,_utils.encodeQueryComponent)(val,true))};QueryString.findInUrl=function(url){var qsStart=url.indexOf("?");var hashStart=url.lastIndexOf("#");-1===hashStart&&(hashStart=url.length);-1===qsStart&&(qsStart=hashStart);return{start:qsStart,end:hashStart}};QueryString.replaceParamInUrl=function(url,param,newVal){var loc=QueryString.findInUrl(url);var parsed=QueryString.decode(url.substring(loc.start+1,loc.end));null!=newVal?parsed[param]=newVal:delete parsed[param];var chars=url.split("");chars.splice(loc.start,loc.end-loc.start,"?"+QueryString.encode(parsed));return chars.join("")}},,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.modifyUrl=modifyUrl;var _url=__webpack_require__(66);function modifyUrl(url,block){if("function"!==typeof block)throw new TypeError("You must pass a block to define the modifications desired");var parsed=(0,_url.parse)(url,true);var meaningfulParts={protocol:parsed.protocol,slashes:parsed.slashes,auth:parsed.auth,hostname:parsed.hostname,port:parsed.port,pathname:parsed.pathname,query:parsed.query||{},hash:parsed.hash};var modifiedParts=block(meaningfulParts)||meaningfulParts;return(0,_url.format)({protocol:modifiedParts.protocol,slashes:modifiedParts.slashes,auth:modifiedParts.auth,hostname:modifiedParts.hostname,port:modifiedParts.port,pathname:modifiedParts.pathname,query:modifiedParts.query,hash:modifiedParts.hash})}},,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _concat_stream_providers=__webpack_require__(1828);Object.defineProperty(exports,"concatStreamProviders",{enumerable:true,get:function get(){return _concat_stream_providers.concatStreamProviders}});var _intersperse_stream=__webpack_require__(1829);Object.defineProperty(exports,"createIntersperseStream",{enumerable:true,get:function get(){return _intersperse_stream.createIntersperseStream}});var _split_stream=__webpack_require__(1830);Object.defineProperty(exports,"createSplitStream",{enumerable:true,get:function get(){return _split_stream.createSplitStream}});var _list_stream=__webpack_require__(1831);Object.defineProperty(exports,"createListStream",{enumerable:true,get:function get(){return _list_stream.createListStream}});var _reduce_stream=__webpack_require__(1031);Object.defineProperty(exports,"createReduceStream",{enumerable:true,get:function get(){return _reduce_stream.createReduceStream}});var _json_streams=__webpack_require__(1832);Object.defineProperty(exports,"createJsonParseStream",{enumerable:true,get:function get(){return _json_streams.createJsonParseStream}});Object.defineProperty(exports,"createJsonStringifyStream",{enumerable:true,get:function get(){return _json_streams.createJsonStringifyStream}});var _promise_from_streams=__webpack_require__(1833);Object.defineProperty(exports,"createPromiseFromStreams",{enumerable:true,get:function get(){return _promise_from_streams.createPromiseFromStreams}});var _concat_stream=__webpack_require__(1834);Object.defineProperty(exports,"createConcatStream",{enumerable:true,get:function get(){return _concat_stream.createConcatStream}});var _map_stream=__webpack_require__(1835);Object.defineProperty(exports,"createMapStream",{enumerable:true,get:function get(){return _map_stream.createMapStream}});var _replace_stream=__webpack_require__(1836);Object.defineProperty(exports,"createReplaceStream",{enumerable:true,get:function get(){return _replace_stream.createReplaceStream}})},function(module,exports,__webpack_require__){"use strict";function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}Object.defineProperty(exports,"__esModule",{value:true});exports.createReduceStream=createReduceStream;var _stream=__webpack_require__(284);function createReduceStream(reducer,initial){var i=-1;var value=initial;var failed=false;if("function"!==typeof reducer)throw new TypeError("reducer must be a function");return new _stream.Transform({readableObjectMode:true,writableObjectMode:true,transform:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(chunk,enc,callback){return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;if(!failed){_context.next=3;break}return _context.abrupt("return",callback());case 3:i+=1;if(!(0===i&&void 0===initial)){_context.next=8;break}value=chunk;_context.next=11;break;case 8:_context.next=10;return reducer(value,chunk,enc);case 10:value=_context.sent;case 11:callback();_context.next=18;break;case 14:_context.prev=14;_context.t0=_context["catch"](0);failed=true;callback(_context.t0);case 18:case"end":return _context.stop()}},_callee,this,[[0,14]])}));function transform(_x,_x2,_x3){return _ref.apply(this,arguments)}return transform}(),flush:function flush(callback){failed||this.push(value);callback()}})}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:true});exports.getKbnFieldType=getKbnFieldType;exports.castEsToKbnFieldTypeName=castEsToKbnFieldTypeName;exports.getKbnTypeNames=getKbnTypeNames;var KbnFieldType=function KbnFieldType(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,KbnFieldType);var name=options.name,_options$sortable=options.sortable,sortable=void 0!==_options$sortable&&_options$sortable,_options$filterable=options.filterable,filterable=void 0!==_options$filterable&&_options$filterable,_options$esTypes=options.esTypes,esTypes=void 0===_options$esTypes?[]:_options$esTypes;Object.defineProperties(this,{name:{value:name},sortable:{value:sortable},filterable:{value:filterable},esTypes:{value:Object.freeze(esTypes.slice())}})};exports.KbnFieldType=KbnFieldType;var KBN_FIELD_TYPES=exports.KBN_FIELD_TYPES=[new KbnFieldType({name:"string",sortable:true,filterable:true,esTypes:["string","text","keyword","_type","_id"]}),new KbnFieldType({name:"number",sortable:true,filterable:true,esTypes:["float","half_float","scaled_float","double","integer","long","short","byte","token_count"]}),new KbnFieldType({name:"date",sortable:true,filterable:true,esTypes:["date"]}),new KbnFieldType({name:"ip",sortable:true,filterable:true,esTypes:["ip"]}),new KbnFieldType({name:"boolean",sortable:true,filterable:true,esTypes:["boolean"]}),new KbnFieldType({name:"geo_point",esTypes:["geo_point"]}),new KbnFieldType({name:"geo_shape",esTypes:["geo_shape"]}),new KbnFieldType({name:"attachment",esTypes:["attachment"]}),new KbnFieldType({name:"murmur3",esTypes:["murmur3"]}),new KbnFieldType({name:"_source",esTypes:["_source"]}),new KbnFieldType({name:"unknown"}),new KbnFieldType({name:"conflict"})];function getKbnFieldType(typeName){return KBN_FIELD_TYPES.find(function(type){return type.name===typeName})}function castEsToKbnFieldTypeName(esType){var type=KBN_FIELD_TYPES.find(function(type){return type.esTypes.includes(esType)});return type?type.name:"unknown"}function getKbnTypeNames(){return KBN_FIELD_TYPES.map(function(type){return type.name})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getPainlessError=exports.formatESMsg=void 0;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var getRootCause=function getRootCause(err){return _lodash2.default.get(err,"resp.error.root_cause")};exports.formatESMsg=function formatESMsg(err){var rootCause=getRootCause(err);if(!rootCause)return;var result=_lodash2.default.pluck(rootCause,"reason").join("\n");return result};exports.getPainlessError=function getPainlessError(err){var rootCause=getRootCause(err);if(!rootCause)return;var _rootCause$=rootCause[0],lang=_rootCause$.lang,script=_rootCause$.script;if("painless"!==lang)return;return{lang:lang,script:script,message:"Error with Painless scripted field '"+script+"'",error:err.message}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Notifier=Notifier;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _angular=__webpack_require__(16);var _angular2=_interopRequireDefault(_angular);var _markdownIt=__webpack_require__(457);var _markdownIt2=_interopRequireDefault(_markdownIt);var _metadata=__webpack_require__(91);var _lib=__webpack_require__(547);var _fatal_error=__webpack_require__(715);var _banners=__webpack_require__(1043);__webpack_require__(1044);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var notifs=[];var version=_metadata.metadata.version,buildNum=_metadata.metadata.buildNum;function closeNotif(notif){var cb=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_lodash2.default.noop;var key=arguments[2];return function(){var i=notifs.indexOf(notif);-1!==i&&notifs.splice(i,1);cancelTimer(notif);cb(key)}}function cancelTimer(notif){if(notif.timerId){Notifier.config.clearInterval(notif.timerId);notif.timerId=void 0}}function timerCanceler(notif){var cb=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_lodash2.default.noop;var key=arguments[2];return function cancelNotifTimer(){cancelTimer(notif);cb(key)}}function startNotifTimer(notif,cb){var interval=1e3;if(Infinity===notif.lifetime||0===notif.lifetime)return;notif.timeRemaining=Math.floor(notif.lifetime/interval);notif.timerId=Notifier.config.setInterval(function(){notif.timeRemaining-=1;notif.timeRemaining<=0&&closeNotif(notif,cb,"ignore")()},interval,notif.timeRemaining);notif.cancelTimer=timerCanceler(notif,cb)}function restartNotifTimer(notif,cb){cancelTimer(notif);startNotifTimer(notif,cb)}var typeToButtonClassMap={danger:"kuiButton--danger",info:"kuiButton--primary"};var buttonHierarchyClass=function buttonHierarchyClass(index){if(0===index)return"kuiButton--primary";return"kuiButton--basic"};var typeToAlertClassMap={danger:"alert-danger",info:"alert-info"};function add(notif,cb){_lodash2.default.set(notif,"info.version",version);_lodash2.default.set(notif,"info.buildNum",buildNum);notif.clear=closeNotif(notif);notif.actions?notif.actions.forEach(function(action){notif[action]=closeNotif(notif,cb,action)}):notif.customActions&&(notif.customActions=notif.customActions.map(function(action,index){return{key:action.text,dataTestSubj:action.dataTestSubj,callback:closeNotif(notif,action.callback,action.text),getButtonClass:function getButtonClass(){var buttonTypeClass=typeToButtonClassMap[notif.type];return buttonHierarchyClass(index)+" "+buttonTypeClass}}}));notif.count=(notif.count||0)+1;notif.isTimed=function isTimed(){return!!notif.timerId};notif.getButtonClass=function(){return typeToButtonClassMap[notif.type]};notif.getAlertClassStack=function(){return"toast-stack alert "+typeToAlertClassMap[notif.type]};notif.getIconClass=function(){return"fa fa-"+notif.icon};notif.getToastMessageClass=function(){return"toast-message"};notif.getAlertClass=function(){return"toast alert "+typeToAlertClassMap[notif.type]};notif.getButtonGroupClass=function(){return"toast-controls"};var dup=null;notif.content&&(dup=_lodash2.default.find(notifs,function(item){return item.content===notif.content&&item.lifetime===notif.lifetime}));if(dup){dup.count+=1;dup.stacks=_lodash2.default.union(dup.stacks,[notif.stack]);restartNotifTimer(dup,cb);return dup}startNotifTimer(notif,cb);notif.stacks=[notif.stack];notifs.push(notif);return notif}Notifier.prototype.add=add;function Notifier(opts){var self=this;opts=opts||{};self.from=opts.location;var notificationLevels=["error"];notificationLevels.forEach(function(m){self[m]=_lodash2.default.bind(self[m],self)})}Notifier.config={bannerLifetime:3e6,errorLifetime:3e5,infoLifetime:5e3,setInterval:window.setInterval,clearInterval:window.clearInterval};Notifier.applyConfig=function(config){_lodash2.default.merge(Notifier.config,config)};Notifier.QS_PARAM_MESSAGE="notif_msg";Notifier.QS_PARAM_LEVEL="notif_lvl";Notifier.QS_PARAM_LOCATION="notif_loc";Notifier.pullMessageFromUrl=function($location){var queryString=$location.search();if(!queryString.notif_msg)return;var message=queryString[Notifier.QS_PARAM_MESSAGE];var config=queryString[Notifier.QS_PARAM_LOCATION]?{location:queryString[Notifier.QS_PARAM_LOCATION]}:{};var level=queryString[Notifier.QS_PARAM_LEVEL]||"info";$location.search(Notifier.QS_PARAM_MESSAGE,null);$location.search(Notifier.QS_PARAM_LOCATION,null);$location.search(Notifier.QS_PARAM_LEVEL,null);var notifier=new Notifier(config);"fatal"===level?(0,_fatal_error.fatalError)(message):notifier[level](message)};Notifier.prototype._notifs=notifs;var overridableOptions=["lifetime","icon"];Notifier.prototype.error=function(err,opts,cb){if(_lodash2.default.isFunction(opts)){cb=opts;opts={}}var config=_lodash2.default.assign({type:"danger",content:(0,_lib.formatMsg)(err,this.from),icon:"warning",title:"Error",lifetime:Notifier.config.errorLifetime,actions:["report","accept"],stack:(0,_lib.formatStack)(err)},_lodash2.default.pick(opts,overridableOptions));return add(config,cb)};var bannerId=void 0;var bannerTimeoutId=void 0;Notifier.prototype.banner=function(){var content=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";var name=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";var BANNER_PRIORITY=100;var dismissBanner=function dismissBanner(){_banners.banners.remove(bannerId);clearTimeout(bannerTimeoutId)};var markdownIt=new _markdownIt2.default({html:false,linkify:true});var banner=_react2.default.createElement(_eui.EuiCallOut,{title:"Attention",iconType:"help"},_react2.default.createElement("div",{dangerouslySetInnerHTML:{__html:markdownIt.render(content)},"data-test-subj":name?"banner-"+name:null}),_react2.default.createElement(_eui.EuiButton,{type:"primary",size:"s",onClick:dismissBanner},"Dismiss"));bannerId=_banners.banners.set({component:banner,id:bannerId,priority:BANNER_PRIORITY});clearTimeout(bannerTimeoutId);bannerTimeoutId=setTimeout(function(){dismissBanner()},Notifier.config.bannerLifetime)};function getDecoratedCustomConfig(config){if(!_lodash2.default.isPlainObject(config))throw new Error("Config param is required, and must be an object");"error"===config.type&&(config.type="danger");var getLifetime=function getLifetime(type){switch(type){case"danger":return Notifier.config.errorLifetime;default:return Notifier.config.infoLifetime}};var customConfig=_lodash2.default.assign({type:"info",title:"Notification",lifetime:getLifetime(config.type)},config);var hasActions=_lodash2.default.get(customConfig,"actions.length");if(hasActions){customConfig.customActions=customConfig.actions;delete customConfig.actions}else customConfig.actions=["accept"];return customConfig}Notifier.prototype.directive=function(directive,config,cb){if(!_lodash2.default.isPlainObject(directive))throw new Error("Directive param is required, and must be an object");if(!Notifier.$compile)throw new Error("Unable to use the directive notification until Angular has initialized.");if(directive.scope)throw new Error("Directive should not have a scope definition. Notifier has an internal implementation.");if(directive.link)throw new Error("Directive should not have a link function. Notifier has an internal link function helper.");var localDirective=_lodash2.default.clone(directive,true);localDirective.scope={notif:"="};localDirective.link=function link($scope,$el){var $template=_angular2.default.element($scope.notif.directive.template);var postLinkFunction=Notifier.$compile($template);$el.html($template);postLinkFunction($scope)};var customConfig=getDecoratedCustomConfig(config);customConfig.directive=localDirective;return add(customConfig,cb)}},,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _global_banner_list=__webpack_require__(1901);Object.defineProperty(exports,"GlobalBannerList",{enumerable:true,get:function get(){return _global_banner_list.GlobalBannerList}});var _banners=__webpack_require__(1904);Object.defineProperty(exports,"banners",{enumerable:true,get:function get(){return _banners.banners}})},function(module,exports,__webpack_require__){"use strict";__webpack_require__(1905)},function(module,exports,__webpack_require__){"use strict";__webpack_require__(1907)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";var _markdownIt=__webpack_require__(457);var _markdownIt2=_interopRequireDefault(_markdownIt);var _modules=__webpack_require__(2);__webpack_require__(587);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var markdownIt=new _markdownIt2.default({html:false,linkify:true});_modules.uiModules.get("kibana",["ngSanitize"]).filter("markdown",function($sanitize){return function(md){return md?$sanitize(markdownIt.render(md)):""}})},,,,function(module,exports,__webpack_require__){"use strict";__webpack_require__(2754)},function(module,exports,__webpack_require__){"use strict";var _kbn_href=__webpack_require__(1239);(0,_kbn_href.kbnUrlDirective)("kbnSrc")},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.kbnUrlDirective=kbnUrlDirective;var _modules=__webpack_require__(2);var _lodash=__webpack_require__(1);function kbnUrlDirective(name){var attr=(0,_lodash.kebabCase)((0,_lodash.words)(name).slice(1));_modules.uiModules.get("kibana").directive(name,function(Private,chrome){return{restrict:"A",link:function link($scope,$el,$attr){$attr.$observe(name,function(val){$attr.$set(attr,chrome.addBasePath(val))})}}})}kbnUrlDirective("kbnHref")},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();exports.UrlOverflowServiceProvider=UrlOverflowServiceProvider;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var URL_MAX_IE=2e3;var URL_MAX_OTHERS=25e3;var IE_REGEX=exports.IE_REGEX=/(; ?MSIE |Edge\/\d|Trident\/[\d+\.]+;.*rv:*11\.\d+)/;var UrlOverflowService=exports.UrlOverflowService=function(){function UrlOverflowService(){var _this=this;_classCallCheck(this,UrlOverflowService);var key="error/url-overflow/url";var store=window.sessionStorage||{getItem:function getItem(){},setItem:function setItem(){},removeItem:function removeItem(){}};this._ieLike=IE_REGEX.test(window.navigator.userAgent);this._val=store.getItem(key);this._sync=function(){null==_this._val?store.removeItem(key):store.setItem(key,_this._val)}}_createClass(UrlOverflowService,[{key:"failLength",value:function failLength(){return this._ieLike?URL_MAX_IE:URL_MAX_OTHERS}},{key:"set",value:function set(v){this._val=v;this._sync()}},{key:"get",value:function get(){return this._val}},{key:"check",value:function check(absUrl){if(!this.get()){var urlLength=absUrl.length;var remaining=this.failLength()-urlLength;if(remaining>0)return remaining;this.set(absUrl)}throw new Error("\n      The URL has gotten too big and kibana can no longer\n      continue. Please refresh to return to your previous state.\n    ")}},{key:"clear",value:function clear(){this._val=void 0;this._sync()}}]);return UrlOverflowService}();function UrlOverflowServiceProvider(){return new UrlOverflowService}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RouteSetupManager=exports.WAIT_FOR_URL_CHANGE_TOKEN=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var WAIT_FOR_URL_CHANGE_TOKEN=exports.WAIT_FOR_URL_CHANGE_TOKEN=new Error("WAIT_FOR_URL_CHANGE_TOKEN");exports.RouteSetupManager=function(){function RouteSetupManager(){_classCallCheck(this,RouteSetupManager);this.setupWork=[];this.onSetupComplete=[];this.onSetupError=[];this.onWorkComplete=[];this.onWorkError=[]}_createClass(RouteSetupManager,[{key:"addSetupWork",value:function addSetupWork(fn){this.setupWork.push(fn)}},{key:"afterSetupWork",value:function afterSetupWork(onComplete,onError){this.onSetupComplete.push(onComplete);this.onSetupError.push(onError)}},{key:"afterWork",value:function afterWork(onComplete,onError){this.onWorkComplete.push(onComplete);this.onWorkError.push(onError)}},{key:"doWork",value:function doWork(Promise,$injector,userWork){var _this=this;var invokeEach=function invokeEach(arr,locals){return Promise.map(arr,function(fn){if(!fn)return;return $injector.invoke(fn,null,locals)})};var callErrorHandlers=function callErrorHandlers(handlers,origError){if(!_lodash2.default.size(handlers))throw origError;handlers=handlers.slice(0);var next=function next(err){if(!handlers.length)throw err;var handler=handlers.shift();if(!handler)return next(err);return Promise.try(function(){return $injector.invoke(handler,null,{err:err})}).catch(next)};return next(origError)};return invokeEach(this.setupWork).then(function(){return invokeEach(_this.onSetupComplete)},function(err){return callErrorHandlers(_this.onSetupError,err)}).then(function(){var defer=Promise.defer();userWork.resolveWhenFull(defer);return defer.promise.then(function(){return Promise.all(userWork.doWork())})}).catch(function(error){if(error===WAIT_FOR_URL_CHANGE_TOKEN)return Promise.halt();throw error}).then(function(){return invokeEach(_this.onWorkComplete)},function(err){return callErrorHandlers(_this.onWorkError,err)})}}]);return RouteSetupManager}()},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(2);_modules.uiModules.get("kibana").filter("uriescape",function(){return function(str){return encodeURIComponent(str)}})},function(module,exports,__webpack_require__){"use strict";var _risonNode=__webpack_require__(310);var _risonNode2=_interopRequireDefault(_risonNode);var _modules=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");_module.filter("rison",function(){return function(str){return _risonNode2.default.encode(str)}});_module.filter("risonDecode",function(){return function(str){return _risonNode2.default.decode(str)}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PersistedState=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _toPath=__webpack_require__(1021);var _toPath2=_interopRequireDefault(_toPath);var _errors=__webpack_require__(56);var _simple_emitter=__webpack_require__(588);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function prepSetParams(key,value,path){if(_lodash2.default.isUndefined(value)&&(_lodash2.default.isPlainObject(key)||path.length>0)){value=key;key=void 0}return{value:_lodash2.default.cloneDeep(value),key:key}}exports.PersistedState=function(){function PersistedState(value,path){var _this=this;var EmitterClass=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_simple_emitter.SimpleEmitter;_classCallCheck(this,PersistedState);EmitterClass.call(this);this._path=this._setPath(path);_lodash2.default.forOwn(EmitterClass.prototype,function(method,methodName){_this[methodName]=function(){return EmitterClass.prototype[methodName].apply(this,arguments)}});if(!this._path.length&&value&&!_lodash2.default.isPlainObject(value))throw new _errors.PersistedStateError("State value must be a plain object");value=value||this._getDefault();this.set(value);this._initialized=true}_createClass(PersistedState,[{key:"get",value:function get(key,def){return _lodash2.default.cloneDeep(this._get(key,def))}},{key:"set",value:function set(key,value){var params=prepSetParams(key,value,this._path);var val=this._set(params.key,params.value);this.emit("set");return val}},{key:"setSilent",value:function setSilent(key,value){var params=prepSetParams(key,value,this._path);return this._set(params.key,params.value,true)}},{key:"clearAllKeys",value:function clearAllKeys(){var _this2=this;Object.getOwnPropertyNames(this._changedState).forEach(function(key){_this2.set(key,null)})}},{key:"reset",value:function reset(path){var keyPath=this._getIndex(path);var origValue=_lodash2.default.get(this._defaultState,keyPath);var currentValue=_lodash2.default.get(this._mergedState,keyPath);_lodash2.default.isUndefined(origValue)?this._cleanPath(path,this._mergedState):_lodash2.default.set(this._mergedState,keyPath,origValue);this._cleanPath(path,this._changedState);_lodash2.default.isEqual(currentValue,origValue)||this.emit("change")}},{key:"getChanges",value:function getChanges(){return _lodash2.default.cloneDeep(this._changedState)}},{key:"toJSON",value:function toJSON(){return this.get()}},{key:"toString",value:function toString(){return JSON.stringify(this.toJSON())}},{key:"fromString",value:function fromString(input){return this.set(JSON.parse(input))}},{key:"_getIndex",value:function _getIndex(key){if(_lodash2.default.isUndefined(key))return this._path;return(this._path||[]).concat((0,_toPath2.default)(key))}},{key:"_getPartialIndex",value:function _getPartialIndex(key){var keyPath=this._getIndex(key);return keyPath.slice(this._path.length)}},{key:"_cleanPath",value:function _cleanPath(path,stateTree){var partialPath=this._getPartialIndex(path);var remove=true;while(partialPath.length>0){var lastKey=partialPath.splice(partialPath.length-1,1)[0];var statePath=this._path.concat(partialPath);var stateVal=statePath.length>0?_lodash2.default.get(stateTree,statePath):stateTree;if(!_lodash2.default.isPlainObject(stateVal))return;remove&&delete stateVal[lastKey];Object.keys(stateVal).length>0&&(remove=false)}}},{key:"_getDefault",value:function _getDefault(){return this._hasPath()?void 0:{}}},{key:"_setPath",value:function _setPath(path){var isString=_lodash2.default.isString(path);var isArray=Array.isArray(path);if(!isString&&!isArray)return[];return isString?[this._getIndex(path)]:path}},{key:"_hasPath",value:function _hasPath(){return this._path.length>0}},{key:"_get",value:function _get(key,def){if(!this._hasPath()&&_lodash2.default.isUndefined(key))return this._mergedState;return _lodash2.default.get(this._mergedState,this._getIndex(key),def)}},{key:"_set",value:function _set(key,value,silent){var self=this;var stateChanged=false;var initialState=!this._initialized;var keyPath=this._getIndex(key);var hasKeyPath=keyPath.length>0;if(initialState){this._changedState={};!this._hasPath()&&_lodash2.default.isUndefined(key)?this._defaultState=value:this._defaultState=_lodash2.default.set({},keyPath,value)}if(!initialState)if(!this._hasPath()&&_lodash2.default.isUndefined(key)){stateChanged=!_lodash2.default.isEqual(this._changedState,value);this._changedState=value;this._mergedState=_lodash2.default.cloneDeep(value)}else{var curVal=hasKeyPath?this.get(keyPath):this._mergedState;stateChanged=!_lodash2.default.isEqual(curVal,value);Array.isArray(_lodash2.default.get(this._mergedState,keyPath))&&(hasKeyPath?_lodash2.default.set(this._mergedState,keyPath,void 0):this._mergedState=void 0);hasKeyPath?_lodash2.default.set(this._changedState,keyPath,value):this._changedState=_lodash2.default.isPlainObject(value)?value:{}}var targetObj=this._mergedState||_lodash2.default.cloneDeep(this._defaultState);var sourceObj=_lodash2.default.merge({},this._changedState);var mergeMethod=function mergeMethod(targetValue,sourceValue,mergeKey){if(!initialState&&_lodash2.default.isEqual(keyPath,self._getIndex(mergeKey)))return _lodash2.default.isUndefined(sourceValue)?targetValue:sourceValue};this._mergedState=_lodash2.default.merge(targetObj,sourceObj,mergeMethod);_lodash2.default.isEqual(this._mergedState,this._defaultState)&&(this._changedState={});!silent&&stateChanged&&this.emit("change",key);return this}}]);return PersistedState}()},,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.unhashQueryString=unhashQueryString;var _lodash=__webpack_require__(1);function unhashQueryString(parsedQueryString,states){return(0,_lodash.mapValues)(parsedQueryString,function(val,key){var state=states.find(function(s){return key===s.getQueryParamName()});return state?state.translateHashToRison(val):val})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.chromeNavControlsRegistry=void 0;var _registry=__webpack_require__(107);exports.chromeNavControlsRegistry=(0,_registry.uiRegistry)({name:"chromeNavControls",order:["order"]})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.prependPath=prependPath;var _url=__webpack_require__(66);var _lodash=__webpack_require__(1);function prependPath(relativePath){var newPath=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!relativePath||!(0,_lodash.isString)(relativePath))return relativePath;var parsed=(0,_url.parse)(relativePath,true,true);!parsed.host&&parsed.pathname&&"/"===parsed.pathname[0]&&(parsed.pathname=newPath+parsed.pathname);return(0,_url.format)({protocol:parsed.protocol,host:parsed.host,pathname:parsed.pathname,query:parsed.query,hash:parsed.hash})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.relativeToAbsolute=relativeToAbsolute;function relativeToAbsolute(url){var a=document.createElement("a");a.setAttribute("href",url);return a.href}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.absoluteToParsedUrl=absoluteToParsedUrl;var _extract_app_path_and_id=__webpack_require__(2881);var _kibana_parsed_url=__webpack_require__(806);var _url=__webpack_require__(66);function absoluteToParsedUrl(absoluteUrl){var basePath=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";var _extractAppPathAndId=(0,_extract_app_path_and_id.extractAppPathAndId)(absoluteUrl,basePath),appPath=_extractAppPathAndId.appPath,appId=_extractAppPathAndId.appId;var _parse=(0,_url.parse)(absoluteUrl),hostname=_parse.hostname,port=_parse.port,protocol=_parse.protocol;return new _kibana_parsed_url.KibanaParsedUrl({basePath:basePath,appId:appId,appPath:appPath,hostname:hostname,port:port,protocol:protocol})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SavedObject=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.SavedObject=function(){function SavedObject(client){var _ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},id=_ref.id,type=_ref.type,version=_ref.version,attributes=_ref.attributes,error=_ref.error;_classCallCheck(this,SavedObject);this._client=client;this.id=id;this.type=type;this.attributes=attributes||{};this._version=version;error&&(this.error=error)}_createClass(SavedObject,[{key:"get",value:function get(key){return _lodash2.default.get(this.attributes,key)}},{key:"set",value:function set(key,value){return _lodash2.default.set(this.attributes,key,value)}},{key:"has",value:function has(key){return _lodash2.default.has(this.attributes,key)}},{key:"save",value:function save(){return this.id?this._client.update(this.type,this.id,this.attributes):this._client.create(this.type,this.attributes)}},{key:"delete",value:function _delete(){return this._client.delete(this.type,this.id)}}]);return SavedObject}()},function(module,exports,__webpack_require__){"use strict";var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var __importDefault=(void 0,function(mod){return mod&&mod.__esModule?mod:{default:mod}});Object.defineProperty(exports,"__esModule",{value:true});__webpack_require__(594);var lodash_1=__webpack_require__(1);var url_1=__importDefault(__webpack_require__(66));var chrome_1=__importDefault(__webpack_require__(8));var metadata_1=__webpack_require__(91);var FetchError=function(_Error){_inherits(FetchError,_Error);function FetchError(res,body){_classCallCheck(this,FetchError);var _this=_possibleConstructorReturn(this,(FetchError.__proto__||Object.getPrototypeOf(FetchError)).call(this,res.statusText));_this.res=res;_this.body=body;Error.captureStackTrace&&Error.captureStackTrace(_this,FetchError);return _this}return FetchError}(Error);function kfetch(fetchOptions,kibanaOptions){var _this2=this;var _lodash_1$merge=lodash_1.merge({method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json","kbn-version":metadata_1.metadata.version}},fetchOptions),pathname=_lodash_1$merge.pathname,query=_lodash_1$merge.query,combinedFetchOptions=_objectWithoutProperties(_lodash_1$merge,["pathname","query"]);var combinedKibanaOptions=_extends({prependBasePath:true},kibanaOptions);var fullUrl=url_1.default.format({pathname:combinedKibanaOptions.prependBasePath?chrome_1.default.addBasePath(pathname):pathname,query:query});var fetching=new Promise((_ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(resolve,reject){var res;return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(fullUrl,combinedFetchOptions);case 2:res=_context.sent;if(!res.ok){_context.next=9;break}_context.t0=resolve;_context.next=7;return res.json();case 7:_context.t1=_context.sent;return _context.abrupt("return",(0,_context.t0)(_context.t1));case 9:_context.prev=9;_context.t2=reject;_context.t3=FetchError;_context.t4=res;_context.next=15;return res.json();case 15:_context.t5=_context.sent;_context.t6=new _context.t3(_context.t4,_context.t5);return _context.abrupt("return",(0,_context.t2)(_context.t6));case 20:_context.prev=20;_context.t7=_context["catch"](9);return _context.abrupt("return",reject(new FetchError(res)));case 23:case"end":return _context.stop()}},_callee,_this2,[[9,20]])})),function(_x,_x2){return _ref.apply(this,arguments)}));var _ref;return fetching}exports.kfetch=kfetch},,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.timeHistory=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _moment=__webpack_require__(10);var _moment2=_interopRequireDefault(_moment);var _persisted_log=__webpack_require__(250);var _modes=__webpack_require__(1269);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var TimeHistory=function(){function TimeHistory(){_classCallCheck(this,TimeHistory);var historyOptions={maxLength:10,filterDuplicates:true};this.history=new _persisted_log.PersistedLog("kibana.timepicker.timeHistory",historyOptions)}_createClass(TimeHistory,[{key:"add",value:function add(time){if(!time)return;var justStringsTime={from:_moment2.default.isMoment(time.from)?time.from.toISOString():time.from,mode:_modes.TIME_MODES.RECENT,to:_moment2.default.isMoment(time.to)?time.to.toISOString():time.to};this.history.add(justStringsTime)}},{key:"get",value:function get(){return this.history.get()}}]);return TimeHistory}();exports.timeHistory=new TimeHistory},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PersistedLog=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _modules=__webpack_require__(2);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _storage=__webpack_require__(798);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var localStorage=new _storage.Storage(window.localStorage);var defaultIsDuplicate=function defaultIsDuplicate(oldItem,newItem){return _lodash2.default.isEqual(oldItem,newItem)};var PersistedLog=exports.PersistedLog=function(){function PersistedLog(name){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var storage=arguments.length>2&&void 0!==arguments[2]?arguments[2]:localStorage;_classCallCheck(this,PersistedLog);this.name=name;this.maxLength=parseInt(options.maxLength,10);this.filterDuplicates=options.filterDuplicates||false;this.isDuplicate=options.isDuplicate||defaultIsDuplicate;this.storage=storage;this.items=this.storage.get(this.name)||[];isNaN(this.maxLength)||(this.items=_lodash2.default.take(this.items,this.maxLength))}_createClass(PersistedLog,[{key:"add",value:function add(val){var _this=this;if(null==val)return this.items;this.filterDuplicates&&_lodash2.default.remove(this.items,function(item){return _this.isDuplicate(item,val)});this.items.unshift(val);isNaN(this.maxLength)||(this.items=_lodash2.default.take(this.items,this.maxLength));this.storage.set(this.name,this.items);return this.items}},{key:"get",value:function get(){return _lodash2.default.cloneDeep(this.items)}}]);return PersistedLog}();_modules.uiModules.get("kibana/persisted_log").factory("PersistedLog",function(){return PersistedLog})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TIME_MODES={ABSOLUTE:"absolute",QUICK:"quick",RECENT:"recent",RELATIVE:"relative"}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DebounceProvider=void 0;var _debounce=__webpack_require__(1271);Object.defineProperty(exports,"DebounceProvider",{enumerable:true,get:function get(){return _debounce.DebounceProvider}});__webpack_require__(1271)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DebounceProvider=DebounceProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _modules=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");_module.service("debounce",["$timeout",function($timeout){return function(func,wait,options){var timeout=void 0;var args=void 0;var self=void 0;var result=void 0;options=_lodash2.default.defaults(options||{},{leading:false,trailing:true,invokeApply:true});function debounce(){self=this;args=arguments;var later=function later(){timeout=null;options.leading&&!options.trailing||(result=func.apply(self,args))};var callNow=options.leading&&!timeout;timeout&&$timeout.cancel(timeout);timeout=$timeout(later,wait,options.invokeApply);callNow&&(result=func.apply(self,args));return result}debounce.cancel=function(){$timeout.cancel(timeout);timeout=null};return debounce}}]);function DebounceProvider(debounce){return debounce}},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.highlightTags={pre:"@kibana-highlighted-field@",post:"@/kibana-highlighted-field@"}},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.createDurationFormat=createDurationFormat;var _moment=__webpack_require__(10);var _moment2=_interopRequireDefault(_moment);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ratioToSeconds={picoseconds:1e-12,nanoseconds:1e-9,microseconds:1e-6};var HUMAN_FRIENDLY="humanize";var DEFAULT_OUTPUT_PRECISION=2;var DEFAULT_INPUT_FORMAT={text:"Seconds",kind:"seconds"};var inputFormats=[{text:"Picoseconds",kind:"picoseconds"},{text:"Nanoseconds",kind:"nanoseconds"},{text:"Microseconds",kind:"microseconds"},{text:"Milliseconds",kind:"milliseconds"},_extends({},DEFAULT_INPUT_FORMAT),{text:"Minutes",kind:"minutes"},{text:"Hours",kind:"hours"},{text:"Days",kind:"days"},{text:"Weeks",kind:"weeks"},{text:"Months",kind:"months"},{text:"Years",kind:"years"}];var DEFAULT_OUTPUT_FORMAT={text:"Human Readable",method:"humanize"};var outputFormats=[_extends({},DEFAULT_OUTPUT_FORMAT),{text:"Milliseconds",method:"asMilliseconds"},{text:"Seconds",method:"asSeconds"},{text:"Minutes",method:"asMinutes"},{text:"Hours",method:"asHours"},{text:"Days",method:"asDays"},{text:"Weeks",method:"asWeeks"},{text:"Months",method:"asMonths"},{text:"Years",method:"asYears"}];function parseInputAsDuration(val,inputFormat){var ratio=ratioToSeconds[inputFormat]||1;var kind=inputFormat in ratioToSeconds?"seconds":inputFormat;return _moment2.default.duration(val*ratio,kind)}function createDurationFormat(FieldFormat){var _class,_temp;return _temp=_class=function(_FieldFormat){_inherits(DurationFormat,_FieldFormat);function DurationFormat(){_classCallCheck(this,DurationFormat);return _possibleConstructorReturn(this,(DurationFormat.__proto__||Object.getPrototypeOf(DurationFormat)).apply(this,arguments))}_createClass(DurationFormat,[{key:"isHuman",value:function isHuman(){return this.param("outputFormat")===HUMAN_FRIENDLY}},{key:"getParamDefaults",value:function getParamDefaults(){return{inputFormat:DEFAULT_INPUT_FORMAT.kind,outputFormat:DEFAULT_OUTPUT_FORMAT.method,outputPrecision:DEFAULT_OUTPUT_PRECISION}}},{key:"_convert",value:function _convert(val){var inputFormat=this.param("inputFormat");var outputFormat=this.param("outputFormat");var outputPrecision=this.param("outputPrecision");var human=this.isHuman();var prefix=val<0&&human?"minus ":"";var duration=parseInputAsDuration(val,inputFormat);var formatted=duration[outputFormat]();var precise=human?formatted:formatted.toFixed(outputPrecision);return prefix+precise}}]);return DurationFormat}(FieldFormat),_class.id="duration",_class.title="Duration",_class.fieldType="number",_class.inputFormats=inputFormats,_class.outputFormats=outputFormats,_temp}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.noWhiteSpace=noWhiteSpace;var TAGS_WITH_WS=/>\s+</g;function noWhiteSpace(html){return html.replace(TAGS_WITH_WS,"><")}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.toJson=toJson;exports.replacer=replacer;var _lodash=__webpack_require__(1);function toJson(object,jsonFn,space){jsonFn&&(object=JSON.parse(jsonFn(object)));return JSON.stringify(object,replacer,space)}function replacer(key,value){return(0,_lodash.isString)(key)&&(0,_lodash.startsWith)(key,"$")?void 0:value}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DEFAULT_COLOR={range:Number.NEGATIVE_INFINITY+":"+Number.POSITIVE_INFINITY,regex:"<insert regex>",text:"#000000",background:"#ffffff"}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(2983);var _modules=__webpack_require__(2);var _saved_object_loader=__webpack_require__(601);var _saved_object_registry=__webpack_require__(413);var _saved_objects=__webpack_require__(57);var _module=_modules.uiModules.get("app/dashboard");_saved_object_registry.savedObjectManagementRegistry.register({service:"savedDashboards",title:"dashboards"});_module.service("savedDashboards",function(Private,SavedDashboard,kbnIndex,kbnUrl,$http,chrome){var savedObjectClient=Private(_saved_objects.SavedObjectsClientProvider);return new _saved_object_loader.SavedObjectLoader(SavedDashboard,kbnIndex,kbnUrl,$http,chrome,savedObjectClient)})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=MappingSetupService;var _angular=__webpack_require__(16);var _angular2=_interopRequireDefault(_angular);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function MappingSetupService(){var mappingSetup=this;var json={_serialize:function _serialize(val){if(null!=val)return _angular2.default.toJson(val)},_deserialize:function _deserialize(val){if(null!=val)return JSON.parse(val)}};mappingSetup.expandShorthand=function(sh){return _lodash2.default.mapValues(sh||{},function(val){"string"===typeof val&&(val={type:val});if("json"===val.type){val.type="text";val._serialize=json._serialize;val._deserialize=json._deserialize}return val})}}module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _search_request=__webpack_require__(1281);Object.defineProperty(exports,"SearchRequestProvider",{enumerable:true,get:function get(){return _search_request.SearchRequestProvider}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _search_request=__webpack_require__(2988);Object.defineProperty(exports,"SearchRequestProvider",{enumerable:true,get:function get(){return _search_request.SearchRequestProvider}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _search_strategy_registry=__webpack_require__(1283);Object.defineProperty(exports,"assignSearchRequestsToSearchStrategies",{enumerable:true,get:function get(){return _search_strategy_registry.assignSearchRequestsToSearchStrategies}});Object.defineProperty(exports,"addSearchStrategy",{enumerable:true,get:function get(){return _search_strategy_registry.addSearchStrategy}});Object.defineProperty(exports,"hasSearchStategyForIndexPattern",{enumerable:true,get:function get(){return _search_strategy_registry.hasSearchStategyForIndexPattern}});var _is_default_type_index_pattern=__webpack_require__(1284);Object.defineProperty(exports,"isDefaultTypeIndexPattern",{enumerable:true,get:function get(){return _is_default_type_index_pattern.isDefaultTypeIndexPattern}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var searchStrategies=[];var addSearchStrategy=function addSearchStrategy(searchStrategy){if(searchStrategies.includes(searchStrategy))return;searchStrategies.push(searchStrategy)};var getSearchStrategy=function getSearchStrategy(indexPattern){return searchStrategies.find(function(searchStrategy){return searchStrategy.isViable(indexPattern)})};var assignSearchRequestsToSearchStrategies=function assignSearchRequestsToSearchStrategies(searchRequests){var searchStrategiesWithRequests=[];var searchStrategyById={};searchRequests.forEach(function(searchRequest){var indexPattern=searchRequest.source.getField("index");var matchingSearchStrategy=getSearchStrategy(indexPattern);var id=matchingSearchStrategy.id;var searchStrategyWithRequest=searchStrategyById[id];if(!searchStrategyWithRequest){searchStrategyWithRequest={searchStrategy:matchingSearchStrategy,searchRequests:[]};searchStrategyById[id]=searchStrategyWithRequest;searchStrategiesWithRequests.push(searchStrategyWithRequest)}searchStrategyWithRequest.searchRequests.push(searchRequest)});return searchStrategiesWithRequests};var hasSearchStategyForIndexPattern=function hasSearchStategyForIndexPattern(indexPattern){return Boolean(getSearchStrategy(indexPattern))};exports.assignSearchRequestsToSearchStrategies=assignSearchRequestsToSearchStrategies;exports.addSearchStrategy=addSearchStrategy;exports.hasSearchStategyForIndexPattern=hasSearchStategyForIndexPattern},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isDefaultTypeIndexPattern=function isDefaultTypeIndexPattern(indexPattern){return null==indexPattern.type}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IsRequestProvider=IsRequestProvider;var _request=__webpack_require__(1280);function IsRequestProvider(Private){var SearchRequest=Private(_request.SearchRequestProvider);return function isRequest(obj){return obj instanceof SearchRequest}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _field_wildcard=__webpack_require__(3006);Object.defineProperty(exports,"FieldWildcardProvider",{enumerable:true,get:function get(){return _field_wildcard.FieldWildcardProvider}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _build_es_query=__webpack_require__(3009);Object.defineProperty(exports,"BuildESQueryProvider",{enumerable:true,get:function get(){return _build_es_query.BuildESQueryProvider}});var _from_filters=__webpack_require__(1293);Object.defineProperty(exports,"buildQueryFromFilters",{enumerable:true,get:function get(){return _from_filters.buildQueryFromFilters}});var _lucene_string_to_dsl=__webpack_require__(1295);Object.defineProperty(exports,"luceneStringToDsl",{enumerable:true,get:function get(){return _lucene_string_to_dsl.luceneStringToDsl}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.decorateQuery=decorateQuery;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _chrome=__webpack_require__(8);var _chrome2=_interopRequireDefault(_chrome);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var config=_chrome2.default.getUiSettingsClient();function decorateQuery(query){var queryOptions=config.get("query:queryString:options");_lodash2.default.has(query,"query_string.query")&&_lodash2.default.extend(query.query_string,queryOptions);return query}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _ast=__webpack_require__(270);Object.keys(_ast).forEach(function(key){if("default"===key||"__esModule"===key)return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _ast[key]}})});var _filter_migration=__webpack_require__(3024);Object.keys(_filter_migration).forEach(function(key){if("default"===key||"__esModule"===key)return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _filter_migration[key]}})});var _node_types=__webpack_require__(140);Object.keys(_node_types).forEach(function(key){if("default"===key||"__esModule"===key)return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _node_types[key]}})})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.fromLiteralExpression=fromLiteralExpression;exports.fromLegacyKueryExpression=fromLegacyKueryExpression;exports.fromKueryExpression=fromKueryExpression;exports.toElasticsearchQuery=toElasticsearchQuery;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _index=__webpack_require__(140);var _errors=__webpack_require__(1292);var errors=_interopRequireWildcard(_errors);var _kuery=__webpack_require__(3022);var _legacy_kuery=__webpack_require__(3023);function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);newObj.default=obj;return newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function fromLiteralExpression(expression,parseOptions){parseOptions=_extends({},parseOptions,{startRule:"Literal"});return fromExpression(expression,parseOptions,_kuery.parse)}function fromLegacyKueryExpression(expression,parseOptions){return fromExpression(expression,parseOptions,_legacy_kuery.parse)}function fromKueryExpression(expression,parseOptions){return fromExpression(expression,parseOptions,_kuery.parse)}function fromExpression(expression){var parseOptions=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var parse=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_kuery.parse;if(_lodash2.default.isUndefined(expression))throw new Error("expression must be a string, got undefined instead");parseOptions=_extends({},parseOptions,{helpers:{nodeTypes:_index.nodeTypes,errors:errors}});return parse(expression,parseOptions)}function toElasticsearchQuery(node,indexPattern){if(!node||!node.type||!_index.nodeTypes[node.type])return toElasticsearchQuery(_index.nodeTypes.function.buildNode("and",[]));return _index.nodeTypes[node.type].toElasticsearchQuery(node,indexPattern)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getFields=getFields;var _literal=__webpack_require__(599);var literal=_interopRequireWildcard(_literal);var _wildcard=__webpack_require__(814);var wildcard=_interopRequireWildcard(_wildcard);function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);newObj.default=obj;return newObj}function getFields(node,indexPattern){if("literal"===node.type){var fieldName=literal.toElasticsearchQuery(node);var field=indexPattern.fields.find(function(field){return field.name===fieldName});if(!field)return[];return[field]}if("wildcard"===node.type){var fields=indexPattern.fields.filter(function(field){return wildcard.test(node,field.name)});return fields}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NoLeadingWildcardsError=void 0;var _errors=__webpack_require__(56);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.NoLeadingWildcardsError=function(_KbnError){_inherits(NoLeadingWildcardsError,_KbnError);function NoLeadingWildcardsError(){_classCallCheck(this,NoLeadingWildcardsError);return _possibleConstructorReturn(this,(NoLeadingWildcardsError.__proto__||Object.getPrototypeOf(NoLeadingWildcardsError)).call(this,"Leading wildcards are disabled. See query:allowLeadingWildcards in Advanced Settings.",NoLeadingWildcardsError))}return NoLeadingWildcardsError}(_errors.KbnError)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildQueryFromFilters=buildQueryFromFilters;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _migrate_filter=__webpack_require__(1294);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var filterNegate=function filterNegate(reverse){return function(filter){if(_lodash2.default.isUndefined(filter.meta)||_lodash2.default.isUndefined(filter.meta.negate))return!reverse;return filter.meta&&filter.meta.negate===reverse}};var translateToQuery=function translateToQuery(filter){if(!filter)return;if(filter.query)return filter.query;return filter};var cleanFilter=function cleanFilter(filter){return _lodash2.default.omit(filter,["meta","$state"])};function buildQueryFromFilters(filters,decorateQuery,indexPattern){_lodash2.default.each(filters,function(filter){filter.query&&decorateQuery(filter.query)});return{must:(filters||[]).filter(filterNegate(false)).map(translateToQuery).map(cleanFilter).map(function(filter){return(0,_migrate_filter.migrateFilter)(filter,indexPattern)}),filter:[],should:[],must_not:(filters||[]).filter(filterNegate(true)).map(translateToQuery).map(cleanFilter).map(function(filter){return(0,_migrate_filter.migrateFilter)(filter,indexPattern)})}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.migrateFilter=migrateFilter;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _phrase=__webpack_require__(363);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true}):obj[key]=value;return obj}function migrateFilter(filter,indexPattern){if(filter.match){var fieldName=Object.keys(filter.match)[0];if(isMatchPhraseFilter(filter,fieldName)){var params=_lodash2.default.get(filter,["match",fieldName]);if(indexPattern){var field=indexPattern.fields.find(function(f){return f.name===fieldName});field&&(params.query=(0,_phrase.getConvertedValueForField)(field,params.query))}return{match_phrase:_defineProperty({},fieldName,_lodash2.default.omit(params,"type"))}}}return filter}function isMatchPhraseFilter(filter,fieldName){return"phrase"===_lodash2.default.get(filter,["match",fieldName,"type"])}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.luceneStringToDsl=luceneStringToDsl;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function luceneStringToDsl(query){if(!_lodash2.default.isString(query))return query;if(""===query.trim())return{match_all:{}};return{query_string:{query:query}}}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(3034);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _modules=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var plugins=[function(Client,config){var CustomAngularConnector=function(_config$connectionCla){_inherits(CustomAngularConnector,_config$connectionCla);function CustomAngularConnector(){var _ref;var _temp,_this,_ret;_classCallCheck(this,CustomAngularConnector);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=CustomAngularConnector.__proto__||Object.getPrototypeOf(CustomAngularConnector)).call.apply(_ref,[this].concat(args))),_this),_this.request=_lodash2.default.wrap(_this.request,function(request,params,cb){"GET"===String(params.method).toUpperCase()&&(params.query=_lodash2.default.defaults({_:Date.now()},params.query));return request.call(this,params,cb)}),_temp),_possibleConstructorReturn(_this,_ret)}return CustomAngularConnector}(config.connectionClass);config.connectionClass=CustomAngularConnector}];_modules.uiModules.get("kibana",["elasticsearch","kibana/config"]).service("es",function(esFactory,esUrl,esApiVersion,esRequestTimeout){return esFactory({host:esUrl,log:"info",requestTimeout:esRequestTimeout,apiVersion:esApiVersion,plugins:plugins})})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPatternsIntervalsProvider=IndexPatternsIntervalsProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _moment=__webpack_require__(10);var _moment2=_interopRequireDefault(_moment);var _indexed_array=__webpack_require__(249);var _numeric=__webpack_require__(817);var _timefilter=__webpack_require__(14);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function IndexPatternsIntervalsProvider(){var intervals=new _indexed_array.IndexedArray({index:["name"],initialSet:[{name:"hours",startOf:"hour",display:"Hourly"},{name:"days",startOf:"day",display:"Daily"},{name:"weeks",startOf:"isoWeek",display:"Weekly"},{name:"months",startOf:"month",display:"Monthly"},{name:"years",startOf:"year",display:"Yearly"}]});intervals.toIndexList=function(format,interval,a,b,sortDirection){var bounds=void 0;var range=[[a,"min","startOf"],[b,"max","startOf"]].map(function(v){var val=v[0];var bound=v[1];var extend=v[2];if(null==val){bounds=bounds||_timefilter.timefilter.getBounds();val=bounds[bound]}(0,_numeric.isNumeric)(val)?val=(0,_moment2.default)().add(val,interval.name):_moment2.default.isMoment(val)||(val=(0,_moment2.default)(val));return val.clone().utc()[extend](interval.startOf)}).sort(function(a,b){return a-b});if("string"===typeof interval){interval=_lodash2.default.find(intervals,{name:interval});if(!interval)throw new Error("Interval must be one of "+_lodash2.default.pluck(intervals,"name"))}var indexList=[];var start=range.shift();var stop=range.shift().valueOf();var add="desc"===sortDirection?"unshift":"push";while(start<=stop){var index=start.format(format);var next=(0,_moment2.default)(start).add(1,interval.name);var bound=(0,_moment2.default)(next).subtract(1,"ms");var min=start.valueOf();var max=bound.valueOf();indexList[add]({index:index,min:min,max:max});start=next}return indexList};return intervals}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FieldList=void 0;var _indexed_array=__webpack_require__(249);var _field=__webpack_require__(1299);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.FieldList=function(_IndexedArray){_inherits(FieldList,_IndexedArray);function FieldList(indexPattern,specs){_classCallCheck(this,FieldList);return _possibleConstructorReturn(this,(FieldList.__proto__||Object.getPrototypeOf(FieldList)).call(this,{index:["name"],group:["type"],initialSet:specs.map(function(field){return new _field.Field(indexPattern,field)})}))}return FieldList}(_indexed_array.IndexedArray)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Field=Field;var _obj_define=__webpack_require__(3039);var _field_format=__webpack_require__(596);var _field_formats=__webpack_require__(116);var _utils=__webpack_require__(396);var _shorten_dotted_string=__webpack_require__(598);var _notify=__webpack_require__(9);var _chrome=__webpack_require__(8);var _chrome2=_interopRequireDefault(_chrome);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function Field(indexPattern,spec){spec instanceof Field&&(spec=spec.$$spec);var obj=new _obj_define.ObjDefine(spec,Field.prototype);"_source"===spec.name&&(spec.type="_source");var type=(0,_utils.getKbnFieldType)(spec.type);spec.type&&!type&&_notify.toastNotifications.addDanger({title:"Unknown field type "+spec.type,text:"Field "+spec.name+" in indexPattern "+indexPattern.title+" is using an unknown field type."});type||(type=(0,_utils.getKbnFieldType)("unknown"));var format=spec.format;format&&format instanceof _field_format.FieldFormat||(format=indexPattern.fieldFormatMap[spec.name]||_field_formats.fieldFormats.getDefaultInstance(spec.type));var indexed=!!spec.indexed;var scripted=!!spec.scripted;var searchable=!!spec.searchable||scripted;var aggregatable=!!spec.aggregatable||scripted;var readFromDocValues=!!spec.readFromDocValues&&!scripted;var sortable="_score"===spec.name||(indexed||aggregatable)&&type.sortable;var filterable="_id"===spec.name||scripted||(indexed||searchable)&&type.filterable;var visualizable=aggregatable;obj.fact("name");obj.fact("type");obj.writ("count",spec.count||0);obj.fact("scripted",scripted);obj.writ("script",scripted?spec.script:null);obj.writ("lang",scripted?spec.lang||"painless":null);obj.fact("searchable",searchable);obj.fact("aggregatable",aggregatable);obj.fact("readFromDocValues",readFromDocValues);obj.comp("format",format);obj.comp("sortable",sortable);obj.comp("filterable",filterable);obj.comp("visualizable",visualizable);obj.comp("indexPattern",indexPattern);obj.comp("displayName",_chrome2.default.getUiSettingsClient().get("shortDots:enable")?(0,_shorten_dotted_string.shortenDottedString)(spec.name):spec.name);obj.comp("$$spec",spec);obj.writ("conflictDescriptions");return obj.create()}Object.defineProperties(Field.prototype,{indexed:{get:function get(){throw new Error("field.indexed has been removed, see https://github.com/elastic/kibana/pull/11969")}},analyzed:{get:function get(){throw new Error("field.analyzed has been removed, see https://github.com/elastic/kibana/pull/11969")}},doc_values:{get:function get(){throw new Error("field.doc_values has been removed, see https://github.com/elastic/kibana/pull/11969")}}});Field.prototype.routes={edit:"/management/kibana/indices/{{indexPattern.id}}/field/{{name}}"}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"===typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};exports.IndexPatternsPatternCacheProvider=IndexPatternsPatternCacheProvider;function IndexPatternsPatternCacheProvider(){var vals={};var validId=function validId(id){return"object"!==("undefined"===typeof id?"undefined":_typeof(id))};this.get=function(id){if(validId(id))return vals[id]};this.set=function(id,prom){validId(id)&&(vals[id]=prom);return prom};this.clear=this.delete=function(id){validId(id)&&delete vals[id]};this.clearAll=function(){for(var id in vals)vals.hasOwnProperty(id)&&delete vals[id]}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FieldsFetcherProvider=FieldsFetcherProvider;var _fields_fetcher=__webpack_require__(3041);var _index_patterns_api_client_provider=__webpack_require__(1302);function FieldsFetcherProvider(Private,config){var apiClient=Private(_index_patterns_api_client_provider.IndexPatternsApiClientProvider);return(0,_fields_fetcher.createFieldsFetcher)(apiClient,config)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPatternsApiClientProvider=IndexPatternsApiClientProvider;var _chrome=__webpack_require__(8);var _chrome2=_interopRequireDefault(_chrome);var _index_patterns_api_client=__webpack_require__(3042);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function IndexPatternsApiClientProvider($http){return(0,_index_patterns_api_client.createIndexPatternsApiClient)($http,_chrome2.default.getBasePath())}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BoundToConfigObjProvider=BoundToConfigObjProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function BoundToConfigObjProvider(config){function BoundToConfigObj(input){var self=this;_lodash2.default.forOwn(input,function(value,prop){if(!_lodash2.default.isString(value)||"="!==value.charAt(0)){self[prop]=value;return}var configKey=value.substr(1);config.watch(configKey,function update(value){self[prop]=value})})}return BoundToConfigObj}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.StringUtils=function(){function StringUtils(){_classCallCheck(this,StringUtils)}_createClass(StringUtils,null,[{key:"upperFirst",value:function upperFirst(str){return str?str.charAt(0).toUpperCase()+str.slice(1):""}}]);return StringUtils}()},function(module,exports,__webpack_require__){"use strict";var _typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"===typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};var _vis=__webpack_require__(1306);var _modules=__webpack_require__(2);var _vis_update_state=__webpack_require__(3160);var _visualize_constants=__webpack_require__(415);var _legacy_class=__webpack_require__(77);var _courier=__webpack_require__(94);_modules.uiModules.get("app/visualize").factory("SavedVis",function(config,$injector,Promise,savedSearches,Private){var Vis=Private(_vis.VisProvider);var SavedObject=Private(_courier.SavedObjectProvider);(0,_legacy_class.createLegacyClass)(SavedVis).inherits(SavedObject);function SavedVis(opts){var self=this;opts=opts||{};"object"!==("undefined"===typeof opts?"undefined":_typeof(opts))&&(opts={id:opts});SavedVis.Super.call(self,{type:SavedVis.type,mapping:SavedVis.mapping,searchSource:SavedVis.searchSource,id:opts.id,indexPattern:opts.indexPattern,defaults:{title:"New Visualization",visState:function(){if(!opts.type)return null;var def={};def.type=opts.type;return def}(),uiStateJSON:"{}",description:"",savedSearchId:opts.savedSearchId,version:1},afterESResp:this._afterEsResp});this.showInRecentlyAccessed=true}SavedVis.type="visualization";SavedVis.mapping={title:"text",visState:"json",uiStateJSON:"text",description:"text",savedSearchId:"keyword",version:"integer"};SavedVis.fieldOrder=["title","description"];SavedVis.searchSource=true;SavedVis.prototype.getFullPath=function(){return"/app/kibana#"+_visualize_constants.VisualizeConstants.EDIT_PATH+"/"+this.id};SavedVis.prototype._afterEsResp=function(){var self=this;return self._getLinkedSavedSearch().then(function(){self.searchSource.setField("size",0);return self.vis?self._updateVis():self._createVis()})};SavedVis.prototype._getLinkedSavedSearch=Promise.method(function(){var self=this;var linkedSearch=!!self.savedSearchId;var current=self.savedSearch;if(linkedSearch&&current&&current.id===self.savedSearchId)return;if(self.savedSearch){self.searchSource.setParent(self.savedSearch.searchSource.getParent());self.savedSearch.destroy();self.savedSearch=null}if(linkedSearch)return savedSearches.get(self.savedSearchId).then(function(savedSearch){self.savedSearch=savedSearch;self.searchSource.setParent(self.savedSearch.searchSource)})});SavedVis.prototype._createVis=function(){var self=this;self.visState=(0,_vis_update_state.updateOldState)(self.visState);self.visState&&(self.visState.title=self.title);self.vis=new Vis(self.searchSource.getField("index"),self.visState);return self.vis};SavedVis.prototype._updateVis=function(){var self=this;self.vis.indexPattern=self.searchSource.getField("index");self.visState.title=self.title;self.vis.setState(self.visState)};return SavedVis})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _vis=__webpack_require__(3050);Object.defineProperty(exports,"VisProvider",{enumerable:true,get:function get(){return _vis.VisProvider}})},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(2);_modules.uiModules.get("kibana").directive("validateAgg",function(){return{restrict:"A",require:"ngModel",scope:{ngModel:"=",agg:"="},link:function link($scope,elem,attr,ngModel){function validateAgg(aggValue){if(null==aggValue||"custom"===aggValue){ngModel.$setValidity("aggInput",true);return aggValue}try{$scope.agg.params.customMetric=null;$scope.agg.params.metricAgg=aggValue;$scope.agg.makeLabel();ngModel.$setValidity("aggInput",true)}catch(e){ngModel.$setValidity("aggInput",false)}return aggValue}ngModel.$parsers.unshift(validateAgg);ngModel.$formatters.unshift(validateAgg)}}})},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(2);var _lodash=__webpack_require__(1);_modules.uiModules.get("kibana").filter("label",function(){return function(str){return(0,_lodash.words)(str).map(_lodash.capitalize).join(" ")}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var field_filters_1=__webpack_require__(3054);exports.aggTypeFieldFilters=field_filters_1.aggTypeFieldFilters},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.percentilesMetricAgg=void 0;var _ordinal_suffix=__webpack_require__(1311);var _percentiles=__webpack_require__(3066);var _percentiles2=_interopRequireDefault(_percentiles);__webpack_require__(1312);var _metric_agg_type=__webpack_require__(67);var _get_response_agg_config_class=__webpack_require__(823);var _percentiles_get_value=__webpack_require__(1313);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var valueProps={makeLabel:function makeLabel(){var label=this.params.customLabel||this.getFieldDisplayName();return(0,_ordinal_suffix.ordinalSuffix)(this.key)+" percentile of "+label}};exports.percentilesMetricAgg=new _metric_agg_type.MetricAggType({name:"percentiles",title:"Percentiles",makeLabel:function makeLabel(agg){return"Percentiles of "+agg.getFieldDisplayName()},params:[{name:"field",filterFieldTypes:"number"},{name:"percents",editor:_percentiles2.default,default:[1,5,25,50,75,95,99]},{write:function write(agg,output){output.params.keyed=false}}],getResponseAggs:function getResponseAggs(agg){var ValueAggConfig=(0,_get_response_agg_config_class.getResponseAggConfigClass)(agg,valueProps);return agg.params.percents.map(function(percent){return new ValueAggConfig(percent)})},getValue:_percentiles_get_value.getPercentileValue})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ordinalSuffix=ordinalSuffix;function ordinalSuffix(num){return num+""+suffix(num)}function suffix(num){var int=Math.floor(parseFloat(num));var hunth=int%100;if(hunth>=11&&hunth<=13)return"th";var tenth=int%10;if(1===tenth)return"st";if(2===tenth)return"nd";if(3===tenth)return"rd";return"th"}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(3067)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getPercentileValue=getPercentileValue;var _lodash=__webpack_require__(1);function getPercentileValue(agg,bucket){var values=bucket[agg.parentId]&&bucket[agg.parentId].values;var percentile=(0,_lodash.find)(values,function(value){return agg.key===value.key});return percentile?percentile.value:NaN}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.safeMakeLabel=function safeMakeLabel(agg){try{return agg.makeLabel()}catch(e){return"- agg not valid -"}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function forwardModifyAggConfigOnSearchRequestStart(paramName){return function(aggConfig){for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];if(!aggConfig||!aggConfig.params)return;var nestedAggConfig=aggConfig.params[paramName];nestedAggConfig&&nestedAggConfig.type&&nestedAggConfig.type.params&&nestedAggConfig.type.params.forEach(function(param){param.modifyAggConfigOnSearchRequestStart&&param.modifyAggConfigOnSearchRequestStart.apply(param,[nestedAggConfig].concat(args))})}}exports.forwardModifyAggConfigOnSearchRequestStart=forwardModifyAggConfigOnSearchRequestStart},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.intervalOptions=[{display:"Auto",val:"auto",enabled:function enabled(agg){return agg.fieldIsTimeField()}},{display:"Millisecond",val:"ms"},{display:"Second",val:"s"},{display:"Minute",val:"m"},{display:"Hourly",val:"h"},{display:"Daily",val:"d"},{display:"Weekly",val:"w"},{display:"Monthly",val:"M"},{display:"Yearly",val:"y"},{display:"Custom",val:"custom"}]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.dateRange=void 0;var _moment=__webpack_require__(10);var _moment2=_interopRequireDefault(_moment);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.dateRange={toString:function toString(range,format){return range.from?range.to?format(range.from)+" to "+format(range.to):"After "+format(range.from):"Before "+format(range.to)},parse:function parse(rangeString,format){var chunks=rangeString.split(" to ");if(2===chunks.length)return{from:(0,_moment2.default)(chunks[0],format),to:(0,_moment2.default)(chunks[1],format)};chunks=rangeString.split("Before ");if(2===chunks.length)return{to:(0,_moment2.default)(chunks[1],format)};chunks=rangeString.split("After ");if(2===chunks.length)return{from:(0,_moment2.default)(chunks[1],format)};throw new Error("Error attempting to parse date range: "+rangeString)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=Ipv4Address;var NUM_BYTES=4;var BYTE_SIZE=256;function throwError(ipAddress){throw Error("Invalid IPv4 address: "+ipAddress)}function isIntegerInRange(integer,min,max){return!isNaN(integer)&&integer>=min&&integer<max&&integer%1===0}function Ipv4Address(ipAddress){this.value=ipAddress;if("string"===typeof ipAddress){this.value=0;var bytes=ipAddress.split(".");bytes.length!==NUM_BYTES&&throwError(ipAddress);for(var i=0;i<bytes.length;i++){var byte=Number(bytes[i]);isIntegerInRange(byte,0,BYTE_SIZE)||throwError(ipAddress);this.value+=Math.pow(BYTE_SIZE,NUM_BYTES-1-i)*byte}}isIntegerInRange(this.value,0,Math.pow(BYTE_SIZE,NUM_BYTES))||throwError(ipAddress)}Ipv4Address.prototype.toString=function(){var value=this.value;var bytes=[];for(var i=0;i<NUM_BYTES;i++){bytes.unshift(value%256);value=Math.floor(value/256)}return bytes.join(".")};Ipv4Address.prototype.valueOf=function(){return this.value};module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";var _cidr_mask=__webpack_require__(1320);var _modules=__webpack_require__(2);_modules.uiModules.get("kibana").directive("validateCidrMask",function(){return{restrict:"A",require:"ngModel",scope:{ngModel:"="},link:function link($scope,elem,attr,ngModel){ngModel.$parsers.unshift(validateCidrMask);ngModel.$formatters.unshift(validateCidrMask);function validateCidrMask(mask){if(null==mask||""===mask){ngModel.$setValidity("cidrMaskInput",true);return null}try{mask=new _cidr_mask.CidrMask(mask);ngModel.$setValidity("cidrMaskInput",true);return mask.toString()}catch(e){ngModel.$setValidity("cidrMaskInput",false)}}}}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CidrMask=CidrMask;var _ipv4_address=__webpack_require__(1318);var _ipv4_address2=_interopRequireDefault(_ipv4_address);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var NUM_BITS=32;function throwError(mask){throw Error("Invalid CIDR mask: "+mask)}function CidrMask(mask){var splits=mask.split("/");2!==splits.length&&throwError(mask);this.initialAddress=new _ipv4_address2.default(splits[0]);this.prefixLength=Number(splits[1]);(this.prefixLength<1||this.prefixLength>NUM_BITS)&&throwError(mask)}CidrMask.prototype.getRange=function(){var variableBits=NUM_BITS-this.prefixLength;var fromAddress=this.initialAddress.valueOf()>>variableBits<<variableBits>>>0;var numAddresses=Math.pow(2,variableBits);return{from:new _ipv4_address2.default(fromAddress).toString(),to:new _ipv4_address2.default(fromAddress+numAddresses-1).toString()}};CidrMask.prototype.toString=function(){return this.initialAddress.toString()+"/"+this.prefixLength}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createFilterTerms=createFilterTerms;var _phrase=__webpack_require__(363);var _phrases=__webpack_require__(605);var _exists=__webpack_require__(828);function createFilterTerms(aggConfig,key,params){var field=aggConfig.params.field;var indexPattern=field.indexPattern;if("__other__"===key){var terms=params.terms;var phraseFilter=(0,_phrases.buildPhrasesFilter)(field,terms,indexPattern);phraseFilter.meta.negate=true;var filters=[phraseFilter];terms.some(function(term){return"__missing__"===term})&&filters.push((0,_exists.buildExistsFilter)(field,indexPattern));return filters}if("__missing__"===key){var existsFilter=(0,_exists.buildExistsFilter)(field,indexPattern);existsFilter.meta.negate=true;return existsFilter}return(0,_phrase.buildPhraseFilter)(field,key,indexPattern)}},function(module,exports){module.exports='<div>\n  <div class="vis-editor-agg-form-row">\n    <div ng-if="agg.type.params.byName.order" class="form-group">\n      <label for="visEditorOrderByOrder{{agg.id}}">Order</label>\n      <select\n        id="visEditorOrderByOrder{{agg.id}}"\n        name="order"\n        ng-model="agg.params.order"\n        required\n        ng-options="opt as opt.display for opt in aggParam.options"\n        class="form-control">\n      </select>\n    </div>\n    <div class="form-group">\n      <label for="visEditorOrderBySize{{agg.id}}">Size</label>\n      <input\n        id="visEditorOrderBySize{{agg.id}}"\n        name="size"\n        ng-model="agg.params.size"\n        required\n        class="form-control"\n        type="number"\n        min="1"\n      >\n    </div>\n  </div>\n\n</div>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function getRequestInspectorStats(searchSource){var stats={};var index=searchSource.getField("index");if(index){stats["Index pattern"]={value:index.title,description:"The index pattern that connected to the Elasticsearch indices."};stats["Index pattern ID"]={value:index.id,description:"The ID in the .kibana index."}}return stats}function getResponseInspectorStats(searchSource,resp){var lastRequest=searchSource.history&&searchSource.history[searchSource.history.length-1];var stats={};resp&&resp.took&&(stats["Query time"]={value:resp.took+"ms",description:"The time it took to process the query.\n        Does not include the time to send the request or parse it in the browser."});resp&&resp.hits&&(stats.Hits={value:""+resp.hits.total,description:"The number of documents that match the query."});lastRequest&&(0===lastRequest.ms||lastRequest.ms)&&(stats["Request time"]={value:lastRequest.ms+"ms",description:"The time of the request from the browser to Elasticsearch and back.\n        Does not include the time the requested waited in the queue."});return stats}exports.getRequestInspectorStats=getRequestInspectorStats;exports.getResponseInspectorStats=getResponseInspectorStats},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildQueryFilter=buildQueryFilter;function buildQueryFilter(query,index){return{query:query,meta:{index:index}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.uniqFilters=uniqFilters;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _dedup_filters=__webpack_require__(1326);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function uniqFilters(filters,comparatorOptions){var results=[];_lodash2.default.each(filters,function(filter){results=_lodash2.default.union(results,(0,_dedup_filters.dedupFilters)(results,[filter],comparatorOptions))});return results}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.dedupFilters=dedupFilters;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _compare_filters=__webpack_require__(607);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function dedupFilters(existingFilters,filters,comparatorOptions){Array.isArray(filters)||(filters=[filters]);return _lodash2.default.filter(filters,function(filter){return!_lodash2.default.find(existingFilters,function(existingFilter){return(0,_compare_filters.compareFilters)(existingFilter,filter,comparatorOptions)})})}},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:true});var events_1=__webpack_require__(104);var InspectorViewRegistry=function(_events_1$EventEmitte){_inherits(InspectorViewRegistry,_events_1$EventEmitte);function InspectorViewRegistry(){_classCallCheck(this,InspectorViewRegistry);var _this=_possibleConstructorReturn(this,(InspectorViewRegistry.__proto__||Object.getPrototypeOf(InspectorViewRegistry)).apply(this,arguments));_this.views=[];return _this}_createClass(InspectorViewRegistry,[{key:"register",value:function register(view){if(!view)return;this.views.push(view);this.views.sort(function(a,b){return(a.order||Number.MAX_VALUE)-(b.order||Number.MAX_VALUE)});this.emit("change")}},{key:"getAll",value:function getAll(){return this.views}},{key:"getVisible",value:function getVisible(adapters){if(!adapters)return[];return this.views.filter(function(view){return!view.shouldShow||view.shouldShow(adapters)})}}]);return InspectorViewRegistry}(events_1.EventEmitter);exports.InspectorViewRegistry=InspectorViewRegistry;var viewRegistry=new InspectorViewRegistry;exports.viewRegistry=viewRegistry},function(module,exports,__webpack_require__){"use strict";var _eui=__webpack_require__(3);var _modules=__webpack_require__(2);_modules.uiModules.get("kibana").directive("kbnAccessibleClick",function(){return{restrict:"A",controller:function controller($element){$element.on("keydown",function(e){e.keyCode===_eui.keyCodes.SPACE&&e.preventDefault()})},link:function link(scope,element,attrs){var elementType=element.prop("tagName");if("BUTTON"===elementType)throw new Error("kbnAccessibleClick doesn't need to be used on a button.");if("A"===elementType&&void 0!==attrs.href)throw new Error("kbnAccessibleClick doesn't need to be used on a link if it has a href attribute.");if(!attrs.ngClick)throw new Error("kbnAccessibleClick requires ng-click to be defined on its element.");void 0===attrs.tabindex&&element.attr("tabindex","0");void 0===attrs.role&&element.attr("role","button");element.on("keyup",function(e){_eui.accessibleClickKeys[e.keyCode]&&element.click()})}}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();exports.KbnTopNavControllerProvider=KbnTopNavControllerProvider;var _lodash=__webpack_require__(1);var _chrome=__webpack_require__(8);var _chrome2=_interopRequireDefault(_chrome);var _filter=__webpack_require__(3212);var _filter2=_interopRequireDefault(_filter);var _interval=__webpack_require__(3213);var _interval2=_interopRequireDefault(_interval);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function KbnTopNavControllerProvider($compile){return function(){function KbnTopNavController(){var _this=this;var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];_classCallCheck(this,KbnTopNavController);this.setCurrent=function(key){if(key&&!_this.templates.hasOwnProperty(key))throw new TypeError('KbnTopNav: unknown template key "'+key+'"');_this.currentKey=key||null;_this._render()};this.getCurrent=function(){return _this.currentKey};this.isCurrent=function(key){return _this.getCurrent()===key};this.open=function(key){_this.setCurrent(key)};this.close=function(key){(!key||_this.isCurrent(key))&&_this.setCurrent(null)};this.toggle=function(key){_this.setCurrent(_this.isCurrent(key)?null:key)};this.click=function(key){_this.handleClick(_this.getItem(key))};this.getItem=function(key){return _this.menuItems.find(function(i){return i.key===key})};this.handleClick=function(menuItem){if(menuItem.disableButton())return false;menuItem.run(menuItem,_this)};if(opts instanceof KbnTopNavController)return opts;this.opts=[];this.menuItems=[];this.currentKey=null;this.templates={interval:_interval2.default,filter:_filter2.default};this.locals=new Map;this.addItems(opts)}_createClass(KbnTopNavController,[{key:"isVisible",value:function isVisible(){return _chrome2.default.getVisible()}},{key:"addItems",value:function addItems(rawOpts){var _this2=this;(0,_lodash.isArray)(rawOpts)||(rawOpts=[rawOpts]);rawOpts.forEach(function(rawOpt){var opt=_this2._applyOptDefault(rawOpt);if(!opt.key)throw new TypeError("KbnTopNav: menu items must have a key");_this2.opts.push(opt);opt.hideButton()||_this2.menuItems.push(opt);opt.template&&(_this2.templates[opt.key]=opt.template);opt.locals&&_this2.locals.set(opt.key,opt.locals)})}},{key:"_applyOptDefault",value:function _applyOptDefault(){var _this3=this;var opt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var defaultedOpt=_extends({label:(0,_lodash.capitalize)(opt.key),hasFunction:!!opt.run,description:opt.run?opt.key:"Toggle "+opt.key+" view",run:function run(item){return _this3.toggle(item.key)}},opt);defaultedOpt.hideButton=(0,_lodash.isFunction)(opt.hideButton)?opt.hideButton:function(){return!!opt.hideButton};defaultedOpt.disableButton=(0,_lodash.isFunction)(opt.disableButton)?opt.disableButton:function(){return!!opt.disableButton};defaultedOpt.tooltip=(0,_lodash.isFunction)(opt.tooltip)?opt.tooltip:function(){return opt.tooltip};return defaultedOpt}},{key:"_link",value:function _link($scope,$element){this.$scope=$scope;this.$element=$element;this._render()}},{key:"_render",value:function _render(){var $scope=this.$scope,$element=this.$element,rendered=this.rendered,currentKey=this.currentKey;var templateToRender=currentKey&&this.templates[currentKey];if(rendered){if(rendered.key===currentKey)return;rendered.$childScope.$destroy();rendered.$el.remove();this.rendered=null}if(!templateToRender||!$scope||!$element)return;var $childScope=$scope.$new();this.locals.has(currentKey)&&Object.assign($childScope,this.locals.get(currentKey));var $el=$element.find("#template_wrapper").html(templateToRender).contents();$compile($el)($childScope);this.rendered={$childScope:$childScope,$el:$el,key:currentKey}}}]);return KbnTopNavController}()}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DocTitleProvider=DocTitleProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _modules=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana").run(function($rootScope,docTitle){$rootScope.$on("$routeChangeStart",docTitle.reset);$rootScope.$on("$routeChangeError",docTitle.update);$rootScope.$on("$routeChangeSuccess",docTitle.update)}).service("docTitle",function(){var baseTitle=document.title;var self=this;var lastChange=void 0;function render(){lastChange=lastChange||[];var parts=[lastChange[0]];lastChange[1]||parts.push(baseTitle);return(0,_lodash2.default)(parts).flattenDeep().compact().join(" - ")}self.change=function(title,complete){lastChange=[title,complete];self.update()};self.reset=function(){lastChange=null};self.update=function(){document.title=render()}});function DocTitleProvider(docTitle){return docTitle}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.toggleFilterDisabled=exports.enableFilter=exports.disableFilter=void 0;var _disable_filter=__webpack_require__(1332);Object.defineProperty(exports,"disableFilter",{enumerable:true,get:function get(){return _disable_filter.disableFilter}});Object.defineProperty(exports,"enableFilter",{enumerable:true,get:function get(){return _disable_filter.enableFilter}});Object.defineProperty(exports,"toggleFilterDisabled",{enumerable:true,get:function get(){return _disable_filter.toggleFilterDisabled}});__webpack_require__(3221)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.disableFilter=disableFilter;exports.enableFilter=enableFilter;exports.toggleFilterDisabled=toggleFilterDisabled;function disableFilter(filter){return setFilterDisabled(filter,true)}function enableFilter(filter){return setFilterDisabled(filter,false)}function toggleFilterDisabled(filter){var _filter$meta=filter.meta;_filter$meta=void 0===_filter$meta?{}:_filter$meta;var _filter$meta$disabled=_filter$meta.disabled,disabled=void 0!==_filter$meta$disabled&&_filter$meta$disabled;return setFilterDisabled(filter,!disabled)}function setFilterDisabled(filter,disabled){var _filter$meta2=filter.meta,meta=void 0===_filter$meta2?{}:_filter$meta2;return _extends({},filter,{meta:_extends({},meta,{disabled:disabled})})}},function(module,exports,__webpack_require__){"use strict";var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _angular=__webpack_require__(16);var _angular2=_interopRequireDefault(_angular);var _modules=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana").directive("jsonInput",function(){return{restrict:"A",require:"ngModel",link:function link(scope,$el,attrs,ngModelCntrl){ngModelCntrl.$formatters.push(toJSON);ngModelCntrl.$parsers.push(fromJSON);function fromJSON(value){try{value=JSON.parse(value);var validity=!scope.$eval(attrs.requireKeys)||_lodash2.default.keys(value).length>0;ngModelCntrl.$setValidity("json",validity)}catch(e){ngModelCntrl.$setValidity("json",false)}return value}function toJSON(value){return _angular2.default.toJson(value,2)}}}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FILTER_OPERATOR_TYPES=exports.FILTER_OPERATORS=void 0;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var FILTER_OPERATORS=exports.FILTER_OPERATORS=[{name:"is",type:"phrase",negate:false},{name:"is not",type:"phrase",negate:true},{name:"is one of",type:"phrases",negate:false,fieldTypes:["string","number","date","ip","geo_point","geo_shape"]},{name:"is not one of",type:"phrases",negate:true,fieldTypes:["string","number","date","ip","geo_point","geo_shape"]},{name:"is between",type:"range",negate:false,fieldTypes:["number","date","ip"]},{name:"is not between",type:"range",negate:true,fieldTypes:["number","date","ip"]},{name:"exists",type:"exists",negate:false},{name:"does not exist",type:"exists",negate:true}];exports.FILTER_OPERATOR_TYPES=(0,_lodash2.default)(FILTER_OPERATORS).map("type").uniq().value()},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.sortPrefixFirst=sortPrefixFirst;var _lodash=__webpack_require__(1);function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function sortPrefixFirst(array,prefix,property){if(!prefix)return array;var lowerCasePrefix=(""+prefix).toLowerCase();var partitions=(0,_lodash.partition)(array,function(entry){var value=(""+(property?entry[property]:entry)).toLowerCase();return value.startsWith(lowerCasePrefix)});return[].concat(_toConsumableArray(partitions[0]),_toConsumableArray(partitions[1]))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.filterParamsPhraseController=filterParamsPhraseController;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _chrome=__webpack_require__(8);var _chrome2=_interopRequireDefault(_chrome);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var baseUrl=_chrome2.default.addBasePath("/api/kibana/suggestions/values");function filterParamsPhraseController($http,$scope,config){var _this=this;var shouldSuggestValues=this.shouldSuggestValues=config.get("filterEditor:suggestValues");this.compactUnion=_lodash2.default.flow(_lodash2.default.union,_lodash2.default.compact);this.getValueSuggestions=_lodash2.default.memoize(getValueSuggestions,getFieldQueryHash);this.refreshValueSuggestions=function(query){return _this.getValueSuggestions($scope.field,query).then(function(suggestions){return $scope.valueSuggestions=suggestions})};this.refreshValueSuggestions();function getValueSuggestions(field,query){if(!shouldSuggestValues||!_lodash2.default.get(field,"aggregatable")||"string"!==field.type)return Promise.resolve([]);var params={query:query,field:field.name};return $http.post(baseUrl+"/"+field.indexPattern.title,params).then(function(response){return response.data}).catch(function(){return[]})}function getFieldQueryHash(field){var query=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return field.indexPattern.id+"/"+field.name+"/"+query}}},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(2);var _filter_params_input_type=__webpack_require__(3242);var _filter_params_input_type2=_interopRequireDefault(_filter_params_input_type);__webpack_require__(826);__webpack_require__(827);__webpack_require__(1339);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");_module.directive("filterParamsInputType",function(){return{restrict:"E",template:_filter_params_input_type2.default,scope:{type:"=",placeholder:"@",value:"=",onChange:"&"},link:function link(scope){scope.boolOptions=[true,false];scope.setDefaultBool=function(){if(null==scope.value){scope.value=scope.boolOptions[0];scope.onChange({value:scope.value})}}}}})},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(2);var _module=_modules.uiModules.get("kibana");_module.directive("stringToNumber",function(){return{require:"ngModel",link:function link(scope,element,attrs,ngModel){ngModel.$formatters.push(function(value){return parseFloat(value)})}}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exists=__webpack_require__(828);Object.defineProperty(exports,"buildExistsFilter",{enumerable:true,get:function get(){return _exists.buildExistsFilter}});var _phrase=__webpack_require__(363);Object.defineProperty(exports,"buildPhraseFilter",{enumerable:true,get:function get(){return _phrase.buildPhraseFilter}});var _phrases=__webpack_require__(605);Object.defineProperty(exports,"buildPhrasesFilter",{enumerable:true,get:function get(){return _phrases.buildPhrasesFilter}});var _query=__webpack_require__(1324);Object.defineProperty(exports,"buildQueryFilter",{enumerable:true,get:function get(){return _query.buildQueryFilter}});var _range=__webpack_require__(295);Object.defineProperty(exports,"buildRangeFilter",{enumerable:true,get:function get(){return _range.buildRangeFilter}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ModalOverlay=exports.ConfirmationButtonTypes=void 0;var _confirm_modal=__webpack_require__(837);Object.defineProperty(exports,"ConfirmationButtonTypes",{enumerable:true,get:function get(){return _confirm_modal.ConfirmationButtonTypes}});var _modal_overlay=__webpack_require__(1342);Object.defineProperty(exports,"ModalOverlay",{enumerable:true,get:function get(){return _modal_overlay.ModalOverlay}});__webpack_require__(837);__webpack_require__(3264)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ModalOverlay=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _angular=__webpack_require__(16);var _angular2=_interopRequireDefault(_angular);var _modal_overlay=__webpack_require__(3263);var _modal_overlay2=_interopRequireDefault(_modal_overlay);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.ModalOverlay=function(){function ModalOverlay(modalElement){_classCallCheck(this,ModalOverlay);this.overlayElement=_angular2.default.element(_modal_overlay2.default);this.overlayElement.append(modalElement);_angular2.default.element(document.body).append(this.overlayElement)}_createClass(ModalOverlay,[{key:"destroy",value:function destroy(){this.overlayElement.remove()}}]);return ModalOverlay}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.prettyDuration=prettyDuration;var _datemath=__webpack_require__(83);var _datemath2=_interopRequireDefault(_datemath);var _moment=__webpack_require__(10);var _moment2=_interopRequireDefault(_moment);var _time_units=__webpack_require__(1344);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function cantLookup(timeFrom,timeTo,dateFormat){var displayFrom=formatTimeString(timeFrom,dateFormat);var displayTo=formatTimeString(timeTo,dateFormat,true);return displayFrom+" to "+displayTo}function formatTimeString(timeString,dateFormat){var roundUp=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,_moment2.default)(timeString).isValid())return(0,_moment2.default)(timeString).format(dateFormat);if("now"===timeString)return"now";var tryParse=_datemath2.default.parse(timeString,{roundUp:roundUp});return _moment2.default.isMoment(tryParse)?"~ "+tryParse.fromNow():timeString}function prettyDuration(timeFrom,timeTo,getConfig){var quickRanges=getConfig("timepicker:quickRanges");var dateFormat=getConfig("dateFormat");var lookupByRange={};quickRanges.forEach(function(frame){lookupByRange[frame.from+" to "+frame.to]=frame});if(timeFrom&&timeTo&&!_moment2.default.isMoment(timeFrom)&&!_moment2.default.isMoment(timeTo)){var tryLookup=lookupByRange[timeFrom.toString()+" to "+timeTo.toString()];if(tryLookup)return tryLookup.display;var fromParts=timeFrom.toString().split("-");if("now"===timeTo.toString()&&"now"===fromParts[0]&&fromParts[1]){var rounded=fromParts[1].split("/");var text="Last "+rounded[0];rounded[1]&&(text=text+" rounded to the "+_time_units.timeUnits[rounded[1]]);return text}return cantLookup(timeFrom,timeTo,dateFormat)}return cantLookup(timeFrom,timeTo,dateFormat)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.timeUnits={s:"second",m:"minute",h:"hour",d:"day",w:"week",M:"month",y:"year"}},function(module,exports,__webpack_require__){"use strict";var _moment=__webpack_require__(10);var _moment2=_interopRequireDefault(_moment);var _modules=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");_module.directive("inputDatetime",function(){return{restrict:"A",require:"ngModel",link:function link($scope,$elem,attrs,ngModel){var format="YYYY-MM-DD HH:mm:ss.SSS";$elem.after('<div class="input-datetime-format">'+format+"</div>");var fromUser=function fromUser(text){var parsed=(0,_moment2.default)(text,format);return parsed.isValid()?parsed:void 0};var toUser=function toUser(datetime){return(0,_moment2.default)(datetime).format(format)};ngModel.$parsers.push(fromUser);ngModel.$formatters.push(toUser)}}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.prettyInterval=prettyInterval;var MS_IN_SECOND=1e3;var MS_IN_MINUTE=60*MS_IN_SECOND;var MS_IN_HOUR=60*MS_IN_MINUTE;var MS_IN_DAY=24*MS_IN_HOUR;function prettyInterval(intervalInMs){if(0===intervalInMs)return"Off";if(intervalInMs<MS_IN_MINUTE){var intervalInSeconds=Math.round(intervalInMs/MS_IN_SECOND);var _units=intervalInSeconds>1?"seconds":"second";return intervalInSeconds+" "+_units}if(intervalInMs<MS_IN_HOUR){var intervalInMinutes=Math.round(intervalInMs/MS_IN_MINUTE);var _units2=intervalInMinutes>1?"minutes":"minute";return intervalInMinutes+" "+_units2}if(intervalInMs<MS_IN_DAY){var intervalInHours=Math.round(intervalInMs/MS_IN_HOUR);var _units3=intervalInHours>1?"hours":"hour";return intervalInHours+" "+_units3}var intervalInDays=Math.round(intervalInMs/MS_IN_DAY);var units=intervalInDays>1?"days":"day";return intervalInDays+" "+units}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(3288)},,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";var _jquery=__webpack_require__(13);var _jquery2=_interopRequireDefault(_jquery);var _modules=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");_module.directive("kbnInfiniteScroll",function(){return{restrict:"E",scope:{more:"="},link:function link($scope,$element){var $window=(0,_jquery2.default)(window);var checkTimer=void 0;function onScroll(){if(!$scope.more)return;var winHeight=$window.height();var winBottom=winHeight+$window.scrollTop();var elTop=$element.offset().top;var remaining=elTop-winBottom;remaining<=.5*winHeight&&$scope[$scope.$$phase?"$eval":"$apply"](function(){$scope.more()})}function scheduleCheck(){if(checkTimer)return;checkTimer=setTimeout(function(){checkTimer=null;onScroll()},50)}$window.on("scroll",scheduleCheck);$scope.$on("$destroy",function(){clearTimeout(checkTimer);$window.off("scroll",scheduleCheck)});scheduleCheck()}}})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(2);var _module=_modules.uiModules.get("kibana");var pairs=["()","[]","{}","''",'""'];var openers=pairs.map(function(pair){return pair[0]});var closers=pairs.map(function(pair){return pair[1]});_module.directive("matchPairs",function(){return{restrict:"A",require:"ngModel",link:function link(scope,elem,attrs,ngModel){elem.on("keydown",function(e){var target=e.target,key=e.key,metaKey=e.metaKey;var value=target.value,selectionStart=target.selectionStart,selectionEnd=target.selectionEnd;if(shouldMoveCursorForward(key,value,selectionStart,selectionEnd)){e.preventDefault();target.setSelectionRange(selectionStart+1,selectionEnd+1)}else if(shouldInsertMatchingCloser(key,value,selectionStart,selectionEnd)){e.preventDefault();var newValue=value.substr(0,selectionStart)+key+value.substring(selectionStart,selectionEnd)+closers[openers.indexOf(key)]+value.substr(selectionEnd);target.value=newValue;target.setSelectionRange(selectionStart+1,selectionEnd+1);ngModel.$setViewValue(newValue);ngModel.$render()}else if(shouldRemovePair(key,metaKey,value,selectionStart,selectionEnd)){e.preventDefault();var _newValue=value.substr(0,selectionEnd-1)+value.substr(selectionEnd+1);target.value=_newValue;target.setSelectionRange(selectionStart-1,selectionEnd-1);ngModel.$setViewValue(_newValue);ngModel.$render()}})}}});function shouldMoveCursorForward(key,value,selectionStart,selectionEnd){if(!closers.includes(key))return false;if(selectionStart!==selectionEnd)return false;return value.charAt(selectionEnd)===key}function shouldInsertMatchingCloser(key,value,selectionStart,selectionEnd){if(!openers.includes(key))return false;if(selectionStart!==selectionEnd)return true;var precedingCharacter=value.charAt(selectionStart-1);var followingCharacter=value.charAt(selectionStart+1);if("\\"===precedingCharacter)return false;return!(['"',"'"].includes(key)&&(isAlphanumeric(precedingCharacter)||isAlphanumeric(followingCharacter)))}function shouldRemovePair(key,metaKey,value,selectionStart,selectionEnd){if("Backspace"!==key||metaKey)return false;if(selectionStart!==selectionEnd)return false;return pairs.includes(value.substr(selectionEnd-1,2))}function isAlphanumeric(){var value=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return value.match(/[a-zA-Z0-9_]/)}},function(module,exports,__webpack_require__){"use strict";var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _modules=__webpack_require__(2);var _paginate_controls=__webpack_require__(3554);var _paginate_controls2=_interopRequireDefault(_paginate_controls);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana").directive("paginate",function($parse,$compile){return{restrict:"E",scope:true,link:{pre:function pre($scope,$el,attrs){_lodash2.default.isUndefined(attrs.bottomControls)&&(attrs.bottomControls=true);0===$el.find("paginate-controls.paginate-bottom").length&&attrs.bottomControls&&$el.append($compile('<paginate-controls class="paginate-bottom">')($scope))},post:function post($scope,$el,attrs){_lodash2.default.isUndefined(attrs.topControls)&&(attrs.topControls=false);0===$el.find("paginate-controls.paginate-top").length&&attrs.topControls&&$el.prepend($compile('<paginate-controls class="paginate-top">')($scope));var paginate=$scope.paginate;paginate.getList=$parse(attrs.list);paginate.perPageProp=attrs.perPageProp;if(attrs.perPage){paginate.perPage=attrs.perPage;$scope.showSelector=false}else $scope.showSelector=true;paginate.otherWidthGetter=$parse(attrs.otherWidth);paginate.init()}},controllerAs:"paginate",controller:function controller($scope,$document){var self=this;var ALL=0;self.sizeOptions=[{title:"10",value:10},{title:"25",value:25},{title:"100",value:100},{title:"All",value:ALL}];self.init=function(){self.perPage=_lodash2.default.parseInt(self.perPage)||$scope[self.perPageProp];$scope.$watchMulti(["paginate.perPage",self.perPageProp,self.otherWidthGetter],function(vals,oldVals){var intChanges=vals[0]!==oldVals[0];if(intChanges){setPerPage(self.perPage)||self.renderList();return}self.perPage=_lodash2.default.parseInt(self.perPage)||$scope[self.perPageProp];if(null==self.perPage){self.perPage=ALL;return}self.renderList()});$scope.$watch("page",self.changePage);$scope.$watchCollection(self.getList,function(list){$scope.list=list;self.renderList()})};self.goToPage=function(number){if(number){number.hasOwnProperty("number")&&(number=number.number);$scope.page=$scope.pages[number-1]||$scope.pages[0]}};self.goToTop=function goToTop(){$document.scrollTop(0)};self.renderList=function(){$scope.pages=[];if(!$scope.list)return;var perPage=_lodash2.default.parseInt(self.perPage);var count=perPage?Math.ceil($scope.list.length/perPage):1;_lodash2.default.times(count,function(i){var page=void 0;if(perPage){var start=perPage*i;page=$scope.list.slice(start,start+perPage)}else page=$scope.list.slice(0);page.number=i+1;page.i=i;page.count=count;page.first=1===page.number;page.last=page.number===count;page.firstItem=(page.number-1)*perPage+1;page.lastItem=Math.min(page.number*perPage,$scope.list.length);page.prev=$scope.pages[i-1];page.prev&&(page.prev.next=page);$scope.pages.push(page)});$scope.page&&$scope.page.i<$scope.pages.length?$scope.page=$scope.pages[$scope.page.i]:$scope.page=$scope.pages[0];$scope.page&&$scope.onPageChanged&&$scope.onPageChanged($scope.page)};self.changePage=function(page){if(!page){$scope.otherPages=null;return}$scope.otherPages=[];var width=+self.otherWidthGetter($scope)||5;var left=page.i-Math.round((width-1)/2);var right=left+width-1;if(left<0){right+=0-left;left=0}var lastI=page.count-1;if(right>lastI){right=lastI;left=right-width+1}for(var i=left;i<=right;i++){var other=$scope.pages[i];if(!other)continue;$scope.otherPages.push(other);other.last&&($scope.otherPages.containsLast=true);other.first&&($scope.otherPages.containsFirst=true)}$scope.onPageChanged&&$scope.onPageChanged($scope.page)};function setPerPage(val){var $ppParent=$scope;while($ppParent&&!_lodash2.default.has($ppParent,self.perPageProp))$ppParent=$ppParent.$parent;if($ppParent){$ppParent[self.perPageProp]=val;return true}}}}}).directive("paginateControls",function(){return{restrict:"E",template:_paginate_controls2.default}})},function(module,exports,__webpack_require__){"use strict";var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _modules=__webpack_require__(2);var _paginated_selectable_list=__webpack_require__(3555);var _paginated_selectable_list2=_interopRequireDefault(_paginated_selectable_list);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");function throwError(message){throw new Error(message)}_module.directive("paginatedSelectableList",function(){return{restrict:"E",scope:{perPage:"=?",list:"=",listProperty:"@",userMakeUrl:"=?",userOnSelect:"=?",disableAutoFocus:"="},template:_paginated_selectable_list2.default,controller:function controller($scope){$scope.userMakeUrl||$scope.userOnSelect||throwError("paginatedSelectableList directive expects a makeUrl or onSelect function");$scope.userMakeUrl&&$scope.userOnSelect&&throwError("paginatedSelectableList directive expects a makeUrl or onSelect attribute but not both");$scope.perPage=$scope.perPage||10;$scope.hits=$scope.list=_lodash2.default.sortBy($scope.list,$scope.accessor);$scope.hitCount=$scope.hits.length;$scope.isAscending=true;$scope.sortHits=function(hits){var sortedList=_lodash2.default.sortBy(hits,$scope.accessor);$scope.isAscending=!$scope.isAscending;$scope.hits=$scope.isAscending?sortedList:sortedList.reverse()};$scope.makeUrl=function(hit){return $scope.userMakeUrl(hit)};$scope.onSelect=function(hit,$event){return $scope.userOnSelect(hit,$event)};$scope.accessor=function(val){var prop=$scope.listProperty;return prop?_lodash2.default.get(val,prop):val}}}})},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(2);var _module=_modules.uiModules.get("kibana");_module.directive("validateJson",function(){return{restrict:"A",require:"ngModel",scope:{ngModel:"=",queryInput:"=?"},link:function link($scope,$elem,attr,ngModel){$scope.$watch("ngModel",validator);function validator(newValue){if(!newValue||0===newValue.length){setValid();return}newValue=(newValue||"").trim();if("{"===newValue[0]||"["===newValue[0])try{JSON.parse(newValue);setValid()}catch(e){setInvalid()}else setInvalid()}function setValid(){ngModel.$setValidity("jsonInput",true)}function setInvalid(){ngModel.$setValidity("jsonInput",false)}}}})},function(module,exports,__webpack_require__){"use strict";var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _modules=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana").filter("matchAny",function(){return function(items,rules){Array.isArray(rules)||(rules=[rules]);return _lodash2.default.filter(items,function(item){for(var i=0;i<rules.length;i++)if(_lodash2.default.some([item],rules[i]))return true;return false})}})},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(2);_modules.uiModules.get("kibana").filter("startFrom",function(){return function(input,start){if(!input)return[];start=+start;return input.slice(start)}})},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(2);var _module=_modules.uiModules.get("kibana");_module.filter("trustAsHtml",function($sce){return $sce.trustAsHtml})},function(module,exports,__webpack_require__){"use strict";var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _modules=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana").filter("unique",function(){return function(arr){var list=_lodash2.default.unique(arr);return list}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _theme=__webpack_require__(3564);Object.defineProperty(exports,"registerTheme",{enumerable:true,get:function get(){return _theme.registerTheme}});Object.defineProperty(exports,"applyTheme",{enumerable:true,get:function get(){return _theme.applyTheme}});Object.defineProperty(exports,"getCurrentTheme",{enumerable:true,get:function get(){return _theme.getCurrentTheme}})},function(module,exports){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports){},,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function clamp(val,min,max){return Math.min(Math.max(min,val),max)}exports.Pager=function(){function Pager(totalItems,pageSize,startingPage){_classCallCheck(this,Pager);this.currentPage=startingPage;this.totalItems=totalItems;this.pageSize=pageSize;this.startIndex=0;this.updateMeta()}_createClass(Pager,[{key:"nextPage",value:function nextPage(){this.currentPage+=1;this.updateMeta()}},{key:"previousPage",value:function previousPage(){this.currentPage-=1;this.updateMeta()}},{key:"setTotalItems",value:function setTotalItems(count){this.totalItems=count;this.updateMeta()}},{key:"setPageSize",value:function setPageSize(count){this.pageSize=count;this.updateMeta()}},{key:"updateMeta",value:function updateMeta(){this.totalPages=Math.ceil(this.totalItems/this.pageSize);this.currentPage=clamp(this.currentPage,1,this.totalPages);this.startItem=(this.currentPage-1)*this.pageSize+1;this.startItem=clamp(this.startItem,0,this.totalItems);this.endItem=this.startItem-1+this.pageSize;this.endItem=clamp(this.endItem,0,this.totalItems);this.startIndex=this.startItem-1}},{key:"pageCount",get:function get(){return Math.ceil(this.totalItems/this.pageSize)}},{key:"hasNextPage",get:function get(){return this.currentPage<this.totalPages}},{key:"hasPreviousPage",get:function get(){return this.currentPage>1}}]);return Pager}()},,,,,,function(module,exports,__webpack_require__){"use strict";var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _jquery=__webpack_require__(13);var _jquery2=_interopRequireDefault(_jquery);var _pegjs=__webpack_require__(4038);var _pegjs2=_interopRequireDefault(_pegjs);var _chain=__webpack_require__(4048);var _chain2=_interopRequireDefault(_chain);__webpack_require__(4049);var _timelion_expression_input=__webpack_require__(4051);var _timelion_expression_input2=_interopRequireDefault(_timelion_expression_input);var _timelion_expression_input_helpers=__webpack_require__(4052);var _eui=__webpack_require__(3);var _arg_value_suggestions=__webpack_require__(4053);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}var Parser=_pegjs2.default.buildParser(_chain2.default);var app=__webpack_require__(2).get("apps/timelion",[]);app.directive("timelionExpressionInput",function($document,$http,$interval,$timeout,Private){return{restrict:"E",scope:{rows:"=",sheet:"=",updateChart:"&",shouldPopoverSuggestions:"@"},replace:true,template:_timelion_expression_input2.default,link:function link(scope,elem){var getSuggestions=(_ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var suggestions;return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return(0,_timelion_expression_input_helpers.suggest)(scope.sheet,functionReference.list,Parser,getCursorPosition(),argValueSuggestions);case 2:suggestions=_context.sent;scope.$apply(function(){if(suggestions){scope.suggestions.setList(suggestions.list,suggestions.type);scope.suggestions.show();suggestibleFunctionLocation=suggestions.location;$timeout(function(){var suggestionsList=(0,_jquery2.default)("[data-suggestions-list]");suggestionsList.scrollTop(0)},0);return}suggestibleFunctionLocation=void 0;scope.suggestions.reset()});case 4:case"end":return _context.stop()}},_callee,this)})),function getSuggestions(){return _ref.apply(this,arguments)});var _ref;var argValueSuggestions=Private(_arg_value_suggestions.ArgValueSuggestionsProvider);var expressionInput=elem.find("[data-expression-input]");var functionReference={};var suggestibleFunctionLocation={};scope.suggestions=new _timelion_expression_input_helpers.Suggestions;function init(){$http.get("../api/timelion/functions").then(function(resp){Object.assign(functionReference,{byName:_lodash2.default.indexBy(resp.data,"name"),list:resp.data})})}function setCaretOffset(caretOffset){$timeout(function(){expressionInput.focus();expressionInput[0].selectionStart=expressionInput[0].selectionEnd=caretOffset;scope.$apply()},0)}function insertSuggestionIntoExpression(suggestionIndex){if(scope.suggestions.isEmpty())return;var _suggestibleFunctionL=suggestibleFunctionLocation,min=_suggestibleFunctionL.min,max=_suggestibleFunctionL.max;var insertedValue=void 0;var insertPositionMinOffset=0;switch(scope.suggestions.type){case _timelion_expression_input_helpers.SUGGESTION_TYPE.FUNCTIONS:insertedValue=scope.suggestions.list[suggestionIndex].name+"()";insertPositionMinOffset=1;break;case _timelion_expression_input_helpers.SUGGESTION_TYPE.ARGUMENTS:insertedValue=scope.suggestions.list[suggestionIndex].name+"=";break;case _timelion_expression_input_helpers.SUGGESTION_TYPE.ARGUMENT_VALUE:insertedValue=""+scope.suggestions.list[suggestionIndex].name}var updatedExpression=(0,_timelion_expression_input_helpers.insertAtLocation)(insertedValue,scope.sheet,min+insertPositionMinOffset,max);scope.sheet=updatedExpression;var newCaretOffset=min+insertedValue.length;setCaretOffset(newCaretOffset)}function scrollToSuggestionAt(index){var suggestionsList=(0,_jquery2.default)("[data-suggestions-list]");var suggestionListItem=(0,_jquery2.default)("[data-suggestion-list-item]")[index];suggestionsList.scrollTop(suggestionListItem.offsetTop-suggestionsList[0].offsetTop)}function getCursorPosition(){if(expressionInput.length)return expressionInput[0].selectionStart;return null}function isNavigationalKey(keyCode){var keyCodes=_lodash2.default.values(_eui.comboBoxKeyCodes);return keyCodes.includes(keyCode)}scope.onFocusInput=function(){$timeout(getSuggestions,0)};scope.onBlurInput=function(){scope.suggestions.hide()};scope.onKeyDownInput=function(e){if(!isNavigationalKey(e.keyCode))return;switch(e.keyCode){case _eui.comboBoxKeyCodes.UP:if(scope.suggestions.isVisible){e.preventDefault();scope.suggestions.stepForward();scrollToSuggestionAt(scope.suggestions.index)}break;case _eui.comboBoxKeyCodes.DOWN:if(scope.suggestions.isVisible){e.preventDefault();scope.suggestions.stepBackward();scrollToSuggestionAt(scope.suggestions.index)}break;case _eui.comboBoxKeyCodes.TAB:if(scope.suggestions.isEmpty()||scope.suggestions.index<0){scope.suggestions.hide();return}e.preventDefault();insertSuggestionIntoExpression(scope.suggestions.index);break;case _eui.comboBoxKeyCodes.ENTER:if(e.metaKey||e.ctrlKey){e.preventDefault();scope.updateChart()}else if(!scope.suggestions.isEmpty()){e.preventDefault();insertSuggestionIntoExpression(scope.suggestions.index)}break;case _eui.comboBoxKeyCodes.ESCAPE:e.preventDefault();scope.suggestions.hide()}};scope.onKeyUpInput=function(e){isNavigationalKey(e.keyCode)||getSuggestions()};scope.onClickExpression=function(){getSuggestions()};scope.onClickSuggestion=function(index){insertSuggestionIntoExpression(index)};scope.getActiveSuggestionId=function(){if(scope.suggestions.isVisible&&scope.suggestions.index>-1)return"timelionSuggestion"+scope.suggestions.index;return""};init()}}})},,,function(module,exports,__webpack_require__){"use strict";var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _jquery=__webpack_require__(13);var _jquery2=_interopRequireDefault(_jquery);var _timelion_interval=__webpack_require__(4056);var _timelion_interval2=_interopRequireDefault(_timelion_interval);__webpack_require__(4057);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var app=__webpack_require__(2).get("apps/timelion",[]);app.directive("timelionInterval",function($compile,$timeout){return{restrict:"E",scope:{model:"="},template:_timelion_interval2.default,link:function link($scope,$elem){$scope.intervalOptions=["auto","1s","1m","1h","1d","1w","1M","1y","other"];$scope.intervalLabels={auto:"auto","1s":"1 second","1m":"1 minute","1h":"1 hour","1d":"1 day","1w":"1 week","1M":"1 month","1y":"1 year",other:"other"};$scope.$watch("model",function(newVal,oldVal){if(newVal!==oldVal||null==oldVal)return;_lodash2.default.contains($scope.intervalOptions,newVal)?$scope.interval=newVal:$scope.interval="other";"other"!==newVal&&($scope.otherInterval=newVal)});$scope.$watch("interval",function(newVal,oldVal){if(newVal===oldVal)return;if("other"===newVal){$scope.otherInterval=oldVal;$scope.model=$scope.otherInterval;$timeout(function(){(0,_jquery2.default)("input",$elem).select()},0)}else{$scope.otherInterval=$scope.interval;$scope.model=$scope.interval}});$scope.$watch("otherInterval",function(newVal,oldVal){if(newVal===oldVal)return;$scope.model=newVal})}}})},,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=TimelionVisProvider;var _vis_factory=__webpack_require__(85);var _vis_category=__webpack_require__(71);var _iconTimelion=__webpack_require__(4146);var _iconTimelion2=_interopRequireDefault(_iconTimelion);var _vis_types=__webpack_require__(95);var _timelion_request_handler=__webpack_require__(4147);var _editor_size=__webpack_require__(645);__webpack_require__(4148);__webpack_require__(1462);__webpack_require__(4149);var _timelion_vis=__webpack_require__(4150);var _timelion_vis2=_interopRequireDefault(_timelion_vis);var _timelion_vis_params=__webpack_require__(4151);var _timelion_vis_params2=_interopRequireDefault(_timelion_vis_params);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_vis_types.VisTypesRegistryProvider.register(TimelionVisProvider);function TimelionVisProvider(Private){var VisFactory=Private(_vis_factory.VisFactoryProvider);var timelionRequestHandler=Private(_timelion_request_handler.TimelionRequestHandlerProvider);return VisFactory.createAngularVisualization({name:"timelion",title:"Timelion",image:_iconTimelion2.default,description:"Build time-series using functional expressions",category:_vis_category.CATEGORY.TIME,visConfig:{defaults:{expression:".es(*)",interval:"auto"},template:_timelion_vis2.default},editorConfig:{optionsTemplate:_timelion_vis_params2.default,defaultSize:_editor_size.DefaultEditorSize.MEDIUM},requestHandler:timelionRequestHandler.handler,responseHandler:"none",options:{showIndexSelection:false,showQueryBar:false,showFilterBar:false}})}module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VislibComponentsZeroInjectionOrderedXKeysProvider=VislibComponentsZeroInjectionOrderedXKeysProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _moment=__webpack_require__(10);var _moment2=_interopRequireDefault(_moment);var _uniq_keys=__webpack_require__(4083);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function VislibComponentsZeroInjectionOrderedXKeysProvider(Private){var getUniqKeys=Private(_uniq_keys.VislibComponentsZeroInjectionUniqKeysProvider);return function(obj){var orderBucketsBySum=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!_lodash2.default.isObject(obj))throw new Error("OrderedXKeysUtilService expects an object");var uniqKeys=getUniqKeys(obj);var uniqKeysPairs=[].concat(_toConsumableArray(uniqKeys.entries()));var interval=_lodash2.default.get(obj,"ordered.interval");var dateInterval=!!_moment2.default.isDuration(interval)&&interval;return(0,_lodash2.default)(uniqKeysPairs).sortBy(function(d){if(d[1].isDate||d[1].isOrdered)return+d[0];return orderBucketsBySum?-d[1].sum:d[1].index}).map(function(d,i,list){if(!d[1].isNumber)return d[0];var val=+d[0];if(null==interval)return val;var gapEdge=parseFloat(_lodash2.default.get(list,[i+1,0]));if(isNaN(gapEdge))return val;var vals=[];var next=val;if(dateInterval){next=(0,_moment2.default)(val);while(next<gapEdge){vals.push(next.valueOf());next.add(dateInterval)}}else while(next<gapEdge){vals.push(next);next+=interval}return vals}).flatten().value()}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createColorPalette=createColorPalette;var _d=__webpack_require__(19);var _d2=_interopRequireDefault(_d);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _seed_colors=__webpack_require__(1471);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var offset=300;var fraction=function fraction(goal){var walkTree=function walkTree(numerator,denominator,bytes){return bytes.length?walkTree(2*numerator+(bytes.pop()?1:-1),2*denominator,bytes):numerator/denominator};var b=(goal+2).toString(2).split("").map(function(num){return parseInt(num,10)});b.shift();return walkTree(1,2,b)};function createColorPalette(num){if(!_lodash2.default.isNumber(num))throw new TypeError("ColorPaletteUtilService expects a number");var colors=_seed_colors.seedColors;var seedLength=_seed_colors.seedColors.length;_lodash2.default.times(num-seedLength,function(i){colors.push(_d2.default.hsl((360*fraction(i+seedLength+1)+offset)%360,.5,.5).toString())});return colors}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.seedColors=["#00a69b","#57c17b","#6f87d8","#663db8","#bc52bc","#9e3533","#daa05d"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AggResponsePointSeriesProvider=AggResponsePointSeriesProvider;var _get_series=__webpack_require__(4093);var _get_aspects=__webpack_require__(4096);var _init_y_axis=__webpack_require__(4098);var _init_x_axis=__webpack_require__(4099);var _ordered_date_axis=__webpack_require__(4100);var _tooltip_formatter=__webpack_require__(4101);function AggResponsePointSeriesProvider(Private){var getSeries=Private(_get_series.PointSeriesGetSeriesProvider);var getAspects=Private(_get_aspects.PointSeriesGetAspectsProvider);var initYAxis=Private(_init_y_axis.PointSeriesInitYAxisProvider);var initXAxis=Private(_init_x_axis.PointSeriesInitXAxisProvider);var setupOrderedDateXAxis=Private(_ordered_date_axis.PointSeriesOrderedDateAxisProvider);var tooltipFormatter=Private(_tooltip_formatter.PointSeriesTooltipFormatter);return function pointSeriesChartDataFromTable(vis,table){var chart={};var aspects=chart.aspects=getAspects(vis,table);chart.tooltipFormatter=tooltipFormatter;initXAxis(chart);initYAxis(chart);var datedX=aspects.x.agg.type.ordered&&aspects.x.agg.type.ordered.date;datedX&&setupOrderedDateXAxis(vis,chart);chart.series=getSeries(table.rows,chart);delete chart.aspects;return chart}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VislibPieConfigProvider=VislibPieConfigProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function VislibPieConfigProvider(){return function(config){config.chart||(config.chart=_lodash2.default.defaults({},config,{type:"pie",labels:{show:false,truncate:100}}));return config}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.VislibTypesPointSeries=VislibTypesPointSeries;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function VislibTypesPointSeries(){var createSerieFromParams=function createSerieFromParams(cfg,seri){var matchingSeriesParams=cfg.seriesParams?cfg.seriesParams.find(function(seriConfig){return seri.aggId===seriConfig.data.id}):null;var interpolate=cfg.smoothLines?"cardinal":cfg.interpolate;if(!matchingSeriesParams){var stacked=["stacked","percentage","wiggle","silhouette"].includes(cfg.mode);return{show:true,type:cfg.type||"line",mode:stacked?"stacked":"normal",interpolate:interpolate,drawLinesBetweenPoints:cfg.drawLinesBetweenPoints,showCircles:cfg.showCircles,radiusRatio:cfg.radiusRatio,data:seri}}return _extends({},matchingSeriesParams,{data:seri,radiusRatio:cfg.radiusRatio})};var createSeries=function createSeries(cfg,series){return{type:"point_series",addTimeMarker:cfg.addTimeMarker,series:_lodash2.default.map(series,function(seri){return createSerieFromParams(cfg,seri)})}};var createCharts=function createCharts(cfg,data){if(data.rows||data.columns){var charts=data.rows?data.rows:data.columns;return charts.map(function(chart){return createSeries(cfg,chart.series)})}return[createSeries(cfg,data.series)]};function create(opts){opts=opts||{};return function(cfg,data){var isUserDefinedYAxis=cfg.setYExtents;var config=_lodash2.default.cloneDeep(cfg);_lodash2.default.defaultsDeep(config,{chartTitle:{},mode:"normal"},opts);config.type="point_series";config.tooltip||(config.tooltip={show:cfg.addTooltip});if(config.valueAxes)config.valueAxes.forEach(function(axis){axis.labels&&(axis.labels.axisFormatter=data.data.yAxisFormatter||data.get("yAxisFormatter"))});else{var mode=config.mode;["stacked","overlap"].includes(mode)&&(mode="normal");config.valueAxes=[{id:"ValueAxis-1",type:"value",scale:{type:config.scale,setYExtents:config.setYExtents,defaultYExtents:config.defaultYExtents,min:isUserDefinedYAxis?config.yAxis.min:void 0,max:isUserDefinedYAxis?config.yAxis.max:void 0,mode:mode},labels:{axisFormatter:data.data.yAxisFormatter||data.get("yAxisFormatter")},title:{text:data.get("yAxisLabel")}}]}if(config.categoryAxes){var categoryAxis1=config.categoryAxes.find(function(categoryAxis){return"CategoryAxis-1"===categoryAxis.id});categoryAxis1&&(categoryAxis1.title.text=data.get("xAxisLabel"))}else config.categoryAxes=[{id:"CategoryAxis-1",type:"category",labels:{axisFormatter:data.data.xAxisFormatter||data.get("xAxisFormatter")},scale:{expandLastBucket:opts.expandLastBucket},title:{text:data.get("xAxisLabel")}}];config.charts||(config.charts=createCharts(cfg,data.data));"undefined"===typeof config.enableHover&&(config.enableHover=true);return config}}return{line:create(),column:create({expandLastBucket:true}),area:create({alerts:[{type:"warning",msg:'Positive and negative values are not accurately represented by stacked area charts. Either changing the chart mode to "overlap" or using a bar chart is recommended.',test:function test(vis,data){if(!data.shouldBeStacked()||data.maxNumberOfSeries()<2)return;var hasPos=data.getYMax(data._getY)>0;var hasNeg=data.getYMin(data._getY)<0;return hasPos&&hasNeg}},{type:"warning",msg:"Parts of or the entire area chart might not be displayed due to null values in the data. A line chart is recommended when displaying data with null values.",test:function test(vis,data){return data.hasNullValues()}}]}),heatmap:function heatmap(cfg,data){var defaults=create()(cfg,data);var seriesLimit=25;var hasCharts=defaults.charts.length;var tooManySeries=defaults.charts.length&&defaults.charts[0].series.length>seriesLimit;hasCharts&&tooManySeries&&(defaults.error="There are too many series defined.");defaults.valueAxes[0].show=false;defaults.categoryAxes[0].style={rangePadding:0,rangeOuterPadding:0};defaults.categoryAxes.push({id:"CategoryAxis-2",type:"category",position:"left",values:data.getLabels(),scale:{inverted:true},labels:{filter:false,axisFormatter:function axisFormatter(val){return val}},style:{rangePadding:0,rangeOuterPadding:0},title:{text:data.get("zAxisLabel")||""}});return defaults}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VislibTypesProvider=VislibTypesProvider;var _point_series=__webpack_require__(1474);var _pie=__webpack_require__(1473);var _gauge=__webpack_require__(4104);function VislibTypesProvider(Private){var pointSeries=Private(_point_series.VislibTypesPointSeries);return{histogram:pointSeries.column,horizontal_bar:pointSeries.column,line:pointSeries.line,pie:Private(_pie.VislibPieConfigProvider),area:pointSeries.area,point_series:pointSeries.line,heatmap:pointSeries.heatmap,gauge:Private(_gauge.vislibGaugeProvider),goal:Private(_gauge.vislibGaugeProvider),metric:Private(_gauge.vislibGaugeProvider)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VislibLibLayoutLayoutTypesProvider=VislibLibLayoutLayoutTypesProvider;var _column_layout=__webpack_require__(4105);var _pie_layout=__webpack_require__(4110);var _gauge_layout=__webpack_require__(4113);function VislibLibLayoutLayoutTypesProvider(Private){return{pie:Private(_pie_layout.VislibLibLayoutTypesPieLayoutProvider),gauge:Private(_gauge_layout.GaugeLayoutProvider),goal:Private(_gauge_layout.GaugeLayoutProvider),metric:Private(_gauge_layout.GaugeLayoutProvider),point_series:Private(_column_layout.VislibLibLayoutTypesColumnLayoutProvider)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VislibVisualizationsVisTypesProvider=VislibVisualizationsVisTypesProvider;var _point_series=__webpack_require__(4115);var _pie_chart=__webpack_require__(4128);var _gauge_chart=__webpack_require__(4129);function VislibVisualizationsVisTypesProvider(Private){return{pie:Private(_pie_chart.VislibVisualizationsPieChartProvider),point_series:Private(_point_series.VislibVisualizationsPointSeriesProvider),gauge:Private(_gauge_chart.GaugeChartProvider),goal:Private(_gauge_chart.GaugeChartProvider),metric:Private(_gauge_chart.GaugeChartProvider)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _binder=__webpack_require__(4117);Object.defineProperty(exports,"Binder",{enumerable:true,get:function get(){return _binder.Binder}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.truncateLabel=void 0;var _jquery=__webpack_require__(13);var _jquery2=_interopRequireDefault(_jquery);var _d=__webpack_require__(19);var _d2=_interopRequireDefault(_d);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var truncateLabel=function truncateLabel(text,size){var node=_d2.default.select(text).node();var str=(0,_jquery2.default)(node).text();if(0===size)return str;if(size>=str.length)return str;return str.substr(0,size)+""};exports.truncateLabel=truncateLabel},function(module,exports){},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();exports.VislibLibAxisProvider=VislibLibAxisProvider;var _d=__webpack_require__(19);var _d2=_interopRequireDefault(_d);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _jquery=__webpack_require__(13);var _jquery2=_interopRequireDefault(_jquery);var _error_handler=__webpack_require__(1482);var _axis_title=__webpack_require__(4137);var _axis_labels=__webpack_require__(4138);var _axis_scale=__webpack_require__(4139);var _axis_config=__webpack_require__(4140);var _errors=__webpack_require__(56);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function VislibLibAxisProvider(Private){var ErrorHandler=Private(_error_handler.VislibLibErrorHandlerProvider);var AxisTitle=Private(_axis_title.VislibLibAxisTitleProvider);var AxisLabels=Private(_axis_labels.VislibAxisLabelsProvider);var AxisScale=Private(_axis_scale.VislibAxisScaleProvider);var AxisConfig=Private(_axis_config.VislibLibAxisConfigProvider);var Axis=function(_ErrorHandler){_inherits(Axis,_ErrorHandler);function Axis(visConfig,axisConfigArgs){_classCallCheck(this,Axis);var _this=_possibleConstructorReturn(this,(Axis.__proto__||Object.getPrototypeOf(Axis)).call(this));_this.visConfig=visConfig;_this.axisConfig=new AxisConfig(_this.visConfig,axisConfigArgs);if("category"===_this.axisConfig.get("type")){_this.values=_this.axisConfig.values;_this.ordered=_this.axisConfig.ordered}_this.axisScale=new AxisScale(_this.axisConfig,visConfig);_this.axisTitle=new AxisTitle(_this.axisConfig);_this.axisLabels=new AxisLabels(_this.axisConfig,_this.axisScale);_this.stack=_d2.default.layout.stack().x(function(d){return d.x}).y(function(d){if("function"===typeof _this.axisConfig.get("scale.offset")&&"expand"===_this.axisConfig.get("scale.offset").name)return Math.abs(d.y);return d.y}).offset(_this.axisConfig.get("scale.offset","zero"));var stackedMode=["normal","grouped"].includes(_this.axisConfig.get("scale.mode"));stackedMode&&(_this.stack=_this._stackNegAndPosVals);return _this}_createClass(Axis,[{key:"_stackNegAndPosVals",value:function _stackNegAndPosVals(data){var cache={};data.forEach(function(series){series.forEach(function(value){cache[value.x]||(cache[value.x]=[0,0]);value.y0=cache[value.x][value.y<0?0:1];cache[value.x][value.y<0?0:1]+=value.y})});return data}},{key:"render",value:function render(){var elSelector=this.axisConfig.get("elSelector");var rootEl=this.axisConfig.get("rootEl");_d2.default.select(rootEl).selectAll(elSelector).call(this.draw())}},{key:"destroy",value:function destroy(){var elSelector=this.axisConfig.get("elSelector");var rootEl=this.axisConfig.get("rootEl");(0,_jquery2.default)(rootEl).find(elSelector).find("svg").remove();this.axisTitle.destroy()}},{key:"getAxis",value:function getAxis(length){var scale=this.axisScale.getScale(length);var position=this.axisConfig.get("position");var axisFormatter=this.axisConfig.get("labels.axisFormatter");return _d2.default.svg.axis().scale(scale).tickFormat(axisFormatter).ticks(this.tickScale(length)).orient(position)}},{key:"getScale",value:function getScale(){return this.axisScale.scale}},{key:"addInterval",value:function addInterval(interval){return this.axisScale.addInterval(interval)}},{key:"substractInterval",value:function substractInterval(interval){return this.axisScale.substractInterval(interval)}},{key:"tickScale",value:function tickScale(length){var yTickScale=_d2.default.scale.linear().clamp(true).domain([20,40,1e3]).range([0,3,11]);return Math.ceil(yTickScale(length))}},{key:"getLength",value:function getLength(el){return this.axisConfig.isHorizontal()?(0,_jquery2.default)(el).width():(0,_jquery2.default)(el).height()}},{key:"adjustSize",value:function adjustSize(){var config=this.axisConfig;var style=config.get("style");var chartEl=this.visConfig.get("el");var position=config.get("position");var axisPadding=5;return function(selection){var text=selection.selectAll(".tick text");var lengths=[];text.each(function textWidths(){var _this2=this;lengths.push(config.isHorizontal()?_d2.default.select(_this2.parentNode).node().getBBox().height:_d2.default.select(_this2.parentNode).node().getBBox().width)});var length=lengths.length>0?_lodash2.default.max(lengths):0;length+=axisPadding;if(config.isHorizontal()){selection.attr("height",Math.ceil(length));if("top"===position){selection.select("g").attr("transform","translate(0, "+(length-parseInt(style.lineWidth))+")");selection.select("path").attr("transform","translate(1,0)")}if("value"===config.get("type")){var spacerNodes=(0,_jquery2.default)(chartEl).find(".y-axis-spacer-block-"+position);var elHeight=(0,_jquery2.default)(chartEl).find(".axis-wrapper-"+position).height();spacerNodes.height(elHeight)}}else{var axisWidth=Math.ceil(length);selection.attr("width",axisWidth);"left"===position&&selection.select("g").attr("transform","translate("+axisWidth+",0)")}}}},{key:"validate",value:function validate(){if(this.axisConfig.isLogScale()&&this.axisConfig.isPercentage())throw new _errors.VislibError("Can't mix percentage mode with log scale.")}},{key:"draw",value:function draw(){var svgs=[];var self=this;var config=this.axisConfig;var style=config.get("style");return function(selection){var n=selection[0].length;config.get("show")&&self.axisTitle&&["left","top"].includes(config.get("position"))&&self.axisTitle.render(selection);selection.each(function(){var el=this;var div=_d2.default.select(el);var width=(0,_jquery2.default)(el).width();var height=(0,_jquery2.default)(el).height();var length=self.getLength(el,n);self.validate();var axis=self.getAxis(length);if(config.get("show")){var svg=div.append("svg").attr("width",width).attr("height",height);svgs.push(svg);var axisClass=self.axisConfig.isHorizontal()?"x":"y";svg.append("g").attr("class",axisClass+" axis "+config.get("id")).call(axis);var container=svg.select("g.axis").node();if(container){svg.select("path").style("stroke",style.color).style("stroke-width",style.lineWidth).style("stroke-opacity",style.opacity);svg.selectAll("line").style("stroke",style.tickColor).style("stroke-width",style.tickWidth).style("stroke-opacity",style.opacity)}self.axisLabels&&self.axisLabels.render(svg)}});self.axisTitle&&["right","bottom"].includes(config.get("position"))&&self.axisTitle.render(selection);svgs.forEach(function(svg){return svg.call(self.adjustSize())})}}}]);return Axis}(ErrorHandler);return Axis}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();exports.VislibLibErrorHandlerProvider=VislibLibErrorHandlerProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _errors=__webpack_require__(56);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function VislibLibErrorHandlerProvider(){var ErrorHandler=function(){function ErrorHandler(){_classCallCheck(this,ErrorHandler)}_createClass(ErrorHandler,[{key:"validateWidthandHeight",value:function validateWidthandHeight(width,height){var badWidth=_lodash2.default.isNaN(width)||width<=0;var badHeight=_lodash2.default.isNaN(height)||height<=0;if(badWidth||badHeight)throw new _errors.ContainerTooSmall}}]);return ErrorHandler}();return ErrorHandler}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();exports.VislibLibChartTitleProvider=VislibLibChartTitleProvider;var _d=__webpack_require__(19);var _d2=_interopRequireDefault(_d);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _error_handler=__webpack_require__(1482);var _tooltip=__webpack_require__(886);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function VislibLibChartTitleProvider(Private){var ErrorHandler=Private(_error_handler.VislibLibErrorHandlerProvider);var Tooltip=Private(_tooltip.TooltipProvider);var ChartTitle=function(_ErrorHandler){_inherits(ChartTitle,_ErrorHandler);function ChartTitle(visConfig){_classCallCheck(this,ChartTitle);var _this=_possibleConstructorReturn(this,(ChartTitle.__proto__||Object.getPrototypeOf(ChartTitle)).call(this));_this.el=visConfig.get("el");_this.tooltip=new Tooltip("chart-title",_this.el,function(d){return"<p>"+_lodash2.default.escape(d.label)+"</p>"});return _this}_createClass(ChartTitle,[{key:"render",value:function render(){var el=_d2.default.select(this.el).select(".chart-title").node();var width=el?el.clientWidth:0;var height=el?el.clientHeight:0;return _d2.default.select(this.el).selectAll(".chart-title").call(this.draw(width,height))}},{key:"truncate",value:function truncate(size){var self=this;return function(selection){selection.each(function(){var text=_d2.default.select(this);var n=text[0].length;var maxWidth=size/n*.9;var length=this.getComputedTextLength();var str=void 0;var avg=void 0;var end=void 0;if(length>maxWidth){str=text.text();avg=length/str.length;end=Math.floor(maxWidth/avg)-5;str=str.substr(0,end)+"...";self.addMouseEvents(text);return text.text(str)}return text.text()})}}},{key:"addMouseEvents",value:function addMouseEvents(target){if(this.tooltip)return target.call(this.tooltip.render())}},{key:"draw",value:function draw(width,height){var self=this;return function(selection){selection.each(function(){var div=_d2.default.select(this);var dataType=this.parentNode.__data__.rows?"rows":"columns";var size="rows"===dataType?height:width;var txtHtOffset=11;self.validateWidthandHeight(width,height);div.append("svg").attr("width",width).attr("height",height).append("text").attr("transform",function(){if("rows"===dataType)return"translate("+txtHtOffset+","+height/2+")rotate(270)";return"translate("+width/2+","+txtHtOffset+")"}).attr("text-anchor","middle").text(function(d){return d.label});div.selectAll("text").call(self.truncate(size))})}}}]);return ChartTitle}(ErrorHandler);return ChartTitle}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:true});var attributeName="data-render-complete";var RenderCompleteHelper=function RenderCompleteHelper(element){var _this=this;_classCallCheck(this,RenderCompleteHelper);this.element=element;this.destroy=function(){_this.element.removeEventListener("renderStart",_this.start);_this.element.removeEventListener("renderComplete",_this.complete)};this.setup=function(){_this.element.setAttribute(attributeName,"false");_this.element.addEventListener("renderStart",_this.start);_this.element.addEventListener("renderComplete",_this.complete)};this.disable=function(){_this.element.setAttribute(attributeName,"disabled");_this.destroy()};this.start=function(){_this.element.setAttribute(attributeName,"false");return true};this.complete=function(){_this.element.setAttribute(attributeName,"true");return true};this.setup()};exports.RenderCompleteHelper=RenderCompleteHelper},,,,function(module,exports,__webpack_require__){"use strict";var _typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"===typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};(function($){$.color={};$.color.make=function(r,g,b,a){var o={};o.r=r||0;o.g=g||0;o.b=b||0;o.a=null!=a?a:1;o.add=function(c,d){for(var i=0;i<c.length;++i)o[c.charAt(i)]+=d;return o.normalize()};o.scale=function(c,f){for(var i=0;i<c.length;++i)o[c.charAt(i)]*=f;return o.normalize()};o.toString=function(){return o.a>=1?"rgb("+[o.r,o.g,o.b].join(",")+")":"rgba("+[o.r,o.g,o.b,o.a].join(",")+")"};o.normalize=function(){function clamp(min,value,max){return value<min?min:value>max?max:value}o.r=clamp(0,parseInt(o.r),255);o.g=clamp(0,parseInt(o.g),255);o.b=clamp(0,parseInt(o.b),255);o.a=clamp(0,o.a,1);return o};o.clone=function(){return $.color.make(o.r,o.b,o.g,o.a)};return o.normalize()};$.color.extract=function(elem,css){var c;do{c=elem.css(css).toLowerCase();if(""!=c&&"transparent"!=c)break;elem=elem.parent()}while(elem.length&&!$.nodeName(elem.get(0),"body"));"rgba(0, 0, 0, 0)"==c&&(c="transparent");return $.color.parse(c)};$.color.parse=function(str){var res,m=$.color.make;if(res=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(str))return m(parseInt(res[1],10),parseInt(res[2],10),parseInt(res[3],10));if(res=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(str))return m(parseInt(res[1],10),parseInt(res[2],10),parseInt(res[3],10),parseFloat(res[4]));if(res=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(str))return m(2.55*parseFloat(res[1]),2.55*parseFloat(res[2]),2.55*parseFloat(res[3]));if(res=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(str))return m(2.55*parseFloat(res[1]),2.55*parseFloat(res[2]),2.55*parseFloat(res[3]),parseFloat(res[4]));if(res=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(str))return m(parseInt(res[1],16),parseInt(res[2],16),parseInt(res[3],16));if(res=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(str))return m(parseInt(res[1]+res[1],16),parseInt(res[2]+res[2],16),parseInt(res[3]+res[3],16));var name=$.trim(str).toLowerCase();if("transparent"==name)return m(255,255,255,0);res=lookupColors[name]||[0,0,0];return m(res[0],res[1],res[2])};var lookupColors={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery);(function($){var hasOwnProperty=Object.prototype.hasOwnProperty;$.fn.detach||($.fn.detach=function(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})});function Canvas(cls,container){var element=container.children("."+cls)[0];if(null==element){element=document.createElement("canvas");element.className=cls;$(element).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(container);if(!element.getContext){if(!window.G_vmlCanvasManager)throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");element=window.G_vmlCanvasManager.initElement(element)}}this.element=element;var context=this.context=element.getContext("2d");var devicePixelRatio=window.devicePixelRatio||1,backingStoreRatio=context.webkitBackingStorePixelRatio||context.mozBackingStorePixelRatio||context.msBackingStorePixelRatio||context.oBackingStorePixelRatio||context.backingStorePixelRatio||1;this.pixelRatio=devicePixelRatio/backingStoreRatio;this.resize(container.width(),container.height());this.textContainer=null;this.text={};this._textCache={}}Canvas.prototype.resize=function(width,height){if(width<=0||height<=0)throw new Error("Invalid dimensions for plot, width = "+width+", height = "+height);var element=this.element,context=this.context,pixelRatio=this.pixelRatio;if(this.width!=width){element.width=width*pixelRatio;element.style.width=width+"px";this.width=width}if(this.height!=height){element.height=height*pixelRatio;element.style.height=height+"px";this.height=height}context.restore();context.save();context.scale(pixelRatio,pixelRatio)};Canvas.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)};Canvas.prototype.render=function(){var cache=this._textCache;for(var layerKey in cache)if(hasOwnProperty.call(cache,layerKey)){var layer=this.getTextLayer(layerKey),layerCache=cache[layerKey];layer.hide();for(var styleKey in layerCache)if(hasOwnProperty.call(layerCache,styleKey)){var styleCache=layerCache[styleKey];for(var key in styleCache)if(hasOwnProperty.call(styleCache,key)){var positions=styleCache[key].positions;for(var position,i=0;position=positions[i];i++)if(position.active){if(!position.rendered){layer.append(position.element);position.rendered=true}}else{positions.splice(i--,1);position.rendered&&position.element.detach()}0==positions.length&&delete styleCache[key]}}layer.show()}};Canvas.prototype.getTextLayer=function(classes){var layer=this.text[classes];if(null==layer){null==this.textContainer&&(this.textContainer=$("<div class='flot-text'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element));layer=this.text[classes]=$("<div></div>").addClass(classes).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)}return layer};Canvas.prototype.getTextInfo=function(layer,text,font,angle,width){var textStyle,layerCache,styleCache,info;text=""+text;textStyle="object"===("undefined"===typeof font?"undefined":_typeof(font))?font.style+" "+font.variant+" "+font.weight+" "+font.size+"px/"+font.lineHeight+"px "+font.family:font;layerCache=this._textCache[layer];null==layerCache&&(layerCache=this._textCache[layer]={});styleCache=layerCache[textStyle];null==styleCache&&(styleCache=layerCache[textStyle]={});info=styleCache[text];if(null==info){var element=$("<div></div>").html(text).css({position:"absolute","max-width":width,top:-9999}).appendTo(this.getTextLayer(layer));"object"===("undefined"===typeof font?"undefined":_typeof(font))?element.css({font:textStyle,color:font.color}):"string"===typeof font&&element.addClass(font);info=styleCache[text]={width:element.outerWidth(true),height:element.outerHeight(true),element:element,positions:[]};element.detach()}return info};Canvas.prototype.addText=function(layer,x,y,text,font,angle,width,halign,valign){var info=this.getTextInfo(layer,text,font,angle,width),positions=info.positions;"center"==halign?x-=info.width/2:"right"==halign&&(x-=info.width);"middle"==valign?y-=info.height/2:"bottom"==valign&&(y-=info.height);for(var position,i=0;position=positions[i];i++)if(position.x==x&&position.y==y){position.active=true;return}position={active:true,rendered:false,element:positions.length?info.element.clone():info.element,x:x,y:y};positions.push(position);position.element.css({top:Math.round(y),left:Math.round(x),"text-align":halign})};Canvas.prototype.removeText=function(layer,x,y,text,font,angle){if(null==text){var layerCache=this._textCache[layer];if(null!=layerCache)for(var styleKey in layerCache)if(hasOwnProperty.call(layerCache,styleKey)){var styleCache=layerCache[styleKey];for(var key in styleCache)if(hasOwnProperty.call(styleCache,key)){var positions=styleCache[key].positions;for(var i=0;position=positions[i];i++)position.active=false}}}else{positions=this.getTextInfo(layer,text,font,angle).positions;var position;for(i=0;position=positions[i];i++)position.x==x&&position.y==y&&(position.active=false)}};function Plot(placeholder,data_,options_,plugins){var series=[],options={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:true,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:false,radius:3,lineWidth:2,fill:true,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:false,fillColor:null,steps:false},bars:{show:false,lineWidth:2,barWidth:1,fill:true,fillColor:null,align:"left",horizontal:false,zero:true},shadowSize:3,highlightColor:null},grid:{show:true,aboveData:false,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:false,hoverable:false,autoHighlight:true,mouseActiveRadius:10},interaction:{redrawOverlayInterval:1e3/60},hooks:{}},surface=null,overlay=null,eventHolder=null,ctx=null,octx=null,xaxes=[],yaxes=[],plotOffset={left:0,right:0,top:0,bottom:0},plotWidth=0,plotHeight=0,hooks={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},plot=this;plot.setData=setData;plot.setupGrid=setupGrid;plot.draw=draw;plot.getPlaceholder=function(){return placeholder};plot.getCanvas=function(){return surface.element};plot.getPlotOffset=function(){return plotOffset};plot.width=function(){return plotWidth};plot.height=function(){return plotHeight};plot.offset=function(){var o=eventHolder.offset();o.left+=plotOffset.left;o.top+=plotOffset.top;return o};plot.getData=function(){return series};plot.getAxes=function(){var res={};$.each(xaxes.concat(yaxes),function(_,axis){axis&&(res[axis.direction+(1!=axis.n?axis.n:"")+"axis"]=axis)});return res};plot.getXAxes=function(){return xaxes};plot.getYAxes=function(){return yaxes};plot.c2p=canvasToAxisCoords;plot.p2c=axisToCanvasCoords;plot.getOptions=function(){return options};plot.highlight=highlight;plot.unhighlight=unhighlight;plot.triggerRedrawOverlay=triggerRedrawOverlay;plot.pointOffset=function(point){return{left:parseInt(xaxes[axisNumber(point,"x")-1].p2c(+point.x)+plotOffset.left,10),top:parseInt(yaxes[axisNumber(point,"y")-1].p2c(+point.y)+plotOffset.top,10)}};plot.shutdown=shutdown;plot.destroy=function(){shutdown();placeholder.removeData("plot").empty();series=[];options=null;surface=null;overlay=null;eventHolder=null;ctx=null;octx=null;xaxes=[];yaxes=[];hooks=null;highlights=[];plot=null};plot.resize=function(){var width=placeholder.width(),height=placeholder.height();surface.resize(width,height);overlay.resize(width,height)};plot.hooks=hooks;initPlugins(plot);parseOptions(options_);setupCanvases();setData(data_);setupGrid();draw();bindEvents();function executeHooks(hook,args){args=[plot].concat(args);for(var i=0;i<hook.length;++i)hook[i].apply(this,args)}function initPlugins(){var classes={Canvas:Canvas};for(var i=0;i<plugins.length;++i){var p=plugins[i];p.init(plot,classes);p.options&&$.extend(true,options,p.options)}}function parseOptions(opts){$.extend(true,options,opts);opts&&opts.colors&&(options.colors=opts.colors);null==options.xaxis.color&&(options.xaxis.color=$.color.parse(options.grid.color).scale("a",.22).toString());null==options.yaxis.color&&(options.yaxis.color=$.color.parse(options.grid.color).scale("a",.22).toString());null==options.xaxis.tickColor&&(options.xaxis.tickColor=options.grid.tickColor||options.xaxis.color);null==options.yaxis.tickColor&&(options.yaxis.tickColor=options.grid.tickColor||options.yaxis.color);null==options.grid.borderColor&&(options.grid.borderColor=options.grid.color);null==options.grid.tickColor&&(options.grid.tickColor=$.color.parse(options.grid.color).scale("a",.22).toString());var i,axisOptions,axisCount,fontSize=placeholder.css("font-size"),fontSizeDefault=fontSize?+fontSize.replace("px",""):13,fontDefaults={style:placeholder.css("font-style"),size:Math.round(.8*fontSizeDefault),variant:placeholder.css("font-variant"),weight:placeholder.css("font-weight"),family:placeholder.css("font-family")};axisCount=options.xaxes.length||1;for(i=0;i<axisCount;++i){axisOptions=options.xaxes[i];axisOptions&&!axisOptions.tickColor&&(axisOptions.tickColor=axisOptions.color);axisOptions=$.extend(true,{},options.xaxis,axisOptions);options.xaxes[i]=axisOptions;if(axisOptions.font){axisOptions.font=$.extend({},fontDefaults,axisOptions.font);axisOptions.font.color||(axisOptions.font.color=axisOptions.color);axisOptions.font.lineHeight||(axisOptions.font.lineHeight=Math.round(1.15*axisOptions.font.size))}}axisCount=options.yaxes.length||1;for(i=0;i<axisCount;++i){axisOptions=options.yaxes[i];axisOptions&&!axisOptions.tickColor&&(axisOptions.tickColor=axisOptions.color);axisOptions=$.extend(true,{},options.yaxis,axisOptions);options.yaxes[i]=axisOptions;if(axisOptions.font){axisOptions.font=$.extend({},fontDefaults,axisOptions.font);axisOptions.font.color||(axisOptions.font.color=axisOptions.color);axisOptions.font.lineHeight||(axisOptions.font.lineHeight=Math.round(1.15*axisOptions.font.size))}}options.xaxis.noTicks&&null==options.xaxis.ticks&&(options.xaxis.ticks=options.xaxis.noTicks);options.yaxis.noTicks&&null==options.yaxis.ticks&&(options.yaxis.ticks=options.yaxis.noTicks);if(options.x2axis){options.xaxes[1]=$.extend(true,{},options.xaxis,options.x2axis);options.xaxes[1].position="top";null==options.x2axis.min&&(options.xaxes[1].min=null);null==options.x2axis.max&&(options.xaxes[1].max=null)}if(options.y2axis){options.yaxes[1]=$.extend(true,{},options.yaxis,options.y2axis);options.yaxes[1].position="right";null==options.y2axis.min&&(options.yaxes[1].min=null);null==options.y2axis.max&&(options.yaxes[1].max=null)}options.grid.coloredAreas&&(options.grid.markings=options.grid.coloredAreas);options.grid.coloredAreasColor&&(options.grid.markingsColor=options.grid.coloredAreasColor);options.lines&&$.extend(true,options.series.lines,options.lines);options.points&&$.extend(true,options.series.points,options.points);options.bars&&$.extend(true,options.series.bars,options.bars);null!=options.shadowSize&&(options.series.shadowSize=options.shadowSize);null!=options.highlightColor&&(options.series.highlightColor=options.highlightColor);for(i=0;i<options.xaxes.length;++i)getOrCreateAxis(xaxes,i+1).options=options.xaxes[i];for(i=0;i<options.yaxes.length;++i)getOrCreateAxis(yaxes,i+1).options=options.yaxes[i];for(var n in hooks)options.hooks[n]&&options.hooks[n].length&&(hooks[n]=hooks[n].concat(options.hooks[n]));executeHooks(hooks.processOptions,[options])}function setData(d){series=parseData(d);fillInSeriesOptions();processData()}function parseData(d){var res=[];for(var i=0;i<d.length;++i){var s=$.extend(true,{},options.series);if(null!=d[i].data){s.data=d[i].data;delete d[i].data;$.extend(true,s,d[i]);d[i].data=s.data}else s.data=d[i];res.push(s)}return res}function axisNumber(obj,coord){var a=obj[coord+"axis"];"object"==("undefined"===typeof a?"undefined":_typeof(a))&&(a=a.n);"number"!=typeof a&&(a=1);return a}function allAxes(){return $.grep(xaxes.concat(yaxes),function(a){return a})}function canvasToAxisCoords(pos){var i,axis,res={};for(i=0;i<xaxes.length;++i){axis=xaxes[i];axis&&axis.used&&(res["x"+axis.n]=axis.c2p(pos.left))}for(i=0;i<yaxes.length;++i){axis=yaxes[i];axis&&axis.used&&(res["y"+axis.n]=axis.c2p(pos.top))}void 0!==res.x1&&(res.x=res.x1);void 0!==res.y1&&(res.y=res.y1);return res}function axisToCanvasCoords(pos){var i,axis,key,res={};for(i=0;i<xaxes.length;++i){axis=xaxes[i];if(axis&&axis.used){key="x"+axis.n;null==pos[key]&&1==axis.n&&(key="x");if(null!=pos[key]){res.left=axis.p2c(pos[key]);break}}}for(i=0;i<yaxes.length;++i){axis=yaxes[i];if(axis&&axis.used){key="y"+axis.n;null==pos[key]&&1==axis.n&&(key="y");if(null!=pos[key]){res.top=axis.p2c(pos[key]);break}}}return res}function getOrCreateAxis(axes,number){axes[number-1]||(axes[number-1]={n:number,direction:axes==xaxes?"x":"y",options:$.extend(true,{},axes==xaxes?options.xaxis:options.yaxis)});return axes[number-1]}function fillInSeriesOptions(){var i,neededColors=series.length,maxIndex=-1;for(i=0;i<series.length;++i){var sc=series[i].color;if(null!=sc){neededColors--;"number"==typeof sc&&sc>maxIndex&&(maxIndex=sc)}}neededColors<=maxIndex&&(neededColors=maxIndex+1);var c,colors=[],colorPool=options.colors,colorPoolSize=colorPool.length,variation=0;for(i=0;i<neededColors;i++){c=$.color.parse(colorPool[i%colorPoolSize]||"#666");i%colorPoolSize==0&&i&&(variation=variation>=0?variation<.5?-variation-.2:0:-variation);colors[i]=c.scale("rgb",1+variation)}var s,colori=0;for(i=0;i<series.length;++i){s=series[i];if(null==s.color){s.color=colors[colori].toString();++colori}else"number"==typeof s.color&&(s.color=colors[s.color].toString());if(null==s.lines.show){var v,show=true;for(v in s)if(s[v]&&s[v].show){show=false;break}show&&(s.lines.show=true)}null==s.lines.zero&&(s.lines.zero=!!s.lines.fill);s.xaxis=getOrCreateAxis(xaxes,axisNumber(s,"x"));s.yaxis=getOrCreateAxis(yaxes,axisNumber(s,"y"))}}function processData(){var i,j,k,m,s,points,ps,val,f,p,data,format,topSentry=Number.POSITIVE_INFINITY,bottomSentry=Number.NEGATIVE_INFINITY,fakeInfinity=Number.MAX_VALUE;function updateAxis(axis,min,max){min<axis.datamin&&min!=-fakeInfinity&&(axis.datamin=min);max>axis.datamax&&max!=fakeInfinity&&(axis.datamax=max)}$.each(allAxes(),function(_,axis){axis.datamin=topSentry;axis.datamax=bottomSentry;axis.used=false});for(i=0;i<series.length;++i){s=series[i];s.datapoints={points:[]};executeHooks(hooks.processRawData,[s,s.data,s.datapoints])}for(i=0;i<series.length;++i){s=series[i];data=s.data;format=s.datapoints.format;if(!format){format=[];format.push({x:true,number:true,required:true});format.push({y:true,number:true,required:true});if(s.bars.show||s.lines.show&&s.lines.fill){var autoscale=!!(s.bars.show&&s.bars.zero||s.lines.show&&s.lines.zero);format.push({y:true,number:true,required:false,defaultValue:0,autoscale:autoscale});if(s.bars.horizontal){delete format[format.length-1].y;format[format.length-1].x=true}}s.datapoints.format=format}if(null!=s.datapoints.pointsize)continue;s.datapoints.pointsize=format.length;ps=s.datapoints.pointsize;points=s.datapoints.points;var insertSteps=s.lines.show&&s.lines.steps;s.xaxis.used=s.yaxis.used=true;for(j=k=0;j<data.length;++j,k+=ps){p=data[j];var nullify=null==p;if(!nullify)for(m=0;m<ps;++m){val=p[m];f=format[m];if(f){if(f.number&&null!=val){val=+val;isNaN(val)?val=null:Infinity==val?val=fakeInfinity:-Infinity==val&&(val=-fakeInfinity)}if(null==val){f.required&&(nullify=true);null!=f.defaultValue&&(val=f.defaultValue)}}points[k+m]=val}if(nullify)for(m=0;m<ps;++m){val=points[k+m];if(null!=val){f=format[m];if(false!==f.autoscale){f.x&&updateAxis(s.xaxis,val,val);f.y&&updateAxis(s.yaxis,val,val)}}points[k+m]=null}else if(insertSteps&&k>0&&null!=points[k-ps]&&points[k-ps]!=points[k]&&points[k-ps+1]!=points[k+1]){for(m=0;m<ps;++m)points[k+ps+m]=points[k+m];points[k+1]=points[k-ps+1];k+=ps}}}for(i=0;i<series.length;++i){s=series[i];executeHooks(hooks.processDatapoints,[s,s.datapoints])}for(i=0;i<series.length;++i){s=series[i];points=s.datapoints.points;ps=s.datapoints.pointsize;format=s.datapoints.format;var xmin=topSentry,ymin=topSentry,xmax=bottomSentry,ymax=bottomSentry;for(j=0;j<points.length;j+=ps){if(null==points[j])continue;for(m=0;m<ps;++m){val=points[j+m];f=format[m];if(!f||false===f.autoscale||val==fakeInfinity||val==-fakeInfinity)continue;if(f.x){val<xmin&&(xmin=val);val>xmax&&(xmax=val)}if(f.y){val<ymin&&(ymin=val);val>ymax&&(ymax=val)}}}if(s.bars.show){var delta;switch(s.bars.align){case"left":delta=0;break;case"right":delta=-s.bars.barWidth;break;default:delta=-s.bars.barWidth/2}if(s.bars.horizontal){ymin+=delta;ymax+=delta+s.bars.barWidth}else{xmin+=delta;xmax+=delta+s.bars.barWidth}}updateAxis(s.xaxis,xmin,xmax);updateAxis(s.yaxis,ymin,ymax)}$.each(allAxes(),function(_,axis){axis.datamin==topSentry&&(axis.datamin=null);axis.datamax==bottomSentry&&(axis.datamax=null)})}function setupCanvases(){placeholder.css("padding",0).children().filter(function(){return!$(this).hasClass("flot-overlay")&&!$(this).hasClass("flot-base")}).remove();"static"==placeholder.css("position")&&placeholder.css("position","relative");surface=new Canvas("flot-base",placeholder);overlay=new Canvas("flot-overlay",placeholder);ctx=surface.context;octx=overlay.context;eventHolder=$(overlay.element).unbind();var existing=placeholder.data("plot");if(existing){existing.shutdown();overlay.clear()}placeholder.data("plot",plot)}function bindEvents(){if(options.grid.hoverable){eventHolder.mousemove(onMouseMove);eventHolder.bind("mouseleave",onMouseLeave)}options.grid.clickable&&eventHolder.click(onClick);executeHooks(hooks.bindEvents,[eventHolder])}function shutdown(){redrawTimeout&&clearTimeout(redrawTimeout);eventHolder.unbind("mousemove",onMouseMove);eventHolder.unbind("mouseleave",onMouseLeave);eventHolder.unbind("click",onClick);executeHooks(hooks.shutdown,[eventHolder])}function setTransformationHelpers(axis){function identity(x){return x}var s,m,t=axis.options.transform||identity,it=axis.options.inverseTransform;if("x"==axis.direction){s=axis.scale=plotWidth/Math.abs(t(axis.max)-t(axis.min));m=Math.min(t(axis.max),t(axis.min))}else{s=axis.scale=plotHeight/Math.abs(t(axis.max)-t(axis.min));s=-s;m=Math.max(t(axis.max),t(axis.min))}axis.p2c=t==identity?function(p){return(p-m)*s}:function(p){return(t(p)-m)*s};axis.c2p=it?function(c){return it(m+c/s)}:function(c){return m+c/s}}function measureTickLabels(axis){var opts=axis.options,ticks=axis.ticks||[],labelWidth=opts.labelWidth||0,labelHeight=opts.labelHeight||0,maxWidth=labelWidth||("x"==axis.direction?Math.floor(surface.width/(ticks.length||1)):null),legacyStyles=axis.direction+"Axis "+axis.direction+axis.n+"Axis",layer="flot-"+axis.direction+"-axis flot-"+axis.direction+axis.n+"-axis "+legacyStyles,font=opts.font||"flot-tick-label tickLabel";for(var i=0;i<ticks.length;++i){var t=ticks[i];if(!t.label)continue;var info=surface.getTextInfo(layer,t.label,font,null,maxWidth);labelWidth=Math.max(labelWidth,info.width);labelHeight=Math.max(labelHeight,info.height)}axis.labelWidth=opts.labelWidth||labelWidth;axis.labelHeight=opts.labelHeight||labelHeight}function allocateAxisBoxFirstPhase(axis){var lw=axis.labelWidth,lh=axis.labelHeight,pos=axis.options.position,isXAxis="x"===axis.direction,tickLength=axis.options.tickLength,axisMargin=options.grid.axisMargin,padding=options.grid.labelMargin,innermost=true,outermost=true,first=true,found=false;$.each(isXAxis?xaxes:yaxes,function(i,a){if(a&&(a.show||a.reserveSpace)){a===axis?found=true:a.options.position===pos&&(found?outermost=false:innermost=false);found||(first=false)}});outermost&&(axisMargin=0);null==tickLength&&(tickLength=first?"full":5);isNaN(+tickLength)||(padding+=+tickLength);if(isXAxis){lh+=padding;if("bottom"==pos){plotOffset.bottom+=lh+axisMargin;axis.box={top:surface.height-plotOffset.bottom,height:lh}}else{axis.box={top:plotOffset.top+axisMargin,height:lh};plotOffset.top+=lh+axisMargin}}else{lw+=padding;if("left"==pos){axis.box={left:plotOffset.left+axisMargin,width:lw};plotOffset.left+=lw+axisMargin}else{plotOffset.right+=lw+axisMargin;axis.box={left:surface.width-plotOffset.right,width:lw}}}axis.position=pos;axis.tickLength=tickLength;axis.box.padding=padding;axis.innermost=innermost}function allocateAxisBoxSecondPhase(axis){if("x"==axis.direction){axis.box.left=plotOffset.left-axis.labelWidth/2;axis.box.width=surface.width-plotOffset.left-plotOffset.right+axis.labelWidth}else{axis.box.top=plotOffset.top-axis.labelHeight/2;axis.box.height=surface.height-plotOffset.bottom-plotOffset.top+axis.labelHeight}}function adjustLayoutForThingsStickingOut(){var i,minMargin=options.grid.minBorderMargin;if(null==minMargin){minMargin=0;for(i=0;i<series.length;++i)minMargin=Math.max(minMargin,2*(series[i].points.radius+series[i].points.lineWidth/2))}var margins={left:minMargin,right:minMargin,top:minMargin,bottom:minMargin};$.each(allAxes(),function(_,axis){if(axis.reserveSpace&&axis.ticks&&axis.ticks.length)if("x"===axis.direction){margins.left=Math.max(margins.left,axis.labelWidth/2);margins.right=Math.max(margins.right,axis.labelWidth/2)}else{margins.bottom=Math.max(margins.bottom,axis.labelHeight/2);margins.top=Math.max(margins.top,axis.labelHeight/2)}});plotOffset.left=Math.ceil(Math.max(margins.left,plotOffset.left));plotOffset.right=Math.ceil(Math.max(margins.right,plotOffset.right));plotOffset.top=Math.ceil(Math.max(margins.top,plotOffset.top));plotOffset.bottom=Math.ceil(Math.max(margins.bottom,plotOffset.bottom))}function setupGrid(){var i,axes=allAxes(),showGrid=options.grid.show;for(var a in plotOffset){var margin=options.grid.margin||0;plotOffset[a]="number"==typeof margin?margin:margin[a]||0}executeHooks(hooks.processOffset,[plotOffset]);for(var a in plotOffset)"object"==_typeof(options.grid.borderWidth)?plotOffset[a]+=showGrid?options.grid.borderWidth[a]:0:plotOffset[a]+=showGrid?options.grid.borderWidth:0;$.each(axes,function(_,axis){var axisOpts=axis.options;axis.show=null==axisOpts.show?axis.used:axisOpts.show;axis.reserveSpace=null==axisOpts.reserveSpace?axis.show:axisOpts.reserveSpace;setRange(axis)});if(showGrid){var allocatedAxes=$.grep(axes,function(axis){return axis.show||axis.reserveSpace});$.each(allocatedAxes,function(_,axis){setupTickGeneration(axis);setTicks(axis);snapRangeToTicks(axis,axis.ticks);measureTickLabels(axis)});for(i=allocatedAxes.length-1;i>=0;--i)allocateAxisBoxFirstPhase(allocatedAxes[i]);adjustLayoutForThingsStickingOut();$.each(allocatedAxes,function(_,axis){allocateAxisBoxSecondPhase(axis)})}plotWidth=surface.width-plotOffset.left-plotOffset.right;plotHeight=surface.height-plotOffset.bottom-plotOffset.top;$.each(axes,function(_,axis){setTransformationHelpers(axis)});showGrid&&drawAxisLabels();insertLegend()}function setRange(axis){var opts=axis.options,min=+(null!=opts.min?opts.min:axis.datamin),max=+(null!=opts.max?opts.max:axis.datamax),delta=max-min;if(0==delta){var widen=0==max?1:.01;null==opts.min&&(min-=widen);null!=opts.max&&null==opts.min||(max+=widen)}else{var margin=opts.autoscaleMargin;if(null!=margin){if(null==opts.min){min-=delta*margin;min<0&&null!=axis.datamin&&axis.datamin>=0&&(min=0)}if(null==opts.max){max+=delta*margin;max>0&&null!=axis.datamax&&axis.datamax<=0&&(max=0)}}}axis.min=min;axis.max=max}function setupTickGeneration(axis){var opts=axis.options;var noTicks;noTicks="number"==typeof opts.ticks&&opts.ticks>0?opts.ticks:.3*Math.sqrt("x"==axis.direction?surface.width:surface.height);var delta=(axis.max-axis.min)/noTicks,dec=-Math.floor(Math.log(delta)/Math.LN10),maxDec=opts.tickDecimals;null!=maxDec&&dec>maxDec&&(dec=maxDec);var size,magn=Math.pow(10,-dec),norm=delta/magn;if(norm<1.5)size=1;else if(norm<3){size=2;if(norm>2.25&&(null==maxDec||dec+1<=maxDec)){size=2.5;++dec}}else size=norm<7.5?5:10;size*=magn;null!=opts.minTickSize&&size<opts.minTickSize&&(size=opts.minTickSize);axis.delta=delta;axis.tickDecimals=Math.max(0,null!=maxDec?maxDec:dec);axis.tickSize=opts.tickSize||size;if("time"==opts.mode&&!axis.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");if(!axis.tickGenerator){axis.tickGenerator=function(axis){var prev,ticks=[],start=floorInBase(axis.min,axis.tickSize),i=0,v=Number.NaN;do{prev=v;v=start+i*axis.tickSize;ticks.push(v);++i}while(v<axis.max&&v!=prev);return ticks};axis.tickFormatter=function(value,axis){var factor=axis.tickDecimals?Math.pow(10,axis.tickDecimals):1;var formatted=""+Math.round(value*factor)/factor;if(null!=axis.tickDecimals){var decimal=formatted.indexOf(".");var precision=-1==decimal?0:formatted.length-decimal-1;if(precision<axis.tickDecimals)return(precision?formatted:formatted+".")+(""+factor).substr(1,axis.tickDecimals-precision)}return formatted}}$.isFunction(opts.tickFormatter)&&(axis.tickFormatter=function(v,axis){return""+opts.tickFormatter(v,axis)});if(null!=opts.alignTicksWithAxis){var otherAxis=("x"==axis.direction?xaxes:yaxes)[opts.alignTicksWithAxis-1];if(otherAxis&&otherAxis.used&&otherAxis!=axis){var niceTicks=axis.tickGenerator(axis);if(niceTicks.length>0){null==opts.min&&(axis.min=Math.min(axis.min,niceTicks[0]));null==opts.max&&niceTicks.length>1&&(axis.max=Math.max(axis.max,niceTicks[niceTicks.length-1]))}axis.tickGenerator=function(axis){var v,i,ticks=[];for(i=0;i<otherAxis.ticks.length;++i){v=(otherAxis.ticks[i].v-otherAxis.min)/(otherAxis.max-otherAxis.min);v=axis.min+v*(axis.max-axis.min);ticks.push(v)}return ticks};if(!axis.mode&&null==opts.tickDecimals){var extraDec=Math.max(0,1-Math.floor(Math.log(axis.delta)/Math.LN10)),ts=axis.tickGenerator(axis);ts.length>1&&/\..*0$/.test((ts[1]-ts[0]).toFixed(extraDec))||(axis.tickDecimals=extraDec)}}}}function setTicks(axis){var oticks=axis.options.ticks,ticks=[];null==oticks||"number"==typeof oticks&&oticks>0?ticks=axis.tickGenerator(axis):oticks&&(ticks=$.isFunction(oticks)?oticks(axis):oticks);var i,v;axis.ticks=[];for(i=0;i<ticks.length;++i){var label=null;var t=ticks[i];if("object"==("undefined"===typeof t?"undefined":_typeof(t))){v=+t[0];t.length>1&&(label=t[1])}else v=+t;null==label&&(label=axis.tickFormatter(v,axis));isNaN(v)||axis.ticks.push({v:v,label:label})}}function snapRangeToTicks(axis,ticks){if(axis.options.autoscaleMargin&&ticks.length>0){null==axis.options.min&&(axis.min=Math.min(axis.min,ticks[0].v));null==axis.options.max&&ticks.length>1&&(axis.max=Math.max(axis.max,ticks[ticks.length-1].v))}}function draw(){surface.clear();executeHooks(hooks.drawBackground,[ctx]);var grid=options.grid;grid.show&&grid.backgroundColor&&drawBackground();grid.show&&!grid.aboveData&&drawGrid();for(var i=0;i<series.length;++i){executeHooks(hooks.drawSeries,[ctx,series[i]]);drawSeries(series[i])}executeHooks(hooks.draw,[ctx]);grid.show&&grid.aboveData&&drawGrid();surface.render();triggerRedrawOverlay()}function extractRange(ranges,coord){var axis,from,to,key,axes=allAxes();for(var i=0;i<axes.length;++i){axis=axes[i];if(axis.direction==coord){key=coord+axis.n+"axis";ranges[key]||1!=axis.n||(key=coord+"axis");if(ranges[key]){from=ranges[key].from;to=ranges[key].to;break}}}if(!ranges[key]){axis="x"==coord?xaxes[0]:yaxes[0];from=ranges[coord+"1"];to=ranges[coord+"2"]}if(null!=from&&null!=to&&from>to){var tmp=from;from=to;to=tmp}return{from:from,to:to,axis:axis}}function drawBackground(){ctx.save();ctx.translate(plotOffset.left,plotOffset.top);ctx.fillStyle=getColorOrGradient(options.grid.backgroundColor,plotHeight,0,"rgba(255, 255, 255, 0)");ctx.fillRect(0,0,plotWidth,plotHeight);ctx.restore()}function drawGrid(){var i,axes,bw,bc;ctx.save();ctx.translate(plotOffset.left,plotOffset.top);var markings=options.grid.markings;if(markings){if($.isFunction(markings)){axes=plot.getAxes();axes.xmin=axes.xaxis.min;axes.xmax=axes.xaxis.max;axes.ymin=axes.yaxis.min;axes.ymax=axes.yaxis.max;markings=markings(axes)}for(i=0;i<markings.length;++i){var m=markings[i],xrange=extractRange(m,"x"),yrange=extractRange(m,"y");null==xrange.from&&(xrange.from=xrange.axis.min);null==xrange.to&&(xrange.to=xrange.axis.max);null==yrange.from&&(yrange.from=yrange.axis.min);null==yrange.to&&(yrange.to=yrange.axis.max);if(xrange.to<xrange.axis.min||xrange.from>xrange.axis.max||yrange.to<yrange.axis.min||yrange.from>yrange.axis.max)continue;xrange.from=Math.max(xrange.from,xrange.axis.min);xrange.to=Math.min(xrange.to,xrange.axis.max);yrange.from=Math.max(yrange.from,yrange.axis.min);yrange.to=Math.min(yrange.to,yrange.axis.max);var xequal=xrange.from===xrange.to,yequal=yrange.from===yrange.to;if(xequal&&yequal)continue;xrange.from=Math.floor(xrange.axis.p2c(xrange.from));xrange.to=Math.floor(xrange.axis.p2c(xrange.to));yrange.from=Math.floor(yrange.axis.p2c(yrange.from));yrange.to=Math.floor(yrange.axis.p2c(yrange.to));if(xequal||yequal){var lineWidth=m.lineWidth||options.grid.markingsLineWidth,subPixel=lineWidth%2?.5:0;ctx.beginPath();ctx.strokeStyle=m.color||options.grid.markingsColor;ctx.lineWidth=lineWidth;if(xequal){ctx.moveTo(xrange.to+subPixel,yrange.from);ctx.lineTo(xrange.to+subPixel,yrange.to)}else{ctx.moveTo(xrange.from,yrange.to+subPixel);ctx.lineTo(xrange.to,yrange.to+subPixel)}ctx.stroke()}else{ctx.fillStyle=m.color||options.grid.markingsColor;ctx.fillRect(xrange.from,yrange.to,xrange.to-xrange.from,yrange.from-yrange.to)}}}axes=allAxes();bw=options.grid.borderWidth;for(var j=0;j<axes.length;++j){var x,y,xoff,yoff,axis=axes[j],box=axis.box,t=axis.tickLength;if(!axis.show||0==axis.ticks.length)continue;ctx.lineWidth=1;if("x"==axis.direction){x=0;y="full"==t?"top"==axis.position?0:plotHeight:box.top-plotOffset.top+("top"==axis.position?box.height:0)}else{y=0;x="full"==t?"left"==axis.position?0:plotWidth:box.left-plotOffset.left+("left"==axis.position?box.width:0)}if(!axis.innermost){ctx.strokeStyle=axis.options.color;ctx.beginPath();xoff=yoff=0;"x"==axis.direction?xoff=plotWidth+1:yoff=plotHeight+1;1==ctx.lineWidth&&("x"==axis.direction?y=Math.floor(y)+.5:x=Math.floor(x)+.5);ctx.moveTo(x,y);ctx.lineTo(x+xoff,y+yoff);ctx.stroke()}ctx.strokeStyle=axis.options.tickColor;ctx.beginPath();for(i=0;i<axis.ticks.length;++i){var v=axis.ticks[i].v;xoff=yoff=0;if(isNaN(v)||v<axis.min||v>axis.max||"full"==t&&("object"==("undefined"===typeof bw?"undefined":_typeof(bw))&&bw[axis.position]>0||bw>0)&&(v==axis.min||v==axis.max))continue;if("x"==axis.direction){x=axis.p2c(v);yoff="full"==t?-plotHeight:t;"top"==axis.position&&(yoff=-yoff)}else{y=axis.p2c(v);xoff="full"==t?-plotWidth:t;"left"==axis.position&&(xoff=-xoff)}1==ctx.lineWidth&&("x"==axis.direction?x=Math.floor(x)+.5:y=Math.floor(y)+.5);ctx.moveTo(x,y);ctx.lineTo(x+xoff,y+yoff)}ctx.stroke()}if(bw){bc=options.grid.borderColor;if("object"==("undefined"===typeof bw?"undefined":_typeof(bw))||"object"==("undefined"===typeof bc?"undefined":_typeof(bc))){"object"!==("undefined"===typeof bw?"undefined":_typeof(bw))&&(bw={top:bw,right:bw,bottom:bw,left:bw});"object"!==("undefined"===typeof bc?"undefined":_typeof(bc))&&(bc={top:bc,right:bc,bottom:bc,left:bc});if(bw.top>0){ctx.strokeStyle=bc.top;ctx.lineWidth=bw.top;ctx.beginPath();ctx.moveTo(0-bw.left,0-bw.top/2);ctx.lineTo(plotWidth,0-bw.top/2);ctx.stroke()}if(bw.right>0){ctx.strokeStyle=bc.right;ctx.lineWidth=bw.right;ctx.beginPath();ctx.moveTo(plotWidth+bw.right/2,0-bw.top);ctx.lineTo(plotWidth+bw.right/2,plotHeight);ctx.stroke()}if(bw.bottom>0){ctx.strokeStyle=bc.bottom;ctx.lineWidth=bw.bottom;ctx.beginPath();ctx.moveTo(plotWidth+bw.right,plotHeight+bw.bottom/2);ctx.lineTo(0,plotHeight+bw.bottom/2);ctx.stroke()}if(bw.left>0){ctx.strokeStyle=bc.left;ctx.lineWidth=bw.left;ctx.beginPath();ctx.moveTo(0-bw.left/2,plotHeight+bw.bottom);ctx.lineTo(0-bw.left/2,0);ctx.stroke()}}else{ctx.lineWidth=bw;ctx.strokeStyle=options.grid.borderColor;ctx.strokeRect(-bw/2,-bw/2,plotWidth+bw,plotHeight+bw)}}ctx.restore()}function drawAxisLabels(){$.each(allAxes(),function(_,axis){var tick,x,y,halign,valign,box=axis.box,legacyStyles=axis.direction+"Axis "+axis.direction+axis.n+"Axis",layer="flot-"+axis.direction+"-axis flot-"+axis.direction+axis.n+"-axis "+legacyStyles,font=axis.options.font||"flot-tick-label tickLabel";surface.removeText(layer);if(!axis.show||0==axis.ticks.length)return;for(var i=0;i<axis.ticks.length;++i){tick=axis.ticks[i];if(!tick.label||tick.v<axis.min||tick.v>axis.max)continue;if("x"==axis.direction){halign="center";x=plotOffset.left+axis.p2c(tick.v);if("bottom"==axis.position)y=box.top+box.padding;else{y=box.top+box.height-box.padding;valign="bottom"}}else{valign="middle";y=plotOffset.top+axis.p2c(tick.v);if("left"==axis.position){x=box.left+box.width-box.padding;halign="right"}else x=box.left+box.padding}surface.addText(layer,x,y,tick.label,font,null,null,halign,valign)}})}function drawSeries(series){series.lines.show&&drawSeriesLines(series);series.bars.show&&drawSeriesBars(series);series.points.show&&drawSeriesPoints(series)}function drawSeriesLines(series){function plotLine(datapoints,xoffset,yoffset,axisx,axisy){var points=datapoints.points,ps=datapoints.pointsize,prevx=null,prevy=null;ctx.beginPath();for(var i=ps;i<points.length;i+=ps){var x1=points[i-ps],y1=points[i-ps+1],x2=points[i],y2=points[i+1];if(null==x1||null==x2)continue;if(y1<=y2&&y1<axisy.min){if(y2<axisy.min)continue;x1=(axisy.min-y1)/(y2-y1)*(x2-x1)+x1;y1=axisy.min}else if(y2<=y1&&y2<axisy.min){if(y1<axisy.min)continue;x2=(axisy.min-y1)/(y2-y1)*(x2-x1)+x1;y2=axisy.min}if(y1>=y2&&y1>axisy.max){if(y2>axisy.max)continue;x1=(axisy.max-y1)/(y2-y1)*(x2-x1)+x1;y1=axisy.max}else if(y2>=y1&&y2>axisy.max){if(y1>axisy.max)continue;x2=(axisy.max-y1)/(y2-y1)*(x2-x1)+x1;y2=axisy.max}if(x1<=x2&&x1<axisx.min){if(x2<axisx.min)continue;y1=(axisx.min-x1)/(x2-x1)*(y2-y1)+y1;x1=axisx.min}else if(x2<=x1&&x2<axisx.min){if(x1<axisx.min)continue;y2=(axisx.min-x1)/(x2-x1)*(y2-y1)+y1;x2=axisx.min}if(x1>=x2&&x1>axisx.max){if(x2>axisx.max)continue;y1=(axisx.max-x1)/(x2-x1)*(y2-y1)+y1;x1=axisx.max}else if(x2>=x1&&x2>axisx.max){if(x1>axisx.max)continue;y2=(axisx.max-x1)/(x2-x1)*(y2-y1)+y1;x2=axisx.max}x1==prevx&&y1==prevy||ctx.moveTo(axisx.p2c(x1)+xoffset,axisy.p2c(y1)+yoffset);prevx=x2;prevy=y2;ctx.lineTo(axisx.p2c(x2)+xoffset,axisy.p2c(y2)+yoffset)}ctx.stroke()}function plotLineArea(datapoints,axisx,axisy){var points=datapoints.points,ps=datapoints.pointsize,bottom=Math.min(Math.max(0,axisy.min),axisy.max),i=0,areaOpen=false,ypos=1,segmentStart=0,segmentEnd=0;while(true){if(ps>0&&i>points.length+ps)break;i+=ps;var x1=points[i-ps],y1=points[i-ps+ypos],x2=points[i],y2=points[i+ypos];if(areaOpen){if(ps>0&&null!=x1&&null==x2){segmentEnd=i;ps=-ps;ypos=2;continue}if(ps<0&&i==segmentStart+ps){ctx.fill();areaOpen=false;ps=-ps;ypos=1;i=segmentStart=segmentEnd+ps;continue}}if(null==x1||null==x2)continue;if(x1<=x2&&x1<axisx.min){if(x2<axisx.min)continue;y1=(axisx.min-x1)/(x2-x1)*(y2-y1)+y1;x1=axisx.min}else if(x2<=x1&&x2<axisx.min){if(x1<axisx.min)continue;y2=(axisx.min-x1)/(x2-x1)*(y2-y1)+y1;x2=axisx.min}if(x1>=x2&&x1>axisx.max){if(x2>axisx.max)continue;y1=(axisx.max-x1)/(x2-x1)*(y2-y1)+y1;x1=axisx.max}else if(x2>=x1&&x2>axisx.max){if(x1>axisx.max)continue;y2=(axisx.max-x1)/(x2-x1)*(y2-y1)+y1;x2=axisx.max}if(!areaOpen){ctx.beginPath();ctx.moveTo(axisx.p2c(x1),axisy.p2c(bottom));areaOpen=true}if(y1>=axisy.max&&y2>=axisy.max){ctx.lineTo(axisx.p2c(x1),axisy.p2c(axisy.max));ctx.lineTo(axisx.p2c(x2),axisy.p2c(axisy.max));continue}if(y1<=axisy.min&&y2<=axisy.min){ctx.lineTo(axisx.p2c(x1),axisy.p2c(axisy.min));ctx.lineTo(axisx.p2c(x2),axisy.p2c(axisy.min));continue}var x1old=x1,x2old=x2;if(y1<=y2&&y1<axisy.min&&y2>=axisy.min){x1=(axisy.min-y1)/(y2-y1)*(x2-x1)+x1;y1=axisy.min}else if(y2<=y1&&y2<axisy.min&&y1>=axisy.min){x2=(axisy.min-y1)/(y2-y1)*(x2-x1)+x1;y2=axisy.min}if(y1>=y2&&y1>axisy.max&&y2<=axisy.max){x1=(axisy.max-y1)/(y2-y1)*(x2-x1)+x1;y1=axisy.max}else if(y2>=y1&&y2>axisy.max&&y1<=axisy.max){x2=(axisy.max-y1)/(y2-y1)*(x2-x1)+x1;y2=axisy.max}x1!=x1old&&ctx.lineTo(axisx.p2c(x1old),axisy.p2c(y1));ctx.lineTo(axisx.p2c(x1),axisy.p2c(y1));ctx.lineTo(axisx.p2c(x2),axisy.p2c(y2));if(x2!=x2old){ctx.lineTo(axisx.p2c(x2),axisy.p2c(y2));ctx.lineTo(axisx.p2c(x2old),axisy.p2c(y2))}}}ctx.save();ctx.translate(plotOffset.left,plotOffset.top);ctx.lineJoin="round";var lw=series.lines.lineWidth,sw=series.shadowSize;if(lw>0&&sw>0){ctx.lineWidth=sw;ctx.strokeStyle="rgba(0,0,0,0.1)";var angle=Math.PI/18;plotLine(series.datapoints,Math.sin(angle)*(lw/2+sw/2),Math.cos(angle)*(lw/2+sw/2),series.xaxis,series.yaxis);ctx.lineWidth=sw/2;plotLine(series.datapoints,Math.sin(angle)*(lw/2+sw/4),Math.cos(angle)*(lw/2+sw/4),series.xaxis,series.yaxis)}ctx.lineWidth=lw;ctx.strokeStyle=series.color;var fillStyle=getFillStyle(series.lines,series.color,0,plotHeight);if(fillStyle){ctx.fillStyle=fillStyle;plotLineArea(series.datapoints,series.xaxis,series.yaxis)}lw>0&&plotLine(series.datapoints,0,0,series.xaxis,series.yaxis);ctx.restore()}function drawSeriesPoints(series){function plotPoints(datapoints,radius,fillStyle,offset,shadow,axisx,axisy,symbol){var points=datapoints.points,ps=datapoints.pointsize;for(var i=0;i<points.length;i+=ps){var x=points[i],y=points[i+1];if(null==x||x<axisx.min||x>axisx.max||y<axisy.min||y>axisy.max)continue;ctx.beginPath();x=axisx.p2c(x);y=axisy.p2c(y)+offset;"circle"==symbol?ctx.arc(x,y,radius,0,shadow?Math.PI:2*Math.PI,false):symbol(ctx,x,y,radius,shadow);ctx.closePath();if(fillStyle){ctx.fillStyle=fillStyle;ctx.fill()}ctx.stroke()}}ctx.save();ctx.translate(plotOffset.left,plotOffset.top);var lw=series.points.lineWidth,sw=series.shadowSize,radius=series.points.radius,symbol=series.points.symbol;0==lw&&(lw=1e-4);if(lw>0&&sw>0){var w=sw/2;ctx.lineWidth=w;ctx.strokeStyle="rgba(0,0,0,0.1)";plotPoints(series.datapoints,radius,null,w+w/2,true,series.xaxis,series.yaxis,symbol);ctx.strokeStyle="rgba(0,0,0,0.2)";plotPoints(series.datapoints,radius,null,w/2,true,series.xaxis,series.yaxis,symbol)}ctx.lineWidth=lw;ctx.strokeStyle=series.color;plotPoints(series.datapoints,radius,getFillStyle(series.points,series.color),0,false,series.xaxis,series.yaxis,symbol);ctx.restore()}function drawBar(x,y,b,barLeft,barRight,fillStyleCallback,axisx,axisy,c,horizontal,lineWidth){var left,right,bottom,top,drawLeft,drawRight,drawTop,drawBottom,tmp;if(horizontal){drawBottom=drawRight=drawTop=true;drawLeft=false;left=b;right=x;top=y+barLeft;bottom=y+barRight;if(right<left){tmp=right;right=left;left=tmp;drawLeft=true;drawRight=false}}else{drawLeft=drawRight=drawTop=true;drawBottom=false;left=x+barLeft;right=x+barRight;bottom=b;top=y;if(top<bottom){tmp=top;top=bottom;bottom=tmp;drawBottom=true;drawTop=false}}if(right<axisx.min||left>axisx.max||top<axisy.min||bottom>axisy.max)return;if(left<axisx.min){left=axisx.min;drawLeft=false}if(right>axisx.max){right=axisx.max;drawRight=false}if(bottom<axisy.min){bottom=axisy.min;drawBottom=false}if(top>axisy.max){top=axisy.max;drawTop=false}left=axisx.p2c(left);bottom=axisy.p2c(bottom);right=axisx.p2c(right);top=axisy.p2c(top);if(fillStyleCallback){c.fillStyle=fillStyleCallback(bottom,top);c.fillRect(left,top,right-left,bottom-top)}if(lineWidth>0&&(drawLeft||drawRight||drawTop||drawBottom)){c.beginPath();c.moveTo(left,bottom);drawLeft?c.lineTo(left,top):c.moveTo(left,top);drawTop?c.lineTo(right,top):c.moveTo(right,top);drawRight?c.lineTo(right,bottom):c.moveTo(right,bottom);drawBottom?c.lineTo(left,bottom):c.moveTo(left,bottom);c.stroke()}}function drawSeriesBars(series){function plotBars(datapoints,barLeft,barRight,fillStyleCallback,axisx,axisy){var points=datapoints.points,ps=datapoints.pointsize;for(var i=0;i<points.length;i+=ps){if(null==points[i])continue;drawBar(points[i],points[i+1],points[i+2],barLeft,barRight,fillStyleCallback,axisx,axisy,ctx,series.bars.horizontal,series.bars.lineWidth)}}ctx.save();ctx.translate(plotOffset.left,plotOffset.top);ctx.lineWidth=series.bars.lineWidth;ctx.strokeStyle=series.color;var barLeft;switch(series.bars.align){case"left":barLeft=0;break;case"right":barLeft=-series.bars.barWidth;break;default:barLeft=-series.bars.barWidth/2}var fillStyleCallback=series.bars.fill?function(bottom,top){return getFillStyle(series.bars,series.color,bottom,top)}:null;plotBars(series.datapoints,barLeft,barLeft+series.bars.barWidth,fillStyleCallback,series.xaxis,series.yaxis);ctx.restore()}function getFillStyle(filloptions,seriesColor,bottom,top){var fill=filloptions.fill;if(!fill)return null;if(filloptions.fillColor)return getColorOrGradient(filloptions.fillColor,bottom,top,seriesColor);var c=$.color.parse(seriesColor);c.a="number"==typeof fill?fill:.4;c.normalize();return c.toString()}function insertLegend(){null!=options.legend.container?$(options.legend.container).html(""):placeholder.find(".legend").remove();if(!options.legend.show)return;var s,label,fragments=[],entries=[],rowStarted=false,lf=options.legend.labelFormatter;for(var i=0;i<series.length;++i){s=series[i];if(s.label){label=lf?lf(s.label,s):s.label;label&&entries.push({label:label,color:s.color})}}if(options.legend.sorted)if($.isFunction(options.legend.sorted))entries.sort(options.legend.sorted);else if("reverse"==options.legend.sorted)entries.reverse();else{var ascending="descending"!=options.legend.sorted;entries.sort(function(a,b){return a.label==b.label?0:a.label<b.label!=ascending?1:-1})}for(i=0;i<entries.length;++i){var entry=entries[i];if(i%options.legend.noColumns==0){rowStarted&&fragments.push("</tr>");fragments.push("<tr>");rowStarted=true}fragments.push('<td class="legendColorBox"><div style="border:1px solid '+options.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+entry.color+';overflow:hidden"></div></div></td><td class="legendLabel" data-test-subj="flotLegendLabel">'+entry.label+"</td>")}rowStarted&&fragments.push("</tr>");if(0==fragments.length)return;var table='<table style="font-size:smaller;color:'+options.grid.color+'">'+fragments.join("")+"</table>";if(null!=options.legend.container)$(options.legend.container).html(table);else{var pos="",p=options.legend.position,m=options.legend.margin;null==m[0]&&(m=[m,m]);"n"==p.charAt(0)?pos+="top:"+(m[1]+plotOffset.top)+"px;":"s"==p.charAt(0)&&(pos+="bottom:"+(m[1]+plotOffset.bottom)+"px;");"e"==p.charAt(1)?pos+="right:"+(m[0]+plotOffset.right)+"px;":"w"==p.charAt(1)&&(pos+="left:"+(m[0]+plotOffset.left)+"px;");var legend=$('<div class="legend">'+table.replace('style="','style="position:absolute;'+pos+";")+"</div>").appendTo(placeholder);if(0!=options.legend.backgroundOpacity){var c=options.legend.backgroundColor;if(null==c){c=options.grid.backgroundColor;c=c&&"string"==typeof c?$.color.parse(c):$.color.extract(legend,"background-color");c.a=1;c=c.toString()}var div=legend.children();$('<div style="position:absolute;width:'+div.width()+"px;height:"+div.height()+"px;"+pos+"background-color:"+c+';"> </div>').prependTo(legend).css("opacity",options.legend.backgroundOpacity)}}}var highlights=[],redrawTimeout=null;function findNearbyItem(mouseX,mouseY,seriesFilter){var i,j,ps,maxDistance=options.grid.mouseActiveRadius,smallestDistance=maxDistance*maxDistance+1,item=null;for(i=series.length-1;i>=0;--i){if(!seriesFilter(series[i]))continue;var s=series[i],axisx=s.xaxis,axisy=s.yaxis,points=s.datapoints.points,mx=axisx.c2p(mouseX),my=axisy.c2p(mouseY),maxx=maxDistance/axisx.scale,maxy=maxDistance/axisy.scale;ps=s.datapoints.pointsize;axisx.options.inverseTransform&&(maxx=Number.MAX_VALUE);axisy.options.inverseTransform&&(maxy=Number.MAX_VALUE);if(s.lines.show||s.points.show)for(j=0;j<points.length;j+=ps){var x=points[j],y=points[j+1];if(null==x)continue;if(x-mx>maxx||x-mx<-maxx||y-my>maxy||y-my<-maxy)continue;var dx=Math.abs(axisx.p2c(x)-mouseX),dy=Math.abs(axisy.p2c(y)-mouseY),dist=dx*dx+dy*dy;if(dist<smallestDistance){smallestDistance=dist;item=[i,j/ps]}}if(s.bars.show&&!item){var barLeft,barRight;switch(s.bars.align){case"left":barLeft=0;break;case"right":barLeft=-s.bars.barWidth;break;default:barLeft=-s.bars.barWidth/2}barRight=barLeft+s.bars.barWidth;for(j=0;j<points.length;j+=ps){x=points[j],y=points[j+1];var b=points[j+2];if(null==x)continue;(series[i].bars.horizontal?mx<=Math.max(b,x)&&mx>=Math.min(b,x)&&my>=y+barLeft&&my<=y+barRight:mx>=x+barLeft&&mx<=x+barRight&&my>=Math.min(b,y)&&my<=Math.max(b,y))&&(item=[i,j/ps])}}}if(item){i=item[0];j=item[1];ps=series[i].datapoints.pointsize;return{datapoint:series[i].datapoints.points.slice(j*ps,(j+1)*ps),dataIndex:j,series:series[i],seriesIndex:i}}return null}function onMouseMove(e){options.grid.hoverable&&triggerClickHoverEvent("plothover",e,function(s){return false!=s["hoverable"]})}function onMouseLeave(e){options.grid.hoverable&&triggerClickHoverEvent("plothover",e,function(s){return false})}function onClick(e){triggerClickHoverEvent("plotclick",e,function(s){return false!=s["clickable"]})}function triggerClickHoverEvent(eventname,event,seriesFilter){var offset=eventHolder.offset(),canvasX=event.pageX-offset.left-plotOffset.left,canvasY=event.pageY-offset.top-plotOffset.top,pos=canvasToAxisCoords({left:canvasX,top:canvasY});pos.pageX=event.pageX;pos.pageY=event.pageY;var item=findNearbyItem(canvasX,canvasY,seriesFilter);if(item){item.pageX=parseInt(item.series.xaxis.p2c(item.datapoint[0])+offset.left+plotOffset.left,10);item.pageY=parseInt(item.series.yaxis.p2c(item.datapoint[1])+offset.top+plotOffset.top,10)}if(options.grid.autoHighlight){for(var i=0;i<highlights.length;++i){var h=highlights[i];h.auto!=eventname||item&&h.series==item.series&&h.point[0]==item.datapoint[0]&&h.point[1]==item.datapoint[1]||unhighlight(h.series,h.point)}item&&highlight(item.series,item.datapoint,eventname)}placeholder.trigger(eventname,[pos,item])}function triggerRedrawOverlay(){var t=options.interaction.redrawOverlayInterval;if(-1==t){drawOverlay();return}redrawTimeout||(redrawTimeout=setTimeout(drawOverlay,t))}function drawOverlay(){redrawTimeout=null;octx.save();overlay.clear();octx.translate(plotOffset.left,plotOffset.top);var i,hi;for(i=0;i<highlights.length;++i){hi=highlights[i];hi.series.bars.show?drawBarHighlight(hi.series,hi.point):drawPointHighlight(hi.series,hi.point)}octx.restore();executeHooks(hooks.drawOverlay,[octx])}function highlight(s,point,auto){"number"==typeof s&&(s=series[s]);if("number"==typeof point){var ps=s.datapoints.pointsize;point=s.datapoints.points.slice(ps*point,ps*(point+1))}var i=indexOfHighlight(s,point);if(-1==i){highlights.push({series:s,point:point,auto:auto});triggerRedrawOverlay()}else auto||(highlights[i].auto=false)}function unhighlight(s,point){if(null==s&&null==point){highlights=[];triggerRedrawOverlay();return}"number"==typeof s&&(s=series[s]);if("number"==typeof point){var ps=s.datapoints.pointsize;point=s.datapoints.points.slice(ps*point,ps*(point+1))}var i=indexOfHighlight(s,point);if(-1!=i){highlights.splice(i,1);triggerRedrawOverlay()}}function indexOfHighlight(s,p){for(var i=0;i<highlights.length;++i){var h=highlights[i];if(h.series==s&&h.point[0]==p[0]&&h.point[1]==p[1])return i}return-1}function drawPointHighlight(series,point){var x=point[0],y=point[1],axisx=series.xaxis,axisy=series.yaxis,highlightColor="string"===typeof series.highlightColor?series.highlightColor:$.color.parse(series.color).scale("a",.5).toString();if(x<axisx.min||x>axisx.max||y<axisy.min||y>axisy.max)return;var pointRadius=series.points.radius+series.points.lineWidth/2;octx.lineWidth=pointRadius;octx.strokeStyle=highlightColor;var radius=1.5*pointRadius;x=axisx.p2c(x);y=axisy.p2c(y);octx.beginPath();"circle"==series.points.symbol?octx.arc(x,y,radius,0,2*Math.PI,false):series.points.symbol(octx,x,y,radius,false);octx.closePath();octx.stroke()}function drawBarHighlight(series,point){var barLeft,highlightColor="string"===typeof series.highlightColor?series.highlightColor:$.color.parse(series.color).scale("a",.5).toString(),fillStyle=highlightColor;switch(series.bars.align){case"left":barLeft=0;break;case"right":barLeft=-series.bars.barWidth;break;default:barLeft=-series.bars.barWidth/2}octx.lineWidth=series.bars.lineWidth;octx.strokeStyle=highlightColor;drawBar(point[0],point[1],point[2]||0,barLeft,barLeft+series.bars.barWidth,function(){return fillStyle},series.xaxis,series.yaxis,octx,series.bars.horizontal,series.bars.lineWidth)}function getColorOrGradient(spec,bottom,top,defaultColor){if("string"==typeof spec)return spec;var gradient=ctx.createLinearGradient(0,top,0,bottom);for(var i=0,l=spec.colors.length;i<l;++i){var c=spec.colors[i];if("string"!=typeof c){var co=$.color.parse(defaultColor);null!=c.brightness&&(co=co.scale("rgb",c.brightness));null!=c.opacity&&(co.a*=c.opacity);c=co.toString()}gradient.addColorStop(i/(l-1),c)}return gradient}}$.plot=function(placeholder,data,options){var plot=new Plot($(placeholder),data,options,$.plot.plugins);return plot};$.plot.version="0.8.3";$.plot.plugins=[];$.fn.plot=function(data,options){return this.each(function(){$.plot(this,data,options)})};function floorInBase(n,base){return base*Math.floor(n/base)}})(jQuery)},function(module,exports,__webpack_require__){"use strict";(function($){var options={xaxis:{timezone:null,timeformat:null,twelveHourClock:false,monthNames:null}};function floorInBase(n,base){return base*Math.floor(n/base)}function formatDate(d,fmt,monthNames,dayNames){if("function"==typeof d.strftime)return d.strftime(fmt);var leftPad=function leftPad(n,pad){n=""+n;pad=""+(null==pad?"0":pad);return 1==n.length?pad+n:n};var r=[];var escape=false;var hours=d.getHours();var isAM=hours<12;null==monthNames&&(monthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]);null==dayNames&&(dayNames=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]);var hours12;hours12=hours>12?hours-12:0==hours?12:hours;for(var i=0;i<fmt.length;++i){var c=fmt.charAt(i);if(escape){switch(c){case"a":c=""+dayNames[d.getDay()];break;case"b":c=""+monthNames[d.getMonth()];break;case"d":c=leftPad(d.getDate());break;case"e":c=leftPad(d.getDate()," ");break;case"h":case"H":c=leftPad(hours);break;case"I":c=leftPad(hours12);break;case"l":c=leftPad(hours12," ");break;case"m":c=leftPad(d.getMonth()+1);break;case"M":c=leftPad(d.getMinutes());break;case"q":c=""+(Math.floor(d.getMonth()/3)+1);break;case"S":c=leftPad(d.getSeconds());break;case"y":c=leftPad(d.getFullYear()%100);break;case"Y":c=""+d.getFullYear();break;case"p":c=isAM?"am":"pm";break;case"P":c=isAM?"AM":"PM";break;case"w":c=""+d.getDay()}r.push(c);escape=false}else"%"==c?escape=true:r.push(c)}return r.join("")}function makeUtcWrapper(d){function addProxyMethod(sourceObj,sourceMethod,targetObj,targetMethod){sourceObj[sourceMethod]=function(){return targetObj[targetMethod].apply(targetObj,arguments)}}var utc={date:d};void 0!=d.strftime&&addProxyMethod(utc,"strftime",d,"strftime");addProxyMethod(utc,"getTime",d,"getTime");addProxyMethod(utc,"setTime",d,"setTime");var props=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"];for(var p=0;p<props.length;p++){addProxyMethod(utc,"get"+props[p],d,"getUTC"+props[p]);addProxyMethod(utc,"set"+props[p],d,"setUTC"+props[p])}return utc}function dateGenerator(ts,opts){if("browser"==opts.timezone)return new Date(ts);if(opts.timezone&&"utc"!=opts.timezone){if("undefined"!=typeof timezoneJS&&"undefined"!=typeof timezoneJS.Date){var d=new timezoneJS.Date;d.setTimezone(opts.timezone);d.setTime(ts);return d}return makeUtcWrapper(new Date(ts))}return makeUtcWrapper(new Date(ts))}var timeUnitSize={second:1e3,minute:6e4,hour:36e5,day:864e5,month:2592e6,quarter:7776e6,year:525949.2*60*1e3};var baseSpec=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"]];var specMonths=baseSpec.concat([[3,"month"],[6,"month"],[1,"year"]]);var specQuarters=baseSpec.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);function init(plot){plot.hooks.processOptions.push(function(plot,options){$.each(plot.getAxes(),function(axisName,axis){var opts=axis.options;if("time"==opts.mode){axis.tickGenerator=function(axis){var ticks=[];var d=dateGenerator(axis.min,opts);var minSize=0;var spec=opts.tickSize&&"quarter"===opts.tickSize[1]||opts.minTickSize&&"quarter"===opts.minTickSize[1]?specQuarters:specMonths;null!=opts.minTickSize&&(minSize="number"==typeof opts.tickSize?opts.tickSize:opts.minTickSize[0]*timeUnitSize[opts.minTickSize[1]]);for(var i=0;i<spec.length-1;++i)if(axis.delta<(spec[i][0]*timeUnitSize[spec[i][1]]+spec[i+1][0]*timeUnitSize[spec[i+1][1]])/2&&spec[i][0]*timeUnitSize[spec[i][1]]>=minSize)break;var size=spec[i][0];var unit=spec[i][1];if("year"==unit){if(null!=opts.minTickSize&&"year"==opts.minTickSize[1])size=Math.floor(opts.minTickSize[0]);else{var magn=Math.pow(10,Math.floor(Math.log(axis.delta/timeUnitSize.year)/Math.LN10));var norm=axis.delta/timeUnitSize.year/magn;size=norm<1.5?1:norm<3?2:norm<7.5?5:10;size*=magn}size<1&&(size=1)}axis.tickSize=opts.tickSize||[size,unit];var tickSize=axis.tickSize[0];unit=axis.tickSize[1];var step=tickSize*timeUnitSize[unit];"second"==unit?d.setSeconds(floorInBase(d.getSeconds(),tickSize)):"minute"==unit?d.setMinutes(floorInBase(d.getMinutes(),tickSize)):"hour"==unit?d.setHours(floorInBase(d.getHours(),tickSize)):"month"==unit?d.setMonth(floorInBase(d.getMonth(),tickSize)):"quarter"==unit?d.setMonth(3*floorInBase(d.getMonth()/3,tickSize)):"year"==unit&&d.setFullYear(floorInBase(d.getFullYear(),tickSize));d.setMilliseconds(0);step>=timeUnitSize.minute&&d.setSeconds(0);step>=timeUnitSize.hour&&d.setMinutes(0);step>=timeUnitSize.day&&d.setHours(0);step>=4*timeUnitSize.day&&d.setDate(1);step>=2*timeUnitSize.month&&d.setMonth(floorInBase(d.getMonth(),3));step>=2*timeUnitSize.quarter&&d.setMonth(floorInBase(d.getMonth(),6));step>=timeUnitSize.year&&d.setMonth(0);var carry=0;var v=Number.NaN;var prev;do{prev=v;v=d.getTime();ticks.push(v);if("month"==unit||"quarter"==unit)if(tickSize<1){d.setDate(1);var start=d.getTime();d.setMonth(d.getMonth()+("quarter"==unit?3:1));var end=d.getTime();d.setTime(v+carry*timeUnitSize.hour+(end-start)*tickSize);carry=d.getHours();d.setHours(0)}else d.setMonth(d.getMonth()+tickSize*("quarter"==unit?3:1));else"year"==unit?d.setFullYear(d.getFullYear()+tickSize):d.setTime(v+step)}while(v<axis.max&&v!=prev);return ticks};axis.tickFormatter=function(v,axis){var d=dateGenerator(v,axis.options);if(null!=opts.timeformat)return formatDate(d,opts.timeformat,opts.monthNames,opts.dayNames);var useQuarters=axis.options.tickSize&&"quarter"==axis.options.tickSize[1]||axis.options.minTickSize&&"quarter"==axis.options.minTickSize[1];var t=axis.tickSize[0]*timeUnitSize[axis.tickSize[1]];var span=axis.max-axis.min;var suffix=opts.twelveHourClock?" %p":"";var hourCode=opts.twelveHourClock?"%I":"%H";var fmt;fmt=t<timeUnitSize.minute?hourCode+":%M:%S"+suffix:t<timeUnitSize.day?span<2*timeUnitSize.day?hourCode+":%M"+suffix:"%b %d "+hourCode+":%M"+suffix:t<timeUnitSize.month?"%b %d":useQuarters&&t<timeUnitSize.quarter||!useQuarters&&t<timeUnitSize.year?span<timeUnitSize.year?"%b":"%b %Y":useQuarters&&t<timeUnitSize.year?span<timeUnitSize.year?"Q%q":"Q%q %Y":"%Y";var rt=formatDate(d,fmt,opts.monthNames,opts.dayNames);return rt}}})})}$.plot.plugins.push({init:init,options:options,name:"time",version:"1.0"});$.plot.formatDate=formatDate;$.plot.dateGenerator=dateGenerator})(jQuery)},function(module,exports,__webpack_require__){"use strict";(function($){var options={crosshair:{mode:null,color:"rgba(170, 0, 0, 0.80)",lineWidth:1}};function init(plot){var crosshair={x:-1,y:-1,locked:false};plot.setCrosshair=function setCrosshair(pos){if(pos){var o=plot.p2c(pos);crosshair.x=Math.max(0,Math.min(o.left,plot.width()));crosshair.y=Math.max(0,Math.min(o.top,plot.height()))}else crosshair.x=-1;plot.triggerRedrawOverlay()};plot.clearCrosshair=plot.setCrosshair;plot.lockCrosshair=function lockCrosshair(pos){pos&&plot.setCrosshair(pos);crosshair.locked=true};plot.unlockCrosshair=function unlockCrosshair(){crosshair.locked=false};function onMouseOut(e){if(crosshair.locked)return;if(-1!=crosshair.x){crosshair.x=-1;plot.triggerRedrawOverlay()}}function onMouseMove(e){if(crosshair.locked)return;if(plot.getSelection&&plot.getSelection()){crosshair.x=-1;return}var offset=plot.offset();crosshair.x=Math.max(0,Math.min(e.pageX-offset.left,plot.width()));crosshair.y=Math.max(0,Math.min(e.pageY-offset.top,plot.height()));plot.triggerRedrawOverlay()}plot.hooks.bindEvents.push(function(plot,eventHolder){if(!plot.getOptions().crosshair.mode)return;eventHolder.mouseout(onMouseOut);eventHolder.mousemove(onMouseMove)});plot.hooks.drawOverlay.push(function(plot,ctx){var c=plot.getOptions().crosshair;if(!c.mode)return;var plotOffset=plot.getPlotOffset();ctx.save();ctx.translate(plotOffset.left,plotOffset.top);if(-1!=crosshair.x){var adj=plot.getOptions().crosshair.lineWidth%2?.5:0;ctx.strokeStyle=c.color;ctx.lineWidth=c.lineWidth;ctx.lineJoin="round";ctx.beginPath();if(-1!=c.mode.indexOf("x")){var drawX=Math.floor(crosshair.x)+adj;ctx.moveTo(drawX,0);ctx.lineTo(drawX,plot.height())}if(-1!=c.mode.indexOf("y")){var drawY=Math.floor(crosshair.y)+adj;ctx.moveTo(0,drawY);ctx.lineTo(plot.width(),drawY)}ctx.stroke()}ctx.restore()});plot.hooks.shutdown.push(function(plot,eventHolder){eventHolder.unbind("mouseout",onMouseOut);eventHolder.unbind("mousemove",onMouseMove)})}$.plot.plugins.push({init:init,options:options,name:"crosshair",version:"1.0"})})(jQuery)},function(module,exports,__webpack_require__){"use strict";(function($){function init(plot){var selection={first:{x:-1,y:-1},second:{x:-1,y:-1},show:false,active:false};var savedhandlers={};var mouseUpHandler=null;function onMouseMove(e){if(selection.active){updateSelection(e);plot.getPlaceholder().trigger("plotselecting",[getSelection()])}}function onMouseDown(e){if(1!=e.which)return;document.body.focus();if(void 0!==document.onselectstart&&null==savedhandlers.onselectstart){savedhandlers.onselectstart=document.onselectstart;document.onselectstart=function(){return false}}if(void 0!==document.ondrag&&null==savedhandlers.ondrag){savedhandlers.ondrag=document.ondrag;document.ondrag=function(){return false}}setSelectionPos(selection.first,e);selection.active=true;mouseUpHandler=function mouseUpHandler(e){onMouseUp(e)};$(document).one("mouseup",mouseUpHandler)}function onMouseUp(e){mouseUpHandler=null;void 0!==document.onselectstart&&(document.onselectstart=savedhandlers.onselectstart);void 0!==document.ondrag&&(document.ondrag=savedhandlers.ondrag);selection.active=false;updateSelection(e);if(selectionIsSane())triggerSelectedEvent();else{plot.getPlaceholder().trigger("plotunselected",[]);plot.getPlaceholder().trigger("plotselecting",[null])}return false}function getSelection(){if(!selectionIsSane())return null;if(!selection.show)return null;var r={},c1=selection.first,c2=selection.second;$.each(plot.getAxes(),function(name,axis){if(axis.used){var p1=axis.c2p(c1[axis.direction]),p2=axis.c2p(c2[axis.direction]);r[name]={from:Math.min(p1,p2),to:Math.max(p1,p2)}}});return r}function triggerSelectedEvent(){var r=getSelection();plot.getPlaceholder().trigger("plotselected",[r]);r.xaxis&&r.yaxis&&plot.getPlaceholder().trigger("selected",[{x1:r.xaxis.from,y1:r.yaxis.from,x2:r.xaxis.to,y2:r.yaxis.to}])}function clamp(min,value,max){return value<min?min:value>max?max:value}function setSelectionPos(pos,e){var o=plot.getOptions();var offset=plot.getPlaceholder().offset();var plotOffset=plot.getPlotOffset();pos.x=clamp(0,e.pageX-offset.left-plotOffset.left,plot.width());pos.y=clamp(0,e.pageY-offset.top-plotOffset.top,plot.height());"y"==o.selection.mode&&(pos.x=pos==selection.first?0:plot.width());"x"==o.selection.mode&&(pos.y=pos==selection.first?0:plot.height())}function updateSelection(pos){if(null==pos.pageX)return;setSelectionPos(selection.second,pos);if(selectionIsSane()){selection.show=true;plot.triggerRedrawOverlay()}else clearSelection(true)}function clearSelection(preventEvent){if(selection.show){selection.show=false;plot.triggerRedrawOverlay();preventEvent||plot.getPlaceholder().trigger("plotunselected",[])}}function extractRange(ranges,coord){var axis,from,to,key,axes=plot.getAxes();for(var k in axes){axis=axes[k];if(axis.direction==coord){key=coord+axis.n+"axis";ranges[key]||1!=axis.n||(key=coord+"axis");if(ranges[key]){from=ranges[key].from;to=ranges[key].to;break}}}if(!ranges[key]){axis="x"==coord?plot.getXAxes()[0]:plot.getYAxes()[0];from=ranges[coord+"1"];to=ranges[coord+"2"]}if(null!=from&&null!=to&&from>to){var tmp=from;from=to;to=tmp}return{from:from,to:to,axis:axis}}function setSelection(ranges,preventEvent){var range,o=plot.getOptions();if("y"==o.selection.mode){selection.first.x=0;selection.second.x=plot.width()}else{range=extractRange(ranges,"x");selection.first.x=range.axis.p2c(range.from);selection.second.x=range.axis.p2c(range.to)}if("x"==o.selection.mode){selection.first.y=0;selection.second.y=plot.height()}else{range=extractRange(ranges,"y");selection.first.y=range.axis.p2c(range.from);selection.second.y=range.axis.p2c(range.to)}selection.show=true;plot.triggerRedrawOverlay();!preventEvent&&selectionIsSane()&&triggerSelectedEvent()}function selectionIsSane(){var minSize=plot.getOptions().selection.minSize;return Math.abs(selection.second.x-selection.first.x)>=minSize&&Math.abs(selection.second.y-selection.first.y)>=minSize}plot.clearSelection=clearSelection;plot.setSelection=setSelection;plot.getSelection=getSelection;plot.hooks.bindEvents.push(function(plot,eventHolder){var o=plot.getOptions();if(null!=o.selection.mode){eventHolder.mousemove(onMouseMove);eventHolder.mousedown(onMouseDown)}});plot.hooks.drawOverlay.push(function(plot,ctx){if(selection.show&&selectionIsSane()){var plotOffset=plot.getPlotOffset();var o=plot.getOptions();ctx.save();ctx.translate(plotOffset.left,plotOffset.top);var c=$.color.parse(o.selection.color);ctx.strokeStyle=c.scale("a",.8).toString();ctx.lineWidth=1;ctx.lineJoin=o.selection.shape;ctx.fillStyle=c.scale("a",.4).toString();var x=Math.min(selection.first.x,selection.second.x)+.5,y=Math.min(selection.first.y,selection.second.y)+.5,w=Math.abs(selection.second.x-selection.first.x)-1,h=Math.abs(selection.second.y-selection.first.y)-1;ctx.fillRect(x,y,w,h);ctx.strokeRect(x,y,w,h);ctx.restore()}});plot.hooks.shutdown.push(function(plot,eventHolder){eventHolder.unbind("mousemove",onMouseMove);eventHolder.unbind("mousedown",onMouseDown);mouseUpHandler&&$(document).unbind("mouseup",mouseUpHandler)})}$.plot.plugins.push({init:init,options:{selection:{mode:null,color:"#e8cfac",shape:"round",minSize:5}},name:"selection",version:"1.1"})})(jQuery)},,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){__webpack_require__(4438);__webpack_require__(4476);__webpack_require__(4495);__webpack_require__(4501);__webpack_require__(4508);__webpack_require__(4683);__webpack_require__(4702);__webpack_require__(4717);__webpack_require__(4733);__webpack_require__(4753);__webpack_require__(1468);__webpack_require__(4754)},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FormRow=FormRow;var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function FormRow(props){var control=props.children;props.disableMsg&&(control=_react2.default.createElement(_eui.EuiToolTip,{placement:"top",content:props.disableMsg},control));return _react2.default.createElement(_eui.EuiFormRow,{label:props.label,id:props.id,"data-test-subj":"inputControl"+props.controlIndex},control)}FormRow.propTypes={label:_propTypes2.default.string.isRequired,id:_propTypes2.default.string.isRequired,children:_propTypes2.default.node.isRequired,controlIndex:_propTypes2.default.number.isRequired,disableMsg:_propTypes2.default.string}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Control=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();exports.noValuesDisableMsg=noValuesDisableMsg;exports.noIndexPatternMsg=noIndexPatternMsg;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function noValuesDisableMsg(fieldName,indexPatternName){return'Filtering occurs on the "'+fieldName+'" field,\nwhich doesn\'t exist on any documents in the "'+indexPatternName+'" index pattern.\nChoose a different field or index documents that contain values for this field.'}function noIndexPatternMsg(indexPatternId){return"Could not locate index-pattern id: "+indexPatternId+"."}exports.Control=function(){function Control(controlParams,filterManager,kbnApi,useTimeFilter){_classCallCheck(this,Control);this.id=controlParams.id;this.controlParams=controlParams;this.options=controlParams.options;this.type=controlParams.type;this.label=controlParams.label?controlParams.label:controlParams.fieldName;this.useTimeFilter=useTimeFilter;this.filterManager=filterManager;this.kbnApi=kbnApi;this.reset();this.disable("Control has not been initialized")}_createClass(Control,[{key:"fetch",value:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:throw new Error("fetch method not defined, subclass are required to implement");case 1:case"end":return _context.stop()}},_callee,this)}));function fetch(){return _ref.apply(this,arguments)}return fetch}()},{key:"format",value:function format(value){var field=this.filterManager.getField();if(field)return field.format.convert(value);return value}},{key:"setAncestors",value:function setAncestors(ancestors){this.ancestors=ancestors}},{key:"hasAncestors",value:function hasAncestors(){return this.ancestors&&this.ancestors.length>0}},{key:"hasUnsetAncestor",value:function hasUnsetAncestor(){return this.ancestors.reduce(function(accumulator,ancestor){return accumulator||!ancestor.hasValue()},false)}},{key:"getAncestorValues",value:function getAncestorValues(){return this.ancestors.map(function(ancestor){return ancestor.value})}},{key:"getAncestorFilters",value:function getAncestorFilters(){return this.ancestors.map(function(ancestor){return ancestor.filterManager.createFilter(ancestor.value)})}},{key:"isEnabled",value:function isEnabled(){return this.enable}},{key:"disable",value:function disable(reason){this.enable=false;this.disabledReason=reason}},{key:"set",value:function set(newValue){this.value=newValue;this.hasValue()?this._kbnFilter=this.filterManager.createFilter(this.value):this._kbnFilter=null}},{key:"reset",value:function reset(){this._kbnFilter=null;this.value=this.filterManager.getValueFromFilterBar()}},{key:"clear",value:function clear(){this.value=void 0}},{key:"hasChanged",value:function hasChanged(){return!_lodash2.default.isEqual(this.value,this.filterManager.getValueFromFilterBar())}},{key:"hasKbnFilter",value:function hasKbnFilter(){if(this._kbnFilter)return true;return false}},{key:"getKbnFilter",value:function getKbnFilter(){return this._kbnFilter}},{key:"hasValue",value:function hasValue(){return void 0!==this.value}}]);return Control}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterManager=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.FilterManager=function(){function FilterManager(controlId,fieldName,indexPattern,queryFilter){_classCallCheck(this,FilterManager);this.controlId=controlId;this.fieldName=fieldName;this.indexPattern=indexPattern;this.queryFilter=queryFilter}_createClass(FilterManager,[{key:"getIndexPattern",value:function getIndexPattern(){return this.indexPattern}},{key:"getField",value:function getField(){return this.indexPattern.fields.byName[this.fieldName]}},{key:"createFilter",value:function createFilter(){throw new Error("Must implement createFilter.")}},{key:"findFilters",value:function findFilters(){var _this=this;var kbnFilters=_lodash2.default.flatten([this.queryFilter.getAppFilters(),this.queryFilter.getGlobalFilters()]);return kbnFilters.filter(function(kbnFilter){return _lodash2.default.get(kbnFilter,"meta.controlledBy")===_this.controlId})}},{key:"getValueFromFilterBar",value:function getValueFromFilterBar(){throw new Error("Must implement getValueFromFilterBar.")}}]);return FilterManager}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createSearchSource=createSearchSource;function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function createSearchSource(kbnApi,initialState,indexPattern,aggs,useTimeFilter){var filters=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];var searchSource=new kbnApi.SearchSource(initialState);searchSource.setParent(false);searchSource.setField("filter",function(){var activeFilters=[].concat(_toConsumableArray(filters));useTimeFilter&&activeFilters.push(kbnApi.timeFilter.createFilter(indexPattern));return activeFilters});searchSource.setField("size",0);searchSource.setField("index",indexPattern);searchSource.setField("aggs",aggs);return searchSource}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _lineage_map=__webpack_require__(4467);Object.defineProperty(exports,"getLineageMap",{enumerable:true,get:function get(){return _lineage_map.getLineageMap}});var _parent_candidates=__webpack_require__(4468);Object.defineProperty(exports,"getParentCandidates",{enumerable:true,get:function get(){return _parent_candidates.getParentCandidates}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPatternSelect=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var IndexPatternSelect=exports.IndexPatternSelect=function(_Component){_inherits(IndexPatternSelect,_Component);function IndexPatternSelect(props){var _this2=this;_classCallCheck(this,IndexPatternSelect);var _this=_possibleConstructorReturn(this,(IndexPatternSelect.__proto__||Object.getPrototypeOf(IndexPatternSelect)).call(this,props));_this.fetchSelectedIndexPattern=(_ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(indexPatternId){var indexPattern;return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(indexPatternId){_context.next=3;break}_this.setState({selectedIndexPattern:void 0});return _context.abrupt("return");case 3:indexPattern=void 0;_context.prev=4;_context.next=7;return _this.props.getIndexPattern(indexPatternId);case 7:indexPattern=_context.sent;_context.next=13;break;case 10:_context.prev=10;_context.t0=_context["catch"](4);return _context.abrupt("return");case 13:if(_this._isMounted){_context.next=15;break}return _context.abrupt("return");case 15:_this.setState({selectedIndexPattern:{value:indexPattern.id,label:indexPattern.title}});case 16:case"end":return _context.stop()}},_callee,_this2,[[4,10]])})),function(_x){return _ref.apply(this,arguments)});var _ref;_this.debouncedFetch=_lodash2.default.debounce((_ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(searchValue){var indexPatternSavedObjects,options;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _this.props.getIndexPatterns(searchValue);case 2:indexPatternSavedObjects=_context2.sent;if(_this._isMounted){_context2.next=5;break}return _context2.abrupt("return");case 5:if(searchValue===_this.state.searchValue){options=indexPatternSavedObjects.map(function(indexPatternSavedObject){return{label:indexPatternSavedObject.attributes.title,value:indexPatternSavedObject.id}});_this.setState({isLoading:false,options:options})}case 6:case"end":return _context2.stop()}},_callee2,_this2)})),function(_x2){return _ref2.apply(this,arguments)}),300);var _ref2;_this.fetchOptions=function(){var searchValue=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";_this.setState({isLoading:true,searchValue:searchValue},_this.debouncedFetch.bind(null,searchValue))};_this.onChange=function(selectedOptions){_this.props.onChange(_lodash2.default.get(selectedOptions,"0.value"))};_this.state={isLoading:false,options:[],selectedIndexPattern:void 0};return _this}_createClass(IndexPatternSelect,[{key:"componentWillMount",value:function componentWillMount(){this._isMounted=true}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._isMounted=false;this.debouncedFetch.cancel()}},{key:"componentDidMount",value:function componentDidMount(){this.fetchOptions();this.fetchSelectedIndexPattern(this.props.indexPatternId)}},{key:"componentWillReceiveProps",value:function componentWillReceiveProps(nextProps){nextProps.indexPatternId!==this.props.indexPatternId&&this.fetchSelectedIndexPattern(nextProps.indexPatternId)}},{key:"render",value:function render(){var selectId="indexPatternSelect-"+this.props.controlIndex;var selectedOptions=[];this.state.selectedIndexPattern&&selectedOptions.push(this.state.selectedIndexPattern);return _react2.default.createElement(_eui.EuiFormRow,{id:selectId,label:"Index Pattern"},_react2.default.createElement(_eui.EuiComboBox,{placeholder:"Select index pattern...",singleSelection:true,isLoading:this.state.isLoading,onSearchChange:this.fetchOptions,options:this.state.options,selectedOptions:selectedOptions,onChange:this.onChange,"data-test-subj":selectId}))}}]);return IndexPatternSelect}(_react.Component);IndexPatternSelect.propTypes={getIndexPatterns:_propTypes2.default.func.isRequired,getIndexPattern:_propTypes2.default.func.isRequired,onChange:_propTypes2.default.func.isRequired,indexPatternId:_propTypes2.default.string,controlIndex:_propTypes2.default.number.isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FieldSelect=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var FieldSelect=exports.FieldSelect=function(_Component){_inherits(FieldSelect,_Component);function FieldSelect(props){var _this2=this;_classCallCheck(this,FieldSelect);var _this=_possibleConstructorReturn(this,(FieldSelect.__proto__||Object.getPrototypeOf(FieldSelect)).call(this,props));_this.loadFields=function(indexPatternId){_this.setState({isLoading:true,fields:[],indexPatternId:indexPatternId},_this.debouncedLoad.bind(null,indexPatternId))};_this.debouncedLoad=_lodash2.default.debounce((_ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(indexPatternId){var indexPattern,fieldsByTypeMap,fields;return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(!indexPatternId||0===indexPatternId.length)){_context.next=2;break}return _context.abrupt("return");case 2:indexPattern=void 0;_context.prev=3;_context.next=6;return _this.props.getIndexPattern(indexPatternId);case 6:indexPattern=_context.sent;_context.next=12;break;case 9:_context.prev=9;_context.t0=_context["catch"](3);return _context.abrupt("return");case 12:if(!_this._hasUnmounted){_context.next=14;break}return _context.abrupt("return");case 14:if(!(indexPattern.id!==_this.state.indexPatternId)){_context.next=16;break}return _context.abrupt("return");case 16:fieldsByTypeMap=new Map;fields=[];indexPattern.fields.filter(_this.filterField).forEach(function(field){if(fieldsByTypeMap.has(field.type)){var fieldsList=fieldsByTypeMap.get(field.type);fieldsList.push(field.name);fieldsByTypeMap.set(field.type,fieldsList)}else fieldsByTypeMap.set(field.type,[field.name])});fieldsByTypeMap.forEach(function(fieldsList,fieldType){fields.push({label:fieldType,options:fieldsList.sort().map(function(fieldName){return{value:fieldName,label:fieldName}})})});fields.sort(function(a,b){if(a.label<b.label)return-1;if(a.label>b.label)return 1;return 0});_this.setState({isLoading:false,fields:fields});case 22:case"end":return _context.stop()}},_callee,_this2,[[3,9]])})),function(_x){return _ref.apply(this,arguments)}),300);var _ref;_this.onChange=function(selectedOptions){_this.props.onChange(_lodash2.default.get(selectedOptions,"0.value"))};_this._hasUnmounted=false;_this.state={isLoading:false,fields:[],indexPatternId:props.indexPatternId};_this.filterField=_lodash2.default.get(props,"filterField",function(){return true});return _this}_createClass(FieldSelect,[{key:"componentWillUnmount",value:function componentWillUnmount(){this._hasUnmounted=true}},{key:"componentDidMount",value:function componentDidMount(){this.loadFields(this.state.indexPatternId)}},{key:"componentWillReceiveProps",value:function componentWillReceiveProps(nextProps){this.props.indexPatternId!==nextProps.indexPatternId&&this.loadFields(nextProps.indexPatternId)}},{key:"render",value:function render(){if(!this.props.indexPatternId||0===this.props.indexPatternId.trim().length)return null;var selectId="fieldSelect-"+this.props.controlIndex;var selectedOptions=[];this.props.fieldName&&selectedOptions.push({value:this.props.fieldName,label:this.props.fieldName});return _react2.default.createElement(_eui.EuiFormRow,{id:selectId,label:"Field"},_react2.default.createElement(_eui.EuiComboBox,{placeholder:"Select field...",singleSelection:true,isLoading:this.state.isLoading,options:this.state.fields,selectedOptions:selectedOptions,onChange:this.onChange,"data-test-subj":selectId}))}}]);return FieldSelect}(_react.Component);FieldSelect.propTypes={getIndexPattern:_propTypes2.default.func.isRequired,indexPatternId:_propTypes2.default.string,onChange:_propTypes2.default.func.isRequired,fieldName:_propTypes2.default.string,filterField:_propTypes2.default.func,controlIndex:_propTypes2.default.number.isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"===typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};function pad(hash,len){while(hash.length<len)hash="0"+hash;return hash}function fold(hash,text){var i=void 0;var chr=void 0;var len=void 0;if(0===text.length)return hash;for(i=0,len=text.length;i<len;i++){chr=text.charCodeAt(i);hash=(hash<<5)-hash+chr;hash|=0}return hash<0?-2*hash:hash}function foldObject(hash,o,seen){return Object.keys(o).sort().reduce(foldKey,hash);function foldKey(hash,key){return foldValue(hash,o[key],key,seen)}}function foldValue(input,value,key,seen){var hash=fold(fold(fold(input,key),toString(value)),"undefined"===typeof value?"undefined":_typeof(value));if(null===value)return fold(hash,"null");if(void 0===value)return fold(hash,"undefined");if("object"===("undefined"===typeof value?"undefined":_typeof(value))){if("vis"===key&&"Vis"===value.constructor.name)return hash;if(-1!==seen.indexOf(value))return fold(hash,"[Circular]"+key);seen.push(value);return foldObject(hash,value,seen)}return fold(hash,value.toString())}function toString(o){return Object.prototype.toString.call(o)}function sum(o){return pad(foldValue(0,o,"",[]).toString(16),8)}exports.calculateObjectHash=sum},function(module,exports){module.exports="\x3c!-- vis type specific options --\x3e\n<gauge-options></gauge-options>\n"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Markdown=exports.markdownFactory=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();__webpack_require__(4498);var _classnames=__webpack_require__(5);var _classnames2=_interopRequireDefault(_classnames);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _markdownIt=__webpack_require__(457);var _markdownIt2=_interopRequireDefault(_markdownIt);var _lodash=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var markdownFactory=exports.markdownFactory=(0,_lodash.memoize)(function(){var whiteListedRules=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];var openLinksInNewTab=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var markdownIt=void 0;if(whiteListedRules&&whiteListedRules.length>0){markdownIt=new _markdownIt2.default("zero",{html:false,linkify:true});markdownIt.enable(whiteListedRules)}else markdownIt=new _markdownIt2.default({html:false,linkify:true});if(openLinksInNewTab){var originalLinkRender=markdownIt.renderer.rules.link_open||function(tokens,idx,options,env,self){return self.renderToken(tokens,idx,options)};markdownIt.renderer.rules.link_open=function(tokens,idx,options,env,self){tokens[idx].attrPush(["target","_blank"]);tokens[idx].attrPush(["rel","noopener noreferrer"]);return originalLinkRender(tokens,idx,options,env,self)}}return function(markdown){return markdown?markdownIt.render(markdown):""}},function(){var whiteListedRules=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];var openLinksInNewTab=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return whiteListedRules.join("_").concat(openLinksInNewTab)});var Markdown=exports.Markdown=function(_PureComponent){_inherits(Markdown,_PureComponent);function Markdown(){_classCallCheck(this,Markdown);return _possibleConstructorReturn(this,(Markdown.__proto__||Object.getPrototypeOf(Markdown)).apply(this,arguments))}_createClass(Markdown,[{key:"render",value:function render(){var _props=this.props,className=_props.className,markdown=_props.markdown,openLinksInNewTab=_props.openLinksInNewTab,whiteListedRules=_props.whiteListedRules,rest=_objectWithoutProperties(_props,["className","markdown","openLinksInNewTab","whiteListedRules"]);var classes=(0,_classnames2.default)("markdown-body",className);var markdownRenderer=markdownFactory(whiteListedRules,openLinksInNewTab);var renderedMarkdown=markdownRenderer(markdown);return _react2.default.createElement("div",_extends({},rest,{className:classes,dangerouslySetInnerHTML:{__html:renderedMarkdown}}))}}]);return Markdown}(_react.PureComponent);Markdown.propTypes={className:_propTypes2.default.string,markdown:_propTypes2.default.string,openLinksInNewTab:_propTypes2.default.bool,whiteListedRules:_propTypes2.default.arrayOf(_propTypes2.default.string)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _vis_editor_visualization=__webpack_require__(4518);var _vis_editor_visualization2=_interopRequireDefault(_vis_editor_visualization);var _visualization=__webpack_require__(4533);var _visualization2=_interopRequireDefault(_visualization);var _vis_picker=__webpack_require__(4574);var _vis_picker2=_interopRequireDefault(_vis_picker);var _panel_config=__webpack_require__(4575);var _panel_config2=_interopRequireDefault(_panel_config);var _create_brush_handler=__webpack_require__(4682);var _create_brush_handler2=_interopRequireDefault(_create_brush_handler);var _lodash=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var VisEditor=function(_Component){_inherits(VisEditor,_Component);function VisEditor(props){_classCallCheck(this,VisEditor);var _this=_possibleConstructorReturn(this,(VisEditor.__proto__||Object.getPrototypeOf(VisEditor)).call(this,props));var vis=props.vis;_this.appState=vis.API.getAppState();var reversed=(0,_lodash.get)(_this.appState,"options.darkTheme",false);_this.state={model:props.vis.params,dirty:false,autoApply:true,reversed:reversed};_this.onBrush=(0,_create_brush_handler2.default)(props.vis.API.timeFilter);_this.handleUiState=_this.handleUiState.bind(_this,props.vis);_this.handleAppStateChange=_this.handleAppStateChange.bind(_this);return _this}_createClass(VisEditor,[{key:"handleUiState",value:function handleUiState(vis){for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];vis.uiStateVal.apply(vis,args)}},{key:"componentWillMount",value:function componentWillMount(){this.appState&&this.appState.on("save_with_changes",this.handleAppStateChange)}},{key:"handleAppStateChange",value:function handleAppStateChange(){var reversed=(0,_lodash.get)(this.appState,"options.darkTheme",false);this.setState({reversed:reversed})}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.appState&&this.appState.off("save_with_changes",this.handleAppStateChange)}},{key:"render",value:function render(){var _this2=this;var handleChange=function handleChange(part){var nextModel=_extends({},_this2.state.model,part);_this2.props.vis.params=nextModel;_this2.state.autoApply&&_this2.props.vis.updateState();_this2.setState({model:nextModel,dirty:!_this2.state.autoApply})};var handleAutoApplyToggle=function handleAutoApplyToggle(part){_this2.setState({autoApply:part.target.checked})};var handleCommit=function handleCommit(){_this2.props.vis.updateState();_this2.setState({dirty:false})};if(!this.props.isEditorMode){if(!this.props.vis.params||!this.props.visData)return null;var reversed=this.state.reversed;return _react2.default.createElement(_visualization2.default,{dateFormat:this.props.config.get("dateFormat"),reversed:reversed,onBrush:this.onBrush,onUiState:this.handleUiState,uiState:this.props.vis.getUiState(),fields:this.props.vis.fields,model:this.props.vis.params,visData:this.props.visData})}var model=this.state.model;if(model&&this.props.visData)return _react2.default.createElement("div",{className:"vis_editor"},_react2.default.createElement("div",{className:"vis-editor-hide-for-reporting"},_react2.default.createElement(_vis_picker2.default,{model:model,onChange:handleChange})),_react2.default.createElement(_vis_editor_visualization2.default,{dirty:this.state.dirty,autoApply:this.state.autoApply,model:model,appState:this.appState,savedObj:this.props.savedObj,timeRange:this.props.timeRange,onUiState:this.handleUiState,uiState:this.props.vis.getUiState(),onBrush:this.onBrush,onCommit:handleCommit,onToggleAutoApply:handleAutoApplyToggle,onChange:handleChange,title:this.props.vis.title,description:this.props.vis.description,dateFormat:this.props.config.get("dateFormat")}),_react2.default.createElement("div",{className:"vis-editor-hide-for-reporting"},_react2.default.createElement(_panel_config2.default,{fields:this.props.vis.fields,model:model,visData:this.props.visData,dateFormat:this.props.config.get("dateFormat"),onChange:handleChange})));return null}},{key:"componentDidMount",value:function componentDidMount(){this.props.renderComplete()}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.props.renderComplete()}}]);return VisEditor}(_react.Component);VisEditor.defaultProps={visData:{}};VisEditor.propTypes={vis:_propTypes2.default.object,visData:_propTypes2.default.object,renderComplete:_propTypes2.default.func,config:_propTypes2.default.object,isEditorMode:_propTypes2.default.bool,savedObj:_propTypes2.default.object,timeRange:_propTypes2.default.object};exports.default=VisEditor;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";var __importDefault=(void 0,function(mod){return mod&&mod.__esModule?mod:{default:mod}});Object.defineProperty(exports,"__esModule",{value:true});var lodash_1=__importDefault(__webpack_require__(1));var react_1=__importDefault(__webpack_require__(0));var react_dom_1=__webpack_require__(15);var visualization_1=__webpack_require__(4525);function renderVisualization(element,vis,visData,uiState,params){return new Promise(function(resolve){var listenOnChange=lodash_1.default.get(params,"listenOnChange",false);react_dom_1.render(react_1.default.createElement(visualization_1.Visualization,{vis:vis,visData:visData,uiState:uiState,listenOnChange:listenOnChange,onInit:resolve}),element)})}function destroy(element){element&&react_dom_1.unmountComponentAtNode(element)}exports.visualizationLoader={render:renderVisualization,destroy:destroy}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ElasticsearchError=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.ElasticsearchError=function(){function ElasticsearchError(error){_classCallCheck(this,ElasticsearchError);this.error=error;this.getRootCauses=this.getRootCauses.bind(this);this.hasRootCause=this.hasRootCause.bind(this);if(!this.getRootCauses().length)throw new Error("ElasticsearchError must be instantiated with an elasticsearch error, i.e. it must havea resp.error.root_cause property. Instead got "+JSON.stringify(error))}_createClass(ElasticsearchError,[{key:"getRootCauses",value:function getRootCauses(){var rootCauses=_lodash2.default.get(this.error,"resp.error.root_cause");return _lodash2.default.pluck(rootCauses,"reason")}},{key:"hasRootCause",value:function hasRootCause(cause){var normalizedCause=cause.toLowerCase();var rootCauses=this.getRootCauses();var matchingCauses=rootCauses.filter(function(rootCause){var normalizedRootCause=rootCause.toLowerCase();return-1!==normalizedRootCause.indexOf(normalizedCause)});return 0!==matchingCauses.length}}],[{key:"hasRootCause",value:function hasRootCause(error,cause){try{var esError=new ElasticsearchError(error);return esError.hasRootCause(cause)}catch(err){return false}}}]);return ElasticsearchError}()},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var durationOutputOptions=exports.durationOutputOptions=[{label:"milliseconds",value:"ms"},{label:"seconds",value:"s"},{label:"minutes",value:"m"},{label:"hours",value:"h"},{label:"days",value:"d"},{label:"weeks",value:"w"},{label:"months",value:"M"},{label:"years",value:"Y"}];exports.durationInputOptions=[{label:"picoseconds",value:"ps"},{label:"nanoseconds",value:"ns"},{label:"microseconds",value:"us"}].concat(durationOutputOptions)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _jquery=__webpack_require__(13);var _jquery2=_interopRequireDefault(_jquery);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=(0,_jquery2.default)({});module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function(props){return function(row,i){function tickFormatter(value){if(_lodash2.default.isFunction(props.tickFormatter))return props.tickFormatter(value);return value}var formatter=row.tickFormatter||tickFormatter;var value=formatter(props.seriesValues[row.id]);var classes=["rhythm_chart__legend_item"];var key=row.id;_lodash2.default.includes(props.seriesFilter,row.id)||classes.push("disabled");if(null==row.label||false===row.legend)return _react2.default.createElement("div",{key:key,style:{display:"none"}});return _react2.default.createElement("div",{key:key,className:classes.join(" "),"data-test-subj":"tsvbLegendItem"},_react2.default.createElement("button",{onClick:function onClick(event){return props.onToggle(event,row.id)},className:"rhythm_chart__legend_button"},_react2.default.createElement("div",{className:"rhythm_chart__legend_label"},_react2.default.createElement("i",{className:"fa fa-circle",style:{color:row.color}}),_react2.default.createElement("span",null,row.label)),_react2.default.createElement("div",{className:"rhythm_chart__legend_value"},value)))}};module.exports=exports["default"]},,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();exports.visWithSplits=visWithSplits;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _get_display_name=__webpack_require__(4561);var _lodash=__webpack_require__(1);var _calculate_label=__webpack_require__(908);var _calculate_label2=_interopRequireDefault(_calculate_label);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true}):obj[key]=value;return obj}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function visWithSplits(WrappedComponent){function SplitVisComponent(props){var model=props.model,visData=props.visData;if(!model||!visData||!visData[model.id])return _react2.default.createElement(WrappedComponent,props);if(visData[model.id].series.every(function(s){return 1===s.id.split(":").length}))return _react2.default.createElement(WrappedComponent,props);var splitsVisData=visData[model.id].series.reduce(function(acc,series){var _series$id$split=series.id.split(":"),_series$id$split2=_slicedToArray(_series$id$split,2),seriesId=_series$id$split2[0],splitId=_series$id$split2[1];var seriesModel=model.series.find(function(s){return s.id===seriesId});if(!seriesModel||!splitId)return acc;var metric=(0,_lodash.last)(seriesModel.metrics);var label=(0,_calculate_label2.default)(metric,seriesModel.metrics);acc[splitId]||(acc[splitId]={series:[],label:series.label});acc[splitId].series.push(_extends({},series,{id:seriesId,color:seriesModel.color,label:seriesModel.label||label}));return acc},{});var nonSplitSeries=(0,_lodash.first)(visData[model.id].series.filter(function(series){var seriesModel=model.series.find(function(s){return s.id===series.id});if(!seriesModel)return false;return["everything","filter"].includes(seriesModel.split_mode)}));var indexOfNonSplit=nonSplitSeries?(0,_lodash.findIndex)(model.series,function(s){return s.id===nonSplitSeries.id}):null;var rows=Object.keys(splitsVisData).map(function(key){var splitData=splitsVisData[key];var series=splitData.series,label=splitData.label;var newSeries=null!=indexOfNonSplit&&indexOfNonSplit>0?[].concat(_toConsumableArray(series),[nonSplitSeries]):[nonSplitSeries].concat(_toConsumableArray(series));var newVisData=_defineProperty({},model.id,{id:model.id,series:newSeries||series});return _react2.default.createElement("div",{key:key,className:"splitVis_split"},_react2.default.createElement("div",{className:"splitVis_visualization"},_react2.default.createElement(WrappedComponent,{model:model,visData:newVisData,onBrush:props.onBrush,additionalLabel:label,backgroundColor:props.backgroundColor})))});return _react2.default.createElement("div",{className:"splitVis"},rows)}SplitVisComponent.displayName="SplitVisComponent("+(0,_get_display_name.getDisplayName)(WrappedComponent)+")";return SplitVisComponent}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isBasicAgg=isBasicAgg;exports.createOptions=createOptions;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var lookup={count:"Count",calculation:"Calculation",std_deviation:"Std. Deviation",variance:"Variance",sum_of_squares:"Sum of Sq.",avg:"Average",max:"Max",min:"Min",sum:"Sum",percentile:"Percentile",percentile_rank:"Percentile Rank",cardinality:"Cardinality",value_count:"Value Count",derivative:"Derivative",cumulative_sum:"Cumulative Sum",moving_average:"Moving Average",avg_bucket:"Overall Average",min_bucket:"Overall Min",max_bucket:"Overall Max",sum_bucket:"Overall Sum",variance_bucket:"Overall Variance",sum_of_squares_bucket:"Overall Sum of Sq.",std_deviation_bucket:"Overall Std. Deviation",series_agg:"Series Agg",math:"Math",serial_diff:"Serial Difference",filter_ratio:"Filter Ratio",positive_only:"Positive Only",static:"Static Value",top_hit:"Top Hit"};var pipeline=["calculation","derivative","cumulative_sum","moving_average","avg_bucket","min_bucket","max_bucket","sum_bucket","variance_bucket","sum_of_squares_bucket","std_deviation_bucket","series_agg","math","serial_diff","positive_only"];var byType={_all:lookup,pipeline:pipeline,basic:_lodash2.default.omit(lookup,pipeline),metrics:_lodash2.default.pick(lookup,["count","avg","min","max","sum","cardinality","value_count"])};function isBasicAgg(item){return _lodash2.default.includes(Object.keys(byType.basic),item.type)}function createOptions(){var type=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"_all";var siblings=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];var aggs=byType[type];aggs||(aggs=byType._all);var enablePipelines=siblings.some(isBasicAgg);siblings.length<=1&&(enablePipelines=false);return(0,_lodash2.default)(aggs).map(function(label,value){var disabled=!!_lodash2.default.includes(pipeline,value)&&!enablePipelines;return{label:disabled?label+' (use the "+" button to add this pipeline agg)':label,value:value,disabled:disabled}}).value()}exports.default=lookup},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=["count","avg","max","min","sum","std_deviation","variance","sum_of_squares","value_count","cardinality"];module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _get_last_value=__webpack_require__(325);var _get_last_value2=_interopRequireDefault(_get_last_value);var _tick_formatter=__webpack_require__(374);var _tick_formatter2=_interopRequireDefault(_tick_formatter);var _moment=__webpack_require__(10);var _moment2=_interopRequireDefault(_moment);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function(series,model){var dateFormat=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"lll";var variables={};model.series.forEach(function(seriesModel){series.filter(function(row){return _lodash2.default.startsWith(row.id,seriesModel.id)}).forEach(function(row){var varName=[_lodash2.default.snakeCase(row.label),_lodash2.default.snakeCase(seriesModel.var_name)].filter(function(v){return v}).join(".");var formatter=(0,_tick_formatter2.default)(seriesModel.formatter,seriesModel.value_template);var lastValue=(0,_get_last_value2.default)(row.data);var data={last:{raw:lastValue,formatted:formatter(lastValue)},data:{raw:row.data,formatted:row.data.map(function(point){return[(0,_moment2.default)(point[0]).format(dateFormat),formatter(point[1])]})}};_lodash2.default.set(variables,varName,data);_lodash2.default.set(variables,_lodash2.default.snakeCase(row.label)+".label",row.label)})});return variables};module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ErrorComponent(props){var error=props.error;var additionalInfo=void 0;var type=_lodash2.default.get(error,"error.caused_by.type");var reason=_lodash2.default.get(error,"error.caused_by.reason");var title=_lodash2.default.get(error,"error.caused_by.title");reason||(reason=_lodash2.default.get(error,"message"));if("script_exception"===type){var scriptStack=_lodash2.default.get(error,"error.caused_by.script_stack");reason=_lodash2.default.get(error,"error.caused_by.caused_by.reason");additionalInfo=_react2.default.createElement("div",{className:"metrics_error__additional"},_react2.default.createElement("div",{className:"metrics_error__reason"},reason),_react2.default.createElement("div",{className:"metrics_error__stack"},scriptStack.join("\n")))}else reason&&(additionalInfo=_react2.default.createElement("div",{className:"metrics_error__additional"},_react2.default.createElement("div",{className:"metrics_error__reason"},reason)));return _react2.default.createElement("div",{className:"metrics_error"},_react2.default.createElement("div",{className:"metrics_error__title"},title||"The request for this panel failed."),additionalInfo)}ErrorComponent.propTypes={error:_propTypes2.default.object};exports.default=ErrorComponent;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.detectIE=detectIE;function detectIE(){var ua=window.navigator.userAgent;var msie=ua.indexOf("MSIE ");if(msie>0)return parseInt(ua.substring(msie+5,ua.indexOf(".",msie)),10);var trident=ua.indexOf("Trident/");if(trident>0){var rv=ua.indexOf("rv:");return parseInt(ua.substring(rv+3,ua.indexOf(".",rv)),10)}var edge=ua.indexOf("Edge/");if(edge>0)return parseInt(ua.substring(edge+5,ua.indexOf(".",edge)),10);return false}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _detect_ie=__webpack_require__(1544);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true}):obj[key]=value;return obj}exports.default=function(handleChange){return function(name,defaultValue){return function(e){(0,_detect_ie.detectIE)()&&13!==e.keyCode||e.preventDefault();var value=Number(_lodash2.default.get(e,"target.value",defaultValue));if(_lodash2.default.isFunction(handleChange))return handleChange(_defineProperty({},name,value))}}};module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _add_delete_buttons=__webpack_require__(147);var _add_delete_buttons2=_interopRequireDefault(_add_delete_buttons);var _collection_actions=__webpack_require__(328);var collectionActions=_interopRequireWildcard(_collection_actions);var _metric_select=__webpack_require__(327);var _metric_select2=_interopRequireDefault(_metric_select);function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);newObj.default=obj;return newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var CalculationVars=function(_Component){_inherits(CalculationVars,_Component);function CalculationVars(props){_classCallCheck(this,CalculationVars);var _this=_possibleConstructorReturn(this,(CalculationVars.__proto__||Object.getPrototypeOf(CalculationVars)).call(this,props));_this.renderRow=_this.renderRow.bind(_this);return _this}_createClass(CalculationVars,[{key:"handleChange",value:function handleChange(item,name){var _this2=this;return function(e){var handleChange=collectionActions.handleChange.bind(null,_this2.props);var part={};part[name]=_lodash2.default.get(e,"[0].value",_lodash2.default.get(e,"target.value"));handleChange(_lodash2.default.assign({},item,part))}}},{key:"renderRow",value:function renderRow(row,i,items){var handleAdd=collectionActions.handleAdd.bind(null,this.props);var handleDelete=collectionActions.handleDelete.bind(null,this.props,row);return _react2.default.createElement("div",{className:"vis_editor__calc_vars-row",key:row.id,"data-test-subj":"varRow"},_react2.default.createElement("div",{className:"vis_editor__calc_vars-name"},_react2.default.createElement("input",{"aria-label":"Variable name",placeholder:"Variable Name",className:"vis_editor__input-grows-100",type:"text",onChange:this.handleChange(row,"name"),value:row.name})),_react2.default.createElement("div",{className:"vis_editor__calc_vars-var"},_react2.default.createElement(_metric_select2.default,{onChange:this.handleChange(row,"field"),metrics:this.props.metrics,metric:this.props.model,value:row.field,includeSiblings:this.props.includeSiblings})),_react2.default.createElement("div",{className:"vis_editor__calc_vars-control"},_react2.default.createElement(_add_delete_buttons2.default,{onAdd:handleAdd,onDelete:handleDelete,disableDelete:items.length<2})))}},{key:"render",value:function render(){var _props=this.props,model=_props.model,name=_props.name;if(!model[name])return _react2.default.createElement("div",null);var rows=model[name].map(this.renderRow);return _react2.default.createElement("div",{className:"vis_editor__calc_vars"},rows)}}]);return CalculationVars}(_react.Component);CalculationVars.defaultProps={name:"variables",includeSiblings:false};CalculationVars.propTypes={metrics:_propTypes2.default.array,model:_propTypes2.default.object,name:_propTypes2.default.string,onChange:_propTypes2.default.func,includeSiblings:_propTypes2.default.bool};exports.default=CalculationVars;module.exports=exports["default"]},,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapToLayerWithId=mapToLayerWithId;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function mapToLayerWithId(prefix,isEMS,layer){var clonedLayer=_lodash2.default.cloneDeep(layer);clonedLayer.layerId=prefix+"."+layer.name;clonedLayer.isEMS=isEMS;return clonedLayer}},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(2);var _wms_options=__webpack_require__(4687);var _wms_options2=_interopRequireDefault(_wms_options);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");_module.directive("wmsOptions",function(serviceSettings){return{restrict:"E",template:_wms_options2.default,replace:true,scope:{options:"="},link:function link($scope){$scope.options.baseLayersAreLoaded=new Promise(function(resolve,reject){serviceSettings.getTMSServices().then(function(allTMSServices){$scope.options.tmsLayers||($scope.options.tmsLayers=[]);var newBaseLayers=$scope.options.tmsLayers.slice();var _loop=function _loop(i){var layerFromService=allTMSServices[i];var alreadyAdded=newBaseLayers.some(function(layer){return layerFromService.id===layer.id});alreadyAdded||newBaseLayers.push(layerFromService)};for(var i=0;i<allTMSServices.length;i+=1)_loop(i);$scope.options.tmsLayers=newBaseLayers;$scope.options.selectedTmsLayer||($scope.options.selectedTmsLayer=$scope.options.tmsLayers[0]);resolve(true)}).catch(function(e){reject(e)})})}}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();exports.BaseMapsVisualizationProvider=BaseMapsVisualizationProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _kibana_map=__webpack_require__(1570);var _rxjs=__webpack_require__(615);var Rx=_interopRequireWildcard(_rxjs);var _operators=__webpack_require__(623);__webpack_require__(921);var _notify=__webpack_require__(9);function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);newObj.default=obj;return newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var MINZOOM=0;var MAXZOOM=22;function BaseMapsVisualizationProvider(serviceSettings){return function(){function BaseMapsVisualization(element,vis){_classCallCheck(this,BaseMapsVisualization);this.vis=vis;this._container=element;this._kibanaMap=null;this._chartData=null;this._baseLayerDirty=true;this._mapIsLoaded=this._makeKibanaMap()}_createClass(BaseMapsVisualization,[{key:"isLoaded",value:function isLoaded(){return this._mapIsLoaded}},{key:"destroy",value:function destroy(){if(this._kibanaMap){this._kibanaMap.destroy();this._kibanaMap=null}}},{key:"render",value:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(esResponse,status){return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(this._kibanaMap){_context.next=2;break}return _context.abrupt("return");case 2:_context.next=4;return this._mapIsLoaded;case 4:status.resize&&this._kibanaMap.resize();if(!(status.params||status.aggs)){_context.next=8;break}_context.next=8;return this._updateParams();case 8:if(!this._hasESResponseChanged(esResponse)){_context.next=11;break}_context.next=11;return this._updateData(esResponse);case 11:status.uiState&&this._kibanaMap.useUiStateFromVisualization(this.vis);_context.next=14;return this._whenBaseLayerIsLoaded();case 14:case"end":return _context.stop()}},_callee,this)}));function render(_x,_x2){return _ref.apply(this,arguments)}return render}()},{key:"_makeKibanaMap",value:function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var _this=this;var options,uiState,zoomFromUiState,centerFromUIState;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:options={};uiState=this.vis.getUiState();zoomFromUiState=parseInt(uiState.get("mapZoom"));centerFromUIState=uiState.get("mapCenter");options.zoom=isNaN(zoomFromUiState)?this.vis.params.mapZoom:zoomFromUiState;options.center=centerFromUIState||this.vis.params.mapCenter;this._kibanaMap=new _kibana_map.KibanaMap(this._container,options);this._kibanaMap.setMinZoom(MINZOOM);this._kibanaMap.setMaxZoom(MAXZOOM);this._kibanaMap.addLegendControl();this._kibanaMap.addFitControl();this._kibanaMap.persistUiStateForVisualization(this.vis);this._kibanaMap.on("baseLayer:loaded",function(){_this._baseLayerDirty=false});this._kibanaMap.on("baseLayer:loading",function(){_this._baseLayerDirty=true});_context2.next=16;return this._updateBaseLayer();case 16:case"end":return _context2.stop()}},_callee2,this)}));function _makeKibanaMap(){return _ref2.apply(this,arguments)}return _makeKibanaMap}()},{key:"_baseLayerConfigured",value:function _baseLayerConfigured(){var mapParams=this._getMapsParams();return mapParams.wms.baseLayersAreLoaded||mapParams.wms.selectedTmsLayer}},{key:"_updateBaseLayer",value:function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var mapParams,tmsServices,firstRoadMapLayer,fallback,selectedTmsLayer;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(this._kibanaMap){_context3.next=2;break}return _context3.abrupt("return");case 2:mapParams=this._getMapsParams();if(this._baseLayerConfigured()){_context3.next=18;break}_context3.prev=4;_context3.next=7;return serviceSettings.getTMSServices();case 7:tmsServices=_context3.sent;firstRoadMapLayer=tmsServices.find(function(s){return"road_map"===s.id});fallback=firstRoadMapLayer||tmsServices[0];fallback&&this._setTmsLayer(firstRoadMapLayer);_context3.next=17;break;case 13:_context3.prev=13;_context3.t0=_context3["catch"](4);_notify.toastNotifications.addWarning(_context3.t0.message);return _context3.abrupt("return");case 17:return _context3.abrupt("return");case 18:_context3.prev=18;if(!mapParams.wms.enabled){_context3.next=24;break}if(MINZOOM>this._kibanaMap.getMaxZoomLevel()){this._kibanaMap.setMinZoom(MINZOOM);this._kibanaMap.setMaxZoom(MAXZOOM)}this._kibanaMap.setBaseLayer({baseLayerType:"wms",options:_extends({minZoom:MINZOOM,maxZoom:MAXZOOM,url:mapParams.wms.url},mapParams.wms.options)});_context3.next=28;break;case 24:_context3.next=26;return mapParams.wms.baseLayersAreLoaded;case 26:selectedTmsLayer=mapParams.wms.selectedTmsLayer;this._setTmsLayer(selectedTmsLayer);case 28:_context3.next=33;break;case 30:_context3.prev=30;_context3.t1=_context3["catch"](18);_notify.toastNotifications.addWarning(_context3.t1.message);case 33:case"end":return _context3.stop()}},_callee3,this,[[4,13],[18,30]])}));function _updateBaseLayer(){return _ref3.apply(this,arguments)}return _updateBaseLayer}()},{key:"_setTmsLayer",value:function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(tmsLayer){var url,options;return regeneratorRuntime.wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:this._kibanaMap.setMinZoom(tmsLayer.minZoom);this._kibanaMap.setMaxZoom(tmsLayer.maxZoom);this._kibanaMap.getZoomLevel()>tmsLayer.maxZoom&&this._kibanaMap.setZoomLevel(tmsLayer.maxZoom);url=tmsLayer.url;options=_lodash2.default.cloneDeep(tmsLayer);delete options.id;delete options.url;this._kibanaMap.setBaseLayer({baseLayerType:"tms",options:_extends({url:url},options)});case 8:case"end":return _context4.stop()}},_callee4,this)}));function _setTmsLayer(_x3){return _ref4.apply(this,arguments)}return _setTmsLayer}()},{key:"_updateData",value:function(){var _ref5=_asyncToGenerator(regeneratorRuntime.mark(function _callee5(){return regeneratorRuntime.wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:throw new Error("Child should implement this method to respond to data-update");case 1:case"end":return _context5.stop()}},_callee5,this)}));function _updateData(){return _ref5.apply(this,arguments)}return _updateData}()},{key:"_hasESResponseChanged",value:function _hasESResponseChanged(data){return this._chartData!==data}},{key:"_updateParams",value:function(){var _ref6=_asyncToGenerator(regeneratorRuntime.mark(function _callee6(){var mapParams;return regeneratorRuntime.wrap(function _callee6$(_context6){while(1)switch(_context6.prev=_context6.next){case 0:mapParams=this._getMapsParams();_context6.next=3;return this._updateBaseLayer(mapParams);case 3:this._kibanaMap.setLegendPosition(mapParams.legendPosition);this._kibanaMap.setShowTooltip(mapParams.addTooltip);this._kibanaMap.useUiStateFromVisualization(this.vis);case 6:case"end":return _context6.stop()}},_callee6,this)}));function _updateParams(){return _ref6.apply(this,arguments)}return _updateParams}()},{key:"_getMapsParams",value:function _getMapsParams(){return _lodash2.default.assign({},this.vis.type.visConfig.defaults,{type:this.vis.type.name},this.vis.params)}},{key:"_whenBaseLayerIsLoaded",value:function _whenBaseLayerIsLoaded(){var _this2=this;if(!this._baseLayerConfigured())return true;var maxTimeForBaseLayer=1e4;var interval$=Rx.interval(10).pipe((0,_operators.filter)(function(){return!_this2._baseLayerDirty}));var timer$=Rx.timer(maxTimeForBaseLayer);return Rx.race(interval$,timer$).pipe((0,_operators.first)()).toPromise()}}]);return BaseMapsVisualization}()}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.KibanaMap=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _events=__webpack_require__(104);var _leaflet=__webpack_require__(261);var _leaflet2=_interopRequireDefault(_leaflet);var _jquery=__webpack_require__(13);var _jquery2=_interopRequireDefault(_jquery);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _zoom_to_precision=__webpack_require__(4697);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function makeFitControl(fitContainer,kibanaMap){var FitControl=_leaflet2.default.Control.extend({options:{position:"topleft"},initialize:function initialize(fitContainer,kibanaMap){this._fitContainer=fitContainer;this._kibanaMap=kibanaMap;this._leafletMap=null},onAdd:function onAdd(leafletMap){var _this=this;this._leafletMap=leafletMap;(0,_jquery2.default)(this._fitContainer).html('<a class="kuiIcon fa-crop" href="#" title="Fit Data Bounds" aria-label="Fit Data Bounds"></a>').on("click",function(e){e.preventDefault();_this._kibanaMap.fitToData()});return this._fitContainer},onRemove:function onRemove(){(0,_jquery2.default)(this._fitContainer).off("click")}});return new FitControl(fitContainer,kibanaMap)}function makeLegendControl(container,kibanaMap,position){var LegendControl=_leaflet2.default.Control.extend({options:{position:"topright"},initialize:function initialize(container,kibanaMap,position){this._legendContainer=container;this._kibanaMap=kibanaMap;this.options.position=position},updateContents:function updateContents(){this._legendContainer.empty();var $div=(0,_jquery2.default)("<div>").addClass("tilemap-legend");this._legendContainer.append($div);var layers=this._kibanaMap.getLayers();layers.forEach(function(layer){return layer.appendLegendContents($div)})},onAdd:function onAdd(){var _this2=this;this._layerUpdateHandle=function(){return _this2.updateContents()};this._kibanaMap.on("layers:update",this._layerUpdateHandle);this.updateContents();return this._legendContainer.get(0)},onRemove:function onRemove(){this._kibanaMap.removeListener("layers:update",this._layerUpdateHandle);this._legendContainer.empty()}});return new LegendControl(container,kibanaMap,position)}exports.KibanaMap=function(_EventEmitter){_inherits(KibanaMap,_EventEmitter);function KibanaMap(containerNode,options){_classCallCheck(this,KibanaMap);var _this3=_possibleConstructorReturn(this,(KibanaMap.__proto__||Object.getPrototypeOf(KibanaMap)).call(this));_this3._containerNode=containerNode;_this3._leafletBaseLayer=null;_this3._baseLayerSettings=null;_this3._baseLayerIsDesaturated=true;_this3._leafletDrawControl=null;_this3._leafletFitControl=null;_this3._leafletLegendControl=null;_this3._legendPosition="topright";_this3._layers=[];_this3._listeners=[];_this3._showTooltip=false;var leafletOptions={minZoom:options.minZoom,maxZoom:options.maxZoom,center:options.center?options.center:[0,0],zoom:options.zoom?options.zoom:2,renderer:_leaflet2.default.canvas(),zoomAnimation:false,zoomControl:void 0===options.zoomControl||options.zoomControl};_this3._leafletMap=_leaflet2.default.map(containerNode,leafletOptions);_this3._leafletMap.attributionControl.setPrefix("");options.scrollWheelZoom||_this3._leafletMap.scrollWheelZoom.disable();var previousZoom=_this3._leafletMap.getZoom();_this3._leafletMap.on("zoomend",function(){if(previousZoom!==_this3._leafletMap.getZoom()){previousZoom=_this3._leafletMap.getZoom();_this3.emit("zoomchange")}});_this3._leafletMap.on("zoomend",function(){return _this3.emit("zoomend")});_this3._leafletMap.on("dragend",function(){return _this3.emit("dragend")});_this3._leafletMap.on("zoomend",function(){return _this3._updateExtent()});_this3._leafletMap.on("dragend",function(){return _this3._updateExtent()});_this3._leafletMap.on("mousemove",function(e){return _this3._layers.forEach(function(layer){return layer.movePointer("mousemove",e)})});_this3._leafletMap.on("mouseout",function(e){return _this3._layers.forEach(function(layer){return layer.movePointer("mouseout",e)})});_this3._leafletMap.on("mousedown",function(e){return _this3._layers.forEach(function(layer){return layer.movePointer("mousedown",e)})});_this3._leafletMap.on("mouseup",function(e){return _this3._layers.forEach(function(layer){return layer.movePointer("mouseup",e)})});_this3._leafletMap.on("draw:created",function(event){var drawType=event.layerType;if("rectangle"===drawType){var bounds=event.layer.getBounds();var southEast=bounds.getSouthEast();var northWest=bounds.getNorthWest();var southEastLng=southEast.lng;southEastLng>180&&(southEastLng-=360);var northWestLng=northWest.lng;northWestLng<-180&&(northWestLng+=360);var southEastLat=southEast.lat;var northWestLat=northWest.lat;if(southEastLat===northWestLat||southEastLng===northWestLng)return;_this3.emit("drawCreated:rectangle",{bounds:{bottom_right:{lat:southEastLat,lon:southEastLng},top_left:{lat:northWestLat,lon:northWestLng}}})}else if("polygon"===drawType){var latLongs=event.layer.getLatLngs()[0];_this3.emit("drawCreated:polygon",{points:latLongs.map(function(leafletLatLng){return{lat:leafletLatLng.lat,lon:leafletLatLng.lng}})})}});_this3.resize();return _this3}_createClass(KibanaMap,[{key:"setShowTooltip",value:function setShowTooltip(showTooltip){this._showTooltip=showTooltip}},{key:"getLayers",value:function getLayers(){return this._layers.slice()}},{key:"addLayer",value:function addLayer(kibanaLayer){var _this4=this;var onshowTooltip=function onshowTooltip(event){if(!_this4._showTooltip)return;if(_this4._popup){_this4._popup.getLatLng().equals(event.position)||_this4._popup.setLatLng(event.position);_this4._popup.getContent()!==event.content&&_this4._popup.setContent(event.content)}else{_this4._popup=_leaflet2.default.responsivePopup({autoPan:false});_this4._popup.setLatLng(event.position);_this4._popup.setContent(event.content);_this4._popup.openOn(_this4._leafletMap)}};kibanaLayer.on("showTooltip",onshowTooltip);this._listeners.push({name:"showTooltip",handle:onshowTooltip,layer:kibanaLayer});var onHideTooltip=function onHideTooltip(){_this4._leafletMap.closePopup();_this4._popup=null};kibanaLayer.on("hideTooltip",onHideTooltip);this._listeners.push({name:"hideTooltip",handle:onHideTooltip,layer:kibanaLayer});var onStyleChanged=function onStyleChanged(){_this4._leafletLegendControl&&_this4._leafletLegendControl.updateContents()};kibanaLayer.on("styleChanged",onStyleChanged);this._listeners.push({name:"styleChanged",handle:onStyleChanged,layer:kibanaLayer});this._layers.push(kibanaLayer);kibanaLayer.addToLeafletMap(this._leafletMap);this.emit("layers:update");this._addAttributions(kibanaLayer.getAttributions())}},{key:"removeLayer",value:function removeLayer(kibanaLayer){var _this5=this;if(!kibanaLayer)return;this._removeAttributions(kibanaLayer.getAttributions());var index=this._layers.indexOf(kibanaLayer);if(index>=0){this._layers.splice(index,1);kibanaLayer.removeFromLeafletMap(this._leafletMap)}this._listeners.forEach(function(listener){listener.layer===kibanaLayer&&listener.layer.removeListener(listener.name,listener.handle)});this._layers.forEach(function(layer){return _this5._addAttributions(layer.getAttributions())});this._baseLayerSettings&&this._addAttributions(this._baseLayerSettings.options.attribution)}},{key:"_addAttributions",value:function _addAttributions(attribution){var _this6=this;var attributions=getAttributionArray(attribution);attributions.forEach(function(attribution){_this6._leafletMap.attributionControl.removeAttribution(attribution);_this6._leafletMap.attributionControl.addAttribution(attribution)})}},{key:"_removeAttributions",value:function _removeAttributions(attribution){var _this7=this;var attributions=getAttributionArray(attribution);attributions.forEach(function(attribution){_this7._leafletMap.attributionControl.removeAttribution(attribution)})}},{key:"destroy",value:function destroy(){this._leafletFitControl&&this._leafletMap.removeControl(this._leafletFitControl);this._leafletDrawControl&&this._leafletMap.removeControl(this._leafletDrawControl);this._leafletLegendControl&&this._leafletMap.removeControl(this._leafletLegendControl);this.setBaseLayer(null);var layer=void 0;while(this._layers.length){layer=this._layers.pop();layer.removeFromLeafletMap(this._leafletMap)}this._leafletMap.remove();this._containerNode.innerHTML="";this._listeners.forEach(function(listener){return listener.layer.removeListener(listener.name,listener.handle)})}},{key:"getCenter",value:function getCenter(){var center=this._leafletMap.getCenter();return{lon:center.lng,lat:center.lat}}},{key:"setCenter",value:function setCenter(latitude,longitude){var latLong=_leaflet2.default.latLng(latitude,longitude);latLong.equals&&!latLong.equals(this._leafletMap.getCenter())&&this._leafletMap.setView(latLong)}},{key:"setZoomLevel",value:function setZoomLevel(zoomLevel){this._leafletMap.getZoom()!==zoomLevel&&this._leafletMap.setZoom(zoomLevel)}},{key:"getZoomLevel",value:function getZoomLevel(){return this._leafletMap.getZoom()}},{key:"getMaxZoomLevel",value:function getMaxZoomLevel(){return this._leafletMap.getMaxZoom()}},{key:"getGeohashPrecision",value:function getGeohashPrecision(){return(0,_zoom_to_precision.zoomToPrecision)(this._leafletMap.getZoom(),12,this._leafletMap.getMaxZoom())}},{key:"getLeafletBounds",value:function getLeafletBounds(){return this._leafletMap.getBounds()}},{key:"getMetersPerPixel",value:function getMetersPerPixel(){var pointC=this._leafletMap.latLngToContainerPoint(this._leafletMap.getCenter());var pointX=[pointC.x+1,pointC.y];var pointY=[pointC.x,pointC.y+1];var latLngC=this._leafletMap.containerPointToLatLng(pointC);var latLngX=this._leafletMap.containerPointToLatLng(pointX);var latLngY=this._leafletMap.containerPointToLatLng(pointY);var distanceX=latLngC.distanceTo(latLngX);var distanceY=latLngC.distanceTo(latLngY);return _lodash2.default.min([distanceX,distanceY])}},{key:"_getLeafletBounds",value:function _getLeafletBounds(resizeOnFail){var boundsRaw=this._leafletMap.getBounds();var bounds=this._leafletMap.wrapLatLngBounds(boundsRaw);if(!bounds)return null;var southEast=bounds.getSouthEast();var northWest=bounds.getNorthWest();if(southEast.lng===northWest.lng||southEast.lat===northWest.lat){if(resizeOnFail){this._leafletMap.invalidateSize();return this._getLeafletBounds(false)}return null}return bounds}},{key:"getBounds",value:function getBounds(){var bounds=this._getLeafletBounds(true);if(!bounds)return null;var southEast=bounds.getSouthEast();var northWest=bounds.getNorthWest();var southEastLng=southEast.lng;var northWestLng=northWest.lng;var southEastLat=southEast.lat;var northWestLat=northWest.lat;return{bottom_right:{lat:southEastLat,lon:southEastLng},top_left:{lat:northWestLat,lon:northWestLng}}}},{key:"setDesaturateBaseLayer",value:function setDesaturateBaseLayer(isDesaturated){if(isDesaturated===this._baseLayerIsDesaturated)return;this._baseLayerIsDesaturated=isDesaturated;this._updateDesaturation();this._leafletBaseLayer.redraw()}},{key:"addDrawControl",value:function addDrawControl(){var drawColor="#000";var drawOptions={draw:{polyline:false,marker:false,circle:false,rectangle:{shapeOptions:{stroke:false,color:drawColor}},polygon:{shapeOptions:{color:drawColor}}}};this._leafletDrawControl=new _leaflet2.default.Control.Draw(drawOptions);this._leafletMap.addControl(this._leafletDrawControl)}},{key:"addFitControl",value:function addFitControl(){if(this._leafletFitControl||!this._leafletMap)return;var fitContainer=_leaflet2.default.DomUtil.create("div","leaflet-control leaflet-bar leaflet-control-fit");this._leafletFitControl=makeFitControl(fitContainer,this);this._leafletMap.addControl(this._leafletFitControl)}},{key:"addLegendControl",value:function addLegendControl(){if(this._leafletLegendControl||!this._leafletMap)return;this._updateLegend()}},{key:"setLegendPosition",value:function setLegendPosition(position){if(this._legendPosition===position)this._leafletLegendControl||this._updateLegend();else{this._legendPosition=position;this._updateLegend()}}},{key:"_updateLegend",value:function _updateLegend(){this._leafletLegendControl&&this._leafletMap.removeControl(this._leafletLegendControl);var $wrapper=(0,_jquery2.default)("<div>").addClass("tilemap-legend-wrapper");this._leafletLegendControl=makeLegendControl($wrapper,this,this._legendPosition);this._leafletMap.addControl(this._leafletLegendControl)}},{key:"resize",value:function resize(){this._leafletMap.invalidateSize();this._updateExtent()}},{key:"setMinZoom",value:function setMinZoom(zoom){this._leafletMap.setMinZoom(zoom)}},{key:"setMaxZoom",value:function setMaxZoom(zoom){this._leafletMap.setMaxZoom(zoom)}},{key:"getLeafletBaseLayer",value:function getLeafletBaseLayer(){return this._leafletBaseLayer}},{key:"setBaseLayer",value:function setBaseLayer(settings){var _this8=this;if(_lodash2.default.isEqual(settings,this._baseLayerSettings))return;if(null===settings){if(this._leafletBaseLayer&&this._leafletMap){this._removeAttributions(this._baseLayerSettings.options.attribution);this._leafletMap.removeLayer(this._leafletBaseLayer);this._leafletBaseLayer=null;this._baseLayerSettings=null}return}this._baseLayerSettings=settings;if(this._leafletBaseLayer){this._leafletMap.removeLayer(this._leafletBaseLayer);this._leafletBaseLayer=null}var baseLayer=void 0;"wms"===settings.baseLayerType?baseLayer=this._getWMSBaseLayer(settings.options):"tms"===settings.baseLayerType&&(baseLayer=this._getTMSBaseLayer(settings.options));if(baseLayer){baseLayer.on("tileload",function(){return _this8._updateDesaturation()});baseLayer.on("load",function(){_this8.emit("baseLayer:loaded")});baseLayer.on("loading",function(){_this8.emit("baseLayer:loading")});this._leafletBaseLayer=baseLayer;this._leafletBaseLayer.addTo(this._leafletMap);this._leafletBaseLayer.bringToBack();settings.options.minZoom>this._leafletMap.getZoom()&&this._leafletMap.setZoom(settings.options.minZoom);this._addAttributions(settings.options.attribution);this.resize()}}},{key:"isInside",value:function isInside(bucketRectBounds){var mapBounds=this._leafletMap.getBounds();return mapBounds.intersects(bucketRectBounds)}},{key:"fitToData",value:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var _this9=this;var boundsArray,bounds;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(this._leafletMap){_context3.next=2;break}return _context3.abrupt("return");case 2:_context3.next=4;return Promise.all(this._layers.map(function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee(layer){return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return layer.getBounds();case 2:return _context.abrupt("return",_context.sent);case 3:case"end":return _context.stop()}},_callee,_this9)}));return function(_x){return _ref2.apply(this,arguments)}}()));case 4:boundsArray=_context3.sent;bounds=null;boundsArray.forEach(function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(b){return regeneratorRuntime.wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:bounds?bounds.extend(b):bounds=b;case 1:case"end":return _context2.stop()}},_callee2,_this9)}));return function(_x2){return _ref3.apply(this,arguments)}}());bounds&&bounds.isValid()&&this._leafletMap.fitBounds(bounds);case 8:case"end":return _context3.stop()}},_callee3,this)}));function fitToData(){return _ref.apply(this,arguments)}return fitToData}()},{key:"_getTMSBaseLayer",value:function _getTMSBaseLayer(options){return _leaflet2.default.tileLayer(options.url,{minZoom:options.minZoom,maxZoom:options.maxZoom,subdomains:options.subdomains||[]})}},{key:"_getWMSBaseLayer",value:function _getWMSBaseLayer(options){var wmsOptions={format:options.format||"",layers:options.layers||"",minZoom:options.minZoom,maxZoom:options.maxZoom,styles:options.styles||"",transparent:options.transparent,version:options.version||"1.3.0"};return"string"===typeof options.url&&options.url.length?_leaflet2.default.tileLayer.wms(options.url,wmsOptions):null}},{key:"_updateExtent",value:function _updateExtent(){this._layers.forEach(function(layer){return layer.updateExtent()})}},{key:"_updateDesaturation",value:function _updateDesaturation(){var tiles=(0,_jquery2.default)("img.leaflet-tile-loaded");this._baseLayerIsDesaturated?tiles.removeClass("filters-off"):this._baseLayerIsDesaturated||tiles.addClass("filters-off")}},{key:"persistUiStateForVisualization",value:function persistUiStateForVisualization(visualization){var _this10=this;function persistMapStateInUiState(){var uiState=visualization.getUiState();var centerFromUIState=uiState.get("mapCenter");var zoomFromUiState=parseInt(uiState.get("mapZoom"));(isNaN(zoomFromUiState)||this.getZoomLevel()!==zoomFromUiState)&&visualization.uiStateVal("mapZoom",this.getZoomLevel());var centerFromMap=this.getCenter();centerFromUIState&&centerFromMap.lon===centerFromUIState[1]&&centerFromMap.lat===centerFromUIState[0]||visualization.uiStateVal("mapCenter",[centerFromMap.lat,centerFromMap.lon])}this._leafletMap.on("resize",function(){visualization.sessionState.mapBounds=_this10.getBounds()});this._leafletMap.on("load",function(){visualization.sessionState.mapBounds=_this10.getBounds()});this.on("dragend",persistMapStateInUiState);this.on("zoomend",persistMapStateInUiState)}},{key:"useUiStateFromVisualization",value:function useUiStateFromVisualization(visualization){var uiState=visualization.getUiState();var zoomFromUiState=parseInt(uiState.get("mapZoom"));var centerFromUIState=uiState.get("mapCenter");isNaN(zoomFromUiState)||this.setZoomLevel(zoomFromUiState);centerFromUIState&&this.setCenter(centerFromUIState[0],centerFromUIState[1])}}]);return KibanaMap}(_events.EventEmitter);function getAttributionArray(attribution){var attributionString=attribution||"";var attributions=attributionString.split("|");1===attributions.length&&(attributions=attributions[0].split(","));return attributions}},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getLegendColors=getLegendColors;exports.getColor=getColor;function getLegendColors(colorRamp){var colors=[];colors[0]=getColor(colorRamp,0);colors[1]=getColor(colorRamp,Math.floor(1*colorRamp.length/4));colors[2]=getColor(colorRamp,Math.floor(2*colorRamp.length/4));colors[3]=getColor(colorRamp,Math.floor(3*colorRamp.length/4));colors[4]=getColor(colorRamp,colorRamp.length-1);return colors}function getColor(colorRamp,i){var color=colorRamp[i][1];var red=Math.floor(255*color[0]);var green=Math.floor(255*color[1]);var blue=Math.floor(255*color[2]);return"rgb("+red+","+green+","+blue+")"}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(4707)},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function TabifyTable(){this.columns=null;this.rows=[]}TabifyTable.prototype.title=function(){return this.$parent?this.$parent.title:""};TabifyTable.prototype.aggConfig=function(col){if(!col.aggConfig)throw new TypeError("Column is missing the aggConfig property");return col.aggConfig};TabifyTable.prototype.field=function(col){return this.aggConfig(col).getField()};TabifyTable.prototype.fieldFormatter=function(col){return this.aggConfig(col).fieldFormatter()};exports.TabifyTable=TabifyTable},,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Utils=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _jsonStringifyPrettyCompact=__webpack_require__(1579);var _jsonStringifyPrettyCompact2=_interopRequireDefault(_jsonStringifyPrettyCompact);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.Utils=function(){function Utils(){_classCallCheck(this,Utils)}_createClass(Utils,null,[{key:"formatWarningToStr",value:function formatWarningToStr(value){if(arguments.length>=2)try{"string"===typeof arguments[1]?value+="\n"+arguments[1]:value+="\n"+(0,_jsonStringifyPrettyCompact2.default)(arguments[1],{maxLength:70})}catch(err){}return value}},{key:"formatErrorToStr",value:function formatErrorToStr(error){error?error instanceof Error&&(error=error.message):error="ERR";return Utils.formatWarningToStr.apply(Utils,[error].concat(_toConsumableArray(Array.from(arguments).slice(1))))}}]);return Utils}()},,,function(module,exports,__webpack_require__){__webpack_require__(1582);__webpack_require__(4798);__webpack_require__(4799)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BasicResponseHandlerProvider=void 0;var _agg_response=__webpack_require__(667);var _table=__webpack_require__(1575);var _vis_response_handlers=__webpack_require__(655);var BasicResponseHandlerProvider=function BasicResponseHandlerProvider(Private){var aggResponse=Private(_agg_response.AggResponseIndexProvider);function convertTableGroup(vis,tableGroup){var tables=tableGroup.tables;var firstChild=tables[0];if(firstChild instanceof _table.TabifyTable){var chart=convertTable(vis,firstChild);tableGroup.$parent&&(chart.label=tableGroup.title);return chart}if(!tables.length)return;var out={};var outList=void 0;tables.forEach(function(table){if(!outList){var aggConfig=table.aggConfig;var direction=aggConfig.params.row?"rows":"columns";outList=out[direction]=[]}var output=void 0;(output=convertTableGroup(vis,table))&&outList.push(output)});return out}function convertTable(vis,table){return vis.type.responseConverter?vis.type.responseConverter(vis,table):table}return{name:"basic",handler:function handler(vis,response){return new Promise(function(resolve){vis.isHierarchical()&&resolve(aggResponse.hierarchical(vis,response));var tableGroup=aggResponse.tabify(vis.getAggConfig(),response,{canSplit:true,asAggConfigResults:true,isHierarchical:vis.isHierarchical()});var converted=convertTableGroup(vis,tableGroup);converted||(converted={rows:[]});converted.hits=response.hits.total;resolve(converted)})}}};_vis_response_handlers.VisResponseHandlersRegistryProvider.register(BasicResponseHandlerProvider);exports.BasicResponseHandlerProvider=BasicResponseHandlerProvider},function(module,exports,__webpack_require__){__webpack_require__(4800);__webpack_require__(4801)},function(module,exports,__webpack_require__){__webpack_require__(4802)},function(module,exports,__webpack_require__){"use strict";var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);__webpack_require__(4803);__webpack_require__(1588);var _modules=__webpack_require__(2);var _sidebar=__webpack_require__(4817);var _sidebar2=_interopRequireDefault(_sidebar);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("app/visualize").directive("visEditorSidebar",function(){return{restrict:"E",template:_sidebar2.default,scope:true,controllerAs:"sidebar",controller:function controller($scope){var _this=this;$scope.$watch("vis.type",function(visType){if(visType){_this.showData=visType.schemas.buckets||visType.schemas.metrics;if(_lodash2.default.has(visType,"editorConfig.optionTabs")){var activeTabs=visType.editorConfig.optionTabs.filter(function(tab){return _lodash2.default.get(tab,"active",false)});activeTabs.length>0&&(_this.section=activeTabs[0].name)}_this.section=_this.section||(_this.showData?"data":_lodash2.default.get(visType,"editorConfig.optionTabs[0].name"))}})}}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var agg_type_filters_1=__webpack_require__(4810);exports.aggTypeFilters=agg_type_filters_1.aggTypeFilters},function(module,exports,__webpack_require__){"use strict";var _agg_config=__webpack_require__(296);var _modules=__webpack_require__(2);var _agg_add=__webpack_require__(4811);var _agg_add2=_interopRequireDefault(_agg_add);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana").directive("visEditorAggAdd",function(){return{restrict:"E",template:_agg_add2.default,controllerAs:"add",controller:function controller($scope){var self=this;self.form=false;self.submit=function(schema){self.form=false;var aggConfig=new _agg_config.AggConfig($scope.vis,{schema:schema,id:_agg_config.AggConfig.nextId($scope.state.aggs)});aggConfig.brandNew=true;$scope.state.aggs.push(aggConfig)}}}})},function(module,exports,__webpack_require__){"use strict";var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _reactDom=__webpack_require__(15);var _modules=__webpack_require__(2);var _vis_options=__webpack_require__(4816);var _vis_options2=_interopRequireDefault(_vis_options);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("app/visualize").directive("visEditorVisOptions",function(Private,$compile){return{restrict:"E",template:_vis_options2.default,scope:{vis:"=",visData:"=",uiState:"=",editor:"=",visualizeEditor:"=",editorState:"="},link:function link($scope,$el){var $optionContainer=$el.find("[data-visualization-options]");var reactOptionsComponent="string"!==typeof $scope.editor;var stageEditorParams=function stageEditorParams(params){$scope.editorState.params=_lodash2.default.cloneDeep(params);$scope.$apply()};var renderReactComponent=function renderReactComponent(){var Component=$scope.editor;(0,_reactDom.render)(_react2.default.createElement(Component,{scope:$scope,editorState:$scope.editorState,stageEditorParams:stageEditorParams}),$el[0])};if(reactOptionsComponent)renderReactComponent();else{var $editor=$compile($scope.editor)($scope);$optionContainer.append($editor)}$scope.$watchGroup(["visData","visualizeEditor","editorState.params"],function(){reactOptionsComponent&&renderReactComponent()});$scope.$watch("vis.type.schemas.all.length",function(len){$scope.alwaysShowOptions=0===len});$el.on("$destroy",function(){reactOptionsComponent&&(0,_reactDom.unmountComponentAtNode)($el[0])})}}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VisEditorTypesRegistryProvider=void 0;var _registry=__webpack_require__(107);exports.VisEditorTypesRegistryProvider=(0,_registry.uiRegistry)({name:"visEditorTypes",index:["name"],order:["title"]})},function(module,exports,__webpack_require__){__webpack_require__(4823)},function(module,exports,__webpack_require__){__webpack_require__(4837);__webpack_require__(4857)},function(module,exports,__webpack_require__){"use strict";__webpack_require__(4839)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getSort=getSort;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getSort(sort,indexPattern){var defaultSortOrder=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"desc";var sortObj={};var field=void 0;var direction=void 0;function isSortable(field){return indexPattern.fields.byName[field]&&indexPattern.fields.byName[field].sortable}if(Array.isArray(sort)&&2===sort.length&&isSortable(sort[0])){field=sort[0];direction=sort[1]}else if(indexPattern.timeFieldName&&isSortable(indexPattern.timeFieldName)){field=indexPattern.timeFieldName;direction=defaultSortOrder}field?sortObj[field]=direction:sortObj._score="desc";return sortObj}getSort.array=function(sort,indexPattern,defaultSortOrder){return(0,_lodash2.default)(getSort(sort,indexPattern,defaultSortOrder)).pairs().pop()}},function(module,exports,__webpack_require__){"use strict";var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _jquery=__webpack_require__(13);var _jquery2=_interopRequireDefault(_jquery);var _risonNode=__webpack_require__(310);var _risonNode2=_interopRequireDefault(_risonNode);__webpack_require__(1595);__webpack_require__(1406);__webpack_require__(614);__webpack_require__(4847);var _no_white_space=__webpack_require__(1275);var _open=__webpack_require__(4848);var _open2=_interopRequireDefault(_open);var _details=__webpack_require__(4849);var _details2=_interopRequireDefault(_details);var _modules=__webpack_require__(2);var _filter_bar=__webpack_require__(1331);var _render_complete=__webpack_require__(507);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("app/discover");var MIN_LINE_LENGTH=20;_module.directive("kbnTableRow",function($compile,$httpParamSerializer,kbnUrl){var cellTemplate=_lodash2.default.template((0,_no_white_space.noWhiteSpace)(__webpack_require__(4850)));var truncateByHeightTemplate=_lodash2.default.template((0,_no_white_space.noWhiteSpace)(__webpack_require__(4851)));return{restrict:"A",scope:{columns:"=",filter:"=",filters:"=?",indexPattern:"=",row:"=kbnTableRow",onAddColumn:"=?",onRemoveColumn:"=?"},link:function link($scope,$el){$el.after('<tr data-test-subj="docTableDetailsRow">');$el.empty();var $detailsScope=void 0;var $toggleScope=void 0;$scope.toggleRow=function(){var $detailsTr=$el.next();$scope.open=!$scope.open;$detailsTr.toggle($scope.open);if(!$scope.open){$detailsScope.$destroy();return}$detailsScope=$scope.$new();$detailsTr.html(_details2.default);$detailsScope.row=$scope.row;$compile($detailsTr)($detailsScope)};$scope.$watchMulti(["indexPattern.timeFieldName","row.highlight","[]columns"],function(){createSummaryRow($scope.row,$scope.row._id)});$scope.inlineFilter=function inlineFilter($event,type){var column=(0,_jquery2.default)($event.target).data().column;var field=$scope.indexPattern.fields.byName[column];$scope.filter(field,$scope.flattenedRow[column],type)};$scope.getContextAppHref=function(){var path=kbnUrl.eval("#/context/{{ indexPattern }}/{{ anchorType }}/{{ anchorId }}",{anchorId:$scope.row._id,anchorType:$scope.row._type,indexPattern:$scope.indexPattern.id});var hash=$httpParamSerializer({_a:_risonNode2.default.encode({columns:$scope.columns,filters:($scope.filters||[]).map(_filter_bar.disableFilter)})});return path+"?"+hash};function createSummaryRow(row){var indexPattern=$scope.indexPattern;$scope.flattenedRow=indexPattern.flattenHit(row);var newHtmls=[_open2.default];var mapping=indexPattern.fields.byName;indexPattern.timeFieldName&&newHtmls.push(cellTemplate({timefield:true,formatted:_displayField(row,indexPattern.timeFieldName),filterable:mapping[indexPattern.timeFieldName].filterable&&_lodash2.default.isFunction($scope.filter),column:indexPattern.timeFieldName}));$scope.columns.forEach(function(column){var isFilterable=void 0!==$scope.flattenedRow[column]&&mapping[column]&&mapping[column].filterable&&_lodash2.default.isFunction($scope.filter);newHtmls.push(cellTemplate({timefield:false,sourcefield:"_source"===column,formatted:_displayField(row,column,true),filterable:isFilterable,column:column}))});var $cells=$el.children();newHtmls.forEach(function(html,i){var $cell=$cells.eq(i);if($cell.data("discover:html")===html)return;var reuse=_lodash2.default.find($cells.slice(i+1),function(cell){return _jquery2.default.data(cell,"discover:html")===html});var $target=reuse?(0,_jquery2.default)(reuse).detach():(0,_jquery2.default)(html);$target.data("discover:html",html);var $before=$cells.eq(i-1);$before.length?$before.after($target):$el.append($target);$cells=$el.children();if(!reuse){$toggleScope=$scope.$new();$compile($target)($toggleScope)}});$scope.open&&($detailsScope.row=row);$cells.filter(":gt("+(newHtmls.length-1)+")").remove();(0,_render_complete.dispatchRenderComplete)($el[0])}function _displayField(row,fieldName,truncate){var indexPattern=$scope.indexPattern;var text=indexPattern.formatField(row,fieldName);if(truncate&&text.length>MIN_LINE_LENGTH)return truncateByHeightTemplate({body:text});return text}}}})},function(module,exports,__webpack_require__){"use strict";__webpack_require__(4845)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.addColumn=addColumn;exports.removeColumn=removeColumn;exports.moveColumn=moveColumn;function addColumn(columns,columnName){if(columns.includes(columnName))return;columns.push(columnName)}function removeColumn(columns,columnName){if(!columns.includes(columnName))return;columns.splice(columns.indexOf(columnName),1)}function moveColumn(columns,columnName,newIndex){if(newIndex<0)return;if(newIndex>=columns.length)return;if(!columns.includes(columnName))return;columns.splice(columns.indexOf(columnName),1);columns.splice(newIndex,0,columnName)}},function(module,exports,__webpack_require__){__webpack_require__(4861);__webpack_require__(4880);__webpack_require__(4881)},function(module,exports,__webpack_require__){__webpack_require__(4882)},function(module,exports,__webpack_require__){__webpack_require__(4887)},,function(module,exports,__webpack_require__){"use strict";__webpack_require__(4893);__webpack_require__(1278);__webpack_require__(5064);__webpack_require__(5065);var _routes=__webpack_require__(12);var _routes2=_interopRequireDefault(_routes);var _notify=__webpack_require__(9);var _dashboard_app=__webpack_require__(5066);var _dashboard_app2=_interopRequireDefault(_dashboard_app);var _dashboard_listing_ng_wrapper=__webpack_require__(5067);var _dashboard_listing_ng_wrapper2=_interopRequireDefault(_dashboard_listing_ng_wrapper);var _dashboard_constants=__webpack_require__(251);var _errors=__webpack_require__(56);var _feature_catalogue=__webpack_require__(65);var _saved_objects=__webpack_require__(57);var _persisted_log=__webpack_require__(250);var _saved_object_registry=__webpack_require__(294);var _dashboard_listing=__webpack_require__(5068);var _modules=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var app=_modules.uiModules.get("app/dashboard",["ngRoute","react"]);app.directive("dashboardListing",function(reactDirective){return reactDirective(_dashboard_listing.DashboardListing)});_routes2.default.defaults(/dashboard/,{requireDefaultIndex:true}).when(_dashboard_constants.DashboardConstants.LANDING_PAGE_PATH,{template:_dashboard_listing_ng_wrapper2.default,controller:function controller($injector,$location,$scope,Private,config){var services=Private(_saved_object_registry.SavedObjectRegistryProvider).byLoaderPropertiesName;var dashboardConfig=$injector.get("dashboardConfig");$scope.listingLimit=config.get("savedObjects:listingLimit");$scope.find=function(search){return services.dashboards.find(search,$scope.listingLimit)};$scope.delete=function(ids){return services.dashboards.delete(ids)};$scope.hideWriteControls=dashboardConfig.getHideWriteControls();$scope.initialFilter=$location.search().filter||_dashboard_listing.EMPTY_FILTER},resolve:{dash:function dash($route,Private,redirectWhenMissing,kbnUrl){var savedObjectsClient=Private(_saved_objects.SavedObjectsClientProvider);var title=$route.current.params.title;if(title)return savedObjectsClient.find({search:'"'+title+'"',search_fields:"title",type:"dashboard"}).then(function(results){var matchingDashboards=results.savedObjects.filter(function(dashboard){return dashboard.attributes.title.toLowerCase()===title.toLowerCase()});1===matchingDashboards.length?kbnUrl.redirect((0,_dashboard_constants.createDashboardEditUrl)(matchingDashboards[0].id)):kbnUrl.redirect(_dashboard_constants.DashboardConstants.LANDING_PAGE_PATH+'?filter="'+title+'"');throw _routes2.default.WAIT_FOR_URL_CHANGE_TOKEN}).catch(redirectWhenMissing({dashboard:_dashboard_constants.DashboardConstants.LANDING_PAGE_PATH}))}}}).when(_dashboard_constants.DashboardConstants.CREATE_NEW_DASHBOARD_URL,{template:_dashboard_app2.default,resolve:{dash:function dash(savedDashboards,redirectWhenMissing){return savedDashboards.get().catch(redirectWhenMissing({dashboard:_dashboard_constants.DashboardConstants.LANDING_PAGE_PATH}))}}}).when((0,_dashboard_constants.createDashboardEditUrl)(":id"),{template:_dashboard_app2.default,resolve:{dash:function dash(savedDashboards,Notifier,$route,$location,redirectWhenMissing,kbnUrl,AppState){var id=$route.current.params.id;return savedDashboards.get(id).then(function(savedDashboard){_persisted_log.recentlyAccessed.add(savedDashboard.getFullPath(),savedDashboard.title,id);return savedDashboard}).catch(function(error){if(error instanceof _errors.InvalidJSONProperty){_notify.toastNotifications.addDanger(error.message);kbnUrl.redirect(_dashboard_constants.DashboardConstants.LANDING_PAGE_PATH);return}if(!(error instanceof _errors.SavedObjectNotFound&&"create"===id))throw error;kbnUrl.redirect(_dashboard_constants.DashboardConstants.CREATE_NEW_DASHBOARD_URL,{},new AppState);_notify.toastNotifications.addWarning('The url "dashboard/create" was removed in 6.0. Please update your bookmarks.')}).catch(redirectWhenMissing({dashboard:_dashboard_constants.DashboardConstants.LANDING_PAGE_PATH}))}}});_feature_catalogue.FeatureCatalogueRegistryProvider.register(function(){return{id:"dashboard",title:"Dashboard",description:"Display and share a collection of visualizations and saved searches.",icon:"dashboardApp",path:"/app/kibana#"+_dashboard_constants.DashboardConstants.LANDING_PAGE_PATH,showOnHomePage:true,category:_feature_catalogue.FeatureCatalogueCategory.DATA}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var PanelActionsStore=function(){function PanelActionsStore(){_classCallCheck(this,PanelActionsStore);this.actions=[]}_createClass(PanelActionsStore,[{key:"initializeFromRegistry",value:function initializeFromRegistry(panelActionsRegistry){var _this=this;panelActionsRegistry.forEach(function(panelAction){_this.actions.push(panelAction)})}}]);return PanelActionsStore}();exports.panelActionsStore=new PanelActionsStore},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TopNavIds={ADD:"add",SHARE:"share",OPTIONS:"options",SAVE:"save",EXIT_EDIT_MODE:"exitEditMode",ENTER_EDIT_MODE:"enterEditMode",CLONE:"clone",FULL_SCREEN:"fullScreenMode"}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PanelUtils=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _dashboard_constants=__webpack_require__(251);var _chrome=__webpack_require__(8);var _chrome2=_interopRequireDefault(_chrome);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var PANEL_HEIGHT_SCALE_FACTOR=5;var PANEL_HEIGHT_SCALE_FACTOR_WITH_MARGINS=4;var PANEL_WIDTH_SCALE_FACTOR=4;exports.PanelUtils=function(){function PanelUtils(){_classCallCheck(this,PanelUtils)}_createClass(PanelUtils,null,[{key:"convertPanelDataPre_6_1",value:function convertPanelDataPre_6_1(panel){["col","row"].forEach(function(key){if(!_lodash2.default.has(panel,key))throw new Error('Unable to migrate panel data for "6.1.0" backwards compatibility, panel does not contain expected field: '+key)});panel.gridData={x:panel.col-1,y:panel.row-1,w:panel.size_x||_dashboard_constants.DEFAULT_PANEL_WIDTH,h:panel.size_y||_dashboard_constants.DEFAULT_PANEL_HEIGHT,i:panel.panelIndex.toString()};panel.version=_chrome2.default.getKibanaVersion();panel.panelIndex=panel.panelIndex.toString();delete panel.size_x;delete panel.size_y;delete panel.row;delete panel.col;return panel}},{key:"convertPanelDataPre_6_3",value:function convertPanelDataPre_6_3(panel,useMargins){["w","x","h","y"].forEach(function(key){if(!_lodash2.default.has(panel.gridData,key))throw new Error('Unable to migrate panel data for "6.3.0" backwards compatibility, panel does not contain expected field: '+key)});var heightScaleFactor=useMargins?PANEL_HEIGHT_SCALE_FACTOR_WITH_MARGINS:PANEL_HEIGHT_SCALE_FACTOR;panel.gridData.w=panel.gridData.w*PANEL_WIDTH_SCALE_FACTOR;panel.gridData.x=panel.gridData.x*PANEL_WIDTH_SCALE_FACTOR;panel.gridData.h=panel.gridData.h*heightScaleFactor;panel.gridData.y=panel.gridData.y*heightScaleFactor;panel.version=_chrome2.default.getKibanaVersion();return panel}},{key:"parseVersion",value:function parseVersion(){var version=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"6.0.0";var versionSplit=version.split(".");if(versionSplit.length<3)throw new Error("Invalid version, "+version+", expected <major>.<minor>.<patch>");return{major:parseInt(versionSplit[0],10),minor:parseInt(versionSplit[1],10)}}},{key:"initPanelIndexes",value:function initPanelIndexes(panels){var maxIndex=this.getMaxPanelIndex(panels);panels.forEach(function(panel){panel.panelIndex||(panel.panelIndex=maxIndex++)})}},{key:"getMaxPanelIndex",value:function getMaxPanelIndex(panels){var maxId=panels.reduce(function(id,panel){return Math.max(id,panel.panelIndex||id)},0);return++maxId}}]);return PanelUtils}()},function(module,exports,__webpack_require__){"use strict";var __importDefault=(void 0,function(mod){return mod&&mod.__esModule?mod:{default:mod}});Object.defineProperty(exports,"__esModule",{value:true});var redux_1=__webpack_require__(670);var redux_thunk_1=__importDefault(__webpack_require__(4916));var types_1=__webpack_require__(1612);var dashboard_view_mode_1=__webpack_require__(122);var reducers_1=__webpack_require__(4917);var enhancers=[redux_1.applyMiddleware(redux_thunk_1.default)];exports.store=redux_1.createStore(reducers_1.reducers,{dashboard:{embeddables:{},metadata:{title:"New Dashboard"},panels:{},view:{filters:[],hidePanelTitles:false,isFullScreenMode:false,query:{language:types_1.QueryLanguageType.LUCENE,query:""},timeRange:{from:"now-15m",to:"now"},useMargins:true,viewMode:dashboard_view_mode_1.DashboardViewMode.VIEW}}},redux_1.compose.apply(redux_1,enhancers))},,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});(function(QueryLanguageType){QueryLanguageType["KUERY"]="kuery";QueryLanguageType["LUCENE"]="lucene"})(exports.QueryLanguageType||(exports.QueryLanguageType={}))},,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var redux_actions_1=__webpack_require__(31);var PanelActionTypeKeys;(function(PanelActionTypeKeys){PanelActionTypeKeys["DELETE_PANEL"]="DELETE_PANEL";PanelActionTypeKeys["UPDATE_PANEL"]="UPDATE_PANEL";PanelActionTypeKeys["RESET_PANEl_TITLE"]="RESET_PANEl_TITLE";PanelActionTypeKeys["SET_PANEl_TITLE"]="SET_PANEl_TITLE";PanelActionTypeKeys["UPDATE_PANELS"]="UPDATE_PANELS";PanelActionTypeKeys["SET_PANELS"]="SET_PANELS"})(PanelActionTypeKeys=exports.PanelActionTypeKeys||(exports.PanelActionTypeKeys={}));exports.deletePanel=redux_actions_1.createAction(PanelActionTypeKeys.DELETE_PANEL);exports.updatePanel=redux_actions_1.createAction(PanelActionTypeKeys.UPDATE_PANEL);exports.resetPanelTitle=redux_actions_1.createAction(PanelActionTypeKeys.RESET_PANEl_TITLE);exports.setPanelTitle=redux_actions_1.createAction(PanelActionTypeKeys.SET_PANEl_TITLE);exports.updatePanels=redux_actions_1.createAction(PanelActionTypeKeys.UPDATE_PANELS);exports.setPanels=redux_actions_1.createAction(PanelActionTypeKeys.SET_PANELS)},function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}Object.defineProperty(exports,"__esModule",{value:true});__export(__webpack_require__(4966))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _dashboard_panel_container=__webpack_require__(4972);Object.defineProperty(exports,"DashboardPanel",{enumerable:true,get:function get(){return _dashboard_panel_container.DashboardPanelContainer}});var _panel_state=__webpack_require__(5010);Object.defineProperty(exports,"createPanelState",{enumerable:true,get:function get(){return _panel_state.createPanelState}})},,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _registry_1=__webpack_require__(107);exports.DashboardPanelActionsRegistryProvider=_registry_1.uiRegistry({index:["name"],name:"dashboardPanelActions"})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _save_dashboard=__webpack_require__(5011);Object.defineProperty(exports,"saveDashboard",{enumerable:true,get:function get(){return _save_dashboard.saveDashboard}});var _get_app_state_defaults=__webpack_require__(5013);Object.defineProperty(exports,"getAppStateDefaults",{enumerable:true,get:function get(){return _get_app_state_defaults.getAppStateDefaults}});var _migrate_app_state=__webpack_require__(5014);Object.defineProperty(exports,"migrateAppState",{enumerable:true,get:function get(){return _migrate_app_state.migrateAppState}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.addFilter=addFilter;function addFilter(field){var values=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];var operation=arguments[2];var index=arguments[3];arguments[4];var filterManager=arguments[5];Array.isArray(values)||(values=[values]);filterManager.add(field,values,operation,index)}},,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.KibanaRootController=KibanaRootController;var _momentTimezone=__webpack_require__(126);var _momentTimezone2=_interopRequireDefault(_momentTimezone);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function KibanaRootController($scope,courier,config){config.watch("dateFormat:tz",setDefaultTimezone,$scope);config.watch("dateFormat:dow",setStartDayOfWeek,$scope);function setDefaultTimezone(tz){_momentTimezone2.default.tz.setDefault(tz)}function setStartDayOfWeek(day){var dow=_momentTimezone2.default.weekdays().indexOf(day);_momentTimezone2.default.updateLocale(_momentTimezone2.default.locale(),{week:{dow:dow}})}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:true});var injected_metadata_1=__webpack_require__(1790);var legacy_platform_1=__webpack_require__(1793);var CoreSystem=function(){function CoreSystem(params){_classCallCheck(this,CoreSystem);var rootDomElement=params.rootDomElement,injectedMetadata=params.injectedMetadata,requireLegacyFiles=params.requireLegacyFiles,useLegacyTestHarness=params.useLegacyTestHarness;this.injectedMetadata=new injected_metadata_1.InjectedMetadataService({injectedMetadata:injectedMetadata});this.legacyPlatform=new legacy_platform_1.LegacyPlatformService({rootDomElement:rootDomElement,requireLegacyFiles:requireLegacyFiles,useLegacyTestHarness:useLegacyTestHarness})}_createClass(CoreSystem,[{key:"start",value:function start(){this.legacyPlatform.start({injectedMetadata:this.injectedMetadata.start()})}}]);return CoreSystem}();exports.CoreSystem=CoreSystem},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var injected_metadata_service_1=__webpack_require__(1791);exports.InjectedMetadataService=injected_metadata_service_1.InjectedMetadataService},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:true});var deep_freeze_1=__webpack_require__(1792);var InjectedMetadataService=function(){function InjectedMetadataService(params){_classCallCheck(this,InjectedMetadataService);this.params=params}_createClass(InjectedMetadataService,[{key:"start",value:function start(){var state=deep_freeze_1.deepFreeze(this.params.injectedMetadata);return{getLegacyMetadata:function getLegacyMetadata(){return state.legacyMetadata}}}}]);return InjectedMetadataService}();exports.InjectedMetadataService=InjectedMetadataService},function(module,exports,__webpack_require__){"use strict";var _typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"===typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};Object.defineProperty(exports,"__esModule",{value:true});function deepFreeze(object){var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=void 0;try{for(var _step,_iterator=Object.values(object)[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var value=_step.value;null!==value&&"object"===("undefined"===typeof value?"undefined":_typeof(value))&&deepFreeze(value)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return Object.freeze(object)}exports.deepFreeze=deepFreeze},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var legacy_platform_service_1=__webpack_require__(1794);exports.LegacyPlatformService=legacy_platform_service_1.LegacyPlatformService},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:true});var LegacyPlatformService=function(){function LegacyPlatformService(params){_classCallCheck(this,LegacyPlatformService);this.params=params}_createClass(LegacyPlatformService,[{key:"start",value:function start(_ref){var injectedMetadata=_ref.injectedMetadata;__webpack_require__(91).__newPlatformInit__(injectedMetadata.getLegacyMetadata());var bootstrapModule=this.loadBootstrapModule();this.params.requireLegacyFiles();bootstrapModule.bootstrap(this.params.rootDomElement)}},{key:"loadBootstrapModule",value:function loadBootstrapModule(){if(this.params.useLegacyTestHarness){false;throw new Error("tests bundle is not available in the distributable")}return __webpack_require__(8)}}]);return LegacyPlatformService}();exports.LegacyPlatformService=LegacyPlatformService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.chrome=void 0;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _angular=__webpack_require__(16);var _angular2=_interopRequireDefault(_angular);var _metadata=__webpack_require__(91);__webpack_require__(1018);__webpack_require__(474);__webpack_require__(9);__webpack_require__(1237);__webpack_require__(475);__webpack_require__(798);__webpack_require__(1238);__webpack_require__(799);__webpack_require__(2758);var _angular3=__webpack_require__(2760);var _apps=__webpack_require__(2878);var _apps2=_interopRequireDefault(_apps);var _controls=__webpack_require__(2879);var _controls2=_interopRequireDefault(_controls);var _nav=__webpack_require__(2880);var _template=__webpack_require__(2882);var _template2=_interopRequireDefault(_template);var _theme=__webpack_require__(2883);var _theme2=_interopRequireDefault(_theme);var _translations=__webpack_require__(2884);var _translations2=_interopRequireDefault(_translations);var _xsrf=__webpack_require__(2885);var _ui_settings=__webpack_require__(2886);var _loading_count=__webpack_require__(2890);var _saved_object_client=__webpack_require__(2892);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var chrome=exports.chrome={};var internals=_lodash2.default.defaults(_lodash2.default.cloneDeep(_metadata.metadata),{basePath:"",rootController:null,rootTemplate:null,showAppsLink:null,xsrfToken:null,devMode:true,brand:null,nav:[],applicationClasses:[]});(0,_ui_settings.initUiSettingsApi)(chrome);(0,_saved_object_client.initSavedObjectClient)(chrome);(0,_apps2.default)(chrome,internals);(0,_xsrf.initChromeXsrfApi)(chrome,internals);(0,_nav.initChromeNavApi)(chrome,internals);(0,_loading_count.initLoadingCountApi)(chrome,internals);(0,_angular3.initAngularApi)(chrome,internals);(0,_controls2.default)(chrome,internals);(0,_template2.default)(chrome,internals);(0,_theme2.default)(chrome,internals);(0,_translations2.default)(chrome,internals);var waitForBootstrap=new Promise(function(resolve){chrome.bootstrap=function(targetDomElement){__webpack_require__(2902);__webpack_require__(2912);chrome.setupAngular();targetDomElement.setAttribute("id","kibana-body");targetDomElement.setAttribute("kbn-chrome","true");_angular2.default.bootstrap(targetDomElement,["kibana"]);resolve(targetDomElement)}});chrome.dangerouslyGetActiveInjector=function(){return waitForBootstrap.then(function(targetDomElement){var $injector=_angular2.default.element(targetDomElement).injector();if(!$injector)return Promise.reject("targetDomElement had no angular context after bootstrapping");return $injector})}},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=bindToJquery;var _testSubjSelector=__webpack_require__(1798);var _testSubjSelector2=_interopRequireDefault(_testSubjSelector);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function bindToJquery($){$.findTestSubject=function(){return findTestSubject.apply($(document.body),arguments)};$.fn.findTestSubject=findTestSubject;function findTestSubject(){var $els=$();var $context=this;for(var _len=arguments.length,subjectSelectors=Array(_len),_key=0;_key<_len;_key++)subjectSelectors[_key]=arguments[_key];subjectSelectors.forEach(function(selector){$els=$els.add($context.find((0,_testSubjSelector2.default)(selector)))});return $els}}module.exports=exports["default"]},,,,function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;if(void 0===getter)return;return getter.call(receiver)};function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:true});exports.BinderFor=void 0;var _binder=__webpack_require__(709);var BinderFor=function(_binder$BinderBase){_inherits(BinderFor,_binder$BinderBase);function BinderFor(emitter){_classCallCheck(this,BinderFor);var _this=_possibleConstructorReturn(this,(BinderFor.__proto__||Object.getPrototypeOf(BinderFor)).call(this));_this.emitter=emitter;return _this}_createClass(BinderFor,[{key:"on",value:function on(){var _get2;for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];(_get2=_get(BinderFor.prototype.__proto__||Object.getPrototypeOf(BinderFor.prototype),"on",this)).call.apply(_get2,[this,this.emitter].concat(args))}}]);return BinderFor}(_binder.BinderBase);exports.BinderFor=BinderFor},function(module,exports,__webpack_require__){"use strict";(function(Buffer){Object.defineProperty(exports,"__esModule",{value:true});exports.deepCloneWithBuffers=deepCloneWithBuffers;var _lodash=__webpack_require__(1);function cloneBuffersCustomizer(val){if(Buffer.isBuffer(val))return new Buffer(val)}function deepCloneWithBuffers(vals){return(0,_lodash.cloneDeep)(vals,cloneBuffersCustomizer)}}).call(exports,__webpack_require__(243).Buffer)},,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fromRoot=fromRoot;var _package_json=__webpack_require__(710);var _path=__webpack_require__(543);function fromRoot(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(0,_path.resolve).apply(void 0,[_package_json.pkg.__dirname].concat(args))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.unset=unset;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _toPath=__webpack_require__(1021);var _toPath2=_interopRequireDefault(_toPath);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function unset(object,rawPath){if(!object)return;var path=(0,_toPath2.default)(rawPath);switch(path.length){case 0:return;case 1:delete object[rawPath];break;default:var leaf=path.pop();var parentPath=path.slice();var parent=_lodash2.default.get(object,parentPath);unset(parent,leaf);_lodash2.default.size(parent)||unset(object,parentPath)}}},,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.encodeQueryComponent=encodeQueryComponent;function encodeQueryComponent(val){var pctEncodeSpaces=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return encodeURIComponent(val).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,pctEncodeSpaces?"%20":"+")}},,function(module,exports,__webpack_require__){"use strict";var _typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"===typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};function _defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true}):obj[key]=value;return obj}Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.getFlattenedObject=getFlattenedObject;function shouldReadKeys(value){return"object"===("undefined"===typeof value?"undefined":_typeof(value))&&null!==value&&!Array.isArray(value)}function getFlattenedObject(rootValue){if(!shouldReadKeys(rootValue))throw new TypeError("Root value is not flatten-able, received "+rootValue);return function flatten(acc,prefix,object){return Object.keys(object).reduce(function(acc,key){var value=object[key];var path=prefix?prefix+"."+key:key;return shouldReadKeys(value)?flatten(acc,path,value):_extends({},acc,_defineProperty({},path,value))},acc)}({},"",rootValue)}},function(module,exports,__webpack_require__){"use strict";var watchStdioForLine=(_ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(proc,logFn,exitAfter){var onLogLine;return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:onLogLine=function onLogLine(line){logFn(line);exitAfter&&exitAfter.test(line)&&proc.kill("SIGINT")};_context.next=3;return Promise.all([proc.catch(function(error){if("SIGINT"!==error.signal)throw error}),(0,_streams.createPromiseFromStreams)([proc.stdout,(0,_streams.createSplitStream)("\n"),skipLastEmptyLineStream(),(0,_streams.createMapStream)(onLogLine)]),(0,_streams.createPromiseFromStreams)([proc.stderr,(0,_streams.createSplitStream)("\n"),skipLastEmptyLineStream(),(0,_streams.createMapStream)(onLogLine)])]);case 3:case"end":return _context.stop()}},_callee,this)})),function watchStdioForLine(_x,_x2,_x3){return _ref.apply(this,arguments)});var _ref;function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}Object.defineProperty(exports,"__esModule",{value:true});exports.watchStdioForLine=watchStdioForLine;var _stream=__webpack_require__(284);var _streams=__webpack_require__(1030);function skipLastEmptyLineStream(){var skippedEmptyLine=false;return new _stream.Transform({objectMode:true,transform:function transform(line,enc,cb){if(skippedEmptyLine){this.push("");skippedEmptyLine=false}if(""===line){skippedEmptyLine=true;return cb()}return cb(null,line)}})}},function(module,exports){},,function(module,exports){},,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.concatStreamProviders=concatStreamProviders;var _stream=__webpack_require__(284);function concatStreamProviders(sourceProviders){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var destination=new _stream.PassThrough(options);var queue=sourceProviders.slice();(function pipeNext(){var provider=queue.shift();if(!provider)return;var source=provider();var isLast=!queue.length;isLast||source.once("end",pipeNext);source.once("error",function(error){return destination.emit("error",error)}).pipe(destination,{end:isLast})})();return destination}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createIntersperseStream=createIntersperseStream;var _stream=__webpack_require__(284);function createIntersperseStream(intersperseChunk){var first=true;return new _stream.Transform({writableObjectMode:true,readableObjectMode:true,transform:function transform(chunk,enc,callback){try{first?first=false:this.push(intersperseChunk);this.push(chunk);callback(null)}catch(err){callback(err)}}})}},function(module,exports,__webpack_require__){"use strict";(function(Buffer){Object.defineProperty(exports,"__esModule",{value:true});exports.createSplitStream=createSplitStream;var _stream=__webpack_require__(284);function createSplitStream(splitChunk){var unsplitBuffer=Buffer.alloc(0);return new _stream.Transform({writableObjectMode:false,readableObjectMode:true,transform:function transform(chunk,enc,callback){try{var i=void 0;var toSplit=Buffer.concat([unsplitBuffer,chunk]);while(-1!==(i=toSplit.indexOf(splitChunk))){var slice=toSplit.slice(0,i);toSplit=toSplit.slice(i+splitChunk.length);this.push(slice.toString("utf8"))}unsplitBuffer=toSplit;callback(null)}catch(err){callback(err)}},flush:function flush(callback){try{this.push(unsplitBuffer.toString("utf8"));callback(null)}catch(err){callback(err)}}})}}).call(exports,__webpack_require__(243).Buffer)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createListStream=createListStream;var _stream=__webpack_require__(284);function createListStream(){var items=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];var queue=[].concat(items);return new _stream.Readable({objectMode:true,read:function read(size){var _this=this;queue.splice(0,size).forEach(function(item){_this.push(item)});queue.length||this.push(null)}})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createJsonParseStream=createJsonParseStream;exports.createJsonStringifyStream=createJsonStringifyStream;var _stream=__webpack_require__(284);function createJsonParseStream(){return new _stream.Transform({writableObjectMode:true,readableObjectMode:true,transform:function transform(json,enc,callback){var parsed=void 0;var error=void 0;try{parsed=JSON.parse(json)}catch(_error){error=_error}callback(error,parsed)}})}function createJsonStringifyStream(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref$pretty=_ref.pretty,pretty=void 0!==_ref$pretty&&_ref$pretty;return new _stream.Transform({writableObjectMode:true,readableObjectMode:true,transform:function transform(json,enc,callback){try{callback(null,JSON.stringify(json,null,pretty?2:0))}catch(err){callback(err)}}})}},function(module,exports,__webpack_require__){"use strict";var createPromiseFromStreams=(_ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(streams){var last,anyStreamFailure,lastFinishedWriting,lastFinishedReading;return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:last=streams[streams.length-1];anyStreamFailure=new Promise(function(resolve,reject){streams.forEach(function(stream,i){i>0&&streams[i-1].pipe(stream);stream.on("error",reject);return stream})});lastFinishedWriting=new Promise(function(resolve){if("function"!==typeof last.write){resolve();return}last.on("finish",resolve)});lastFinishedReading=new Promise(function(resolve){if("function"!==typeof last.read){resolve();return}var finalChunk=void 0;last.on("data",function(chunk){finalChunk=chunk});last.on("end",function(){resolve(finalChunk)})});_context.next=6;return Promise.race([anyStreamFailure,Promise.all([lastFinishedWriting,lastFinishedReading])]);case 6:_context.next=8;return lastFinishedReading;case 8:return _context.abrupt("return",_context.sent);case 9:case"end":return _context.stop()}},_callee,this)})),function createPromiseFromStreams(_x){return _ref.apply(this,arguments)});var _ref;function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}Object.defineProperty(exports,"__esModule",{value:true});exports.createPromiseFromStreams=createPromiseFromStreams},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createConcatStream=createConcatStream;var _reduce_stream=__webpack_require__(1031);function createConcatStream(initial){return(0,_reduce_stream.createReduceStream)(function(acc,chunk){return acc.concat(chunk)},initial)}},function(module,exports,__webpack_require__){"use strict";function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}Object.defineProperty(exports,"__esModule",{value:true});exports.createMapStream=createMapStream;var _stream=__webpack_require__(284);function createMapStream(fn){var i=0;return new _stream.Transform({objectMode:true,transform:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(value,enc,done){return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.t0=this;_context.next=4;return fn(value,i++);case 4:_context.t1=_context.sent;_context.t0.push.call(_context.t0,_context.t1);done();_context.next=12;break;case 9:_context.prev=9;_context.t2=_context["catch"](0);done(_context.t2);case 12:case"end":return _context.stop()}},_callee,this,[[0,9]])}));function transform(_x,_x2,_x3){return _ref.apply(this,arguments)}return transform}()})}},function(module,exports,__webpack_require__){"use strict";(function(Buffer){function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}Object.defineProperty(exports,"__esModule",{value:true});exports.createReplaceStream=createReplaceStream;var _stream=__webpack_require__(284);function createReplaceStream(toReplace,replacement){if("string"!==typeof toReplace)throw new TypeError("toReplace must be a string");var buffer=Buffer.alloc(0);return new _stream.Transform({objectMode:false,transform:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(value,enc,done){var index;return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;buffer=Buffer.concat([buffer,value],buffer.length+value.length);case 2:false;index=buffer.indexOf(toReplace);if(!(-1===index)){_context.next=6;break}return _context.abrupt("break",11);case 6:this.push(buffer.slice(0,index));this.push(replacement);buffer=buffer.slice(index+toReplace.length);_context.next=2;break;case 11:if(buffer.length>toReplace.length){this.push(buffer.slice(0,buffer.length-toReplace.length));buffer=buffer.slice(-toReplace.length)}done();_context.next=18;break;case 15:_context.prev=15;_context.t0=_context["catch"](0);done(_context.t0);case 18:case"end":return _context.stop()}},_callee,this,[[0,15]])}));function transform(_x,_x2,_x3){return _ref.apply(this,arguments)}return transform}(),flush:function flush(callback){buffer.length&&this.push(buffer);buffer=null;callback()}})}}).call(exports,__webpack_require__(243).Buffer)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IS_KIBANA_DISTRIBUTABLE=void 0;var _package_json=__webpack_require__(710);exports.IS_KIBANA_DISTRIBUTABLE=_package_json.pkg.build&&true===_package_json.pkg.build.distributable},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _comma_separated_list=__webpack_require__(1839);Object.defineProperty(exports,"parseCommaSeparatedList",{enumerable:true,get:function get(){return _comma_separated_list.parseCommaSeparatedList}});var _prose=__webpack_require__(1840);Object.defineProperty(exports,"formatListAsProse",{enumerable:true,get:function get(){return _prose.formatListAsProse}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.parseCommaSeparatedList=parseCommaSeparatedList;function parseCommaSeparatedList(input){if(Array.isArray(input))return input;return String(input||"").split(",").map(function(word){return word.trim()}).filter(Boolean)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.formatListAsProse=formatListAsProse;function formatListAsProse(list){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var _options$inclusive=options.inclusive,inclusive=void 0===_options$inclusive||_options$inclusive;if(!Array.isArray(list))throw new TypeError("formatListAsProse() requires an array");var count=list.length;var conjunction=inclusive?"and":"or";if(count<=2)return list.join(" "+conjunction+" ");return list.slice(0,-1).concat(conjunction+" "+list[count-1]).join(", ")}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.applyDiff=applyDiff;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _angular=__webpack_require__(16);var _angular2=_interopRequireDefault(_angular);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function applyDiff(target,source){var diff={};var filterPrivateAndMethods=function filterPrivateAndMethods(obj){return function(key){if(_lodash2.default.isFunction(obj[key]))return false;if("$"===key.charAt(0))return false;return"_"!==key.charAt(0)}};var targetKeys=_lodash2.default.keys(target).filter(filterPrivateAndMethods(target));var sourceKeys=_lodash2.default.keys(source).filter(filterPrivateAndMethods(source));diff.removed=_lodash2.default.difference(targetKeys,sourceKeys);diff.added=_lodash2.default.difference(sourceKeys,targetKeys);diff.changed=_lodash2.default.filter(sourceKeys,function(key){return!_angular2.default.equals(target[key],source[key])});diff.keys=_lodash2.default.union(diff.changed,diff.removed,diff.added);_lodash2.default.each(diff.removed,function(key){delete target[key]});_lodash2.default.assign(target,_lodash2.default.pick(source,diff.changed));_lodash2.default.assign(target,_lodash2.default.pick(source,diff.added));return diff}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.notify=void 0;var _modules=__webpack_require__(2);var _fatal_error=__webpack_require__(715);var _notifier=__webpack_require__(1034);var _metadata=__webpack_require__(91);var _toaster=__webpack_require__(2728);var _toaster2=_interopRequireDefault(_toaster);__webpack_require__(2729);__webpack_require__(1233);__webpack_require__(796);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana/notify");_module.directive("kbnNotifications",function(){return{restrict:"E",scope:{list:"=list"},replace:true,template:_toaster2.default}});var notify=exports.notify=new _notifier.Notifier;_module.factory("createNotifier",function(){return function(opts){return new _notifier.Notifier(opts)}});_module.factory("Notifier",function(){return _notifier.Notifier});_module.run(function(config,$interval,$compile){_notifier.Notifier.applyConfig({setInterval:$interval,clearInterval:$interval.cancel});applyConfig(config);_notifier.Notifier.$compile=$compile});if(!!_metadata.metadata.kbnIndex){__webpack_require__(474);_module.run(function(config){config.watchAll(function(){return applyConfig(config)})})}function applyConfig(config){_notifier.Notifier.applyConfig({bannerLifetime:config.get("notifications:lifetime:banner"),errorLifetime:config.get("notifications:lifetime:error"),warningLifetime:config.get("notifications:lifetime:warning"),infoLifetime:config.get("notifications:lifetime:info")});var banner=config.get("notifications:banner");"string"===typeof banner&&banner.trim()&&notify.banner(banner,"notifications:banner")}window.onerror=function(err,url,line){(0,_fatal_error.fatalError)(new Error(err+" ("+url+":"+line+")"));return true};window.addEventListener&&window.addEventListener("unhandledrejection",function(e){console.log("Detected an unhandled Promise rejection.\n"+e.reason)})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.formatMsg=formatMsg;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _format_es_msg=__webpack_require__(1033);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var has=_lodash2.default.has;function formatMsg(err,source){var message="";source&&(message+=source+": ");var esMsg=(0,_format_es_msg.formatESMsg)(err);"string"===typeof err?message+=err:esMsg?message+=esMsg:err instanceof Error?message+=formatMsg.describeError(err):has(err,"status")&&has(err,"data")&&(-1===err.status?message+="An HTTP request has failed to connect. Please check if the Kibana server is running and that your browser has a working connection, or contact your system administrator.":message+="Error "+err.status+" "+err.statusText+": "+err.data.message);return message}formatMsg.describeError=function(err){if(!err)return;if(err.body&&err.body.message)return err.body.message;if(err.message)return err.message;return""+err}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.formatStack=formatStack;function formatStack(err){if(err.stack&&!~err.stack.indexOf(err.message))return"Error: "+err.message+"\n"+err.stack;return err.stack}},function(module,exports){module.exports='<div\n  id="fatal-splash-screen-header"\n  class="kuiViewContent kuiViewContent--constrainedWidth kuiViewContentItem"\n>\n  <div style="text-align: center">\n    <h1 class="kuiTitle kuiVerticalRhythm">\n      Oops!\n    </h1>\n\n    <p class="kuiText kuiVerticalRhythm">\n      Looks like something went wrong. Refreshing may do the trick.\n    </p>\n\n    <div\n      class="kuiButtonGroup kuiVerticalRhythm"\n      style="text-align: center; display: inline-block;"\n    >\n      <button\n        class="kuiButton kuiButton--primary"\n        onclick="window.history.back();"\n      >\n        Go back\n      </button>\n\n      <button\n        class="kuiButton kuiButton--hollow"\n        onclick="localStorage.clear(); sessionStorage.clear(); window.location.hash = \'\'; window.location.reload();"\n      >\n        Clear your session\n      </button>\n    </div>\n  </div>\n  <div id="fatal-splash-screen">\n  </div>\n</div>\n'},function(module,exports){module.exports='\x3c!--\n!!!!\n  Since fatal error could prevent angular from starting\n  this template is just a simple lodash template\n!!!!\n--\x3e\n<h1><i class="fa fa-warning-triangle"></i></h1>\n<div class="panel panel-danger">\n  <div class="panel-heading">\n    <h1 class="panel-title">\n      <i class="fa fa-warning"></i> Fatal Error\n    </h1>\n  </div>\n  <div class="panel-body fatal-body"><%- msg %></div>\n  <% if (info) { %>\n    <div class="panel-footer"><pre><%- info %></pre></div>\n  <% } %>\n  <% if (stack) { %>\n    <div class="panel-footer"><pre><%- stack %></pre></div>\n  <% } %>\n</div>'},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GlobalBannerList=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);__webpack_require__(1903);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var GlobalBannerList=exports.GlobalBannerList=function(_Component){_inherits(GlobalBannerList,_Component);function GlobalBannerList(props){_classCallCheck(this,GlobalBannerList);var _this=_possibleConstructorReturn(this,(GlobalBannerList.__proto__||Object.getPrototypeOf(GlobalBannerList)).call(this,props));_this.props.subscribe&&_this.props.subscribe(function(){return _this.forceUpdate()});return _this}_createClass(GlobalBannerList,[{key:"render",value:function render(){if(0===this.props.banners.length)return null;var flexBanners=this.props.banners.map(function(banner){var id=banner.id,component=banner.component,priority=banner.priority,rest=_objectWithoutProperties(banner,["id","component","priority"]);return _react2.default.createElement("div",_extends({key:id,"data-test-priority":priority,className:"globalBanner__item"},rest),component)});return _react2.default.createElement("div",{className:"globalBanner__list"},flexBanners)}}]);return GlobalBannerList}(_react.Component);GlobalBannerList.propTypes={banners:_propTypes2.default.array,subscribe:_propTypes2.default.func};GlobalBannerList.defaultProps={banners:[]}},,function(module,exports){},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var Banners=exports.Banners=function Banners(){var _this=this;_classCallCheck(this,Banners);this._changed=function(){_this.onChangeCallback&&_this.onChangeCallback()};this._remove=function(id){var index=_this.list.findIndex(function(details){return details.id===id});if(-1!==index){_this.list.splice(index,1);return true}return false};this.onChange=function(callback){_this.onChangeCallback=callback};this.add=function(_ref){var component=_ref.component,_ref$priority=_ref.priority,priority=void 0===_ref$priority?0:_ref$priority;var id=""+ ++_this.uniqueId;var bannerDetails={id:id,component:component,priority:priority};var index=_this.list.findIndex(function(details){return priority>details.priority});-1!==index?_this.list.splice(index,0,bannerDetails):_this.list.push(bannerDetails);_this._changed();return id};this.remove=function(id){var removed=_this._remove(id);removed&&_this._changed();return removed};this.set=function(_ref2){var component=_ref2.component,id=_ref2.id,_ref2$priority=_ref2.priority,priority=void 0===_ref2$priority?0:_ref2$priority;_this._remove(id);return _this.add({component:component,priority:priority})};this.list=[];this.uniqueId=0;this.onChangeCallback=null};exports.banners=new Banners},function(module,exports,__webpack_require__){"use strict";var _lodash=__webpack_require__(1);var _modules=__webpack_require__(2);var _apply_scope_bindings=__webpack_require__(1906);_modules.uiModules.get("kibana").directive("renderDirective",function(Private){var applyScopeBindings=Private(_apply_scope_bindings.ApplyScopeBindingsProvider);return{restrict:"E",scope:{definition:"="},template:function template($el){return $el.html()},controller:function controller($scope,$element,$attrs,$transclude,$injector){if(!$scope.definition)throw new Error("render-directive must have a definition attribute");var _$scope$definition=$scope.definition,controller=_$scope$definition.controller,controllerAs=_$scope$definition.controllerAs,scope=_$scope$definition.scope;applyScopeBindings(scope,$scope,$attrs);if(controller){controllerAs&&($scope[controllerAs]=this);var locals={$scope:$scope,$element:$element,$attrs:$attrs,$transclude:$transclude};var controllerInstance=$injector.invoke(controller,this,locals)||this;controllerAs&&($scope[controllerAs]=controllerInstance)}},link:{pre:function pre($scope,$el,$attrs,controller){var link=$scope.definition.link;var preLink=(0,_lodash.isPlainObject)(link)?link.pre:null;preLink&&preLink($scope,$el,$attrs,controller)},post:function post($scope,$el,$attrs,controller){var link=$scope.definition.link;var postLink=(0,_lodash.isPlainObject)(link)?link.post:link;postLink&&postLink($scope,$el,$attrs,controller)}}}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();exports.ApplyScopeBindingsProvider=ApplyScopeBindingsProvider;var _lodash=__webpack_require__(1);__webpack_require__(1045);var bindingRE=/^(=|=\?|&|@)([a-zA-Z0-9_$]+)?$/;function ApplyScopeBindingsProvider($parse){return function(bindings,$scope,$attrs){(0,_lodash.forOwn)(bindings,function(binding,local){if(!bindingRE.test(binding))throw new Error('Invalid scope binding "'+binding+'". Expected it to match '+bindingRE);var _binding$match=binding.match(bindingRE),_binding$match2=_slicedToArray(_binding$match,3),type=_binding$match2[1],_binding$match2$=_binding$match2[2],attribute=void 0===_binding$match2$?local:_binding$match2$;var attr=$attrs[attribute];switch(type){case"=":$scope.$bind(local,attr);break;case"=?":throw new Error("<render-directive> does not currently support optional two-way bindings.");case"&":if(attr){var getter=$parse(attr);$scope[local]=function(){return getter($scope.$parent)}}else $scope[local]=_lodash.noop;break;case"@":$scope[local]=attr;$attrs.$observe(attribute,function(v){return $scope[local]=v})}})}}},function(module,exports,__webpack_require__){"use strict";var _angular=__webpack_require__(16);var _angular2=_interopRequireDefault(_angular);var _modules=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana").config(function($provide){function strictEquality(a,b){return a===b||a!==a&&b!==b}function errorNotAssignable(source,target){throw Error('Unable to accept change to bound $scope property "'+source+'" because source expression "'+target+'" is not assignable!')}$provide.decorator("$rootScope",function($delegate,$parse){$delegate.constructor.prototype.$bind=function(to,from,$sourceScope){var $source=$sourceScope||this.$parent;var $target=this;var $to=$parse(to);$to.assign||errorNotAssignable(to,from);var $from=$parse(from);var getTarget=function getTarget(){return $to($target)};var setTarget=function setTarget(v){return $to.assign($target,v)};var getSource=function getSource(){return $from($source)};var setSource=function setSource(v){return $from.assignOrFail($source,v)};var lastSourceVal=getSource();$from.assignOrFail=$from.assign||function(){$to($target,lastSourceVal=$from($source));errorNotAssignable(from,to)};var strict=!$from.literal;var compare=strict?strictEquality:_angular2.default.equals;setTarget(lastSourceVal);$target.$watch(function(){var sourceVal=getSource();var targetVal=getTarget();var outOfSync=!compare(sourceVal,targetVal);var sourceChanged=outOfSync&&!compare(sourceVal,lastSourceVal);sourceChanged?setTarget(sourceVal):outOfSync&&setSource(targetVal);return lastSourceVal=sourceVal},null,!strict)};return $delegate})})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports){module.exports='<div class="toaster-container">\n  <ul class="toaster">\n    <li ng-repeat="notif in list" kbn-toast notif="notif">\n      <div ng-class="notif.getAlertClass()">\n\n        <span ng-show="notif.count > 1" class="badge">{{ notif.count }}</span>\n\n        <i ng-class="notif.getIconClass()" tooltip="{{notif.title}}"></i>\n\n        <kbn-truncated\n          ng-if="notif.content"\n          source="{{notif.content | markdown}}"\n          is-html="true"\n          length="250"\n          ng-class="notif.getToastMessageClass()"\n        ></kbn-truncated>\n\n        <render-directive\n          ng-if="notif.directive"\n          definition="notif.directive"\n          notif="notif"\n          ng-class="notif.getToastMessageClass()"\n        ></render-directive>\n\n        <div class="kuiButtonGroup" ng-class="notif.getButtonGroupClass()">\n          <button\n            type="button"\n            ng-if="notif.stack && !notif.showStack"\n            class="kuiButton"\n            ng-class="notif.getButtonClass()"\n            ng-click="notif.cancelTimer(); notif.showStack = true"\n          >\n            More Info\n          </button>\n          <button\n            type="button"\n            ng-if="notif.stack && notif.showStack"\n            class="kuiButton"\n            ng-class="notif.getButtonClass()"\n            ng-click="notif.showStack = false"\n          >\n            Less Info\n          </button>\n          <button\n            data-test-subj="notifierDismissButton"\n            type="button"\n            ng-if="notif.accept"\n            class="kuiButton"\n            ng-class="notif.getButtonClass()"\n            ng-click="notif.accept()"\n          >\n            OK\n          </button>\n          <button\n            type="button"\n            ng-if="notif.address"\n            class="kuiButton"\n            ng-class="notif.getButtonClass()"\n            ng-click="notif.address()"\n          >\n            Fix it\n          </button>\n          <button\n            type="button"\n            class="kuiButton"\n            ng-repeat="action in notif.customActions"\n            ng-class="action.getButtonClass()"\n            ng-click="action.callback()"\n            ng-bind="action.key"\n            data-test-subj="{{action.dataTestSubj}}"\n          ></button>\n        </div>\n\n        \x3c!-- Countdown badge --\x3e\n        <button\n          type="button"\n          ng-if="notif.isTimed()"\n          class="toaster-countdown"\n          ng-click="notif.cancelTimer()"\n        >\n          <span\n            class="badge"\n            hover-text="stop"\n          >\n            {{notif.timeRemaining}}s\n          </span>\n        </button>\n      </div>\n\n      <div ng-if="notif.stack && notif.showStack" ng-class="notif.getAlertClassStack()">\n        <pre ng-repeat="stack in notif.stacks" ng-bind="stack"></pre>\n      </div>\n\n    </li>\n  </ul>\n</div>\n'},function(module,exports){},,,,,,,,,,,,function(module,exports){module.exports='<span ng-if="!isHtml">{{content}}</span>\n<span ng-if="isHtml" ng-bind-html="content"></span>\n<span ng-if="truncated">\n  <a ng-click="toggle()">{{action}}</a>\n</span>\n'},function(module,exports,__webpack_require__){"use strict";var _angular=__webpack_require__(16);var _angular2=_interopRequireDefault(_angular);var _chrome=__webpack_require__(8);var _chrome2=_interopRequireDefault(_chrome);var _lodash=__webpack_require__(1);var _modules=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana/config");_module.service("config",function($rootScope,Promise){var _this=this;var uiSettings=_chrome2.default.getUiSettingsClient();this.getAll=function(){return uiSettings.getAll.apply(uiSettings,arguments)};this.get=function(){return uiSettings.get.apply(uiSettings,arguments)};this.isDeclared=function(){return uiSettings.isDeclared.apply(uiSettings,arguments)};this.isDefault=function(){return uiSettings.isDefault.apply(uiSettings,arguments)};this.isCustom=function(){return uiSettings.isCustom.apply(uiSettings,arguments)};this.remove=function(key){return Promise.resolve(uiSettings.remove(key))};this.set=function(key,value){return Promise.resolve(uiSettings.set(key,(0,_lodash.isPlainObject)(value)?_angular2.default.toJson(value):value))};var subscription=uiSettings.subscribe(function(_ref){var key=_ref.key,newValue=_ref.newValue,oldValue=_ref.oldValue;var emit=function emit(){$rootScope.$broadcast("change:config",newValue,oldValue,key,_this);$rootScope.$broadcast("change:config."+key,newValue,oldValue,key,_this)};$rootScope.$$phase?emit():$rootScope.$apply(emit)});$rootScope.$on("$destroy",function(){return subscription.unsubscribe()});this.watchAll=function(handler){var scope=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$rootScope;handler(null,null,null,this);return scope.$on("change:config",function(event){for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];handler.apply(void 0,args)})};this.watch=function(key,handler){var scope=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$rootScope;if(!this.isDeclared(key))throw new Error('Unexpected `config.watch("'+key+'", fn)` call on unrecognized configuration setting "'+key+'".\nSetting an initial value via `config.set("'+key+'", value)` before binding\nany custom setting configuration watchers for "'+key+'" may fix this issue.');handler(this.get(key),null,key,uiSettings);return scope.$on("change:config."+key,function(event){for(var _len2=arguments.length,args=Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++)args[_key2-1]=arguments[_key2];handler.apply(void 0,args)})};this.bindToScope=function(scope,key){var property=arguments.length>2&&void 0!==arguments[2]?arguments[2]:key;var onUpdate=function onUpdate(newVal){scope[property]=newVal};return this.watch(key,onUpdate,scope)}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _global_toast_list=__webpack_require__(2744);Object.defineProperty(exports,"GlobalToastList",{enumerable:true,get:function get(){return _global_toast_list.GlobalToastList}});var _toast_notifications=__webpack_require__(2745);Object.defineProperty(exports,"toastNotifications",{enumerable:true,get:function get(){return _toast_notifications.toastNotifications}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GlobalToastList=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var GlobalToastList=exports.GlobalToastList=function(_Component){_inherits(GlobalToastList,_Component);function GlobalToastList(props){_classCallCheck(this,GlobalToastList);var _this=_possibleConstructorReturn(this,(GlobalToastList.__proto__||Object.getPrototypeOf(GlobalToastList)).call(this,props));_this.props.subscribe&&_this.props.subscribe(function(){return _this.forceUpdate()});return _this}_createClass(GlobalToastList,[{key:"render",value:function render(){var _props=this.props,toasts=_props.toasts,dismissToast=_props.dismissToast,toastLifeTimeMs=_props.toastLifeTimeMs;return _react2.default.createElement(_eui.EuiPortal,null,_react2.default.createElement(_eui.EuiGlobalToastList,{toasts:toasts,dismissToast:dismissToast,toastLifeTimeMs:toastLifeTimeMs}))}}]);return GlobalToastList}(_react.Component);GlobalToastList.propTypes={subscribe:_propTypes2.default.func,toasts:_propTypes2.default.array,dismissToast:_propTypes2.default.func.isRequired,toastLifeTimeMs:_propTypes2.default.number.isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var normalizeToast=function normalizeToast(toastOrTitle){if("string"===typeof toastOrTitle)return{title:toastOrTitle};return toastOrTitle};var ToastNotifications=exports.ToastNotifications=function ToastNotifications(){var _this=this;_classCallCheck(this,ToastNotifications);this._changed=function(){_this.onChangeCallback&&_this.onChangeCallback()};this.onChange=function(callback){_this.onChangeCallback=callback};this.add=function(toastOrTitle){var toast=_extends({id:_this.idCounter++},normalizeToast(toastOrTitle));_this.list.push(toast);_this._changed();return toast};this.remove=function(toast){var index=_this.list.indexOf(toast);if(-1!==index){_this.list.splice(index,1);_this._changed()}};this.addSuccess=function(toastOrTitle){return _this.add(_extends({color:"success",iconType:"check"},normalizeToast(toastOrTitle)))};this.addWarning=function(toastOrTitle){return _this.add(_extends({color:"warning",iconType:"help"},normalizeToast(toastOrTitle)))};this.addDanger=function(toastOrTitle){return _this.add(_extends({color:"danger",iconType:"alert"},normalizeToast(toastOrTitle)))};this.list=[];this.idCounter=0;this.onChangeCallback=null};exports.toastNotifications=new ToastNotifications},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BaseObject=BaseObject;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _risonNode=__webpack_require__(310);var _risonNode2=_interopRequireDefault(_risonNode);var _angular=__webpack_require__(16);var _angular2=_interopRequireDefault(_angular);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function BaseObject(attributes){_lodash2.default.assign(this,attributes)}BaseObject.prototype.toObject=function(){return _lodash2.default.omit(this,function(value,key){return"$"===key.charAt(0)||"_"===key.charAt(0)||_lodash2.default.isFunction(value)})};BaseObject.prototype.toRISON=function(){return _risonNode2.default.encode(JSON.parse(_angular2.default.toJson(this)))};BaseObject.prototype.toJSON=function(){return this.toObject()}},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _modules=__webpack_require__(2);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}_modules.uiModules.get("kibana/state_management").provider("stateManagementConfig",function(){function StateManagementConfigProvider(){_classCallCheck(this,StateManagementConfigProvider);this._enabled=true}_createClass(StateManagementConfigProvider,[{key:"$get",value:function $get(){return{enabled:this._enabled}}},{key:"disable",value:function disable(){this._enabled=false}},{key:"enable",value:function enable(){this._enabled=true}}]);return StateManagementConfigProvider}())},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _hashed_item_store_singleton=__webpack_require__(2749);Object.defineProperty(exports,"HashedItemStoreSingleton",{enumerable:true,get:function get(){return _hashed_item_store_singleton.HashedItemStoreSingleton}});var _state_hash=__webpack_require__(2751);Object.defineProperty(exports,"createStateHash",{enumerable:true,get:function get(){return _state_hash.createStateHash}});Object.defineProperty(exports,"isStateHash",{enumerable:true,get:function get(){return _state_hash.isStateHash}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.HashedItemStoreSingleton=void 0;var _hashed_item_store=__webpack_require__(2750);exports.HashedItemStoreSingleton=new _hashed_item_store.HashedItemStore(window.sessionStorage)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.HashedItemStore=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(1);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var HashedItemStore=exports.HashedItemStore=function(){function HashedItemStore(sessionStorage){_classCallCheck(this,HashedItemStore);this._sessionStorage=sessionStorage;this._indexedItems=[];var persistedItemIndex=this._sessionStorage.getItem(HashedItemStore.PERSISTED_INDEX_KEY);persistedItemIndex&&(this._indexedItems=(0,_lodash.sortBy)(JSON.parse(persistedItemIndex)||[],"touched"))}_createClass(HashedItemStore,[{key:"setItem",value:function setItem(hash,item){var isItemPersisted=this._persistItem(hash,item);isItemPersisted&&this._touchHash(hash);return isItemPersisted}},{key:"getItem",value:function getItem(hash){var item=this._sessionStorage.getItem(hash);null!==item&&this._touchHash(hash);return item}},{key:"_getIndexedItem",value:function _getIndexedItem(hash){return this._indexedItems.find(function(indexedItem){return indexedItem.hash===hash})}},{key:"_persistItem",value:function _persistItem(hash,item){try{this._sessionStorage.setItem(hash,item);return true}catch(e){if(0===this._indexedItems.length)return false;this._removeOldestItem();return this._persistItem(hash,item)}}},{key:"_removeOldestItem",value:function _removeOldestItem(){var oldestIndexedItem=this._indexedItems.shift();this._sessionStorage.removeItem(oldestIndexedItem.hash)}},{key:"_touchHash",value:function _touchHash(hash){var indexedItem=this._getIndexedItem(hash)||{hash:hash};indexedItem.touched=Date.now();(0,_lodash.pull)(this._indexedItems,indexedItem);this._indexedItems.push(indexedItem);this._sessionStorage.setItem(HashedItemStore.PERSISTED_INDEX_KEY,JSON.stringify(this._indexedItems))}}]);return HashedItemStore}();HashedItemStore.PERSISTED_INDEX_KEY="kbn.hashedItemsIndex.v1"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createStateHash=createStateHash;exports.isStateHash=isStateHash;var _crypto=__webpack_require__(2752);var HASH_PREFIX="h@";function createStateHash(json,existingJsonProvider){if("string"!==typeof json)throw new Error("createHash only accepts strings (JSON).");var hash=(new _crypto.Sha256).update(json,"utf8").digest("hex");var shortenedHash=void 0;for(var i=7;i<hash.length;i++){shortenedHash=hash.slice(0,i);var existingJson=existingJsonProvider(shortenedHash);if(null===existingJson||existingJson===json)break}return""+HASH_PREFIX+shortenedHash}function isStateHash(str){return 0===String(str).indexOf(HASH_PREFIX)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _sha=__webpack_require__(2753);Object.defineProperty(exports,"Sha256",{enumerable:true,get:function get(){return _sha.Sha256}})},function(module,exports,__webpack_require__){"use strict";(function(Buffer){Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];var W=new Array(64);exports.Sha256=function(){function Sha256(){_classCallCheck(this,Sha256);this.init();this._w=W;var blockSize=64;var finalSize=56;this._block=new Buffer(blockSize);this._finalSize=finalSize;this._blockSize=blockSize;this._len=0;this._s=0}_createClass(Sha256,[{key:"init",value:function init(){this._a=1779033703;this._b=3144134277;this._c=1013904242;this._d=2773480762;this._e=1359893119;this._f=2600822924;this._g=528734635;this._h=1541459225;return this}},{key:"update",value:function update(data,enc){if("string"===typeof data){enc=enc||"utf8";data=new Buffer(data,enc)}var l=this._len+=data.length;var s=this._s||0;var f=0;var buffer=this._block;while(s<l){var t=Math.min(data.length,f+this._blockSize-s%this._blockSize);var _ch=t-f;for(var i=0;i<_ch;i++)buffer[s%this._blockSize+i]=data[i+f];s+=_ch;f+=_ch;s%this._blockSize===0&&this._update(buffer)}this._s=s;return this}},{key:"digest",value:function digest(enc){var l=8*this._len;this._block[this._len%this._blockSize]=128;this._block.fill(0,this._len%this._blockSize+1);if(l%(8*this._blockSize)>=8*this._finalSize){this._update(this._block);this._block.fill(0)}this._block.writeInt32BE(l,this._blockSize-4);var hash=this._update(this._block)||this._hash();return enc?hash.toString(enc):hash}},{key:"_update",value:function _update(M){var W=this._w;var a=0|this._a;var b=0|this._b;var c=0|this._c;var d=0|this._d;var e=0|this._e;var f=0|this._f;var g=0|this._g;var h=0|this._h;var i=void 0;for(i=0;i<16;++i)W[i]=M.readInt32BE(4*i);for(;i<64;++i)W[i]=gamma1(W[i-2])+W[i-7]+gamma0(W[i-15])+W[i-16]|0;for(var j=0;j<64;++j){var T1=h+sigma1(e)+ch(e,f,g)+K[j]+W[j]|0;var T2=sigma0(a)+maj(a,b,c)|0;h=g;g=f;f=e;e=d+T1|0;d=c;c=b;b=a;a=T1+T2|0}this._a=a+this._a|0;this._b=b+this._b|0;this._c=c+this._c|0;this._d=d+this._d|0;this._e=e+this._e|0;this._f=f+this._f|0;this._g=g+this._g|0;this._h=h+this._h|0}},{key:"_hash",value:function _hash(){var H=new Buffer(32);H.writeInt32BE(this._a,0);H.writeInt32BE(this._b,4);H.writeInt32BE(this._c,8);H.writeInt32BE(this._d,12);H.writeInt32BE(this._e,16);H.writeInt32BE(this._f,20);H.writeInt32BE(this._g,24);H.writeInt32BE(this._h,28);return H}}]);return Sha256}();function ch(x,y,z){return z^x&(y^z)}function maj(x,y,z){return x&y|z&(x|y)}function sigma0(x){return(x>>>2|x<<30)^(x>>>13|x<<19)^(x>>>22|x<<10)}function sigma1(x){return(x>>>6|x<<26)^(x>>>11|x<<21)^(x>>>25|x<<7)}function gamma0(x){return(x>>>7|x<<25)^(x>>>18|x<<14)^x>>>3}function gamma1(x){return(x>>>17|x<<15)^(x>>>19|x<<13)^x>>>10}}).call(exports,__webpack_require__(243).Buffer)},function(module,exports,__webpack_require__){"use strict";var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _modules=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var nextId=_lodash2.default.partial(_lodash2.default.uniqueId,"privateProvider#");function name(fn){return fn.name||fn.toString().split("\n").shift()}_modules.uiModules.get("kibana/private").provider("Private",function(){var provider=this;var cache={};var swaps={};function identify(fn){if("function"!==typeof fn)throw new TypeError('Expected private module "'+fn+'" to be a function');return fn.$$id?fn.$$id:fn.$$id=nextId()}provider.stub=function(fn,instance){cache[identify(fn)]=instance;return instance};provider.swap=function(fn,prov){var id=identify(fn);swaps[id]=prov};provider.$get=["$injector",function PrivateFactory($injector){var privPath=[];var pathToString=function pathToString(){return privPath.map(name).join(" -> ")};function instantiate(prov,locals){if(~privPath.indexOf(prov))throw new Error('Circular reference to "'+name(prov)+'" found while resolving private deps: '+pathToString());privPath.push(prov);var context={};var instance=$injector.invoke(prov,context,locals);_lodash2.default.isObject(instance)||(instance=context);privPath.pop();return instance}function get(id,prov,$delegateId,$delegateProv){if(cache[id])return cache[id];var instance=void 0;instance=null!=$delegateId&&null!=$delegateProv?instantiate(prov,{$decorate:_lodash2.default.partial(get,$delegateId,$delegateProv)}):instantiate(prov);return cache[id]=instance}function Private(prov){var id=identify(prov);var $delegateId=void 0;var $delegateProv=void 0;if(swaps[id]){$delegateId=id;$delegateProv=prov;prov=swaps[$delegateId];id=identify(prov)}return get(id,prov,$delegateId,$delegateProv)}Private.stub=provider.stub;Private.swap=provider.swap;return Private}]})},function(module,exports,__webpack_require__){"use strict";var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _modules=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");_module.service("Promise",function($q,$timeout){function Promise(fn){if("undefined"===typeof this)throw new Error('Promise constructor must be called with "new"');var defer=$q.defer();try{fn(defer.resolve,defer.reject)}catch(e){defer.reject(e)}return defer.promise}Promise.all=Promise.props=$q.all;Promise.resolve=function(val){var defer=$q.defer();defer.resolve(val);return defer.promise};Promise.reject=function(reason){var defer=$q.defer();defer.reject(reason);return defer.promise};Promise.cast=$q.when;Promise.defer=$q.defer;Promise.delay=function(ms){return $timeout(_lodash2.default.noop,ms)};Promise.method=function(fn){return function(){var args=Array.prototype.slice.call(arguments);return Promise.try(fn,args,this)}};Promise.nodeify=function(promise,cb){promise.then(function(val){cb(void 0,val)},cb)};Promise.map=function(arr,fn){return Promise.all(arr.map(function(i,el,list){return Promise.try(fn,[i,el,list])}))};Promise.each=function(arr,fn){var queue=arr.slice(0);var i=0;return function next(){if(!queue.length)return arr;return Promise.try(fn,[arr.shift(),i++]).then(next)}()};Promise.is=function(obj){return obj&&"function"===typeof obj.then};Promise.halt=_lodash2.default.once(function(){var promise=new Promise(function(){});promise.then=_lodash2.default.constant(promise);promise.catch=_lodash2.default.constant(promise);return promise});Promise.try=function(fn,args,ctx){if("function"!==typeof fn)return Promise.reject(new TypeError("fn must be a function"));var value=void 0;if(Array.isArray(args))try{value=fn.apply(ctx,args)}catch(e){return Promise.reject(e)}else try{value=fn.call(ctx,args)}catch(e){return Promise.reject(e)}return Promise.resolve(value)};Promise.fromNode=function(takesCbFn){return new Promise(function(resolve,reject){takesCbFn(function(err){for(var _len=arguments.length,results=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)results[_key-1]=arguments[_key];err?reject(err):results.length>1?resolve(results):resolve(results[0])})})};Promise.race=function(iterable){return new Promise(function(resolve,reject){var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=void 0;try{for(var _step,_iterator=iterable[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var i=_step.value;Promise.resolve(i).then(resolve,reject)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}})};return Promise})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Storage=Storage;var _modules=__webpack_require__(2);var _angular=__webpack_require__(16);var _angular2=_interopRequireDefault(_angular);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function Storage(store){var self=this;self.store=store;self.get=function(key){try{return JSON.parse(self.store.getItem(key))}catch(e){return null}};self.set=function(key,value){try{return self.store.setItem(key,_angular2.default.toJson(value))}catch(e){return false}};self.remove=function(key){return self.store.removeItem(key)};self.clear=function(){return self.store.clear()}}var createService=function createService(type){return function($window){return new Storage($window[type])}};_modules.uiModules.get("kibana/storage").service("localStorage",createService("localStorage")).service("sessionStorage",createService("sessionStorage"))},function(module,exports,__webpack_require__){"use strict";var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _modules=__webpack_require__(2);var _function=__webpack_require__(548);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana").config(function($provide){$provide.decorator("$rootScope",function($delegate){$delegate.constructor.prototype.$watchMulti=function(expressions,fn){if(!Array.isArray(expressions))throw new TypeError("expected an array of expressions to watch");if(!_lodash2.default.isFunction(fn))throw new TypeError("expected a function that is triggered on each watch");var $scope=this;var vals=new Array(expressions.length);var prev=new Array(expressions.length);var fire=false;var init=0;var neededInits=expressions.length;var unwatchers=expressions.map(function(expr,i){expr=normalizeExpression($scope,expr);if(!expr)return;return expr.fn.call($scope,expr.get,function(newVal,oldVal){newVal===oldVal&&(init+=1);vals[i]=newVal;prev[i]=oldVal;fire=true},expr.deep)});var flip=false;unwatchers.push($scope.$watch(function(){if(init<neededInits)return init;if(fire){fire=false;flip=!flip}return flip},function(){if(init<neededInits)return false;fn(vals.slice(0),prev.slice(0));vals.forEach(function(v,i){prev[i]=v})}));return _lodash2.default.partial(_function.callEach,unwatchers)};function normalizeExpression($scope,expr){if(!expr)return;var norm={fn:$scope.$watch,deep:false};if(_lodash2.default.isFunction(expr))return _lodash2.default.assign(norm,{get:expr});if(_lodash2.default.isObject(expr))return _lodash2.default.assign(norm,expr);if(!_lodash2.default.isString(expr))return;if("[]"===expr.substr(0,2))return _lodash2.default.assign(norm,{fn:$scope.$watchCollection,get:expr.substr(2)});if("="===expr.charAt(0))return _lodash2.default.assign(norm,{deep:true,get:expr.substr(1)});return _lodash2.default.assign(norm,{get:expr})}return $delegate})})},function(module,exports,__webpack_require__){"use strict";__webpack_require__(2759)},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(2);_modules.uiModules.get("kibana").service("globalNavState",function(localStorage,$rootScope){return{isOpen:function isOpen(){var isOpen=localStorage.get("kibana.isGlobalNavOpen");if(null===isOpen)return true;return isOpen},setOpen:function setOpen(isOpen){localStorage.set("kibana.isGlobalNavOpen",isOpen);$rootScope.$broadcast("globalNavState:change");return isOpen}}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.initAngularApi=initAngularApi;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _url=__webpack_require__(66);var _modules=__webpack_require__(2);var _notify=__webpack_require__(9);var _error_url_overflow=__webpack_require__(2761);var _directives=__webpack_require__(2853);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var URL_LIMIT_WARN_WITHIN=1e3;function initAngularApi(chrome,internals){chrome.getFirstPathSegment=_lodash2.default.noop;chrome.setupAngular=function(){var kibana=_modules.uiModules.get("kibana");_lodash2.default.forOwn(chrome.getInjected(),function(val,name){kibana.value(name,val)});kibana.value("kbnVersion",internals.version).value("buildNum",internals.buildNum).value("buildSha",internals.buildSha).value("serverName",internals.serverName).value("sessionId",Date.now()).value("chrome",chrome).value("esUrl",function(){var a=document.createElement("a");a.href=chrome.addBasePath("/elasticsearch");return a.href}()).config(function($locationProvider){$locationProvider.html5Mode({enabled:false,requireBase:false,rewriteLinks:false})}).config(chrome.$setupXsrfRequestInterceptor).config(function($compileProvider,$locationProvider){internals.devMode||$compileProvider.debugInfoEnabled(false);$locationProvider.hashPrefix("")}).run(internals.capture$httpLoadingCount).run(function($location,$rootScope,Private,config){chrome.getFirstPathSegment=function(){return $location.path().split("/")[1]};var notify=new _notify.Notifier;var urlOverflow=Private(_error_url_overflow.UrlOverflowServiceProvider);var check=function check(){if(config.get("state:storeInSessionStorage"))return;if("/error/url-overflow"===$location.path())return;try{urlOverflow.check($location.absUrl())<=URL_LIMIT_WARN_WITHIN&&notify.directive({template:'\n                <p>\n                  The URL has gotten big and may cause Kibana\n                  to stop working. Please either enable the\n                  <code>state:storeInSessionStorage</code>\n                  option in the <a href="#/management/kibana/settings">advanced\n                  settings</a> or simplify the onscreen visuals.\n                </p>\n              '},{type:"error",actions:[{text:"close"}]})}catch(e){var _parseUrl=(0,_url.parse)(window.location.href),host=_parseUrl.host,path=_parseUrl.path,search=_parseUrl.search,protocol=_parseUrl.protocol;window.location.href=(0,_url.format)({host:host,path:path,search:search,protocol:protocol,hash:"#/error/url-overflow"})}};$rootScope.$on("$routeUpdate",check);$rootScope.$on("$routeChangeStart",check)});(0,_directives.directivesProvider)(chrome,internals);_modules.uiModules.link(kibana)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UrlOverflowServiceProvider=void 0;var _url_overflow_service=__webpack_require__(1240);Object.defineProperty(exports,"UrlOverflowServiceProvider",{enumerable:true,get:function get(){return _url_overflow_service.UrlOverflowServiceProvider}});__webpack_require__(2762)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _url_overflow_service=__webpack_require__(1240);Object.keys(_url_overflow_service).forEach(function(key){if("default"===key||"__esModule"===key)return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _url_overflow_service[key]}})});var _routes=__webpack_require__(12);var _routes2=_interopRequireDefault(_routes);var _url=__webpack_require__(138);__webpack_require__(2851);var _error_url_overflow=__webpack_require__(2852);var _error_url_overflow2=_interopRequireDefault(_error_url_overflow);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}_routes2.default.when("/error/url-overflow",{template:_error_url_overflow2.default,controllerAs:"controller",controller:function OverflowController(Private,config,$scope){_classCallCheck(this,OverflowController);var kbnUrl=Private(_url.KbnUrlProvider);var urlOverflow=Private(_url_overflow_service.UrlOverflowServiceProvider);if(!urlOverflow.get()){kbnUrl.redirectPath("/");return}this.url=urlOverflow.get();this.limit=urlOverflow.failLength();$scope.$on("$destroy",function(){return urlOverflow.clear()})}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.uiRoutes=void 0;var _route_manager=__webpack_require__(2764);var _route_manager2=_interopRequireDefault(_route_manager);__webpack_require__(2768);var _modules=__webpack_require__(2);var _route_setup_manager=__webpack_require__(1241);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var defaultRouteManager=new _route_manager2.default;exports.uiRoutes=Object.create(defaultRouteManager,{WAIT_FOR_URL_CHANGE_TOKEN:{value:_route_setup_manager.WAIT_FOR_URL_CHANGE_TOKEN},enable:{value:function value(){_modules.uiModules.get("kibana",["ngRoute"]).config(defaultRouteManager.config).run(defaultRouteManager.run)}}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=RouteManager;var _lodash=__webpack_require__(1);var _wrap_route_with_prep=__webpack_require__(2765);var _route_setup_manager=__webpack_require__(1241);var _breadcrumbs=__webpack_require__(2767);function RouteManager(){var _this=this;var self=this;var setup=new _route_setup_manager.RouteSetupManager;var when=[];var defaults=[];var otherwise=void 0;self.config=function($routeProvider){when.forEach(function(args){var path=args[0];var route=args[1]||{};defaults.forEach(function(def){def.regex.test(path)&&(0,_lodash.defaultsDeep)(route,(0,_lodash.cloneDeep)(def.value))});null==route.reloadOnSearch&&(route.reloadOnSearch=false);null==route.requireDefaultIndex&&(route.requireDefaultIndex=false);(0,_wrap_route_with_prep.wrapRouteWithPrep)(route,setup);$routeProvider.when(path,route)});if(otherwise){(0,_wrap_route_with_prep.wrapRouteWithPrep)(otherwise,setup);$routeProvider.otherwise(otherwise)}};self.run=function($location,$route,$injector){self.getBreadcrumbs=function(){var breadcrumbs=(0,_breadcrumbs.parsePathToBreadcrumbs)($location.path());var map=$route.current.mapBreadcrumbs;return map?$injector.invoke(map,null,{breadcrumbs:breadcrumbs}):breadcrumbs}};var wrapSetupAndChain=function wrapSetupAndChain(fn){for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];fn.apply(setup,args);return _this};this.addSetupWork=(0,_lodash.wrap)(setup.addSetupWork,wrapSetupAndChain);this.afterSetupWork=(0,_lodash.wrap)(setup.afterSetupWork,wrapSetupAndChain);this.afterWork=(0,_lodash.wrap)(setup.afterWork,wrapSetupAndChain);self.when=function(path,route){when.push([path,route]);return self};self.defaults=function(regex,value){defaults.push({regex:regex,value:value});return self};self.otherwise=function(route){otherwise=route;return self};self.getBreadcrumbs=function(){return[]};self.RouteManager=RouteManager}module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.wrapRouteWithPrep=wrapRouteWithPrep;var _angular=__webpack_require__(16);var _angular2=_interopRequireDefault(_angular);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _work_queue=__webpack_require__(2766);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function wrapRouteWithPrep(route,setup){if(!route.resolve&&route.redirectTo)return;var userWork=new _work_queue.WorkQueue;userWork.limit=_lodash2.default.keys(route.resolve).length;var resolve={__prep__:function __prep__($injector){return $injector.invoke(setup.doWork,setup,{userWork:userWork})}};_lodash2.default.forOwn(route.resolve||{},function(expr,name){resolve[name]=function($injector,Promise){var defer=Promise.defer();userWork.push(defer);return defer.promise.then(function(){return $injector[_angular2.default.isString(expr)?"get":"invoke"](expr)})}});route.resolve=resolve}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WorkQueue=WorkQueue;function WorkQueue(){var q=this;var work=[];var fullDefers=[];q.limit=0;Object.defineProperty(q,"length",{get:function get(){return work.length}});var resolve=function resolve(defers){return defers.splice(0).map(function(defer){return defer.resolve()})};var checkIfFull=function checkIfFull(){work.length>=q.limit&&fullDefers.length&&resolve(fullDefers)};q.resolveWhenFull=function(defer){fullDefers.push(defer);checkIfFull()};q.doWork=function(){var resps=resolve(work);checkIfFull();return resps};q.empty=function(){work.splice(0);checkIfFull()};q.push=function(defer){work.push(defer);checkIfFull()}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.parsePathToBreadcrumbs=parsePathToBreadcrumbs;var _lodash=__webpack_require__(1);function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function parsePathToBreadcrumbs(path){return(0,_lodash.trim)(path,"/").split("/").reduce(function(acc,id,i,parts){return[].concat(_toConsumableArray(acc),[{id:id,display:(0,_lodash.startCase)(id),href:0===i?"#/"+id:acc[i-1].href+"/"+id,current:i===parts.length-1}])},[])}},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.KbnUrlProvider=KbnUrlProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);__webpack_require__(1242);__webpack_require__(1243);var _modules=__webpack_require__(2);var _app_state=__webpack_require__(476);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana/url").service("kbnUrl",function(Private){return Private(KbnUrlProvider)});function KbnUrlProvider($injector,$location,$rootScope,$parse,Private){var self=this;self.change=function(url,paramObj,appState){self._changeLocation("url",url,paramObj,false,appState)};self.changePath=function(path,paramObj){self._changeLocation("path",path,paramObj)};self.redirect=function(url,paramObj,appState){self._changeLocation("url",url,paramObj,true,appState)};self.redirectPath=function(path,paramObj){self._changeLocation("path",path,paramObj,true)};self.eval=function(template,paramObj){paramObj=paramObj||{};return template.replace(/\{\{([^\}]+)\}\}/g,function(match,expr){var key=expr.split("|")[0].trim();var p=$parse(key)(paramObj);if(_lodash2.default.isUndefined(p))throw new Error("Replacement failed, unresolved expression: "+expr);-1===expr.indexOf("uriescape")&&(expr+="|uriescape");return $parse(expr)(paramObj)})};self.getRouteHref=function(obj,route){return"#"+self.getRouteUrl(obj,route)};self.getRouteUrl=function(obj,route){var template=obj&&obj.routes&&obj.routes[route];if(template)return self.eval(template,obj)};self.redirectToRoute=function(obj,route){self.redirect(self.getRouteUrl(obj,route))};self.changeToRoute=function(obj,route){self.change(self.getRouteUrl(obj,route))};self.removeParam=function(param){$location.search(param,null).replace()};var reloading=void 0;self._changeLocation=function(type,url,paramObj,replace,appState){var prev={path:$location.path(),search:$location.search()};url=self.eval(url,paramObj);$location[type](url);replace&&$location.replace();appState&&$location.search(appState.getQueryParamName(),appState.toQueryParam());var next={path:$location.path(),search:$location.search()};if($injector.has("$route")){var $route=$injector.get("$route");if(self._shouldForceReload(next,prev,$route)){var _appState=Private(_app_state.AppStateProvider).getAppState();_appState&&_appState.destroy();reloading=$rootScope.$on("$locationChangeSuccess",function(){reloading();reloading=false;$route.reload()})}}};self._shouldForceReload=function(next,prev,$route){if(reloading)return false;var route=$route.current&&$route.current.$$route;if(!route)return false;var nextPath=next.path||"/";var prevPath=prev.path||"/";if(nextPath!==prevPath)return false;var reloadOnSearch=route.reloadOnSearch;var searchSame=_lodash2.default.isEqual(next.search,prev.search);return reloadOnSearch&&searchSame||!reloadOnSearch}}},function(module,exports,__webpack_require__){"use strict";var _events=__webpack_require__(398);var _persisted_state=__webpack_require__(1244);var _modules=__webpack_require__(2);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _module=_modules.uiModules.get("kibana");_module.factory("PersistedState",function($injector){var Private=$injector.get("Private");var Events=Private(_events.EventsProvider);return function(_PersistedState){_inherits(AngularPersistedState,_PersistedState);function AngularPersistedState(value,path){_classCallCheck(this,AngularPersistedState);return _possibleConstructorReturn(this,(AngularPersistedState.__proto__||Object.getPrototypeOf(AngularPersistedState)).call(this,value,path,Events))}return AngularPersistedState}(_persisted_state.PersistedState)})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RedirectWhenMissingProvider=RedirectWhenMissingProvider;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _markdown=__webpack_require__(589);var _notify=__webpack_require__(9);var _errors=__webpack_require__(56);var _modules=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana/url").service("redirectWhenMissing",function(Private){return Private(RedirectWhenMissingProvider)});function RedirectWhenMissingProvider($location,kbnUrl,Promise){return function(mapping){"string"===typeof mapping&&(mapping={"*":mapping});return function(error){var savedObjectNotFound=error instanceof _errors.SavedObjectNotFound;var unknownVisType=0===error.message.indexOf("Invalid type");if(unknownVisType)error.savedObjectType="visualization";else if(!savedObjectNotFound)throw error;var url=mapping[error.savedObjectType]||mapping["*"];url||(url="/");url+=(url.indexOf("?")>=0?"&":"?")+"notFound="+error.savedObjectType;_notify.toastNotifications.addWarning({title:"Saved object is missing",text:_react2.default.createElement(_markdown.MarkdownSimple,null,error.message)});kbnUrl.redirect(url);return Promise.halt()}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MarkdownSimple=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _reactMarkdown=__webpack_require__(1245);var _reactMarkdown2=_interopRequireDefault(_reactMarkdown);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var markdownRenderers={root:_react.Fragment};var MarkdownSimple=exports.MarkdownSimple=function MarkdownSimple(_ref){var children=_ref.children;return _react2.default.createElement(_reactMarkdown2.default,{renderers:markdownRenderers},children)};MarkdownSimple.propTypes={children:_propTypes2.default.string}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _modify_url=__webpack_require__(1023);Object.defineProperty(exports,"modifyUrl",{enumerable:true,get:function get(){return _modify_url.modifyUrl}})},function(module,exports){},function(module,exports){module.exports='<div class="app-container error-url-overflow-app">\n  <h3>\n    <i aria-hidden="true" class="fa fa-warning text-danger"></i> Woah there!\n  </h3>\n  <p>\n    That\'s a big URL you have there. I have some unfortunate news: Your browser doesn\'t play nice with Kibana\'s bacon-double-cheese-burger-with-extra-fries sized URL. To keep you from running into problems Kibana limits URLs in your browser to {{controller.limit}} characters for your safety.\n  </p>\n\n  <h3>Ok, how do I fix this?</h3>\n  <p>This usually only happens with big, complex dashboards, so you have some options:</p>\n  <ol>\n    <li>Enable the <code>state:storeInSessionStorage</code> option in the <a href="#/management/kibana/settings">advanced settings</a>. This will prevent the URLs from getting long, but makes them a bit less portable.</li>\n    <li>Remove some stuff from your dashboard. This will reduce the length of the URL and keep IE in a good place.</li>\n    <li>Don\'t use IE. Every other supported browser we know of doesn\'t have this limit.</li>\n  </ol>\n  <br>\n  <br>\n  <p><small>Foot note: Party size candy bars are tiny. Party size sub sandwiches are massive. Really makes you think.</small></p>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.directivesProvider=directivesProvider;__webpack_require__(2854);var _kbn_chrome=__webpack_require__(2866);var _append_nav_controls=__webpack_require__(2873);__webpack_require__(2876);function directivesProvider(chrome,internals){(0,_kbn_chrome.kbnChromeProvider)(chrome,internals);(0,_append_nav_controls.kbnAppendChromeNavControls)(chrome,internals)}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(2855)},function(module,exports,__webpack_require__){"use strict";__webpack_require__(2856);__webpack_require__(2860);var _global_nav=__webpack_require__(2864);var _global_nav2=_interopRequireDefault(_global_nav);__webpack_require__(2865);var _modules=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");_module.directive("globalNav",function(globalNavState,chrome){return{restrict:"E",replace:true,scope:{chrome:"=",isVisible:"=",logoBrand:"=",smallLogoBrand:"=",appTitle:"="},template:_global_nav2.default,link:function link(scope){function updateGlobalNav(){var isOpen=globalNavState.isOpen();scope.isGlobalNavOpen=isOpen;scope.globalNavToggleButton={classes:isOpen?"global-nav-link--close":void 0,title:isOpen?"Collapse":"Expand",tooltipContent:isOpen?"Collapse side bar":"Expand side bar"};scope.$root.$broadcast("globalNav:update")}updateGlobalNav();scope.$root.$on("globalNavState:change",function(){updateGlobalNav()});scope.getHref=function(path){return chrome.addBasePath(path)};scope.toggleGlobalNav=function(event){event.preventDefault();globalNavState.setOpen(!globalNavState.isOpen())};scope.isHomeActive=function(){return 0===window.location.hash.indexOf("#/home")}}}})},function(module,exports,__webpack_require__){"use strict";__webpack_require__(2857)},function(module,exports,__webpack_require__){"use strict";var _dom_location=__webpack_require__(2858);var _url=__webpack_require__(66);var _modules=__webpack_require__(2);var _app_switcher=__webpack_require__(2859);var _app_switcher2=_interopRequireDefault(_app_switcher);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana").provider("appSwitcherEnsureNavigation",function(){var forceNavigation=false;this.forceNavigation=function(val){forceNavigation=!!val};this.$get=["Private",function(Private){var domLocation=Private(_dom_location.DomLocationProvider);return function(event,link){link.disabled&&event.preventDefault();if(!forceNavigation||event.isDefaultPrevented()||event.altKey||event.metaKey||event.ctrlKey)return;var toParsed=(0,_url.parse)(event.delegateTarget.href);var fromParsed=(0,_url.parse)(domLocation.href);var sameProto=toParsed.protocol===fromParsed.protocol;var sameHost=toParsed.host===fromParsed.host;var samePath=toParsed.path===fromParsed.path;if(sameProto&&sameHost&&samePath){toParsed.hash&&domLocation.reload();event.stopPropagation()}}}]}).directive("appSwitcher",function(){return{restrict:"E",scope:{chrome:"="},template:_app_switcher2.default,controllerAs:"switcher",controller:function controller($scope,appSwitcherEnsureNavigation,globalNavState){if(!$scope.chrome||!$scope.chrome.getNavLinks)throw new TypeError('appSwitcher directive requires the "chrome" config-object');this.links=$scope.chrome.getNavLinks();this.ensureNavigation=appSwitcherEnsureNavigation;this.getTooltip=function(link){if(globalNavState.isOpen())return link.tooltip;return link.tooltip?link.title+" - "+link.tooltip:link.title}}}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DomLocationProvider=DomLocationProvider;function DomLocationProvider($window){return{reload:function reload(forceFetch){$window.location.reload(forceFetch)},get href(){return $window.location.href},set href(val){return $window.location.href=val}}}},function(module,exports){module.exports='<global-nav-link\n  ng-repeat="link in switcher.links"\n  ng-if="!link.hidden"\n  is-active="link.active"\n  is-disabled="link.disabled"\n  tooltip-content="switcher.getTooltip(link)"\n  on-click="switcher.ensureNavigation($event, link)"\n  url="link.active ? link.url : (link.lastSubUrl || link.url)"\n  icon="link.icon"\n  label="link.title"\n></global-nav-link>\n'},function(module,exports,__webpack_require__){"use strict";__webpack_require__(2861)},function(module,exports,__webpack_require__){"use strict";var _global_nav_link=__webpack_require__(2862);var _global_nav_link2=_interopRequireDefault(_global_nav_link);__webpack_require__(2863);var _modules=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");_module.directive("globalNavLink",function(chrome){return{restrict:"E",replace:true,scope:{isActive:"=",isDisabled:"=",tooltipContent:"=",onClick:"&",url:"=",kbnRoute:"=",icon:"=",label:"="},template:_global_nav_link2.default,link:function link(scope){scope.getHref=function(){if(scope.url)return scope.url;if(scope.kbnRoute)return chrome.addBasePath(scope.kbnRoute)}}}})},function(module,exports){module.exports='<div\n  class="global-nav-link {{classes}}"\n  ng-class="{ active: isActive, \'is-global-nav-link-disabled\': isDisabled }"\n  tooltip="{{ tooltipContent }}"\n  tooltip-placement="right"\n  tooltip-popup-delay="0"\n  tooltip-append-to-body="1"\n>\n  <a\n    class="global-nav-link__anchor"\n    href="{{ getHref() }}"\n    ng-click="onClick({ $event: $event })"\n    data-test-subj="appLink"\n    aria-label="{{::label}}"\n  >\n    <div class="global-nav-link__icon">\n      <img\n        ng-if="icon"\n        class="global-nav-link__icon-image"\n        kbn-src="{{ \'/\' + icon }}"\n        aria-hidden="true"\n      >\n\n      <span\n        ng-if="!icon"\n        class="global-nav-link__icon-placeholder"\n        data-test-subj="appLinkIconPlaceholder"\n      >\n        {{ label[0] }}\n      </span>\n    </div>\n\n    <div class="global-nav-link__title">\n      {{ label }}\n    </div>\n  </a>\n</div>\n'},function(module,exports){},function(module,exports){module.exports='<nav\n  class="global-nav"\n  ng-class="{\'is-global-nav-open\': isGlobalNavOpen}"\n  ng-show="isVisible"\n  data-test-subj="globalNav"\n>\n\n  \x3c!-- Logo --\x3e\n  <div class="global-nav__logo">\n    <a\n      class="global_nav_logo"\n      ng-class="{ active: isHomeActive() }"\n      href="{{ getHref(\'/app/kibana#/home\') }}"\n      data-test-subj="kibanaLogo"\n    >\n      <ul>\n        <li\n          ng-if="!logoBrand && !smallLogoBrand"\n          aria-label="{{ appTitle }} home"\n          class="logo kibana"\n        ></li>\n\n        <li\n          ng-if="logoBrand"\n          ng-style="{ \'background\': logoBrand }"\n          aria-label="{{ appTitle }} home"\n          class="logo hidden-sm"\n        ></li>\n\n        <li\n          ng-if="smallLogoBrand"\n          ng-style="{ \'background\': smallLogoBrand }"\n          aria-label="{{ appTitle }} home"\n          class="logo-small visible-sm hidden-xs"\n        ></li>\n      </ul>\n    </a>\n  </div>\n\n  \x3c!-- Links --\x3e\n  <div class="global-nav__links">\n    \x3c!-- Main apps --\x3e\n    <div class="global-nav__links-section">\n      <app-switcher\n        chrome="chrome"\n      ></app-switcher>\n    </div>\n\n    \x3c!-- Bottom button --\x3e\n    <div class="global-nav__links-section">\n      <div class="chrome-actions" kbn-chrome-append-nav-controls></div>\n\n      \x3c!-- Open/close sidebar --\x3e\n      <global-nav-link\n        class="{{ globalNavToggleButton.classes }}"\n        tooltip-content="globalNavToggleButton.tooltipContent"\n        on-click="toggleGlobalNav($event)"\n        icon="\'plugins/kibana/assets/play-circle.svg\'"\n        label="globalNavToggleButton.title"\n      ></global-nav-link>\n    </div>\n  </div>\n\n</nav>\n'},function(module,exports){},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.kbnChromeProvider=kbnChromeProvider;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _reactDom=__webpack_require__(15);var _reactDom2=_interopRequireDefault(_reactDom);var _jquery=__webpack_require__(13);var _jquery2=_interopRequireDefault(_jquery);__webpack_require__(2867);var _modules=__webpack_require__(2);var _state_hashing=__webpack_require__(592);var _notify=__webpack_require__(9);var _sub_url_route_filter=__webpack_require__(2871);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function kbnChromeProvider(chrome,internals){_modules.uiModules.get("kibana").directive("kbnChrome",function(){return{template:function template(){var $content=(0,_jquery2.default)(__webpack_require__(2872));var $app=$content.find(".application");internals.rootController&&$app.attr("ng-controller",internals.rootController);if(internals.rootTemplate){$app.removeAttr("ng-view");$app.html(internals.rootTemplate)}return $content},controllerAs:"chrome",controller:function controller($scope,$rootScope,$location,$http,Private){var getUnhashableStates=Private(_state_hashing.getUnhashableStatesProvider);Boolean($location.search().embed)&&internals.permanentlyHideChrome();var subUrlRouteFilter=Private(_sub_url_route_filter.SubUrlRouteFilterProvider);function updateSubUrls(){var urlWithHashes=window.location.href;var urlWithStates=(0,_state_hashing.unhashUrl)(urlWithHashes,getUnhashableStates());internals.trackPossibleSubUrl(urlWithStates)}function onRouteChange($event){subUrlRouteFilter($event)&&updateSubUrls()}$rootScope.$on("$routeChangeSuccess",onRouteChange);$rootScope.$on("$routeUpdate",onRouteChange);updateSubUrls();$scope.notifList=_notify.notify._notifs;_reactDom2.default.render(_react2.default.createElement(_notify.GlobalBannerList,{banners:_notify.banners.list,subscribe:_notify.banners.onChange}),document.getElementById("globalBannerList"));_reactDom2.default.render(_react2.default.createElement(_notify.GlobalToastList,{toasts:_notify.toastNotifications.list,dismissToast:_notify.toastNotifications.remove,toastLifeTimeMs:6e3,subscribe:_notify.toastNotifications.onChange}),document.getElementById("globalToastList"));return chrome}}})}},function(module,exports){},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getUnhashableStatesProvider=getUnhashableStatesProvider;function getUnhashableStatesProvider(getAppState,globalState){return function getUnhashableStates(){return[getAppState(),globalState].filter(Boolean)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.hashUrl=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _encodeUriQuery=__webpack_require__(1252);var _encodeUriQuery2=_interopRequireDefault(_encodeUriQuery);var _risonNode=__webpack_require__(310);var _risonNode2=_interopRequireDefault(_risonNode);var _url=__webpack_require__(66);var _querystring=__webpack_require__(397);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var conservativeStringifyQuerystring=function conservativeStringifyQuerystring(query){return(0,_querystring.stringify)(query,null,null,{encodeURIComponent:_encodeUriQuery2.default})};var hashStateInQuery=function hashStateInQuery(state,query){var name=state.getQueryParamName();var value=query[name];if(!value)return{name:name,value:value};var decodedValue=_risonNode2.default.decode(value);var hashedValue=state.toQueryParam(decodedValue);return{name:name,value:hashedValue}};var hashStatesInQuery=function hashStatesInQuery(states,query){var hashedQuery=states.reduce(function(result,state){var _hashStateInQuery=hashStateInQuery(state,query),name=_hashStateInQuery.name,value=_hashStateInQuery.value;value&&(result[name]=value);return result},{});return _extends({},query,hashedQuery)};exports.hashUrl=function hashUrl(states,redirectUrl){if(null===states||!states.length)throw new Error("states parameter must be an Array with length greater than 0");var parsedUrl=(0,_url.parse)(redirectUrl);if(!parsedUrl.hash)return redirectUrl;var parsedAppUrl=(0,_url.parse)(parsedUrl.hash.slice(1),true);var query=parsedAppUrl.query;var newQuery=hashStatesInQuery(states,query);var newHash=(0,_url.format)({search:conservativeStringifyQuerystring(newQuery),pathname:parsedAppUrl.pathname});return(0,_url.format)({hash:"#"+newHash,host:parsedUrl.host,search:parsedUrl.search,pathname:parsedUrl.pathname,protocol:parsedUrl.protocol})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.unhashUrl=unhashUrl;var _url=__webpack_require__(66);var _encodeUriQuery=__webpack_require__(1252);var _encodeUriQuery2=_interopRequireDefault(_encodeUriQuery);var _querystring=__webpack_require__(397);var _unhash_query_string=__webpack_require__(1253);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function unhashUrl(urlWithHashes,states){if(!urlWithHashes)return urlWithHashes;var urlWithHashesParsed=(0,_url.parse)(urlWithHashes,true);if(!urlWithHashesParsed.hostname)throw new TypeError("Only absolute urls should be passed to `unhashUrl()`. Unable to detect url hostname.");if(!urlWithHashesParsed.hash)return urlWithHashes;var appUrl=urlWithHashesParsed.hash.slice(1);if(!appUrl)return urlWithHashes;var appUrlParsed=(0,_url.parse)(urlWithHashesParsed.hash.slice(1),true);if(!appUrlParsed.query)return urlWithHashes;var appQueryWithoutHashes=(0,_unhash_query_string.unhashQueryString)(appUrlParsed.query||{},states);var appQueryStringWithoutHashes=(0,_querystring.stringify)(appQueryWithoutHashes,null,null,{encodeURIComponent:_encodeUriQuery2.default});return(0,_url.format)(_extends({},urlWithHashesParsed,{hash:(0,_url.format)({pathname:appUrlParsed.pathname,search:appQueryStringWithoutHashes})}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SubUrlRouteFilterProvider=SubUrlRouteFilterProvider;function SubUrlRouteFilterProvider($injector){if(!$injector.has("$route"))return function alwaysUpdate(){return true};var $route=$injector.get("$route");return function ignoreRedirectToRoutes(){return Boolean($route.current&&!$route.current.redirectTo)}}},function(module,exports){module.exports='<div class="content" chrome-context data-test-subj="kibanaChrome">\n  <global-nav\n    chrome="chrome"\n    data-test-subj="globalNav"\n    is-visible="chrome.getVisible()"\n    logo-brand="chrome.getBrand(\'logo\')"\n    small-logo-brand="chrome.getBrand(\'smallLogo\')"\n    app-title="chrome.getAppTitle()"\n  ></global-nav>\n\n  <div class="app-wrapper" ng-class="{ \'hidden-chrome\': !chrome.getVisible() }">\n    <div class="app-wrapper-panel">\n      <kbn-notifications\n        list="notifList"\n      ></kbn-notifications>\n\n      <div id="globalBannerList"></div>\n      <div id="globalToastList"></div>\n\n      <kbn-loading-indicator></kbn-loading-indicator>\n\n      <div\n        class="application"\n        ng-class="\'tab-\' + chrome.getFirstPathSegment() + \' \' + chrome.getApplicationClasses()"\n        ng-view\n      ></div>\n    </div>\n  </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.kbnAppendChromeNavControls=kbnAppendChromeNavControls;var _chrome_nav_controls=__webpack_require__(1254);var _modules=__webpack_require__(2);function kbnAppendChromeNavControls(){_modules.uiModules.get("kibana").directive("kbnChromeAppendNavControls",function(Private){return{template:function template($element){var parts=[$element.html()];var controls=Private(_chrome_nav_controls.chromeNavControlsRegistry);var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=void 0;try{for(var _step,_iterator=controls.inOrder[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var control=_step.value;parts.unshift("\x3c!-- nav control "+control.name+" --\x3e",control.template)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return parts.join("\n")}}})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexedArray=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;if(void 0===getter)return;return getter.call(receiver)};var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _inflector=__webpack_require__(2875);var _collection=__webpack_require__(410);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var pathGetter=(0,_lodash2.default)(_lodash2.default.get).rearg(1,0).ary(2);var inflectIndex=(0,_inflector.inflector)("by");var inflectOrder=(0,_inflector.inflector)("in","Order");var CLEAR_CACHE={};var OPT_NAMES=["index","group","order","initialSet","immutable"];var IndexedArray=exports.IndexedArray=function(){function IndexedArray(config){_classCallCheck(this,IndexedArray);config=_lodash2.default.pick(config||{},OPT_NAMES);Object.defineProperty(this,"raw",{value:[]});this._indexNames=_lodash2.default.union(this._setupIndex(config.group,inflectIndex,_collection.organizeBy),this._setupIndex(config.index,inflectIndex,_lodash2.default.indexBy),this._setupIndex(config.order,inflectOrder,function(raw,pluckValue){return[].concat(_toConsumableArray(raw)).sort(function(itemA,itemB){var a=pluckValue(itemA);var b=pluckValue(itemB);if("number"===typeof a&&"number"===typeof b)return a-b;return String(a).toLowerCase().localeCompare(String(b).toLowerCase())})}));config.initialSet&&this.push.apply(this,config.initialSet);Object.defineProperty(this,"immutable",{value:!!config.immutable})}_createClass(IndexedArray,[{key:"remove",value:function remove(predicate){this._assertMutable("remove");var out=_lodash2.default.remove(this,predicate);_lodash2.default.remove(this.raw,predicate);this._clearIndices();return out}},{key:"toJSON",value:function toJSON(){return this.raw}},{key:"copyWithin",value:function copyWithin(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return this._mutation("copyWithin",args)}},{key:"fill",value:function fill(){for(var _len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];return this._mutation("fill",args)}},{key:"pop",value:function pop(){for(var _len3=arguments.length,args=Array(_len3),_key3=0;_key3<_len3;_key3++)args[_key3]=arguments[_key3];return this._mutation("pop",args)}},{key:"push",value:function push(){for(var _len4=arguments.length,args=Array(_len4),_key4=0;_key4<_len4;_key4++)args[_key4]=arguments[_key4];return this._mutation("push",args)}},{key:"reverse",value:function reverse(){for(var _len5=arguments.length,args=Array(_len5),_key5=0;_key5<_len5;_key5++)args[_key5]=arguments[_key5];return this._mutation("reverse",args)}},{key:"shift",value:function shift(){for(var _len6=arguments.length,args=Array(_len6),_key6=0;_key6<_len6;_key6++)args[_key6]=arguments[_key6];return this._mutation("shift",args)}},{key:"sort",value:function sort(){for(var _len7=arguments.length,args=Array(_len7),_key7=0;_key7<_len7;_key7++)args[_key7]=arguments[_key7];return this._mutation("sort",args)}},{key:"splice",value:function splice(){for(var _len8=arguments.length,args=Array(_len8),_key8=0;_key8<_len8;_key8++)args[_key8]=arguments[_key8];return this._mutation("splice",args)}},{key:"unshift",value:function unshift(){for(var _len9=arguments.length,args=Array(_len9),_key9=0;_key9<_len9;_key9++)args[_key9]=arguments[_key9];return this._mutation("unshift",args)}},{key:"_assertMutable",value:function _assertMutable(methodName){if(this.immutable)throw new Error(methodName+"() is not allowed on immutable IndexedArray instances")}},{key:"_mutation",value:function _mutation(methodName,args){this._assertMutable(methodName);_get(IndexedArray.prototype.__proto__||Object.getPrototypeOf(IndexedArray.prototype),methodName,this).apply(this,args);this._clearIndices();return _get(IndexedArray.prototype.__proto__||Object.getPrototypeOf(IndexedArray.prototype),methodName,this).apply(this.raw,args)}},{key:"_setupIndex",value:function _setupIndex(props,inflect,op){var _this=this;if(!props||0===props.length)return;return props.map(function(prop){var indexName=inflect(prop);var getIndexValueFromItem=pathGetter.partial(prop).value();var cache=void 0;Object.defineProperty(_this,indexName,{enumerable:false,configurable:false,set:function set(val){if(val!==CLEAR_CACHE)throw new TypeError(indexName+" can not be set, it is a computed index of values");cache=false},get:function get(){cache||(cache=op(_this.raw,getIndexValueFromItem));return cache}});return indexName})}},{key:"_clearIndices",value:function _clearIndices(){var _this2=this;this._indexNames.forEach(function(name){_this2[name]=CLEAR_CACHE})}}]);return IndexedArray}();IndexedArray.OPT_NAMES=OPT_NAMES;Object.setPrototypeOf(IndexedArray.prototype,Array.prototype)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.inflector=inflector;function upFirst(str,total){return str.charAt(0).toUpperCase()+(total?str.substr(1).toLowerCase():str.substr(1))}function startsWith(str,test){return str.substr(0,test.length).toLowerCase()===test.toLowerCase()}function endsWith(str,test){var tooShort=str.length<test.length;if(tooShort)return;return str.substr(str.length-test.length).toLowerCase()===test.toLowerCase()}function inflector(prefix,postfix){return function inflect(key){var inflected=void 0;inflected=-1!==key.indexOf(".")?key.split(".").map(function(step,i){return 0===i?step:upFirst(step,true)}).join(""):key;prefix&&!startsWith(key,prefix)&&(inflected=prefix+upFirst(inflected));postfix&&!endsWith(key,postfix)&&(inflected+=postfix);return inflected}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LoadingIndicator=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();__webpack_require__(93);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _classnames=__webpack_require__(5);var _classnames2=_interopRequireDefault(_classnames);var _modules=__webpack_require__(2);var _chrome=__webpack_require__(8);var _chrome2=_interopRequireDefault(_chrome);__webpack_require__(2877);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var LoadingIndicator=exports.LoadingIndicator=function(_React$Component){_inherits(LoadingIndicator,_React$Component);function LoadingIndicator(){var _ref;var _temp,_this,_ret;_classCallCheck(this,LoadingIndicator);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=LoadingIndicator.__proto__||Object.getPrototypeOf(LoadingIndicator)).call.apply(_ref,[this].concat(args))),_this),_this.state={visible:false},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(LoadingIndicator,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this;this._unsub=_chrome2.default.loadingCount.subscribe(function(count){_this2.setState({visible:count>0})})}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._unsub();this._unsub=null}},{key:"render",value:function render(){var className=(0,_classnames2.default)("loadingIndicator",this.state.visible?null:"hidden");var testSubj=this.state.visible?"globalLoadingIndicator":"globalLoadingIndicator-hidden";return _react2.default.createElement("div",{className:className,"data-test-subj":testSubj},_react2.default.createElement("div",{className:"loadingIndicator__bar"}))}}]);return LoadingIndicator}(_react2.default.Component);_modules.uiModules.get("app/kibana",["react"]).directive("kbnLoadingIndicator",function(reactDirective){return reactDirective(LoadingIndicator)})},function(module,exports){},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(chrome,internals){(0,_lodash.get)(internals,"app.navLink.url")&&(internals.app.navLink.url=(0,_url.resolve)(window.location.href,internals.app.navLink.url));internals.appUrlStore=internals.appUrlStore||window.sessionStorage;try{var verifySessionStorage="verify sessionStorage";internals.appUrlStore.setItem(verifySessionStorage,1);internals.appUrlStore.removeItem(verifySessionStorage)}catch(error){throw new Error("Kibana requires access to sessionStorage, and it looks like your browser is restricting it. If you're using Safari with private browsing enabled, you can solve this problem by disabling private browsing, or by using another browser.")}chrome.setShowAppsLink=function(val){internals.showAppsLink=!!val;return chrome};chrome.getShowAppsLink=function(){return null==internals.showAppsLink?internals.nav.length>1:internals.showAppsLink};chrome.getKibanaVersion=function(){return internals.version};chrome.getApp=function(){return(0,_lodash.clone)(internals.app)};chrome.getAppTitle=function(){return(0,_lodash.get)(internals,["app","title"])};chrome.getAppUrl=function(){return(0,_lodash.get)(internals,["app","navLink","url"])};chrome.getInjected=function(name,def){if(null==name)return(0,_lodash.clone)(internals.vars)||{};return(0,_lodash.get)(internals.vars,name,def)};chrome.getLastUrlFor=function(appId){return internals.appUrlStore.getItem("appLastUrl:"+appId)};chrome.setLastUrlFor=function(appId,url){internals.appUrlStore.setItem("appLastUrl:"+appId,url)}};var _lodash=__webpack_require__(1);var _url=__webpack_require__(66);module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(chrome,internals){var permanentlyHideChrome=false;internals.permanentlyHideChrome=function(){permanentlyHideChrome=true;internals.visible=false};chrome.getIsChromePermanentlyHidden=function(){return permanentlyHideChrome};chrome.setVisible=function(display){if(permanentlyHideChrome)return chrome;internals.visible=Boolean(display);return chrome};chrome.getVisible=function(){if(_lodash2.default.isUndefined(internals.visible))return!permanentlyHideChrome;return internals.visible}};var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.initChromeNavApi=initChromeNavApi;var _lodash=__webpack_require__(1);var _prepend_path=__webpack_require__(1255);var _relative_to_absolute=__webpack_require__(1256);var _absolute_to_parsed_url=__webpack_require__(1257);function initChromeNavApi(chrome,internals){chrome.getNavLinks=function(){return internals.nav};chrome.navLinkExists=function(id){return!!internals.nav.find(function(link){return link.id===id})};chrome.getNavLinkById=function(id){var navLink=internals.nav.find(function(link){return link.id===id});if(!navLink)throw new Error("Nav link for id = "+id+" not found");return navLink};chrome.showOnlyById=function(id){(0,_lodash.remove)(internals.nav,function(app){return app.id!==id})};chrome.getBasePath=function(){return internals.basePath||""};chrome.addBasePath=function(url){return(0,_prepend_path.prependPath)(url,chrome.getBasePath())};chrome.removeBasePath=function(url){if(!internals.basePath)return url;var basePathRegExp=new RegExp("^"+internals.basePath);return url.replace(basePathRegExp,"")};function lastSubUrlKey(link){return"lastSubUrl:"+link.url}function setLastUrl(link,url){if(false===link.linkToLastSubUrl)return;link.lastSubUrl=url;internals.appUrlStore.setItem(lastSubUrlKey(link),url)}function refreshLastUrl(link){link.lastSubUrl=internals.appUrlStore.getItem(lastSubUrlKey(link))||link.lastSubUrl||link.url}function injectNewGlobalState(link,fromAppId,newGlobalState){var kibanaParsedUrl=(0,_absolute_to_parsed_url.absoluteToParsedUrl)(link.lastSubUrl,chrome.getBasePath());if(fromAppId!==kibanaParsedUrl.appId)return;kibanaParsedUrl.setGlobalState(newGlobalState);link.lastSubUrl=kibanaParsedUrl.getAbsoluteUrl()}chrome.untrackNavLinksForDeletedSavedObjects=function(deletedIds){function urlContainsDeletedId(url){var includedId=deletedIds.find(function(deletedId){return url.includes(deletedId)});if(void 0===includedId)return false;return true}internals.nav.forEach(function(link){link.linkToLastSubUrl&&urlContainsDeletedId(link.lastSubUrl)&&setLastUrl(link,link.url)})};chrome.trackSubUrlForApp=function(linkId,kibanaParsedUrl){var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=void 0;try{for(var _step,_iterator=internals.nav[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var link=_step.value;if(link.id===linkId){var absoluteUrl=kibanaParsedUrl.getAbsoluteUrl();setLastUrl(link,absoluteUrl);return}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}};internals.trackPossibleSubUrl=function(url){var kibanaParsedUrl=(0,_absolute_to_parsed_url.absoluteToParsedUrl)(url,chrome.getBasePath());var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=void 0;try{for(var _step2,_iterator2=internals.nav[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var link=_step2.value;link.active=url.startsWith(link.subUrlBase);if(link.active){setLastUrl(link,url);continue}refreshLastUrl(link);var newGlobalState=kibanaParsedUrl.getGlobalState();newGlobalState&&injectNewGlobalState(link,kibanaParsedUrl.appId,newGlobalState)}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}};internals.nav.forEach(function(link){link.url=(0,_relative_to_absolute.relativeToAbsolute)(link.url);link.subUrlBase=(0,_relative_to_absolute.relativeToAbsolute)(link.subUrlBase)});internals.trackPossibleSubUrl(document.location.href)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.extractAppPathAndId=extractAppPathAndId;var _url=__webpack_require__(66);function extractAppPathAndId(url){var basePath=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";var parsedUrl=(0,_url.parse)(url);if(!parsedUrl.path)return{};var pathWithoutBase=parsedUrl.path.slice(basePath.length);if(!pathWithoutBase.startsWith("/app/"))return{};var appPath=parsedUrl.hash&&parsedUrl.hash.length>0?parsedUrl.hash.slice(1):"";return{appId:pathWithoutBase.slice("/app/".length),appPath:appPath}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(chrome,internals){chrome.setRootTemplate=function(template){internals.rootTemplate=template;return chrome};chrome.setRootController=function(as,controllerName){if(void 0===controllerName){controllerName=as;as=null}if("function"===typeof controllerName){chrome.$$rootControllerConstruct=controllerName;controllerName="chrome.$$rootControllerConstruct"}internals.rootController=controllerName+(as?" as "+as:"");return chrome}};module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(chrome,internals){chrome.setBrand=function(item,val){internals.brand=internals.brand||{};_lodash2.default.isPlainObject(item)?internals.brand=_lodash2.default.clone(item):internals.brand[item]=val;return chrome};chrome.getBrand=function(item){if(!internals.brand)return;return internals.brand[item]};chrome.addApplicationClass=function(val){var classes=internals.applicationClasses||[];classes.push(val);classes=_lodash2.default.uniq(classes);internals.applicationClasses=classes;return chrome};chrome.removeApplicationClass=function(val){var classesToRemove=[].concat(val||[]);var classes=internals.applicationClasses||[];_lodash2.default.pull.apply(_lodash2.default,[classes].concat(_toConsumableArray(classesToRemove)));internals.applicationClasses=classes;return chrome};chrome.getApplicationClasses=function(){return internals.applicationClasses.join(" ")}};var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(chrome,internals){chrome.getTranslations=function(){return internals.translations||[]}};module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.initChromeXsrfApi=initChromeXsrfApi;var _jquery=__webpack_require__(13);var _jquery2=_interopRequireDefault(_jquery);var _lodash=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function initChromeXsrfApi(chrome,internals){chrome.getXsrfToken=function(){return internals.version};_jquery2.default.ajaxPrefilter(function(_ref,originalOptions,jqXHR){var _ref$kbnXsrfToken=_ref.kbnXsrfToken,kbnXsrfToken=void 0===_ref$kbnXsrfToken||_ref$kbnXsrfToken;kbnXsrfToken&&jqXHR.setRequestHeader("kbn-version",internals.version)});chrome.$setupXsrfRequestInterceptor=function($httpProvider){$httpProvider.interceptors.push(function(){return{request:function request(opts){var _opts$kbnXsrfToken=opts.kbnXsrfToken,kbnXsrfToken=void 0===_opts$kbnXsrfToken||_opts$kbnXsrfToken;kbnXsrfToken&&(0,_lodash.set)(opts,["headers","kbn-version"],internals.version);return opts}}})}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.initUiSettingsApi=initUiSettingsApi;var _metadata=__webpack_require__(91);var _notify=__webpack_require__(9);var _ui_settings_client=__webpack_require__(2887);function initUiSettingsApi(chrome){var uiSettings=new _ui_settings_client.UiSettingsClient({defaults:_metadata.metadata.uiSettings.defaults,initialSettings:_metadata.metadata.uiSettings.user,notify:new _notify.Notifier({location:"Config"})});chrome.getUiSettingsClient=function(){return uiSettings}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UiSettingsClient=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(1);var _ui_settings_api=__webpack_require__(2888);function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.UiSettingsClient=function(){function UiSettingsClient(options){_classCallCheck(this,UiSettingsClient);var defaults=options.defaults,initialSettings=options.initialSettings,notify=options.notify,_options$api=options.api,api=void 0===_options$api?(0,_ui_settings_api.createUiSettingsApi)():_options$api;this._defaults=(0,_lodash.cloneDeep)(defaults);this._cache=(0,_lodash.defaultsDeep)({},this._defaults,(0,_lodash.cloneDeep)(initialSettings));this._api=api;this._notify=notify;this._updateObservers=new Set}_createClass(UiSettingsClient,[{key:"getAll",value:function getAll(){return(0,_lodash.cloneDeep)(this._cache)}},{key:"get",value:function get(key,defaultValue){if(!this.isDeclared(key)){if(void 0!==defaultValue)return defaultValue;throw new Error('Unexpected `config.get("'+key+'")` call on unrecognized configuration setting "'+key+'".\nSetting an initial value via `config.set("'+key+'", value)` before attempting to retrieve\nany custom setting value for "'+key+'" may fix this issue.\nYou can use `config.get("'+key+'", defaultValue)`, which will just return\n`defaultValue` when the key is unrecognized.')}var _cache$key=this._cache[key],userValue=_cache$key.userValue,definedDefault=_cache$key.value,type=_cache$key.type;var currentValue=void 0;currentValue=this.isDefault(key)?void 0===defaultValue?definedDefault:defaultValue:userValue;if("json"===type)return JSON.parse(currentValue);if("number"===type)return parseFloat(currentValue);return currentValue}},{key:"set",value:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(key,val){return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return this._update(key,val);case 2:return _context.abrupt("return",_context.sent);case 3:case"end":return _context.stop()}},_callee,this)}));function set(_x,_x2){return _ref.apply(this,arguments)}return set}()},{key:"remove",value:function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(key){return regeneratorRuntime.wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this._update(key,null);case 2:return _context2.abrupt("return",_context2.sent);case 3:case"end":return _context2.stop()}},_callee2,this)}));function remove(_x3){return _ref2.apply(this,arguments)}return remove}()},{key:"isDeclared",value:function isDeclared(key){return Boolean(key in this._cache)}},{key:"isDefault",value:function isDefault(key){return!this.isDeclared(key)||null==this._cache[key].userValue}},{key:"isCustom",value:function isCustom(key){return this.isDeclared(key)&&!("value"in this._cache[key])}},{key:"overrideLocalDefault",value:function overrideLocalDefault(key,newDefault){var prevDefault=this._defaults[key]?this._defaults[key].value:void 0;this._defaults[key]=_extends({},this._defaults[key]||{},{value:newDefault});this._cache[key]=_extends({},this._cache[key]||{},{value:newDefault});null==this._cache[key].userValue&&this._broadcastUpdate(key,newDefault,prevDefault)}},{key:"subscribe",value:function subscribe(observer){var _this=this;this._updateObservers.add(observer);return{unsubscribe:function unsubscribe(){_this._updateObservers.delete(observer)}}}},{key:"_update",value:function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(key,value){var declared,defaults,oldVal,newVal,unchanged,initialVal,_ref4,settings;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:declared=this.isDeclared(key);defaults=this._defaults;oldVal=declared?this._cache[key].userValue:void 0;newVal=key in defaults&&defaults[key].defaultValue===value?null:value;unchanged=oldVal===newVal;if(!unchanged){_context3.next=7;break}return _context3.abrupt("return",true);case 7:initialVal=declared?this.get(key):void 0;this._setLocally(key,newVal,initialVal);_context3.prev=9;_context3.next=12;return this._api.batchSet(key,newVal);case 12:_ref4=_context3.sent;settings=_ref4.settings;this._cache=(0,_lodash.defaultsDeep)({},defaults,settings);return _context3.abrupt("return",true);case 18:_context3.prev=18;_context3.t0=_context3["catch"](9);this._setLocally(key,initialVal);this._notify.error(_context3.t0);return _context3.abrupt("return",false);case 23:case"end":return _context3.stop()}},_callee3,this,[[9,18]])}));function _update(_x4,_x5){return _ref3.apply(this,arguments)}return _update}()},{key:"_setLocally",value:function _setLocally(key,newValue){this.isDeclared(key)||(this._cache[key]={});var oldValue=this.get(key);if(null===newValue)delete this._cache[key].userValue;else{var type=this._cache[key].type;this._cache[key].userValue="json"===type&&"string"!==typeof newValue?JSON.stringify(newValue):newValue}this._broadcastUpdate(key,newValue,oldValue)}},{key:"_broadcastUpdate",value:function _broadcastUpdate(key,newValue,oldValue){var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=void 0;try{for(var _step,_iterator=this._updateObservers[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var observer=_step.value;observer({key:key,newValue:newValue,oldValue:oldValue})}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}}]);return UiSettingsClient}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();exports.createUiSettingsApi=createUiSettingsApi;var _send_request=__webpack_require__(2889);function _defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true}):obj[key]=value;return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}var NOOP_CHANGES={values:{},callback:function callback(){}};function createUiSettingsApi(){var flushPendingChanges=(_ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var changes;return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(pendingChanges){_context.next=2;break}return _context.abrupt("return");case 2:if(!sendInProgress){_context.next=4;break}return _context.abrupt("return");case 4:changes=pendingChanges;pendingChanges=null;_context.prev=6;sendInProgress=true;_context.t0=changes;_context.next=11;return(0,_send_request.sendRequest)({method:"POST",path:"/api/kibana/settings",body:{changes:changes.values}});case 11:_context.t1=_context.sent;_context.t0.callback.call(_context.t0,null,_context.t1);_context.next=18;break;case 15:_context.prev=15;_context.t2=_context["catch"](6);changes.callback(_context.t2);case 18:_context.prev=18;sendInProgress=false;flushPendingChanges();return _context.finish(18);case 22:case"end":return _context.stop()}},_callee,this,[[6,15,18,22]])})),function flushPendingChanges(){return _ref.apply(this,arguments)});var _ref;var pendingChanges=null;var sendInProgress=false;return new(function(){function Api(){_classCallCheck(this,Api)}_createClass(Api,[{key:"batchSet",value:function batchSet(key,value){return new Promise(function(resolve,reject){var prev=pendingChanges||NOOP_CHANGES;pendingChanges={values:_extends({},prev.values,_defineProperty({},key,value)),callback:function callback(error,resp){prev.callback(error,resp);error?reject(error):resolve(resp)}};flushPendingChanges()})}}]);return Api}())}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.sendRequest=void 0;exports.sendRequest=(_ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee(_ref){var method=_ref.method,path=_ref.path,body=_ref.body;var response;return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_chrome2.default.loadingCount.increment();_context.prev=1;_context.next=4;return fetch(_chrome2.default.addBasePath(path),{method:method,body:JSON.stringify(body),headers:{accept:"application/json","content-type":"application/json","kbn-version":_metadata.metadata.version},credentials:"same-origin"});case 4:response=_context.sent;if(!(response.status>=300)){_context.next=7;break}throw new Error("Request failed with status code: "+response.status);case 7:_context.next=9;return response.json();case 9:return _context.abrupt("return",_context.sent);case 10:_context.prev=10;_chrome2.default.loadingCount.decrement();return _context.finish(10);case 13:case"end":return _context.stop()}},_callee,this,[[1,,10,13]])})),function sendRequest(_x){return _ref2.apply(this,arguments)});var _ref2;var _chrome=__webpack_require__(8);var _chrome2=_interopRequireDefault(_chrome);var _metadata=__webpack_require__(91);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();exports.initLoadingCountApi=initLoadingCountApi;var _system_api=__webpack_require__(477);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function initLoadingCountApi(chrome,internals){var counts={angular:0,manual:0};var handlers=new Set;function getCount(){return counts.angular+counts.manual}function update(name,count){if(counts[name]===count)return;counts[name]=count;var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=void 0;try{for(var _step,_iterator=handlers[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var handler=_step.value;handler(getCount())}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}internals.capture$httpLoadingCount=function($rootScope,$http){$rootScope.$watch(function(){var reqs=$http.pendingRequests||[];update("angular",reqs.filter(function(req){return!(0,_system_api.isSystemApiRequest)(req)}).length)})};chrome.loadingCount=new(function(){function ChromeLoadingCountApi(){_classCallCheck(this,ChromeLoadingCountApi)}_createClass(ChromeLoadingCountApi,[{key:"subscribe",value:function subscribe(handler){handlers.add(handler);handler(getCount());return function(){handlers.delete(handler)}}},{key:"increment",value:function increment(){update("manual",counts.manual+1)}},{key:"decrement",value:function decrement(){update("manual",counts.manual-1)}}]);return ChromeLoadingCountApi}())}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.addSystemApiHeader=addSystemApiHeader;exports.isSystemApiRequest=isSystemApiRequest;function _defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true}):obj[key]=value;return obj}var SYSTEM_API_HEADER_NAME="kbn-system-api";function addSystemApiHeader(originalHeaders){var systemApiHeaders=_defineProperty({},SYSTEM_API_HEADER_NAME,true);return _extends({},originalHeaders,systemApiHeaders)}function isSystemApiRequest(request){return!!request.headers[SYSTEM_API_HEADER_NAME]}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.initSavedObjectClient=initSavedObjectClient;var _saved_objects=__webpack_require__(57);function initSavedObjectClient(chrome){var savedObjectClient=new _saved_objects.SavedObjectsClient;chrome.getSavedObjectsClient=function(){return savedObjectClient}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SavedObjectsClient=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _url=__webpack_require__(66);var _case_conversion=__webpack_require__(2894);var _saved_object=__webpack_require__(1258);var _error_auto_create_index=__webpack_require__(2895);var _kfetch=__webpack_require__(593);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var join=function join(){for(var _len=arguments.length,uriComponents=Array(_len),_key=0;_key<_len;_key++)uriComponents[_key]=arguments[_key];return uriComponents.filter(Boolean).map(encodeURIComponent).join("/")};var BATCH_INTERVAL=100;var API_BASE_URL="/api/saved_objects/";exports.SavedObjectsClient=function(){function SavedObjectsClient(){var _this=this;_classCallCheck(this,SavedObjectsClient);this.create=function(type){var attributes=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!type||!attributes)return Promise.reject(new Error("requires type and attributes"));var path=_this._getPath([type,options.id]);var query=_lodash2.default.pick(options,["overwrite"]);return _this._request({method:"POST",path:path,query:query,body:{attributes:attributes}}).catch(function(error){if((0,_error_auto_create_index.isAutoCreateIndexError)(error))return(0,_error_auto_create_index.showAutoCreateIndexErrorPage)();throw error}).then(function(resp){return _this._createSavedObject(resp)})};this.bulkCreate=function(){var objects=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var path=_this._getPath(["_bulk_create"]);var query=_lodash2.default.pick(options,["overwrite"]);return _this._request({method:"POST",path:path,query:query,body:objects}).then(function(resp){resp.saved_objects=resp.saved_objects.map(function(d){return _this._createSavedObject(d)});return(0,_case_conversion.keysToCamelCaseShallow)(resp)})};this.delete=function(type,id){if(!type||!id)return Promise.reject(new Error("requires type and id"));return _this._request({method:"DELETE",path:_this._getPath([type,id])})};this.find=function(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var path=_this._getPath(["_find"]);var query=(0,_case_conversion.keysToSnakeCaseShallow)(options);return _this._request({method:"GET",path:path,query:query}).then(function(resp){resp.saved_objects=resp.saved_objects.map(function(d){return _this._createSavedObject(d)});return(0,_case_conversion.keysToCamelCaseShallow)(resp)})};this.get=function(type,id){if(!type||!id)return Promise.reject(new Error("requires type and id"));return new Promise(function(resolve,reject){_this.batchQueue.push({type:type,id:id,resolve:resolve,reject:reject});_this._processBatchQueue()})};this.bulkGet=function(){var objects=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];var path=_this._getPath(["_bulk_get"]);var filteredObjects=objects.map(function(obj){return _lodash2.default.pick(obj,["id","type"])});return _this._request({method:"POST",path:path,body:filteredObjects}).then(function(resp){resp.saved_objects=resp.saved_objects.map(function(d){return _this._createSavedObject(d)});return(0,_case_conversion.keysToCamelCaseShallow)(resp)})};this.update=function(type,id,attributes){var _ref=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},version=_ref.version;if(!type||!id||!attributes)return Promise.reject(new Error("requires type, id and attributes"));var path=_this._getPath([type,id]);var body={attributes:attributes,version:version};return _this._request({method:"PUT",path:path,body:body}).then(function(resp){return _this._createSavedObject(resp)})};this._processBatchQueue=_lodash2.default.throttle(function(){var queue=_lodash2.default.cloneDeep(_this.batchQueue);_this.batchQueue=[];_this.bulkGet(queue).then(function(_ref2){var savedObjects=_ref2.savedObjects;queue.forEach(function(queueItem){var foundObject=savedObjects.find(function(savedObject){return savedObject.id===queueItem.id&savedObject.type===queueItem.type});if(!foundObject)return queueItem.resolve(_this._createSavedObject(_lodash2.default.pick(queueItem,["id","type"])));queueItem.resolve(foundObject)})})},BATCH_INTERVAL,{leading:false});this.batchQueue=[]}_createClass(SavedObjectsClient,[{key:"_createSavedObject",value:function _createSavedObject(options){return new _saved_object.SavedObject(this,options)}},{key:"_getPath",value:function _getPath(path){if(!path)return API_BASE_URL;return(0,_url.resolve)(API_BASE_URL,join.apply(void 0,_toConsumableArray(path)))}},{key:"_request",value:function _request(_ref3){var method=_ref3.method,path=_ref3.path,query=_ref3.query,body=_ref3.body;if("GET"===method&&body)return Promise.reject(new Error("body not permitted for GET requests"));return(0,_kfetch.kfetch)({method:method,pathname:path,query:query,body:JSON.stringify(body)})}}]);return SavedObjectsClient}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.keysToSnakeCaseShallow=keysToSnakeCaseShallow;exports.keysToCamelCaseShallow=keysToCamelCaseShallow;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function keysToSnakeCaseShallow(object){return _lodash2.default.mapKeys(object,function(value,key){return _lodash2.default.snakeCase(key)})}function keysToCamelCaseShallow(object){return _lodash2.default.mapKeys(object,function(value,key){return _lodash2.default.camelCase(key)})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _error_auto_create_index=__webpack_require__(2896);Object.defineProperty(exports,"isAutoCreateIndexError",{enumerable:true,get:function get(){return _error_auto_create_index.isAutoCreateIndexError}});Object.defineProperty(exports,"showAutoCreateIndexErrorPage",{enumerable:true,get:function get(){return _error_auto_create_index.showAutoCreateIndexErrorPage}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isAutoCreateIndexError=isAutoCreateIndexError;exports.showAutoCreateIndexErrorPage=showAutoCreateIndexErrorPage;var _lodash=__webpack_require__(1);var _routes=__webpack_require__(12);var _routes2=_interopRequireDefault(_routes);__webpack_require__(2897);var _error_auto_create_index=__webpack_require__(2898);var _error_auto_create_index2=_interopRequireDefault(_error_auto_create_index);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_routes2.default.when("/error/action.auto_create_index",{template:_error_auto_create_index2.default});function isAutoCreateIndexError(error){return 503===(0,_lodash.get)(error,"res.status")&&"ES_AUTO_CREATE_INDEX_ERROR"===(0,_lodash.get)(error,"body.code")}function showAutoCreateIndexErrorPage(){window.location.hash="/error/action.auto_create_index"}},function(module,exports){},function(module,exports){module.exports='<div class="app-container error-auto-create-index">\n  <h3 class="kuiVerticalRhythm">\n    <i aria-hidden="true" class="fa fa-warning text-danger"></i> Oh no!\n  </h3>\n\n  <p class="kuiVerticalRhythm">\n    It looks like your Elasticsearch cluster\'s <code>action.auto_create_index</code> setting is preventing Kibana from automatically creating an index to store saved objects. Kibana uses this Elasticsearch feature because it is the best way to make sure that the saved object index uses the correct mappings/schema, and it allows Kibana to poll Elasticsearch less often.\n  </p>\n\n  <p class="kuiVerticalRhythm">\n    Unfortunately, until this issue is fixed you won\'t be able to save anything in Kibana.\n  </p>\n\n  <h3 class="kuiVerticalRhythm">\n    Ok, how do I fix this?\n  </h3>\n\n  <ol class="kuiVerticalRhythm">\n    <li>Remove <code>action.auto_create_index: false</code> from your Elasticsearch configuration file</li>\n    <li>Restart elasticsearch.</li>\n    <li>Use the browser\'s back button to return to what you were doing.</li>\n  </ol>\n\n  <div class="kuiInfoPanel kuiInfoPanel--info kuiVerticalRhythm">\n    <div class="kuiInfoPanelHeader">\n      <span\n        class="kuiInfoPanelHeader__icon kuiIcon kuiIcon--info fa-info"\n        aria-label="Info"\n        role="img"\n      ></span>\n      <span class="kuiInfoPanelHeader__title">\n        Note:\n      </span>\n    </div>\n\n    <div class="kuiInfoPanelBody">\n      <div class="kuiInfoPanelBody__message">\n        The <code>action.auto_create_index</code> can also define a whitelist of patterns where this feature should be enabled. We don\'t discuss how to use the setting that way here because it requires knowing all of the other plugins/interactions that rely on the feature for the same reasons that Kibana does.\n      </div>\n    </div>\n  </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};Object.defineProperty(exports,"__esModule",{value:true});var kfetch_1=__webpack_require__(1259);function createAbortable(){var abortController=new AbortController;var signal=abortController.signal,abort=abortController.abort;return{signal:signal,abort:abort.bind(abortController)}}function kfetchAbortable(fetchOptions,kibanaOptions){var _createAbortable=createAbortable(),signal=_createAbortable.signal,abort=_createAbortable.abort;var fetching=kfetch_1.kfetch(_extends({},fetchOptions,{signal:signal}),kibanaOptions);return{fetching:fetching,abort:abort}}exports.kfetchAbortable=kfetchAbortable},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SavedObjectsClientProvider=SavedObjectsClientProvider;var _chrome=__webpack_require__(8);var _chrome2=_interopRequireDefault(_chrome);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function SavedObjectsClientProvider(Promise){var savedObjectsClient=_chrome2.default.getSavedObjectsClient();return{create:function create(){return Promise.resolve(savedObjectsClient.create.apply(savedObjectsClient,arguments))},bulkCreate:function bulkCreate(){return Promise.resolve(savedObjectsClient.bulkCreate.apply(savedObjectsClient,arguments))},delete:function _delete(){return Promise.resolve(savedObjectsClient.delete.apply(savedObjectsClient,arguments))},find:function find(){return Promise.resolve(savedObjectsClient.find.apply(savedObjectsClient,arguments))},get:function get(){return Promise.resolve(savedObjectsClient.get.apply(savedObjectsClient,arguments))},bulkGet:function bulkGet(){return Promise.resolve(savedObjectsClient.bulkGet.apply(savedObjectsClient,arguments))},update:function update(){return Promise.resolve(savedObjectsClient.update.apply(savedObjectsClient,arguments))}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.findObjectByTitle=findObjectByTitle;var _lodash=__webpack_require__(1);function findObjectByTitle(savedObjectsClient,type,title){if(!title)return Promise.resolve();return savedObjectsClient.find({type:type,perPage:10,search:'"'+title+'"',searchFields:["title"],fields:["title"]}).then(function(response){var match=(0,_lodash.find)(response.savedObjects,function(obj){return obj.get("title").toLowerCase()===title.toLowerCase()});return match})}},function(module,exports,__webpack_require__){__webpack_require__(2903)},,,,,,,,,,function(module,exports,__webpack_require__){__webpack_require__(2913);__webpack_require__(2914);__webpack_require__(2915);__webpack_require__(2916);__webpack_require__(2917);__webpack_require__(2918);__webpack_require__(2919);__webpack_require__(2920);__webpack_require__(2921);__webpack_require__(2922);__webpack_require__(2923);__webpack_require__(808);__webpack_require__(2924);__webpack_require__(2949);__webpack_require__(2950);__webpack_require__(2961)},,function(module,exports,__webpack_require__){"use strict";var _dev_tools=__webpack_require__(412);_dev_tools.DevToolsRegistryProvider.register(function(){return{order:1,name:"console",display:"Console",url:"#/dev_tools/console"}})},,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.hideEmptyDevTools=hideEmptyDevTools;var _modules=__webpack_require__(2);var _chrome=__webpack_require__(8);var _chrome2=_interopRequireDefault(_chrome);var _dev_tools=__webpack_require__(412);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function hideEmptyDevTools(Private){var hasTools=!!Private(_dev_tools.DevToolsRegistryProvider).length;if(!hasTools){var navLink=_chrome2.default.getNavLinkById("kibana:dev_tools");navLink.hidden=true}}_modules.uiModules.get("kibana").run(hideEmptyDevTools)},,,,,,,function(module,exports,__webpack_require__){"use strict";var _panel=__webpack_require__(2925);var _panel2=_interopRequireDefault(_panel);var _panel_registry=__webpack_require__(808);var _panel_registry2=_interopRequireDefault(_panel_registry);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_panel_registry2.default.register(function timeChartProvider(Private){return new _panel2.default("timechart",Private(__webpack_require__(2926))())})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=Panel;function Panel(name,config){this.name=name;this.help=config.help||"";this.render=config.render;if(!config.render)throw new Error("Panel must have a rendering function")}module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=timechartFn;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _jquery=__webpack_require__(13);var _jquery2=_interopRequireDefault(_jquery);var _momentTimezone=__webpack_require__(126);var _momentTimezone2=_interopRequireDefault(_momentTimezone);var _observe_resize=__webpack_require__(2929);var _observe_resize2=_interopRequireDefault(_observe_resize);var _lib=__webpack_require__(2930);var _timefilter=__webpack_require__(14);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}__webpack_require__(2937);__webpack_require__(2945);var DEBOUNCE_DELAY=50;function timechartFn(Private,config,$rootScope,$compile){return function(){return{help:"Draw a timeseries chart",render:function render($scope,$elem){var template='<div class="chart-top-title"></div><div class="chart-canvas"></div>';var tickFormatters=__webpack_require__(2946)();var getxAxisFormatter=Private(__webpack_require__(2947));var generateTicks=Private(__webpack_require__(2948));_momentTimezone2.default.tz.setDefault(config.get("dateFormat:tz"));var render=$scope.seriesList.render||{};$scope.chart=$scope.seriesList.list;$scope.interval=$scope.interval;$scope.search=$scope.search||_lodash2.default.noop;var legendValueNumbers=void 0;var legendCaption=void 0;var debouncedSetLegendNumbers=_lodash2.default.debounce(setLegendNumbers,DEBOUNCE_DELAY,{maxWait:DEBOUNCE_DELAY,leading:true,trailing:false});var emptyCaption="<br>";var defaultOptions={xaxis:{mode:"time",tickLength:5,timezone:"browser"},selection:{mode:"x",color:"#ccc"},crosshair:{mode:"x",color:"#C66",lineWidth:2},grid:{show:render.grid,borderWidth:0,borderColor:null,margin:10,hoverable:true,autoHighlight:false},legend:{backgroundColor:null,position:"nw",labelBoxBorderColor:"rgb(255,255,255,0)",labelFormatter:function labelFormatter(label,series){var wrapperSpan=document.createElement("span");var labelSpan=document.createElement("span");var numberSpan=document.createElement("span");wrapperSpan.setAttribute("class","ngLegendValue");wrapperSpan.setAttribute("kbn-accessible-click","");wrapperSpan.setAttribute("ng-click","toggleSeries("+series._id+")");wrapperSpan.setAttribute("ng-focus","focusSeries("+series._id+")");wrapperSpan.setAttribute("ng-mouseover","highlightSeries("+series._id+")");labelSpan.setAttribute("ng-non-bindable","");labelSpan.appendChild(document.createTextNode(label));numberSpan.setAttribute("class","ngLegendValueNumber");wrapperSpan.appendChild(labelSpan);wrapperSpan.appendChild(numberSpan);return wrapperSpan.outerHTML}},colors:["#01A4A4","#C66","#D0D102","#616161","#00A1CB","#32742C","#F18D05","#113F8C","#61AE24","#D70060"]};var originalColorMap=new Map;$scope.chart.forEach(function(series,seriesIndex){if(!series.color){var colorIndex=seriesIndex%defaultOptions.colors.length;series.color=defaultOptions.colors[colorIndex]}originalColorMap.set(series,series.color)});var highlightedSeries=void 0;var focusedSeries=void 0;function unhighlightSeries(){if(null===highlightedSeries)return;highlightedSeries=null;focusedSeries=null;$scope.chart.forEach(function(series){series.color=originalColorMap.get(series)});drawPlot($scope.chart)}$scope.highlightSeries=_lodash2.default.debounce(function(id){if(highlightedSeries===id)return;highlightedSeries=id;$scope.chart.forEach(function(series,seriesIndex){series.color=seriesIndex!==id?"rgba(128,128,128,0.1)":originalColorMap.get(series)});drawPlot($scope.chart)},DEBOUNCE_DELAY);$scope.focusSeries=function(id){focusedSeries=id;$scope.highlightSeries(id)};$scope.toggleSeries=function(id){var series=$scope.chart[id];series._hide=!series._hide;drawPlot($scope.chart)};var cancelResize=(0,_observe_resize2.default)($elem,function(){drawPlot($scope.chart)});$scope.$on("$destroy",function(){cancelResize();$elem.off("plothover");$elem.off("plotselected");$elem.off("mouseleave")});$elem.on("plothover",function(event,pos,item){$rootScope.$broadcast("timelionPlotHover",event,pos,item)});$elem.on("plotselected",function(event,ranges){_timefilter.timefilter.setTime({from:(0,_momentTimezone2.default)(ranges.xaxis.from),to:(0,_momentTimezone2.default)(ranges.xaxis.to),mode:"absolute"})});$elem.on("mouseleave",function(){$rootScope.$broadcast("timelionPlotLeave")});$scope.$on("timelionPlotHover",function(angularEvent,flotEvent,pos){if(!$scope.plot)return;$scope.plot.setCrosshair(pos);debouncedSetLegendNumbers(pos)});$scope.$on("timelionPlotLeave",function(){if(!$scope.plot)return;$scope.plot.clearCrosshair();clearLegendNumbers()});function setLegendNumbers(pos){unhighlightSeries();var plot=$scope.plot;var axes=plot.getAxes();if(pos.x<axes.xaxis.min||pos.x>axes.xaxis.max)return;var i=void 0;var j=void 0;var dataset=plot.getData();legendCaption&&legendCaption.text((0,_momentTimezone2.default)(pos.x).format(_lodash2.default.get(dataset,"[0]._global.legend.timeFormat",_lib.DEFAULT_TIME_FORMAT)));for(i=0;i<dataset.length;++i){var series=dataset[i];var precision=_lodash2.default.get(series,"_meta.precision",2);if(series._hide)continue;for(j=0;j<series.data.length;++j)if(series.data[j][0]>pos.x)break;var y=void 0;try{y=series.data[j][1]}catch(e){y=null}if(null!=y){var label=y.toFixed(precision);series.yaxis.tickFormatter&&(label=series.yaxis.tickFormatter(label,series.yaxis));legendValueNumbers.eq(i).text("("+label+")")}else legendValueNumbers.eq(i).empty()}}function clearLegendNumbers(){legendCaption&&legendCaption.html(emptyCaption);_lodash2.default.each(legendValueNumbers,function(num){(0,_jquery2.default)(num).empty()})}var legendScope=$scope.$new();function drawPlot(plotConfig){(0,_jquery2.default)(".chart-canvas",$elem).length||$elem.html(template);var canvasElem=(0,_jquery2.default)(".chart-canvas",$elem);if(0===canvasElem.height()||0===canvasElem.width())return;var title=(0,_lodash2.default)(plotConfig).map("_title").compact().last();(0,_jquery2.default)(".chart-top-title",$elem).text(null==title?"":title);var options=_lodash2.default.cloneDeep(defaultOptions);var time=_timefilter.timefilter.getBounds();var interval=(0,_lib.calculateInterval)(time.min.valueOf(),time.max.valueOf(),config.get("timelion:target_buckets")||200,$scope.interval,config.get("timelion:min_interval")||"1ms");var format=getxAxisFormatter(interval);options.xaxis.tickFormatter=function(val){return(0,_momentTimezone2.default)(val).format(format)};var tickLetterWidth=7;var tickPadding=45;options.xaxis.ticks=Math.floor($elem.width()/(format.length*tickLetterWidth+tickPadding));var series=_lodash2.default.map(plotConfig,function(series,index){series=_lodash2.default.cloneDeep(_lodash2.default.defaults(series,{shadowSize:0,lines:{lineWidth:3}}));series._id=index;if(series.color){var span=document.createElement("span");span.style.color=series.color;series.color=span.style.color}if(series._hide){series.data=[];series.stack=false;series.label="(hidden) "+series.label}series._global&&_lodash2.default.merge(options,series._global,function(objVal,srcVal){if(null==objVal)return srcVal;if(null==srcVal)return objVal});return series});options.yaxes&&options.yaxes.forEach(function(yaxis){if(yaxis&&yaxis.units){yaxis.tickFormatter=tickFormatters[yaxis.units.type];var byteModes=["bytes","bytes/s"];byteModes.includes(yaxis.units.type)&&(yaxis.tickGenerator=generateTicks)}});$scope.plot=_jquery2.default.plot(canvasElem,_lodash2.default.compact(series),options);$scope.plot&&$scope.$emit("timelionChartRendered");legendScope.$destroy();legendScope=$scope.$new();legendValueNumbers=canvasElem.find(".ngLegendValueNumber");_lodash2.default.each(canvasElem.find(".ngLegendValue"),function(elem){$compile(elem)(legendScope)});if(_lodash2.default.get($scope.plot.getData(),"[0]._global.legend.showTime",true)){legendCaption=(0,_jquery2.default)('<caption class="timelionLegendCaption"></caption>');legendCaption.html(emptyCaption);canvasElem.find("div.legend table").append(legendCaption);if(focusedSeries||0===focusedSeries){var $legendLabels=canvasElem.find("div.legend table .legendLabel>span");$legendLabels.get(focusedSeries).focus()}}}$scope.$watch("chart",drawPlot)}}}}module.exports=exports["default"]},,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function($elem,fn,frequency){frequency=frequency||500;var currentHeight=$elem.height();var currentWidth=$elem.width();var timeout=void 0;function checkLoop(){timeout=setTimeout(function(){if(currentHeight!==$elem.height()||currentWidth!==$elem.width()){currentHeight=$elem.height();currentWidth=$elem.width();currentWidth>0&&currentWidth>0&&fn()}checkLoop()},frequency)}checkLoop();return function(){clearTimeout(timeout)}};module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _calculate_interval=__webpack_require__(2931);Object.defineProperty(exports,"calculateInterval",{enumerable:true,get:function get(){return _calculate_interval.calculateInterval}});exports.DEFAULT_TIME_FORMAT="MMMM Do YYYY, HH:mm:ss.SSS"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.calculateInterval=calculateInterval;var _to_milliseconds=__webpack_require__(2932);var _to_milliseconds2=_interopRequireDefault(_to_milliseconds);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function roundInterval(interval){switch(true){case interval<=500:return"100ms";case interval<=5e3:return"1s";case interval<=7500:return"5s";case interval<=15e3:return"10s";case interval<=45e3:return"30s";case interval<=18e4:return"1m";case interval<=45e4:return"5m";case interval<=12e5:return"10m";case interval<=27e5:return"30m";case interval<=72e5:return"1h";case interval<=216e5:return"3h";case interval<=864e5:return"12h";case interval<=6048e5:return"24h";case interval<=18144e5:return"1w";case interval<36288e5:return"30d";default:return"1y"}}function calculateInterval(from,to,size,interval,min){if("auto"!==interval)return interval;var dateMathInterval=roundInterval((to-from)/size);if((0,_to_milliseconds2.default)(dateMathInterval)<(0,_to_milliseconds2.default)(min))return min;return dateMathInterval}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(expr){var match=expr.match(parseRE);if(match){if("M"===match[2]&&"1"!==match[1])throw new Error("Invalid interval. 1M is only valid monthly interval.");return parseFloat(match[1]||1)*vals[match[2]]}};var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _moment=__webpack_require__(10);var _moment2=_interopRequireDefault(_moment);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var vals=_lodash2.default.transform([["ms","milliseconds","millisecond"],["s","seconds","second","sec"],["m","minutes","minute","min"],["h","hours","hour"],["d","days","day"],["w","weeks","week"],["M","months","month"],["quarter"],["y","years","year"]],function(vals,units){var normal=_moment2.default.normalizeUnits(units[0]);var val=_moment2.default.duration(1,normal).asMilliseconds();[].concat(normal,units).forEach(function(unit){vals[unit]=val})},{});var parseRE=new RegExp("^(\\d+(?:\\.\\d*)?)?\\s*("+_lodash2.default.keys(vals).join("|")+")$");module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.registerTimefilterWithGlobalState=exports.timefilter=void 0;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _moment=__webpack_require__(10);var _moment2=_interopRequireDefault(_moment);var _get_time=__webpack_require__(809);var _parse_querystring=__webpack_require__(2934);var _simple_emitter=__webpack_require__(588);var _routes=__webpack_require__(12);var _routes2=_interopRequireDefault(_routes);var _chrome=__webpack_require__(8);var _chrome2=_interopRequireDefault(_chrome);var _diff_time_picker_vals=__webpack_require__(2935);var _time_history=__webpack_require__(1267);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var Timefilter=function(_SimpleEmitter){_inherits(Timefilter,_SimpleEmitter);function Timefilter(){_classCallCheck(this,Timefilter);var _this=_possibleConstructorReturn(this,(Timefilter.__proto__||Object.getPrototypeOf(Timefilter)).call(this));_this.getTime=function(){return _lodash2.default.clone(_this._time)};_this.setTime=function(time){var newTime=Object.assign(_this.getTime(),time);if((0,_diff_time_picker_vals.areTimePickerValsDifferent)(_this.getTime(),newTime)){_this._time={from:newTime.from,to:newTime.to,mode:newTime.mode};_time_history.timeHistory.add(_this._time);_this.emit("timeUpdate");_this.emit("fetch")}};_this.getRefreshInterval=function(){return _lodash2.default.clone(_this._refreshInterval)};_this.setRefreshInterval=function(refreshInterval){var newRefreshInterval=Object.assign(_this.getRefreshInterval(),refreshInterval);if(newRefreshInterval.value<=0){newRefreshInterval.value=0;newRefreshInterval.pause=true}if((0,_diff_time_picker_vals.areTimePickerValsDifferent)(_this.getRefreshInterval(),newRefreshInterval)){_this._refreshInterval={value:newRefreshInterval.value,pause:newRefreshInterval.pause};_this.emit("refreshIntervalUpdate");newRefreshInterval.pause||0===newRefreshInterval.value||_this.emit("fetch")}};_this.toggleRefresh=function(){_this.setRefreshInterval({pause:!_this._refreshInterval.pause})};_this.createFilter=function(indexPattern,timeRange){return(0,_get_time.getTime)(indexPattern,timeRange||_this._time,_this.getForceNow())};_this.getBounds=function(){return _this.calculateBounds(_this._time)};_this.getForceNow=function(){var forceNow=(0,_parse_querystring.parseQueryString)().forceNow;if(!forceNow)return;var ticks=Date.parse(forceNow);if(isNaN(ticks))throw new Error("forceNow query parameter, "+forceNow+", can't be parsed by Date.parse");return new Date(ticks)};_this.calculateBounds=function(timeRange){return(0,_get_time.calculateBounds)(timeRange,{forceNow:_this.getForceNow()})};_this.getActiveBounds=function(){if(_this.isTimeRangeSelectorEnabled)return _this.getBounds()};_this.enableTimeRangeSelector=function(){_this.isTimeRangeSelectorEnabled=true;_this.emit("enabledUpdated")};_this.disableTimeRangeSelector=function(){_this.isTimeRangeSelectorEnabled=false;_this.emit("enabledUpdated")};_this.enableAutoRefreshSelector=function(){_this.isAutoRefreshSelectorEnabled=true;_this.emit("enabledUpdated")};_this.disableAutoRefreshSelector=function(){_this.isAutoRefreshSelectorEnabled=false;_this.emit("enabledUpdated")};_this.isTimeRangeSelectorEnabled=false;_this.isAutoRefreshSelectorEnabled=false;_this._time=_chrome2.default.getUiSettingsClient().get("timepicker:timeDefaults");_this._refreshInterval=_chrome2.default.getUiSettingsClient().get("timepicker:refreshIntervalDefaults");return _this}return Timefilter}(_simple_emitter.SimpleEmitter);var timefilter=exports.timefilter=new Timefilter;function convertISO8601(stringTime){var obj=(0,_moment2.default)(stringTime,"YYYY-MM-DDTHH:mm:ss.SSSZ",true);return obj.isValid()?obj:stringTime}var registerTimefilterWithGlobalState=exports.registerTimefilterWithGlobalState=_lodash2.default.once(function(globalState,$rootScope){var uiSettings=_chrome2.default.getUiSettingsClient();var timeDefaults=uiSettings.get("timepicker:timeDefaults");var refreshIntervalDefaults=uiSettings.get("timepicker:refreshIntervalDefaults");timefilter.setTime(_lodash2.default.defaults(globalState.time||{},timeDefaults));timefilter.setRefreshInterval(_lodash2.default.defaults(globalState.refreshInterval||{},refreshIntervalDefaults));globalState.on("fetch_with_changes",function(){var newTime=_lodash2.default.defaults({},globalState.time,timeDefaults);var newRefreshInterval=_lodash2.default.defaults({},globalState.refreshInterval,refreshIntervalDefaults);if(newTime){newTime.to&&(newTime.to=convertISO8601(newTime.to));newTime.from&&(newTime.from=convertISO8601(newTime.from))}timefilter.setTime(newTime);timefilter.setRefreshInterval(newRefreshInterval)});var updateGlobalStateWithTime=function updateGlobalStateWithTime(){globalState.time=timefilter.getTime();globalState.refreshInterval=timefilter.getRefreshInterval();globalState.save()};$rootScope.$listenAndDigestAsync(timefilter,"refreshIntervalUpdate",updateGlobalStateWithTime);$rootScope.$listenAndDigestAsync(timefilter,"timeUpdate",updateGlobalStateWithTime)});_routes2.default.addSetupWork(function(globalState,$rootScope){return registerTimefilterWithGlobalState(globalState,$rootScope)})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.parseQueryString=parseQueryString;var _querystring=__webpack_require__(397);var _querystring2=_interopRequireDefault(_querystring);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function parseQueryString(){var hrefSplit=window.location.href.split("?");if(hrefSplit.length<=1)return{};return _querystring2.default.parse(hrefSplit[1])}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.areTimePickerValsDifferent=areTimePickerValsDifferent;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var valueOf=function valueOf(o){if(o)return o.valueOf()};function areTimePickerValsDifferent(rangeA,rangeB){if(!_lodash2.default.isObject(rangeA)||!_lodash2.default.isObject(rangeB))return!_lodash2.default.isEqual(rangeA,rangeB);if(valueOf(rangeA.to)!==valueOf(rangeB.to)||valueOf(rangeA.from)!==valueOf(rangeB.from)||valueOf(rangeA.value)!==valueOf(rangeB.value)||valueOf(rangeA.pause)!==valueOf(rangeB.pause))return true;return false}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.recentlyAccessed=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _=__webpack_require__(250);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var RecentlyAccessed=function(){function RecentlyAccessed(){_classCallCheck(this,RecentlyAccessed);var historyOptions={maxLength:20,filterDuplicates:true,isDuplicate:function isDuplicate(oldItem,newItem){return oldItem.id===newItem.id}};this.history=new _.PersistedLog("kibana.history.recentlyAccessed",historyOptions)}_createClass(RecentlyAccessed,[{key:"add",value:function add(link,label,id){var historyItem={link:link,label:label,id:id};this.history.add(historyItem)}},{key:"get",value:function get(){return this.history.get()}}]);return RecentlyAccessed}();exports.recentlyAccessed=new RecentlyAccessed},function(module,exports,__webpack_require__){"use strict";__webpack_require__(2938);__webpack_require__(2939);__webpack_require__(2940);__webpack_require__(2941);__webpack_require__(2942);__webpack_require__(2943);__webpack_require__(2944)},function(module,exports){(function($){$.color={};$.color.make=function(r,g,b,a){var o={};o.r=r||0;o.g=g||0;o.b=b||0;o.a=null!=a?a:1;o.add=function(c,d){for(var i=0;i<c.length;++i)o[c.charAt(i)]+=d;return o.normalize()};o.scale=function(c,f){for(var i=0;i<c.length;++i)o[c.charAt(i)]*=f;return o.normalize()};o.toString=function(){return o.a>=1?"rgb("+[o.r,o.g,o.b].join(",")+")":"rgba("+[o.r,o.g,o.b,o.a].join(",")+")"};o.normalize=function(){function clamp(min,value,max){return value<min?min:value>max?max:value}o.r=clamp(0,parseInt(o.r),255);o.g=clamp(0,parseInt(o.g),255);o.b=clamp(0,parseInt(o.b),255);o.a=clamp(0,o.a,1);return o};o.clone=function(){return $.color.make(o.r,o.b,o.g,o.a)};return o.normalize()};$.color.extract=function(elem,css){var c;do{c=elem.css(css).toLowerCase();if(""!=c&&"transparent"!=c)break;elem=elem.parent()}while(elem.length&&!$.nodeName(elem.get(0),"body"));"rgba(0, 0, 0, 0)"==c&&(c="transparent");return $.color.parse(c)};$.color.parse=function(str){var res,m=$.color.make;if(res=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(str))return m(parseInt(res[1],10),parseInt(res[2],10),parseInt(res[3],10));if(res=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(str))return m(parseInt(res[1],10),parseInt(res[2],10),parseInt(res[3],10),parseFloat(res[4]));if(res=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(str))return m(2.55*parseFloat(res[1]),2.55*parseFloat(res[2]),2.55*parseFloat(res[3]));if(res=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(str))return m(2.55*parseFloat(res[1]),2.55*parseFloat(res[2]),2.55*parseFloat(res[3]),parseFloat(res[4]));if(res=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(str))return m(parseInt(res[1],16),parseInt(res[2],16),parseInt(res[3],16));if(res=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(str))return m(parseInt(res[1]+res[1],16),parseInt(res[2]+res[2],16),parseInt(res[3]+res[3],16));var name=$.trim(str).toLowerCase();if("transparent"==name)return m(255,255,255,0);res=lookupColors[name]||[0,0,0];return m(res[0],res[1],res[2])};var lookupColors={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery);(function($){var hasOwnProperty=Object.prototype.hasOwnProperty;$.fn.detach||($.fn.detach=function(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})});function Canvas(cls,container){var element=container.children("."+cls)[0];if(null==element){element=document.createElement("canvas");element.className=cls;$(element).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(container);if(!element.getContext){if(!window.G_vmlCanvasManager)throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");element=window.G_vmlCanvasManager.initElement(element)}}this.element=element;var context=this.context=element.getContext("2d");var devicePixelRatio=window.devicePixelRatio||1,backingStoreRatio=context.webkitBackingStorePixelRatio||context.mozBackingStorePixelRatio||context.msBackingStorePixelRatio||context.oBackingStorePixelRatio||context.backingStorePixelRatio||1;this.pixelRatio=devicePixelRatio/backingStoreRatio;this.resize(container.width(),container.height());this.textContainer=null;this.text={};this._textCache={}}Canvas.prototype.resize=function(width,height){if(width<=0||height<=0)throw new Error("Invalid dimensions for plot, width = "+width+", height = "+height);var element=this.element,context=this.context,pixelRatio=this.pixelRatio;if(this.width!=width){element.width=width*pixelRatio;element.style.width=width+"px";this.width=width}if(this.height!=height){element.height=height*pixelRatio;element.style.height=height+"px";this.height=height}context.restore();context.save();context.scale(pixelRatio,pixelRatio)};Canvas.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)};Canvas.prototype.render=function(){var cache=this._textCache;for(var layerKey in cache)if(hasOwnProperty.call(cache,layerKey)){var layer=this.getTextLayer(layerKey),layerCache=cache[layerKey];layer.hide();for(var styleKey in layerCache)if(hasOwnProperty.call(layerCache,styleKey)){var styleCache=layerCache[styleKey];for(var key in styleCache)if(hasOwnProperty.call(styleCache,key)){var positions=styleCache[key].positions;for(var position,i=0;position=positions[i];i++)if(position.active){if(!position.rendered){layer.append(position.element);position.rendered=true}}else{positions.splice(i--,1);position.rendered&&position.element.detach()}0==positions.length&&delete styleCache[key]}}layer.show()}};Canvas.prototype.getTextLayer=function(classes){var layer=this.text[classes];if(null==layer){null==this.textContainer&&(this.textContainer=$("<div class='flot-text'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element));layer=this.text[classes]=$("<div></div>").addClass(classes).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)}return layer};Canvas.prototype.getTextInfo=function(layer,text,font,angle,width){var textStyle,layerCache,styleCache,info;text=""+text;textStyle="object"===typeof font?font.style+" "+font.variant+" "+font.weight+" "+font.size+"px/"+font.lineHeight+"px "+font.family:font;layerCache=this._textCache[layer];null==layerCache&&(layerCache=this._textCache[layer]={});styleCache=layerCache[textStyle];null==styleCache&&(styleCache=layerCache[textStyle]={});info=styleCache[text];if(null==info){var element=$("<div></div>").html(text).css({position:"absolute","max-width":width,top:-9999}).appendTo(this.getTextLayer(layer));"object"===typeof font?element.css({font:textStyle,color:font.color}):"string"===typeof font&&element.addClass(font);info=styleCache[text]={width:element.outerWidth(true),height:element.outerHeight(true),element:element,positions:[]};element.detach()}return info};Canvas.prototype.addText=function(layer,x,y,text,font,angle,width,halign,valign){var info=this.getTextInfo(layer,text,font,angle,width),positions=info.positions;"center"==halign?x-=info.width/2:"right"==halign&&(x-=info.width);"middle"==valign?y-=info.height/2:"bottom"==valign&&(y-=info.height);for(var position,i=0;position=positions[i];i++)if(position.x==x&&position.y==y){position.active=true;return}position={active:true,rendered:false,element:positions.length?info.element.clone():info.element,x:x,y:y};positions.push(position);position.element.css({top:Math.round(y),left:Math.round(x),"text-align":halign})};Canvas.prototype.removeText=function(layer,x,y,text,font,angle){if(null==text){var layerCache=this._textCache[layer];if(null!=layerCache)for(var styleKey in layerCache)if(hasOwnProperty.call(layerCache,styleKey)){var styleCache=layerCache[styleKey];for(var key in styleCache)if(hasOwnProperty.call(styleCache,key)){var positions=styleCache[key].positions;for(var i=0;position=positions[i];i++)position.active=false}}}else{positions=this.getTextInfo(layer,text,font,angle).positions;var position;for(i=0;position=positions[i];i++)position.x==x&&position.y==y&&(position.active=false)}};function Plot(placeholder,data_,options_,plugins){var series=[],options={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:true,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:false,radius:3,lineWidth:2,fill:true,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:false,fillColor:null,steps:false},bars:{show:false,lineWidth:2,barWidth:1,fill:true,fillColor:null,align:"left",horizontal:false,zero:true},shadowSize:3,highlightColor:null},grid:{show:true,aboveData:false,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:false,hoverable:false,autoHighlight:true,mouseActiveRadius:10},interaction:{redrawOverlayInterval:1e3/60},hooks:{}},surface=null,overlay=null,eventHolder=null,ctx=null,octx=null,xaxes=[],yaxes=[],plotOffset={left:0,right:0,top:0,bottom:0},plotWidth=0,plotHeight=0,hooks={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},plot=this;plot.setData=setData;plot.setupGrid=setupGrid;plot.draw=draw;plot.getPlaceholder=function(){return placeholder};plot.getCanvas=function(){return surface.element};plot.getPlotOffset=function(){return plotOffset};plot.width=function(){return plotWidth};plot.height=function(){return plotHeight};plot.offset=function(){var o=eventHolder.offset();o.left+=plotOffset.left;o.top+=plotOffset.top;return o};plot.getData=function(){return series};plot.getAxes=function(){var res={};$.each(xaxes.concat(yaxes),function(_,axis){axis&&(res[axis.direction+(1!=axis.n?axis.n:"")+"axis"]=axis)});return res};plot.getXAxes=function(){return xaxes};plot.getYAxes=function(){return yaxes};plot.c2p=canvasToAxisCoords;plot.p2c=axisToCanvasCoords;plot.getOptions=function(){return options};plot.highlight=highlight;plot.unhighlight=unhighlight;plot.triggerRedrawOverlay=triggerRedrawOverlay;plot.pointOffset=function(point){return{left:parseInt(xaxes[axisNumber(point,"x")-1].p2c(+point.x)+plotOffset.left,10),top:parseInt(yaxes[axisNumber(point,"y")-1].p2c(+point.y)+plotOffset.top,10)}};plot.shutdown=shutdown;plot.destroy=function(){shutdown();placeholder.removeData("plot").empty();series=[];options=null;surface=null;overlay=null;eventHolder=null;ctx=null;octx=null;xaxes=[];yaxes=[];hooks=null;highlights=[];plot=null};plot.resize=function(){var width=placeholder.width(),height=placeholder.height();surface.resize(width,height);overlay.resize(width,height)};plot.hooks=hooks;initPlugins(plot);parseOptions(options_);setupCanvases();setData(data_);setupGrid();draw();bindEvents();function executeHooks(hook,args){args=[plot].concat(args);for(var i=0;i<hook.length;++i)hook[i].apply(this,args)}function initPlugins(){var classes={Canvas:Canvas};for(var i=0;i<plugins.length;++i){var p=plugins[i];p.init(plot,classes);p.options&&$.extend(true,options,p.options)}}function parseOptions(opts){$.extend(true,options,opts);opts&&opts.colors&&(options.colors=opts.colors);null==options.xaxis.color&&(options.xaxis.color=$.color.parse(options.grid.color).scale("a",.22).toString());null==options.yaxis.color&&(options.yaxis.color=$.color.parse(options.grid.color).scale("a",.22).toString());null==options.xaxis.tickColor&&(options.xaxis.tickColor=options.grid.tickColor||options.xaxis.color);null==options.yaxis.tickColor&&(options.yaxis.tickColor=options.grid.tickColor||options.yaxis.color);null==options.grid.borderColor&&(options.grid.borderColor=options.grid.color);null==options.grid.tickColor&&(options.grid.tickColor=$.color.parse(options.grid.color).scale("a",.22).toString());var i,axisOptions,axisCount,fontSize=placeholder.css("font-size"),fontSizeDefault=fontSize?+fontSize.replace("px",""):13,fontDefaults={style:placeholder.css("font-style"),size:Math.round(.8*fontSizeDefault),variant:placeholder.css("font-variant"),weight:placeholder.css("font-weight"),family:placeholder.css("font-family")};axisCount=options.xaxes.length||1;for(i=0;i<axisCount;++i){axisOptions=options.xaxes[i];axisOptions&&!axisOptions.tickColor&&(axisOptions.tickColor=axisOptions.color);axisOptions=$.extend(true,{},options.xaxis,axisOptions);options.xaxes[i]=axisOptions;if(axisOptions.font){axisOptions.font=$.extend({},fontDefaults,axisOptions.font);axisOptions.font.color||(axisOptions.font.color=axisOptions.color);axisOptions.font.lineHeight||(axisOptions.font.lineHeight=Math.round(1.15*axisOptions.font.size))}}axisCount=options.yaxes.length||1;for(i=0;i<axisCount;++i){axisOptions=options.yaxes[i];axisOptions&&!axisOptions.tickColor&&(axisOptions.tickColor=axisOptions.color);axisOptions=$.extend(true,{},options.yaxis,axisOptions);options.yaxes[i]=axisOptions;if(axisOptions.font){axisOptions.font=$.extend({},fontDefaults,axisOptions.font);axisOptions.font.color||(axisOptions.font.color=axisOptions.color);axisOptions.font.lineHeight||(axisOptions.font.lineHeight=Math.round(1.15*axisOptions.font.size))}}options.xaxis.noTicks&&null==options.xaxis.ticks&&(options.xaxis.ticks=options.xaxis.noTicks);options.yaxis.noTicks&&null==options.yaxis.ticks&&(options.yaxis.ticks=options.yaxis.noTicks);if(options.x2axis){options.xaxes[1]=$.extend(true,{},options.xaxis,options.x2axis);options.xaxes[1].position="top";null==options.x2axis.min&&(options.xaxes[1].min=null);null==options.x2axis.max&&(options.xaxes[1].max=null)}if(options.y2axis){options.yaxes[1]=$.extend(true,{},options.yaxis,options.y2axis);options.yaxes[1].position="right";null==options.y2axis.min&&(options.yaxes[1].min=null);null==options.y2axis.max&&(options.yaxes[1].max=null)}options.grid.coloredAreas&&(options.grid.markings=options.grid.coloredAreas);options.grid.coloredAreasColor&&(options.grid.markingsColor=options.grid.coloredAreasColor);options.lines&&$.extend(true,options.series.lines,options.lines);options.points&&$.extend(true,options.series.points,options.points);options.bars&&$.extend(true,options.series.bars,options.bars);null!=options.shadowSize&&(options.series.shadowSize=options.shadowSize);null!=options.highlightColor&&(options.series.highlightColor=options.highlightColor);for(i=0;i<options.xaxes.length;++i)getOrCreateAxis(xaxes,i+1).options=options.xaxes[i];for(i=0;i<options.yaxes.length;++i)getOrCreateAxis(yaxes,i+1).options=options.yaxes[i];for(var n in hooks)options.hooks[n]&&options.hooks[n].length&&(hooks[n]=hooks[n].concat(options.hooks[n]));executeHooks(hooks.processOptions,[options])}function setData(d){series=parseData(d);fillInSeriesOptions();processData()}function parseData(d){var res=[];for(var i=0;i<d.length;++i){var s=$.extend(true,{},options.series);if(null!=d[i].data){s.data=d[i].data;delete d[i].data;$.extend(true,s,d[i]);d[i].data=s.data}else s.data=d[i];res.push(s)}return res}function axisNumber(obj,coord){var a=obj[coord+"axis"];"object"==typeof a&&(a=a.n);"number"!=typeof a&&(a=1);return a}function allAxes(){return $.grep(xaxes.concat(yaxes),function(a){return a})}function canvasToAxisCoords(pos){var i,axis,res={};for(i=0;i<xaxes.length;++i){axis=xaxes[i];axis&&axis.used&&(res["x"+axis.n]=axis.c2p(pos.left))}for(i=0;i<yaxes.length;++i){axis=yaxes[i];axis&&axis.used&&(res["y"+axis.n]=axis.c2p(pos.top))}void 0!==res.x1&&(res.x=res.x1);void 0!==res.y1&&(res.y=res.y1);return res}function axisToCanvasCoords(pos){var i,axis,key,res={};for(i=0;i<xaxes.length;++i){axis=xaxes[i];if(axis&&axis.used){key="x"+axis.n;null==pos[key]&&1==axis.n&&(key="x");if(null!=pos[key]){res.left=axis.p2c(pos[key]);break}}}for(i=0;i<yaxes.length;++i){axis=yaxes[i];if(axis&&axis.used){key="y"+axis.n;null==pos[key]&&1==axis.n&&(key="y");if(null!=pos[key]){res.top=axis.p2c(pos[key]);break}}}return res}function getOrCreateAxis(axes,number){axes[number-1]||(axes[number-1]={n:number,direction:axes==xaxes?"x":"y",options:$.extend(true,{},axes==xaxes?options.xaxis:options.yaxis)});return axes[number-1]}function fillInSeriesOptions(){var i,neededColors=series.length,maxIndex=-1;for(i=0;i<series.length;++i){var sc=series[i].color;if(null!=sc){neededColors--;"number"==typeof sc&&sc>maxIndex&&(maxIndex=sc)}}neededColors<=maxIndex&&(neededColors=maxIndex+1);var c,colors=[],colorPool=options.colors,colorPoolSize=colorPool.length,variation=0;for(i=0;i<neededColors;i++){c=$.color.parse(colorPool[i%colorPoolSize]||"#666");i%colorPoolSize==0&&i&&(variation=variation>=0?variation<.5?-variation-.2:0:-variation);colors[i]=c.scale("rgb",1+variation)}var s,colori=0;for(i=0;i<series.length;++i){s=series[i];if(null==s.color){s.color=colors[colori].toString();++colori}else"number"==typeof s.color&&(s.color=colors[s.color].toString());if(null==s.lines.show){var v,show=true;for(v in s)if(s[v]&&s[v].show){show=false;break}show&&(s.lines.show=true)}null==s.lines.zero&&(s.lines.zero=!!s.lines.fill);s.xaxis=getOrCreateAxis(xaxes,axisNumber(s,"x"));s.yaxis=getOrCreateAxis(yaxes,axisNumber(s,"y"))}}function processData(){var i,j,k,m,s,points,ps,val,f,p,data,format,topSentry=Number.POSITIVE_INFINITY,bottomSentry=Number.NEGATIVE_INFINITY,fakeInfinity=Number.MAX_VALUE;function updateAxis(axis,min,max){min<axis.datamin&&min!=-fakeInfinity&&(axis.datamin=min);max>axis.datamax&&max!=fakeInfinity&&(axis.datamax=max)}$.each(allAxes(),function(_,axis){axis.datamin=topSentry;axis.datamax=bottomSentry;axis.used=false});for(i=0;i<series.length;++i){s=series[i];s.datapoints={points:[]};executeHooks(hooks.processRawData,[s,s.data,s.datapoints])}for(i=0;i<series.length;++i){s=series[i];data=s.data;format=s.datapoints.format;if(!format){format=[];format.push({x:true,number:true,required:true});format.push({y:true,number:true,required:true});if(s.bars.show||s.lines.show&&s.lines.fill){var autoscale=!!(s.bars.show&&s.bars.zero||s.lines.show&&s.lines.zero);format.push({y:true,number:true,required:false,defaultValue:0,autoscale:autoscale});if(s.bars.horizontal){delete format[format.length-1].y;format[format.length-1].x=true}}s.datapoints.format=format}if(null!=s.datapoints.pointsize)continue;s.datapoints.pointsize=format.length;ps=s.datapoints.pointsize;points=s.datapoints.points;var insertSteps=s.lines.show&&s.lines.steps;s.xaxis.used=s.yaxis.used=true;for(j=k=0;j<data.length;++j,k+=ps){p=data[j];var nullify=null==p;if(!nullify)for(m=0;m<ps;++m){val=p[m];f=format[m];if(f){if(f.number&&null!=val){val=+val;isNaN(val)?val=null:Infinity==val?val=fakeInfinity:-Infinity==val&&(val=-fakeInfinity)}if(null==val){f.required&&(nullify=true);null!=f.defaultValue&&(val=f.defaultValue)}}points[k+m]=val}if(nullify)for(m=0;m<ps;++m){val=points[k+m];if(null!=val){f=format[m];if(false!==f.autoscale){f.x&&updateAxis(s.xaxis,val,val);f.y&&updateAxis(s.yaxis,val,val)}}points[k+m]=null}else if(insertSteps&&k>0&&null!=points[k-ps]&&points[k-ps]!=points[k]&&points[k-ps+1]!=points[k+1]){for(m=0;m<ps;++m)points[k+ps+m]=points[k+m];points[k+1]=points[k-ps+1];k+=ps}}}for(i=0;i<series.length;++i){s=series[i];executeHooks(hooks.processDatapoints,[s,s.datapoints])}for(i=0;i<series.length;++i){s=series[i];points=s.datapoints.points;ps=s.datapoints.pointsize;format=s.datapoints.format;var xmin=topSentry,ymin=topSentry,xmax=bottomSentry,ymax=bottomSentry;for(j=0;j<points.length;j+=ps){if(null==points[j])continue;for(m=0;m<ps;++m){val=points[j+m];f=format[m];if(!f||false===f.autoscale||val==fakeInfinity||val==-fakeInfinity)continue;if(f.x){val<xmin&&(xmin=val);val>xmax&&(xmax=val)}if(f.y){val<ymin&&(ymin=val);val>ymax&&(ymax=val)}}}if(s.bars.show){var delta;switch(s.bars.align){case"left":delta=0;break;case"right":delta=-s.bars.barWidth;break;default:delta=-s.bars.barWidth/2}if(s.bars.horizontal){ymin+=delta;ymax+=delta+s.bars.barWidth}else{xmin+=delta;xmax+=delta+s.bars.barWidth}}updateAxis(s.xaxis,xmin,xmax);updateAxis(s.yaxis,ymin,ymax)}$.each(allAxes(),function(_,axis){axis.datamin==topSentry&&(axis.datamin=null);axis.datamax==bottomSentry&&(axis.datamax=null)})}function setupCanvases(){placeholder.css("padding",0).children().filter(function(){return!$(this).hasClass("flot-overlay")&&!$(this).hasClass("flot-base")}).remove();"static"==placeholder.css("position")&&placeholder.css("position","relative");surface=new Canvas("flot-base",placeholder);overlay=new Canvas("flot-overlay",placeholder);ctx=surface.context;octx=overlay.context;eventHolder=$(overlay.element).unbind();var existing=placeholder.data("plot");if(existing){existing.shutdown();overlay.clear()}placeholder.data("plot",plot)}function bindEvents(){if(options.grid.hoverable){eventHolder.mousemove(onMouseMove);eventHolder.bind("mouseleave",onMouseLeave)}options.grid.clickable&&eventHolder.click(onClick);executeHooks(hooks.bindEvents,[eventHolder])}function shutdown(){redrawTimeout&&clearTimeout(redrawTimeout);eventHolder.unbind("mousemove",onMouseMove);eventHolder.unbind("mouseleave",onMouseLeave);eventHolder.unbind("click",onClick);executeHooks(hooks.shutdown,[eventHolder])}function setTransformationHelpers(axis){function identity(x){return x}var s,m,t=axis.options.transform||identity,it=axis.options.inverseTransform;if("x"==axis.direction){s=axis.scale=plotWidth/Math.abs(t(axis.max)-t(axis.min));m=Math.min(t(axis.max),t(axis.min))}else{s=axis.scale=plotHeight/Math.abs(t(axis.max)-t(axis.min));s=-s;m=Math.max(t(axis.max),t(axis.min))}axis.p2c=t==identity?function(p){return(p-m)*s}:function(p){return(t(p)-m)*s};axis.c2p=it?function(c){return it(m+c/s)}:function(c){return m+c/s}}function measureTickLabels(axis){var opts=axis.options,ticks=axis.ticks||[],labelWidth=opts.labelWidth||0,labelHeight=opts.labelHeight||0,maxWidth=labelWidth||("x"==axis.direction?Math.floor(surface.width/(ticks.length||1)):null),legacyStyles=axis.direction+"Axis "+axis.direction+axis.n+"Axis",layer="flot-"+axis.direction+"-axis flot-"+axis.direction+axis.n+"-axis "+legacyStyles,font=opts.font||"flot-tick-label tickLabel";for(var i=0;i<ticks.length;++i){var t=ticks[i];if(!t.label)continue;var info=surface.getTextInfo(layer,t.label,font,null,maxWidth);labelWidth=Math.max(labelWidth,info.width);labelHeight=Math.max(labelHeight,info.height)}axis.labelWidth=opts.labelWidth||labelWidth;axis.labelHeight=opts.labelHeight||labelHeight}function allocateAxisBoxFirstPhase(axis){var lw=axis.labelWidth,lh=axis.labelHeight,pos=axis.options.position,isXAxis="x"===axis.direction,tickLength=axis.options.tickLength,axisMargin=options.grid.axisMargin,padding=options.grid.labelMargin,innermost=true,outermost=true,first=true,found=false;$.each(isXAxis?xaxes:yaxes,function(i,a){if(a&&(a.show||a.reserveSpace)){a===axis?found=true:a.options.position===pos&&(found?outermost=false:innermost=false);found||(first=false)}});outermost&&(axisMargin=0);null==tickLength&&(tickLength=first?"full":5);isNaN(+tickLength)||(padding+=+tickLength);if(isXAxis){lh+=padding;if("bottom"==pos){plotOffset.bottom+=lh+axisMargin;axis.box={top:surface.height-plotOffset.bottom,height:lh}}else{axis.box={top:plotOffset.top+axisMargin,height:lh};plotOffset.top+=lh+axisMargin}}else{lw+=padding;if("left"==pos){axis.box={left:plotOffset.left+axisMargin,width:lw};plotOffset.left+=lw+axisMargin}else{plotOffset.right+=lw+axisMargin;axis.box={left:surface.width-plotOffset.right,width:lw}}}axis.position=pos;axis.tickLength=tickLength;axis.box.padding=padding;axis.innermost=innermost}function allocateAxisBoxSecondPhase(axis){if("x"==axis.direction){axis.box.left=plotOffset.left-axis.labelWidth/2;axis.box.width=surface.width-plotOffset.left-plotOffset.right+axis.labelWidth}else{axis.box.top=plotOffset.top-axis.labelHeight/2;axis.box.height=surface.height-plotOffset.bottom-plotOffset.top+axis.labelHeight}}function adjustLayoutForThingsStickingOut(){var i,minMargin=options.grid.minBorderMargin;if(null==minMargin){minMargin=0;for(i=0;i<series.length;++i)minMargin=Math.max(minMargin,2*(series[i].points.radius+series[i].points.lineWidth/2))}var margins={left:minMargin,right:minMargin,top:minMargin,bottom:minMargin};$.each(allAxes(),function(_,axis){if(axis.reserveSpace&&axis.ticks&&axis.ticks.length)if("x"===axis.direction){margins.left=Math.max(margins.left,axis.labelWidth/2);margins.right=Math.max(margins.right,axis.labelWidth/2)}else{margins.bottom=Math.max(margins.bottom,axis.labelHeight/2);margins.top=Math.max(margins.top,axis.labelHeight/2)}});plotOffset.left=Math.ceil(Math.max(margins.left,plotOffset.left));plotOffset.right=Math.ceil(Math.max(margins.right,plotOffset.right));plotOffset.top=Math.ceil(Math.max(margins.top,plotOffset.top));plotOffset.bottom=Math.ceil(Math.max(margins.bottom,plotOffset.bottom))}function setupGrid(){var i,axes=allAxes(),showGrid=options.grid.show;for(var a in plotOffset){var margin=options.grid.margin||0;plotOffset[a]="number"==typeof margin?margin:margin[a]||0}executeHooks(hooks.processOffset,[plotOffset]);for(var a in plotOffset)"object"==typeof options.grid.borderWidth?plotOffset[a]+=showGrid?options.grid.borderWidth[a]:0:plotOffset[a]+=showGrid?options.grid.borderWidth:0;$.each(axes,function(_,axis){var axisOpts=axis.options;axis.show=null==axisOpts.show?axis.used:axisOpts.show;axis.reserveSpace=null==axisOpts.reserveSpace?axis.show:axisOpts.reserveSpace;setRange(axis)});if(showGrid){var allocatedAxes=$.grep(axes,function(axis){return axis.show||axis.reserveSpace});$.each(allocatedAxes,function(_,axis){setupTickGeneration(axis);setTicks(axis);snapRangeToTicks(axis,axis.ticks);measureTickLabels(axis)});for(i=allocatedAxes.length-1;i>=0;--i)allocateAxisBoxFirstPhase(allocatedAxes[i]);adjustLayoutForThingsStickingOut();$.each(allocatedAxes,function(_,axis){allocateAxisBoxSecondPhase(axis)})}plotWidth=surface.width-plotOffset.left-plotOffset.right;plotHeight=surface.height-plotOffset.bottom-plotOffset.top;$.each(axes,function(_,axis){setTransformationHelpers(axis)});showGrid&&drawAxisLabels();insertLegend()}function setRange(axis){var opts=axis.options,min=+(null!=opts.min?opts.min:axis.datamin),max=+(null!=opts.max?opts.max:axis.datamax),delta=max-min;if(0==delta){var widen=0==max?1:.01;null==opts.min&&(min-=widen);null!=opts.max&&null==opts.min||(max+=widen)}else{var margin=opts.autoscaleMargin;if(null!=margin){if(null==opts.min){min-=delta*margin;min<0&&null!=axis.datamin&&axis.datamin>=0&&(min=0)}if(null==opts.max){max+=delta*margin;max>0&&null!=axis.datamax&&axis.datamax<=0&&(max=0)}}}axis.min=min;axis.max=max}function setupTickGeneration(axis){var opts=axis.options;var noTicks;noTicks="number"==typeof opts.ticks&&opts.ticks>0?opts.ticks:.3*Math.sqrt("x"==axis.direction?surface.width:surface.height);var delta=(axis.max-axis.min)/noTicks,dec=-Math.floor(Math.log(delta)/Math.LN10),maxDec=opts.tickDecimals;null!=maxDec&&dec>maxDec&&(dec=maxDec);var size,magn=Math.pow(10,-dec),norm=delta/magn;if(norm<1.5)size=1;else if(norm<3){size=2;if(norm>2.25&&(null==maxDec||dec+1<=maxDec)){size=2.5;++dec}}else size=norm<7.5?5:10;size*=magn;null!=opts.minTickSize&&size<opts.minTickSize&&(size=opts.minTickSize);axis.delta=delta;axis.tickDecimals=Math.max(0,null!=maxDec?maxDec:dec);axis.tickSize=opts.tickSize||size;if("time"==opts.mode&&!axis.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");if(!axis.tickGenerator){axis.tickGenerator=function(axis){var prev,ticks=[],start=floorInBase(axis.min,axis.tickSize),i=0,v=Number.NaN;do{prev=v;v=start+i*axis.tickSize;ticks.push(v);++i}while(v<axis.max&&v!=prev);return ticks};axis.tickFormatter=function(value,axis){var factor=axis.tickDecimals?Math.pow(10,axis.tickDecimals):1;var formatted=""+Math.round(value*factor)/factor;if(null!=axis.tickDecimals){var decimal=formatted.indexOf(".");var precision=-1==decimal?0:formatted.length-decimal-1;if(precision<axis.tickDecimals)return(precision?formatted:formatted+".")+(""+factor).substr(1,axis.tickDecimals-precision)}return formatted}}$.isFunction(opts.tickFormatter)&&(axis.tickFormatter=function(v,axis){return""+opts.tickFormatter(v,axis)});if(null!=opts.alignTicksWithAxis){var otherAxis=("x"==axis.direction?xaxes:yaxes)[opts.alignTicksWithAxis-1];if(otherAxis&&otherAxis.used&&otherAxis!=axis){var niceTicks=axis.tickGenerator(axis);if(niceTicks.length>0){null==opts.min&&(axis.min=Math.min(axis.min,niceTicks[0]));null==opts.max&&niceTicks.length>1&&(axis.max=Math.max(axis.max,niceTicks[niceTicks.length-1]))}axis.tickGenerator=function(axis){var v,i,ticks=[];for(i=0;i<otherAxis.ticks.length;++i){v=(otherAxis.ticks[i].v-otherAxis.min)/(otherAxis.max-otherAxis.min);v=axis.min+v*(axis.max-axis.min);ticks.push(v)}return ticks};if(!axis.mode&&null==opts.tickDecimals){var extraDec=Math.max(0,1-Math.floor(Math.log(axis.delta)/Math.LN10)),ts=axis.tickGenerator(axis);ts.length>1&&/\..*0$/.test((ts[1]-ts[0]).toFixed(extraDec))||(axis.tickDecimals=extraDec)}}}}function setTicks(axis){var oticks=axis.options.ticks,ticks=[];null==oticks||"number"==typeof oticks&&oticks>0?ticks=axis.tickGenerator(axis):oticks&&(ticks=$.isFunction(oticks)?oticks(axis):oticks);var i,v;axis.ticks=[];for(i=0;i<ticks.length;++i){var label=null;var t=ticks[i];if("object"==typeof t){v=+t[0];t.length>1&&(label=t[1])}else v=+t;null==label&&(label=axis.tickFormatter(v,axis));isNaN(v)||axis.ticks.push({v:v,label:label})}}function snapRangeToTicks(axis,ticks){if(axis.options.autoscaleMargin&&ticks.length>0){null==axis.options.min&&(axis.min=Math.min(axis.min,ticks[0].v));null==axis.options.max&&ticks.length>1&&(axis.max=Math.max(axis.max,ticks[ticks.length-1].v))}}function draw(){surface.clear();executeHooks(hooks.drawBackground,[ctx]);var grid=options.grid;grid.show&&grid.backgroundColor&&drawBackground();grid.show&&!grid.aboveData&&drawGrid();for(var i=0;i<series.length;++i){executeHooks(hooks.drawSeries,[ctx,series[i]]);drawSeries(series[i])}executeHooks(hooks.draw,[ctx]);grid.show&&grid.aboveData&&drawGrid();surface.render();triggerRedrawOverlay()}function extractRange(ranges,coord){var axis,from,to,key,axes=allAxes();for(var i=0;i<axes.length;++i){axis=axes[i];if(axis.direction==coord){key=coord+axis.n+"axis";ranges[key]||1!=axis.n||(key=coord+"axis");if(ranges[key]){from=ranges[key].from;to=ranges[key].to;break}}}if(!ranges[key]){axis="x"==coord?xaxes[0]:yaxes[0];from=ranges[coord+"1"];to=ranges[coord+"2"]}if(null!=from&&null!=to&&from>to){var tmp=from;from=to;to=tmp}return{from:from,to:to,axis:axis}}function drawBackground(){ctx.save();ctx.translate(plotOffset.left,plotOffset.top);ctx.fillStyle=getColorOrGradient(options.grid.backgroundColor,plotHeight,0,"rgba(255, 255, 255, 0)");ctx.fillRect(0,0,plotWidth,plotHeight);ctx.restore()}function drawGrid(){var i,axes,bw,bc;ctx.save();ctx.translate(plotOffset.left,plotOffset.top);var markings=options.grid.markings;if(markings){if($.isFunction(markings)){axes=plot.getAxes();axes.xmin=axes.xaxis.min;axes.xmax=axes.xaxis.max;axes.ymin=axes.yaxis.min;axes.ymax=axes.yaxis.max;markings=markings(axes)}for(i=0;i<markings.length;++i){var m=markings[i],xrange=extractRange(m,"x"),yrange=extractRange(m,"y");null==xrange.from&&(xrange.from=xrange.axis.min);null==xrange.to&&(xrange.to=xrange.axis.max);null==yrange.from&&(yrange.from=yrange.axis.min);null==yrange.to&&(yrange.to=yrange.axis.max);if(xrange.to<xrange.axis.min||xrange.from>xrange.axis.max||yrange.to<yrange.axis.min||yrange.from>yrange.axis.max)continue;xrange.from=Math.max(xrange.from,xrange.axis.min);xrange.to=Math.min(xrange.to,xrange.axis.max);yrange.from=Math.max(yrange.from,yrange.axis.min);yrange.to=Math.min(yrange.to,yrange.axis.max);var xequal=xrange.from===xrange.to,yequal=yrange.from===yrange.to;if(xequal&&yequal)continue;xrange.from=Math.floor(xrange.axis.p2c(xrange.from));xrange.to=Math.floor(xrange.axis.p2c(xrange.to));yrange.from=Math.floor(yrange.axis.p2c(yrange.from));yrange.to=Math.floor(yrange.axis.p2c(yrange.to));if(xequal||yequal){var lineWidth=m.lineWidth||options.grid.markingsLineWidth,subPixel=lineWidth%2?.5:0;ctx.beginPath();ctx.strokeStyle=m.color||options.grid.markingsColor;ctx.lineWidth=lineWidth;if(xequal){ctx.moveTo(xrange.to+subPixel,yrange.from);ctx.lineTo(xrange.to+subPixel,yrange.to)}else{ctx.moveTo(xrange.from,yrange.to+subPixel);ctx.lineTo(xrange.to,yrange.to+subPixel)}ctx.stroke()}else{ctx.fillStyle=m.color||options.grid.markingsColor;ctx.fillRect(xrange.from,yrange.to,xrange.to-xrange.from,yrange.from-yrange.to)}}}axes=allAxes();bw=options.grid.borderWidth;for(var j=0;j<axes.length;++j){var x,y,xoff,yoff,axis=axes[j],box=axis.box,t=axis.tickLength;if(!axis.show||0==axis.ticks.length)continue;ctx.lineWidth=1;if("x"==axis.direction){x=0;y="full"==t?"top"==axis.position?0:plotHeight:box.top-plotOffset.top+("top"==axis.position?box.height:0)}else{y=0;x="full"==t?"left"==axis.position?0:plotWidth:box.left-plotOffset.left+("left"==axis.position?box.width:0)}if(!axis.innermost){ctx.strokeStyle=axis.options.color;ctx.beginPath();xoff=yoff=0;"x"==axis.direction?xoff=plotWidth+1:yoff=plotHeight+1;1==ctx.lineWidth&&("x"==axis.direction?y=Math.floor(y)+.5:x=Math.floor(x)+.5);ctx.moveTo(x,y);ctx.lineTo(x+xoff,y+yoff);ctx.stroke()}ctx.strokeStyle=axis.options.tickColor;ctx.beginPath();for(i=0;i<axis.ticks.length;++i){var v=axis.ticks[i].v;xoff=yoff=0;if(isNaN(v)||v<axis.min||v>axis.max||"full"==t&&("object"==typeof bw&&bw[axis.position]>0||bw>0)&&(v==axis.min||v==axis.max))continue;if("x"==axis.direction){x=axis.p2c(v);yoff="full"==t?-plotHeight:t;"top"==axis.position&&(yoff=-yoff)}else{y=axis.p2c(v);xoff="full"==t?-plotWidth:t;"left"==axis.position&&(xoff=-xoff)}1==ctx.lineWidth&&("x"==axis.direction?x=Math.floor(x)+.5:y=Math.floor(y)+.5);ctx.moveTo(x,y);ctx.lineTo(x+xoff,y+yoff)}ctx.stroke()}if(bw){bc=options.grid.borderColor;if("object"==typeof bw||"object"==typeof bc){"object"!==typeof bw&&(bw={top:bw,right:bw,bottom:bw,left:bw});"object"!==typeof bc&&(bc={top:bc,right:bc,bottom:bc,left:bc});if(bw.top>0){ctx.strokeStyle=bc.top;ctx.lineWidth=bw.top;ctx.beginPath();ctx.moveTo(0-bw.left,0-bw.top/2);ctx.lineTo(plotWidth,0-bw.top/2);ctx.stroke()}if(bw.right>0){ctx.strokeStyle=bc.right;ctx.lineWidth=bw.right;ctx.beginPath();ctx.moveTo(plotWidth+bw.right/2,0-bw.top);ctx.lineTo(plotWidth+bw.right/2,plotHeight);ctx.stroke()}if(bw.bottom>0){ctx.strokeStyle=bc.bottom;ctx.lineWidth=bw.bottom;ctx.beginPath();ctx.moveTo(plotWidth+bw.right,plotHeight+bw.bottom/2);ctx.lineTo(0,plotHeight+bw.bottom/2);ctx.stroke()}if(bw.left>0){ctx.strokeStyle=bc.left;ctx.lineWidth=bw.left;ctx.beginPath();ctx.moveTo(0-bw.left/2,plotHeight+bw.bottom);ctx.lineTo(0-bw.left/2,0);ctx.stroke()}}else{ctx.lineWidth=bw;ctx.strokeStyle=options.grid.borderColor;ctx.strokeRect(-bw/2,-bw/2,plotWidth+bw,plotHeight+bw)}}ctx.restore()}function drawAxisLabels(){$.each(allAxes(),function(_,axis){var tick,x,y,halign,valign,box=axis.box,legacyStyles=axis.direction+"Axis "+axis.direction+axis.n+"Axis",layer="flot-"+axis.direction+"-axis flot-"+axis.direction+axis.n+"-axis "+legacyStyles,font=axis.options.font||"flot-tick-label tickLabel";surface.removeText(layer);if(!axis.show||0==axis.ticks.length)return;for(var i=0;i<axis.ticks.length;++i){tick=axis.ticks[i];if(!tick.label||tick.v<axis.min||tick.v>axis.max)continue;if("x"==axis.direction){halign="center";x=plotOffset.left+axis.p2c(tick.v);if("bottom"==axis.position)y=box.top+box.padding;else{y=box.top+box.height-box.padding;valign="bottom"}}else{valign="middle";y=plotOffset.top+axis.p2c(tick.v);if("left"==axis.position){x=box.left+box.width-box.padding;halign="right"}else x=box.left+box.padding}surface.addText(layer,x,y,tick.label,font,null,null,halign,valign)}})}function drawSeries(series){series.lines.show&&drawSeriesLines(series);series.bars.show&&drawSeriesBars(series);series.points.show&&drawSeriesPoints(series)}function drawSeriesLines(series){function plotLine(datapoints,xoffset,yoffset,axisx,axisy){var points=datapoints.points,ps=datapoints.pointsize,prevx=null,prevy=null;ctx.beginPath();for(var i=ps;i<points.length;i+=ps){var x1=points[i-ps],y1=points[i-ps+1],x2=points[i],y2=points[i+1];if(null==x1||null==x2)continue;if(y1<=y2&&y1<axisy.min){if(y2<axisy.min)continue;x1=(axisy.min-y1)/(y2-y1)*(x2-x1)+x1;y1=axisy.min}else if(y2<=y1&&y2<axisy.min){if(y1<axisy.min)continue;x2=(axisy.min-y1)/(y2-y1)*(x2-x1)+x1;y2=axisy.min}if(y1>=y2&&y1>axisy.max){if(y2>axisy.max)continue;x1=(axisy.max-y1)/(y2-y1)*(x2-x1)+x1;y1=axisy.max}else if(y2>=y1&&y2>axisy.max){if(y1>axisy.max)continue;x2=(axisy.max-y1)/(y2-y1)*(x2-x1)+x1;y2=axisy.max}if(x1<=x2&&x1<axisx.min){if(x2<axisx.min)continue;y1=(axisx.min-x1)/(x2-x1)*(y2-y1)+y1;x1=axisx.min}else if(x2<=x1&&x2<axisx.min){if(x1<axisx.min)continue;y2=(axisx.min-x1)/(x2-x1)*(y2-y1)+y1;x2=axisx.min}if(x1>=x2&&x1>axisx.max){if(x2>axisx.max)continue;y1=(axisx.max-x1)/(x2-x1)*(y2-y1)+y1;x1=axisx.max}else if(x2>=x1&&x2>axisx.max){if(x1>axisx.max)continue;y2=(axisx.max-x1)/(x2-x1)*(y2-y1)+y1;x2=axisx.max}x1==prevx&&y1==prevy||ctx.moveTo(axisx.p2c(x1)+xoffset,axisy.p2c(y1)+yoffset);prevx=x2;prevy=y2;ctx.lineTo(axisx.p2c(x2)+xoffset,axisy.p2c(y2)+yoffset)}ctx.stroke()}function plotLineArea(datapoints,axisx,axisy){var points=datapoints.points,ps=datapoints.pointsize,bottom=Math.min(Math.max(0,axisy.min),axisy.max),i=0,areaOpen=false,ypos=1,segmentStart=0,segmentEnd=0;while(true){if(ps>0&&i>points.length+ps)break;i+=ps;var x1=points[i-ps],y1=points[i-ps+ypos],x2=points[i],y2=points[i+ypos];if(areaOpen){if(ps>0&&null!=x1&&null==x2){segmentEnd=i;ps=-ps;ypos=2;continue}if(ps<0&&i==segmentStart+ps){ctx.fill();areaOpen=false;ps=-ps;ypos=1;i=segmentStart=segmentEnd+ps;continue}}if(null==x1||null==x2)continue;if(x1<=x2&&x1<axisx.min){if(x2<axisx.min)continue;y1=(axisx.min-x1)/(x2-x1)*(y2-y1)+y1;x1=axisx.min}else if(x2<=x1&&x2<axisx.min){if(x1<axisx.min)continue;y2=(axisx.min-x1)/(x2-x1)*(y2-y1)+y1;x2=axisx.min}if(x1>=x2&&x1>axisx.max){if(x2>axisx.max)continue;y1=(axisx.max-x1)/(x2-x1)*(y2-y1)+y1;x1=axisx.max}else if(x2>=x1&&x2>axisx.max){if(x1>axisx.max)continue;y2=(axisx.max-x1)/(x2-x1)*(y2-y1)+y1;x2=axisx.max}if(!areaOpen){ctx.beginPath();ctx.moveTo(axisx.p2c(x1),axisy.p2c(bottom));areaOpen=true}if(y1>=axisy.max&&y2>=axisy.max){ctx.lineTo(axisx.p2c(x1),axisy.p2c(axisy.max));ctx.lineTo(axisx.p2c(x2),axisy.p2c(axisy.max));continue}if(y1<=axisy.min&&y2<=axisy.min){ctx.lineTo(axisx.p2c(x1),axisy.p2c(axisy.min));ctx.lineTo(axisx.p2c(x2),axisy.p2c(axisy.min));continue}var x1old=x1,x2old=x2;if(y1<=y2&&y1<axisy.min&&y2>=axisy.min){x1=(axisy.min-y1)/(y2-y1)*(x2-x1)+x1;y1=axisy.min}else if(y2<=y1&&y2<axisy.min&&y1>=axisy.min){x2=(axisy.min-y1)/(y2-y1)*(x2-x1)+x1;y2=axisy.min}if(y1>=y2&&y1>axisy.max&&y2<=axisy.max){x1=(axisy.max-y1)/(y2-y1)*(x2-x1)+x1;y1=axisy.max}else if(y2>=y1&&y2>axisy.max&&y1<=axisy.max){x2=(axisy.max-y1)/(y2-y1)*(x2-x1)+x1;y2=axisy.max}x1!=x1old&&ctx.lineTo(axisx.p2c(x1old),axisy.p2c(y1));ctx.lineTo(axisx.p2c(x1),axisy.p2c(y1));ctx.lineTo(axisx.p2c(x2),axisy.p2c(y2));if(x2!=x2old){ctx.lineTo(axisx.p2c(x2),axisy.p2c(y2));ctx.lineTo(axisx.p2c(x2old),axisy.p2c(y2))}}}ctx.save();ctx.translate(plotOffset.left,plotOffset.top);ctx.lineJoin="round";var lw=series.lines.lineWidth,sw=series.shadowSize;if(lw>0&&sw>0){ctx.lineWidth=sw;ctx.strokeStyle="rgba(0,0,0,0.1)";var angle=Math.PI/18;plotLine(series.datapoints,Math.sin(angle)*(lw/2+sw/2),Math.cos(angle)*(lw/2+sw/2),series.xaxis,series.yaxis);ctx.lineWidth=sw/2;plotLine(series.datapoints,Math.sin(angle)*(lw/2+sw/4),Math.cos(angle)*(lw/2+sw/4),series.xaxis,series.yaxis)}ctx.lineWidth=lw;ctx.strokeStyle=series.color;var fillStyle=getFillStyle(series.lines,series.color,0,plotHeight);if(fillStyle){ctx.fillStyle=fillStyle;plotLineArea(series.datapoints,series.xaxis,series.yaxis)}lw>0&&plotLine(series.datapoints,0,0,series.xaxis,series.yaxis);ctx.restore()}function drawSeriesPoints(series){function plotPoints(datapoints,radius,fillStyle,offset,shadow,axisx,axisy,symbol){var points=datapoints.points,ps=datapoints.pointsize;for(var i=0;i<points.length;i+=ps){var x=points[i],y=points[i+1];if(null==x||x<axisx.min||x>axisx.max||y<axisy.min||y>axisy.max)continue;ctx.beginPath();x=axisx.p2c(x);y=axisy.p2c(y)+offset;"circle"==symbol?ctx.arc(x,y,radius,0,shadow?Math.PI:2*Math.PI,false):symbol(ctx,x,y,radius,shadow);ctx.closePath();if(fillStyle){ctx.fillStyle=fillStyle;ctx.fill()}ctx.stroke()}}ctx.save();ctx.translate(plotOffset.left,plotOffset.top);var lw=series.points.lineWidth,sw=series.shadowSize,radius=series.points.radius,symbol=series.points.symbol;0==lw&&(lw=1e-4);if(lw>0&&sw>0){var w=sw/2;ctx.lineWidth=w;ctx.strokeStyle="rgba(0,0,0,0.1)";plotPoints(series.datapoints,radius,null,w+w/2,true,series.xaxis,series.yaxis,symbol);ctx.strokeStyle="rgba(0,0,0,0.2)";plotPoints(series.datapoints,radius,null,w/2,true,series.xaxis,series.yaxis,symbol)}ctx.lineWidth=lw;ctx.strokeStyle=series.color;plotPoints(series.datapoints,radius,getFillStyle(series.points,series.color),0,false,series.xaxis,series.yaxis,symbol);ctx.restore()}function drawBar(x,y,b,barLeft,barRight,fillStyleCallback,axisx,axisy,c,horizontal,lineWidth){var left,right,bottom,top,drawLeft,drawRight,drawTop,drawBottom,tmp;if(horizontal){drawBottom=drawRight=drawTop=true;drawLeft=false;left=b;right=x;top=y+barLeft;bottom=y+barRight;if(right<left){tmp=right;right=left;left=tmp;drawLeft=true;drawRight=false}}else{drawLeft=drawRight=drawTop=true;drawBottom=false;left=x+barLeft;right=x+barRight;bottom=b;top=y;if(top<bottom){tmp=top;top=bottom;bottom=tmp;drawBottom=true;drawTop=false}}if(right<axisx.min||left>axisx.max||top<axisy.min||bottom>axisy.max)return;if(left<axisx.min){left=axisx.min;drawLeft=false}if(right>axisx.max){right=axisx.max;drawRight=false}if(bottom<axisy.min){bottom=axisy.min;drawBottom=false}if(top>axisy.max){top=axisy.max;drawTop=false}left=axisx.p2c(left);bottom=axisy.p2c(bottom);right=axisx.p2c(right);top=axisy.p2c(top);if(fillStyleCallback){c.fillStyle=fillStyleCallback(bottom,top);c.fillRect(left,top,right-left,bottom-top)}if(lineWidth>0&&(drawLeft||drawRight||drawTop||drawBottom)){c.beginPath();c.moveTo(left,bottom);drawLeft?c.lineTo(left,top):c.moveTo(left,top);drawTop?c.lineTo(right,top):c.moveTo(right,top);drawRight?c.lineTo(right,bottom):c.moveTo(right,bottom);drawBottom?c.lineTo(left,bottom):c.moveTo(left,bottom);c.stroke()}}function drawSeriesBars(series){function plotBars(datapoints,barLeft,barRight,fillStyleCallback,axisx,axisy){var points=datapoints.points,ps=datapoints.pointsize;for(var i=0;i<points.length;i+=ps){if(null==points[i])continue;drawBar(points[i],points[i+1],points[i+2],barLeft,barRight,fillStyleCallback,axisx,axisy,ctx,series.bars.horizontal,series.bars.lineWidth)}}ctx.save();ctx.translate(plotOffset.left,plotOffset.top);ctx.lineWidth=series.bars.lineWidth;ctx.strokeStyle=series.color;var barLeft;switch(series.bars.align){case"left":barLeft=0;break;case"right":barLeft=-series.bars.barWidth;break;default:barLeft=-series.bars.barWidth/2}var fillStyleCallback=series.bars.fill?function(bottom,top){return getFillStyle(series.bars,series.color,bottom,top)}:null;plotBars(series.datapoints,barLeft,barLeft+series.bars.barWidth,fillStyleCallback,series.xaxis,series.yaxis);ctx.restore()}function getFillStyle(filloptions,seriesColor,bottom,top){var fill=filloptions.fill;if(!fill)return null;if(filloptions.fillColor)return getColorOrGradient(filloptions.fillColor,bottom,top,seriesColor);var c=$.color.parse(seriesColor);c.a="number"==typeof fill?fill:.4;c.normalize();return c.toString()}function insertLegend(){null!=options.legend.container?$(options.legend.container).html(""):placeholder.find(".legend").remove();if(!options.legend.show)return;var s,label,fragments=[],entries=[],rowStarted=false,lf=options.legend.labelFormatter;for(var i=0;i<series.length;++i){s=series[i];if(s.label){label=lf?lf(s.label,s):s.label;label&&entries.push({label:label,color:s.color})}}if(options.legend.sorted)if($.isFunction(options.legend.sorted))entries.sort(options.legend.sorted);else if("reverse"==options.legend.sorted)entries.reverse();else{var ascending="descending"!=options.legend.sorted;entries.sort(function(a,b){return a.label==b.label?0:a.label<b.label!=ascending?1:-1})}for(i=0;i<entries.length;++i){var entry=entries[i];if(i%options.legend.noColumns==0){rowStarted&&fragments.push("</tr>");fragments.push("<tr>");rowStarted=true}fragments.push('<td class="legendColorBox"><div style="border:1px solid '+options.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+entry.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+entry.label+"</td>")}rowStarted&&fragments.push("</tr>");if(0==fragments.length)return;var table='<table style="font-size:smaller;color:'+options.grid.color+'">'+fragments.join("")+"</table>";if(null!=options.legend.container)$(options.legend.container).html(table);else{var pos="",p=options.legend.position,m=options.legend.margin;null==m[0]&&(m=[m,m]);"n"==p.charAt(0)?pos+="top:"+(m[1]+plotOffset.top)+"px;":"s"==p.charAt(0)&&(pos+="bottom:"+(m[1]+plotOffset.bottom)+"px;");"e"==p.charAt(1)?pos+="right:"+(m[0]+plotOffset.right)+"px;":"w"==p.charAt(1)&&(pos+="left:"+(m[0]+plotOffset.left)+"px;");var legend=$('<div class="legend">'+table.replace('style="','style="position:absolute;'+pos+";")+"</div>").appendTo(placeholder);if(0!=options.legend.backgroundOpacity){var c=options.legend.backgroundColor;if(null==c){c=options.grid.backgroundColor;c=c&&"string"==typeof c?$.color.parse(c):$.color.extract(legend,"background-color");c.a=1;c=c.toString()}var div=legend.children();$('<div style="position:absolute;width:'+div.width()+"px;height:"+div.height()+"px;"+pos+"background-color:"+c+';"> </div>').prependTo(legend).css("opacity",options.legend.backgroundOpacity)}}}var highlights=[],redrawTimeout=null;function findNearbyItem(mouseX,mouseY,seriesFilter){var i,j,ps,maxDistance=options.grid.mouseActiveRadius,smallestDistance=maxDistance*maxDistance+1,item=null;for(i=series.length-1;i>=0;--i){if(!seriesFilter(series[i]))continue;var s=series[i],axisx=s.xaxis,axisy=s.yaxis,points=s.datapoints.points,mx=axisx.c2p(mouseX),my=axisy.c2p(mouseY),maxx=maxDistance/axisx.scale,maxy=maxDistance/axisy.scale;ps=s.datapoints.pointsize;axisx.options.inverseTransform&&(maxx=Number.MAX_VALUE);axisy.options.inverseTransform&&(maxy=Number.MAX_VALUE);if(s.lines.show||s.points.show)for(j=0;j<points.length;j+=ps){var x=points[j],y=points[j+1];if(null==x)continue;if(x-mx>maxx||x-mx<-maxx||y-my>maxy||y-my<-maxy)continue;var dx=Math.abs(axisx.p2c(x)-mouseX),dy=Math.abs(axisy.p2c(y)-mouseY),dist=dx*dx+dy*dy;if(dist<smallestDistance){smallestDistance=dist;item=[i,j/ps]}}if(s.bars.show&&!item){var barLeft,barRight;switch(s.bars.align){case"left":barLeft=0;break;case"right":barLeft=-s.bars.barWidth;break;default:barLeft=-s.bars.barWidth/2}barRight=barLeft+s.bars.barWidth;for(j=0;j<points.length;j+=ps){x=points[j],y=points[j+1];var b=points[j+2];if(null==x)continue;(series[i].bars.horizontal?mx<=Math.max(b,x)&&mx>=Math.min(b,x)&&my>=y+barLeft&&my<=y+barRight:mx>=x+barLeft&&mx<=x+barRight&&my>=Math.min(b,y)&&my<=Math.max(b,y))&&(item=[i,j/ps])}}}if(item){i=item[0];j=item[1];ps=series[i].datapoints.pointsize;return{datapoint:series[i].datapoints.points.slice(j*ps,(j+1)*ps),dataIndex:j,series:series[i],seriesIndex:i}}return null}function onMouseMove(e){options.grid.hoverable&&triggerClickHoverEvent("plothover",e,function(s){return false!=s["hoverable"]})}function onMouseLeave(e){options.grid.hoverable&&triggerClickHoverEvent("plothover",e,function(s){return false})}function onClick(e){triggerClickHoverEvent("plotclick",e,function(s){return false!=s["clickable"]})}function triggerClickHoverEvent(eventname,event,seriesFilter){var offset=eventHolder.offset(),canvasX=event.pageX-offset.left-plotOffset.left,canvasY=event.pageY-offset.top-plotOffset.top,pos=canvasToAxisCoords({left:canvasX,top:canvasY});pos.pageX=event.pageX;pos.pageY=event.pageY;var item=findNearbyItem(canvasX,canvasY,seriesFilter);if(item){item.pageX=parseInt(item.series.xaxis.p2c(item.datapoint[0])+offset.left+plotOffset.left,10);item.pageY=parseInt(item.series.yaxis.p2c(item.datapoint[1])+offset.top+plotOffset.top,10)}if(options.grid.autoHighlight){for(var i=0;i<highlights.length;++i){var h=highlights[i];h.auto!=eventname||item&&h.series==item.series&&h.point[0]==item.datapoint[0]&&h.point[1]==item.datapoint[1]||unhighlight(h.series,h.point)}item&&highlight(item.series,item.datapoint,eventname)}placeholder.trigger(eventname,[pos,item])}function triggerRedrawOverlay(){var t=options.interaction.redrawOverlayInterval;if(-1==t){drawOverlay();return}redrawTimeout||(redrawTimeout=setTimeout(drawOverlay,t))}function drawOverlay(){redrawTimeout=null;octx.save();overlay.clear();octx.translate(plotOffset.left,plotOffset.top);var i,hi;for(i=0;i<highlights.length;++i){hi=highlights[i];hi.series.bars.show?drawBarHighlight(hi.series,hi.point):drawPointHighlight(hi.series,hi.point)}octx.restore();executeHooks(hooks.drawOverlay,[octx])}function highlight(s,point,auto){"number"==typeof s&&(s=series[s]);if("number"==typeof point){var ps=s.datapoints.pointsize;point=s.datapoints.points.slice(ps*point,ps*(point+1))}var i=indexOfHighlight(s,point);if(-1==i){highlights.push({series:s,point:point,auto:auto});triggerRedrawOverlay()}else auto||(highlights[i].auto=false)}function unhighlight(s,point){if(null==s&&null==point){highlights=[];triggerRedrawOverlay();return}"number"==typeof s&&(s=series[s]);if("number"==typeof point){var ps=s.datapoints.pointsize;point=s.datapoints.points.slice(ps*point,ps*(point+1))}var i=indexOfHighlight(s,point);if(-1!=i){highlights.splice(i,1);triggerRedrawOverlay()}}function indexOfHighlight(s,p){for(var i=0;i<highlights.length;++i){var h=highlights[i];if(h.series==s&&h.point[0]==p[0]&&h.point[1]==p[1])return i}return-1}function drawPointHighlight(series,point){var x=point[0],y=point[1],axisx=series.xaxis,axisy=series.yaxis,highlightColor="string"===typeof series.highlightColor?series.highlightColor:$.color.parse(series.color).scale("a",.5).toString();if(x<axisx.min||x>axisx.max||y<axisy.min||y>axisy.max)return;var pointRadius=series.points.radius+series.points.lineWidth/2;octx.lineWidth=pointRadius;octx.strokeStyle=highlightColor;var radius=1.5*pointRadius;x=axisx.p2c(x);y=axisy.p2c(y);octx.beginPath();"circle"==series.points.symbol?octx.arc(x,y,radius,0,2*Math.PI,false):series.points.symbol(octx,x,y,radius,false);octx.closePath();octx.stroke()}function drawBarHighlight(series,point){var barLeft,highlightColor="string"===typeof series.highlightColor?series.highlightColor:$.color.parse(series.color).scale("a",.5).toString(),fillStyle=highlightColor;switch(series.bars.align){case"left":barLeft=0;break;case"right":barLeft=-series.bars.barWidth;break;default:barLeft=-series.bars.barWidth/2}octx.lineWidth=series.bars.lineWidth;octx.strokeStyle=highlightColor;drawBar(point[0],point[1],point[2]||0,barLeft,barLeft+series.bars.barWidth,function(){return fillStyle},series.xaxis,series.yaxis,octx,series.bars.horizontal,series.bars.lineWidth)}function getColorOrGradient(spec,bottom,top,defaultColor){if("string"==typeof spec)return spec;var gradient=ctx.createLinearGradient(0,top,0,bottom);for(var i=0,l=spec.colors.length;i<l;++i){var c=spec.colors[i];if("string"!=typeof c){var co=$.color.parse(defaultColor);null!=c.brightness&&(co=co.scale("rgb",c.brightness));null!=c.opacity&&(co.a*=c.opacity);c=co.toString()}gradient.addColorStop(i/(l-1),c)}return gradient}}$.plot=function(placeholder,data,options){var plot=new Plot($(placeholder),data,options,$.plot.plugins);return plot};$.plot.version="0.8.3";$.plot.plugins=[];$.fn.plot=function(data,options){return this.each(function(){$.plot(this,data,options)})};function floorInBase(n,base){return base*Math.floor(n/base)}})(jQuery)},function(module,exports){(function($){var options={xaxis:{timezone:null,timeformat:null,twelveHourClock:false,monthNames:null}};function floorInBase(n,base){return base*Math.floor(n/base)}function formatDate(d,fmt,monthNames,dayNames){if("function"==typeof d.strftime)return d.strftime(fmt);var leftPad=function(n,pad){n=""+n;pad=""+(null==pad?"0":pad);return 1==n.length?pad+n:n};var r=[];var escape=false;var hours=d.getHours();var isAM=hours<12;null==monthNames&&(monthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]);null==dayNames&&(dayNames=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]);var hours12;hours12=hours>12?hours-12:0==hours?12:hours;for(var i=0;i<fmt.length;++i){var c=fmt.charAt(i);if(escape){switch(c){case"a":c=""+dayNames[d.getDay()];break;case"b":c=""+monthNames[d.getMonth()];break;case"d":c=leftPad(d.getDate());break;case"e":c=leftPad(d.getDate()," ");break;case"h":case"H":c=leftPad(hours);break;case"I":c=leftPad(hours12);break;case"l":c=leftPad(hours12," ");break;case"m":c=leftPad(d.getMonth()+1);break;case"M":c=leftPad(d.getMinutes());break;case"q":c=""+(Math.floor(d.getMonth()/3)+1);break;case"S":c=leftPad(d.getSeconds());break;case"y":c=leftPad(d.getFullYear()%100);break;case"Y":c=""+d.getFullYear();break;case"p":c=isAM?"am":"pm";break;case"P":c=isAM?"AM":"PM";break;case"w":c=""+d.getDay()}r.push(c);escape=false}else"%"==c?escape=true:r.push(c)}return r.join("")}function makeUtcWrapper(d){function addProxyMethod(sourceObj,sourceMethod,targetObj,targetMethod){sourceObj[sourceMethod]=function(){return targetObj[targetMethod].apply(targetObj,arguments)}}var utc={date:d};void 0!=d.strftime&&addProxyMethod(utc,"strftime",d,"strftime");addProxyMethod(utc,"getTime",d,"getTime");addProxyMethod(utc,"setTime",d,"setTime");var props=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"];for(var p=0;p<props.length;p++){addProxyMethod(utc,"get"+props[p],d,"getUTC"+props[p]);addProxyMethod(utc,"set"+props[p],d,"setUTC"+props[p])}return utc}function dateGenerator(ts,opts){if("browser"==opts.timezone)return new Date(ts);if(opts.timezone&&"utc"!=opts.timezone){if("undefined"!=typeof timezoneJS&&"undefined"!=typeof timezoneJS.Date){var d=new timezoneJS.Date;d.setTimezone(opts.timezone);d.setTime(ts);return d}return makeUtcWrapper(new Date(ts))}return makeUtcWrapper(new Date(ts))}var timeUnitSize={second:1e3,minute:6e4,hour:36e5,day:864e5,month:2592e6,quarter:7776e6,year:525949.2*60*1e3};var baseSpec=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"]];var specMonths=baseSpec.concat([[3,"month"],[6,"month"],[1,"year"]]);var specQuarters=baseSpec.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);function init(plot){plot.hooks.processOptions.push(function(plot,options){$.each(plot.getAxes(),function(axisName,axis){var opts=axis.options;if("time"==opts.mode){axis.tickGenerator=function(axis){var ticks=[];var d=dateGenerator(axis.min,opts);var minSize=0;var spec=opts.tickSize&&"quarter"===opts.tickSize[1]||opts.minTickSize&&"quarter"===opts.minTickSize[1]?specQuarters:specMonths;null!=opts.minTickSize&&(minSize="number"==typeof opts.tickSize?opts.tickSize:opts.minTickSize[0]*timeUnitSize[opts.minTickSize[1]]);for(var i=0;i<spec.length-1;++i)if(axis.delta<(spec[i][0]*timeUnitSize[spec[i][1]]+spec[i+1][0]*timeUnitSize[spec[i+1][1]])/2&&spec[i][0]*timeUnitSize[spec[i][1]]>=minSize)break;var size=spec[i][0];var unit=spec[i][1];if("year"==unit){if(null!=opts.minTickSize&&"year"==opts.minTickSize[1])size=Math.floor(opts.minTickSize[0]);else{var magn=Math.pow(10,Math.floor(Math.log(axis.delta/timeUnitSize.year)/Math.LN10));var norm=axis.delta/timeUnitSize.year/magn;size=norm<1.5?1:norm<3?2:norm<7.5?5:10;size*=magn}size<1&&(size=1)}axis.tickSize=opts.tickSize||[size,unit];var tickSize=axis.tickSize[0];unit=axis.tickSize[1];var step=tickSize*timeUnitSize[unit];"second"==unit?d.setSeconds(floorInBase(d.getSeconds(),tickSize)):"minute"==unit?d.setMinutes(floorInBase(d.getMinutes(),tickSize)):"hour"==unit?d.setHours(floorInBase(d.getHours(),tickSize)):"month"==unit?d.setMonth(floorInBase(d.getMonth(),tickSize)):"quarter"==unit?d.setMonth(3*floorInBase(d.getMonth()/3,tickSize)):"year"==unit&&d.setFullYear(floorInBase(d.getFullYear(),tickSize));d.setMilliseconds(0);step>=timeUnitSize.minute&&d.setSeconds(0);step>=timeUnitSize.hour&&d.setMinutes(0);step>=timeUnitSize.day&&d.setHours(0);step>=4*timeUnitSize.day&&d.setDate(1);step>=2*timeUnitSize.month&&d.setMonth(floorInBase(d.getMonth(),3));step>=2*timeUnitSize.quarter&&d.setMonth(floorInBase(d.getMonth(),6));step>=timeUnitSize.year&&d.setMonth(0);var carry=0;var v=Number.NaN;var prev;do{prev=v;v=d.getTime();ticks.push(v);if("month"==unit||"quarter"==unit)if(tickSize<1){d.setDate(1);var start=d.getTime();d.setMonth(d.getMonth()+("quarter"==unit?3:1));var end=d.getTime();d.setTime(v+carry*timeUnitSize.hour+(end-start)*tickSize);carry=d.getHours();d.setHours(0)}else d.setMonth(d.getMonth()+tickSize*("quarter"==unit?3:1));else"year"==unit?d.setFullYear(d.getFullYear()+tickSize):d.setTime(v+step)}while(v<axis.max&&v!=prev);return ticks};axis.tickFormatter=function(v,axis){var d=dateGenerator(v,axis.options);if(null!=opts.timeformat)return formatDate(d,opts.timeformat,opts.monthNames,opts.dayNames);var useQuarters=axis.options.tickSize&&"quarter"==axis.options.tickSize[1]||axis.options.minTickSize&&"quarter"==axis.options.minTickSize[1];var t=axis.tickSize[0]*timeUnitSize[axis.tickSize[1]];var span=axis.max-axis.min;var suffix=opts.twelveHourClock?" %p":"";var hourCode=opts.twelveHourClock?"%I":"%H";var fmt;fmt=t<timeUnitSize.minute?hourCode+":%M:%S"+suffix:t<timeUnitSize.day?span<2*timeUnitSize.day?hourCode+":%M"+suffix:"%b %d "+hourCode+":%M"+suffix:t<timeUnitSize.month?"%b %d":useQuarters&&t<timeUnitSize.quarter||!useQuarters&&t<timeUnitSize.year?span<timeUnitSize.year?"%b":"%b %Y":useQuarters&&t<timeUnitSize.year?span<timeUnitSize.year?"Q%q":"Q%q %Y":"%Y";var rt=formatDate(d,fmt,opts.monthNames,opts.dayNames);return rt}}})})}$.plot.plugins.push({init:init,options:options,name:"time",version:"1.0"});$.plot.formatDate=formatDate;$.plot.dateGenerator=dateGenerator})(jQuery)},function(module,exports){(function($){function processRawData(plot,series,datapoints){var handlers={square:function(ctx,x,y,radius,shadow){var size=radius*Math.sqrt(Math.PI)/2;ctx.rect(x-size,y-size,size+size,size+size)},diamond:function(ctx,x,y,radius,shadow){var size=radius*Math.sqrt(Math.PI/2);ctx.moveTo(x-size,y);ctx.lineTo(x,y-size);ctx.lineTo(x+size,y);ctx.lineTo(x,y+size);ctx.lineTo(x-size,y)},triangle:function(ctx,x,y,radius,shadow){var size=radius*Math.sqrt(2*Math.PI/Math.sin(Math.PI/3));var height=size*Math.sin(Math.PI/3);ctx.moveTo(x-size/2,y+height/2);ctx.lineTo(x+size/2,y+height/2);if(!shadow){ctx.lineTo(x,y-height/2);ctx.lineTo(x-size/2,y+height/2)}},cross:function(ctx,x,y,radius,shadow){var size=radius*Math.sqrt(Math.PI)/2;ctx.moveTo(x-size,y-size);ctx.lineTo(x+size,y+size);ctx.moveTo(x-size,y+size);ctx.lineTo(x+size,y-size)}};var s=series.points.symbol;handlers[s]&&(series.points.symbol=handlers[s])}function init(plot){plot.hooks.processDatapoints.push(processRawData)}$.plot.plugins.push({init:init,name:"symbols",version:"1.0"})})(jQuery)},function(module,exports){(function($){var options={crosshair:{mode:null,color:"rgba(170, 0, 0, 0.80)",lineWidth:1}};function init(plot){var crosshair={x:-1,y:-1,locked:false};plot.setCrosshair=function setCrosshair(pos){if(pos){var o=plot.p2c(pos);crosshair.x=Math.max(0,Math.min(o.left,plot.width()));crosshair.y=Math.max(0,Math.min(o.top,plot.height()))}else crosshair.x=-1;plot.triggerRedrawOverlay()};plot.clearCrosshair=plot.setCrosshair;plot.lockCrosshair=function lockCrosshair(pos){pos&&plot.setCrosshair(pos);crosshair.locked=true};plot.unlockCrosshair=function unlockCrosshair(){crosshair.locked=false};function onMouseOut(e){if(crosshair.locked)return;if(-1!=crosshair.x){crosshair.x=-1;plot.triggerRedrawOverlay()}}function onMouseMove(e){if(crosshair.locked)return;if(plot.getSelection&&plot.getSelection()){crosshair.x=-1;return}var offset=plot.offset();crosshair.x=Math.max(0,Math.min(e.pageX-offset.left,plot.width()));crosshair.y=Math.max(0,Math.min(e.pageY-offset.top,plot.height()));plot.triggerRedrawOverlay()}plot.hooks.bindEvents.push(function(plot,eventHolder){if(!plot.getOptions().crosshair.mode)return;eventHolder.mouseout(onMouseOut);eventHolder.mousemove(onMouseMove)});plot.hooks.drawOverlay.push(function(plot,ctx){var c=plot.getOptions().crosshair;if(!c.mode)return;var plotOffset=plot.getPlotOffset();ctx.save();ctx.translate(plotOffset.left,plotOffset.top);if(-1!=crosshair.x){var adj=plot.getOptions().crosshair.lineWidth%2?.5:0;ctx.strokeStyle=c.color;ctx.lineWidth=c.lineWidth;ctx.lineJoin="round";ctx.beginPath();if(-1!=c.mode.indexOf("x")){var drawX=Math.floor(crosshair.x)+adj;ctx.moveTo(drawX,0);ctx.lineTo(drawX,plot.height())}if(-1!=c.mode.indexOf("y")){var drawY=Math.floor(crosshair.y)+adj;ctx.moveTo(0,drawY);ctx.lineTo(plot.width(),drawY)}ctx.stroke()}ctx.restore()});plot.hooks.shutdown.push(function(plot,eventHolder){eventHolder.unbind("mouseout",onMouseOut);eventHolder.unbind("mousemove",onMouseMove)})}$.plot.plugins.push({init:init,options:options,name:"crosshair",version:"1.0"})})(jQuery)},function(module,exports){(function($){function init(plot){var selection={first:{x:-1,y:-1},second:{x:-1,y:-1},show:false,active:false};var savedhandlers={};var mouseUpHandler=null;function onMouseMove(e){if(selection.active){updateSelection(e);plot.getPlaceholder().trigger("plotselecting",[getSelection()])}}function onMouseDown(e){if(1!=e.which)return;document.body.focus();if(void 0!==document.onselectstart&&null==savedhandlers.onselectstart){savedhandlers.onselectstart=document.onselectstart;document.onselectstart=function(){return false}}if(void 0!==document.ondrag&&null==savedhandlers.ondrag){savedhandlers.ondrag=document.ondrag;document.ondrag=function(){return false}}setSelectionPos(selection.first,e);selection.active=true;mouseUpHandler=function(e){onMouseUp(e)};$(document).one("mouseup",mouseUpHandler)}function onMouseUp(e){mouseUpHandler=null;void 0!==document.onselectstart&&(document.onselectstart=savedhandlers.onselectstart);void 0!==document.ondrag&&(document.ondrag=savedhandlers.ondrag);selection.active=false;updateSelection(e);if(selectionIsSane())triggerSelectedEvent();else{plot.getPlaceholder().trigger("plotunselected",[]);plot.getPlaceholder().trigger("plotselecting",[null])}return false}function getSelection(){if(!selectionIsSane())return null;if(!selection.show)return null;var r={},c1=selection.first,c2=selection.second;$.each(plot.getAxes(),function(name,axis){if(axis.used){var p1=axis.c2p(c1[axis.direction]),p2=axis.c2p(c2[axis.direction]);r[name]={from:Math.min(p1,p2),to:Math.max(p1,p2)}}});return r}function triggerSelectedEvent(){var r=getSelection();plot.getPlaceholder().trigger("plotselected",[r]);r.xaxis&&r.yaxis&&plot.getPlaceholder().trigger("selected",[{x1:r.xaxis.from,y1:r.yaxis.from,x2:r.xaxis.to,y2:r.yaxis.to}])}function clamp(min,value,max){return value<min?min:value>max?max:value}function setSelectionPos(pos,e){var o=plot.getOptions();var offset=plot.getPlaceholder().offset();var plotOffset=plot.getPlotOffset();pos.x=clamp(0,e.pageX-offset.left-plotOffset.left,plot.width());pos.y=clamp(0,e.pageY-offset.top-plotOffset.top,plot.height());"y"==o.selection.mode&&(pos.x=pos==selection.first?0:plot.width());"x"==o.selection.mode&&(pos.y=pos==selection.first?0:plot.height())}function updateSelection(pos){if(null==pos.pageX)return;setSelectionPos(selection.second,pos);if(selectionIsSane()){selection.show=true;plot.triggerRedrawOverlay()}else clearSelection(true)}function clearSelection(preventEvent){if(selection.show){selection.show=false;plot.triggerRedrawOverlay();preventEvent||plot.getPlaceholder().trigger("plotunselected",[])}}function extractRange(ranges,coord){var axis,from,to,key,axes=plot.getAxes();for(var k in axes){axis=axes[k];if(axis.direction==coord){key=coord+axis.n+"axis";ranges[key]||1!=axis.n||(key=coord+"axis");if(ranges[key]){from=ranges[key].from;to=ranges[key].to;break}}}if(!ranges[key]){axis="x"==coord?plot.getXAxes()[0]:plot.getYAxes()[0];from=ranges[coord+"1"];to=ranges[coord+"2"]}if(null!=from&&null!=to&&from>to){var tmp=from;from=to;to=tmp}return{from:from,to:to,axis:axis}}function setSelection(ranges,preventEvent){var range,o=plot.getOptions();if("y"==o.selection.mode){selection.first.x=0;selection.second.x=plot.width()}else{range=extractRange(ranges,"x");selection.first.x=range.axis.p2c(range.from);selection.second.x=range.axis.p2c(range.to)}if("x"==o.selection.mode){selection.first.y=0;selection.second.y=plot.height()}else{range=extractRange(ranges,"y");selection.first.y=range.axis.p2c(range.from);selection.second.y=range.axis.p2c(range.to)}selection.show=true;plot.triggerRedrawOverlay();!preventEvent&&selectionIsSane()&&triggerSelectedEvent()}function selectionIsSane(){var minSize=plot.getOptions().selection.minSize;return Math.abs(selection.second.x-selection.first.x)>=minSize&&Math.abs(selection.second.y-selection.first.y)>=minSize}plot.clearSelection=clearSelection;plot.setSelection=setSelection;plot.getSelection=getSelection;plot.hooks.bindEvents.push(function(plot,eventHolder){var o=plot.getOptions();if(null!=o.selection.mode){eventHolder.mousemove(onMouseMove);eventHolder.mousedown(onMouseDown)}});plot.hooks.drawOverlay.push(function(plot,ctx){if(selection.show&&selectionIsSane()){var plotOffset=plot.getPlotOffset();var o=plot.getOptions();ctx.save();ctx.translate(plotOffset.left,plotOffset.top);var c=$.color.parse(o.selection.color);ctx.strokeStyle=c.scale("a",.8).toString();ctx.lineWidth=1;ctx.lineJoin=o.selection.shape;ctx.fillStyle=c.scale("a",.4).toString();var x=Math.min(selection.first.x,selection.second.x)+.5,y=Math.min(selection.first.y,selection.second.y)+.5,w=Math.abs(selection.second.x-selection.first.x)-1,h=Math.abs(selection.second.y-selection.first.y)-1;ctx.fillRect(x,y,w,h);ctx.strokeRect(x,y,w,h);ctx.restore()}});plot.hooks.shutdown.push(function(plot,eventHolder){eventHolder.unbind("mousemove",onMouseMove);eventHolder.unbind("mousedown",onMouseDown);mouseUpHandler&&$(document).unbind("mouseup",mouseUpHandler)})}$.plot.plugins.push({init:init,options:{selection:{mode:null,color:"#e8cfac",shape:"round",minSize:5}},name:"selection",version:"1.1"})})(jQuery)},function(module,exports){(function($){var options={series:{stack:null}};function init(plot){function findMatchingSeries(s,allseries){var res=null;for(var i=0;i<allseries.length;++i){if(s==allseries[i])break;allseries[i].stack==s.stack&&(res=allseries[i])}return res}function stackData(plot,s,datapoints){if(null==s.stack||false===s.stack)return;var other=findMatchingSeries(s,plot.getData());if(!other)return;var px,py,intery,qx,qy,bottom,l,m,ps=datapoints.pointsize,points=datapoints.points,otherps=other.datapoints.pointsize,otherpoints=other.datapoints.points,newpoints=[],withlines=s.lines.show,horizontal=s.bars.horizontal,withbottom=ps>2&&(horizontal?datapoints.format[2].x:datapoints.format[2].y),withsteps=withlines&&s.lines.steps,fromgap=true,keyOffset=horizontal?1:0,accumulateOffset=horizontal?0:1,i=0,j=0;while(true){if(i>=points.length)break;l=newpoints.length;if(null==points[i]){for(m=0;m<ps;++m)newpoints.push(points[i+m]);i+=ps}else if(j>=otherpoints.length){if(!withlines)for(m=0;m<ps;++m)newpoints.push(points[i+m]);i+=ps}else if(null==otherpoints[j]){for(m=0;m<ps;++m)newpoints.push(null);fromgap=true;j+=otherps}else{px=points[i+keyOffset];py=points[i+accumulateOffset];qx=otherpoints[j+keyOffset];qy=otherpoints[j+accumulateOffset];bottom=0;if(px==qx){for(m=0;m<ps;++m)newpoints.push(points[i+m]);newpoints[l+accumulateOffset]+=qy;bottom=qy;i+=ps;j+=otherps}else if(px>qx){if(withlines&&i>0&&null!=points[i-ps]){intery=py+(points[i-ps+accumulateOffset]-py)*(qx-px)/(points[i-ps+keyOffset]-px);newpoints.push(qx);newpoints.push(intery+qy);for(m=2;m<ps;++m)newpoints.push(points[i+m]);bottom=qy}j+=otherps}else{if(fromgap&&withlines){i+=ps;continue}for(m=0;m<ps;++m)newpoints.push(points[i+m]);withlines&&j>0&&null!=otherpoints[j-otherps]&&(bottom=qy+(otherpoints[j-otherps+accumulateOffset]-qy)*(px-qx)/(otherpoints[j-otherps+keyOffset]-qx));newpoints[l+accumulateOffset]+=bottom;i+=ps}fromgap=false;l!=newpoints.length&&withbottom&&(newpoints[l+2]+=bottom)}if(withsteps&&l!=newpoints.length&&l>0&&null!=newpoints[l]&&newpoints[l]!=newpoints[l-ps]&&newpoints[l+1]!=newpoints[l-ps+1]){for(m=0;m<ps;++m)newpoints[l+ps+m]=newpoints[l+m];newpoints[l+1]=newpoints[l-ps+1]}}datapoints.points=newpoints}plot.hooks.processDatapoints.push(stackData)}$.plot.plugins.push({init:init,options:options,name:"stack",version:"1.2"})})(jQuery)},function(module,exports){(function($){var options={axisLabels:{show:true}};function canvasSupported(){return!!document.createElement("canvas").getContext}function canvasTextSupported(){if(!canvasSupported())return false;var dummy_canvas=document.createElement("canvas");var context=dummy_canvas.getContext("2d");return"function"==typeof context.fillText}function css3TransitionSupported(){var div=document.createElement("div");return"undefined"!=typeof div.style.MozTransition||"undefined"!=typeof div.style.OTransition||"undefined"!=typeof div.style.webkitTransition||"undefined"!=typeof div.style.transition}function AxisLabel(axisName,position,padding,plot,opts){this.axisName=axisName;this.position=position;this.padding=padding;this.plot=plot;this.opts=opts;this.width=0;this.height=0}AxisLabel.prototype.cleanup=function(){};CanvasAxisLabel.prototype=new AxisLabel;CanvasAxisLabel.prototype.constructor=CanvasAxisLabel;function CanvasAxisLabel(axisName,position,padding,plot,opts){AxisLabel.prototype.constructor.call(this,axisName,position,padding,plot,opts)}CanvasAxisLabel.prototype.calculateSize=function(){this.opts.axisLabelFontSizePixels||(this.opts.axisLabelFontSizePixels=14);this.opts.axisLabelFontFamily||(this.opts.axisLabelFontFamily="sans-serif");this.opts.axisLabelFontSizePixels,this.padding;this.opts.axisLabelFontSizePixels,this.padding;if("left"==this.position||"right"==this.position){this.width=this.opts.axisLabelFontSizePixels+this.padding;this.height=0}else{this.width=0;this.height=this.opts.axisLabelFontSizePixels+this.padding}};CanvasAxisLabel.prototype.draw=function(box){this.opts.axisLabelColour||(this.opts.axisLabelColour="black");var ctx=this.plot.getCanvas().getContext("2d");ctx.save();ctx.font=this.opts.axisLabelFontSizePixels+"px "+this.opts.axisLabelFontFamily;ctx.fillStyle=this.opts.axisLabelColour;var width=ctx.measureText(this.opts.axisLabel).width;var height=this.opts.axisLabelFontSizePixels;var x,y,angle=0;if("top"==this.position){x=box.left+box.width/2-width/2;y=box.top+.72*height}else if("bottom"==this.position){x=box.left+box.width/2-width/2;y=box.top+box.height-.72*height}else if("left"==this.position){x=box.left+.72*height;y=box.height/2+box.top+width/2;angle=-Math.PI/2}else if("right"==this.position){x=box.left+box.width-.72*height;y=box.height/2+box.top-width/2;angle=Math.PI/2}ctx.translate(x,y);ctx.rotate(angle);ctx.fillText(this.opts.axisLabel,0,0);ctx.restore()};HtmlAxisLabel.prototype=new AxisLabel;HtmlAxisLabel.prototype.constructor=HtmlAxisLabel;function HtmlAxisLabel(axisName,position,padding,plot,opts){AxisLabel.prototype.constructor.call(this,axisName,position,padding,plot,opts);this.elem=null}HtmlAxisLabel.prototype.calculateSize=function(){var elem=$('<div class="axisLabels" style="position:absolute;">'+this.opts.axisLabel+"</div>");this.plot.getPlaceholder().append(elem);this.labelWidth=elem.outerWidth(true);this.labelHeight=elem.outerHeight(true);elem.remove();this.width=this.height=0;"left"==this.position||"right"==this.position?this.width=this.labelWidth+this.padding:this.height=this.labelHeight+this.padding};HtmlAxisLabel.prototype.cleanup=function(){this.elem&&this.elem.remove()};HtmlAxisLabel.prototype.draw=function(box){this.plot.getPlaceholder().find("#"+this.axisName+"Label").remove();this.elem=$('<div id="'+this.axisName+'Label" " class="axisLabels" style="position:absolute;">'+this.opts.axisLabel+"</div>");this.plot.getPlaceholder().append(this.elem);if("top"==this.position){this.elem.css("left",box.left+box.width/2-this.labelWidth/2+"px");this.elem.css("top",box.top+"px")}else if("bottom"==this.position){this.elem.css("left",box.left+box.width/2-this.labelWidth/2+"px");this.elem.css("top",box.top+box.height-this.labelHeight+"px")}else if("left"==this.position){this.elem.css("top",box.top+box.height/2-this.labelHeight/2+"px");this.elem.css("left",box.left+"px")}else if("right"==this.position){this.elem.css("top",box.top+box.height/2-this.labelHeight/2+"px");this.elem.css("left",box.left+box.width-this.labelWidth+"px")}};CssTransformAxisLabel.prototype=new HtmlAxisLabel;CssTransformAxisLabel.prototype.constructor=CssTransformAxisLabel;function CssTransformAxisLabel(axisName,position,padding,plot,opts){HtmlAxisLabel.prototype.constructor.call(this,axisName,position,padding,plot,opts)}CssTransformAxisLabel.prototype.calculateSize=function(){HtmlAxisLabel.prototype.calculateSize.call(this);this.width=this.height=0;"left"==this.position||"right"==this.position?this.width=this.labelHeight+this.padding:this.height=this.labelHeight+this.padding};CssTransformAxisLabel.prototype.transforms=function(degrees,x,y){var stransforms={"-moz-transform":"","-webkit-transform":"","-o-transform":"","-ms-transform":""};if(0!=x||0!=y){var stdTranslate=" translate("+x+"px, "+y+"px)";stransforms["-moz-transform"]+=stdTranslate;stransforms["-webkit-transform"]+=stdTranslate;stransforms["-o-transform"]+=stdTranslate;stransforms["-ms-transform"]+=stdTranslate}if(0!=degrees){var stdRotate=" rotate("+degrees+"deg)";stransforms["-moz-transform"]+=stdRotate;stransforms["-webkit-transform"]+=stdRotate;stransforms["-o-transform"]+=stdRotate;stransforms["-ms-transform"]+=stdRotate}var s="top: 0; left: 0; ";for(var prop in stransforms)stransforms[prop]&&(s+=prop+":"+stransforms[prop]+";");s+=";";return s};CssTransformAxisLabel.prototype.calculateOffsets=function(box){var offsets={x:0,y:0,degrees:0};if("bottom"==this.position){offsets.x=box.left+box.width/2-this.labelWidth/2;offsets.y=box.top+box.height-this.labelHeight}else if("top"==this.position){offsets.x=box.left+box.width/2-this.labelWidth/2;offsets.y=box.top}else if("left"==this.position){offsets.degrees=-90;offsets.x=box.left-this.labelWidth/2+this.labelHeight/2;offsets.y=box.height/2+box.top}else if("right"==this.position){offsets.degrees=90;offsets.x=box.left+box.width-this.labelWidth/2-this.labelHeight/2;offsets.y=box.height/2+box.top}offsets.x=Math.round(offsets.x);offsets.y=Math.round(offsets.y);return offsets};CssTransformAxisLabel.prototype.draw=function(box){this.plot.getPlaceholder().find("."+this.axisName+"Label").remove();var offsets=this.calculateOffsets(box);this.elem=$('<div class="axisLabels '+this.axisName+'Label" style="position:absolute; '+this.transforms(offsets.degrees,offsets.x,offsets.y)+'">'+this.opts.axisLabel+"</div>");this.plot.getPlaceholder().append(this.elem)};IeTransformAxisLabel.prototype=new CssTransformAxisLabel;IeTransformAxisLabel.prototype.constructor=IeTransformAxisLabel;function IeTransformAxisLabel(axisName,position,padding,plot,opts){CssTransformAxisLabel.prototype.constructor.call(this,axisName,position,padding,plot,opts);this.requiresResize=false}IeTransformAxisLabel.prototype.transforms=function(degrees,x,y){var s="";if(0!=degrees){var rotation=degrees/90;while(rotation<0)rotation+=4;s+=" filter: progid:DXImageTransform.Microsoft.BasicImage(rotation="+rotation+"); ";this.requiresResize="right"==this.position}0!=x&&(s+="left: "+x+"px; ");0!=y&&(s+="top: "+y+"px; ");return s};IeTransformAxisLabel.prototype.calculateOffsets=function(box){var offsets=CssTransformAxisLabel.prototype.calculateOffsets.call(this,box);if("top"==this.position)offsets.y=box.top+1;else if("left"==this.position){offsets.x=box.left;offsets.y=box.height/2+box.top-this.labelWidth/2}else if("right"==this.position){offsets.x=box.left+box.width-this.labelHeight;offsets.y=box.height/2+box.top-this.labelWidth/2}return offsets};IeTransformAxisLabel.prototype.draw=function(box){CssTransformAxisLabel.prototype.draw.call(this,box);if(this.requiresResize){this.elem=this.plot.getPlaceholder().find("."+this.axisName+"Label");this.elem.css("width",this.labelWidth);this.elem.css("height",this.labelHeight)}};function init(plot){plot.hooks.processOptions.push(function(plot,options){if(!options.axisLabels.show)return;var secondPass=false;var axisLabels={};var defaultPadding=2;plot.hooks.draw.push(function(plot,ctx){var hasAxisLabels=false;if(secondPass){secondPass=false;$.each(plot.getAxes(),function(axisName,axis){var opts=axis.options||plot.getOptions()[axisName];if(!opts||!opts.axisLabel||!axis.show)return;axisLabels[axisName].draw(axis.box)})}else{$.each(plot.getAxes(),function(axisName,axis){var opts=axis.options||plot.getOptions()[axisName];if(axisName in axisLabels){axis.labelHeight=axis.labelHeight-axisLabels[axisName].height;axis.labelWidth=axis.labelWidth-axisLabels[axisName].width;opts.labelHeight=axis.labelHeight;opts.labelWidth=axis.labelWidth;axisLabels[axisName].cleanup();delete axisLabels[axisName]}if(!opts||!opts.axisLabel||!axis.show)return;hasAxisLabels=true;var renderer=null;if(opts.axisLabelUseHtml||"Microsoft Internet Explorer"!=navigator.appName)renderer=opts.axisLabelUseHtml||!css3TransitionSupported()&&!canvasTextSupported()&&!opts.axisLabelUseCanvas?HtmlAxisLabel:opts.axisLabelUseCanvas||!css3TransitionSupported()?CanvasAxisLabel:CssTransformAxisLabel;else{var ua=navigator.userAgent;var re=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=re.exec(ua)&&(rv=parseFloat(RegExp.$1));renderer=rv>=9&&!opts.axisLabelUseCanvas&&!opts.axisLabelUseHtml?CssTransformAxisLabel:opts.axisLabelUseCanvas||opts.axisLabelUseHtml?opts.axisLabelUseCanvas?CanvasAxisLabel:HtmlAxisLabel:IeTransformAxisLabel}var padding=void 0===opts.axisLabelPadding?defaultPadding:opts.axisLabelPadding;axisLabels[axisName]=new renderer(axisName,axis.position,padding,plot,opts);axisLabels[axisName].calculateSize();opts.labelHeight=axis.labelHeight+axisLabels[axisName].height;opts.labelWidth=axis.labelWidth+axisLabels[axisName].width});if(hasAxisLabels){secondPass=true;plot.setupGrid();plot.draw()}}})})}$.plot.plugins.push({init:init,options:options,name:"axisLabels",version:"2.0"})})(jQuery)},function(module,exports){},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=tickFormatters;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function baseTickFormatter(value,axis){var factor=axis.tickDecimals?Math.pow(10,axis.tickDecimals):1;var formatted=""+Math.round(value*factor)/factor;if(null!=axis.tickDecimals){var decimal=formatted.indexOf(".");var precision=-1===decimal?0:formatted.length-decimal-1;if(precision<axis.tickDecimals)return(precision?formatted:formatted+".")+(""+factor).substr(1,axis.tickDecimals-precision)}return formatted}function unitFormatter(divisor,units){return function(val){var index=0;var isNegative=val<0;val=Math.abs(val);while(val>=divisor&&index<units.length){val/=divisor;index++}var value=Math.round(100*val)/100*(isNegative?-1:1);return""+value+units[index]}}function tickFormatters(){var formatters={bits:unitFormatter(1e3,["b","kb","mb","gb","tb","pb"]),"bits/s":unitFormatter(1e3,["b/s","kb/s","mb/s","gb/s","tb/s","pb/s"]),bytes:unitFormatter(1024,["B","KB","MB","GB","TB","PB"]),"bytes/s":unitFormatter(1024,["B/s","KB/s","MB/s","GB/s","TB/s","PB/s"]),currency:function currency(val,axis){return val.toLocaleString("en",{style:"currency",currency:axis.options.units.prefix||"USD"})},percent:function percent(val,axis){var precision=_lodash2.default.get(axis,"tickDecimals",0)-_lodash2.default.get(axis,"options.units.tickDecimalsShift",0);precision<0?precision=0:precision>20&&(precision=20);return(100*val).toFixed(precision)+"%"},custom:function custom(val,axis){var formattedVal=baseTickFormatter(val,axis);var prefix=axis.options.units.prefix;var suffix=axis.options.units.suffix;return prefix+formattedVal+suffix}};return formatters}module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=xaxisFormatterProvider;var _moment=__webpack_require__(10);var _moment2=_interopRequireDefault(_moment);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function xaxisFormatterProvider(config){function getFormat(esInterval){var parts=esInterval.match(/(\d+)(ms|s|m|h|d|w|M|y|)/);if(null==parts||null==parts[1]||null==parts[2])throw new Error("Unknown interval");var interval=_moment2.default.duration(Number(parts[1]),parts[2]);var rules=config.get("dateFormat:scaled");for(var i=rules.length-1;i>=0;i--){var rule=rules[i];if(!rule[0]||interval>=_moment2.default.duration(rule[0]))return rule[1]}return config.get("dateFormat")}return function(esInterval){return getFormat(esInterval)}}module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=generateTicksProvider;function generateTicksProvider(){function floorInBase(n,base){return base*Math.floor(n/base)}function generateTicks(axis){var returnTicks=[];var tickSize=2;var delta=axis.delta;var steps=0;var tickVal=void 0;var tickCount=0;while(Math.abs(delta)>=1024){steps++;delta/=1024}while(tickSize<=1024){if(delta<=tickSize)break;tickSize*=2}axis.tickSize=tickSize*Math.pow(1024,steps);var tickMin=floorInBase(axis.min,axis.tickSize);do{tickVal=tickMin+tickCount++*axis.tickSize;returnTicks.push(tickVal)}while(tickVal<axis.max);return returnTicks}return function(axis){return generateTicks(axis)}}module.exports=exports["default"]},,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";var _field_formats=__webpack_require__(116);var _url=__webpack_require__(2968);var _bytes=__webpack_require__(2969);var _date=__webpack_require__(2971);var _relative_date=__webpack_require__(2972);var _duration=__webpack_require__(1274);var _ip=__webpack_require__(2973);var _number=__webpack_require__(2974);var _percent=__webpack_require__(2975);var _string=__webpack_require__(2976);var _source=__webpack_require__(2977);var _color=__webpack_require__(2978);var _truncate=__webpack_require__(2979);var _boolean=__webpack_require__(2980);var _static_lookup=__webpack_require__(2981);_field_formats.fieldFormats.register(_url.createUrlFormat);_field_formats.fieldFormats.register(_bytes.createBytesFormat);_field_formats.fieldFormats.register(_date.createDateFormat);_field_formats.fieldFormats.register(_relative_date.createRelativeDateFormat);_field_formats.fieldFormats.register(_duration.createDurationFormat);_field_formats.fieldFormats.register(_ip.createIpFormat);_field_formats.fieldFormats.register(_number.createNumberFormat);_field_formats.fieldFormats.register(_percent.createPercentFormat);_field_formats.fieldFormats.register(_string.createStringFormat);_field_formats.fieldFormats.register(_source.createSourceFormat);_field_formats.fieldFormats.register(_color.createColorFormat);_field_formats.fieldFormats.register(_truncate.createTruncateFormat);_field_formats.fieldFormats.register(_boolean.createBoolFormat);_field_formats.fieldFormats.register(_static_lookup.createStaticLookupFormat)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.contentTypesSetup=contentTypesSetup;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _as_pretty_string=__webpack_require__(597);var _highlight_html=__webpack_require__(810);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var types={html:function html(format,convert){function recurse(value,field,hit,meta){if(null==value)return(0,_as_pretty_string.asPrettyString)(value);if(!value||"function"!==typeof value.map)return convert.call(format,value,field,hit,meta);var subVals=value.map(function(v){return recurse(v,field,hit,meta)});var useMultiLine=subVals.some(function(sub){return sub.indexOf("\n")>-1});return subVals.join(","+(useMultiLine?"\n":" "))}return function(){return"<span ng-non-bindable>"+recurse.apply(void 0,arguments)+"</span>"}},text:function text(format,convert){return function recurse(value){if(!value||"function"!==typeof value.map)return convert.call(format,value);return JSON.stringify(value.map(recurse))}}};function fallbackText(value){return(0,_as_pretty_string.asPrettyString)(value)}function fallbackHtml(value,field,hit){var formatted=_lodash2.default.escape(this.convert(value,"text"));return hit&&hit.highlight&&hit.highlight[field.name]?(0,_highlight_html.getHighlightHtml)(formatted,hit.highlight[field.name]):formatted}function contentTypesSetup(format){var src=format._convert||{};var converters=format._convert={};converters.text=types.text(format,src.text||fallbackText);converters.html=types.html(format,src.html||fallbackHtml);return format._convert}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.htmlTags={pre:"<mark>",post:"</mark>"}},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:true});exports.createUrlFormat=createUrlFormat;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _highlight_html=__webpack_require__(810);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var templateMatchRE=/{{([\s\S]+?)}}/g;var whitelistUrlSchemes=["http://","https://"];var URL_TYPES=[{kind:"a",text:"Link"},{kind:"img",text:"Image"},{kind:"audio",text:"Audio"}];var DEFAULT_URL_TYPE="a";function createUrlFormat(FieldFormat){var UrlFormat=function(_FieldFormat){_inherits(UrlFormat,_FieldFormat);function UrlFormat(params){_classCallCheck(this,UrlFormat);var _this=_possibleConstructorReturn(this,(UrlFormat.__proto__||Object.getPrototypeOf(UrlFormat)).call(this,params));_this._compileTemplate=_lodash2.default.memoize(_this._compileTemplate);return _this}_createClass(UrlFormat,[{key:"getParamDefaults",value:function getParamDefaults(){return{type:DEFAULT_URL_TYPE,urlTemplate:null,labelTemplate:null}}},{key:"_formatLabel",value:function _formatLabel(value,url){var template=this.param("labelTemplate");null==url&&(url=this._formatUrl(value));if(!template)return url;return this._compileTemplate(template)({value:value,url:url})}},{key:"_formatUrl",value:function _formatUrl(value){var template=this.param("urlTemplate");if(!template)return value;return this._compileTemplate(template)({value:encodeURIComponent(value),rawValue:value})}},{key:"_compileTemplate",value:function _compileTemplate(template){var parts=template.split(templateMatchRE).map(function(part,i){return i%2?part.trim():part});return function(locals){var output="";var i=-1;while(++i<parts.length)if(i%2){if(locals.hasOwnProperty(parts[i])){var local=locals[parts[i]];output+=null==local?"":local}}else output+=parts[i];return output}}}]);return UrlFormat}(FieldFormat);UrlFormat.id="url";UrlFormat.title="Url";UrlFormat.fieldType=["number","boolean","date","ip","string","murmur3","unknown","conflict"];UrlFormat.urlTypes=URL_TYPES;UrlFormat.prototype._convert={text:function text(value){return this._formatLabel(value)},html:function html(rawValue,field,hit,parsedUrl){var url=_lodash2.default.escape(this._formatUrl(rawValue));var label=_lodash2.default.escape(this._formatLabel(rawValue,url));switch(this.param("type")){case"audio":return'<audio controls preload="none" src="'+url+'">';case"img":var imageLabel=label===url?"A dynamically-specified image located at "+url:label;return'<img src="'+url+'" alt="'+imageLabel+'">';default:var inWhitelist=whitelistUrlSchemes.some(function(scheme){return 0===url.indexOf(scheme)});if(!inWhitelist&&!parsedUrl)return url;var prefix="";inWhitelist||(prefix="#"===url[0]?""+parsedUrl.origin+parsedUrl.pathname:0===url.indexOf(parsedUrl.basePath||"/")?""+parsedUrl.origin:""+parsedUrl.origin+parsedUrl.basePath+"/app/");var linkLabel=void 0;linkLabel=hit&&hit.highlight&&hit.highlight[field.name]?(0,_highlight_html.getHighlightHtml)(label,hit.highlight[field.name]):label;var linkTarget=this.param("openLinkInCurrentTab")?"_self":"_blank";return'<a href="'+prefix+url+'" target="'+linkTarget+'" rel="noopener noreferrer">'+linkLabel+"</a>"}}};return UrlFormat}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createBytesFormat=createBytesFormat;var _numeral=__webpack_require__(811);function createBytesFormat(FieldFormat){return(0,_numeral.createNumeralFormat)(FieldFormat,{id:"bytes",title:"Bytes"})}},,function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:true});exports.createDateFormat=createDateFormat;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _moment=__webpack_require__(10);var _moment2=_interopRequireDefault(_moment);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function createDateFormat(FieldFormat){var _class,_temp;return _temp=_class=function(_FieldFormat){_inherits(DateFormat,_FieldFormat);function DateFormat(params,getConfig){_classCallCheck(this,DateFormat);var _this=_possibleConstructorReturn(this,(DateFormat.__proto__||Object.getPrototypeOf(DateFormat)).call(this,params));_this.getConfig=getConfig;return _this}_createClass(DateFormat,[{key:"getParamDefaults",value:function getParamDefaults(){return{pattern:this.getConfig("dateFormat"),timezone:this.getConfig("dateFormat:tz")}}},{key:"_convert",value:function _convert(val){var pattern=this.param("pattern");var timezone=this.param("timezone");var timezoneChanged=this._timeZone!==timezone;var datePatternChanged=this._memoizedPattern!==pattern;if(timezoneChanged||datePatternChanged){this._timeZone=timezone;this._memoizedPattern=pattern;this._memoizedConverter=_lodash2.default.memoize(function converter(val){if(null===val||void 0===val)return"-";var date=(0,_moment2.default)(val);return date.isValid()?date.format(pattern):val})}return this._memoizedConverter(val)}}]);return DateFormat}(FieldFormat),_class.id="date",_class.title="Date",_class.fieldType="date",_temp}},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:true});exports.createRelativeDateFormat=createRelativeDateFormat;var _moment=__webpack_require__(10);var _moment2=_interopRequireDefault(_moment);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function createRelativeDateFormat(FieldFormat){var _class,_temp;return _temp=_class=function(_FieldFormat){_inherits(RelativeDateFormat,_FieldFormat);function RelativeDateFormat(params){_classCallCheck(this,RelativeDateFormat);return _possibleConstructorReturn(this,(RelativeDateFormat.__proto__||Object.getPrototypeOf(RelativeDateFormat)).call(this,params))}_createClass(RelativeDateFormat,[{key:"_convert",value:function _convert(val){if(null===val||void 0===val)return"-";var date=(0,_moment2.default)(val);return date.isValid()?date.fromNow():val}}]);return RelativeDateFormat}(FieldFormat),_class.id="relative_date",_class.title="Relative Date",_class.fieldType="date",_temp}},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:true});exports.createIpFormat=createIpFormat;function createIpFormat(FieldFormat){var _class,_temp;return _temp=_class=function(_FieldFormat){_inherits(IpFormat,_FieldFormat);function IpFormat(){_classCallCheck(this,IpFormat);return _possibleConstructorReturn(this,(IpFormat.__proto__||Object.getPrototypeOf(IpFormat)).apply(this,arguments))}_createClass(IpFormat,[{key:"_convert",value:function _convert(val){if(void 0===val||null===val)return"-";if(!isFinite(val))return val;return[val>>>24,val>>>16&255,val>>>8&255,255&val].join(".")}}]);return IpFormat}(FieldFormat),_class.id="ip",_class.title="IP Address",_class.fieldType="ip",_temp}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createNumberFormat=createNumberFormat;var _numeral=__webpack_require__(811);function createNumberFormat(FieldFormat){return(0,_numeral.createNumeralFormat)(FieldFormat,{id:"number",title:"Number"})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createPercentFormat=createPercentFormat;var _numeral=__webpack_require__(811);function createPercentFormat(FieldFormat){return(0,_numeral.createNumeralFormat)(FieldFormat,{id:"percent",title:"Percentage",getParamDefaults:function getParamDefaults(getConfig){return{pattern:getConfig("format:percent:defaultPattern"),fractional:true}},afterConvert:function afterConvert(val){return this.param("fractional")?val:val/100}})}},function(module,exports,__webpack_require__){"use strict";(function(Buffer){var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:true});exports.createStringFormat=createStringFormat;var _as_pretty_string=__webpack_require__(597);var _shorten_dotted_string=__webpack_require__(598);var TRANSFORM_OPTIONS=[{kind:false,text:"- None -"},{kind:"lower",text:"Lower Case"},{kind:"upper",text:"Upper Case"},{kind:"title",text:"Title Case"},{kind:"short",text:"Short Dots"},{kind:"base64",text:"Base64 Decode"}];var DEFAULT_TRANSFORM_OPTION=false;function createStringFormat(FieldFormat){var _class,_temp;return _temp=_class=function(_FieldFormat){_inherits(StringFormat,_FieldFormat);function StringFormat(){_classCallCheck(this,StringFormat);return _possibleConstructorReturn(this,(StringFormat.__proto__||Object.getPrototypeOf(StringFormat)).apply(this,arguments))}_createClass(StringFormat,[{key:"getParamDefaults",value:function getParamDefaults(){return{transform:DEFAULT_TRANSFORM_OPTION}}},{key:"_base64Decode",value:function _base64Decode(val){try{return Buffer.from(val,"base64").toString("utf8")}catch(e){return(0,_as_pretty_string.asPrettyString)(val)}}},{key:"_toTitleCase",value:function _toTitleCase(val){return val.replace(/\w\S*/g,function(txt){return txt.charAt(0).toUpperCase()+txt.substr(1).toLowerCase()})}},{key:"_convert",value:function _convert(val){switch(this.param("transform")){case"lower":return String(val).toLowerCase();case"upper":return String(val).toUpperCase();case"title":return this._toTitleCase(val);case"short":return(0,_shorten_dotted_string.shortenDottedString)(val);case"base64":return this._base64Decode(val);default:return(0,_as_pretty_string.asPrettyString)(val)}}}]);return StringFormat}(FieldFormat),_class.id="string",_class.title="String",_class.fieldType=["number","boolean","date","ip","attachment","geo_point","geo_shape","string","murmur3","unknown","conflict"],_class.transformOptions=TRANSFORM_OPTIONS,_temp}}).call(exports,__webpack_require__(243).Buffer)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:true});exports.createSourceFormat=createSourceFormat;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _no_white_space=__webpack_require__(1275);var _aggressive_parse=__webpack_require__(1276);var _shorten_dotted_string=__webpack_require__(598);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var templateHtml="\n  <dl class=\"source truncate-by-height\">\n    <% defPairs.forEach(function (def) { %>\n      <dt><%- def[0] %>:</dt>\n      <dd><%= def[1] %></dd>\n      <%= ' ' %>\n    <% }); %>\n  </dl>";var template=_lodash2.default.template((0,_no_white_space.noWhiteSpace)(templateHtml));function createSourceFormat(FieldFormat){var SourceFormat=function(_FieldFormat){_inherits(SourceFormat,_FieldFormat);function SourceFormat(params,getConfig){_classCallCheck(this,SourceFormat);var _this=_possibleConstructorReturn(this,(SourceFormat.__proto__||Object.getPrototypeOf(SourceFormat)).call(this,params));_this.getConfig=getConfig;return _this}return SourceFormat}(FieldFormat);SourceFormat.id="_source";SourceFormat.title="_source";SourceFormat.fieldType="_source";SourceFormat.prototype._convert={text:function text(value){return(0,_aggressive_parse.toJson)(value)},html:function sourceToHtml(source,field,hit){if(!field)return _lodash2.default.escape(this.getConverterFor("text")(source));var highlights=hit&&hit.highlight||{};var formatted=field.indexPattern.formatHit(hit);var highlightPairs=[];var sourcePairs=[];var isShortDots=this.getConfig("shortDots:enable");_lodash2.default.keys(formatted).forEach(function(key){var pairs=highlights[key]?highlightPairs:sourcePairs;var field=isShortDots?(0,_shorten_dotted_string.shortenDottedString)(key):key;var val=formatted[key];pairs.push([field,val])},[]);return template({defPairs:highlightPairs.concat(sourcePairs)})}};return SourceFormat}},function(module,exports,__webpack_require__){"use strict";var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:true});exports.createColorFormat=createColorFormat;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _as_pretty_string=__webpack_require__(597);var _color_default=__webpack_require__(1277);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var convertTemplate=_lodash2.default.template('<span style="<%- style %>"><%- val %></span>');function createColorFormat(FieldFormat){var ColorFormat=function(_FieldFormat){_inherits(ColorFormat,_FieldFormat);function ColorFormat(){_classCallCheck(this,ColorFormat);return _possibleConstructorReturn(this,(ColorFormat.__proto__||Object.getPrototypeOf(ColorFormat)).apply(this,arguments))}_createClass(ColorFormat,[{key:"getParamDefaults",value:function getParamDefaults(){return{fieldType:null,colors:[_lodash2.default.cloneDeep(_color_default.DEFAULT_COLOR)]}}},{key:"findColorRuleForVal",value:function findColorRuleForVal(val){switch(this.param("fieldType")){case"string":return _lodash2.default.findLast(this.param("colors"),function(colorParam){return new RegExp(colorParam.regex).test(val)});case"number":return _lodash2.default.findLast(this.param("colors"),function(_ref){var range=_ref.range;if(!range)return;var _range$split=range.split(":"),_range$split2=_slicedToArray(_range$split,2),start=_range$split2[0],end=_range$split2[1];return val>=Number(start)&&val<=Number(end)});default:return null}}}]);return ColorFormat}(FieldFormat);ColorFormat.id="color";ColorFormat.title="Color";ColorFormat.fieldType=["number","string"];ColorFormat.prototype._convert={html:function html(val){var color=this.findColorRuleForVal(val);if(!color)return _lodash2.default.escape((0,_as_pretty_string.asPrettyString)(val));var style="";color.text&&(style+="color: "+color.text+";");color.background&&(style+="background-color: "+color.background+";");return convertTemplate({val:val,style:style})}};return ColorFormat}},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:true});exports.createTruncateFormat=createTruncateFormat;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var omission="...";function createTruncateFormat(FieldFormat){var _class,_temp;return _temp=_class=function(_FieldFormat){_inherits(TruncateFormat,_FieldFormat);function TruncateFormat(){_classCallCheck(this,TruncateFormat);return _possibleConstructorReturn(this,(TruncateFormat.__proto__||Object.getPrototypeOf(TruncateFormat)).apply(this,arguments))}_createClass(TruncateFormat,[{key:"_convert",value:function _convert(val){var length=this.param("fieldLength");if(length>0)return _lodash2.default.trunc(val,{length:length+omission.length,omission:omission});return val}}]);return TruncateFormat}(FieldFormat),_class.id="truncate",_class.title="Truncated String",_class.fieldType=["string"],_temp}},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:true});exports.createBoolFormat=createBoolFormat;var _as_pretty_string=__webpack_require__(597);function createBoolFormat(FieldFormat){var _class,_temp;return _temp=_class=function(_FieldFormat){_inherits(BoolFormat,_FieldFormat);function BoolFormat(){_classCallCheck(this,BoolFormat);return _possibleConstructorReturn(this,(BoolFormat.__proto__||Object.getPrototypeOf(BoolFormat)).apply(this,arguments))}_createClass(BoolFormat,[{key:"_convert",value:function _convert(value){"string"===typeof value&&(value=value.trim().toLowerCase());switch(value){case false:case 0:case"false":case"no":return"false";case true:case 1:case"true":case"yes":return"true";default:return(0,_as_pretty_string.asPrettyString)(value)}}}]);return BoolFormat}(FieldFormat),_class.id="boolean",_class.title="Boolean",_class.fieldType=["boolean","number","string"],_temp}},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:true});exports.createStaticLookupFormat=createStaticLookupFormat;function convertLookupEntriesToMap(lookupEntries){return lookupEntries.reduce(function(lookupMap,lookupEntry){lookupMap[lookupEntry.key]=lookupEntry.value;return lookupMap},{})}function createStaticLookupFormat(FieldFormat){var _class,_temp;return _temp=_class=function(_FieldFormat){_inherits(StaticLookupFormat,_FieldFormat);function StaticLookupFormat(){_classCallCheck(this,StaticLookupFormat);return _possibleConstructorReturn(this,(StaticLookupFormat.__proto__||Object.getPrototypeOf(StaticLookupFormat)).apply(this,arguments))}_createClass(StaticLookupFormat,[{key:"getParamDefaults",value:function getParamDefaults(){return{lookupEntries:[{}],unknownKeyValue:null}}},{key:"_convert",value:function _convert(val){var lookupEntries=this.param("lookupEntries");var unknownKeyValue=this.param("unknownKeyValue");var lookupMap=convertLookupEntriesToMap(lookupEntries);return lookupMap[val]||unknownKeyValue||val}}]);return StaticLookupFormat}(FieldFormat),_class.id="static_lookup",_class.title="Static Lookup",_class.fieldType=["string"],_temp}},function(module,exports,__webpack_require__){"use strict";var _saved_object_registry=__webpack_require__(294);__webpack_require__(1278);_saved_object_registry.SavedObjectRegistryProvider.register(function(savedDashboards){return savedDashboards})},function(module,exports,__webpack_require__){"use strict";var _angular=__webpack_require__(16);var _angular2=_interopRequireDefault(_angular);var _modules=__webpack_require__(2);var _dashboard_constants=__webpack_require__(251);var _legacy_class=__webpack_require__(77);var _courier=__webpack_require__(94);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("app/dashboard");_module.factory("SavedDashboard",function(Private,config){var SavedObject=Private(_courier.SavedObjectProvider);(0,_legacy_class.createLegacyClass)(SavedDashboard).inherits(SavedObject);function SavedDashboard(id){SavedDashboard.Super.call(this,{type:SavedDashboard.type,mapping:SavedDashboard.mapping,searchSource:SavedDashboard.searchsource,id:id,defaults:{title:"New Dashboard",hits:0,description:"",panelsJSON:"[]",optionsJSON:_angular2.default.toJson({darkTheme:config.get("dashboard:defaultDarkTheme"),useMargins:!id,hidePanelTitles:false}),version:1,timeRestore:false,timeTo:void 0,timeFrom:void 0,refreshInterval:void 0},clearSavedIndexPattern:true});this.showInRecentlyAccessed=true}SavedDashboard.type="dashboard";SavedDashboard.mapping={title:"text",hits:"integer",description:"text",panelsJSON:"text",optionsJSON:"text",uiStateJSON:"text",version:"integer",timeRestore:"boolean",timeTo:"keyword",timeFrom:"keyword",refreshInterval:{type:"object",properties:{display:{type:"keyword"},pause:{type:"boolean"},section:{type:"integer"},value:{type:"integer"}}}};SavedDashboard.fieldOrder=["title","description"];SavedDashboard.searchsource=true;SavedDashboard.prototype.getFullPath=function(){return"/app/kibana#"+(0,_dashboard_constants.createDashboardEditUrl)(this.id)};return SavedDashboard})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _saved_object=__webpack_require__(2985);Object.defineProperty(exports,"SavedObjectProvider",{enumerable:true,get:function get(){return _saved_object.SavedObjectProvider}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"===typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};exports.SavedObjectProvider=SavedObjectProvider;var _angular=__webpack_require__(16);var _angular2=_interopRequireDefault(_angular);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _errors=__webpack_require__(56);var _mapping_setup=__webpack_require__(1279);var _mapping_setup2=_interopRequireDefault(_mapping_setup);var _search_source=__webpack_require__(812);var _saved_objects=__webpack_require__(57);var _migrateLegacyQuery=__webpack_require__(600);var _persisted_log=__webpack_require__(250);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var OVERWRITE_REJECTED="Overwrite confirmation was rejected";var SAVE_DUPLICATE_REJECTED="Save with duplicate title confirmation was rejected";function isErrorNonFatal(error){if(!error)return false;return error.message===OVERWRITE_REJECTED||error.message===SAVE_DUPLICATE_REJECTED}function SavedObjectProvider(Promise,Private,Notifier,confirmModalPromise,indexPatterns){var savedObjectsClient=Private(_saved_objects.SavedObjectsClientProvider);var SearchSource=Private(_search_source.SearchSourceProvider);var mappingSetup=Private(_mapping_setup2.default);function SavedObject(config){var _this=this;_lodash2.default.isObject(config)||(config={});var esType=config.type;this.getDisplayName=function(){return esType};this.getEsType=function(){return esType};this.isSaving=false;this.defaults=config.defaults||{};var mapping=mappingSetup.expandShorthand(config.mapping);var afterESResp=config.afterESResp||_lodash2.default.noop;var customInit=config.init||_lodash2.default.noop;this.searchSource=config.searchSource?new SearchSource:void 0;this.id=config.id||void 0;this.copyOnSave=false;var parseSearchSource=function parseSearchSource(searchSourceJson){if(!_this.searchSource)return;var searchSourceValues=void 0;try{searchSourceValues=JSON.parse(searchSourceJson)}catch(e){throw new _errors.InvalidJSONProperty("Invalid JSON in "+esType+' "'+_this.id+'". '+e.message+" JSON: "+searchSourceJson)}if(!searchSourceValues||"object"!==("undefined"===typeof searchSourceValues?"undefined":_typeof(searchSourceValues)))throw new _errors.InvalidJSONProperty("Invalid searchSourceJSON in "+esType+' "'+_this.id+'".');var searchSourceFields=_this.searchSource.getFields();var fnProps=_lodash2.default.transform(searchSourceFields,function(dynamic,val,name){_lodash2.default.isFunction(val)&&(dynamic[name]=val)},{});_this.searchSource.setFields(_lodash2.default.defaults(searchSourceValues,fnProps));_lodash2.default.isUndefined(_this.searchSource.getOwnField("query"))||_this.searchSource.setField("query",(0,_migrateLegacyQuery.migrateLegacyQuery)(_this.searchSource.getOwnField("query")))};this.hydrateIndexPattern=function(id){if(!_this.searchSource)return Promise.resolve(null);if(config.clearSavedIndexPattern){_this.searchSource.setField("index",null);return Promise.resolve(null)}var index=id||config.indexPattern||_this.searchSource.getOwnField("index");if(!index)return Promise.resolve(null);index instanceof indexPatterns.IndexPattern||(index=indexPatterns.get(index));return Promise.resolve(index).then(function(indexPattern){_this.searchSource.setField("index",indexPattern)})};this.init=_lodash2.default.once(function(){if(!esType)throw new Error("You must define a type name to use SavedObject objects.");return Promise.resolve().then(function(){if(!_this.id){_lodash2.default.assign(_this,_this.defaults);return _this.hydrateIndexPattern().then(function(){return afterESResp.call(_this)})}return savedObjectsClient.get(esType,_this.id).then(function(resp){return{_id:resp.id,_type:resp.type,_source:_lodash2.default.cloneDeep(resp.attributes),found:!!resp._version}}).then(_this.applyESResp).catch(_this.applyEsResp)}).then(function(){return customInit.call(_this)}).then(function(){return _this})});this.applyESResp=function(resp){_this._source=_lodash2.default.cloneDeep(resp._source);if(null!=resp.found&&!resp.found)throw new _errors.SavedObjectNotFound(esType,_this.id);var meta=resp._source.kibanaSavedObjectMeta||{};delete resp._source.kibanaSavedObjectMeta;if(!config.indexPattern&&_this._source.indexPattern){config.indexPattern=_this._source.indexPattern;delete _this._source.indexPattern}_lodash2.default.defaults(_this._source,_this.defaults);_lodash2.default.forOwn(mapping,function(fieldMapping,fieldName){fieldMapping._deserialize&&(_this._source[fieldName]=fieldMapping._deserialize(_this._source[fieldName],resp,fieldName,fieldMapping))});_lodash2.default.assign(_this,_this._source);_this.lastSavedTitle=_this.title;return Promise.try(function(){parseSearchSource(meta.searchSourceJSON);return _this.hydrateIndexPattern()}).then(function(){return Promise.cast(afterESResp.call(_this,resp))})};this.serialize=function(){var body={};_lodash2.default.forOwn(mapping,function(fieldMapping,fieldName){null!=_this[fieldName]&&(body[fieldName]=fieldMapping._serialize?fieldMapping._serialize(_this[fieldName]):_this[fieldName])});if(_this.searchSource){var searchSourceFields=_lodash2.default.omit(_this.searchSource.getFields(),["sort","size"]);body.kibanaSavedObjectMeta={searchSourceJSON:_angular2.default.toJson(searchSourceFields)}}return body};this.isTitleChanged=function(){return _this._source&&_this._source.title!==_this.title};var createSource=function createSource(source){return savedObjectsClient.create(esType,source,{id:_this.id}).catch(function(err){if(409===_lodash2.default.get(err,"res.status")){var confirmMessage="Are you sure you want to overwrite "+_this.title+"?";return confirmModalPromise(confirmMessage,{confirmButtonText:"Overwrite "+_this.getDisplayName()}).then(function(){return savedObjectsClient.create(esType,source,{id:_this.id,overwrite:true})}).catch(function(){return Promise.reject(new Error(OVERWRITE_REJECTED))})}return Promise.reject(err)})};var displayDuplicateTitleConfirmModal=function displayDuplicateTitleConfirmModal(){var confirmMessage="A "+_this.getDisplayName()+" with the title '"+_this.title+"' already exists. Would you like to save anyway?";return confirmModalPromise(confirmMessage,{confirmButtonText:"Save "+_this.getDisplayName()}).catch(function(){return Promise.reject(new Error(SAVE_DUPLICATE_REJECTED))})};var checkForDuplicateTitle=function checkForDuplicateTitle(isTitleDuplicateConfirmed,onTitleDuplicate){if(isTitleDuplicateConfirmed)return Promise.resolve();if(_this.title===_this.lastSavedTitle&&!_this.copyOnSave)return Promise.resolve();return(0,_saved_objects.findObjectByTitle)(savedObjectsClient,_this.getEsType(),_this.title).then(function(duplicate){if(!duplicate)return true;if(duplicate.id===_this.id)return true;if(onTitleDuplicate){onTitleDuplicate();return Promise.reject(new Error(SAVE_DUPLICATE_REJECTED))}return displayDuplicateTitleConfirmModal()})};this.save=function(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref$confirmOverwrite=_ref.confirmOverwrite,confirmOverwrite=void 0!==_ref$confirmOverwrite&&_ref$confirmOverwrite,_ref$isTitleDuplicate=_ref.isTitleDuplicateConfirmed,isTitleDuplicateConfirmed=void 0!==_ref$isTitleDuplicate&&_ref$isTitleDuplicate,onTitleDuplicate=_ref.onTitleDuplicate;var originalId=_this.id;_this.copyOnSave&&(_this.id=null);var source=_this.serialize();_this.isSaving=true;return checkForDuplicateTitle(isTitleDuplicateConfirmed,onTitleDuplicate).then(function(){return confirmOverwrite?createSource(source):savedObjectsClient.create(esType,source,{id:_this.id,overwrite:true})}).then(function(resp){_this.id=resp.id}).then(function(){_this.showInRecentlyAccessed&&_this.getFullPath&&_persisted_log.recentlyAccessed.add(_this.getFullPath(),_this.title,_this.id);_this.isSaving=false;_this.lastSavedTitle=_this.title;return _this.id}).catch(function(err){_this.isSaving=false;_this.id=originalId;if(isErrorNonFatal(err))return;return Promise.reject(err)})};this.destroy=function(){_this.searchSource&&_this.searchSource.cancelQueued()};this.delete=function(){return savedObjectsClient.delete(esType,_this.id)}}return SavedObject}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();exports.SearchSourceProvider=SearchSourceProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _angular=__webpack_require__(16);var _angular2=_interopRequireDefault(_angular);__webpack_require__(475);var _normalize_sort_request=__webpack_require__(2987);var _request=__webpack_require__(1280);var _segmented_search_request=__webpack_require__(2990);var _search_request_queue=__webpack_require__(481);var _fetch=__webpack_require__(813);var _field_wildcard=__webpack_require__(1286);var _highlight=__webpack_require__(3007);var _build_query=__webpack_require__(1287);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var FIELDS=["type","query","filter","sort","highlight","highlightAll","aggs","from","searchAfter","size","source","version","fields","index"];function parseInitialFields(initialFields){if(!initialFields)return{};return"string"===typeof initialFields?JSON.parse(initialFields):_lodash2.default.cloneDeep(initialFields)}function isIndexPattern(val){return Boolean(val&&"function"===typeof val.toIndexList)}function SearchSourceProvider(Promise,Private,config){var SearchRequest=Private(_request.SearchRequestProvider);var SegmentedSearchRequest=Private(_segmented_search_request.SegmentedSearchRequestProvider);var normalizeSortRequest=Private(_normalize_sort_request.NormalizeSortRequestProvider);var fetchSoon=Private(_fetch.FetchSoonProvider);var buildESQuery=Private(_build_query.BuildESQueryProvider);var _Private=Private(_field_wildcard.FieldWildcardProvider),fieldWildcardFilter=_Private.fieldWildcardFilter;var getConfig=function getConfig(){return config.get.apply(config,arguments)};var forIp=Symbol("for which index pattern?");var SearchSource=function(){function SearchSource(initialFields){var _this=this;_classCallCheck(this,SearchSource);this.setField=function(field,value){if(!FIELDS.includes(field))throw new Error("Can't set field '"+field+"' on SearchSource. Acceptable fields are: "+FIELDS.join(", ")+".");if("index"===field){var fields=_this._fields;var hasSource=fields.source;var sourceCameFromIp=hasSource&&fields.source.hasOwnProperty(forIp);var sourceIsForOurIp=sourceCameFromIp&&fields.source[forIp]===fields.index;sourceIsForOurIp&&delete fields.source;if(null===value||void 0===value){delete fields.index;return _this}if(!isIndexPattern(value))throw new TypeError("expected indexPattern to be an IndexPattern duck.");fields[field]=value;if(!fields.source){fields.source=function(){return value.getSourceFiltering()};fields.source[forIp]=value}return _this}if(null==value){delete _this._fields[field];return _this}_this._fields[field]=value;return _this};this.getField=function(field){if(!FIELDS.includes(field))throw new Error("Can't get field '"+field+"' from SearchSource. Acceptable fields are: "+FIELDS.join(", ")+".");var searchSource=_this;while(searchSource){var value=searchSource._fields[field];if(void 0!==value)return value;searchSource=searchSource.getParent()}};this._id=_lodash2.default.uniqueId("data_source");this._fields=parseInitialFields(initialFields);this._parent=void 0;this.history=[];this._requestStartHandlers=[];this._inheritOptions={};this._filterPredicates=[function(filter){return filter},function(filter){var disabled=_lodash2.default.get(filter,"meta.disabled");return void 0===disabled||false===disabled},function(filter,data){if(!config.get("courier:ignoreFilterIfFieldNotInIndex"))return true;if("meta"in filter&&"index"in data){var field=data.index.fields.byName[filter.meta.key];if(!field)return false}return true}]}_createClass(SearchSource,[{key:"setFields",value:function setFields(newFields){this._fields=newFields;return this}},{key:"getId",value:function getId(){return this._id}},{key:"getFields",value:function getFields(){return _lodash2.default.clone(this._fields)}},{key:"getOwnField",value:function getOwnField(field){if(!FIELDS.includes(field))throw new Error("Can't get field '"+field+"' from SearchSource. Acceptable fields are: "+FIELDS.join(", ")+".");var value=this._fields[field];if(void 0!==value)return value}},{key:"create",value:function create(){return new SearchSource}},{key:"createCopy",value:function createCopy(){var json=_angular2.default.toJson(this._fields);var newSearchSource=new SearchSource(json);newSearchSource.setField("index",this.getField("index"));newSearchSource.setParent(this.getParent());return newSearchSource}},{key:"createChild",value:function createChild(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var childSearchSource=new SearchSource;childSearchSource.setParent(this,options);return childSearchSource}},{key:"setParent",value:function setParent(parent){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._parent=parent;this._inheritOptions=options;return this}},{key:"getParent",value:function getParent(){return this._parent||void 0}},{key:"fetch",value:function fetch(){var self=this;var req=_lodash2.default.first(self._myStartableQueued());if(!req){var errorHandler=function errorHandler(request,error){request.defer.reject(error);request.abort()};req=self._createRequest({errorHandler:errorHandler})}fetchSoon.fetchSearchRequests([req]);return req.getCompletePromise()}},{key:"fetchQueued",value:function fetchQueued(){return fetchSoon.fetchSearchRequests(this._myStartableQueued())}},{key:"cancelQueued",value:function cancelQueued(){var _this2=this;_search_request_queue.searchRequestQueue.getAll().filter(function(req){return req.source===_this2}).forEach(function(req){return req.abort()})}},{key:"onRequestStart",value:function onRequestStart(handler){this._requestStartHandlers.push(handler)}},{key:"requestIsStarting",value:function requestIsStarting(request){var _this3=this;this.activeFetchCount=(this.activeFetchCount||0)+1;this.history=[request];var handlers=[].concat(_toConsumableArray(this._requestStartHandlers));if(this._inheritOptions.callParentStartHandlers){var searchSource=this.getParent();while(searchSource){handlers.push.apply(handlers,_toConsumableArray(searchSource._requestStartHandlers));searchSource=searchSource.getParent()}}return Promise.map(handlers,function(fn){return fn(_this3,request)}).then(_lodash2.default.noop)}},{key:"onResults",value:function onResults(){var self=this;return new Promise(function(resolve,reject){var defer=Promise.defer();defer.promise.then(resolve,reject);var errorHandler=function errorHandler(request,error){reject(error);request.abort()};self._createRequest({defer:defer,errorHandler:errorHandler})})}},{key:"onBeginSegmentedFetch",value:function onBeginSegmentedFetch(initFunction){var self=this;return new Promise(function(resolve,reject){function addRequest(){var defer=Promise.defer();var errorHandler=function errorHandler(request,error){reject(error);request.abort()};var req=new SegmentedSearchRequest({source:self,defer:defer,errorHandler:errorHandler,initFn:initFunction});return req.getCompletePromise().then(addRequest)}addRequest()})}},{key:"getSearchRequestBody",value:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var searchRequest;return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return this._flatten();case 2:searchRequest=_context.sent;return _context.abrupt("return",searchRequest.body);case 4:case"end":return _context.stop()}},_callee,this)}));function getSearchRequestBody(){return _ref.apply(this,arguments)}return getSearchRequestBody}()},{key:"requestIsStopped",value:function requestIsStopped(){this.activeFetchCount-=1}},{key:"destroy",value:function destroy(){this.cancelQueued();this._requestStartHandlers.length=0}},{key:"_myStartableQueued",value:function _myStartableQueued(){var _this4=this;return _search_request_queue.searchRequestQueue.getStartable().filter(function(req){return req.source===_this4})}},{key:"_createRequest",value:function _createRequest(_ref2){var defer=_ref2.defer,errorHandler=_ref2.errorHandler;return new SearchRequest({source:this,defer:defer,errorHandler:errorHandler})}},{key:"_mergeProp",value:function _mergeProp(data,val,key){var _this5=this;if("function"===typeof val){var source=this;return Promise.cast(val(this)).then(function(newVal){return source._mergeProp(data,newVal,key)})}if(null==val||!key||!_lodash2.default.isString(key))return;switch(key){case"filter":var filters=Array.isArray(val)?val:[val];filters=filters.filter(function(filter){return _this5._filterPredicates.every(function(predicate){return predicate(filter,data)})});data.filters=[].concat(_toConsumableArray(data.filters||[]),_toConsumableArray(filters));return;case"index":case"type":case"id":case"highlightAll":key&&null==data[key]&&(data[key]=val);return;case"searchAfter":key="search_after";addToBody();break;case"source":key="_source";addToBody();break;case"sort":val=normalizeSortRequest(val,this.getField("index"));addToBody();break;case"query":data.query=(data.query||[]).concat(val);break;case"fields":data[key]=_lodash2.default.uniq([].concat(_toConsumableArray(data[key]||[]),_toConsumableArray(val)));break;default:addToBody()}function addToBody(){data.body=data.body||{};null==data.body[key]&&(data.body[key]=val)}}},{key:"_flatten",value:function _flatten(){var flatData={};var root=this;var current=this;return function ittr(){return Promise.all(_lodash2.default.map(current._fields,function ittr(value,key){if(Promise.is(value))return value.then(function(value){return ittr(value,key)});var prom=root._mergeProp(flatData,value,key);return Promise.is(prom)?prom:null})).then(function(){var parent=current.getParent();if(parent){current=parent;return ittr()}})}().then(function(){flatData.body=flatData.body||{};var computedFields=flatData.index.getComputedFields();flatData.body.stored_fields=computedFields.storedFields;flatData.body.script_fields=flatData.body.script_fields||{};flatData.body.docvalue_fields=flatData.body.docvalue_fields||[];_lodash2.default.extend(flatData.body.script_fields,computedFields.scriptFields);flatData.body.docvalue_fields=_lodash2.default.union(flatData.body.docvalue_fields,computedFields.docvalueFields);if(flatData.body._source){var filter=fieldWildcardFilter(flatData.body._source.excludes);flatData.body.docvalue_fields=flatData.body.docvalue_fields.filter(function(docvalueField){return filter(docvalueField.field)})}var fields=flatData.fields;if(fields){flatData.body.docvalue_fields=_lodash2.default.intersection(flatData.body.docvalue_fields,fields);flatData.body.script_fields=_lodash2.default.pick(flatData.body.script_fields,fields);var remainingFields=_lodash2.default.difference(fields,_lodash2.default.keys(flatData.body.script_fields));flatData.body.stored_fields=remainingFields;_lodash2.default.set(flatData.body,"_source.includes",remainingFields)}flatData.body.query=buildESQuery(flatData.index,flatData.query,flatData.filters);if(null!=flatData.highlightAll){flatData.highlightAll&&flatData.body.query&&(flatData.body.highlight=(0,_highlight.getHighlightRequest)(flatData.body.query,getConfig));delete flatData.highlightAll}var translateToQuery=function translateToQuery(filter){if(!filter)return;if(filter.query)return filter.query;return filter};(function recurse(aggBranch){if(!aggBranch)return;Object.keys(aggBranch).forEach(function(id){var agg=aggBranch[id];if(agg.filters){var filters=agg.filters.filters;Object.keys(filters).forEach(function(filterId){filters[filterId]=translateToQuery(filters[filterId])})}recurse(agg.aggs||agg.aggregations)})})(flatData.body.aggs||flatData.body.aggregations);return flatData})}}]);return SearchSource}();return SearchSource}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NormalizeSortRequestProvider=NormalizeSortRequestProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function NormalizeSortRequestProvider(config){var defaultSortOptions=config.get("sort:options");return function(sortObject,indexPattern){return[].concat(sortObject).map(function(sortable){return normalize(sortable,indexPattern)})};function normalize(sortable,indexPattern){var normalized={};var sortField=_lodash2.default.keys(sortable)[0];var sortValue=sortable[sortField];var indexField=indexPattern.fields.byName[sortField];if(indexField&&indexField.scripted&&indexField.sortable){var direction=void 0;_lodash2.default.isString(sortValue)&&(direction=sortValue);_lodash2.default.isObject(sortValue)&&sortValue.order&&(direction=sortValue.order);sortField="_script";sortValue={script:{inline:indexField.script,lang:indexField.lang},type:castSortType(indexField.type),order:direction}}else{_lodash2.default.isString(sortValue)&&(sortValue={order:sortValue});sortValue=_lodash2.default.defaults({},sortValue,defaultSortOptions);"_score"===sortField&&delete sortValue.unmapped_type}normalized[sortField]=sortValue;return normalized}}function castSortType(type){var typeCastings={number:"number",string:"string",date:"number",boolean:"string"};var castedType=typeCastings[type];if(!castedType)throw new Error("Unsupported script sort type: "+type);return castedType}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();exports.SearchRequestProvider=SearchRequestProvider;var _moment=__webpack_require__(10);var _moment2=_interopRequireDefault(_moment);var _search_request_queue=__webpack_require__(481);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function SearchRequestProvider(Promise){var SearchRequest=function(){function SearchRequest(_ref){var source=_ref.source,defer=_ref.defer,errorHandler=_ref.errorHandler;_classCallCheck(this,SearchRequest);_initialiseProps.call(this);if(!errorHandler)throw new Error("errorHandler is required");this.errorHandler=errorHandler;this.source=source;this.defer=defer||Promise.defer();this.abortedDefer=Promise.defer();this.type="search";this.moment=void 0;this.ms=void 0;this.started=false;this.stopped=false;this._isFetchRequested=false;_search_request_queue.searchRequestQueue.add(this)}_createClass(SearchRequest,[{key:"canStart",value:function canStart(){if(this.source._fetchDisabled)return false;if(this.stopped)return false;if(this._isFetchRequested)return false;return true}},{key:"isFetchRequestedAndPending",value:function isFetchRequestedAndPending(){if(this.started)return false;return this._isFetchRequested}},{key:"_setFetchRequested",value:function _setFetchRequested(){this._isFetchRequested=true}},{key:"start",value:function start(){if(this.started)throw new TypeError("Unable to start request because it has already started");this.started=true;this.moment=(0,_moment2.default)();return this.source.requestIsStarting(this)}},{key:"getFetchParams",value:function getFetchParams(){return this.source._flatten()}},{key:"filterError",value:function filterError(){return false}},{key:"handleResponse",value:function handleResponse(resp){this.success=true;this.resp=resp}},{key:"handleFailure",value:function handleFailure(error){this.success=false;this.resp=error&&error.resp;return this.errorHandler(this,error)}},{key:"isIncomplete",value:function isIncomplete(){return false}},{key:"continue",value:function _continue(){throw new Error("Unable to continue "+this.type+" request")}},{key:"retry",value:function retry(){var clone=this.clone();this.abort();return clone}},{key:"_markStopped",value:function _markStopped(){if(this.stopped)return;this.stopped=true;this.source.requestIsStopped(this);_search_request_queue.searchRequestQueue.remove(this)}},{key:"abort",value:function abort(){this._markStopped();this.defer=null;this.aborted=true;this.abortedDefer.resolve();this.abortedDefer=null}},{key:"whenAborted",value:function whenAborted(cb){this.abortedDefer.promise.then(cb)}},{key:"complete",value:function complete(){this._markStopped();this.ms=-1*this.moment.diff();this.defer.resolve(this.resp)}},{key:"getCompletePromise",value:function getCompletePromise(){return this.defer.promise}},{key:"getCompleteOrAbortedPromise",value:function getCompleteOrAbortedPromise(){return Promise.race([this.defer.promise,this.abortedDefer.promise])}}]);return SearchRequest}();var _initialiseProps=function _initialiseProps(){var _this=this;this.clone=function(){var source=_this.source,defer=_this.defer,errorHandler=_this.errorHandler;return new SearchRequest({source:source,defer:defer,errorHandler:errorHandler})}};return SearchRequest}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var SearchRequestQueue=function(){function SearchRequestQueue(){_classCallCheck(this,SearchRequestQueue);this._searchRequests=[]}_createClass(SearchRequestQueue,[{key:"getCount",value:function getCount(){return this._searchRequests.length}},{key:"add",value:function add(searchRequest){this._searchRequests.push(searchRequest)}},{key:"remove",value:function remove(searchRequest){this._searchRequests=this._searchRequests.filter(function(existingSearchRequest){return existingSearchRequest!==searchRequest})}},{key:"removeAll",value:function removeAll(){this._searchRequests.length=0}},{key:"abortAll",value:function abortAll(){this._searchRequests.forEach(function(searchRequest){return searchRequest.abort()})}},{key:"getAll",value:function getAll(){return this._searchRequests}},{key:"getSearchRequestAt",value:function getSearchRequestAt(index){return this._searchRequests[index]}},{key:"getInactive",value:function getInactive(){return this._searchRequests.filter(function(searchRequest){return!searchRequest.started})}},{key:"getStartable",value:function getStartable(){return this._searchRequests.filter(function(searchRequest){return searchRequest.canStart()})}},{key:"getPending",value:function getPending(){return this._searchRequests.filter(function(searchRequest){return searchRequest.isFetchRequestedAndPending()})}}]);return SearchRequestQueue}();exports.searchRequestQueue=new SearchRequestQueue},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _segmented_search_request=__webpack_require__(2991);Object.defineProperty(exports,"SegmentedSearchRequestProvider",{enumerable:true,get:function get(){return _segmented_search_request.SegmentedSearchRequestProvider}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;if(void 0===getter)return;return getter.call(receiver)};exports.SegmentedSearchRequestProvider=SegmentedSearchRequestProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _timefilter=__webpack_require__(14);var _search_request=__webpack_require__(1281);var _segmented_handle=__webpack_require__(2992);var _collection=__webpack_require__(410);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function SegmentedSearchRequestProvider(Private,config){var SearchRequest=Private(_search_request.SearchRequestProvider);var SegmentedHandle=Private(_segmented_handle.SegmentedHandleProvider);var SegmentedSearchRequest=function(_SearchRequest){_inherits(SegmentedSearchRequest,_SearchRequest);function SegmentedSearchRequest(_ref){var source=_ref.source,defer=_ref.defer,errorHandler=_ref.errorHandler,initFn=_ref.initFn;_classCallCheck(this,SegmentedSearchRequest);var _this=_possibleConstructorReturn(this,(SegmentedSearchRequest.__proto__||Object.getPrototypeOf(SegmentedSearchRequest)).call(this,{source:source,defer:defer,errorHandler:errorHandler}));_this.type="segmented";_this._initFn=initFn;_this._desiredSize=null;_this._maxSegments=config.get("courier:maxSegmentCount");_this._direction="desc";_this._sortFn=null;_this._queueCreated=false;_this._handle=new SegmentedHandle(_this);_this._hitWindow=null;_this._getFlattenedSource=_lodash2.default.once(_this._getFlattenedSource);return _this}_createClass(SegmentedSearchRequest,[{key:"start",value:function start(){var _this2=this;return _get(SegmentedSearchRequest.prototype.__proto__||Object.getPrototypeOf(SegmentedSearchRequest.prototype),"start",this).call(this).then(function(){_this2._complete=[];_this2._active=null;_this2._segments=[];_this2._all=[];_this2._queue=[];_this2._mergedResp={took:0,hits:{hits:[],total:0,max_score:0}};_lodash2.default.isFunction(_this2._initFn)&&_this2._initFn(_this2._handle);return _this2._createQueue()}).then(function(queue){if(_this2.stopped)return;_this2._all=queue.slice(0);return _this2._reportStatus()})}},{key:"continue",value:function _continue(){return this._reportStatus()}},{key:"getFetchParams",value:function getFetchParams(){var _this3=this;return this._getFlattenedSource().then(function(flatSource){var params=_lodash2.default.cloneDeep(flatSource);var remainingSegments=_this3._maxSegments-_this3._segments.length;var indexCount=Math.max(1,Math.floor(_this3._queue.length/remainingSegments));var indices=_this3._active=_this3._queue.splice(0,indexCount);params.index=indices.map(function(_ref2){var index=_ref2.index;return index}).join(",");_lodash2.default.isNumber(_this3._desiredSize)&&(params.body.size=_this3._pickSizeForIndices(indices));return params})}},{key:"handleResponse",value:function handleResponse(resp){return this._consumeSegment(resp)}},{key:"filterError",value:function filterError(resp){if(/ClusterBlockException.*index\sclosed/.test(resp.error)){this._consumeSegment(false);return true}}},{key:"isIncomplete",value:function isIncomplete(){var queueNotCreated=!this._queueCreated;var queueNotEmpty=this._queue.length>0;return queueNotCreated||queueNotEmpty}},{key:"clone",value:function clone(){return new SegmentedSearchRequest(this.source,this.defer,this._initFn)}},{key:"complete",value:function complete(){this._reportStatus();this._handle.emit("complete");return _get(SegmentedSearchRequest.prototype.__proto__||Object.getPrototypeOf(SegmentedSearchRequest.prototype),"complete",this).call(this)}},{key:"setMaxSegments",value:function setMaxSegments(maxSegments){this._maxSegments=Math.max(_lodash2.default.parseInt(maxSegments),1)}},{key:"setDirection",value:function setDirection(dir){switch(dir){case"asc":case"desc":return this._direction=dir;default:throw new TypeError('unknown sort direction "'+dir+'"')}}},{key:"setSortFn",value:function setSortFn(sortFn){this._sortFn=sortFn}},{key:"setSize",value:function setSize(totalSize){this._desiredSize=_lodash2.default.parseInt(totalSize);isNaN(this._desiredSize)&&(this._desiredSize=null)}},{key:"_createQueue",value:function _createQueue(){var _this4=this;var timeBounds=_timefilter.timefilter.getBounds();var indexPattern=this.source.getField("index");this._queueCreated=false;return indexPattern.toDetailedIndexList(timeBounds.min,timeBounds.max,this._direction).then(function(queue){_this4._queue=queue;_this4._queueCreated=true;return queue})}},{key:"_reportStatus",value:function _reportStatus(){return this._handle.emit("status",{total:this._queueCreated?this._all.length:NaN,complete:this._queueCreated?this._complete.length:NaN,remaining:this._queueCreated?this._queue.length:NaN,hitCount:this._queueCreated?this._mergedResp.hits.hits.length:NaN})}},{key:"_getFlattenedSource",value:function _getFlattenedSource(){return this.source._flatten()}},{key:"_consumeSegment",value:function _consumeSegment(seg){var index=this._active;this._complete.push(index);if(!seg)return;var hadHits=_lodash2.default.get(this._mergedResp,"hits.hits.length")>0;var gotHits=_lodash2.default.get(seg,"hits.hits.length")>0;var firstHits=!hadHits&&gotHits;var haveHits=hadHits||gotHits;this._mergeSegment(seg);this.resp=_lodash2.default.omit(this._mergedResp,"_bucketIndex");firstHits&&this._handle.emit("first",seg);gotHits&&this._handle.emit("segment",seg);haveHits&&this._handle.emit("mergedSegment",this.resp)}},{key:"_mergeHits",value:function _mergeHits(hits){var mergedHits=this._mergedResp.hits.hits;var desiredSize=this._desiredSize;var sortFn=this._sortFn;(0,_collection.pushAll)(hits,mergedHits);sortFn&&mergedHits.sort(sortFn);_lodash2.default.isNumber(desiredSize)&&(this._mergedResp.hits.hits=mergedHits.slice(0,desiredSize))}},{key:"_mergeSegment",value:function _mergeSegment(seg){var merged=this._mergedResp;this._segments.push(seg);merged.took+=seg.took;merged.hits.total+=seg.hits.total;merged.hits.max_score=Math.max(merged.hits.max_score,seg.hits.max_score);if(_lodash2.default.size(seg.hits.hits)){this._mergeHits(seg.hits.hits);this._detectHitsWindow(merged.hits.hits)}if(!seg.aggregations)return;Object.keys(seg.aggregations).forEach(function(aggKey){if(!merged.aggregations){merged.aggregations={};merged._bucketIndex={}}merged.aggregations[aggKey]||(merged.aggregations[aggKey]={buckets:[]});seg.aggregations[aggKey].buckets.forEach(function(bucket){var mbucket=merged._bucketIndex[bucket.key];if(mbucket){mbucket.doc_count+=bucket.doc_count;return}mbucket=merged._bucketIndex[bucket.key]=bucket;merged.aggregations[aggKey].buckets.push(mbucket)})})}},{key:"_detectHitsWindow",value:function _detectHitsWindow(hits){hits=hits||[];var indexPattern=this.source.getField("index");var desiredSize=this._desiredSize;var size=_lodash2.default.size(hits);if(!_lodash2.default.isNumber(desiredSize)||size<desiredSize){this._hitWindow={size:size,min:-Infinity,max:Infinity};return}var min=void 0;var max=void 0;hits.forEach(function(deepHit){var hit=indexPattern.flattenHit(deepHit);var time=hit[indexPattern.timeFieldName];(null==min||time<min)&&(min=time);(null==max||time>max)&&(max=time)});this._hitWindow={size:size,min:min,max:max}}},{key:"_pickSizeForIndices",value:function _pickSizeForIndices(indices){var hitWindow=this._hitWindow;var desiredSize=this._desiredSize;if(!_lodash2.default.isNumber(desiredSize))return null;if(!hitWindow)return desiredSize;if(!this._sortFn)return Math.max(desiredSize-hitWindow.size,0);var someOverlap=indices.some(function(index){return index.min<=hitWindow.max&&hitWindow.min<=index.max});return someOverlap?desiredSize:0}}]);return SegmentedSearchRequest}(SearchRequest);return SegmentedSearchRequest}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();exports.SegmentedHandleProvider=SegmentedHandleProvider;var _events=__webpack_require__(398);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function SegmentedHandleProvider(Private){var Events=Private(_events.EventsProvider);var segmentedRequest=Symbol("Actual Segmented Request");return function(_Events){_inherits(SegmentedHandle,_Events);function SegmentedHandle(req){_classCallCheck(this,SegmentedHandle);var _this=_possibleConstructorReturn(this,(SegmentedHandle.__proto__||Object.getPrototypeOf(SegmentedHandle)).call(this));_this[segmentedRequest]=req;return _this}_createClass(SegmentedHandle,[{key:"setDirection",value:function setDirection(){var _segmentedRequest;(_segmentedRequest=this[segmentedRequest]).setDirection.apply(_segmentedRequest,arguments)}},{key:"setSize",value:function setSize(){var _segmentedRequest2;(_segmentedRequest2=this[segmentedRequest]).setSize.apply(_segmentedRequest2,arguments)}},{key:"setMaxSegments",value:function setMaxSegments(){var _segmentedRequest3;(_segmentedRequest3=this[segmentedRequest]).setMaxSegments.apply(_segmentedRequest3,arguments)}},{key:"setSortFn",value:function setSortFn(){var _segmentedRequest4;(_segmentedRequest4=this[segmentedRequest]).setSortFn.apply(_segmentedRequest4,arguments)}}]);return SegmentedHandle}(Events)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FetchSoonProvider=FetchSoonProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _search_request_queue=__webpack_require__(481);var _fetch_now=__webpack_require__(2994);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function FetchSoonProvider(Private,Promise){var _this=this;var fetchNow=Private(_fetch_now.FetchNowProvider);var debouncedFetchNow=_lodash2.default.debounce(function(){fetchNow(_search_request_queue.searchRequestQueue.getPending())},{wait:10,maxWait:50});this.fetchSearchRequests=function(requests){requests.forEach(function(req){return req._setFetchRequested()});debouncedFetchNow();return Promise.all(requests.map(function(req){return req.getCompletePromise()}))};this.fetchQueued=function(){return _this.fetchSearchRequests(_search_request_queue.searchRequestQueue.getStartable())}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FetchNowProvider=FetchNowProvider;var _notify=__webpack_require__(9);var _call_client=__webpack_require__(2995);var _call_response_handlers=__webpack_require__(3004);var _continue_incomplete=__webpack_require__(3005);var _req_status=__webpack_require__(482);function FetchNowProvider(Private,Promise){var callClient=Private(_call_client.CallClientProvider);var callResponseHandlers=Private(_call_response_handlers.CallResponseHandlersProvider);var continueIncomplete=Private(_continue_incomplete.ContinueIncompleteProvider);var ABORTED=_req_status.RequestStatus.ABORTED;var DUPLICATE=_req_status.RequestStatus.DUPLICATE;var INCOMPLETE=_req_status.RequestStatus.INCOMPLETE;function fetchNow(searchRequests){return fetchSearchResults(searchRequests.map(function(searchRequest){if(!searchRequest.started)return searchRequest;return searchRequest.retry()})).catch(function(error){return(0,_notify.fatalError)(error,"Courier fetch")})}function fetchSearchResults(searchRequests){function replaceAbortedRequests(){searchRequests=searchRequests.map(function(searchRequest){if(searchRequest.aborted)return ABORTED;return searchRequest})}replaceAbortedRequests();return startRequests(searchRequests).then(function(){replaceAbortedRequests();return callClient(searchRequests)}).then(function(responses){replaceAbortedRequests();return callResponseHandlers(searchRequests,responses)}).then(function(responses){replaceAbortedRequests();return continueIncomplete(searchRequests,responses,fetchSearchResults)}).then(function(responses){replaceAbortedRequests();return responses.map(function(resp){switch(resp){case ABORTED:return null;case DUPLICATE:case INCOMPLETE:throw new Error("Failed to clear incomplete or duplicate request from responses.");default:return resp}})})}function startRequests(searchRequests){return Promise.map(searchRequests,function(searchRequest){if(searchRequest===ABORTED)return searchRequest;return new Promise(function(resolve){var action=searchRequest.started?searchRequest.continue:searchRequest.start;resolve(action.call(searchRequest))}).catch(function(err){return searchRequest.handleFailure(err)})})}return fetchNow}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CallClientProvider=CallClientProvider;var _error_allow_explicit_index=__webpack_require__(2996);var _search_strategy=__webpack_require__(1282);var _is_request=__webpack_require__(1285);var _merge_duplicate_requests=__webpack_require__(3e3);var _req_status=__webpack_require__(482);var _serialize_fetch_params=__webpack_require__(3001);function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function CallClientProvider(Private,Promise,es){var errorAllowExplicitIndex=Private(_error_allow_explicit_index.ErrorAllowExplicitIndexProvider);var isRequest=Private(_is_request.IsRequestProvider);var mergeDuplicateRequests=Private(_merge_duplicate_requests.MergeDuplicatesRequestProvider);var serializeFetchParams=Private(_serialize_fetch_params.SerializeFetchParamsProvider);var ABORTED=_req_status.RequestStatus.ABORTED;var DUPLICATE=_req_status.RequestStatus.DUPLICATE;function callClient(searchRequests){var _this=this;var searchRequestsAndStatuses=mergeDuplicateRequests(searchRequests);var requestsToFetch=searchRequestsAndStatuses.filter(isRequest);var requestsToFetchCount=requestsToFetch.length;if(0===requestsToFetchCount)return Promise.resolve([]);var defer=Promise.defer();var abortableSearches=[];var areAllSearchRequestsAborted=false;var activeSearchRequests=[];var respondToSearchRequests=function respondToSearchRequests(){var responsesInOriginalRequestOrder=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Promise.map(searchRequestsAndStatuses,function(searchRequest,searchRequestIndex){if(searchRequest.aborted)return ABORTED;var status=searchRequestsAndStatuses[searchRequestIndex];if(status===ABORTED)return ABORTED;if(status===DUPLICATE)return searchRequest._uniq.resp;var activeSearchRequestIndex=activeSearchRequests.indexOf(searchRequest);var isFailedSearchRequest=-1===activeSearchRequestIndex;if(isFailedSearchRequest)return ABORTED;return responsesInOriginalRequestOrder[searchRequestIndex]}).then(function(res){return defer.resolve(res)},function(err){return defer.reject(err)})};var requestWasAborted=Promise.method(function(searchRequest,index){searchRequestsAndStatuses[index]===ABORTED&&defer.reject(new Error("Request was aborted twice?"));requestsToFetchCount--;if(0!==requestsToFetchCount)return;abortableSearches.forEach(function(_ref){var abort=_ref.abort;abort()});areAllSearchRequestsAborted=true;return respondToSearchRequests()});searchRequestsAndStatuses.forEach(function(searchRequest,index){if(!isRequest(searchRequest))return;searchRequest.whenAborted(function(){requestWasAborted(searchRequest,index).catch(defer.reject)})});var searchStrategiesWithRequests=(0,_search_strategy.assignSearchRequestsToSearchStrategies)(requestsToFetch);Promise.resolve().then(_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var _loop,i,segregatedResponses,responsesInOriginalRequestOrder;return regeneratorRuntime.wrap(function _callee$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_loop=regeneratorRuntime.mark(function _loop(i){var searchStrategyWithSearchRequests,searchStrategy,searchRequests,_ref4,searching,abort,failedSearchRequests;return regeneratorRuntime.wrap(function _loop$(_context){while(1)switch(_context.prev=_context.next){case 0:searchStrategyWithSearchRequests=searchStrategiesWithRequests[i];searchStrategy=searchStrategyWithSearchRequests.searchStrategy,searchRequests=searchStrategyWithSearchRequests.searchRequests;_context.next=4;return searchStrategy.search({searchRequests:searchRequests,es:es,Promise:Promise,serializeFetchParams:serializeFetchParams});case 4:_ref4=_context.sent;searching=_ref4.searching;abort=_ref4.abort;failedSearchRequests=_ref4.failedSearchRequests;searchRequests.forEach(function(searchRequest){if(failedSearchRequests.includes(searchRequest))return;activeSearchRequests.push(searchRequest)});abortableSearches.push({searching:searching,abort:abort});case 10:case"end":return _context.stop()}},_loop,_this)});i=0;case 2:if(!(i<searchStrategiesWithRequests.length)){_context2.next=7;break}return _context2.delegateYield(_loop(i),"t0",4);case 4:i++;_context2.next=2;break;case 7:_context2.prev=7;if(!areAllSearchRequestsAborted){_context2.next=10;break}return _context2.abrupt("return");case 10:_context2.next=12;return Promise.all(abortableSearches.map(function(_ref3){var searching=_ref3.searching;return searching}));case 12:segregatedResponses=_context2.sent;responsesInOriginalRequestOrder=new Array(searchRequestsAndStatuses.length);segregatedResponses.forEach(function(responses,strategyIndex){responses.forEach(function(response,responseIndex){var searchRequest=searchStrategiesWithRequests[strategyIndex].searchRequests[responseIndex];var requestIndex=searchRequestsAndStatuses.indexOf(searchRequest);responsesInOriginalRequestOrder[requestIndex]=response})});_context2.next=17;return respondToSearchRequests(responsesInOriginalRequestOrder);case 17:_context2.next=24;break;case 19:_context2.prev=19;_context2.t1=_context2["catch"](7);if(!errorAllowExplicitIndex.test(_context2.t1)){_context2.next=23;break}return _context2.abrupt("return",errorAllowExplicitIndex.takeover());case 23:defer.reject(_context2.t1);case 24:case"end":return _context2.stop()}},_callee,_this,[[7,19]])})));return defer.promise.catch(function(err){searchRequests.forEach(function(searchRequest,index){searchRequestsAndStatuses[index]!==ABORTED&&searchRequest.handleFailure(err)})})}return callClient}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _error_allow_explicit_index=__webpack_require__(2997);Object.defineProperty(exports,"ErrorAllowExplicitIndexProvider",{enumerable:true,get:function get(){return _error_allow_explicit_index.ErrorAllowExplicitIndexProvider}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();exports.ErrorAllowExplicitIndexProvider=ErrorAllowExplicitIndexProvider;var _lodash=__webpack_require__(1);var _routes=__webpack_require__(12);var _routes2=_interopRequireDefault(_routes);var _url=__webpack_require__(138);__webpack_require__(2998);var _error_allow_explicit_index=__webpack_require__(2999);var _error_allow_explicit_index2=_interopRequireDefault(_error_allow_explicit_index);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}_routes2.default.when("/error/multi.allow_explicit_index",{template:_error_allow_explicit_index2.default});function ErrorAllowExplicitIndexProvider(Private,Promise){var kbnUrl=Private(_url.KbnUrlProvider);return new(function(){function ErrorAllowExplicitIndex(){_classCallCheck(this,ErrorAllowExplicitIndex)}_createClass(ErrorAllowExplicitIndex,[{key:"test",value:function test(error){if(!error||400!==error.status)return false;var type=(0,_lodash.get)(error,"body.error.type");var reason=(0,_lodash.get)(error,"body.error.reason");return"illegal_argument_exception"===type&&String(reason).includes("explicit index")}},{key:"takeover",value:function takeover(){kbnUrl.change("/error/multi.allow_explicit_index");return Promise.halt()}}]);return ErrorAllowExplicitIndex}())}},function(module,exports){},function(module,exports){module.exports='<div class="app-container error-multi-allow-explicit-index">\n  <h3>\n    <i aria-hidden="true" class="fa fa-warning text-danger"></i> Oh no!\n  </h3>\n  <p>\n    It looks like your Elasticsearch cluster has the <code>rest.action.multi.allow_explicit_index</code> setting set to <code>false</code>, which prevents Kibana from making search requests. We use this ability to send a single request to Elasticsearch that searches multiple indexes so that when there are many panels on a dashboard they will load quickly and uniformly.\n  </p>\n\n  <p>\n    Unfortunately, until this issue is fixed you won\'t be able to use certain apps in Kibana, like Discover, Visualize and Dashboard.\n  </p>\n\n  <h3>Ok, how do I fix this?</h3>\n  <ol>\n    <li>Remove <code>rest.action.multi.allow_explicit_index: false</code> from your Elasticsearch config file.</li>\n    <li>Restart Elasticsearch.</li>\n    <li>Use the browser\'s back button to return to what you were doing.</li>\n  </ol>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MergeDuplicatesRequestProvider=MergeDuplicatesRequestProvider;var _is_request=__webpack_require__(1285);var _req_status=__webpack_require__(482);function MergeDuplicatesRequestProvider(Private){var isRequest=Private(_is_request.IsRequestProvider);var DUPLICATE=_req_status.RequestStatus.DUPLICATE;function mergeDuplicateRequests(requests){var index={};return requests.map(function(req){if(!isRequest(req))return req;var searchSourceId=req.source.getId();if(!index[searchSourceId]){index[searchSourceId]=req;return req}req._uniq=index[searchSourceId];return DUPLICATE})}return mergeDuplicateRequests}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _serialize_fetch_params_provider=__webpack_require__(3002);Object.defineProperty(exports,"SerializeFetchParamsProvider",{enumerable:true,get:function get(){return _serialize_fetch_params_provider.SerializeFetchParamsProvider}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SerializeFetchParamsProvider=SerializeFetchParamsProvider;var _serialize_fetch_params=__webpack_require__(3003);var _timefilter=__webpack_require__(14);function SerializeFetchParamsProvider(Promise,kbnIndex,sessionId,config,esShardTimeout){return function(fetchParams){return(0,_serialize_fetch_params.serializeFetchParams)(fetchParams,Promise,_timefilter.timefilter,kbnIndex,sessionId,config,esShardTimeout)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.serializeFetchParams=serializeFetchParams;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _aggressive_parse=__webpack_require__(1276);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function emptySearch(){return{query:{bool:{must_not:[{match_all:{}}]}}}}function serializeFetchParams(requestsFetchParams,Promise,timeFilter,kbnIndex,sessionId,config,esShardTimeout){var indexToListMapping={};var timeBounds=timeFilter.getActiveBounds();var promises=requestsFetchParams.map(function(fetchParams){return Promise.resolve(fetchParams.index).then(function(indexList){if(!_lodash2.default.isFunction(_lodash2.default.get(indexList,"toIndexList")))return indexList;indexToListMapping[indexList.id]||(indexToListMapping[indexList.id]=timeBounds?indexList.toIndexList(timeBounds.min,timeBounds.max):indexList.toIndexList());return indexToListMapping[indexList.id].then(function(indexList){return _lodash2.default.clone(indexList)})}).then(function(indexList){var body=fetchParams.body||{};var index=[];if(Array.isArray(indexList)&&0===indexList.length){index.push(kbnIndex);body=emptySearch()}else index=indexList;var header={index:index,type:fetchParams.type,search_type:fetchParams.search_type,ignore_unavailable:true,timeout:esShardTimeout};"sessionId"===config.get("courier:setRequestPreference")?header.preference=sessionId:"custom"===config.get("courier:setRequestPreference")&&(header.preference=config.get("courier:customRequestPreference"));return JSON.stringify(header)+"\n"+(0,_aggressive_parse.toJson)(body,JSON.stringify)})});return Promise.all(promises).then(function(requests){return requests.join("\n")+"\n"})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CallResponseHandlersProvider=CallResponseHandlersProvider;var _notify=__webpack_require__(9);var _errors=__webpack_require__(56);var _req_status=__webpack_require__(482);function CallResponseHandlersProvider(Private,Promise){var ABORTED=_req_status.RequestStatus.ABORTED;var INCOMPLETE=_req_status.RequestStatus.INCOMPLETE;function callResponseHandlers(searchRequests,responses){return Promise.map(searchRequests,function(searchRequest,index){if(searchRequest===ABORTED||searchRequest.aborted)return ABORTED;var response=responses[index];response.timed_out&&_notify.toastNotifications.addWarning({title:"Data might be incomplete because your request timed out"});response._shards&&response._shards.failed&&_notify.toastNotifications.addWarning({title:response._shards.failed+" of "+response._shards.total+" shards failed"});function progress(){if(searchRequest.isIncomplete())return INCOMPLETE;searchRequest.complete();return response}if(response.error)return searchRequest.filterError(response)?progress():searchRequest.handleFailure(new _errors.RequestFailure(null,response));return Promise.try(function(){return searchRequest.handleResponse(response)}).then(progress)})}return callResponseHandlers}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ContinueIncompleteProvider=ContinueIncompleteProvider;var _req_status=__webpack_require__(482);function ContinueIncompleteProvider(){var INCOMPLETE=_req_status.RequestStatus.INCOMPLETE;function continueIncompleteRequests(searchRequests,responses,fetchSearchResults){var incompleteSearchRequests=[];responses.forEach(function(response,index){response===INCOMPLETE&&incompleteSearchRequests.push(searchRequests[index])});if(!incompleteSearchRequests.length)return responses;return fetchSearchResults(incompleteSearchRequests).then(function(completedResponses){return responses.map(function(prevResponse){if(prevResponse!==INCOMPLETE)return prevResponse;return completedResponses.shift()})})}return continueIncompleteRequests}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FieldWildcardProvider=FieldWildcardProvider;var _lodash=__webpack_require__(1);function FieldWildcardProvider(config){var metaFields=config.get("metaFields");var makeRegEx=(0,_lodash.memoize)(function makeRegEx(glob){return new RegExp("^"+glob.split("*").map(_lodash.escapeRegExp).join(".*")+"$")});function fieldWildcardMatcher(){var globs=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function matcher(val){if(-1!==metaFields.indexOf(val))return false;return globs.some(function(p){return makeRegEx(p).test(val)})}}function fieldWildcardFilter(){var globs=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];var matcher=fieldWildcardMatcher(globs);return function filter(val){return!matcher(val)}}return{makeRegEx:makeRegEx,fieldWildcardMatcher:fieldWildcardMatcher,fieldWildcardFilter:fieldWildcardFilter}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _highlight_html=__webpack_require__(810);Object.defineProperty(exports,"getHighlightHtml",{enumerable:true,get:function get(){return _highlight_html.getHighlightHtml}});var _highlight_request=__webpack_require__(3008);Object.defineProperty(exports,"getHighlightRequest",{enumerable:true,get:function get(){return _highlight_request.getHighlightRequest}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getHighlightRequest=getHighlightRequest;var _highlight_tags=__webpack_require__(1273);var FRAGMENT_SIZE=Math.pow(2,31)-1;function getHighlightRequest(query,getConfig){if(!getConfig("doc_table:highlight"))return;return{pre_tags:[_highlight_tags.highlightTags.pre],post_tags:[_highlight_tags.highlightTags.post],fields:{"*":{}},fragment_size:FRAGMENT_SIZE}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BuildESQueryProvider=BuildESQueryProvider;var _lodash=__webpack_require__(1);var _decorate_query=__webpack_require__(1288);var _from_kuery=__webpack_require__(3010);var _from_filters=__webpack_require__(1293);var _from_lucene=__webpack_require__(3032);function BuildESQueryProvider(config){function buildESQuery(indexPattern){var queries=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];var filters=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];var validQueries=queries.filter(function(query){return(0,_lodash.has)(query,"query")});var queriesByLanguage=(0,_lodash.groupBy)(validQueries,"language");var kueryQuery=(0,_from_kuery.buildQueryFromKuery)(indexPattern,queriesByLanguage.kuery,config);var luceneQuery=(0,_from_lucene.buildQueryFromLucene)(queriesByLanguage.lucene,_decorate_query.decorateQuery);var filterQuery=(0,_from_filters.buildQueryFromFilters)(filters,_decorate_query.decorateQuery,indexPattern);return{bool:{must:[].concat(kueryQuery.must,luceneQuery.must,filterQuery.must),filter:[].concat(kueryQuery.filter,luceneQuery.filter,filterQuery.filter),should:[].concat(kueryQuery.should,luceneQuery.should,filterQuery.should),must_not:[].concat(kueryQuery.must_not,luceneQuery.must_not,filterQuery.must_not)}}}return buildESQuery}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.buildQueryFromKuery=buildQueryFromKuery;var _kuery=__webpack_require__(1289);var _documentation_links=__webpack_require__(271);var _errors=__webpack_require__(1292);var queryDocs=_documentation_links.documentationLinks.query;function buildQueryFromKuery(indexPattern){var queries=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];var config=arguments[2];var allowLeadingWildcards=config.get("query:allowLeadingWildcards");var queryASTs=queries.map(function(query){try{return(0,_kuery.fromKueryExpression)(query.query,{allowLeadingWildcards:allowLeadingWildcards})}catch(parseError){if(parseError instanceof _errors.NoLeadingWildcardsError)throw parseError;try{(0,_kuery.fromLegacyKueryExpression)(query.query)}catch(legacyParseError){throw parseError}throw new Error("It looks like you're using an outdated Kuery syntax. See what changed in the [docs]("+queryDocs.kueryQuerySyntax+")!")}});return buildQuery(indexPattern,queryASTs)}function buildQuery(indexPattern,queryASTs){var compoundQueryAST=_kuery.nodeTypes.function.buildNode("and",queryASTs);var kueryQuery=(0,_kuery.toElasticsearchQuery)(compoundQueryAST,indexPattern);return _extends({must:[],filter:[],should:[],must_not:[]},kueryQuery.bool)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.buildNode=buildNode;exports.buildNodeWithArgumentNodes=buildNodeWithArgumentNodes;exports.toElasticsearchQuery=toElasticsearchQuery;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _functions=__webpack_require__(3012);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function buildNode(functionName){var kueryFunction=_functions.functions[functionName];if(_lodash2.default.isUndefined(kueryFunction))throw new Error('Unknown function "'+functionName+'"');for(var _len=arguments.length,functionArgs=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)functionArgs[_key-1]=arguments[_key];return _extends({type:"function",function:functionName},kueryFunction.buildNodeParams.apply(kueryFunction,functionArgs))}function buildNodeWithArgumentNodes(functionName,argumentNodes){if(_lodash2.default.isUndefined(_functions.functions[functionName]))throw new Error('Unknown function "'+functionName+'"');return{type:"function",function:functionName,arguments:argumentNodes}}function toElasticsearchQuery(node,indexPattern){var kueryFunction=_functions.functions[node.function];return kueryFunction.toElasticsearchQuery(node,indexPattern)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.functions=void 0;var _is=__webpack_require__(3013);var is=_interopRequireWildcard(_is);var _and=__webpack_require__(3014);var and=_interopRequireWildcard(_and);var _or=__webpack_require__(3015);var or=_interopRequireWildcard(_or);var _not=__webpack_require__(3016);var not=_interopRequireWildcard(_not);var _range=__webpack_require__(3017);var range=_interopRequireWildcard(_range);var _exists=__webpack_require__(3018);var exists=_interopRequireWildcard(_exists);var _geo_bounding_box=__webpack_require__(3019);var geoBoundingBox=_interopRequireWildcard(_geo_bounding_box);var _geo_polygon=__webpack_require__(3020);var geoPolygon=_interopRequireWildcard(_geo_polygon);function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);newObj.default=obj;return newObj}exports.functions={is:is,and:and,or:or,not:not,range:range,exists:exists,geoBoundingBox:geoBoundingBox,geoPolygon:geoPolygon}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();exports.buildNodeParams=buildNodeParams;exports.toElasticsearchQuery=toElasticsearchQuery;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _ast=__webpack_require__(270);var ast=_interopRequireWildcard(_ast);var _literal=__webpack_require__(599);var literal=_interopRequireWildcard(_literal);var _wildcard=__webpack_require__(814);var wildcard=_interopRequireWildcard(_wildcard);var _phrase=__webpack_require__(363);var _get_fields=__webpack_require__(1291);function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);newObj.default=obj;return newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true}):obj[key]=value;return obj}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function buildNodeParams(fieldName,value){var isPhrase=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(_lodash2.default.isUndefined(fieldName))throw new Error("fieldName is a required argument");if(_lodash2.default.isUndefined(value))throw new Error("value is a required argument");var fieldNode="string"===typeof fieldName?ast.fromLiteralExpression(fieldName):literal.buildNode(fieldName);var valueNode="string"===typeof value?ast.fromLiteralExpression(value):literal.buildNode(value);var isPhraseNode=literal.buildNode(isPhrase);return{arguments:[fieldNode,valueNode,isPhraseNode]}}function toElasticsearchQuery(node,indexPattern){var _node$arguments=_slicedToArray(node.arguments,3),fieldNameArg=_node$arguments[0],valueArg=_node$arguments[1],isPhraseArg=_node$arguments[2];var value=_lodash2.default.isUndefined(valueArg)?valueArg:ast.toElasticsearchQuery(valueArg);var type=isPhraseArg.value?"phrase":"best_fields";if(null===fieldNameArg.value)return{multi_match:{type:type,query:value,lenient:true}};var fields=(0,_get_fields.getFields)(fieldNameArg,indexPattern);fields&&0===fields.length&&fields.push({name:ast.toElasticsearchQuery(fieldNameArg),scripted:false});var isExistsQuery="wildcard"===valueArg.type&&"*"===value;var isMatchAllQuery=isExistsQuery&&fields&&fields.length===indexPattern.fields.length;if(isMatchAllQuery)return{match_all:{}};var queries=fields.reduce(function(accumulator,field){if(!field.scripted){if(isExistsQuery)return[].concat(_toConsumableArray(accumulator),[{exists:{field:field.name}}]);if("wildcard"===valueArg.type)return[].concat(_toConsumableArray(accumulator),[{query_string:{fields:[field.name],query:wildcard.toQueryStringQuery(valueArg)}}]);var queryType="phrase"===type?"match_phrase":"match";return[].concat(_toConsumableArray(accumulator),[_defineProperty({},queryType,_defineProperty({},field.name,value))])}if(!isExistsQuery)return[].concat(_toConsumableArray(accumulator),[{script:_extends({},(0,_phrase.getPhraseScript)(field,value))}])},[]);return{bool:{should:queries,minimum_should_match:1}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildNodeParams=buildNodeParams;exports.toElasticsearchQuery=toElasticsearchQuery;var _ast=__webpack_require__(270);var ast=_interopRequireWildcard(_ast);function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);newObj.default=obj;return newObj}function buildNodeParams(children){return{arguments:children}}function toElasticsearchQuery(node,indexPattern){var children=node.arguments||[];return{bool:{filter:children.map(function(child){return ast.toElasticsearchQuery(child,indexPattern)})}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildNodeParams=buildNodeParams;exports.toElasticsearchQuery=toElasticsearchQuery;var _ast=__webpack_require__(270);var ast=_interopRequireWildcard(_ast);function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);newObj.default=obj;return newObj}function buildNodeParams(children){return{arguments:children}}function toElasticsearchQuery(node,indexPattern){var children=node.arguments||[];return{bool:{should:children.map(function(child){return ast.toElasticsearchQuery(child,indexPattern)}),minimum_should_match:1}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();exports.buildNodeParams=buildNodeParams;exports.toElasticsearchQuery=toElasticsearchQuery;var _ast=__webpack_require__(270);var ast=_interopRequireWildcard(_ast);function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);newObj.default=obj;return newObj}function buildNodeParams(child){return{arguments:[child]}}function toElasticsearchQuery(node,indexPattern){var _node$arguments=_slicedToArray(node.arguments,1),argument=_node$arguments[0];return{bool:{must_not:ast.toElasticsearchQuery(argument,indexPattern)}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildNodeParams=buildNodeParams;exports.toElasticsearchQuery=toElasticsearchQuery;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _node_types=__webpack_require__(140);var _ast=__webpack_require__(270);var ast=_interopRequireWildcard(_ast);var _range2=__webpack_require__(295);var _get_fields=__webpack_require__(1291);function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);newObj.default=obj;return newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true}):obj[key]=value;return obj}function _toArray(arr){return Array.isArray(arr)?arr:Array.from(arr)}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function buildNodeParams(fieldName,params){params=_lodash2.default.pick(params,"gt","lt","gte","lte","format");var fieldNameArg="string"===typeof fieldName?ast.fromLiteralExpression(fieldName):_node_types.nodeTypes.literal.buildNode(fieldName);var args=_lodash2.default.map(params,function(value,key){return _node_types.nodeTypes.namedArg.buildNode(key,value)});return{arguments:[fieldNameArg].concat(_toConsumableArray(args))}}function toElasticsearchQuery(node,indexPattern){var _node$arguments=_toArray(node.arguments),fieldNameArg=_node$arguments[0],args=_node$arguments.slice(1);var fields=(0,_get_fields.getFields)(fieldNameArg,indexPattern);var namedArgs=extractArguments(args);var queryParams=_lodash2.default.mapValues(namedArgs,ast.toElasticsearchQuery);fields&&0===fields.length&&fields.push({name:ast.toElasticsearchQuery(fieldNameArg),scripted:false});var queries=fields.map(function(field){if(field.scripted)return{script:(0,_range2.getRangeScript)(field,queryParams)};return{range:_defineProperty({},field.name,queryParams)}});return{bool:{should:queries,minimum_should_match:1}}}function extractArguments(args){if(args.gt&&args.gte||args.lt&&args.lte)throw new Error("range ends cannot be both inclusive and exclusive");var unnamedArgOrder=["gte","lte","format"];return args.reduce(function(acc,arg,index){"namedArg"===arg.type?acc[arg.name]=arg.value:acc[unnamedArgOrder[index]]=arg;return acc},{})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();exports.buildNodeParams=buildNodeParams;exports.toElasticsearchQuery=toElasticsearchQuery;var _literal=__webpack_require__(599);var literal=_interopRequireWildcard(_literal);function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);newObj.default=obj;return newObj}function buildNodeParams(fieldName){return{arguments:[literal.buildNode(fieldName)]}}function toElasticsearchQuery(node,indexPattern){var _node$arguments=_slicedToArray(node.arguments,1),fieldNameArg=_node$arguments[0];var fieldName=literal.toElasticsearchQuery(fieldNameArg);var field=indexPattern.fields.find(function(field){return field.name===fieldName});if(field&&field.scripted)throw new Error("Exists query does not support scripted fields");return{exists:{field:fieldName}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.buildNodeParams=buildNodeParams;exports.toElasticsearchQuery=toElasticsearchQuery;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _node_types=__webpack_require__(140);var _ast=__webpack_require__(270);var ast=_interopRequireWildcard(_ast);function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);newObj.default=obj;return newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true}):obj[key]=value;return obj}function _toArray(arr){return Array.isArray(arr)?arr:Array.from(arr)}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function buildNodeParams(fieldName,params){params=_lodash2.default.pick(params,"topLeft","bottomRight");var fieldNameArg=_node_types.nodeTypes.literal.buildNode(fieldName);var args=_lodash2.default.map(params,function(value,key){var latLon=value.lat+", "+value.lon;return _node_types.nodeTypes.namedArg.buildNode(key,latLon)});return{arguments:[fieldNameArg].concat(_toConsumableArray(args))}}function toElasticsearchQuery(node,indexPattern){var _geo_bounding_box;var _node$arguments=_toArray(node.arguments),fieldNameArg=_node$arguments[0],args=_node$arguments.slice(1);var fieldName=_node_types.nodeTypes.literal.toElasticsearchQuery(fieldNameArg);var field=indexPattern.fields.find(function(field){return field.name===fieldName});var queryParams=args.reduce(function(acc,arg){var snakeArgName=_lodash2.default.snakeCase(arg.name);return _extends({},acc,_defineProperty({},snakeArgName,ast.toElasticsearchQuery(arg)))},{});if(field&&field.scripted)throw new Error("Geo bounding box query does not support scripted fields");return{geo_bounding_box:(_geo_bounding_box={},_defineProperty(_geo_bounding_box,fieldName,queryParams),_defineProperty(_geo_bounding_box,"ignore_unmapped",true),_geo_bounding_box)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildNodeParams=buildNodeParams;exports.toElasticsearchQuery=toElasticsearchQuery;var _node_types=__webpack_require__(140);var _ast=__webpack_require__(270);var ast=_interopRequireWildcard(_ast);function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);newObj.default=obj;return newObj}function _defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true}):obj[key]=value;return obj}function _toArray(arr){return Array.isArray(arr)?arr:Array.from(arr)}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function buildNodeParams(fieldName,points){var fieldNameArg=_node_types.nodeTypes.literal.buildNode(fieldName);var args=points.map(function(point){var latLon=point.lat+", "+point.lon;return _node_types.nodeTypes.literal.buildNode(latLon)});return{arguments:[fieldNameArg].concat(_toConsumableArray(args))}}function toElasticsearchQuery(node,indexPattern){var _geo_polygon;var _node$arguments=_toArray(node.arguments),fieldNameArg=_node$arguments[0],points=_node$arguments.slice(1);var fieldName=_node_types.nodeTypes.literal.toElasticsearchQuery(fieldNameArg);var field=indexPattern.fields.find(function(field){return field.name===fieldName});var queryParams={points:points.map(ast.toElasticsearchQuery)};if(field&&field.scripted)throw new Error("Geo polygon query does not support scripted fields");return{geo_polygon:(_geo_polygon={},_defineProperty(_geo_polygon,fieldName,queryParams),_defineProperty(_geo_polygon,"ignore_unmapped",true),_geo_polygon)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildNode=buildNode;exports.toElasticsearchQuery=toElasticsearchQuery;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _ast=__webpack_require__(270);var ast=_interopRequireWildcard(_ast);var _node_types=__webpack_require__(140);function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);newObj.default=obj;return newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function buildNode(name,value){var argumentNode="literal"===_lodash2.default.get(value,"type")?value:_node_types.nodeTypes.literal.buildNode(value);return{type:"namedArg",name:name,value:argumentNode}}function toElasticsearchQuery(node){return ast.toElasticsearchQuery(node.value)}},function(module,exports,__webpack_require__){"use strict";var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};module.exports=function(){function peg$subclass(child,parent){function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor}function peg$SyntaxError(message,expected,found,location){this.message=message;this.expected=expected;this.found=found;this.location=location;this.name="SyntaxError";"function"===typeof Error.captureStackTrace&&Error.captureStackTrace(this,peg$SyntaxError)}peg$subclass(peg$SyntaxError,Error);function peg$parse(input){var peg$result,options=arguments.length>1?arguments[1]:{},peg$FAILED={},peg$startRuleFunctions={start:peg$parsestart,Literal:peg$parseLiteral},peg$startRuleFunction=peg$parsestart,peg$c0=function peg$c0(query,trailing){if("cursor"===trailing.type)return _extends({},trailing,{suggestionTypes:["conjunction"]});if(null!==query)return query;return nodeTypes.function.buildNode("is","*","*")},peg$c1=function peg$c1(left,right){var cursor=[left,right].find(function(node){return"cursor"===node.type});if(cursor)return cursor;return buildFunctionNode("or",[left,right])},peg$c2=function peg$c2(left,right){var cursor=[left,right].find(function(node){return"cursor"===node.type});if(cursor)return cursor;return buildFunctionNode("and",[left,right])},peg$c3=function peg$c3(query){if("cursor"===query.type)return query;return buildFunctionNode("not",[query])},peg$c4="(",peg$c5={type:"literal",value:"(",description:'"("'},peg$c6=")",peg$c7={type:"literal",value:")",description:'")"'},peg$c8=function peg$c8(query,trailing){if("cursor"===trailing.type)return _extends({},trailing,{suggestionTypes:["conjunction"]});return query},peg$c9=function peg$c9(field,operator,value){if("cursor"===value.type)return _extends({},value,{suggestionTypes:["conjunction"]});var range=buildNamedArgNode(operator,value);return buildFunctionNode("range",[field,range])},peg$c10=":",peg$c11={type:"literal",value:":",description:'":"'},peg$c12=function peg$c12(field,partial){if("cursor"===partial.type)return _extends({},partial,{fieldName:field.value,suggestionTypes:["value","conjunction"]});return partial(field)},peg$c13=function peg$c13(partial){if("cursor"===partial.type){var fieldName=(""+partial.prefix+partial.suffix).trim();return _extends({},partial,{fieldName:fieldName,suggestionTypes:["field","operator","conjunction"]})}var field=buildLiteralNode(null);return partial(field)},peg$c14=function peg$c14(partial,trailing){if("cursor"===trailing.type)return _extends({},trailing,{suggestionTypes:["conjunction"]});return partial},peg$c15=function peg$c15(partialLeft,partialRight){var cursor=[partialLeft,partialRight].find(function(node){return"cursor"===node.type});if(cursor)return _extends({},cursor,{suggestionTypes:["value"]});return function(field){return buildFunctionNode("or",[partialLeft(field),partialRight(field)])}},peg$c16=function peg$c16(partialLeft,partialRight){var cursor=[partialLeft,partialRight].find(function(node){return"cursor"===node.type});if(cursor)return _extends({},cursor,{suggestionTypes:["value"]});return function(field){return buildFunctionNode("and",[partialLeft(field),partialRight(field)])}},peg$c17=function peg$c17(partial){if("cursor"===partial.type)return _extends({},list,{suggestionTypes:["value"]});return function(field){return buildFunctionNode("not",[partial(field)])}},peg$c18=function peg$c18(value){if("cursor"===value.type)return value;var isPhrase=buildLiteralNode(true);return function(field){return buildFunctionNode("is",[field,value,isPhrase])}},peg$c19=function peg$c19(value){if("cursor"===value.type)return value;if(!allowLeadingWildcards&&"wildcard"===value.type&&nodeTypes.wildcard.hasLeadingWildcard(value))throw new errors.NoLeadingWildcardsError;var isPhrase=buildLiteralNode(false);return function(field){return buildFunctionNode("is",[field,value,isPhrase])}},peg$c20="or",peg$c21={type:"literal",value:"or",description:'"or"'},peg$c22="and",peg$c23={type:"literal",value:"and",description:'"and"'},peg$c24="not",peg$c25={type:"literal",value:"not",description:'"not"'},peg$c26='"',peg$c27={type:"literal",value:'"',description:'"\\""'},peg$c28=function peg$c28(prefix,cursor,suffix){var _location=location(),start=_location.start,end=_location.end;return{type:"cursor",start:start.offset,end:end.offset-cursor.length,prefix:prefix.join(""),suffix:suffix.join(""),text:text().replace(cursor,"")}},peg$c29=function peg$c29(chars){return buildLiteralNode(chars.join(""))},peg$c30="\\",peg$c31={type:"literal",value:"\\",description:'"\\\\"'},peg$c32=/^[\\"]/,peg$c33={type:"class",value:'[\\\\"]',description:'[\\\\"]'},peg$c34=function peg$c34(char){return char},peg$c35=/^[^"]/,peg$c36={type:"class",value:'[^"]',description:'[^"]'},peg$c37=function peg$c37(chars){var sequence=chars.join("").trim();if("null"===sequence)return buildLiteralNode(null);if("true"===sequence)return buildLiteralNode(true);if("false"===sequence)return buildLiteralNode(false);if(chars.includes(wildcardSymbol))return buildWildcardNode(sequence);var number=Number(sequence);var value=isNaN(number)?sequence:number;return buildLiteralNode(value)},peg$c38={type:"any",description:"any character"},peg$c39="*",peg$c40={type:"literal",value:"*",description:'"*"'},peg$c41=function peg$c41(){return wildcardSymbol},peg$c42=function peg$c42(keyword){return keyword},peg$c43=/^[\\():<>"*]/,peg$c44={type:"class",value:'[\\\\():<>"*]',description:'[\\\\():<>"*]'},peg$c45="<=",peg$c46={type:"literal",value:"<=",description:'"<="'},peg$c47=function peg$c47(){return"lte"},peg$c48=">=",peg$c49={type:"literal",value:">=",description:'">="'},peg$c50=function peg$c50(){return"gte"},peg$c51="<",peg$c52={type:"literal",value:"<",description:'"<"'},peg$c53=function peg$c53(){return"lt"},peg$c54=">",peg$c55={type:"literal",value:">",description:'">"'},peg$c56=function peg$c56(){return"gt"},peg$c57=/^[ \t\r\n]/,peg$c58={type:"class",value:"[\\ \\t\\r\\n]",description:"[\\ \\t\\r\\n]"},peg$c59=function peg$c59(){return parseCursor},peg$c60="@kuery-cursor@",peg$c61={type:"literal",value:"@kuery-cursor@",description:'"@kuery-cursor@"'},peg$c62=function peg$c62(){return cursorSymbol},peg$currPos=0,peg$savedPos=0,peg$posDetailsCache=[{line:1,column:1,seenCR:false}],peg$maxFailPos=0,peg$maxFailExpected=[],peg$silentFails=0;if("startRule"in options){if(!(options.startRule in peg$startRuleFunctions))throw new Error("Can't start parsing from rule \""+options.startRule+'".');peg$startRuleFunction=peg$startRuleFunctions[options.startRule]}function text(){return input.substring(peg$savedPos,peg$currPos)}function location(){return peg$computeLocation(peg$savedPos,peg$currPos)}function peg$computePosDetails(pos){var p,ch,details=peg$posDetailsCache[pos];if(details)return details;p=pos-1;while(!peg$posDetailsCache[p])p--;details=peg$posDetailsCache[p];details={line:details.line,column:details.column,seenCR:details.seenCR};while(p<pos){ch=input.charAt(p);if("\n"===ch){details.seenCR||details.line++;details.column=1;details.seenCR=false}else if("\r"===ch||"\u2028"===ch||"\u2029"===ch){details.line++;details.column=1;details.seenCR=true}else{details.column++;details.seenCR=false}p++}peg$posDetailsCache[pos]=details;return details}function peg$computeLocation(startPos,endPos){var startPosDetails=peg$computePosDetails(startPos),endPosDetails=peg$computePosDetails(endPos);return{start:{offset:startPos,line:startPosDetails.line,column:startPosDetails.column},end:{offset:endPos,line:endPosDetails.line,column:endPosDetails.column}}}function peg$fail(expected){if(peg$currPos<peg$maxFailPos)return;if(peg$currPos>peg$maxFailPos){peg$maxFailPos=peg$currPos;peg$maxFailExpected=[]}peg$maxFailExpected.push(expected)}function peg$buildException(message,expected,found,location){function cleanupExpected(expected){var i=1;expected.sort(function(a,b){return a.description<b.description?-1:a.description>b.description?1:0});while(i<expected.length)expected[i-1]===expected[i]?expected.splice(i,1):i++}function buildMessage(expected,found){function stringEscape(s){function hex(ch){return ch.charCodeAt(0).toString(16).toUpperCase()}return s.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(ch){return"\\x0"+hex(ch)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(ch){return"\\x"+hex(ch)}).replace(/[\u0100-\u0FFF]/g,function(ch){return"\\u0"+hex(ch)}).replace(/[\u1000-\uFFFF]/g,function(ch){return"\\u"+hex(ch)})}var expectedDesc,foundDesc,i,expectedDescs=new Array(expected.length);for(i=0;i<expected.length;i++)expectedDescs[i]=expected[i].description;expectedDesc=expected.length>1?expectedDescs.slice(0,-1).join(", ")+" or "+expectedDescs[expected.length-1]:expectedDescs[0];foundDesc=found?'"'+stringEscape(found)+'"':"end of input";return"Expected "+expectedDesc+" but "+foundDesc+" found."}null!==expected&&cleanupExpected(expected);return new peg$SyntaxError(null!==message?message:buildMessage(expected,found),expected,found,location)}function peg$parsestart(){var s0,s1,s2,s3;s0=peg$currPos;s1=[];s2=peg$parseSpace();while(s2!==peg$FAILED){s1.push(s2);s2=peg$parseSpace()}if(s1!==peg$FAILED){s2=peg$parseOrQuery();s2===peg$FAILED&&(s2=null);if(s2!==peg$FAILED){s3=peg$parseOptionalSpace();if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c0(s2,s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseOrQuery(){var s0,s1,s2,s3;s0=peg$currPos;s1=peg$parseAndQuery();if(s1!==peg$FAILED){s2=peg$parseOr();if(s2!==peg$FAILED){s3=peg$parseOrQuery();if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c1(s1,s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}s0===peg$FAILED&&(s0=peg$parseAndQuery());return s0}function peg$parseAndQuery(){var s0,s1,s2,s3;s0=peg$currPos;s1=peg$parseNotQuery();if(s1!==peg$FAILED){s2=peg$parseAnd();if(s2!==peg$FAILED){s3=peg$parseAndQuery();if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c2(s1,s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}s0===peg$FAILED&&(s0=peg$parseNotQuery());return s0}function peg$parseNotQuery(){var s0,s1,s2;s0=peg$currPos;s1=peg$parseNot();if(s1!==peg$FAILED){s2=peg$parseSubQuery();if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c3(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}s0===peg$FAILED&&(s0=peg$parseSubQuery());return s0}function peg$parseSubQuery(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;if(40===input.charCodeAt(peg$currPos)){s1=peg$c4;peg$currPos++}else{s1=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c5)}if(s1!==peg$FAILED){s2=[];s3=peg$parseSpace();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseSpace()}if(s2!==peg$FAILED){s3=peg$parseOrQuery();if(s3!==peg$FAILED){s4=peg$parseOptionalSpace();if(s4!==peg$FAILED){if(41===input.charCodeAt(peg$currPos)){s5=peg$c6;peg$currPos++}else{s5=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c7)}if(s5!==peg$FAILED){peg$savedPos=s0;s1=peg$c8(s3,s4);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}s0===peg$FAILED&&(s0=peg$parseExpression());return s0}function peg$parseExpression(){var s0;s0=peg$parseFieldRangeExpression();if(s0===peg$FAILED){s0=peg$parseFieldValueExpression();s0===peg$FAILED&&(s0=peg$parseValueExpression())}return s0}function peg$parseFieldRangeExpression(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;s1=peg$parseLiteral();if(s1!==peg$FAILED){s2=[];s3=peg$parseSpace();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseSpace()}if(s2!==peg$FAILED){s3=peg$parseRangeOperator();if(s3!==peg$FAILED){s4=[];s5=peg$parseSpace();while(s5!==peg$FAILED){s4.push(s5);s5=peg$parseSpace()}if(s4!==peg$FAILED){s5=peg$parseQuotedString();s5===peg$FAILED&&(s5=peg$parseUnquotedLiteral());if(s5!==peg$FAILED){peg$savedPos=s0;s1=peg$c9(s1,s3,s5);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseFieldValueExpression(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;s1=peg$parseLiteral();if(s1!==peg$FAILED){s2=[];s3=peg$parseSpace();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseSpace()}if(s2!==peg$FAILED){if(58===input.charCodeAt(peg$currPos)){s3=peg$c10;peg$currPos++}else{s3=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c11)}if(s3!==peg$FAILED){s4=[];s5=peg$parseSpace();while(s5!==peg$FAILED){s4.push(s5);s5=peg$parseSpace()}if(s4!==peg$FAILED){s5=peg$parseListOfValues();if(s5!==peg$FAILED){peg$savedPos=s0;s1=peg$c12(s1,s5);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseValueExpression(){var s0,s1;s0=peg$currPos;s1=peg$parseValue();if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c13(s1)}s0=s1;return s0}function peg$parseListOfValues(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;if(40===input.charCodeAt(peg$currPos)){s1=peg$c4;peg$currPos++}else{s1=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c5)}if(s1!==peg$FAILED){s2=[];s3=peg$parseSpace();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseSpace()}if(s2!==peg$FAILED){s3=peg$parseOrListOfValues();if(s3!==peg$FAILED){s4=peg$parseOptionalSpace();if(s4!==peg$FAILED){if(41===input.charCodeAt(peg$currPos)){s5=peg$c6;peg$currPos++}else{s5=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c7)}if(s5!==peg$FAILED){peg$savedPos=s0;s1=peg$c14(s3,s4);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}s0===peg$FAILED&&(s0=peg$parseValue());return s0}function peg$parseOrListOfValues(){var s0,s1,s2,s3;s0=peg$currPos;s1=peg$parseAndListOfValues();if(s1!==peg$FAILED){s2=peg$parseOr();if(s2!==peg$FAILED){s3=peg$parseOrListOfValues();if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c15(s1,s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}s0===peg$FAILED&&(s0=peg$parseAndListOfValues());return s0}function peg$parseAndListOfValues(){var s0,s1,s2,s3;s0=peg$currPos;s1=peg$parseNotListOfValues();if(s1!==peg$FAILED){s2=peg$parseAnd();if(s2!==peg$FAILED){s3=peg$parseAndListOfValues();if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c16(s1,s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}s0===peg$FAILED&&(s0=peg$parseNotListOfValues());return s0}function peg$parseNotListOfValues(){var s0,s1,s2;s0=peg$currPos;s1=peg$parseNot();if(s1!==peg$FAILED){s2=peg$parseListOfValues();if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c17(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}s0===peg$FAILED&&(s0=peg$parseListOfValues());return s0}function peg$parseValue(){var s0,s1;s0=peg$currPos;s1=peg$parseQuotedString();if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c18(s1)}s0=s1;if(s0===peg$FAILED){s0=peg$currPos;s1=peg$parseUnquotedLiteral();if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c19(s1)}s0=s1}return s0}function peg$parseOr(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=[];s2=peg$parseSpace();if(s2!==peg$FAILED)while(s2!==peg$FAILED){s1.push(s2);s2=peg$parseSpace()}else s1=peg$FAILED;if(s1!==peg$FAILED){if(input.substr(peg$currPos,2).toLowerCase()===peg$c20){s2=input.substr(peg$currPos,2);peg$currPos+=2}else{s2=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c21)}if(s2!==peg$FAILED){s3=[];s4=peg$parseSpace();if(s4!==peg$FAILED)while(s4!==peg$FAILED){s3.push(s4);s4=peg$parseSpace()}else s3=peg$FAILED;if(s3!==peg$FAILED){s1=[s1,s2,s3];s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseAnd(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=[];s2=peg$parseSpace();if(s2!==peg$FAILED)while(s2!==peg$FAILED){s1.push(s2);s2=peg$parseSpace()}else s1=peg$FAILED;if(s1!==peg$FAILED){if(input.substr(peg$currPos,3).toLowerCase()===peg$c22){s2=input.substr(peg$currPos,3);peg$currPos+=3}else{s2=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c23)}if(s2!==peg$FAILED){s3=[];s4=peg$parseSpace();if(s4!==peg$FAILED)while(s4!==peg$FAILED){s3.push(s4);s4=peg$parseSpace()}else s3=peg$FAILED;if(s3!==peg$FAILED){s1=[s1,s2,s3];s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseNot(){var s0,s1,s2,s3;s0=peg$currPos;if(input.substr(peg$currPos,3).toLowerCase()===peg$c24){s1=input.substr(peg$currPos,3);peg$currPos+=3}else{s1=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c25)}if(s1!==peg$FAILED){s2=[];s3=peg$parseSpace();if(s3!==peg$FAILED)while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseSpace()}else s2=peg$FAILED;if(s2!==peg$FAILED){s1=[s1,s2];s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseLiteral(){var s0;s0=peg$parseQuotedString();s0===peg$FAILED&&(s0=peg$parseUnquotedLiteral());return s0}function peg$parseQuotedString(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;if(34===input.charCodeAt(peg$currPos)){s1=peg$c26;peg$currPos++}else{s1=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c27)}if(s1!==peg$FAILED){s2=[];s3=peg$parseQuotedCharacter();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseQuotedCharacter()}if(s2!==peg$FAILED){s3=peg$parseCursor();if(s3!==peg$FAILED){s4=[];s5=peg$parseQuotedCharacter();while(s5!==peg$FAILED){s4.push(s5);s5=peg$parseQuotedCharacter()}if(s4!==peg$FAILED){if(34===input.charCodeAt(peg$currPos)){s5=peg$c26;peg$currPos++}else{s5=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c27)}if(s5!==peg$FAILED){peg$savedPos=s0;s1=peg$c28(s2,s3,s4);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;if(34===input.charCodeAt(peg$currPos)){s1=peg$c26;peg$currPos++}else{s1=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c27)}if(s1!==peg$FAILED){s2=[];s3=peg$parseQuotedCharacter();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseQuotedCharacter()}if(s2!==peg$FAILED){if(34===input.charCodeAt(peg$currPos)){s3=peg$c26;peg$currPos++}else{s3=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c27)}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c29(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}return s0}function peg$parseQuotedCharacter(){var s0,s1,s2;s0=peg$currPos;if(92===input.charCodeAt(peg$currPos)){s1=peg$c30;peg$currPos++}else{s1=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c31)}if(s1!==peg$FAILED){if(peg$c32.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c33)}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c34(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;s1=peg$currPos;peg$silentFails++;s2=peg$parseCursor();peg$silentFails--;if(s2===peg$FAILED)s1=void 0;else{peg$currPos=s1;s1=peg$FAILED}if(s1!==peg$FAILED){if(peg$c35.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c36)}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c34(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}return s0}function peg$parseUnquotedLiteral(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=[];s2=peg$parseUnquotedCharacter();while(s2!==peg$FAILED){s1.push(s2);s2=peg$parseUnquotedCharacter()}if(s1!==peg$FAILED){s2=peg$parseCursor();if(s2!==peg$FAILED){s3=[];s4=peg$parseUnquotedCharacter();while(s4!==peg$FAILED){s3.push(s4);s4=peg$parseUnquotedCharacter()}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c28(s1,s2,s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;s1=[];s2=peg$parseUnquotedCharacter();if(s2!==peg$FAILED)while(s2!==peg$FAILED){s1.push(s2);s2=peg$parseUnquotedCharacter()}else s1=peg$FAILED;if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c37(s1)}s0=s1}return s0}function peg$parseUnquotedCharacter(){var s0,s1,s2,s3,s4;s0=peg$parseEscapedSpecialCharacter();if(s0===peg$FAILED){s0=peg$parseEscapedKeyword();if(s0===peg$FAILED){s0=peg$parseWildcard();if(s0===peg$FAILED){s0=peg$currPos;s1=peg$currPos;peg$silentFails++;s2=peg$parseSpecialCharacter();peg$silentFails--;if(s2===peg$FAILED)s1=void 0;else{peg$currPos=s1;s1=peg$FAILED}if(s1!==peg$FAILED){s2=peg$currPos;peg$silentFails++;s3=peg$parseKeyword();peg$silentFails--;if(s3===peg$FAILED)s2=void 0;else{peg$currPos=s2;s2=peg$FAILED}if(s2!==peg$FAILED){s3=peg$currPos;peg$silentFails++;s4=peg$parseCursor();peg$silentFails--;if(s4===peg$FAILED)s3=void 0;else{peg$currPos=s3;s3=peg$FAILED}if(s3!==peg$FAILED){if(input.length>peg$currPos){s4=input.charAt(peg$currPos);peg$currPos++}else{s4=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c38)}if(s4!==peg$FAILED){peg$savedPos=s0;s1=peg$c34(s4);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}}}return s0}function peg$parseWildcard(){var s0,s1;s0=peg$currPos;if(42===input.charCodeAt(peg$currPos)){s1=peg$c39;peg$currPos++}else{s1=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c40)}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c41()}s0=s1;return s0}function peg$parseOptionalSpace(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=[];s2=peg$parseSpace();while(s2!==peg$FAILED){s1.push(s2);s2=peg$parseSpace()}if(s1!==peg$FAILED){s2=peg$parseCursor();if(s2!==peg$FAILED){s3=[];s4=peg$parseSpace();while(s4!==peg$FAILED){s3.push(s4);s4=peg$parseSpace()}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c28(s1,s2,s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=[];s1=peg$parseSpace();while(s1!==peg$FAILED){s0.push(s1);s1=peg$parseSpace()}}return s0}function peg$parseEscapedSpecialCharacter(){var s0,s1,s2;s0=peg$currPos;if(92===input.charCodeAt(peg$currPos)){s1=peg$c30;peg$currPos++}else{s1=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c31)}if(s1!==peg$FAILED){s2=peg$parseSpecialCharacter();if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c34(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseEscapedKeyword(){var s0,s1,s2;s0=peg$currPos;if(92===input.charCodeAt(peg$currPos)){s1=peg$c30;peg$currPos++}else{s1=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c31)}if(s1!==peg$FAILED){if(input.substr(peg$currPos,2).toLowerCase()===peg$c20){s2=input.substr(peg$currPos,2);peg$currPos+=2}else{s2=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c21)}if(s2===peg$FAILED){if(input.substr(peg$currPos,3).toLowerCase()===peg$c22){s2=input.substr(peg$currPos,3);peg$currPos+=3}else{s2=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c23)}if(s2===peg$FAILED)if(input.substr(peg$currPos,3).toLowerCase()===peg$c24){s2=input.substr(peg$currPos,3);peg$currPos+=3}else{s2=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c25)}}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c42(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseKeyword(){var s0;s0=peg$parseOr();if(s0===peg$FAILED){s0=peg$parseAnd();s0===peg$FAILED&&(s0=peg$parseNot())}return s0}function peg$parseSpecialCharacter(){var s0;if(peg$c43.test(input.charAt(peg$currPos))){s0=input.charAt(peg$currPos);peg$currPos++}else{s0=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c44)}return s0}function peg$parseRangeOperator(){var s0,s1;s0=peg$currPos;if(input.substr(peg$currPos,2)===peg$c45){s1=peg$c45;peg$currPos+=2}else{s1=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c46)}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c47()}s0=s1;if(s0===peg$FAILED){s0=peg$currPos;if(input.substr(peg$currPos,2)===peg$c48){s1=peg$c48;peg$currPos+=2}else{s1=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c49)}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c50()}s0=s1;if(s0===peg$FAILED){s0=peg$currPos;if(60===input.charCodeAt(peg$currPos)){s1=peg$c51;peg$currPos++}else{s1=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c52)}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c53()}s0=s1;if(s0===peg$FAILED){s0=peg$currPos;if(62===input.charCodeAt(peg$currPos)){s1=peg$c54;peg$currPos++}else{s1=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c55)}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c56()}s0=s1}}}return s0}function peg$parseSpace(){var s0;if(peg$c57.test(input.charAt(peg$currPos))){s0=input.charAt(peg$currPos);peg$currPos++}else{s0=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c58)}return s0}function peg$parseCursor(){var s0,s1,s2;s0=peg$currPos;peg$savedPos=peg$currPos;s1=peg$c59();s1=s1?void 0:peg$FAILED;if(s1!==peg$FAILED){if(input.substr(peg$currPos,14)===peg$c60){s2=peg$c60;peg$currPos+=14}else{s2=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c61)}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c62();s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}var parseCursor=options.parseCursor,cursorSymbol=options.cursorSymbol,_options$allowLeading=options.allowLeadingWildcards,allowLeadingWildcards=void 0===_options$allowLeading||_options$allowLeading,_options$helpers=options.helpers,nodeTypes=_options$helpers.nodeTypes,errors=_options$helpers.errors;var buildFunctionNode=nodeTypes.function.buildNodeWithArgumentNodes;var buildLiteralNode=nodeTypes.literal.buildNode;var buildWildcardNode=nodeTypes.wildcard.buildNode;var buildNamedArgNode=nodeTypes.namedArg.buildNode;var wildcardSymbol=nodeTypes.wildcard.wildcardSymbol;peg$result=peg$startRuleFunction();if(peg$result!==peg$FAILED&&peg$currPos===input.length)return peg$result;peg$result!==peg$FAILED&&peg$currPos<input.length&&peg$fail({type:"end",description:"end of input"});throw peg$buildException(null,peg$maxFailExpected,peg$maxFailPos<input.length?input.charAt(peg$maxFailPos):null,peg$maxFailPos<input.length?peg$computeLocation(peg$maxFailPos,peg$maxFailPos+1):peg$computeLocation(peg$maxFailPos,peg$maxFailPos))}return{SyntaxError:peg$SyntaxError,parse:peg$parse}}()},function(module,exports,__webpack_require__){"use strict";module.exports=function(){function peg$subclass(child,parent){function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor}function peg$SyntaxError(message,expected,found,location){this.message=message;this.expected=expected;this.found=found;this.location=location;this.name="SyntaxError";"function"===typeof Error.captureStackTrace&&Error.captureStackTrace(this,peg$SyntaxError)}peg$subclass(peg$SyntaxError,Error);function peg$parse(input){var peg$result,options=arguments.length>1?arguments[1]:{},peg$FAILED={},peg$startRuleFunctions={start:peg$parsestart},peg$startRuleFunction=peg$parsestart,peg$c0=function peg$c0(query){if("literal"===query.type)return addMeta(nodeTypes.function.buildNode("and",[query]),text(),location());return query},peg$c1=/^[ \t\r\n]/,peg$c2={type:"class",value:"[\\ \\t\\r\\n]",description:"[\\ \\t\\r\\n]"},peg$c3=function peg$c3(whitespace){return addMeta(nodeTypes.function.buildNode("is","*","*",false),text(),location())},peg$c4="or",peg$c5={type:"literal",value:"or",description:'"or"'},peg$c6=function peg$c6(left,right){return addMeta(nodeTypes.function.buildNode("or",[left,right]),text(),location())},peg$c7="and",peg$c8={type:"literal",value:"and",description:'"and"'},peg$c9=function peg$c9(left,right){return addMeta(nodeTypes.function.buildNode("and",[left,right]),text(),location())},peg$c10=/^[!]/,peg$c11={type:"class",value:"[!]",description:"[!]"},peg$c12=function peg$c12(clause){return addMeta(nodeTypes.function.buildNode("not",clause),text(),location())},peg$c13="(",peg$c14={type:"literal",value:"(",description:'"("'},peg$c15=")",peg$c16={type:"literal",value:")",description:'")"'},peg$c17=function peg$c17(subQuery){return subQuery},peg$c18=":",peg$c19={type:"literal",value:":",description:'":"'},peg$c20=function peg$c20(field,value){return addMeta(nodeTypes.function.buildNodeWithArgumentNodes("is",[field,value,nodeTypes.literal.buildNode(true)]),text(),location())},peg$c21=":[",peg$c22={type:"literal",value:":[",description:'":["'},peg$c23="to",peg$c24={type:"literal",value:"to",description:'"to"'},peg$c25="]",peg$c26={type:"literal",value:"]",description:'"]"'},peg$c27=function peg$c27(field,gt,lt){return addMeta(nodeTypes.function.buildNodeWithArgumentNodes("range",[field,gt,lt]),text(),location())},peg$c28=function peg$c28(literal){return literal},peg$c29=/^[a-zA-Z]/,peg$c30={type:"class",value:"[a-zA-Z]",description:"[a-zA-Z]"},peg$c31=/^[.a-zA-Z0-9_\-]/,peg$c32={type:"class",value:"[.a-zA-Z0-9_-]",description:"[.a-zA-Z0-9_-]"},peg$c33=function peg$c33(first,rest){return first.join("")+rest.join("")},peg$c34={type:"other",description:"function"},peg$c35=function peg$c35(name,arg_list){return addMeta(nodeTypes.function.buildNodeWithArgumentNodes(name,arg_list||[]),text(),location())},peg$c36=",",peg$c37={type:"literal",value:",",description:'","'},peg$c38=function peg$c38(first,arg){return arg},peg$c39=function peg$c39(first,rest){return[first].concat(rest)},peg$c40="=",peg$c41={type:"literal",value:"=",description:'"="'},peg$c42=function peg$c42(name,value){return addMeta(nodeTypes.namedArg.buildNode(name,value),text(),location())},peg$c43=function peg$c43(element){return element},peg$c44=function peg$c44(literal){var result=addMeta(nodeTypes.literal.buildNode(literal),text(),location());return result},peg$c45={type:"other",description:"literal"},peg$c46='"',peg$c47={type:"literal",value:'"',description:'"\\""'},peg$c48=function peg$c48(chars){return chars.join("")},peg$c49="'",peg$c50={type:"literal",value:"'",description:'"\'"'},peg$c51="true",peg$c52={type:"literal",value:"true",description:'"true"'},peg$c53=function peg$c53(){return true},peg$c54="false",peg$c55={type:"literal",value:"false",description:'"false"'},peg$c56=function peg$c56(){return false},peg$c57="null",peg$c58={type:"literal",value:"null",description:'"null"'},peg$c59=function peg$c59(){return null},peg$c60=/^[^[\]()"',:= \t]/,peg$c61={type:"class",value:"[^\\[\\]()\"',:=\\ \\t]",description:"[^\\[\\]()\"',:=\\ \\t]"},peg$c62=function peg$c62(string){var result=string.join("");if(isNaN(Number(result)))return result;return Number(result)},peg$c63="\\",peg$c64={type:"literal",value:"\\",description:'"\\\\"'},peg$c65=function peg$c65(sequence){return sequence},peg$c66=/^[^"]/,peg$c67={type:"class",value:'[^"]',description:'[^"]'},peg$c68=/^[^']/,peg$c69={type:"class",value:"[^']",description:"[^']"},peg$currPos=0,peg$savedPos=0,peg$posDetailsCache=[{line:1,column:1,seenCR:false}],peg$maxFailPos=0,peg$maxFailExpected=[],peg$silentFails=0;if("startRule"in options){if(!(options.startRule in peg$startRuleFunctions))throw new Error("Can't start parsing from rule \""+options.startRule+'".');peg$startRuleFunction=peg$startRuleFunctions[options.startRule]}function text(){return input.substring(peg$savedPos,peg$currPos)}function location(){return peg$computeLocation(peg$savedPos,peg$currPos)}function peg$computePosDetails(pos){var p,ch,details=peg$posDetailsCache[pos];if(details)return details;p=pos-1;while(!peg$posDetailsCache[p])p--;details=peg$posDetailsCache[p];details={line:details.line,column:details.column,seenCR:details.seenCR};while(p<pos){ch=input.charAt(p);if("\n"===ch){details.seenCR||details.line++;details.column=1;details.seenCR=false}else if("\r"===ch||"\u2028"===ch||"\u2029"===ch){details.line++;details.column=1;details.seenCR=true}else{details.column++;details.seenCR=false}p++}peg$posDetailsCache[pos]=details;return details}function peg$computeLocation(startPos,endPos){var startPosDetails=peg$computePosDetails(startPos),endPosDetails=peg$computePosDetails(endPos);return{start:{offset:startPos,line:startPosDetails.line,column:startPosDetails.column},end:{offset:endPos,line:endPosDetails.line,column:endPosDetails.column}}}function peg$fail(expected){if(peg$currPos<peg$maxFailPos)return;if(peg$currPos>peg$maxFailPos){peg$maxFailPos=peg$currPos;peg$maxFailExpected=[]}peg$maxFailExpected.push(expected)}function peg$buildException(message,expected,found,location){function cleanupExpected(expected){var i=1;expected.sort(function(a,b){return a.description<b.description?-1:a.description>b.description?1:0});while(i<expected.length)expected[i-1]===expected[i]?expected.splice(i,1):i++}function buildMessage(expected,found){function stringEscape(s){function hex(ch){return ch.charCodeAt(0).toString(16).toUpperCase()}return s.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(ch){return"\\x0"+hex(ch)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(ch){return"\\x"+hex(ch)}).replace(/[\u0100-\u0FFF]/g,function(ch){return"\\u0"+hex(ch)}).replace(/[\u1000-\uFFFF]/g,function(ch){return"\\u"+hex(ch)})}var expectedDesc,foundDesc,i,expectedDescs=new Array(expected.length);for(i=0;i<expected.length;i++)expectedDescs[i]=expected[i].description;expectedDesc=expected.length>1?expectedDescs.slice(0,-1).join(", ")+" or "+expectedDescs[expected.length-1]:expectedDescs[0];foundDesc=found?'"'+stringEscape(found)+'"':"end of input";return"Expected "+expectedDesc+" but "+foundDesc+" found."}null!==expected&&cleanupExpected(expected);return new peg$SyntaxError(null!==message?message:buildMessage(expected,found),expected,found,location)}function peg$parsestart(){var s0,s1,s2,s3;s0=peg$currPos;s1=peg$parsespace();s1===peg$FAILED&&(s1=null);if(s1!==peg$FAILED){s2=peg$parseOrQuery();if(s2!==peg$FAILED){s3=peg$parsespace();s3===peg$FAILED&&(s3=null);if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c0(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;s1=[];if(peg$c1.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c2)}while(s2!==peg$FAILED){s1.push(s2);if(peg$c1.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c2)}}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c3(s1)}s0=s1}return s0}function peg$parseOrQuery(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;s1=peg$parseAndQuery();if(s1!==peg$FAILED){s2=peg$parsespace();if(s2!==peg$FAILED){if(input.substr(peg$currPos,2).toLowerCase()===peg$c4){s3=input.substr(peg$currPos,2);peg$currPos+=2}else{s3=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c5)}if(s3!==peg$FAILED){s4=peg$parsespace();if(s4!==peg$FAILED){s5=peg$parseOrQuery();if(s5!==peg$FAILED){peg$savedPos=s0;s1=peg$c6(s1,s5);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}s0===peg$FAILED&&(s0=peg$parseAndQuery());return s0}function peg$parseAndQuery(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;s1=peg$parseNegatedClause();if(s1!==peg$FAILED){s2=peg$parsespace();if(s2!==peg$FAILED){if(input.substr(peg$currPos,3).toLowerCase()===peg$c7){s3=input.substr(peg$currPos,3);peg$currPos+=3}else{s3=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c8)}if(s3!==peg$FAILED){s4=peg$parsespace();if(s4!==peg$FAILED){s5=peg$parseAndQuery();if(s5!==peg$FAILED){peg$savedPos=s0;s1=peg$c9(s1,s5);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;s1=peg$parseNegatedClause();if(s1!==peg$FAILED){s2=peg$parsespace();if(s2!==peg$FAILED){s3=peg$currPos;peg$silentFails++;if(input.substr(peg$currPos,2).toLowerCase()===peg$c4){s4=input.substr(peg$currPos,2);peg$currPos+=2}else{s4=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c5)}peg$silentFails--;if(s4===peg$FAILED)s3=void 0;else{peg$currPos=s3;s3=peg$FAILED}if(s3!==peg$FAILED){s4=peg$parseAndQuery();if(s4!==peg$FAILED){peg$savedPos=s0;s1=peg$c9(s1,s4);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}s0===peg$FAILED&&(s0=peg$parseNegatedClause())}return s0}function peg$parseNegatedClause(){var s0,s1,s2;s0=peg$currPos;if(peg$c10.test(input.charAt(peg$currPos))){s1=input.charAt(peg$currPos);peg$currPos++}else{s1=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c11)}if(s1!==peg$FAILED){s2=peg$parseClause();if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c12(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}s0===peg$FAILED&&(s0=peg$parseClause());return s0}function peg$parseClause(){var s0,s1,s2,s3;s0=peg$currPos;if(40===input.charCodeAt(peg$currPos)){s1=peg$c13;peg$currPos++}else{s1=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c14)}if(s1!==peg$FAILED){s2=peg$parsestart();if(s2!==peg$FAILED){if(41===input.charCodeAt(peg$currPos)){s3=peg$c15;peg$currPos++}else{s3=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c16)}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c17(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}s0===peg$FAILED&&(s0=peg$parseTerm());return s0}function peg$parseTerm(){var s0,s1,s2,s3,s4,s5,s6,s7,s8,s9,s10;s0=peg$currPos;s1=peg$parseliteral_arg_type();if(s1!==peg$FAILED){if(58===input.charCodeAt(peg$currPos)){s2=peg$c18;peg$currPos++}else{s2=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c19)}if(s2!==peg$FAILED){s3=peg$parseliteral_arg_type();if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c20(s1,s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;s1=peg$parseliteral_arg_type();if(s1!==peg$FAILED){if(input.substr(peg$currPos,2)===peg$c21){s2=peg$c21;peg$currPos+=2}else{s2=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c22)}if(s2!==peg$FAILED){s3=peg$parsespace();s3===peg$FAILED&&(s3=null);if(s3!==peg$FAILED){s4=peg$parseliteral_arg_type();if(s4!==peg$FAILED){s5=peg$parsespace();if(s5!==peg$FAILED){if(input.substr(peg$currPos,2).toLowerCase()===peg$c23){s6=input.substr(peg$currPos,2);peg$currPos+=2}else{s6=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c24)}if(s6!==peg$FAILED){s7=peg$parsespace();if(s7!==peg$FAILED){s8=peg$parseliteral_arg_type();if(s8!==peg$FAILED){s9=peg$parsespace();s9===peg$FAILED&&(s9=null);if(s9!==peg$FAILED){if(93===input.charCodeAt(peg$currPos)){s10=peg$c25;peg$currPos++}else{s10=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c26)}if(s10!==peg$FAILED){peg$savedPos=s0;s1=peg$c27(s1,s4,s8);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$parsefunction();if(s0===peg$FAILED){s0=peg$currPos;s1=peg$currPos;peg$silentFails++;s2=peg$parseKeywords();peg$silentFails--;if(s2===peg$FAILED)s1=void 0;else{peg$currPos=s1;s1=peg$FAILED}if(s1!==peg$FAILED){s2=peg$parseliteral_arg_type();if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c28(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}}}return s0}function peg$parsefunction_name(){var s0,s1,s2,s3;s0=peg$currPos;s1=[];if(peg$c29.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c30)}if(s2!==peg$FAILED)while(s2!==peg$FAILED){s1.push(s2);if(peg$c29.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c30)}}else s1=peg$FAILED;if(s1!==peg$FAILED){s2=[];if(peg$c31.test(input.charAt(peg$currPos))){s3=input.charAt(peg$currPos);peg$currPos++}else{s3=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c32)}while(s3!==peg$FAILED){s2.push(s3);if(peg$c31.test(input.charAt(peg$currPos))){s3=input.charAt(peg$currPos);peg$currPos++}else{s3=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c32)}}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c33(s1,s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parsefunction(){var s0,s1,s2,s3,s4,s5,s6,s7;peg$silentFails++;s0=peg$currPos;s1=peg$parsefunction_name();if(s1!==peg$FAILED){s2=peg$parsespace();s2===peg$FAILED&&(s2=null);if(s2!==peg$FAILED){if(40===input.charCodeAt(peg$currPos)){s3=peg$c13;peg$currPos++}else{s3=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c14)}if(s3!==peg$FAILED){s4=peg$parsespace();s4===peg$FAILED&&(s4=null);if(s4!==peg$FAILED){s5=peg$parsearg_list();s5===peg$FAILED&&(s5=null);if(s5!==peg$FAILED){s6=peg$parsespace();s6===peg$FAILED&&(s6=null);if(s6!==peg$FAILED){if(41===input.charCodeAt(peg$currPos)){s7=peg$c15;peg$currPos++}else{s7=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c16)}if(s7!==peg$FAILED){peg$savedPos=s0;s1=peg$c35(s1,s5);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}peg$silentFails--;if(s0===peg$FAILED){s1=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c34)}return s0}function peg$parsearg_list(){var s0,s1,s2,s3,s4,s5,s6,s7;s0=peg$currPos;s1=peg$parseargument();if(s1!==peg$FAILED){s2=[];s3=peg$currPos;s4=peg$parsespace();s4===peg$FAILED&&(s4=null);if(s4!==peg$FAILED){if(44===input.charCodeAt(peg$currPos)){s5=peg$c36;peg$currPos++}else{s5=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c37)}if(s5!==peg$FAILED){s6=peg$parsespace();s6===peg$FAILED&&(s6=null);if(s6!==peg$FAILED){s7=peg$parseargument();if(s7!==peg$FAILED){peg$savedPos=s3;s4=peg$c38(s1,s7);s3=s4}else{peg$currPos=s3;s3=peg$FAILED}}else{peg$currPos=s3;s3=peg$FAILED}}else{peg$currPos=s3;s3=peg$FAILED}}else{peg$currPos=s3;s3=peg$FAILED}while(s3!==peg$FAILED){s2.push(s3);s3=peg$currPos;s4=peg$parsespace();s4===peg$FAILED&&(s4=null);if(s4!==peg$FAILED){if(44===input.charCodeAt(peg$currPos)){s5=peg$c36;peg$currPos++}else{s5=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c37)}if(s5!==peg$FAILED){s6=peg$parsespace();s6===peg$FAILED&&(s6=null);if(s6!==peg$FAILED){s7=peg$parseargument();if(s7!==peg$FAILED){peg$savedPos=s3;s4=peg$c38(s1,s7);s3=s4}else{peg$currPos=s3;s3=peg$FAILED}}else{peg$currPos=s3;s3=peg$FAILED}}else{peg$currPos=s3;s3=peg$FAILED}}else{peg$currPos=s3;s3=peg$FAILED}}if(s2!==peg$FAILED){s3=peg$parsespace();s3===peg$FAILED&&(s3=null);if(s3!==peg$FAILED){if(44===input.charCodeAt(peg$currPos)){s4=peg$c36;peg$currPos++}else{s4=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c37)}s4===peg$FAILED&&(s4=null);if(s4!==peg$FAILED){peg$savedPos=s0;s1=peg$c39(s1,s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseargument(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;s1=peg$parsefunction_name();if(s1!==peg$FAILED){s2=peg$parsespace();s2===peg$FAILED&&(s2=null);if(s2!==peg$FAILED){if(61===input.charCodeAt(peg$currPos)){s3=peg$c40;peg$currPos++}else{s3=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c41)}if(s3!==peg$FAILED){s4=peg$parsespace();s4===peg$FAILED&&(s4=null);if(s4!==peg$FAILED){s5=peg$parsearg_type();if(s5!==peg$FAILED){peg$savedPos=s0;s1=peg$c42(s1,s5);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;s1=peg$parsearg_type();if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c43(s1)}s0=s1}return s0}function peg$parsearg_type(){var s0;s0=peg$parseOrQuery();s0===peg$FAILED&&(s0=peg$parseliteral_arg_type());return s0}function peg$parseliteral_arg_type(){var s0,s1;s0=peg$currPos;s1=peg$parseliteral();if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c44(s1)}s0=s1;return s0}function peg$parseKeywords(){var s0;if(input.substr(peg$currPos,3).toLowerCase()===peg$c7){s0=input.substr(peg$currPos,3);peg$currPos+=3}else{s0=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c8)}if(s0===peg$FAILED)if(input.substr(peg$currPos,2).toLowerCase()===peg$c4){s0=input.substr(peg$currPos,2);peg$currPos+=2}else{s0=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c5)}return s0}function peg$parseliteral(){var s0,s1,s2,s3;peg$silentFails++;s0=peg$currPos;if(34===input.charCodeAt(peg$currPos)){s1=peg$c46;peg$currPos++}else{s1=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c47)}if(s1!==peg$FAILED){s2=[];s3=peg$parsedq_char();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parsedq_char()}if(s2!==peg$FAILED){if(34===input.charCodeAt(peg$currPos)){s3=peg$c46;peg$currPos++}else{s3=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c47)}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c48(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;if(39===input.charCodeAt(peg$currPos)){s1=peg$c49;peg$currPos++}else{s1=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c50)}if(s1!==peg$FAILED){s2=[];s3=peg$parsesq_char();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parsesq_char()}if(s2!==peg$FAILED){if(39===input.charCodeAt(peg$currPos)){s3=peg$c49;peg$currPos++}else{s3=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c50)}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c48(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;if(input.substr(peg$currPos,4)===peg$c51){s1=peg$c51;peg$currPos+=4}else{s1=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c52)}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c53()}s0=s1;if(s0===peg$FAILED){s0=peg$currPos;if(input.substr(peg$currPos,5)===peg$c54){s1=peg$c54;peg$currPos+=5}else{s1=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c55)}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c56()}s0=s1;if(s0===peg$FAILED){s0=peg$currPos;if(input.substr(peg$currPos,4)===peg$c57){s1=peg$c57;peg$currPos+=4}else{s1=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c58)}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c59()}s0=s1;if(s0===peg$FAILED){s0=peg$currPos;s1=[];if(peg$c60.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c61)}if(s2!==peg$FAILED)while(s2!==peg$FAILED){s1.push(s2);if(peg$c60.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c61)}}else s1=peg$FAILED;if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c62(s1)}s0=s1}}}}}peg$silentFails--;if(s0===peg$FAILED){s1=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c45)}return s0}function peg$parsespace(){var s0,s1;s0=[];if(peg$c1.test(input.charAt(peg$currPos))){s1=input.charAt(peg$currPos);peg$currPos++}else{s1=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c2)}if(s1!==peg$FAILED)while(s1!==peg$FAILED){s0.push(s1);if(peg$c1.test(input.charAt(peg$currPos))){s1=input.charAt(peg$currPos);peg$currPos++}else{s1=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c2)}}else s0=peg$FAILED;return s0}function peg$parsedq_char(){var s0,s1,s2;s0=peg$currPos;if(92===input.charCodeAt(peg$currPos)){s1=peg$c63;peg$currPos++}else{s1=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c64)}if(s1!==peg$FAILED){if(34===input.charCodeAt(peg$currPos)){s2=peg$c46;peg$currPos++}else{s2=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c47)}if(s2===peg$FAILED)if(92===input.charCodeAt(peg$currPos)){s2=peg$c63;peg$currPos++}else{s2=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c64)}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c65(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED)if(peg$c66.test(input.charAt(peg$currPos))){s0=input.charAt(peg$currPos);peg$currPos++}else{s0=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c67)}return s0}function peg$parsesq_char(){var s0,s1,s2;s0=peg$currPos;if(92===input.charCodeAt(peg$currPos)){s1=peg$c63;peg$currPos++}else{s1=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c64)}if(s1!==peg$FAILED){if(39===input.charCodeAt(peg$currPos)){s2=peg$c49;peg$currPos++}else{s2=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c50)}if(s2===peg$FAILED)if(92===input.charCodeAt(peg$currPos)){s2=peg$c63;peg$currPos++}else{s2=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c64)}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c65(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED)if(peg$c68.test(input.charAt(peg$currPos))){s0=input.charAt(peg$currPos);peg$currPos++}else{s0=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c69)}return s0}var nodeTypes=options.helpers.nodeTypes;void 0===options.includeMetadata&&(options.includeMetadata=true);function addMeta(source,text,location){if(options.includeMetadata)return Object.assign({},source,{text:text,location:simpleLocation(location)});return source}function simpleLocation(location){return{min:location.start.offset,max:location.end.offset}}peg$result=peg$startRuleFunction();if(peg$result!==peg$FAILED&&peg$currPos===input.length)return peg$result;peg$result!==peg$FAILED&&peg$currPos<input.length&&peg$fail({type:"end",description:"end of input"});throw peg$buildException(null,peg$maxFailExpected,peg$maxFailPos<input.length?input.charAt(peg$maxFailPos):null,peg$maxFailPos<input.length?peg$computeLocation(peg$maxFailPos,peg$maxFailPos+1):peg$computeLocation(peg$maxFailPos,peg$maxFailPos))}return{SyntaxError:peg$SyntaxError,parse:peg$parse}}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _filter_to_kuery=__webpack_require__(3025);Object.defineProperty(exports,"filterToKueryAST",{enumerable:true,get:function get(){return _filter_to_kuery.filterToKueryAST}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.filterToKueryAST=filterToKueryAST;var _node_types=__webpack_require__(140);var _phrase=__webpack_require__(3026);var _range=__webpack_require__(3027);var _exists=__webpack_require__(3028);var _geo_bounding_box=__webpack_require__(3029);var _geo_polygon=__webpack_require__(3030);var conversionChain=[_phrase.convertPhraseFilter,_range.convertRangeFilter,_exists.convertExistsFilter,_geo_bounding_box.convertGeoBoundingBox,_geo_polygon.convertGeoPolygon];function filterToKueryAST(filter){var negate=filter.meta.negate;var node=conversionChain.reduce(function(acc,converter){if(null!==acc)return acc;try{return converter(filter)}catch(ex){return null}},null);if(!node)throw new Error("Couldn't convert that filter to a kuery");return negate?_node_types.nodeTypes.function.buildNode("not",node):node}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.convertPhraseFilter=convertPhraseFilter;var _node_types=__webpack_require__(140);function convertPhraseFilter(filter){if("phrase"!==filter.meta.type)throw new Error('Expected filter of type "phrase", got "'+filter.meta.type+'"');var _filter$meta=filter.meta,key=_filter$meta.key,params=_filter$meta.params;return _node_types.nodeTypes.function.buildNode("is",key,params.query)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.convertRangeFilter=convertRangeFilter;var _node_types=__webpack_require__(140);function convertRangeFilter(filter){if("range"!==filter.meta.type)throw new Error('Expected filter of type "range", got "'+filter.meta.type+'"');var _filter$meta=filter.meta,key=_filter$meta.key,params=_filter$meta.params;return _node_types.nodeTypes.function.buildNode("range",key,params)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.convertExistsFilter=convertExistsFilter;var _node_types=__webpack_require__(140);function convertExistsFilter(filter){if("exists"!==filter.meta.type)throw new Error('Expected filter of type "exists", got "'+filter.meta.type+'"');var key=filter.meta.key;return _node_types.nodeTypes.function.buildNode("exists",key)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.convertGeoBoundingBox=convertGeoBoundingBox;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _node_types=__webpack_require__(140);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function convertGeoBoundingBox(filter){if("geo_bounding_box"!==filter.meta.type)throw new Error('Expected filter of type "geo_bounding_box", got "'+filter.meta.type+'"');var _filter$meta=filter.meta,key=_filter$meta.key,params=_filter$meta.params;var camelParams=_lodash2.default.mapKeys(params,function(value,key){return _lodash2.default.camelCase(key)});return _node_types.nodeTypes.function.buildNode("geoBoundingBox",key,camelParams)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.convertGeoPolygon=convertGeoPolygon;var _node_types=__webpack_require__(140);function convertGeoPolygon(filter){if("geo_polygon"!==filter.meta.type)throw new Error('Expected filter of type "geo_polygon", got "'+filter.meta.type+'"');var _filter$meta=filter.meta,key=_filter$meta.key,points=_filter$meta.params.points;return _node_types.nodeTypes.function.buildNode("geoPolygon",key,points)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getDocLink=void 0;var _lodash=__webpack_require__(1);var _documentation_links=__webpack_require__(483);exports.getDocLink=function getDocLink(id){return(0,_lodash.get)(_documentation_links.documentationLinks,id)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildQueryFromLucene=buildQueryFromLucene;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _lucene_string_to_dsl=__webpack_require__(1295);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function buildQueryFromLucene(queries,decorateQuery){var combinedQueries=_lodash2.default.map(queries,function(query){var queryDsl=(0,_lucene_string_to_dsl.luceneStringToDsl)(query.query);return decorateQuery(queryDsl)});return{must:[].concat(combinedQueries),filter:[],should:[],must_not:[]}}},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _timefilter=__webpack_require__(14);__webpack_require__(1296);__webpack_require__(484);var _modules=__webpack_require__(2);var _notify=__webpack_require__(9);__webpack_require__(475);var _search_request_queue=__webpack_require__(481);var _fetch=__webpack_require__(813);var _search_poll=__webpack_require__(3044);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}_modules.uiModules.get("kibana/courier").service("courier",function($rootScope,Private){var fetchSoon=Private(_fetch.FetchSoonProvider);var searchPoll=Private(_search_poll.SearchPollProvider);var Courier=function(){function Courier(){_classCallCheck(this,Courier);$rootScope.$listen(_timefilter.timefilter,"refreshIntervalUpdate",function(){var refreshIntervalMs=_lodash2.default.get(_timefilter.timefilter.getRefreshInterval(),"value");var isRefreshPaused=_lodash2.default.get(_timefilter.timefilter.getRefreshInterval(),"pause");searchPoll.setIntervalInMs(refreshIntervalMs);isRefreshPaused?searchPoll.pause():searchPoll.resume()});var closeOnFatal=_lodash2.default.once(function(){searchPoll.pause();_search_request_queue.searchRequestQueue.abortAll();if(_search_request_queue.searchRequestQueue.getCount())throw new Error("Aborting all pending requests failed.")});(0,_notify.addFatalErrorCallback)(closeOnFatal)}_createClass(Courier,[{key:"fetch",value:function fetch(){fetchSoon.fetchQueued().then(function(){searchPoll.resetTimer()})}}]);return Courier}();return new Courier})},function(module,exports,__webpack_require__){"use strict";__webpack_require__(16);module.exports=__webpack_require__(3035);__webpack_require__(2).get("kibana",["elasticsearch"])},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();exports.getRoutes=getRoutes;exports.IndexPatternProvider=IndexPatternProvider;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _errors=__webpack_require__(56);var _angular=__webpack_require__(16);var _angular2=_interopRequireDefault(_angular);var _field_formats=__webpack_require__(116);var _mapping_setup=__webpack_require__(1279);var _mapping_setup2=_interopRequireDefault(_mapping_setup);var _notify=__webpack_require__(9);var _get_computed_fields=__webpack_require__(3037);var _format_hit=__webpack_require__(3038);var _get=__webpack_require__(816);var _intervals=__webpack_require__(1297);var _field_list=__webpack_require__(1298);var _flatten_hit=__webpack_require__(3040);var _pattern_cache=__webpack_require__(1300);var _fields_fetcher_provider=__webpack_require__(1301);var _unsupported_time_patterns=__webpack_require__(3043);var _saved_objects=__webpack_require__(57);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function getRoutes(){return{edit:"/management/kibana/indices/{{id}}",addField:"/management/kibana/indices/{{id}}/create-field",indexedFields:"/management/kibana/indices/{{id}}?_a=(tab:indexedFields)",scriptedFields:"/management/kibana/indices/{{id}}?_a=(tab:scriptedFields)",sourceFilters:"/management/kibana/indices/{{id}}?_a=(tab:sourceFilters)"}}var MAX_ATTEMPTS_TO_RESOLVE_CONFLICTS=3;function IndexPatternProvider(Private,config,Promise,confirmModalPromise,kbnUrl){var getConfig=function getConfig(){return config.get.apply(config,arguments)};var getIds=Private(_get.IndexPatternsGetProvider)("id");var fieldsFetcher=Private(_fields_fetcher_provider.FieldsFetcherProvider);var intervals=Private(_intervals.IndexPatternsIntervalsProvider);var mappingSetup=Private(_mapping_setup2.default);var flattenHit=Private(_flatten_hit.IndexPatternsFlattenHitProvider);var patternCache=Private(_pattern_cache.IndexPatternsPatternCacheProvider);var isUserAwareOfUnsupportedTimePattern=Private(_unsupported_time_patterns.IsUserAwareOfUnsupportedTimePatternProvider);var savedObjectsClient=Private(_saved_objects.SavedObjectsClientProvider);var fieldformats=_field_formats.fieldFormats;var type="index-pattern";var notify=new _notify.Notifier;var configWatchers=new WeakMap;var mapping=mappingSetup.expandShorthand({title:"text",timeFieldName:"keyword",intervalName:"keyword",fields:"json",sourceFilters:"json",fieldFormatMap:{type:"text",_serialize:function _serialize(){var map=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var serialized=_lodash2.default.transform(map,serializeFieldFormatMap);return _lodash2.default.isEmpty(serialized)?void 0:_angular2.default.toJson(serialized)},_deserialize:function _deserialize(){var map=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"{}";return _lodash2.default.mapValues(_angular2.default.fromJson(map),deserializeFieldFormatMap)}}});function serializeFieldFormatMap(flat,format,field){format&&(flat[field]=format)}function deserializeFieldFormatMap(mapping){var FieldFormat=fieldformats.byId[mapping.id];return FieldFormat&&new FieldFormat(mapping.params,getConfig)}function updateFromElasticSearch(indexPattern,response){var forceFieldRefresh=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!response.found)throw new _errors.SavedObjectNotFound(type,indexPattern.id,"#/management/kibana/index");_lodash2.default.forOwn(mapping,function(fieldMapping,name){if(!fieldMapping._deserialize)return;response._source[name]=fieldMapping._deserialize(response._source[name])});_lodash2.default.assign(indexPattern,response._source);indexPattern.title||(indexPattern.title=indexPattern.id);indexPattern.isUnsupportedTimePattern()&&(isUserAwareOfUnsupportedTimePattern(indexPattern)||_notify.toastNotifications.addWarning({title:"Support for time intervals was removed",text:_react2.default.createElement(_react.Fragment,null,"For more information, view the "," ",_react2.default.createElement("a",{href:kbnUrl.getRouteHref(indexPattern,"edit")},indexPattern.title," index pattern"))}));return indexFields(indexPattern,forceFieldRefresh)}function isFieldRefreshRequired(indexPattern){if(!indexPattern.fields)return true;return indexPattern.fields.every(function(field){var hasFieldCaps="aggregatable"in field&&"searchable"in field;var hasDocValuesFlag="readFromDocValues"in field;return!hasFieldCaps||!hasDocValuesFlag})}function indexFields(indexPattern){var forceFieldRefresh=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var promise=Promise.resolve();if(!indexPattern.id)return promise;(forceFieldRefresh||isFieldRefreshRequired(indexPattern))&&(promise=indexPattern.refreshFields());return promise.then(function(){initFields(indexPattern)})}function setId(indexPattern,id){indexPattern.id=id;return id}function setVersion(indexPattern,version){indexPattern.version=version;return version}function watch(indexPattern){if(configWatchers.has(indexPattern))return;var unwatch=config.watchAll(function(){indexPattern.fields&&initFields(indexPattern)});configWatchers.set(indexPattern,{unwatch:unwatch})}function unwatch(indexPattern){if(!configWatchers.has(indexPattern))return;configWatchers.get(indexPattern).unwatch();configWatchers.delete(indexPattern)}function initFields(indexPattern,input){var oldValue=indexPattern.fields;var newValue=input||oldValue||[];indexPattern.fields=new _field_list.FieldList(indexPattern,newValue)}function fetchFields(indexPattern){return Promise.resolve().then(function(){return fieldsFetcher.fetch(indexPattern)}).then(function(fields){var scripted=indexPattern.getScriptedFields();var all=fields.concat(scripted);initFields(indexPattern,all)})}var IndexPattern=function(){function IndexPattern(id){_classCallCheck(this,IndexPattern);setId(this,id);this.metaFields=config.get("metaFields");this.getComputedFields=_get_computed_fields.getComputedFields.bind(this);this.flattenHit=flattenHit(this);this.formatHit=(0,_format_hit.formatHit)(this,fieldformats.getDefaultInstance("string"));this.formatField=this.formatHit.formatField}_createClass(IndexPattern,[{key:"init",value:function init(){var _this=this;var forceFieldRefresh=arguments.length>0&&void 0!==arguments[0]&&arguments[0];watch(this);if(!this.id)return Promise.resolve(this);return savedObjectsClient.get(type,this.id).then(function(resp){setVersion(_this,resp._version);return{_id:resp.id,_type:resp.type,_source:_lodash2.default.cloneDeep(resp.attributes),found:!!resp._version}}).then(function(response){_this.originalBody=_this.prepBody();return response}).then(function(response){return updateFromElasticSearch(_this,response,forceFieldRefresh)}).then(function(){_this.originalBody=_this.prepBody()}).then(function(){return _this})}},{key:"getSourceFiltering",value:function getSourceFiltering(){return{excludes:this.sourceFilters&&this.sourceFilters.map(function(filter){return filter.value})||[]}}},{key:"addScriptedField",value:function addScriptedField(name,script){var type=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"string";var lang=arguments[3];var scriptedFields=this.getScriptedFields();var names=_lodash2.default.pluck(scriptedFields,"name");if(_lodash2.default.contains(names,name))throw new _errors.DuplicateField(name);this.fields.push({name:name,script:script,type:type,scripted:true,lang:lang});this.save()}},{key:"removeScriptedField",value:function removeScriptedField(name){var fieldIndex=_lodash2.default.findIndex(this.fields,{name:name,scripted:true});if(fieldIndex>-1){this.fields.splice(fieldIndex,1);delete this.fieldFormatMap[name];return this.save()}}},{key:"popularizeField",value:function popularizeField(fieldName){var unit=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;var field=_lodash2.default.get(this,["fields","byName",fieldName]);if(!field)return;var count=Math.max((field.count||0)+unit,0);if(field.count===count)return;field.count=count;this.save()}},{key:"getNonScriptedFields",value:function getNonScriptedFields(){return _lodash2.default.where(this.fields,{scripted:false})}},{key:"getScriptedFields",value:function getScriptedFields(){return _lodash2.default.where(this.fields,{scripted:true})}},{key:"getInterval",value:function getInterval(){return this.intervalName&&_lodash2.default.find(intervals,{name:this.intervalName})}},{key:"toIndexList",value:function toIndexList(start,stop,sortDirection){return this.toDetailedIndexList(start,stop,sortDirection).then(function(detailedIndices){if(!Array.isArray(detailedIndices))return detailedIndices.index;return detailedIndices.map(function(_ref){var index=_ref.index;return index}).join(",")})}},{key:"toDetailedIndexList",value:function toDetailedIndexList(start,stop,sortDirection){var _this2=this;return Promise.resolve().then(function(){if(_this2.isTimeBasedInterval())return intervals.toIndexList(_this2.title,_this2.getInterval(),start,stop,sortDirection);return[{index:_this2.title,min:-Infinity,max:Infinity}]})}},{key:"isTimeBased",value:function isTimeBased(){return!!this.timeFieldName&&(!this.fields||!!this.getTimeField())}},{key:"isTimeBasedInterval",value:function isTimeBasedInterval(){return this.isTimeBased()&&!!this.getInterval()}},{key:"isUnsupportedTimePattern",value:function isUnsupportedTimePattern(){return!!this.intervalName}},{key:"isTimeBasedWildcard",value:function isTimeBasedWildcard(){return this.isTimeBased()&&this.isWildcard()}},{key:"getTimeField",value:function getTimeField(){if(!this.timeFieldName||!this.fields||!this.fields.byName)return;return this.fields.byName[this.timeFieldName]}},{key:"isWildcard",value:function isWildcard(){return _lodash2.default.includes(this.title,"*")}},{key:"prepBody",value:function prepBody(){var _this3=this;var body={};_lodash2.default.forOwn(mapping,function(fieldMapping,fieldName){null!=_this3[fieldName]&&(body[fieldName]=fieldMapping._serialize?fieldMapping._serialize(_this3[fieldName]):_this3[fieldName])});getIds.clearCache();return body}},{key:"create",value:function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var _this4=this;var allowOverride=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var showOverridePrompt=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var _create,potentialDuplicateByTitle,confirmMessage;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_create=function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee(duplicateId){var duplicatePattern,body,response;return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!duplicateId){_context.next=4;break}duplicatePattern=new IndexPattern(duplicateId);_context.next=4;return duplicatePattern.destroy();case 4:body=_this4.prepBody();_context.next=7;return savedObjectsClient.create(type,body,{id:_this4.id});case 7:response=_context.sent;return _context.abrupt("return",setId(_this4,response.id));case 9:case"end":return _context.stop()}},_callee,_this4)}));return function _create(_x10){return _ref3.apply(this,arguments)}}();_context2.next=3;return(0,_saved_objects.findObjectByTitle)(savedObjectsClient,type,this.title);case 3:potentialDuplicateByTitle=_context2.sent;if(potentialDuplicateByTitle){_context2.next=8;break}_context2.next=7;return _create();case 7:return _context2.abrupt("return",_context2.sent);case 8:if(allowOverride){_context2.next=19;break}confirmMessage="An index pattern with the title '"+this.title+"' already exists.";_context2.prev=10;_context2.next=13;return confirmModalPromise(confirmMessage,{confirmButtonText:"Go to existing pattern"});case 13:return _context2.abrupt("return",kbnUrl.redirect("/management/kibana/indices/{{id}}",{id:potentialDuplicateByTitle.id}));case 16:_context2.prev=16;_context2.t0=_context2["catch"](10);return _context2.abrupt("return",false);case 19:if(showOverridePrompt){_context2.next=23;break}_context2.next=22;return _create(potentialDuplicateByTitle.id);case 22:return _context2.abrupt("return",_context2.sent);case 23:_context2.prev=23;_context2.next=26;return confirmModalPromise("Are you sure you want to overwrite "+this.title+"?",{confirmButtonText:"Overwrite"});case 26:_context2.next=31;break;case 28:_context2.prev=28;_context2.t1=_context2["catch"](23);return _context2.abrupt("return",false);case 31:_context2.next=33;return _create(potentialDuplicateByTitle.id);case 33:return _context2.abrupt("return",_context2.sent);case 34:case"end":return _context2.stop()}},_callee2,this,[[10,16],[23,28]])}));function create(){return _ref2.apply(this,arguments)}return create}()},{key:"save",value:function save(){var _this5=this;var saveAttempts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;var body=this.prepBody();var originalChangedKeys=Object.keys(body).filter(function(key){return body[key]!==_this5.originalBody[key]});return savedObjectsClient.update(type,this.id,body,{version:this.version}).then(function(_ref4){var id=_ref4.id,_version=_ref4._version;setId(_this5,id);setVersion(_this5,_version)}).catch(function(err){if(409===_lodash2.default.get(err,"res.status")&&saveAttempts++<MAX_ATTEMPTS_TO_RESOLVE_CONFLICTS){var samePattern=new IndexPattern(_this5.id);return samePattern.init().then(function(){var updatedBody=samePattern.prepBody();var serverChangedKeys=Object.keys(updatedBody).filter(function(key){return updatedBody[key]!==body[key]&&_this5.originalBody[key]!==updatedBody[key]});var unresolvedCollision=false;var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=void 0;try{for(var _step,_iterator=originalChangedKeys[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var originalKey=_step.value;var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=void 0;try{for(var _step2,_iterator2=serverChangedKeys[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var serverKey=_step2.value;if(originalKey===serverKey){unresolvedCollision=true;break}}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}if(unresolvedCollision){_notify.toastNotifications.addDanger("Unable to write index pattern! Refresh the page to get the most up to date changes for this index pattern.");throw err}serverChangedKeys.forEach(function(key){_this5[key]=samePattern[key]});setVersion(_this5,samePattern.version);patternCache.clear(_this5.id);return _this5.save(saveAttempts)})}throw err})}},{key:"refreshFields",value:function refreshFields(){var _this6=this;return fetchFields(this).then(function(){return _this6.save()}).catch(function(err){notify.error(err);if(err instanceof _errors.IndexPatternMissingIndices)return[];throw err})}},{key:"toJSON",value:function toJSON(){return this.id}},{key:"toString",value:function toString(){return""+this.toJSON()}},{key:"destroy",value:function destroy(){unwatch(this);patternCache.clear(this.id);return savedObjectsClient.delete(type,this.id)}},{key:"routes",get:function get(){return getRoutes()}}]);return IndexPattern}();return IndexPattern}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getComputedFields=getComputedFields;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getComputedFields(){var self=this;var scriptFields={};var docvalueFields=[];docvalueFields=_lodash2.default.reject(self.fields.byType.date,"scripted").map(function(dateField){return{field:dateField.name,format:"date_time"}});_lodash2.default.each(self.getScriptedFields(),function(field){scriptFields[field.name]={script:{inline:field.script,lang:field.lang}}});return{storedFields:["*"],scriptFields:scriptFields,docvalueFields:docvalueFields}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.formatHit=formatHit;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _chrome=__webpack_require__(8);var _chrome2=_interopRequireDefault(_chrome);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function formatHit(indexPattern,defaultFormat){function convert(hit,val,fieldName){var field=indexPattern.fields.byName[fieldName];if(!field)return defaultFormat.convert(val,"html");var parsedUrl={origin:window.location.origin,pathname:window.location.pathname,basePath:_chrome2.default.getBasePath()};return field.format.getConverterFor("html")(val,field,hit,parsedUrl)}function formatHit(hit){if(hit.$$_formatted)return hit.$$_formatted;var partials=hit.$$_partialFormatted||(hit.$$_partialFormatted={});var cache=hit.$$_formatted={};_lodash2.default.forOwn(indexPattern.flattenHit(hit),function(val,fieldName){var formatted=null==partials[fieldName]?convert(hit,val,fieldName):partials[fieldName];cache[fieldName]=partials[fieldName]=formatted});return cache}formatHit.formatField=function(hit,fieldName){var partials=hit.$$_partialFormatted;if(partials&&null!=partials[fieldName])return partials[fieldName];partials||(partials=hit.$$_partialFormatted={});var val="_source"===fieldName?hit._source:indexPattern.flattenHit(hit)[fieldName];return partials[fieldName]=convert(hit,val,fieldName)};return formatHit}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ObjDefine=ObjDefine;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ObjDefine(defaults,prototype){this.obj;this.descs={};this.defaults=defaults||{};this.prototype=prototype||Object.prototype}ObjDefine.REDEFINE_SUPPORTED=function(){var a=Object.create(Object.prototype,{prop:{configurable:true,value:1}});Object.defineProperty(a,"prop",{configurable:true,value:2});return 2===a.prop}();ObjDefine.prototype.writ=function(name,val){this._define(name,val,true,true)};ObjDefine.prototype.fact=function(name,val){this._define(name,val,true)};ObjDefine.prototype.comp=function(name,val){this._define(name,val)};ObjDefine.prototype.create=function(){var self=this;self.obj=Object.create(this.prototype,self.descs);ObjDefine.REDEFINE_SUPPORTED||self.prototype.toJSON||(self.obj.toJSON=function(){return _lodash2.default.transform(self.obj,function(json,val,key){var desc=self.descs[key];if(desc&&desc.enumerable&&null==val)return;json[key]=val},{})});return self.obj};ObjDefine.prototype._define=function(name,val,exported,changeable){val=null!=val?val:this.defaults[name];this.descs[name]=this._describe(name,val,!!exported,!!changeable)};ObjDefine.prototype._describe=function(name,val,exported,changeable){var self=this;var exists=null!=val;if(exported&&ObjDefine.REDEFINE_SUPPORTED)return{enumerable:exists,configurable:true,get:_lodash2.default.constant(val),set:function set(update){if(!changeable)return false;self.descs[name]=self._describe(name,update,exported,changeable);Object.defineProperty(self.obj,name,self.descs[name])}};if(exported&&!ObjDefine.REDEFINE_SUPPORTED)return{enumerable:true,configurable:true,writable:changeable,value:val};return{enumerable:false,writable:changeable,configurable:true,value:val}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPatternsFlattenHitProvider=IndexPatternsFlattenHitProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function IndexPatternsFlattenHitProvider(config){var metaFields=config.get("metaFields");config.watch("metaFields",function(value){metaFields=value});function flattenHit(indexPattern,hit,deep){var flat={};var fields=indexPattern.fields.byName;(function flatten(obj,keyPrefix){keyPrefix=keyPrefix?keyPrefix+".":"";_lodash2.default.forOwn(obj,function(val,key){key=keyPrefix+key;if(deep){var isNestedField=fields[key]&&"nested"===fields[key].type;var isArrayOfObjects=Array.isArray(val)&&_lodash2.default.isPlainObject(_lodash2.default.first(val));if(isArrayOfObjects&&!isNestedField){_lodash2.default.each(val,function(v){return flatten(v,key)});return}}else if(void 0!==flat[key])return;var hasValidMapping=fields[key]&&"conflict"!==fields[key].type;var isValue=!_lodash2.default.isPlainObject(val);if(hasValidMapping||isValue){flat[key]?Array.isArray(flat[key])?flat[key].push(val):flat[key]=[flat[key],val]:flat[key]=val;return}flatten(val,key)})})(hit._source);_lodash2.default.each(metaFields,function(meta){if("_source"===meta)return;flat[meta]=hit[meta]});_lodash2.default.forOwn(hit.fields,function(val,key){if("_"===key[0]&&!_lodash2.default.contains(metaFields,key))return;flat[key]=Array.isArray(val)&&1===val.length?val[0]:val});return flat}return function flattenHitWrapper(indexPattern){return function cachedFlatten(hit){var deep=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return hit.$$_flattened||(hit.$$_flattened=flattenHit(indexPattern,hit,deep))}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();exports.createFieldsFetcher=createFieldsFetcher;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function createFieldsFetcher(apiClient,config){var FieldsFetcher=function(){function FieldsFetcher(){_classCallCheck(this,FieldsFetcher)}_createClass(FieldsFetcher,[{key:"fetch",value:function fetch(indexPattern){if(indexPattern.isTimeBasedInterval()){var interval=indexPattern.getInterval().name;return this.fetchForTimePattern(indexPattern.title,interval)}return this.fetchForWildcard(indexPattern.title)}},{key:"fetchForTimePattern",value:function fetchForTimePattern(indexPatternId){return apiClient.getFieldsForTimePattern({pattern:indexPatternId,lookBack:config.get("indexPattern:fieldMapping:lookBack"),metaFields:config.get("metaFields")})}},{key:"fetchForWildcard",value:function fetchForWildcard(indexPatternId){return apiClient.getFieldsForWildcard({pattern:indexPatternId,metaFields:config.get("metaFields")})}}]);return FieldsFetcher}();return new FieldsFetcher}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();exports.createIndexPatternsApiClient=createIndexPatternsApiClient;var _url=__webpack_require__(66);var _lodash=__webpack_require__(1);var _errors=__webpack_require__(56);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function createIndexPatternsApiClient($http,basePath){var apiBaseUrl=basePath+"/api/index_patterns/";function join(){for(var _len=arguments.length,uriComponents=Array(_len),_key=0;_key<_len;_key++)uriComponents[_key]=arguments[_key];return uriComponents.filter(Boolean).map(encodeURIComponent).join("/")}function getUrl(path,query){var noNullsQuery=(0,_lodash.pick)(query,function(value){return null!=value});var noArraysQuery=(0,_lodash.mapValues)(noNullsQuery,function(value){return Array.isArray(value)?JSON.stringify(value):value});return(0,_url.resolve)(apiBaseUrl,(0,_url.format)({pathname:join.apply(void 0,_toConsumableArray(path)),query:noArraysQuery}))}function request(method,url,body){return $http({method:method,url:url,data:body}).then(function(resp){return resp.data}).catch(function(resp){var respBody=resp.data;if(404===resp.status&&"no_matching_indices"===respBody.code)throw new _errors.IndexPatternMissingIndices(respBody.message);var err=new Error(respBody.message||respBody.error||resp.status+" Response");err.status=resp.status;err.body=respBody;throw err})}var IndexPatternsApiClient=function(){function IndexPatternsApiClient(){_classCallCheck(this,IndexPatternsApiClient)}_createClass(IndexPatternsApiClient,[{key:"getFieldsForTimePattern",value:function getFieldsForTimePattern(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var pattern=options.pattern,lookBack=options.lookBack,metaFields=options.metaFields;var url=getUrl(["_fields_for_time_pattern"],{pattern:pattern,look_back:lookBack,meta_fields:metaFields});return request("GET",url).then(function(resp){return resp.fields})}},{key:"getFieldsForWildcard",value:function getFieldsForWildcard(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var pattern=options.pattern,metaFields=options.metaFields;var url=getUrl(["_fields_for_wildcard"],{pattern:pattern,meta_fields:metaFields});return request("GET",url).then(function(resp){return resp.fields})}}]);return IndexPatternsApiClient}();return new IndexPatternsApiClient}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IsUserAwareOfUnsupportedTimePatternProvider=IsUserAwareOfUnsupportedTimePatternProvider;var _bound_to_config_obj=__webpack_require__(1303);function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function IsUserAwareOfUnsupportedTimePatternProvider(Private,$injector){var BoundToConfigObj=Private(_bound_to_config_obj.BoundToConfigObjProvider);var sessionStorage=$injector.get("sessionStorage");var HISTORY_STORAGE_KEY="indexPatterns:warnAboutUnsupportedTimePatterns:history";var FLAGS=new BoundToConfigObj({enabled:"=indexPatterns:warnAboutUnsupportedTimePatterns"});return function isUserAwareOfUnsupportedTimePattern(indexPattern){if(!FLAGS.enabled)return true;var previousIds=sessionStorage.get(HISTORY_STORAGE_KEY)||[];if(previousIds.includes(indexPattern.id))return true;sessionStorage.set(HISTORY_STORAGE_KEY,[].concat(_toConsumableArray(previousIds),[indexPattern.id]));return false}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _search_poll=__webpack_require__(3045);Object.defineProperty(exports,"SearchPollProvider",{enumerable:true,get:function get(){return _search_poll.SearchPollProvider}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SearchPollProvider=SearchPollProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _notify=__webpack_require__(9);__webpack_require__(475);var _search_request_queue=__webpack_require__(481);var _fetch=__webpack_require__(813);var _timefilter=__webpack_require__(14);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function SearchPollProvider(Private,Promise){var fetchSoon=Private(_fetch.FetchSoonProvider);var SearchPoll=function SearchPoll(){var _this=this;_classCallCheck(this,SearchPoll);this.setIntervalInMs=function(intervalInMs){_this._intervalInMs=_lodash2.default.parseInt(intervalInMs)};this.resume=function(){_this._isPolling=true;_this.resetTimer()};this.pause=function(){_this._isPolling=false;_this.clearTimer()};this.resetTimer=function(){_this.clearTimer();_this._isPolling&&(_this._timerId=setTimeout(_this._search,_this._intervalInMs))};this.clearTimer=function(){if(_this._timerId){clearTimeout(_this._timerId);_this._timerId=null}};this._search=function(){if(_this._searchPromise){_this._isIntervalFasterThanSearch=true;return}_this.resetTimer();_this._searchPromise=Promise.resolve().then(function(){_timefilter.timefilter.emit("autoRefreshFetch");var requests=_search_request_queue.searchRequestQueue.getInactive();fetchSoon.fetchSearchRequests(requests);return Promise.all(requests.map(function(request){return request.getCompleteOrAbortedPromise()}))}).then(function(){_this._searchPromise=null;if(_this._isIntervalFasterThanSearch){_this._isIntervalFasterThanSearch=false;_this._search()}}).catch(function(err){(0,_notify.fatalError)(err)})};this._isPolling=false;this._intervalInMs=void 0;this._timerId=null;this._searchPromise=null;this._isIntervalFasterThanSearch=false};return new SearchPoll}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Scanner=void 0;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _chrome=__webpack_require__(8);var _chrome2=_interopRequireDefault(_chrome);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Scanner=exports.Scanner=function Scanner($http){var _ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},index=_ref.index,type=_ref.type;if(!index)throw new Error("Expected index");if(!type)throw new Error("Expected type");if(!$http)throw new Error("Expected $http");this.$http=$http;this.index=index;this.type=type};Scanner.prototype.start=function(searchBody){var addBasePath=_chrome2.default.addBasePath;var scrollStartPath=addBasePath("/api/kibana/legacy_scroll_start");return this.$http.post(scrollStartPath,searchBody)};Scanner.prototype.continue=function(scrollId){var addBasePath=_chrome2.default.addBasePath;var scrollContinuePath=addBasePath("/api/kibana/legacy_scroll_continue");return this.$http.post(scrollContinuePath,{scrollId:scrollId})};Scanner.prototype.scanAndMap=function(searchString,options,mapFn){var _this=this;var bool={must:[],filter:[]};var scrollId=void 0;var allResults={hits:[],total:0};var opts=_lodash2.default.defaults(options||{},{pageSize:100,docCount:1e3});this.type&&bool.filter.push({bool:{should:[{term:{_type:this.type}},{term:{type:this.type}}]}});searchString?bool.must.push({simple_query_string:{query:searchString+"*",fields:["title^3","description"],default_operator:"AND"}}):bool.must.push({match_all:{}});return new Promise(function(resolve,reject){var getMoreUntilDone=function getMoreUntilDone(error,response){if(error){reject(error);return}var scanAllResults=Infinity===opts.docCount;allResults.total=scanAllResults?response.hits.total:Math.min(response.hits.total,opts.docCount);scrollId=response._scroll_id||scrollId;var hits=response.hits.hits.slice(0,allResults.total-allResults.hits.length);hits=hits.map(function(hit){if("doc"===hit._type)return{_id:hit._id.replace(_this.type+":",""),_type:_this.type,_source:hit._source[_this.type],_meta:{savedObjectVersion:2}};return _lodash2.default.pick(hit,["_id","_type","_source"])});mapFn&&(hits=hits.map(mapFn));allResults.hits=allResults.hits.concat(hits);var collectedAllResults=allResults.total===allResults.hits.length;collectedAllResults?resolve(allResults):_this.continue(scrollId).then(function(response){return getMoreUntilDone(null,response.data)}).catch(function(error){return getMoreUntilDone(error)})};var searchBody={index:_this.index,size:opts.pageSize,body:{query:{bool:bool}}};_this.start(searchBody).then(function(response){return getMoreUntilDone(null,response.data)}).catch(function(error){return getMoreUntilDone(error)})})}},function(module,exports,__webpack_require__){"use strict";var _saved_object_registry=__webpack_require__(294);__webpack_require__(818);_saved_object_registry.SavedObjectRegistryProvider.register(function(savedSearches){return savedSearches})},function(module,exports,__webpack_require__){"use strict";__webpack_require__(9);var _modules=__webpack_require__(2);var _legacy_class=__webpack_require__(77);var _courier=__webpack_require__(94);var _module=_modules.uiModules.get("discover/saved_searches",["kibana/notify","kibana/courier"]);_module.factory("SavedSearch",function(Private){var SavedObject=Private(_courier.SavedObjectProvider);(0,_legacy_class.createLegacyClass)(SavedSearch).inherits(SavedObject);function SavedSearch(id){SavedObject.call(this,{type:SavedSearch.type,mapping:SavedSearch.mapping,searchSource:SavedSearch.searchSource,id:id,defaults:{title:"New Saved Search",description:"",columns:[],hits:0,sort:[],version:1}});this.showInRecentlyAccessed=true}SavedSearch.type="search";SavedSearch.mapping={title:"text",description:"text",hits:"integer",columns:"keyword",sort:"keyword",version:"integer"};SavedSearch.fieldOrder=["title","description"];SavedSearch.searchSource=true;SavedSearch.prototype.getFullPath=function(){return"/app/kibana#/discover/"+this.id};return SavedSearch})},function(module,exports,__webpack_require__){"use strict";var _saved_object_registry=__webpack_require__(294);__webpack_require__(602);_saved_object_registry.SavedObjectRegistryProvider.register(function(savedVisualizations){return savedVisualizations})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();exports.VisProvider=VisProvider;var _events=__webpack_require__(104);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _vis_types=__webpack_require__(95);var _agg_configs=__webpack_require__(3051);var _persisted_state=__webpack_require__(800);var _brush_event=__webpack_require__(3131);var _query_filter=__webpack_require__(274);var _filter_bar_click_handler=__webpack_require__(608);var _vis_update=__webpack_require__(3147);var _search_source=__webpack_require__(812);var _saved_objects=__webpack_require__(57);var _timefilter=__webpack_require__(14);var _inspector=__webpack_require__(486);var _adapters=__webpack_require__(609);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}var getTerms=function getTerms(table,columnIndex,rowIndex){if(-1===rowIndex)return[];var rows=table.rows.filter(function(row){return row.every(function(cell,i){return cell===table.rows[rowIndex][i]||i>=columnIndex})});var terms=rows.map(function(row){return row[columnIndex]});return[].concat(_toConsumableArray(new Set(terms.filter(function(term){var notOther="__other__"!==term;var notMissing="__missing__"!==term;return notOther&&notMissing}))))};function VisProvider(Private,indexPatterns,getAppState){var visTypes=Private(_vis_types.VisTypesRegistryProvider);var queryFilter=Private(_query_filter.FilterBarQueryFilterProvider);var filterBarClickHandler=Private(_filter_bar_click_handler.FilterBarClickHandlerProvider);var SearchSource=Private(_search_source.SearchSourceProvider);var savedObjectsClient=Private(_saved_objects.SavedObjectsClientProvider);var Vis=function(_EventEmitter){_inherits(Vis,_EventEmitter);function Vis(indexPattern,visState){_classCallCheck(this,Vis);var _this=_possibleConstructorReturn(this,(Vis.__proto__||Object.getPrototypeOf(Vis)).call(this));visState=visState||{};_lodash2.default.isString(visState)&&(visState={type:visState});_this.indexPattern=indexPattern;_this._setUiState(new _persisted_state.PersistedState);_this.setCurrentState(visState);_this.setState(_this.getCurrentState(),false);_this.sessionState={};_this.API={savedObjectsClient:savedObjectsClient,SearchSource:SearchSource,indexPatterns:indexPatterns,timeFilter:_timefilter.timefilter,queryFilter:queryFilter,events:{filter:function filter(event){var appState=getAppState();filterBarClickHandler(appState)(event)},addFilter:function addFilter(data,columnIndex,rowIndex,cellValue){var agg=data.columns[columnIndex].aggConfig;var filter=[];var value=rowIndex>-1?data.rows[rowIndex][columnIndex]:cellValue;if(!value)return;if("terms"===agg.type.name&&agg.params.otherBucket){var terms=getTerms(data,columnIndex,rowIndex);filter=agg.createFilter(value,{terms:terms})}else filter=agg.createFilter(value);queryFilter.addFilters(filter)},brush:function brush(event){(0,_brush_event.onBrushEvent)(event,getAppState())}},inspectorAdapters:_this._getActiveInspectorAdapters(),getAppState:getAppState};return _this}_createClass(Vis,[{key:"openInspector",value:function openInspector(){return _inspector.Inspector.open(this.API.inspectorAdapters,{title:this.title})}},{key:"hasInspector",value:function hasInspector(){return _inspector.Inspector.isAvailable(this.API.inspectorAdapters)}},{key:"_getActiveInspectorAdapters",value:function _getActiveInspectorAdapters(){var adapters={};var typeAdapters=this.type.inspectorAdapters;(typeAdapters&&typeAdapters.requests||"courier"===this.type.requestHandler)&&(adapters.requests=new _adapters.RequestAdapter);(typeAdapters&&typeAdapters.data||"courier"===this.type.requestHandler)&&(adapters.data=new _adapters.DataAdapter);typeAdapters&&typeAdapters.custom&&Object.entries(typeAdapters.custom).forEach(function(_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],Adapter=_ref2[1];adapters[key]=new Adapter});return adapters}},{key:"setCurrentState",value:function setCurrentState(state){this.title=state.title||"";var type=state.type||this.type;if(_lodash2.default.isString(type)){this.type=visTypes.byName[type];if(!this.type)throw new Error('Invalid type "'+type+'"')}else this.type=type;this.params=_lodash2.default.defaults({},_lodash2.default.cloneDeep(state.params||{}),_lodash2.default.cloneDeep(this.type.visConfig.defaults||{}));(0,_vis_update.updateVisualizationConfig)(state.params,this.params);this.aggs=new _agg_configs.AggConfigs(this,state.aggs)}},{key:"setState",value:function setState(state){var updateCurrentState=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._state=_lodash2.default.cloneDeep(state);updateCurrentState&&this.setCurrentState(this._state)}},{key:"updateState",value:function updateState(){this.setState(this.getCurrentState(true));this.emit("update")}},{key:"forceReload",value:function forceReload(){this.emit("reload")}},{key:"getCurrentState",value:function getCurrentState(includeDisabled){return{title:this.title,type:this.type.name,params:_lodash2.default.cloneDeep(this.params),aggs:this.aggs.map(function(agg){return agg.toJSON()}).filter(function(agg){return includeDisabled||agg.enabled}).filter(Boolean)}}},{key:"getSerializableState",value:function getSerializableState(state){return{title:state.title,type:state.type,params:_lodash2.default.cloneDeep(state.params),aggs:state.aggs.map(function(agg){return agg.toJSON()}).filter(function(agg){return agg.enabled}).filter(Boolean)}}},{key:"copyCurrentState",value:function copyCurrentState(){var includeDisabled=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var state=this.getCurrentState(includeDisabled);state.aggs=new _agg_configs.AggConfigs(this,state.aggs);return state}},{key:"getStateInternal",value:function getStateInternal(includeDisabled){return{title:this._state.title,type:this._state.type,params:this._state.params,aggs:this._state.aggs.filter(function(agg){return includeDisabled||agg.enabled})}}},{key:"getEnabledState",value:function getEnabledState(){return this.getStateInternal(false)}},{key:"getAggConfig",value:function getAggConfig(){return new _agg_configs.AggConfigs(this,this.aggs.raw.filter(function(agg){return agg.enabled}))}},{key:"getState",value:function getState(){return this.getStateInternal(true)}},{key:"isHierarchical",value:function isHierarchical(){return _lodash2.default.isFunction(this.type.hierarchicalData)?!!this.type.hierarchicalData(this):!!this.type.hierarchicalData}},{key:"hasSchemaAgg",value:function hasSchemaAgg(schemaName,aggTypeName){var aggs=this.aggs.bySchemaName[schemaName]||[];return aggs.some(function(agg){if(!agg.type||!agg.type.name)return false;return agg.type.name===aggTypeName})}},{key:"hasUiState",value:function hasUiState(){return!!this.__uiState}},{key:"_setUiState",value:function _setUiState(uiState){uiState instanceof _persisted_state.PersistedState&&(this.__uiState=uiState)}},{key:"getUiState",value:function getUiState(){return this.__uiState}},{key:"uiStateVal",value:function uiStateVal(key,val){if(this.hasUiState()){if(_lodash2.default.isUndefined(val))return this.__uiState.get(key);return this.__uiState.set(key,val)}return val}}]);return Vis}(_events.EventEmitter);Vis.prototype.type="histogram";return Vis}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AggConfigs=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"===typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _indexed_array=__webpack_require__(249);var _agg_config=__webpack_require__(296);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function removeParentAggs(obj){for(var prop in obj)"parentAggs"===prop?delete obj[prop]:"object"===_typeof(obj[prop])&&removeParentAggs(obj[prop])}function parseParentAggs(dslLvlCursor,dsl){dsl.parentAggs&&_lodash2.default.each(dsl.parentAggs,function(agg,key){dslLvlCursor[key]=agg;parseParentAggs(dslLvlCursor,agg)})}var AggConfigs=function(_IndexedArray){_inherits(AggConfigs,_IndexedArray);function AggConfigs(vis){var configStates=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];_classCallCheck(this,AggConfigs);configStates=_agg_config.AggConfig.ensureIds(configStates);var _this=_possibleConstructorReturn(this,(AggConfigs.__proto__||Object.getPrototypeOf(AggConfigs)).call(this,{index:["id"],group:["schema.group","type.name","schema.name"]}));_this.push.apply(_this,_toConsumableArray(configStates.map(function(aggConfigState){if(aggConfigState instanceof _agg_config.AggConfig)return aggConfigState;return new _agg_config.AggConfig(vis,aggConfigState,_this)})));_this.vis=vis;vis&&vis.type&&vis.type.schemas&&vis.type.schemas.all&&(0,_lodash2.default)(vis.type.schemas.all).filter(function(schema){return Array.isArray(schema.defaults)&&schema.defaults.length>0}).each(function(schema){if(!_this.bySchemaName[schema.name]){var defaults=schema.defaults.slice(0,schema.max);_lodash2.default.each(defaults,function(defaultState){var state=_lodash2.default.defaults({id:_agg_config.AggConfig.nextId(_this)},defaultState);_this.push(new _agg_config.AggConfig(vis,state,_this))})}}).commit();return _this}_createClass(AggConfigs,[{key:"jsonDataEquals",value:function jsonDataEquals(aggConfigs){if(aggConfigs.length!==this.length)return false;for(var i=0;i<this.length;i+=1)if(!_lodash2.default.isEqual(aggConfigs[i].toJSON(),this[i].toJSON()))return false;return true}},{key:"toDsl",value:function toDsl(){var _this2=this;var dslTopLvl={};var dslLvlCursor=void 0;var nestedMetrics=void 0;this.vis.isHierarchical()&&(nestedMetrics=(0,_lodash2.default)(this.vis.aggs.bySchemaGroup.metrics).filter(function(agg){return"count"!==agg.type.name}).map(function(agg){return{config:agg,dsl:agg.toDsl(_this2)}}).value());this.getRequestAggs().filter(function(config){return!config.type.hasNoDsl}).forEach(function(config,i,list){if(dslLvlCursor){var prevConfig=list[i-1];var prevDsl=dslLvlCursor[prevConfig.id];dslLvlCursor=prevDsl.aggs||dslLvlCursor}else dslLvlCursor=dslTopLvl;var dsl=dslLvlCursor[config.id]=config.toDsl(_this2);var subAggs=void 0;parseParentAggs(dslLvlCursor,dsl);"buckets"===config.type.type&&i<list.length-1&&(subAggs=dsl.aggs||(dsl.aggs={}));subAggs&&nestedMetrics&&nestedMetrics.forEach(function(agg){subAggs[agg.config.id]=agg.dsl})});removeParentAggs(dslTopLvl);return dslTopLvl}},{key:"getRequestAggs",value:function getRequestAggs(){var aggregations=this.reduce(function(requestValuesAggs,agg){var aggs=agg.getRequestAggs();return aggs?requestValuesAggs.concat(aggs):requestValuesAggs},[]);return _lodash2.default.sortBy(aggregations,function(agg){return"metrics"===agg.type.type?1:0})}},{key:"getResponseAggs",value:function getResponseAggs(){return this.getRequestAggs().reduce(function(responseValuesAggs,agg){var aggs=agg.getResponseAggs();return aggs?responseValuesAggs.concat(aggs):responseValuesAggs},[])}},{key:"getResponseAggById",value:function getResponseAggById(id){id=String(id);var reqAgg=_lodash2.default.find(this.getRequestAggs(),function(agg){return id.substr(0,String(agg.id).length)===agg.id});if(!reqAgg)return;return _lodash2.default.find(reqAgg.getResponseAggs(),{id:id})}},{key:"onSearchRequestStart",value:function onSearchRequestStart(searchSource,searchRequest){return Promise.all(this.getRequestAggs().map(function(agg){return agg.onSearchRequestStart(searchSource,searchRequest)}))}}]);return AggConfigs}(_indexed_array.IndexedArray);exports.AggConfigs=AggConfigs},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FieldParamType=FieldParamType;var _lodash=__webpack_require__(1);var _errors=__webpack_require__(56);var _field=__webpack_require__(3053);var _field2=_interopRequireDefault(_field);var _base=__webpack_require__(414);__webpack_require__(820);var _indexed_array=__webpack_require__(249);var _notify=__webpack_require__(9);var _legacy_class=__webpack_require__(77);var _filter=__webpack_require__(1309);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function FieldParamType(config){FieldParamType.Super.call(this,config)}(0,_legacy_class.createLegacyClass)(FieldParamType).inherits(_base.BaseParamType);FieldParamType.prototype.editor=_field2.default;FieldParamType.prototype.scriptable=true;FieldParamType.prototype.filterFieldTypes="*";FieldParamType.prototype.onlyAggregatable=true;FieldParamType.prototype.serialize=function(field){return field.name};FieldParamType.prototype.getFieldOptions=function(aggConfig){var indexPattern=aggConfig.getIndexPattern();var fields=_filter.aggTypeFieldFilters.filter(indexPattern.fields.raw,this,indexPattern,aggConfig);return new _indexed_array.IndexedArray({index:["name"],group:["type"],initialSet:(0,_lodash.sortBy)(fields,["type","name"])})};FieldParamType.prototype.deserialize=function(fieldName,aggConfig){var field=aggConfig.getIndexPattern().fields.byName[fieldName];if(!field)throw new _errors.SavedObjectNotFound("index-pattern-field",fieldName);var validField=this.getFieldOptions(aggConfig).byName[fieldName];validField||_notify.toastNotifications.addDanger('Saved "field" parameter is now invalid. Please select a new field.');return validField};FieldParamType.prototype.write=function(aggConfig,output){var field=aggConfig.getField();if(!field)throw new TypeError('"field" is a required parameter');field.scripted?output.params.script={inline:field.script,lang:field.lang}:output.params.field=field.name}},function(module,exports){module.exports='<div class="form-group">\n  <label>\n    Field\n  </label>\n\n  <ui-select\n    title="Aggregation Field"\n    name="field"\n    required\n    class="vis-editor-field-ui-select field-select"\n    ng-show="indexedFields.length"\n    ng-model="agg.params.field"\n    on-select="aggParam.onChange(agg)"\n    uis-open-close="limit = 100"\n  >\n    <ui-select-match placeholder="Select a field">\n      {{$select.selected.displayName}}\n    </ui-select-match>\n    <ui-select-choices\n      group-by="\'type\'"\n      kbn-scroll-bottom="limit = limit + 100"\n      repeat="field in indexedFields | filter: { displayName: $select.search } | sortPrefixFirst:$select.search:\'name\' | limitTo: limit"\n    >\n      <div\n        data-test-subj="{{field.displayName}}"\n        class="vis-editor-field-ui-select__field-entry"\n        ng-bind-html="field.displayName | highlight: $select.search"\n        title="{{field.displayName}}"\n      ></div>\n    </ui-select-choices>\n  </ui-select>\n\n  <div class="hintbox" ng-if="!indexedFields.length">\n    <p>\n      <i class="fa fa-danger text-danger"></i>\n      <strong>No Compatible Fields:</strong> The "{{ agg._indexPattern.title }}" index pattern does not contain any of the following field types: {{ agg.type.params.byName.field.filterFieldTypes | commaList:false }}\n    </p>\n  </div>\n\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:true});var AggTypeFieldFilters=function(){function AggTypeFieldFilters(){_classCallCheck(this,AggTypeFieldFilters);this.filters=new Set}_createClass(AggTypeFieldFilters,[{key:"addFilter",value:function addFilter(filter){this.filters.add(filter)}},{key:"filter",value:function filter(fields,fieldParamType,indexPattern,aggConfig){var allFilters=Array.from(this.filters);var allowedAggTypeFields=fields.filter(function(field){var isAggTypeFieldAllowed=allFilters.every(function(filter){return filter(field,fieldParamType,indexPattern,aggConfig)});return isAggTypeFieldAllowed});return allowedAggTypeFields}}]);return AggTypeFieldFilters}();exports.AggTypeFieldFilters=AggTypeFieldFilters;var aggTypeFieldFilters=new AggTypeFieldFilters;exports.aggTypeFieldFilters=aggTypeFieldFilters},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.OptionedParamType=void 0;var _indexed_array=__webpack_require__(249);var _base=__webpack_require__(414);var _legacy_class=__webpack_require__(77);(0,_legacy_class.createLegacyClass)(OptionedParamType).inherits(_base.BaseParamType);function OptionedParamType(config){OptionedParamType.Super.call(this,config);this.options=new _indexed_array.IndexedArray({index:["val"],immutable:true,initialSet:this.options})}OptionedParamType.prototype.serialize=function(selected){return selected.val};OptionedParamType.prototype.deserialize=function(val){return this.options.byVal[val]};OptionedParamType.prototype.write=function(aggConfig,output){output.params[this.name]=aggConfig.params[this.name].val};exports.OptionedParamType=OptionedParamType},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RegexParamType=void 0;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _regular_expression=__webpack_require__(3057);var _regular_expression2=_interopRequireDefault(_regular_expression);var _base=__webpack_require__(414);var _legacy_class=__webpack_require__(77);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(0,_legacy_class.createLegacyClass)(RegexParamType).inherits(_base.BaseParamType);function RegexParamType(config){_lodash2.default.defaults(config,{pattern:""});RegexParamType.Super.call(this,config)}RegexParamType.prototype.editor=_regular_expression2.default;RegexParamType.prototype.disabled=function(){return false};RegexParamType.prototype.write=function(aggConfig,output){var param=aggConfig.params[this.name];var paramType=aggConfig.type.params.byName[this.name];if(!param||!param.pattern||!param.pattern.length||paramType.disabled(aggConfig))return;var obj={pattern:param.pattern};output.params[this.name]=obj};exports.RegexParamType=RegexParamType},function(module,exports){module.exports='<div ng-if="!aggParam.disabled(agg)">\n  <div class="form-group regex">\n    <label for="visEditorRegexInput{{agg.id}}{{aggParam.name}}">{{ aggParam.name | label }} Pattern</label>\n    <input\n      id="visEditorRegexInput{{agg.id}}{{aggParam.name}}"\n      type="text"\n      class="form-control"\n      ng-model="agg.params[aggParam.name].pattern"\n    >\n  </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StringParamType=void 0;var _string=__webpack_require__(3059);var _string2=_interopRequireDefault(_string);var _base=__webpack_require__(414);var _legacy_class=__webpack_require__(77);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(0,_legacy_class.createLegacyClass)(StringParamType).inherits(_base.BaseParamType);function StringParamType(config){StringParamType.Super.call(this,config)}StringParamType.prototype.editor=_string2.default;StringParamType.prototype.write=function(aggConfig,output){aggConfig.params[this.name]&&aggConfig.params[this.name].length&&(output.params[this.name]=aggConfig.params[this.name])};exports.StringParamType=StringParamType},function(module,exports){module.exports='<div class="form-group">\n  <div class="euiSpacer euiSpacer--m"></div>\n\n  <label for="visEditorStringInput{{agg.id}}{{aggParam.name}}">{{ aggParam.name | label }}</label>\n  <div>\n    <input\n      type="text"\n      id="visEditorStringInput{{agg.id}}{{aggParam.name}}"\n      ng-model="agg.params[aggParam.name]"\n      class="form-control"\n    >\n  </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.JsonParamType=void 0;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _raw_json=__webpack_require__(3061);var _raw_json2=_interopRequireDefault(_raw_json);var _base=__webpack_require__(414);var _legacy_class=__webpack_require__(77);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(0,_legacy_class.createLegacyClass)(JsonParamType).inherits(_base.BaseParamType);function JsonParamType(config){config=_lodash2.default.defaults(config,{name:"json"});JsonParamType.Super.call(this,config)}JsonParamType.prototype.editor=_raw_json2.default;JsonParamType.prototype.write=function(aggConfig,output){var paramJson=void 0;var param=aggConfig.params[this.name];if(!param)return;try{paramJson=JSON.parse(param)}catch(err){return}function filteredCombine(srcA,srcB){function mergeObjs(a,b){return(0,_lodash2.default)(a).keys().union(_lodash2.default.keys(b)).transform(function(dest,key){var val=compare(a[key],b[key]);void 0!==val&&(dest[key]=val)},{}).value()}function mergeArrays(a,b){return _lodash2.default.times(Math.max(a.length,b.length),function(i){return compare(a[i],b[i])})}function compare(a,b){if(_lodash2.default.isPlainObject(a)&&_lodash2.default.isPlainObject(b))return mergeObjs(a,b);if(Array.isArray(a)&&Array.isArray(b))return mergeArrays(a,b);if(null===b)return;if(void 0!==b)return b;return a}return compare(srcA,srcB)}output.params=filteredCombine(output.params,paramJson);return};exports.JsonParamType=JsonParamType},function(module,exports){module.exports='<div class="form-group regex">\n    <span class="hintbox-label">\n      <label for="visEditorRawJson{{agg.id}}">\n        JSON Input\n        <icon-tip\n          position="\'right\'"\n          content="\'Any JSON formatted properties you add here will be merged with the elasticsearch aggregation definition for this section. For example \\\'shard_size\\\' on a terms aggregation.\'"\n        ></icon-tip>\n      </label>\n    </span>\n  <p>\n    <textarea\n      type="text"\n      id="visEditorRawJson{{agg.id}}"\n      class="form-control"\n      ng-model="agg.params.json"\n      validate-json\n      ></textarea>\n  </p>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.countMetricAgg=void 0;var _metric_agg_type=__webpack_require__(67);var _field_formats=__webpack_require__(116);exports.countMetricAgg=new _metric_agg_type.MetricAggType({name:"count",title:"Count",hasNoDsl:true,makeLabel:function makeLabel(){return"Count"},getFormat:function getFormat(){return _field_formats.fieldFormats.getDefaultInstance("number")},getValue:function getValue(agg,bucket){return bucket.doc_count},isScalable:function isScalable(){return true}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.avgMetricAgg=void 0;var _metric_agg_type=__webpack_require__(67);exports.avgMetricAgg=new _metric_agg_type.MetricAggType({name:"avg",title:"Average",makeLabel:function makeLabel(aggConfig){return"Average "+aggConfig.getFieldDisplayName()},params:[{name:"field",filterFieldTypes:"number"}]})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.sumMetricAgg=void 0;var _metric_agg_type=__webpack_require__(67);exports.sumMetricAgg=new _metric_agg_type.MetricAggType({name:"sum",title:"Sum",makeLabel:function makeLabel(aggConfig){return"Sum of "+aggConfig.getFieldDisplayName()},params:[{name:"field",filterFieldTypes:"number"}],isScalable:function isScalable(){return true}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.medianMetricAgg=void 0;var _metric_agg_type=__webpack_require__(67);var _percentiles=__webpack_require__(1310);exports.medianMetricAgg=new _metric_agg_type.MetricAggType({name:"median",dslName:"percentiles",title:"Median",makeLabel:function makeLabel(aggConfig){return"Median "+aggConfig.getFieldDisplayName()},params:[{name:"field",filterFieldTypes:"number"},{name:"percents",default:[50]},{write:function write(agg,output){output.params.keyed=false}}],getResponseAggs:_percentiles.percentilesMetricAgg.getResponseAggs,getValue:_percentiles.percentilesMetricAgg.getValue})},function(module,exports){module.exports='<div class="form-group">\n  <label id="visEditorPercentileLabel{{agg.id}}">Percents</label>\n  <kbn-number-list\n    ng-model="agg.params.percents"\n    unit-name="percent"\n    range="[0,100]"\n    validate-ascending-order="false"\n    labelledby-id="visEditorPercentileLabel{{agg.id}}"\n    >\n  </kbn-number-list>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _range=__webpack_require__(3068);__webpack_require__(3069);var _modules=__webpack_require__(2);var _number_list=__webpack_require__(3070);var _number_list2=_interopRequireDefault(_number_list);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana").directive("kbnNumberList",function(){return{restrict:"E",template:_number_list2.default,controllerAs:"numberListCntr",require:"ngModel",scope:{validateAscendingOrder:"=?",labelledbyId:"@"},controller:function controller($scope,$attrs,$parse){var self=this;self.labelledbyId=$scope.labelledbyId;self.init=function(modelCntr){self.modelCntr=modelCntr;self.getList=function(){return self.modelCntr.$modelValue};self.getUnitName=_lodash2.default.partial($parse($attrs.unit),$scope);var defaultRange=self.range=(0,_range.parseRange)("[0,Infinity)");self.validateAscOrder=!!_lodash2.default.isUndefined($scope.validateAscendingOrder)||$scope.validateAscendingOrder;$scope.$watch(function(){return $attrs.range},function(range){if(!range){self.range=defaultRange;return}try{self.range=(0,_range.parseRange)(range)}catch(e){throw new TypeError("Unable to parse range: "+e.message)}});self.remove=function(index){var list=self.getList();if(!list)return;list.splice(index,1)};self.add=function(){var list=self.getList();if(!list)return;list.push(_lodash2.default.last(list)+1)};self.tooShort=function(){return _lodash2.default.size(self.getList())<1};self.undefinedLength=function(){return self.tooShort()&&self.modelCntr.$untouched&&self.modelCntr.$pristine};self.invalidLength=function(){return self.tooShort()&&!self.undefinedLength()};$scope.$watchCollection(self.getList,function(){self.modelCntr.$setValidity("numberListLength",!self.tooShort())})}},link:{pre:function pre($scope,$el,attrs,ngModelCntr){$scope.numberListCntr.init(ngModelCntr)}}}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.parseRange=parseRange;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _RE_NUMBER="(\\-?(?:\\d+(?:\\.\\d+)?|Infinity))";var RANGE_RE=new RegExp("^\\s*([\\[|\\(])\\s*"+_RE_NUMBER+"\\s*,\\s*"+_RE_NUMBER+"\\s*([\\]|\\)])\\s*$");function parseRange(input){var match=String(input).match(RANGE_RE);if(!match)throw new TypeError("expected input to be in interval notation e.g., (100, 200]");return new Range("["===match[1],parseFloat(match[2]),parseFloat(match[3]),"]"===match[4])}function Range(){var args=_lodash2.default.toArray(arguments);args[1]>args[2]&&args.reverse();this.minInclusive=args[0];this.min=args[1];this.max=args[2];this.maxInclusive=args[3]}Range.prototype.within=function(n){if(this.min===n&&!this.minInclusive)return false;if(this.min>n)return false;if(this.max===n&&!this.maxInclusive)return false;if(this.max<n)return false;return true}},function(module,exports,__webpack_require__){"use strict";var _key_map=__webpack_require__(603);var _modules=__webpack_require__(2);var INVALID={};var FLOATABLE=/^[\d\.e\-\+]+$/i;var VALIDATION_ERROR="numberListRangeAndOrder";var DIRECTIVE_ATTR="kbn-number-list-input";_modules.uiModules.get("kibana").directive("kbnNumberListInput",function($parse){return{restrict:"A",require:["ngModel","^kbnNumberList"],link:function link($scope,$el,attrs,controllers){var ngModelCntr=controllers[0];var numberListCntr=controllers[1];var $setModel=$parse(attrs.ngModel).assign;var $repeater=$el.closest("[ng-repeat]");var handlers={up:change(add,1),"shift-up":change(addTenth,1),down:change(add,-1),"shift-down":change(addTenth,-1),tab:go("next"),"shift-tab":go("prev"),"shift-enter":numberListCntr.add,backspace:removeIfEmpty,delete:removeIfEmpty};function removeIfEmpty(event){if(!ngModelCntr.$viewValue){$get("prev").focus();numberListCntr.remove($scope.$index);event.preventDefault()}return false}function $get(dir){return $repeater[dir]().find("["+DIRECTIVE_ATTR+"]")}function go(dir){return function(){var $to=$get(dir);if(!$to.length)return false;$to.focus()}}function idKey(event){var id=[];event.ctrlKey&&id.push("ctrl");event.shiftKey&&id.push("shift");event.metaKey&&id.push("meta");event.altKey&&id.push("alt");id.push(_key_map.keyMap[event.keyCode]||event.keyCode);return id.join("-")}function add(n,val){return parse(val+n)}function addTenth(n,val,str){var int=Math.floor(val);var dec=parseInt(str.split(".")[1]||0,10);dec+=parseInt(n,10);if(dec<0||dec>9){int+=Math.floor(dec/10);dec<0?dec=10+dec%10:dec%=10}return parse(int+"."+dec)}function change(using,mod){return function(){var str=String(ngModelCntr.$viewValue);var val=parse(str);if(val===INVALID)return;var next=using(mod,val,str);if(next===INVALID)return;$el.val(next);ngModelCntr.$setViewValue(next)}}function onKeydown(event){var handler=handlers[idKey(event)];if(!handler)return;false!==handler(event)&&event.preventDefault();$scope.$apply()}$el.on("keydown",onKeydown);$scope.$on("$destroy",function(){$el.off("keydown",onKeydown)});function parse(viewValue){var num=viewValue;if("number"!==typeof num||isNaN(num)){num=String(viewValue||0).trim();if(!FLOATABLE.test(num))return INVALID;num=parseFloat(num);if(isNaN(num))return INVALID}var range=numberListCntr.range;if(!range.within(num))return INVALID;if(numberListCntr.validateAscOrder&&$scope.$index>0){var i=$scope.$index-1;var list=numberListCntr.getList();var prev=list[i];if(num<=prev)return INVALID}return num}$scope.$watchMulti(["$index",{fn:$scope.$watchCollection,get:function get(){return numberListCntr.getList()}}],function(){var valid=parse(ngModelCntr.$viewValue)!==INVALID;ngModelCntr.$setValidity(VALIDATION_ERROR,valid)});function validate(then){return function(input){var value=parse(input);var valid=value!==INVALID;value=valid?value:input;ngModelCntr.$setValidity(VALIDATION_ERROR,valid);then&&then(input,value);return value}}ngModelCntr.$parsers.push(validate());ngModelCntr.$formatters.push(validate(function(input,value){input!==value&&$setModel($scope,value)}));parse(ngModelCntr.$viewValue)===INVALID&&ngModelCntr.$setTouched()}}})},function(module,exports){module.exports='<div\n  ng-repeat="value in numberListCntr.getList() track by $index"\n  class="form-group kuiFieldGroup"\n>\n  <div class="kuiFieldGroupSection kuiFieldGroupSection--wide">\n    <input\n      ng-model="numberListCntr.getList()[$index]"\n      kbn-number-list-input\n      input-focus\n      aria-labelledby="{{numberListCntr.labelledbyId}}"\n      class="form-control"\n    >\n  </div>\n\n  <div class="kuiFieldGroupSection">\n    <button\n      aria-label="Remove this rank value"\n      ng-click="numberListCntr.remove($index, 1)"\n      class="kuiButton kuiButton--danger kuiButton--small"\n      type="button"\n    >\n      <span class="kuiIcon fa-times"></span>\n    </button>\n  </div>\n</div>\n\n<p ng-show="numberListCntr.invalidLength()" class="text-danger text-center">\n  You must specify at least one {{numberListCntr.getUnitName()}}\n</p>\n\n<p ng-show="numberListCntr.undefinedLength()" class="text-primary text-center">\n  \x3c!-- be a bit more polite when the form is first init\'d --\x3e\n  Please specify at least one {{numberListCntr.getUnitName()}}\n</p>\n\n<div class="euiSpacer euiSpacer--s"></div>\n\n<button\n  ng-click="numberListCntr.add()"\n  type="button"\n  class="kuiButton kuiButton--primary kuiButton--fullWidth"\n>\n  <i class="fa fa-plus"></i> Add {{numberListCntr.getUnitName()}}\n</button>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.minMetricAgg=void 0;var _metric_agg_type=__webpack_require__(67);exports.minMetricAgg=new _metric_agg_type.MetricAggType({name:"min",title:"Min",makeLabel:function makeLabel(aggConfig){return"Min "+aggConfig.getFieldDisplayName()},params:[{name:"field",filterFieldTypes:"number,date"}]})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.maxMetricAgg=void 0;var _metric_agg_type=__webpack_require__(67);exports.maxMetricAgg=new _metric_agg_type.MetricAggType({name:"max",title:"Max",makeLabel:function makeLabel(aggConfig){return"Max "+aggConfig.getFieldDisplayName()},params:[{name:"field",filterFieldTypes:"number,date"}]})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.topHitMetricAgg=void 0;var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _metric_agg_type=__webpack_require__(67);var _top_sort=__webpack_require__(3074);var _top_sort2=_interopRequireDefault(_top_sort);var _top_aggregate_and_size=__webpack_require__(3075);var _top_aggregate_and_size2=_interopRequireDefault(_top_aggregate_and_size);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true}):obj[key]=value;return obj}var isNumber=function isNumber(type){return"number"===type};exports.topHitMetricAgg=new _metric_agg_type.MetricAggType({name:"top_hits",title:"Top Hit",makeLabel:function makeLabel(aggConfig){var prefix="desc"===aggConfig.params.sortOrder.val?"Last":"First";1!==aggConfig.params.size&&(prefix+=" "+aggConfig.params.size);var field=aggConfig.params.field;return prefix+" "+(field?field.displayName:"")},params:[{name:"field",onlyAggregatable:false,filterFieldTypes:function filterFieldTypes(vis,value){if("table"===vis.type.name||"metric"===vis.type.name)return true;return"number"===value},write:function write(agg,output){var field=agg.params.field;output.params={};if(field.scripted)output.params.script_fields=_defineProperty({},field.name,{script:{inline:field.script,lang:field.lang}});else{field.readFromDocValues&&(output.params.docvalue_fields=[{field:field.name,format:"use_field_mapping"}]);output.params._source="_source"===field.name||field.name}}},{name:"aggregate",type:"optioned",editor:_top_aggregate_and_size2.default,options:[{display:"Min",isCompatibleType:isNumber,isCompatibleVis:_lodash2.default.constant(true),disabled:true,val:"min"},{display:"Max",isCompatibleType:isNumber,isCompatibleVis:_lodash2.default.constant(true),disabled:true,val:"max"},{display:"Sum",isCompatibleType:isNumber,isCompatibleVis:_lodash2.default.constant(true),disabled:true,val:"sum"},{display:"Average",isCompatibleType:isNumber,isCompatibleVis:_lodash2.default.constant(true),disabled:true,val:"average"},{display:"Concatenate",isCompatibleType:_lodash2.default.constant(true),isCompatibleVis:function isCompatibleVis(name){return"metric"===name||"table"===name},disabled:true,val:"concat"}],controller:function controller($scope){$scope.options=[];$scope.$watchGroup(["vis.type.name","agg.params.field.type"],function(_ref){var _ref2=_slicedToArray(_ref,2),visName=_ref2[0],fieldType=_ref2[1];if(fieldType&&visName){$scope.options=_lodash2.default.filter($scope.aggParam.options,function(option){return option.isCompatibleVis(visName)&&option.isCompatibleType(fieldType)});1===$scope.options.length&&($scope.agg.params.aggregate=$scope.options[0])}})},write:_lodash2.default.noop},{name:"size",editor:null,default:1},{name:"sortField",type:"field",editor:null,filterFieldTypes:["number","date","ip","string"],default:function _default(agg){return agg._indexPattern.timeFieldName},write:_lodash2.default.noop},{name:"sortOrder",type:"optioned",default:"desc",editor:_top_sort2.default,options:[{display:"Descending",val:"desc"},{display:"Ascending",val:"asc"}],write:function write(agg,output){var sortField=agg.params.sortField;var sortOrder=agg.params.sortOrder;sortField.scripted?output.params.sort=[{_script:{script:{inline:sortField.script,lang:sortField.lang},type:sortField.type,order:sortOrder.val}}]:output.params.sort=[_defineProperty({},sortField.name,{order:sortOrder.val})]}}],getValue:function getValue(agg,bucket){var hits=_lodash2.default.get(bucket,agg.id+".hits.hits");if(!hits||!hits.length)return null;var path=agg.params.field.name;var values=(0,_lodash2.default)(hits).map(function(hit){return"_source"===path?hit._source:agg._indexPattern.flattenHit(hit,true)[path]}).flatten().value();1===values.length&&(values=values[0]);if(Array.isArray(values)){if(!_lodash2.default.compact(values).length)return null;switch(agg.params.aggregate.val){case"max":return _lodash2.default.max(values);case"min":return _lodash2.default.min(values);case"sum":return _lodash2.default.sum(values);case"average":return _lodash2.default.sum(values)/values.length}}return values}})},function(module,exports){module.exports='<div class="form-group">\n  <label>\n    Sort On\n  </label>\n\n  <ui-select\n    name="field"\n    sortField\n    title="Sort on"\n    class="vis-editor-field-ui-select"\n    ng-show="sortFieldOptions.length"\n    ng-model="agg.params.sortField"\n    uis-open-close="limit = 100"\n    auto-select-if-only-one="sortFieldOptions"\n  >\n    <ui-select-match placeholder="Select a field">\n      {{$select.selected.displayName}}\n    </ui-select-match>\n    <ui-select-choices\n      group-by="\'type\'"\n      kbn-scroll-bottom="limit = limit + 100"\n      repeat="field in sortFieldOptions | filter: { displayName: $select.search } | sortPrefixFirst:$select.search:\'name\' | limitTo: limit"\n    >\n      <div ng-bind-html="field.displayName | highlight: $select.search"></div>\n    </ui-select-choices>\n  </ui-select>\n</div>\n\n<div class="form-group">\n  <label for="visEditorTopSort{{agg.id}}">\n    Order\n  </label>\n\n  <select\n     id="visEditorTopSort{{agg.id}}"\n     name="sortOrder"\n     ng-model="agg.params.sortOrder"\n     required\n     ng-options="opt as opt.display for opt in aggParam.options track by opt.val"\n     class="form-control">\n  </select>\n</div>\n'},function(module,exports){module.exports='<div ng-controller="aggParam.controller" class="vis-editor-agg-form-row">\n  <div class="form-group vis-editor-agg-form-row__even-split">\n    <label for="visEditorTopHitsAggregate{{agg.id}}">\n      Aggregate with\n      <icon-tip\n        content="\'Choose a strategy for combining multiple hits or a multi-valued field into a single metric\'"\n      ></icon-tip>\n    </label>\n\n    <select\n      required\n      id="visEditorTopHitsAggregate{{agg.id}}"\n      name="aggregate"\n      ng-model="agg.params.aggregate"\n      ng-options="opt as opt.display for opt in options| orderBy: \'display\' track by opt.val"\n      class="form-control"\n    ></select>\n  </div>\n  <div class="form-group vis-editor-agg-form-row__even-split">\n    <label for="visEditorTopHitsSize{{agg.id}}">\n      Size\n      <icon-tip\n        content="\'Request top-K hits. Multiple hits will be combined via \\\'aggregate with\\\'.\'"\n      ></icon-tip>\n    </label>\n\n    <input\n       required\n       id="visEditorTopHitsSize{{agg.id}}"\n       name="size"\n       ng-model="agg.params.size"\n       class="form-control"\n       type="number"\n       min="1"\n    ></input>\n  </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.stdDeviationMetricAgg=void 0;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _metric_agg_type=__webpack_require__(67);var _get_response_agg_config_class=__webpack_require__(823);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var responseAggConfigProps={valProp:function valProp(){var details=this.keyedDetails(this.params.customLabel)[this.key];return details.valProp},makeLabel:function makeLabel(){var fieldDisplayName=this.getFieldDisplayName();var details=this.keyedDetails(this.params.customLabel,fieldDisplayName);return _lodash2.default.get(details,[this.key,"title"])},keyedDetails:function keyedDetails(customLabel,fieldDisplayName){var label=customLabel||"Standard Deviation of "+fieldDisplayName;return{std_lower:{valProp:["std_deviation_bounds","lower"],title:"Lower "+label},std_upper:{valProp:["std_deviation_bounds","upper"],title:"Upper "+label}}}};exports.stdDeviationMetricAgg=new _metric_agg_type.MetricAggType({name:"std_dev",dslName:"extended_stats",title:"Standard Deviation",makeLabel:function makeLabel(agg){return"Standard Deviation of "+agg.getFieldDisplayName()},params:[{name:"field",filterFieldTypes:"number"}],getResponseAggs:function getResponseAggs(agg){var ValueAggConfig=(0,_get_response_agg_config_class.getResponseAggConfigClass)(agg,responseAggConfigProps);return[new ValueAggConfig("std_lower"),new ValueAggConfig("std_upper")]},getValue:function getValue(agg,bucket){return _lodash2.default.get(bucket[agg.parentId],agg.valProp())}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.cardinalityMetricAgg=void 0;var _metric_agg_type=__webpack_require__(67);var _field_formats=__webpack_require__(116);exports.cardinalityMetricAgg=new _metric_agg_type.MetricAggType({name:"cardinality",title:"Unique Count",makeLabel:function makeLabel(aggConfig){return"Unique count of "+aggConfig.getFieldDisplayName()},getFormat:function getFormat(){return _field_formats.fieldFormats.getDefaultInstance("number")},params:[{name:"field"}]})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.geoBoundsMetricAgg=void 0;var _metric_agg_type=__webpack_require__(67);exports.geoBoundsMetricAgg=new _metric_agg_type.MetricAggType({name:"geo_bounds",title:"Geo Bounds",makeLabel:function makeLabel(){return"Geo Bounds"},params:[{name:"field",filterFieldTypes:"geo_point"}]})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.geoCentroidMetricAgg=void 0;var _metric_agg_type=__webpack_require__(67);exports.geoCentroidMetricAgg=new _metric_agg_type.MetricAggType({name:"geo_centroid",title:"Geo Centroid",makeLabel:function makeLabel(){return"Geo Centroid"},params:[{name:"field",filterFieldTypes:"geo_point"}],getValue:function getValue(agg,bucket){return bucket[agg.id]&&bucket[agg.id].location}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.percentileRanksMetricAgg=void 0;var _percentile_ranks=__webpack_require__(3081);var _percentile_ranks2=_interopRequireDefault(_percentile_ranks);__webpack_require__(1312);var _metric_agg_type=__webpack_require__(67);var _get_response_agg_config_class=__webpack_require__(823);var _field_formats=__webpack_require__(116);var _percentiles_get_value=__webpack_require__(1313);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var valueProps={makeLabel:function makeLabel(){var field=this.getField();var format=field&&field.format||_field_formats.fieldFormats.getDefaultInstance("number");var label=this.params.customLabel||this.getFieldDisplayName();return"Percentile rank "+format.convert(this.key,"text")+' of "'+label+'"'}};exports.percentileRanksMetricAgg=new _metric_agg_type.MetricAggType({name:"percentile_ranks",title:"Percentile Ranks",makeLabel:function makeLabel(agg){return"Percentile ranks of "+agg.getFieldDisplayName()},params:[{name:"field",filterFieldTypes:"number"},{name:"values",editor:_percentile_ranks2.default,default:[]},{write:function write(agg,output){output.params.keyed=false}}],getResponseAggs:function getResponseAggs(agg){var ValueAggConfig=(0,_get_response_agg_config_class.getResponseAggConfigClass)(agg,valueProps);return agg.params.values.map(function(value){return new ValueAggConfig(value)})},getFormat:function getFormat(){return _field_formats.fieldFormats.getInstance("percent")||_field_formats.fieldFormats.getDefaultInstance("number")},getValue:function getValue(agg,bucket){return(0,_percentiles_get_value.getPercentileValue)(agg,bucket)/100}})},function(module,exports){module.exports='<div class="form-group">\n  <label id="visEditorPercentileRanksLabel{{agg.id}}">Values</label>\n  <kbn-number-list\n    ng-model="agg.params.values"\n    unit-name="value"\n    range="[-Infinity,Infinity]"\n    labelledby-id="visEditorPercentileRanksLabel{{agg.id}}"\n    >\n  </kbn-number-list>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.derivativeMetricAgg=void 0;var _metric_agg_type=__webpack_require__(67);var _parent_pipeline_agg_helper=__webpack_require__(604);var _make_nested_label=__webpack_require__(319);function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}exports.derivativeMetricAgg=new _metric_agg_type.MetricAggType({name:"derivative",title:"Derivative",subtype:_parent_pipeline_agg_helper.parentPipelineAggHelper.subtype,makeLabel:function makeLabel(agg){return(0,_make_nested_label.makeNestedLabel)(agg,"derivative")},params:[].concat(_toConsumableArray(_parent_pipeline_agg_helper.parentPipelineAggHelper.params())),getFormat:_parent_pipeline_agg_helper.parentPipelineAggHelper.getFormat})},function(module,exports){module.exports='<div ng-controller="aggParam.controller">\n  <div class="form-group">\n    <label for="visEditorSubAggMetric{{agg.id}}">Metric</label>\n    <select\n      id="visEditorSubAggMetric{{agg.id}}"\n      name="metricAgg"\n      ng-model="agg.params.metricAgg"\n      agg="agg"\n      required\n      validate-agg\n      class="form-control">\n      <option\n        ng-repeat="respAgg in responseValueAggs track by respAgg.id"\n        value="{{respAgg.id}}"\n        ng-if="respAgg.type.name !== agg.type.name"\n        ng-disabled="isDisabledAgg(respAgg)"\n        ng-selected="agg.params.metricAgg === respAgg.id">\n        metric: {{safeMakeLabel(respAgg)}}\n      </option>\n      <option value="custom" ng-selected="agg.params.metricAgg === \'custom\'">\n        Custom Metric\n      </option>\n    </select>\n  </div>\n  <div ng-if="agg.params.metricAgg === \'custom\'" class="vis-editor-agg-order-agg">\n    <ng-form name="customMetricForm">\n      <vis-editor-agg-params\n        index-pattern="agg._indexPattern"\n        agg="agg.params.customMetric"\n        group-name="\'metrics\'">\n      </vis-editor-agg-params>\n    </ng-form>\n  </div>\n</div>\n'},function(module,exports){module.exports='<div class="form-group">\n  <div class="kuiButtonGroup">\n    <button\n      type="button"\n      class="kuiButton kuiButton--basic kuiButton--small"\n      ng-model="agg.params.row"\n      btn-radio="true">\n      Rows\n    </button>\n    <button\n      type="button"\n      class="kuiButton kuiButton--basic kuiButton--small"\n      ng-model="agg.params.row"\n      btn-radio="false">\n      Columns\n    </button>\n  </div>\n</div>\n'},function(module,exports){module.exports='<div>\n  <label>\n    Dot size ratio\n    <icon-tip\n      content="\'Change the ratio of the radius of the smallest point to the largest point\'"\n      position="\'right\'"\n    ></icon-tip>\n  </label>\n  <input type="range" step="2" min="1" max="100" class="form-control" ng-model="editorState.params.radiusRatio" />\n</div>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.parentPipelineAggController=void 0;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _safe_make_label=__webpack_require__(1314);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var parentPipelineAggController=function parentPipelineAggController($scope){$scope.safeMakeLabel=_safe_make_label.safeMakeLabel;$scope.$watch("responseValueAggs",updateOrderAgg);$scope.$watch("agg.params.metricAgg",updateOrderAgg);$scope.$on("$destroy",function(){var lastBucket=_lodash2.default.findLast($scope.state.aggs,function(agg){return"buckets"===agg.type.type});$scope.aggForm&&$scope.aggForm.agg&&$scope.aggForm.agg.$setValidity("bucket",true);lastBucket&&lastBucket.error&&delete lastBucket.error});$scope.isDisabledAgg=function(agg){var invalidAggs=["top_hits","percentiles","percentile_ranks","median","std_dev"];return Boolean(invalidAggs.find(function(invalidAgg){return invalidAgg===agg.type.name}))};function checkBuckets(){var lastBucket=_lodash2.default.findLast($scope.state.aggs,function(agg){return"buckets"===agg.type.type});var bucketHasType=lastBucket&&lastBucket.type;var bucketIsHistogram=bucketHasType&&["date_histogram","histogram"].includes(lastBucket.type.name);var canUseAggregation=lastBucket&&bucketIsHistogram;_lodash2.default.each($scope.state.aggs,function(agg){agg.error&&delete agg.error});$scope.aggForm.agg&&$scope.aggForm.agg.$setValidity("bucket",canUseAggregation);if(canUseAggregation)lastBucket.params.min_doc_count="histogram"===lastBucket.type.name?1:0;else if(lastBucket){var type=$scope.agg.type.title;lastBucket.error='Last bucket aggregation must be "Date Histogram" or \n        "Histogram" when using "'+type+'" metric aggregation!'}}function updateOrderAgg(){var agg=$scope.agg;var params=agg.params;var metricAgg=params.metricAgg;var paramDef=agg.type.params.byName.customMetric;checkBuckets();if("custom"!==metricAgg){$scope.state.aggs.find(function(agg){return agg.id===metricAgg})||(params.metricAgg=null);params.customMetric=null;return}params.customMetric=params.customMetric||paramDef.makeAgg(agg)}};exports.parentPipelineAggController=parentPipelineAggController},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var parentPipelineAggWriter=function parentPipelineAggWriter(agg,output,aggs){var selectedMetric=agg.params.customMetric||aggs.getResponseAggById(agg.params.metricAgg);agg.params.customMetric&&"count"!==agg.params.customMetric.type.name&&(output.parentAggs=(output.parentAggs||[]).concat(selectedMetric));output.params={};"count"===selectedMetric.type.name?output.params.buckets_path="_count":output.params.buckets_path=selectedMetric.id};exports.parentPipelineAggWriter=parentPipelineAggWriter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.cumulativeSumMetricAgg=void 0;var _metric_agg_type=__webpack_require__(67);var _parent_pipeline_agg_helper=__webpack_require__(604);var _make_nested_label=__webpack_require__(319);function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}exports.cumulativeSumMetricAgg=new _metric_agg_type.MetricAggType({name:"cumulative_sum",title:"Cumulative Sum",subtype:_parent_pipeline_agg_helper.parentPipelineAggHelper.subtype,makeLabel:function makeLabel(agg){return(0,_make_nested_label.makeNestedLabel)(agg,"cumulative sum")},params:[].concat(_toConsumableArray(_parent_pipeline_agg_helper.parentPipelineAggHelper.params())),getFormat:_parent_pipeline_agg_helper.parentPipelineAggHelper.getFormat})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.movingAvgMetricAgg=void 0;var _metric_agg_type=__webpack_require__(67);var _parent_pipeline_agg_helper=__webpack_require__(604);var _make_nested_label=__webpack_require__(319);function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}exports.movingAvgMetricAgg=new _metric_agg_type.MetricAggType({name:"moving_avg",title:"Moving Avg",subtype:_parent_pipeline_agg_helper.parentPipelineAggHelper.subtype,makeLabel:function makeLabel(agg){return(0,_make_nested_label.makeNestedLabel)(agg,"moving avg")},params:[].concat(_toConsumableArray(_parent_pipeline_agg_helper.parentPipelineAggHelper.params())),getFormat:_parent_pipeline_agg_helper.parentPipelineAggHelper.getFormat})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.serialDiffMetricAgg=void 0;var _metric_agg_type=__webpack_require__(67);var _parent_pipeline_agg_helper=__webpack_require__(604);var _make_nested_label=__webpack_require__(319);function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}exports.serialDiffMetricAgg=new _metric_agg_type.MetricAggType({name:"serial_diff",title:"Serial Diff",subtype:_parent_pipeline_agg_helper.parentPipelineAggHelper.subtype,makeLabel:function makeLabel(agg){return(0,_make_nested_label.makeNestedLabel)(agg,"serial diff")},params:[].concat(_toConsumableArray(_parent_pipeline_agg_helper.parentPipelineAggHelper.params())),getFormat:_parent_pipeline_agg_helper.parentPipelineAggHelper.getFormat})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.dateHistogramBucketAgg=void 0;var _jstimezonedetect=__webpack_require__(824);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _chrome=__webpack_require__(8);var _chrome2=_interopRequireDefault(_chrome);var _moment=__webpack_require__(10);var _moment2=_interopRequireDefault(_moment);__webpack_require__(820);__webpack_require__(825);var _bucket_agg_type=__webpack_require__(272);var _time_buckets=__webpack_require__(273);var _date_histogram=__webpack_require__(3095);var _interval_options=__webpack_require__(1316);var _time_interval=__webpack_require__(3096);var _time_interval2=_interopRequireDefault(_time_interval);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var config=_chrome2.default.getUiSettingsClient();var detectedTimezone=_jstimezonedetect.jstz.determine().name();var tzOffset=(0,_moment2.default)().format("Z");function getInterval(agg){var interval=_lodash2.default.get(agg,["params","interval"]);if(interval&&"custom"===interval.val)return _lodash2.default.get(agg,["params","customInterval"]);return interval}function getBounds(vis){if(vis.API.timeFilter.isTimeRangeSelectorEnabled&&vis.filters&&vis.filters.timeRange)return vis.API.timeFilter.calculateBounds(vis.filters.timeRange)}function setBounds(agg,force){if(agg.buckets._alreadySet&&!force)return;agg.buckets._alreadySet=true;var bounds=getBounds(agg.vis);agg.buckets.setBounds(agg.fieldIsTimeField()&&bounds)}exports.dateHistogramBucketAgg=new _bucket_agg_type.BucketAggType({name:"date_histogram",title:"Date Histogram",ordered:{date:true},makeLabel:function makeLabel(agg){var output=this.params.write(agg);var field=agg.getFieldDisplayName();return field+" per "+(output.metricScaleText||output.bucketInterval.description)},createFilter:_date_histogram.createFilterDateHistogram,decorateAggConfig:function decorateAggConfig(){var buckets=void 0;return{buckets:{configurable:true,get:function get(){if(buckets)return buckets;buckets=new _time_buckets.TimeBuckets;buckets.setInterval(getInterval(this));setBounds(this);return buckets}}}},getFormat:function getFormat(agg){return agg.buckets.getScaledDateFormatter()},params:[{name:"field",filterFieldTypes:"date",default:function _default(agg){return agg._indexPattern.timeFieldName},onChange:function onChange(agg){"auto"!==_lodash2.default.get(agg,"params.interval.val")||agg.fieldIsTimeField()||delete agg.params.interval;setBounds(agg,true)}},{name:"interval",type:"optioned",deserialize:function deserialize(state){var interval=_lodash2.default.find(_interval_options.intervalOptions,{val:state});return interval||_lodash2.default.find(_interval_options.intervalOptions,function(option){return Number(_moment2.default.duration(1,state))===Number(_moment2.default.duration(1,option.val))})},default:"auto",options:_interval_options.intervalOptions,editor:_time_interval2.default,modifyAggConfigOnSearchRequestStart:function modifyAggConfigOnSearchRequestStart(agg){setBounds(agg,true)},write:function write(agg,output,aggs){setBounds(agg,true);agg.buckets.setInterval(getInterval(agg));var interval=agg.buckets.getInterval();output.bucketInterval=interval;output.params.interval=interval.expression;var isDefaultTimezone=config.isDefault("dateFormat:tz");output.params.time_zone=isDefaultTimezone?detectedTimezone||tzOffset:config.get("dateFormat:tz");var scaleMetrics=interval.scaled&&interval.scale<1;if(scaleMetrics&&aggs){var all=_lodash2.default.every(aggs.bySchemaGroup.metrics,function(agg){return agg.type&&agg.type.isScalable()});if(all){output.metricScale=interval.scale;output.metricScaleText=interval.preScaled.description}}}},{name:"customInterval",default:"2h",write:_lodash2.default.noop},{name:"format"},{name:"min_doc_count",default:1},{name:"extended_bounds",default:{},write:function write(agg,output){var val=agg.params.extended_bounds;if(null!=val.min||null!=val.max){output.params.extended_bounds={min:(0,_moment2.default)(val.min).valueOf(),max:(0,_moment2.default)(val.max).valueOf()};return}}}]})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TimeBuckets=void 0;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _moment=__webpack_require__(10);var _moment2=_interopRequireDefault(_moment);var _chrome=__webpack_require__(8);var _chrome2=_interopRequireDefault(_chrome);var _parse_interval=__webpack_require__(117);var _calc_auto_interval=__webpack_require__(3093);var _calc_es_interval=__webpack_require__(3094);var _field_formats=__webpack_require__(116);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var config=_chrome2.default.getUiSettingsClient();var getConfig=function getConfig(){return config.get.apply(config,arguments)};function isValidMoment(m){return m&&"isValid"in m&&m.isValid()}function TimeBuckets(){return TimeBuckets.__cached__(this)}TimeBuckets.prototype.setBounds=function(input){if(!input)return this.clearBounds();var bounds=void 0;bounds=_lodash2.default.isPlainObject(input)?[input.min,input.max]:Array.isArray(input)?input:[];var moments=(0,_lodash2.default)(bounds).map(_lodash2.default.ary(_moment2.default,1)).sortBy(Number);var valid=2===moments.size()&&moments.every(isValidMoment);if(!valid){this.clearBounds();throw new Error("invalid bounds set: "+input)}this._lb=moments.shift();this._ub=moments.pop();if(this.getDuration().asSeconds()<0)throw new TypeError("Intervals must be positive")};TimeBuckets.prototype.clearBounds=function(){this._lb=this._ub=null};TimeBuckets.prototype.hasBounds=function(){return isValidMoment(this._ub)&&isValidMoment(this._lb)};TimeBuckets.prototype.getBounds=function(){if(!this.hasBounds())return;return{min:this._lb,max:this._ub}};TimeBuckets.prototype.getDuration=function(){if(!this.hasBounds())return;return _moment2.default.duration(this._ub-this._lb,"ms")};TimeBuckets.prototype.setInterval=function(input){var interval=input;_lodash2.default.isObject(input)&&(interval=input.val);if(!interval||"auto"===interval){this._i="auto";return}if(_lodash2.default.isString(interval)){input=interval;interval=(0,_parse_interval.parseInterval)(interval);0===+interval&&(interval=null)}if(!_moment2.default.isDuration(interval))throw new TypeError('"'+input+'" is not a valid interval.');this._i=interval};TimeBuckets.prototype.getInterval=function(){var self=this;var duration=self.getDuration();return decorateInterval(maybeScaleInterval(readInterval()));function readInterval(){var interval=self._i;if(_moment2.default.isDuration(interval))return interval;return _calc_auto_interval.calcAutoInterval.near(config.get("histogram:barTarget"),duration)}function maybeScaleInterval(interval){if(!self.hasBounds())return interval;var maxLength=config.get("histogram:maxBars");var approxLen=duration/interval;var scaled=void 0;if(!(approxLen>maxLength))return interval;scaled=_calc_auto_interval.calcAutoInterval.lessThan(maxLength,duration);if(+scaled===+interval)return interval;decorateInterval(interval);return _lodash2.default.assign(scaled,{preScaled:interval,scale:interval/scaled,scaled:true})}function decorateInterval(interval){var esInterval=(0,_calc_es_interval.calcEsInterval)(interval);interval.esValue=esInterval.value;interval.esUnit=esInterval.unit;interval.expression=esInterval.expression;interval.overflow=duration>interval&&_moment2.default.duration(interval-duration);var prettyUnits=_moment2.default.normalizeUnits(esInterval.unit);1===esInterval.value?interval.description=prettyUnits:interval.description=esInterval.value+" "+prettyUnits+"s";return interval}};TimeBuckets.prototype.getScaledDateFormat=function(){var interval=this.getInterval();var rules=config.get("dateFormat:scaled");for(var i=rules.length-1;i>=0;i--){var rule=rules[i];if(!rule[0]||interval>=_moment2.default.duration(rule[0]))return rule[1]}return config.get("dateFormat")};TimeBuckets.prototype.getScaledDateFormatter=function(){var DateFieldFormat=_field_formats.fieldFormats.getType("date");return new DateFieldFormat({pattern:this.getScaledDateFormat()},getConfig)};TimeBuckets.__cached__=function(self){var cache={};var sameMoment=same(_moment2.default.isMoment);var sameDuration=same(_moment2.default.isDuration);var desc={__cached__:{value:self}};var breakers={setBounds:"bounds",clearBounds:"bounds",setInterval:"interval"};var resources={bounds:{setup:function setup(){return[self._lb,self._ub]},changes:function changes(prev){return!sameMoment(prev[0],self._lb)||!sameMoment(prev[1],self._ub)}},interval:{setup:function setup(){return self._i},changes:function changes(prev){return!sameDuration(prev,this._i)}}};function cachedGetter(prop){return{value:function cachedGetter(){if(cache.hasOwnProperty(prop))return cache[prop];return cache[prop]=self[prop]()}}}function cacheBreaker(prop){var resource=resources[breakers[prop]];var setup=resource.setup;var changes=resource.changes;var fn=self[prop];return{value:function cacheBreaker(){var prev=setup.call(self);var ret=fn.apply(self,arguments);changes.call(self,prev)&&(cache={});return ret}}}function same(checkType){return function(a,b){if(a===b)return true;if(checkType(a)===checkType(b))return+a===+b;return false}}_lodash2.default.forOwn(TimeBuckets.prototype,function(fn,prop){if("_"===prop[0])return;breakers.hasOwnProperty(prop)?desc[prop]=cacheBreaker(prop):desc[prop]=cachedGetter(prop)});return Object.create(self,desc)};exports.TimeBuckets=TimeBuckets},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.calcAutoInterval=void 0;var _moment=__webpack_require__(10);var _moment2=_interopRequireDefault(_moment);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var d=_moment2.default.duration;var roundingRules=[[d(500,"ms"),d(100,"ms")],[d(5,"second"),d(1,"second")],[d(7.5,"second"),d(5,"second")],[d(15,"second"),d(10,"second")],[d(45,"second"),d(30,"second")],[d(3,"minute"),d(1,"minute")],[d(9,"minute"),d(5,"minute")],[d(20,"minute"),d(10,"minute")],[d(45,"minute"),d(30,"minute")],[d(2,"hour"),d(1,"hour")],[d(6,"hour"),d(3,"hour")],[d(24,"hour"),d(12,"hour")],[d(1,"week"),d(1,"d")],[d(3,"week"),d(1,"week")],[d(1,"year"),d(1,"month")],[Infinity,d(1,"year")]];var revRoundingRules=roundingRules.slice(0).reverse();function find(rules,check,last){function pick(buckets,duration){var target=duration/buckets;var lastResp=void 0;for(var i=0;i<rules.length;i++){var rule=rules[i];var resp=check(rule[0],rule[1],target);if(null==resp){if(!last)continue;if(lastResp)return lastResp;break}if(!last)return resp;lastResp=resp}var ms=Math.max(Math.floor(target),1);return _moment2.default.duration(ms,"ms")}return function(buckets,duration){var interval=pick(buckets,duration);if(interval)return _moment2.default.duration(interval._data)}}exports.calcAutoInterval={near:find(revRoundingRules,function near(bound,interval,target){if(bound>target)return interval},true),lessThan:find(revRoundingRules,function(bound,interval,target){if(interval<target)return interval}),atLeast:find(revRoundingRules,function atLeast(bound,interval,target){if(interval<=target)return interval})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.calcEsInterval=calcEsInterval;var _datemath=__webpack_require__(83);var _datemath2=_interopRequireDefault(_datemath);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var unitsDesc=_datemath2.default.unitsDesc;var largeMax=unitsDesc.indexOf("M");function calcEsInterval(duration){for(var i=0;i<unitsDesc.length;i++){var unit=unitsDesc[i];var val=duration.as(unit);if(val>=1&&Math.floor(val)===val){if(i<=largeMax&&1!==val)continue;return{value:val,unit:unit,expression:val+unit}}}var ms=duration.as("ms");return{value:ms,unit:"ms",expression:ms+"ms"}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createFilterDateHistogram=createFilterDateHistogram;var _moment=__webpack_require__(10);var _moment2=_interopRequireDefault(_moment);var _range=__webpack_require__(295);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function createFilterDateHistogram(agg,key){var start=(0,_moment2.default)(key);var interval=agg.buckets.getInterval();return(0,_range.buildRangeFilter)(agg.params.field,{gte:start.valueOf(),lt:start.add(interval).valueOf(),format:"epoch_millis"},agg._indexPattern)}},function(module,exports){module.exports='<div class="form-group">\n  <label for="visEditorInterval{{agg.id}}">\n    Interval\n    <icon-tip\n      ng-show="agg.buckets.getInterval().scaled"\n      type="\'alert\'"\n      position="\'right\'"\n      content="\'This interval creates {{ agg.buckets.getInterval().scale > 1 ? \'buckets that are too large\' : \'too many buckets\' }} to show in the selected time range, so it has been scaled to {{ agg.buckets.getInterval().description }}\'"\n    ></icon-tip>\n  </label>\n  <select\n    id="visEditorInterval{{agg.id}}"\n    ng-model="agg.params.interval"\n    ng-change="agg.write()"\n    required\n    ng-options="opt as opt.display for opt in aggParam.options.raw | filter: optionEnabled"\n    class="form-control"\n    name="interval">\n    <option value="">-- select a valid interval --</option>\n  </select>\n  <input\n    aria-label="Custom interval"\n    type="text"\n    name="customInterval"\n    ng-model="agg.params.customInterval"\n    validate-date-interval\n    ng-change="aggForm.customInterval.$valid && agg.write()"\n    ng-if="agg.params.interval.val == \'custom\'"\n    class="form-control"\n    required />\n</div>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.histogramBucketAgg=void 0;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);__webpack_require__(825);var _chrome=__webpack_require__(8);var _chrome2=_interopRequireDefault(_chrome);var _bucket_agg_type=__webpack_require__(272);var _histogram=__webpack_require__(3098);var _number_interval=__webpack_require__(3099);var _number_interval2=_interopRequireDefault(_number_interval);var _min_doc_count=__webpack_require__(3100);var _min_doc_count2=_interopRequireDefault(_min_doc_count);var _extended_bounds=__webpack_require__(3101);var _extended_bounds2=_interopRequireDefault(_extended_bounds);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var config=_chrome2.default.getUiSettingsClient();exports.histogramBucketAgg=new _bucket_agg_type.BucketAggType({name:"histogram",title:"Histogram",ordered:{},makeLabel:function makeLabel(aggConfig){return aggConfig.getFieldDisplayName()},createFilter:_histogram.createFilterHistogram,decorateAggConfig:function decorateAggConfig(){var autoBounds=void 0;return{setAutoBounds:{configurable:true,value:function value(newValue){autoBounds=newValue}},getAutoBounds:{configurable:true,value:function value(){return autoBounds}}}},params:[{name:"field",filterFieldTypes:"number"},{name:"interval",editor:_number_interval2.default,modifyAggConfigOnSearchRequestStart:function modifyAggConfigOnSearchRequestStart(aggConfig,searchSource){var field=aggConfig.getField();var aggBody=field.scripted?{script:{inline:field.script,lang:field.lang}}:{field:field.name};return searchSource.createChild().setField("size",0).setField("aggs",{maxAgg:{max:aggBody},minAgg:{min:aggBody}}).fetch().then(function(resp){aggConfig.setAutoBounds({min:_lodash2.default.get(resp,"aggregations.minAgg.value"),max:_lodash2.default.get(resp,"aggregations.maxAgg.value")})})},write:function write(aggConfig,output){var interval=parseFloat(aggConfig.params.interval);interval<=0&&(interval=1);if(aggConfig.getAutoBounds()){var range=aggConfig.getAutoBounds().max-aggConfig.getAutoBounds().min;var bars=range/interval;if(bars>config.get("histogram:maxBars")){var minInterval=range/config.get("histogram:maxBars");var orderOfMagnitude=Math.pow(10,Math.floor(Math.log10(minInterval)));var roundInterval=orderOfMagnitude;while(roundInterval<minInterval)roundInterval+=orderOfMagnitude;interval=roundInterval}}output.params.interval=interval}},{name:"min_doc_count",default:null,editor:_min_doc_count2.default,write:function write(aggConfig,output){aggConfig.params.min_doc_count?output.params.min_doc_count=0:output.params.min_doc_count=1}},{name:"extended_bounds",default:{},editor:_extended_bounds2.default,write:function write(aggConfig,output){var val=aggConfig.params.extended_bounds;!aggConfig.params.min_doc_count||null==val.min&&null==val.max||(output.params.extended_bounds={min:val.min,max:val.max})},shouldShow:function shouldShow(aggConfig){var field=aggConfig.params.field;if(field&&("number"===field.type||"date"===field.type))return aggConfig.params.min_doc_count}}]})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createFilterHistogram=createFilterHistogram;var _range=__webpack_require__(295);function createFilterHistogram(aggConfig,key){var value=parseInt(key,10);return(0,_range.buildRangeFilter)(aggConfig.params.field,{gte:value,lt:value+aggConfig.params.interval},aggConfig._indexPattern,aggConfig.fieldFormatter()(key))}},function(module,exports){module.exports='<div class="form-group">\n  <label for="visEditorInterval{{agg.id}}">\n    Minimum Interval\n    &nbsp;\n    <icon-tip\n      position="\'right\'"\n      content="\'Interval will be automatically scaled in the event that the provided value creates more buckets than specified by Advanced Setting\\\'s histogram:maxBars\'"\n    ></icon-tip>\n  </label>\n  <input\n    id="visEditorInterval{{agg.id}}"\n    ng-model="agg.params.interval"\n    required\n    type="number"\n    class="form-control"\n    name="interval"\n    min="0"\n    input-number\n    >\n</div>\n'},function(module,exports){module.exports='<div class="checkbox">\n  <label>\n    <input ng-model="agg.params.min_doc_count" type="checkbox">\n    Show empty buckets\n    &nbsp;\n    <icon-tip\n      position="\'right\'"\n      content="\'Show all buckets, not only the buckets with results\'"\n    ></icon-tip>\n  </label>\n</div>\n'},function(module,exports){module.exports='<div ng-if="aggParam.shouldShow(agg)">\n  <div>\n    <label id="extendedBoundsLabel{{agg.id}}">\n      Extended Bounds\n      &nbsp;\n      <icon-tip\n        position="\'right\'"\n        content="\'Min and Max do not filter the results, but rather extend the bounds of the result set\'"\n      ></icon-tip>\n    </label>\n  </div>\n  <div class="vis-editor-agg-form-row">\n    <div class="form-group">\n      <label\n        id="extendedBoundsMinLabel{{agg.id}}"\n        for="extendedBoundsMinInput{{agg.id}}"\n      >\n        Min <small>(optional)</small>\n      </label>\n      <input\n        id="extendedBoundsMinInput{{agg.id}}"\n        aria-labelledby="extendedBoundsLabel{{agg.id}} extendedBoundsMinLabel{{agg.id}}"\n        ng-model="agg.params.extended_bounds.min"\n        type="number"\n        class="form-control"\n        name="extended_bounds.min" />\n    </div>\n    <div class="form-group">\n      <label\n        id="extendedBoundsMaxLabel{{agg.id}}"\n        for="extendedBoundsMaxInput{{agg.id}}"\n      >\n        Max <small>(optional)</small>\n      </label>\n      <input\n        id="extendedBoundsMaxInput{{agg.id}}"\n        aria-labelledby="extendedBoundsLabel{{agg.id}} extendedBoundsMaxLabel{{agg.id}}"\n        ng-model="agg.params.extended_bounds.max"\n        type="number"\n        class="form-control"\n        name="extended_bounds.max" />\n    </div>\n  </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.rangeBucketAgg=void 0;var _bucket_agg_type=__webpack_require__(272);var _range=__webpack_require__(3103);var _field_format=__webpack_require__(596);var _range_key=__webpack_require__(3104);var _ranges=__webpack_require__(3105);var _ranges2=_interopRequireDefault(_ranges);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var keyCaches=new WeakMap;var formats=new WeakMap;exports.rangeBucketAgg=new _bucket_agg_type.BucketAggType({name:"range",title:"Range",createFilter:_range.createFilterRange,makeLabel:function makeLabel(aggConfig){return aggConfig.getFieldDisplayName()+" ranges"},getKey:function getKey(bucket,key,agg){var keys=keyCaches.get(agg);if(!keys){keys=new Map;keyCaches.set(agg,keys)}var id=_range_key.RangeKey.idBucket(bucket);key=keys.get(id);if(!key){key=new _range_key.RangeKey(bucket);keys.set(id,key)}return key},getFormat:function getFormat(agg){var format=formats.get(agg);if(format)return format;var RangeFormat=_field_format.FieldFormat.from(function(range){var format=agg.fieldOwnFormatter();return format(range.gte)+" to "+format(range.lt)});format=new RangeFormat;formats.set(agg,format);return format},params:[{name:"field",filterFieldTypes:["number"]},{name:"ranges",default:[{from:0,to:1e3},{from:1e3,to:2e3}],editor:_ranges2.default,write:function write(aggConfig,output){output.params.ranges=aggConfig.params.ranges;output.params.keyed=true}}]})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createFilterRange=createFilterRange;var _range=__webpack_require__(295);function createFilterRange(aggConfig,key){return(0,_range.buildRangeFilter)(aggConfig.params.field,key,aggConfig._indexPattern,aggConfig.fieldFormatter()(key))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var id=Symbol("id");var RangeKey=function(){function RangeKey(bucket){_classCallCheck(this,RangeKey);this.gte=null==bucket.from?-Infinity:bucket.from;this.lt=null==bucket.to?Infinity:bucket.to;this[id]=RangeKey.idBucket(bucket)}_createClass(RangeKey,[{key:"toString",value:function toString(){return this[id]}}],[{key:"idBucket",value:function idBucket(bucket){return"from:"+bucket.from+",to:"+bucket.to}}]);return RangeKey}();exports.RangeKey=RangeKey},function(module,exports){module.exports='<table class="vis-editor-agg-editor-ranges form-group" ng-show="agg.params.ranges.length">\n  <tr>\n    <th scope="col">\n      <label id="visEditorRangeFrom{{agg.id}}">From</label>\n    </th>\n    <th scope="col" colspan="2">\n      <label id="visEditorRangeTo{{agg.id}}">To</label>\n    </th>\n  </tr>\n\n  <tr\n    ng-repeat="range in agg.params.ranges track by $index">\n    <td>\n      <input\n        aria-labelledby="visEditorRangeFrom{{agg.id}}"\n        ng-model="range.from"\n        type="number"\n        class="form-control"\n        name="range.from"\n        step="any" />\n    </td>\n    <td>\n      <input\n        aria-labelledby="visEditorRangeTo{{agg.id}}"\n        ng-model="range.to"\n        type="number"\n        class="form-control"\n        name="range.to"\n        step="any" />\n    </td>\n    <td>\n      <button\n        type="button"\n        aria-label="Remove this range"\n        ng-click="agg.params.ranges.splice($index, 1)"\n        class="kuiButton kuiButton--danger kuiButton--small">\n        <i class="fa fa-times"></i>\n      </button>\n    </td>\n  </tr>\n</table>\n\n<input ng-model="agg.params.ranges.length" name="rangeLength" required min="1" type="number" class="ng-hide" />\n<div class="hintbox" ng-show="aggForm.rangeLength.$invalid">\n  <p>\n    <i class="fa fa-danger text-danger"></i>\n    <strong>Required:</strong> You must specify at least one range.\n  </p>\n</div>\n\n<button\n  ng-click="agg.params.ranges.push({})"\n  class="kuiButton kuiButton--primary kuiButton--fullWidth"\n>\n  Add Range\n</button>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.dateRangeBucketAgg=void 0;var _date_range=__webpack_require__(1317);__webpack_require__(826);__webpack_require__(485);var _bucket_agg_type=__webpack_require__(272);var _date_range2=__webpack_require__(3107);var _field_formats=__webpack_require__(116);var _date_ranges=__webpack_require__(3108);var _date_ranges2=_interopRequireDefault(_date_ranges);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.dateRangeBucketAgg=new _bucket_agg_type.BucketAggType({name:"date_range",title:"Date Range",createFilter:_date_range2.createFilterDateRange,getKey:function getKey(bucket,key,agg){var formatter=agg.fieldOwnFormatter("text",_field_formats.fieldFormats.getDefaultInstance("date"));return _date_range.dateRange.toString(bucket,formatter)},getFormat:function getFormat(){return _field_formats.fieldFormats.getDefaultInstance("string")},makeLabel:function makeLabel(aggConfig){return aggConfig.getFieldDisplayName()+" date ranges"},params:[{name:"field",filterFieldTypes:"date",default:function _default(agg){return agg._indexPattern.timeFieldName}},{name:"ranges",default:[{from:"now-1w/w",to:"now"}],editor:_date_ranges2.default}]})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createFilterDateRange=createFilterDateRange;var _chrome=__webpack_require__(8);var _chrome2=_interopRequireDefault(_chrome);var _date_range=__webpack_require__(1317);var _range=__webpack_require__(295);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var config=_chrome2.default.getUiSettingsClient();function createFilterDateRange(agg,key){var range=_date_range.dateRange.parse(key,config.get("dateFormat"));var filter={};range.from&&(filter.gte=+range.from);range.to&&(filter.lt=+range.to);range.to&&range.from&&(filter.format="epoch_millis");return(0,_range.buildRangeFilter)(agg.params.field,filter,agg._indexPattern)}},function(module,exports){module.exports='<div>\n    <table class="vis-editor-agg-editor-ranges form-group" ng-show="agg.params.ranges.length">\n      <tr>\n        <th scope="col">\n          <label id="visEditorDateRangeFrom{{agg.id}}">From</label>\n        </th>\n        <th scope="col" colspan="2">\n          <label id="visEditorDateRangeTo{{agg.id}}">To</label>\n        </th>\n      </tr>\n\n      <tr\n        ng-repeat="range in agg.params.ranges track by $index">\n        <td>\n          <input\n            aria-labelledby="visEditorDateRangeFrom{{agg.id}}"\n            ng-model="range.from"\n            validate-date-math\n            type="text"\n            class="form-control"\n            name="range.from" />\n        </td>\n        <td>\n          <input\n            aria-labelledby="visEditorDateRangeTo{{agg.id}}"\n            ng-model="range.to"\n            validate-date-math\n            class="form-control"\n            name="range.to" />\n        </td>\n        <td>\n          <button\n            type="button"\n            aria-label="Remove this range"\n            ng-click="agg.params.ranges.splice($index, 1)"\n            class="kuiButton kuiButton--danger kuiButton--small">\n            <i class="fa fa-times" ></i>\n          </button>\n        </td>\n      </tr>\n      <tr>\n        <td colspan="3">\n          <small>\n            <a\n              class="kuiLink"\n              documentation-href="date.dateMath"\n              target="_blank"\n              rel="noopener noreferrer"\n            >\n              Accepted date formats\n            </a>\n          </small>\n        </td>\n      </tr>\n    </table>\n\n    <input ng-model="agg.params.ranges.length" name="rangeLength" required min="1" type="number" class="ng-hide" />\n    <div class="hintbox" ng-show="aggForm.rangeLength.$invalid">\n      <p>\n        <i class="fa fa-danger text-danger"></i>\n        <strong>Required:</strong> You must specify at least one date range.\n      </p>\n    </div>\n\n    <button\n      ng-click="agg.params.ranges.push({})"\n      class="kuiButton kuiButton--primary kuiButton--fullWidth"\n    >\n      Add Range\n    </button>\n  </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ipRangeBucketAgg=void 0;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);__webpack_require__(827);__webpack_require__(1319);var _bucket_agg_type=__webpack_require__(272);var _ip_range=__webpack_require__(3110);var _ip_ranges=__webpack_require__(3111);var _ip_ranges2=_interopRequireDefault(_ip_ranges);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.ipRangeBucketAgg=new _bucket_agg_type.BucketAggType({name:"ip_range",title:"IPv4 Range",createFilter:_ip_range.createFilterIpRange,getKey:function getKey(bucket,key){if(key)return key;var from=_lodash2.default.get(bucket,"from","-Infinity");var to=_lodash2.default.get(bucket,"to","Infinity");return from+" to "+to},makeLabel:function makeLabel(aggConfig){return aggConfig.getFieldDisplayName()+" IP ranges"},params:[{name:"field",filterFieldTypes:"ip"},{name:"ipRangeType",default:"fromTo",write:_lodash2.default.noop},{name:"ranges",default:{fromTo:[{from:"0.0.0.0",to:"127.255.255.255"},{from:"128.0.0.0",to:"191.255.255.255"}],mask:[{mask:"0.0.0.0/1"},{mask:"128.0.0.0/2"}]},editor:_ip_ranges2.default,write:function write(aggConfig,output){var ipRangeType=aggConfig.params.ipRangeType;var ranges=aggConfig.params.ranges[ipRangeType];"fromTo"===ipRangeType&&(ranges=_lodash2.default.map(ranges,function(range){return _lodash2.default.omit(range,_lodash2.default.isNull)}));output.params.ranges=ranges}}]})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();exports.createFilterIpRange=createFilterIpRange;var _cidr_mask=__webpack_require__(1320);var _range=__webpack_require__(295);function createFilterIpRange(aggConfig,key){var range=void 0;if("mask"===aggConfig.params.ipRangeType)range=new _cidr_mask.CidrMask(key).getRange();else{var _key$split=key.split(/\s+to\s+/),_key$split2=_slicedToArray(_key$split,2),from=_key$split2[0],to=_key$split2[1];range={from:"-Infinity"===from?-Infinity:from,to:"Infinity"===to?Infinity:to}}return(0,_range.buildRangeFilter)(aggConfig.params.field,{gte:range.from,lte:range.to},aggConfig._indexPattern)}},function(module,exports){module.exports='<div>\n\n  <p>\n    <button type="button" class="kuiButton kuiButton--secondary" ng-show="agg.params.ipRangeType == \'mask\'" ng-click="agg.params.ipRangeType = \'fromTo\'">Use From/To</button>\n    <button type="button" class="kuiButton kuiButton--secondary" ng-show="agg.params.ipRangeType != \'mask\'" ng-click="agg.params.ipRangeType = \'mask\'">Use CIDR Masks</button>\n  </p>\n\n  <div class="euiSpacer euiSpacer--s"></div>\n\n  <div ng-show="agg.params.ipRangeType != \'mask\'">\n    <table class="vis-editor-agg-editor-ranges form-group" ng-show="agg.params.ranges.fromTo.length">\n      <tr>\n        <th scope="col">\n          <label id="visEditorIpRangeFromLabel{{agg.id}}">From</label>\n        </th>\n        <th scope="col" colspan="2">\n          <label id="visEditorIpRangeToLabel{{agg.id}}">To</label>\n        </th>\n      </tr>\n\n      <tr\n        ng-repeat="range in agg.params.ranges.fromTo track by $index">\n        <td>\n          <input\n            aria-labelledby="visEditorIpRangeFromLabel{{agg.id}}"\n            validate-ip\n            ng-model="range.from"\n            type="text"\n            class="form-control"\n            name="range.from" />\n        </td>\n        <td>\n          <input\n            aria-labelledby="visEditorIpRangeToLabel{{agg.id}}"\n            validate-ip\n            ng-model="range.to"\n            class="form-control"\n            name="range.to" />\n        </td>\n        <td>\n          <button\n            type="button"\n            aria-label="Remove this range"\n            ng-click="agg.params.ranges.fromTo.splice($index, 1)"\n            class="kuiButton kuiButton--danger kuiButton--small">\n            <i class="fa fa-times" ></i>\n          </button>\n        </td>\n      </tr>\n    </table>\n\n    <input ng-if="agg.params.ipRangeType != \'mask\'" ng-model="agg.params.ranges.fromTo.length" name="rangeLength" required min="1" type="number" class="ng-hide" />\n    <div class="hintbox" ng-show="aggForm.rangeLength.$invalid">\n      <p>\n        <i class="fa fa-danger text-danger"></i>\n        <strong>Required:</strong> You must specify at least one IP range.\n      </p>\n    </div>\n\n    <button\n      ng-click="agg.params.ranges.fromTo.push({})"\n      class="kuiButton kuiButton--primary kuiButton--fullWidth"\n    >\n      Add Range\n    </button>\n  </div>\n\n  <div ng-show="agg.params.ipRangeType == \'mask\'">\n    <table class="vis-editor-agg-editor-ranges form-group" ng-show="agg.params.ranges.mask.length">\n      <tr>\n        <th scope="col">\n          <label id="visEditorIpRangeCidrLabel{{agg.id}}">CIDR Mask</label>\n        </th>\n      </tr>\n\n      <tr\n        ng-repeat="range in agg.params.ranges.mask track by $index">\n        <td>\n          <input\n            aria-labelledby="visEditorIpRangeCidrLabel{{agg.id}}"\n            validate-cidr-mask\n            ng-model="range.mask"\n            type="text"\n            class="form-control"\n            name="range.from" />\n        </td>\n        <td>\n          <button\n            type="button"\n            aria-label="Remove this CIDR mask"\n            ng-click="agg.params.ranges.mask.splice($index, 1)"\n            class="kuiButton kuiButton--danger kuiButton--small">\n            <i class="fa fa-times" ></i>\n          </button>\n        </td>\n      </tr>\n    </table>\n\n    <input ng-if="agg.params.ipRangeType == \'mask\'" ng-model="agg.params.ranges.mask.length" name="rangeLength" required min="1" type="number" class="ng-hide" />\n    <div class="hintbox" ng-show="aggForm.rangeLength.$invalid">\n      <p>\n        <i class="fa fa-danger text-danger"></i>\n        <strong>Required:</strong> You must specify at least one IP range.\n      </p>\n    </div>\n\n    <button\n      ng-click="agg.params.ranges.mask.push({})"\n      class="kuiButton kuiButton--primary  kuiButton--fullWidth"\n    >\n      Add Range\n    </button>\n  </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.termsBucketAgg=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _chrome=__webpack_require__(8);var _chrome2=_interopRequireDefault(_chrome);var _bucket_agg_type=__webpack_require__(272);var _agg_config=__webpack_require__(296);var _schemas=__webpack_require__(96);var _terms=__webpack_require__(1321);var _order_agg=__webpack_require__(3113);var _order_agg2=_interopRequireDefault(_order_agg);var _order_and_size=__webpack_require__(1322);var _order_and_size2=_interopRequireDefault(_order_and_size);var _other_bucket=__webpack_require__(3114);var _other_bucket2=_interopRequireDefault(_other_bucket);var _courier_inspector_utils=__webpack_require__(1323);var _terms_other_bucket_helper=__webpack_require__(3115);var _notify=__webpack_require__(9);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}var aggFilter=["!top_hits","!percentiles","!median","!std_dev","!derivative","!moving_avg","!serial_diff","!cumulative_sum","!avg_bucket","!max_bucket","!min_bucket","!sum_bucket"];var orderAggSchema=new _schemas.Schemas([{group:"none",name:"orderAgg",title:"Order Agg",hideCustomLabel:true,aggFilter:aggFilter}]).all[0];function isNotType(type){return function(agg){var field=agg.params.field;return!field||field.type!==type}}var migrateIncludeExcludeFormat={serialize:function serialize(value){return!value||_lodash2.default.isString(value)?value:value.pattern},write:function write(aggConfig,output){var value=aggConfig.params[this.name];_lodash2.default.isObject(value)?output.params[this.name]=value.pattern:value&&(output.params[this.name]=value)}};exports.termsBucketAgg=new _bucket_agg_type.BucketAggType({name:"terms",title:"Terms",makeLabel:function makeLabel(agg){var params=agg.params;return agg.getFieldDisplayName()+": "+params.order.display},getFormat:function getFormat(bucket){return{getConverterFor:function getConverterFor(type){return function(val){if("__other__"===val)return bucket.params.otherBucketLabel;if("__missing__"===val)return bucket.params.missingBucketLabel;var parsedUrl={origin:window.location.origin,pathname:window.location.pathname,basePath:_chrome2.default.getBasePath()};var converter=bucket.params.field.format.getConverterFor(type);return converter(val,void 0,void 0,parsedUrl)}}}},createFilter:_terms.createFilterTerms,postFlightRequest:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(resp,aggConfigs,aggConfig,searchSource,inspectorAdapters){var nestedSearchSource,filterAgg,request,response;return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:nestedSearchSource=searchSource.createChild();if(!aggConfig.params.otherBucket){_context.next=12;break}filterAgg=(0,_terms_other_bucket_helper.buildOtherBucketAgg)(aggConfigs,aggConfig,resp);nestedSearchSource.setField("aggs",filterAgg);request=inspectorAdapters.requests.start("Other bucket",{description:"This request counts the number of documents that fall\n          outside the criterion of the data buckets."});nestedSearchSource.getSearchRequestBody().then(function(body){request.json(body)});request.stats((0,_courier_inspector_utils.getRequestInspectorStats)(nestedSearchSource));_context.next=9;return nestedSearchSource.fetch();case 9:response=_context.sent;request.stats((0,_courier_inspector_utils.getResponseInspectorStats)(nestedSearchSource,response)).ok({json:response});resp=(0,_terms_other_bucket_helper.mergeOtherBucketAggResponse)(aggConfigs,resp,response,aggConfig,filterAgg());case 12:aggConfig.params.missingBucket&&(resp=(0,_terms_other_bucket_helper.updateMissingBucket)(resp,aggConfigs,aggConfig));return _context.abrupt("return",resp);case 14:case"end":return _context.stop()}},_callee,void 0)}));function postFlightRequest(_x,_x2,_x3,_x4,_x5){return _ref.apply(this,arguments)}return postFlightRequest}(),params:[{name:"field",filterFieldTypes:["number","boolean","date","ip","string"]},{name:"size",default:5},{name:"orderAgg",type:_agg_config.AggConfig,default:null,editor:_order_agg2.default,serialize:function serialize(orderAgg){return orderAgg.toJSON()},deserialize:function deserialize(state,agg){return this.makeOrderAgg(agg,state)},makeOrderAgg:function makeOrderAgg(termsAgg,state){state=state||{};state.schema=orderAggSchema;var orderAgg=new _agg_config.AggConfig(termsAgg.vis,state);orderAgg.id=termsAgg.id+"-orderAgg";return orderAgg},controller:function controller($scope){$scope.safeMakeLabel=function(agg){try{return agg.makeLabel()}catch(e){return"- agg not valid -"}};var INIT={};var prevOrderBy=INIT;$scope.$watch("responseValueAggs",updateOrderAgg);$scope.$watch("agg.params.orderBy",updateOrderAgg);$scope.rejectAgg=function rejectAgg(agg){return aggFilter.includes("!"+agg.type.name)};$scope.$watch("agg.params.field.type",function(type){"string"!==type&&($scope.agg.params.missingBucket=false)});function updateOrderAgg(){if(!$scope.responseValueAggs)return;var agg=$scope.agg;var params=agg.params;var orderBy=params.orderBy;var paramDef=agg.type.params.byName.orderAgg;if(!orderBy&&prevOrderBy===INIT){var respAgg=(0,_lodash2.default)($scope.responseValueAggs).filter(function(agg){return!$scope.rejectAgg(agg)}).first();respAgg||(respAgg={id:"_key"});params.orderBy=respAgg.id;return}prevOrderBy=orderBy;if(!orderBy||"custom"!==orderBy){params.orderAgg=null;var _respAgg=(0,_lodash2.default)($scope.responseValueAggs).filter(function(agg){return!$scope.rejectAgg(agg)}).find({id:orderBy});_respAgg||(params.orderBy="_key");return}params.orderAgg=params.orderAgg||paramDef.makeOrderAgg(agg)}},write:function write(agg,output,aggs){var dir=agg.params.order.val;var order=output.params.order={};var orderAgg=agg.params.orderAgg||aggs.getResponseAggById(agg.params.orderBy);output.params.script&&(output.params.valueType="number"===agg.getField().type?"float":agg.getField().type);agg.params.missingBucket&&"string"===agg.params.field.type&&(output.params.missing="__missing__");if(!orderAgg){order[agg.params.orderBy||"_count"]=dir;return}if("count"===orderAgg.type.name){"asc"===dir&&_notify.toastNotifications.addWarning("Sorting in Ascending order by Count in Terms aggregations is deprecated");order._count=dir;return}var orderAggId=orderAgg.id;orderAgg.parentId&&(orderAgg=aggs.byId[orderAgg.parentId]);output.subAggs=(output.subAggs||[]).concat(orderAgg);order[orderAggId]=dir}},{name:"order",type:"optioned",default:"desc",editor:_order_and_size2.default,options:[{display:"Descending",val:"desc"},{display:"Ascending",val:"asc"}],write:_lodash2.default.noop},{name:"orderBy",write:_lodash2.default.noop},{name:"otherBucket",default:false,editor:_other_bucket2.default,write:_lodash2.default.noop},{name:"otherBucketLabel",default:"Other",write:_lodash2.default.noop},{name:"missingBucket",default:false,write:_lodash2.default.noop},{name:"missingBucketLabel",default:"Missing",write:_lodash2.default.noop},_extends({name:"exclude",type:"string",advanced:true,disabled:isNotType("string")},migrateIncludeExcludeFormat),_extends({name:"include",type:"string",advanced:true,disabled:isNotType("string")},migrateIncludeExcludeFormat)]})},function(module,exports){module.exports='<div ng-controller="aggParam.controller">\n  <div class="form-group">\n    <label for="visEditorOrder{{agg.id}}">Order By</label>\n    <select\n      id="visEditorOrder{{agg.id}}"\n      name="orderBy"\n      ng-model="agg.params.orderBy"\n      required\n      class="form-control">\n      <option\n        ng-repeat="respAgg in responseValueAggs track by respAgg.id"\n        value="{{respAgg.id}}"\n        ng-disabled="rejectAgg(respAgg)"\n        ng-selected="agg.params.orderBy === respAgg.id">\n        metric: {{safeMakeLabel(respAgg)}}\n      </option>\n      <option value="custom" ng-selected="agg.params.orderBy === \'custom\'">\n        Custom Metric\n      </option>\n       <option value="_key" ng-selected="agg.params.orderBy === \'_key\'">\n        Alphabetical\n      </option>\n    </select>\n  </div>\n  <div ng-show="agg.params.orderAgg" class="vis-editor-agg-order-agg">\n    <vis-editor-agg-params\n      index-pattern="agg._indexPattern"\n      agg="agg.params.orderAgg"\n      ng-if="agg.params.orderAgg"\n      group-name="\'metrics\'">\n    </vis-editor-agg-params>\n  </div>\n</div>\n'},function(module,exports){module.exports='<div>\n  <div class="vis-editor-agg-form-row">\n    <div class="form-group">\n      <label>\n        <input\n          type="checkbox"\n          class="kuiCheckBox"\n          name="showOther"\n          ng-model="agg.params.otherBucket"\n        >\n        Group other values in separate bucket\n        <icon-tip\n          position="\'right\'"\n          content="\'Values not in the top N are grouped in this bucket. To include documents with missing values, enable \\\'Show missing values\\\'.\'"\n        ></icon-tip>\n      </label>\n    </div>\n  </div>\n  <div class="vis-editor-agg-form-row" ng-if="agg.params.otherBucket">\n    <div class="form-group">\n      <label>\n        Label for other bucket\n      </label>\n      <div>\n        <input\n          type="text"\n          ng-model="agg.params.otherBucketLabel"\n          class="form-control kuiSideBarInput"\n        >\n      </div>\n    </div>\n  </div>\n  <div class="vis-editor-agg-form-row">\n    <div class="form-group">\n      <label>\n        <input\n          type="checkbox"\n          class="kuiCheckBox"\n          name="showMissing"\n          ng-model="agg.params.missingBucket"\n          ng-disabled="agg.params.field.type !== \'string\'"\n        >\n        Show missing values\n        <icon-tip\n          position="\'right\'"\n          content="\'Only works for fields of type \\\'string\\\'. When enabled, include documents with missing values in the search. If this bucket is in the top N, it appears in the chart.  If not in the top N, and you enable \\\'Group other values in separate bucket\\\', Elasticsearch adds the missing values to the \\\'other\\\' bucket.\'"\n        ></icon-tip>\n      </label>\n    </div>\n  </div>\n  <div class="vis-editor-agg-form-row" ng-show="agg.params.missingBucket">\n    <div class="form-group">\n      <label>\n        Label for missing values\n      </label>\n      <div>\n        <input\n          type="text"\n          ng-model="agg.params.missingBucketLabel"\n          class="form-control kuiSideBarInput"\n          ng-disabled="agg.params.field.type !== \'string\'"\n        >\n      </div>\n    </div>\n  </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.updateMissingBucket=exports.mergeOtherBucketAggResponse=exports.buildOtherBucketAgg=void 0;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _agg_config=__webpack_require__(296);var _exists=__webpack_require__(828);var _phrases=__webpack_require__(605);var _courier=__webpack_require__(94);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}var getNestedAggDSL=function getNestedAggDSL(aggNestedDsl,startFromAggId){if(aggNestedDsl[startFromAggId])return aggNestedDsl[startFromAggId];return getNestedAggDSL(_lodash2.default.values(aggNestedDsl)[0].aggs,startFromAggId)};var getAggResultBuckets=function getAggResultBuckets(aggConfigs,response,aggWithOtherBucket,key){var keyParts=key.split("-");var responseAgg=response;var _loop=function _loop(i){if(keyParts[i]){var agg=_lodash2.default.values(responseAgg)[0];var aggKey=_lodash2.default.keys(responseAgg)[0];var aggConfig=_lodash2.default.find(aggConfigs,function(agg){return agg.id===aggKey});var bucket=_lodash2.default.find(agg.buckets,function(bucket,bucketObjKey){var bucketKey=aggConfig.getKey(bucket,Number.isInteger(bucketObjKey)?null:bucketObjKey).toString();return bucketKey===keyParts[i]});bucket&&(responseAgg=bucket)}};for(var i in keyParts)_loop(i);if(responseAgg[aggWithOtherBucket.id])return responseAgg[aggWithOtherBucket.id].buckets;return[]};var getAggConfigResultMissingBuckets=function getAggConfigResultMissingBuckets(responseAggs,aggId){var missingKey="__missing__";var resultBuckets=[];if(responseAggs[aggId]){var matchingBucket=responseAggs[aggId].buckets.find(function(bucket){return bucket.key===missingKey});matchingBucket&&resultBuckets.push(matchingBucket);return resultBuckets}_lodash2.default.each(responseAggs,function(agg){agg.buckets&&_lodash2.default.each(agg.buckets,function(bucket){resultBuckets=[].concat(_toConsumableArray(resultBuckets),_toConsumableArray(getAggConfigResultMissingBuckets(bucket,aggId,missingKey)))})});return resultBuckets};var getOtherAggTerms=function getOtherAggTerms(requestAgg,key,otherAgg){return requestAgg["other-filter"].filters.filters[key].bool.must_not.filter(function(filter){return filter.match_phrase&&filter.match_phrase[otherAgg.params.field.name]}).map(function(filter){return filter.match_phrase[otherAgg.params.field.name].query})};var buildOtherBucketAgg=function buildOtherBucketAgg(aggConfigs,aggWithOtherBucket,response){var bucketAggs=aggConfigs.filter(function(agg){return"buckets"===agg.type.type});var index=bucketAggs.findIndex(function(agg){return agg.id===aggWithOtherBucket.id});var aggs=aggConfigs.toDsl();var indexPattern=aggWithOtherBucket.params.field.indexPattern;var filterAgg=new _agg_config.AggConfig(aggConfigs[index].vis,{type:"filters",id:"other"});var resultAgg={aggs:getNestedAggDSL(aggs,aggWithOtherBucket.id).aggs,filters:filterAgg.toDsl()};var walkBucketTree=function walkBucketTree(aggIndex,aggs,aggId,filters,key){var agg=aggs[aggId];var newAggIndex=aggIndex+1;var newAgg=bucketAggs[newAggIndex];var currentAgg=bucketAggs[aggIndex];if(aggIndex<index){_lodash2.default.each(agg.buckets,function(bucket,bucketObjKey){var bucketKey=currentAgg.getKey(bucket,Number.isInteger(bucketObjKey)?null:bucketObjKey);var filter=_lodash2.default.cloneDeep(bucket.filter)||currentAgg.createFilter(bucketKey);var newFilters=[].concat(_toConsumableArray(filters),[filter]);walkBucketTree(newAggIndex,bucket,newAgg.id,newFilters,key+"-"+bucketKey.toString())});return}aggWithOtherBucket.params.missingBucket&&!agg.buckets.some(function(bucket){return"__missing__"===bucket.key})||filters.push((0,_exists.buildExistsFilter)(aggWithOtherBucket.params.field,aggWithOtherBucket.params.field.indexPattern));_lodash2.default.each(agg.buckets,function(bucket){if("__missing__"===bucket.key)return;var filter=currentAgg.createFilter(bucket.key);filter.meta.negate=true;filters.push(filter)});resultAgg.filters.filters[key]={bool:(0,_courier.buildQueryFromFilters)(filters,_lodash2.default.noop,indexPattern)}};walkBucketTree(0,response.aggregations,bucketAggs[0].id,[],"");return function(){return{"other-filter":resultAgg}}};var mergeOtherBucketAggResponse=function mergeOtherBucketAggResponse(aggsConfig,response,otherResponse,otherAgg,requestAgg){var updatedResponse=_lodash2.default.cloneDeep(response);_lodash2.default.each(otherResponse.aggregations["other-filter"].buckets,function(bucket,key){if(!bucket.doc_count)return;var bucketKey=key.replace(/^-/,"");var aggResultBuckets=getAggResultBuckets(aggsConfig,updatedResponse.aggregations,otherAgg,bucketKey);var requestFilterTerms=getOtherAggTerms(requestAgg,key,otherAgg);var phraseFilter=(0,_phrases.buildPhrasesFilter)(otherAgg.params.field,requestFilterTerms,otherAgg.params.field.indexPattern);phraseFilter.meta.negate=true;bucket.filters=[phraseFilter];bucket.key="__other__";aggResultBuckets.some(function(bucket){return"__missing__"===bucket.key})&&bucket.filters.push((0,_exists.buildExistsFilter)(otherAgg.params.field,otherAgg.params.field.indexPattern));aggResultBuckets.push(bucket)});return updatedResponse};var updateMissingBucket=function updateMissingBucket(response,aggConfigs,agg){var updatedResponse=_lodash2.default.cloneDeep(response);var aggResultBuckets=getAggConfigResultMissingBuckets(updatedResponse.aggregations,agg.id);aggResultBuckets.forEach(function(bucket){bucket.key="__missing__"});return updatedResponse};exports.buildOtherBucketAgg=buildOtherBucketAgg;exports.mergeOtherBucketAggResponse=mergeOtherBucketAggResponse;exports.updateMissingBucket=updateMissingBucket},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.filterBucketAgg=void 0;var _bucket_agg_type=__webpack_require__(272);exports.filterBucketAgg=new _bucket_agg_type.BucketAggType({name:"filter",title:"Filter",params:[{name:"geo_bounding_box"}]})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.filtersBucketAgg=void 0;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _angular=__webpack_require__(16);var _angular2=_interopRequireDefault(_angular);var _bucket_agg_type=__webpack_require__(272);var _filters=__webpack_require__(3118);var _courier=__webpack_require__(94);var _filters2=__webpack_require__(3119);var _filters3=_interopRequireDefault(_filters2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.filtersBucketAgg=new _bucket_agg_type.BucketAggType({name:"filters",title:"Filters",createFilter:_filters.createFilterFilters,customLabels:false,params:[{name:"filters",editor:_filters3.default,default:[{input:{},label:""}],write:function write(aggConfig,output){var inFilters=aggConfig.params.filters;if(!_lodash2.default.size(inFilters))return;var outFilters=_lodash2.default.transform(inFilters,function(filters,filter){var input=_lodash2.default.cloneDeep(filter.input);if(!input){console.log('malformed filter agg params, missing "input" query');return}var query=input.query=(0,_courier.luceneStringToDsl)(input.query);if(!query){console.log('malformed filter agg params, missing "query" on input');return}(0,_courier.decorateQuery)(query);var matchAllLabel=""===filter.input.query&&_lodash2.default.has(query,"match_all")?"*":"";var label=filter.label||matchAllLabel||_lodash2.default.get(query,"query_string.query")||_angular2.default.toJson(query);filters[label]=input},{});if(!_lodash2.default.size(outFilters))return;var params=output.params||(output.params={});params.filters=outFilters}}]})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createFilterFilters=createFilterFilters;var _query=__webpack_require__(1324);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function createFilterFilters(aggConfig,key){var dslFilters=_lodash2.default.get(aggConfig.toDsl(),"filters.filters");var filter=dslFilters[key];if(filter)return(0,_query.buildQueryFilter)(filter.query,aggConfig._indexPattern.id)}},function(module,exports){module.exports='<div class="form-group">\n  <div ng-repeat="filter in agg.params.filters">\n    <div class="vis-editor-agg-header">\n      <label for="visEditorFilterInput{{agg.id}}">\n          Filter {{$index + 1}}\n          <span ng-if="filter.label">- {{ filter.label }}</span>\n      </label>\n\n      <div class="kuiButtonGroup kuiButtonGroup--united">\n        <button\n          ng-click="showConfig = !showConfig"\n          type="button"\n          aria-label="Toggle filter label"\n          aria-expanded="{{!!showConfig}}"\n          aria-controls="visEditorFilterLabel{{agg.id}}"\n          class="kuiButton kuiButton--basic kuiButton--small">\n          <i class="fa fa-tag"></i>\n        </button>\n        <button\n          type="button"\n          aria-label="Remove this filter"\n          ng-click="agg.params.filters.splice($index, 1)"\n          class="kuiButton kuiButton--danger kuiButton--small">\n          <i class="fa fa-times"></i>\n        </button>\n      </div>\n    </div>\n\n    <div class="form-group">\n      <input\n        id="visEditorFilterInput{{agg.id}}"\n        parse-query\n        ng-model="filter.input.query"\n        type="text"\n        class="form-control"\n        name="filter{{$index}}">\n    </div>\n\n    <div class="form-group" ng-show="showConfig" id="visEditorFilterLabel{{agg.id}}">\n      <label for="visEditorFilterLabelInput{{agg.id}}">Filter {{$index + 1}} label</label>\n      <input\n        id="visEditorFilterLabelInput{{agg.id}}"\n        ng-model="filter.label"\n        placeholder="Label"\n        type="text"\n        class="form-control"\n        name="label{{$index}}">\n    </div>\n  </div>\n</div>\n\n<input ng-model="agg.params.filters.length" name="filterLength" required min="1" type="number" class="ng-hide" />\n<div class="hintbox" ng-show="aggForm.filterLength.$invalid">\n  <p>\n    <i class="fa fa-danger text-danger"></i>\n    <strong>Required:</strong> You must specify at least one filter.\n  </p>\n</div>\n\n<button\n  click-focus="\'filter\'+(agg.params.filters.length-1)"\n  ng-click="agg.params.filters.push({input:{}})"\n  class="kuiButton kuiButton--primary kuiButton--fullWidth"\n>\n  Add Filter\n</button>\n\n<div class="euiSpacer euiSpacer--s"></div>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.significantTermsBucketAgg=void 0;var _bucket_agg_type=__webpack_require__(272);var _terms=__webpack_require__(1321);var _order_and_size=__webpack_require__(1322);var _order_and_size2=_interopRequireDefault(_order_and_size);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.significantTermsBucketAgg=new _bucket_agg_type.BucketAggType({name:"significant_terms",title:"Significant Terms",makeLabel:function makeLabel(aggConfig){return"Top "+aggConfig.params.size+" unusual terms in "+aggConfig.getFieldDisplayName()},createFilter:_terms.createFilterTerms,params:[{name:"field",scriptable:false,filterFieldTypes:"string"},{name:"size",editor:_order_and_size2.default},{name:"exclude",type:"regex",advanced:true},{name:"include",type:"regex",advanced:true}]})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.geoHashBucketAgg=void 0;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _chrome=__webpack_require__(8);var _chrome2=_interopRequireDefault(_chrome);var _bucket_agg_type=__webpack_require__(272);var _agg_config=__webpack_require__(296);var _precision=__webpack_require__(3122);var _precision2=_interopRequireDefault(_precision);var _decode_geo_hash=__webpack_require__(829);var _geo_utils=__webpack_require__(3123);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true}):obj[key]=value;return obj}var config=_chrome2.default.getUiSettingsClient();var defaultPrecision=2;var maxPrecision=parseInt(config.get("visualization:tileMap:maxPrecision"),10)||12;var zoomPrecision={};var minGeohashPixels=16;for(var zoom=0;zoom<=21;zoom+=1){var worldPixels=256*Math.pow(2,zoom);zoomPrecision[zoom]=1;for(var precision=2;precision<=maxPrecision;precision+=1){var columns=(0,_decode_geo_hash.geohashColumns)(precision);if(!(worldPixels/columns>=minGeohashPixels))break;zoomPrecision[zoom]=precision}}function getPrecision(precision){precision=parseInt(precision,10);isNaN(precision)&&(precision=defaultPrecision);if(precision>maxPrecision)return maxPrecision;return precision}function isOutsideCollar(bounds,collar){return bounds&&collar&&!(0,_geo_utils.geoContains)(collar,bounds)}exports.geoHashBucketAgg=new _bucket_agg_type.BucketAggType({name:"geohash_grid",title:"Geohash",params:[{name:"field",filterFieldTypes:"geo_point"},{name:"autoPrecision",default:true,write:_lodash2.default.noop},{name:"isFilteredByCollar",default:true,write:_lodash2.default.noop},{name:"useGeocentroid",default:true,write:_lodash2.default.noop},{name:"mapZoom",default:2,write:_lodash2.default.noop},{name:"mapCenter",default:[0,0],write:_lodash2.default.noop},{name:"precision",editor:_precision2.default,default:defaultPrecision,deserialize:getPrecision,controller:function controller(){},write:function write(aggConfig,output){var currZoom=aggConfig.params.mapZoom;var autoPrecisionVal=zoomPrecision[currZoom];output.params.precision=aggConfig.params.autoPrecision?autoPrecisionVal:getPrecision(aggConfig.params.precision)}}],getRequestAggs:function getRequestAggs(agg){var aggs=[];var vis=agg.vis,params=agg.params;if(params.isFilteredByCollar&&agg.getField()){var mapBounds=params.mapBounds,mapZoom=params.mapZoom;if(mapBounds){var mapCollar=void 0;if(!agg.lastMapCollar||agg.lastMapCollar.zoom!==mapZoom||isOutsideCollar(mapBounds,agg.lastMapCollar)){mapCollar=(0,_geo_utils.scaleBounds)(mapBounds);mapCollar.zoom=mapZoom;agg.lastMapCollar=mapCollar}else mapCollar=agg.lastMapCollar;var boundingBox=_defineProperty({ignore_unmapped:true},agg.getField().name,{top_left:mapCollar.top_left,bottom_right:mapCollar.bottom_right});aggs.push(new _agg_config.AggConfig(vis,{type:"filter",id:"filter_agg",enabled:true,params:{geo_bounding_box:boundingBox},schema:{group:"buckets"}}))}}aggs.push(agg);params.useGeocentroid&&aggs.push(new _agg_config.AggConfig(vis,{type:"geo_centroid",enabled:true,params:{field:agg.getField()}}));return aggs}})},function(module,exports){module.exports='<div class="vis-editor-agg-form-row" ng-controller="agg.type.params.byName.precision.controller">\n  <div ng-if="!agg.params.autoPrecision" class="form-group">\n    <label for="visEditorMapPrecision{{agg.id}}">Precision</label>\n    <div class="vis-editor-agg-form-row">\n      <input\n        id="visEditorMapPrecision{{agg.id}}"\n        name="precision"\n        ng-model="agg.params.precision"\n        required\n        class="form-control"\n        type="range"\n        min="1"\n        max="{{config.get(\'visualization:tileMap:maxPrecision\')}}"\n        >\n      <div class="form-group vis-editor-agg-form-value">\n        {{agg.params.precision}}\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class="vis-option-item">\n  <label>\n    <input type="checkbox"\n    name="autoPrecision"\n    ng-model="agg.params.autoPrecision">\n    Change precision on map zoom\n  </label>\n</div>\n\n<div class="vis-option-item">\n  <label>\n    <input type="checkbox"\n           name="useGeocentroid"\n           ng-model="agg.params.useGeocentroid">\n    Place markers off grid (use geocentroid)\n  </label>\n</div>\n\n<div class="vis-option-item">\n  <label>\n    <input\n      type="checkbox"\n      data-test-subj="isFilteredByCollarCheckbox"\n      name="isFilteredByCollar"\n      ng-model="agg.params.isFilteredByCollar"\n    >\n\n    Only request data around map extent\n\n    <icon-tip\n      position="\'right\'"\n      content="\'Apply geo_bounding_box filter aggregation to narrow the subject area to the map view box with collar\'"\n    ></icon-tip>\n  </label>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.geoContains=geoContains;exports.scaleBounds=scaleBounds;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function geoContains(collar,bounds){if(bounds.top_left.lat>collar.top_left.lat||bounds.top_left.lon<collar.top_left.lon)return false;if(bounds.bottom_right.lat<collar.bottom_right.lat||bounds.bottom_right.lon>collar.bottom_right.lon)return false;return true}function scaleBounds(bounds){if(!bounds)return;var scale=.5;var topLeft=bounds.top_left;var bottomRight=bounds.bottom_right;var latDiff=_lodash2.default.round(Math.abs(topLeft.lat-bottomRight.lat),5);var lonDiff=_lodash2.default.round(Math.abs(bottomRight.lon-topLeft.lon),5);0===latDiff&&(latDiff=lonDiff);var latDelta=latDiff*scale;var topLeftLat=_lodash2.default.round(topLeft.lat,5)+latDelta;topLeftLat>90&&(topLeftLat=90);var bottomRightLat=_lodash2.default.round(bottomRight.lat,5)-latDelta;bottomRightLat<-90&&(bottomRightLat=-90);var lonDelta=lonDiff*scale;var topLeftLon=_lodash2.default.round(topLeft.lon,5)-lonDelta;topLeftLon<-180&&(topLeftLon=-180);var bottomRightLon=_lodash2.default.round(bottomRight.lon,5)+lonDelta;bottomRightLon>180&&(bottomRightLon=180);return{top_left:{lat:topLeftLat,lon:topLeftLon},bottom_right:{lat:bottomRightLat,lon:bottomRightLon}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.bucketSumMetricAgg=void 0;var _metric_agg_type=__webpack_require__(67);var _make_nested_label=__webpack_require__(319);var _sibling_pipeline_agg_helper=__webpack_require__(606);function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}exports.bucketSumMetricAgg=new _metric_agg_type.MetricAggType({name:"sum_bucket",title:"Sum Bucket",makeLabel:function makeLabel(agg){return(0,_make_nested_label.makeNestedLabel)(agg,"overall sum")},subtype:_sibling_pipeline_agg_helper.siblingPipelineAggHelper.subtype,params:[].concat(_toConsumableArray(_sibling_pipeline_agg_helper.siblingPipelineAggHelper.params())),getFormat:_sibling_pipeline_agg_helper.siblingPipelineAggHelper.getFormat})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.siblingPipelineAggController=void 0;var _safe_make_label=__webpack_require__(1314);var siblingPipelineAggController=function siblingPipelineAggController(type){return function($scope){$scope.aggType=type;$scope.aggTitle="customMetric"===type?"Metric":"Bucket";$scope.aggGroup="customMetric"===type?"metrics":"buckets";$scope.safeMakeLabel=_safe_make_label.safeMakeLabel;function updateAgg(){var agg=$scope.agg;var params=agg.params;var paramDef=agg.type.params.byName[type];params[type]=params[type]||paramDef.makeAgg(agg)}updateAgg()}};exports.siblingPipelineAggController=siblingPipelineAggController},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var siblingPipelineAggWriter=function siblingPipelineAggWriter(agg,output){if(!agg.params.customMetric)return;var metricAgg=agg.params.customMetric;var bucketAgg=agg.params.customBucket;if("count"!==metricAgg.type.name){bucketAgg.subAggs=(output.subAggs||[]).concat(metricAgg);output.params.buckets_path=bucketAgg.id+">"+metricAgg.id}else output.params.buckets_path=bucketAgg.id+">_count";output.parentAggs=(output.parentAggs||[]).concat(bucketAgg)};exports.siblingPipelineAggWriter=siblingPipelineAggWriter},function(module,exports){module.exports='<div ng-controller="aggParam.controller">\n  <div class="form-group" ng-if="agg.params[aggType]">\n    <label>{{aggTitle}}</label>\n    <div class="vis-editor-agg-order-agg">\n      <ng-form name="{{aggType}}Form">\n        <vis-editor-agg-params\n          agg="agg.params[aggType]"\n          index-pattern="agg._indexPattern"\n          group-name="\'{{aggGroup}}\'">\n        </vis-editor-agg-params>\n      </ng-form>\n    </div>\n  </div>\n\n</div>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.bucketAvgMetricAgg=void 0;var _lodash=__webpack_require__(1);var _metric_agg_type=__webpack_require__(67);var _make_nested_label=__webpack_require__(319);var _sibling_pipeline_agg_helper=__webpack_require__(606);function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}exports.bucketAvgMetricAgg=new _metric_agg_type.MetricAggType({name:"avg_bucket",title:"Average Bucket",makeLabel:function makeLabel(agg){return(0,_make_nested_label.makeNestedLabel)(agg,"overall average")},subtype:_sibling_pipeline_agg_helper.siblingPipelineAggHelper.subtype,params:[].concat(_toConsumableArray(_sibling_pipeline_agg_helper.siblingPipelineAggHelper.params())),getFormat:_sibling_pipeline_agg_helper.siblingPipelineAggHelper.getFormat,getValue:function getValue(agg,bucket){var customMetric=agg.params.customMetric;var scaleMetrics=customMetric.type&&customMetric.type.isScalable();var value=bucket[agg.id]&&bucket[agg.id].value;if(scaleMetrics&&"date_histogram"===agg.params.customBucket.type.name){var aggInfo=agg.params.customBucket.write();value*=(0,_lodash.get)(aggInfo,"bucketInterval.scale",1)}return value}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.bucketMinMetricAgg=void 0;var _metric_agg_type=__webpack_require__(67);var _make_nested_label=__webpack_require__(319);var _sibling_pipeline_agg_helper=__webpack_require__(606);function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}exports.bucketMinMetricAgg=new _metric_agg_type.MetricAggType({name:"min_bucket",title:"Min Bucket",makeLabel:function makeLabel(agg){return(0,_make_nested_label.makeNestedLabel)(agg,"overall min")},subtype:_sibling_pipeline_agg_helper.siblingPipelineAggHelper.subtype,params:[].concat(_toConsumableArray(_sibling_pipeline_agg_helper.siblingPipelineAggHelper.params())),getFormat:_sibling_pipeline_agg_helper.siblingPipelineAggHelper.getFormat})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.bucketMaxMetricAgg=void 0;var _metric_agg_type=__webpack_require__(67);var _make_nested_label=__webpack_require__(319);var _sibling_pipeline_agg_helper=__webpack_require__(606);function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}exports.bucketMaxMetricAgg=new _metric_agg_type.MetricAggType({name:"max_bucket",title:"Max Bucket",makeLabel:function makeLabel(agg){return(0,_make_nested_label.makeNestedLabel)(agg,"overall max")},subtype:_sibling_pipeline_agg_helper.siblingPipelineAggHelper.subtype,params:[].concat(_toConsumableArray(_sibling_pipeline_agg_helper.siblingPipelineAggHelper.params())),getFormat:_sibling_pipeline_agg_helper.siblingPipelineAggHelper.getFormat})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.onBrushEvent=onBrushEvent;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _moment=__webpack_require__(10);var _moment2=_interopRequireDefault(_moment);var _range=__webpack_require__(295);var _timefilter=__webpack_require__(14);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function onBrushEvent(event,$state){if(!event.data.xAxisField)return;var isDate="date"===event.data.xAxisField.type;var isNumber="number"===event.data.xAxisField.type;isDate&&event.data.xAxisField.name===event.data.indexPattern.timeFieldName?setTimefilter():(isDate||isNumber)&&setRange();function setTimefilter(){var from=(0,_moment2.default)(event.range[0]);var to=(0,_moment2.default)(event.range[1]);if(to-from===0)return;_timefilter.timefilter.setTime({from:from,to:to,mode:"absolute"})}function setRange(){if(event.range.length<=1)return;var existingFilter=$state.filters.find(function(filter){return filter.meta&&filter.meta.key===event.data.xAxisField.name});var min=event.range[0];var max=event.range[event.range.length-1];var range=void 0;range=isDate?{gte:(0,_moment2.default)(min).valueOf(),lt:(0,_moment2.default)(max).valueOf(),format:"epoch_millis"}:{gte:min,lt:max};if(_lodash2.default.has(existingFilter,"range"))existingFilter.range[event.data.xAxisField.name]=range;else if(_lodash2.default.has(existingFilter,"script.script.params.gte")&&_lodash2.default.has(existingFilter,"script.script.params.lt")){existingFilter.script.script.params.gte=min;existingFilter.script.script.params.lt=max}else{var newFilter=(0,_range.buildRangeFilter)(event.data.xAxisField,range,event.data.indexPattern,event.data.xAxisFormatter);$state.$newFilters=[newFilter]}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.onlyDisabled=onlyDisabled;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var pluckDisabled=function pluckDisabled(filter){return _lodash2.default.get(filter,"meta.disabled")};function onlyDisabled(newFilters,oldFilters){return _lodash2.default.every(newFilters.concat(oldFilters),function(newFilter){return pluckDisabled(newFilter)})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.onlyStateChanged=onlyStateChanged;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _compare_filters=__webpack_require__(607);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var compareOptions={disabled:true,negate:true};function onlyStateChanged(newFilters,oldFilters){return _lodash2.default.every(newFilters,function(newFilter){var match=_lodash2.default.find(oldFilters,function(oldFilter){return(0,_compare_filters.compareFilters)(newFilter,oldFilter,compareOptions)});return!!match})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterBarLibMapFilterProvider=FilterBarLibMapFilterProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _generate_mapping_chain=__webpack_require__(3135);var _map_match_all=__webpack_require__(3136);var _map_phrase=__webpack_require__(3137);var _map_phrases=__webpack_require__(3138);var _map_range=__webpack_require__(3139);var _map_exists=__webpack_require__(3140);var _map_missing=__webpack_require__(3141);var _map_query_string=__webpack_require__(3142);var _map_geo_bounding_box=__webpack_require__(3143);var _map_geo_polygon=__webpack_require__(3144);var _map_default=__webpack_require__(3145);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function FilterBarLibMapFilterProvider(Promise,Private){var generateMappingChain=Private(_generate_mapping_chain.FilterBarLibGenerateMappingChainProvider);var mappers=[Private(_map_match_all.FilterBarLibMapMatchAllProvider),Private(_map_range.FilterBarLibMapRangeProvider),Private(_map_phrase.FilterBarLibMapPhraseProvider),Private(_map_phrases.FilterBarLibMapPhrasesProvider),Private(_map_exists.FilterBarLibMapExistsProvider),Private(_map_missing.FilterBarLibMapMissingProvider),Private(_map_query_string.FilterBarLibMapQueryStringProvider),Private(_map_geo_bounding_box.FilterBarLibMapGeoBoundingBoxProvider),Private(_map_geo_polygon.FilterBarLibMapGeoPolygonProvider),Private(_map_default.FilterBarLibMapDefaultProvider)];var noop=function noop(){return Promise.reject(new Error("No mappings have been found for filter."))};var mapFn=_lodash2.default.reduceRight(mappers,function(memo,map){var filterChainFn=generateMappingChain(map);return filterChainFn(memo)},noop);return function(filter){return mapFn(filter).then(function(result){filter.meta=filter.meta||{};filter.meta.type=result.type;filter.meta.key=result.key;filter.meta.value=result.value;filter.meta.params=result.params;filter.meta.disabled=!!filter.meta.disabled;filter.meta.negate=!!filter.meta.negate;filter.meta.alias=filter.meta.alias||null;return filter})}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterBarLibGenerateMappingChainProvider=FilterBarLibGenerateMappingChainProvider;function FilterBarLibGenerateMappingChainProvider(Promise){var noop=function noop(){return Promise.reject(new Error("No mappings have been found for filter."))};return function(fn){return function(next){next=next||noop;return function(filter){return fn(filter).catch(function(result){if(result===filter)return next(filter);return Promise.reject(result)})}}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterBarLibMapMatchAllProvider=FilterBarLibMapMatchAllProvider;function FilterBarLibMapMatchAllProvider(Promise){return function(filter){if(filter.match_all){var type="match_all";var key=filter.meta.field;var value=filter.meta.formattedValue||"all";return Promise.resolve({type:type,key:key,value:value})}return Promise.reject(filter)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterBarLibMapPhraseProvider=FilterBarLibMapPhraseProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _errors=__webpack_require__(56);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function FilterBarLibMapPhraseProvider(Promise,indexPatterns){return function(filter){var isScriptedPhraseFilter=isScriptedPhrase(filter);if(!_lodash2.default.has(filter,["query","match"])&&!isScriptedPhraseFilter)return Promise.reject(filter);function getParams(indexPattern){var type="phrase";var key=isScriptedPhraseFilter?filter.meta.field:Object.keys(filter.query.match)[0];var params=isScriptedPhraseFilter?filter.script.script.params:filter.query.match[key];var query=isScriptedPhraseFilter?params.value:params.query;var value=indexPattern&&indexPattern.fields.byName[key]?indexPattern.fields.byName[key].format.convert(query):query;return{type:type,key:key,value:value,params:params}}return indexPatterns.get(filter.meta.index).then(getParams).catch(function(error){if(error instanceof _errors.SavedObjectNotFound)return getParams();throw error})}}function isScriptedPhrase(filter){var params=_lodash2.default.get(filter,["script","script","params"]);return params&&params.value}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterBarLibMapPhrasesProvider=FilterBarLibMapPhrasesProvider;function FilterBarLibMapPhrasesProvider(Promise){return function(filter){var _filter$meta=filter.meta,type=_filter$meta.type,key=_filter$meta.key,value=_filter$meta.value,params=_filter$meta.params;return"phrases"!==type?Promise.reject(filter):Promise.resolve({type:type,key:key,value:value,params:params})}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterBarLibMapRangeProvider=FilterBarLibMapRangeProvider;var _lodash=__webpack_require__(1);var _errors=__webpack_require__(56);function FilterBarLibMapRangeProvider(Promise,indexPatterns){return function(filter){var isScriptedRangeFilter=isScriptedRange(filter);if(!filter.range&&!isScriptedRangeFilter)return Promise.reject(filter);function getParams(indexPattern){var type="range";var key=isScriptedRangeFilter?filter.meta.field:Object.keys(filter.range)[0];var params=isScriptedRangeFilter?filter.script.script.params:filter.range[key];var left=(0,_lodash.has)(params,"gte")?params.gte:params.gt;null==left&&(left=-Infinity);var right=(0,_lodash.has)(params,"lte")?params.lte:params.lt;null==right&&(right=Infinity);var value=left+" to "+right;if(indexPattern){var convert=indexPattern.fields.byName[key].format.getConverterFor("text");value=convert(left)+" to "+convert(right)}return{type:type,key:key,value:value,params:params}}return indexPatterns.get(filter.meta.index).then(getParams).catch(function(error){if(error instanceof _errors.SavedObjectNotFound)return getParams();throw error})}}function isScriptedRange(filter){var params=(0,_lodash.get)(filter,["script","script","params"]);return params&&Object.keys(params).find(function(key){return["gte","gt","lte","lt"].includes(key)})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterBarLibMapExistsProvider=FilterBarLibMapExistsProvider;function FilterBarLibMapExistsProvider(Promise){return function(filter){if(filter.exists){var type="exists";var key=filter.exists.field;var value=type;return Promise.resolve({type:type,key:key,value:value})}return Promise.reject(filter)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterBarLibMapMissingProvider=FilterBarLibMapMissingProvider;function FilterBarLibMapMissingProvider(Promise){return function(filter){if(filter.missing){var type="missing";var key=filter.missing.field;var value=type;return Promise.resolve({type:type,key:key,value:value})}return Promise.reject(filter)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterBarLibMapQueryStringProvider=FilterBarLibMapQueryStringProvider;function FilterBarLibMapQueryStringProvider(Promise){return function(filter){if(filter.query&&filter.query.query_string){var type="query_string";var key="query";var value=filter.query.query_string.query;return Promise.resolve({type:type,key:key,value:value})}return Promise.reject(filter)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterBarLibMapGeoBoundingBoxProvider=FilterBarLibMapGeoBoundingBoxProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _errors=__webpack_require__(56);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function FilterBarLibMapGeoBoundingBoxProvider(Promise,indexPatterns){return function(filter){if(filter.geo_bounding_box){var getParams=function getParams(indexPattern){var type="geo_bounding_box";var key=_lodash2.default.keys(filter.geo_bounding_box).filter(function(key){return"ignore_unmapped"!==key})[0];var params=filter.geo_bounding_box[key];var topLeft=indexPattern?indexPattern.fields.byName[key].format.convert(params.top_left):JSON.stringify(params.top_left);var bottomRight=indexPattern?indexPattern.fields.byName[key].format.convert(params.bottom_right):JSON.stringify(params.bottom_right);var value=topLeft+" to "+bottomRight;return{type:type,key:key,value:value,params:params}};return indexPatterns.get(filter.meta.index).then(getParams).catch(function(error){if(error instanceof _errors.SavedObjectNotFound)return getParams();throw error})}return Promise.reject(filter)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterBarLibMapGeoPolygonProvider=FilterBarLibMapGeoPolygonProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _errors=__webpack_require__(56);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function FilterBarLibMapGeoPolygonProvider(Promise,indexPatterns){return function(filter){if(filter.geo_polygon){var getParams=function getParams(indexPattern){var type="geo_polygon";var key=_lodash2.default.keys(filter.geo_polygon).filter(function(key){return"ignore_unmapped"!==key})[0];var params=filter.geo_polygon[key];var points=params.points.map(function(point){return indexPattern?indexPattern.fields.byName[key].format.convert(point):JSON.stringify(point)});var value=points.join(", ");return{type:type,key:key,value:value,params:params}};return indexPatterns.get(filter.meta.index).then(getParams).catch(function(error){if(error instanceof _errors.SavedObjectNotFound)return getParams();throw error})}return Promise.reject(filter)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterBarLibMapDefaultProvider=FilterBarLibMapDefaultProvider;var _angular=__webpack_require__(16);var _angular2=_interopRequireDefault(_angular);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function FilterBarLibMapDefaultProvider(Promise){var metaProperty=/(^\$|meta)/;return function(filter){var key=_lodash2.default.find(_lodash2.default.keys(filter),function(key){return!key.match(metaProperty)});if(key){var type="custom";var value=_angular2.default.toJson(filter[key]);return Promise.resolve({type:type,key:key,value:value})}return Promise.reject(filter)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.findByParam=findByParam;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function findByParam(values,param){if(Array.isArray(values)){var index=_lodash2.default.findIndex(values,param);if(-1===index)return;return values[index][param]}return values[param]}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var updateVisualizationConfig=function updateVisualizationConfig(stateConfig,config){if(!stateConfig||stateConfig.seriesParams)return;if(!["line","area","histogram"].includes(config.type))return;var isUserDefinedYAxis=config.setYExtents;var mode=["stacked","overlap"].includes(config.mode)?"normal":config.mode||"normal";config.valueAxes[0].scale=_extends({},config.valueAxes[0].scale,{type:config.scale||"linear",setYExtents:config.setYExtents||false,defaultYExtents:config.defaultYExtents||false,min:isUserDefinedYAxis?config.yAxis.min:void 0,max:isUserDefinedYAxis?config.yAxis.max:void 0,mode:mode});var interpolate=config.smoothLines?"cardinal":config.interpolate;var stacked=["stacked","percentage","wiggle","silhouette"].includes(config.mode);config.seriesParams[0]=_extends({},config.seriesParams[0],{type:config.type||"line",mode:stacked?"stacked":"normal",interpolate:interpolate,drawLinesBetweenPoints:config.drawLinesBetweenPoints,showCircles:config.showCircles,radiusRatio:config.radiusRatio})};exports.updateVisualizationConfig=updateVisualizationConfig},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var inspector_view_1=__webpack_require__(3149);exports.InspectorView=inspector_view_1.InspectorView},function(module,exports,__webpack_require__){"use strict";var __importDefault=(void 0,function(mod){return mod&&mod.__esModule?mod:{default:mod}});Object.defineProperty(exports,"__esModule",{value:true});var classnames_1=__importDefault(__webpack_require__(5));var prop_types_1=__importDefault(__webpack_require__(4));var react_1=__importDefault(__webpack_require__(0));var eui_1=__webpack_require__(3);var InspectorView=function InspectorView(_ref){var useFlex=_ref.useFlex,children=_ref.children;var classes=classnames_1.default({"inspector-view__flex":Boolean(useFlex)});return react_1.default.createElement(eui_1.EuiFlyoutBody,{className:classes},children)};exports.InspectorView=InspectorView;InspectorView.propTypes={useFlex:prop_types_1.default.bool}},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var __importDefault=(void 0,function(mod){return mod&&mod.__esModule?mod:{default:mod}});Object.defineProperty(exports,"__esModule",{value:true});var events_1=__webpack_require__(104);var react_1=__importDefault(__webpack_require__(0));var react_dom_1=__importDefault(__webpack_require__(15));var inspector_panel_1=__webpack_require__(3151);var view_registry_1=__webpack_require__(1327);var activeSession=null;var CONTAINER_ID="inspector-container";function getOrCreateContainerElement(){var container=document.getElementById(CONTAINER_ID);if(!container){container=document.createElement("div");container.id=CONTAINER_ID;document.body.appendChild(container)}return container}var InspectorSession=function(_events_1$EventEmitte){_inherits(InspectorSession,_events_1$EventEmitte);function InspectorSession(){_classCallCheck(this,InspectorSession);return _possibleConstructorReturn(this,(InspectorSession.__proto__||Object.getPrototypeOf(InspectorSession)).apply(this,arguments))}_createClass(InspectorSession,[{key:"bindToAngularScope",value:function bindToAngularScope(scope){var _this2=this;var removeWatch=scope.$on("$destroy",function(){return _this2.close()});this.on("closed",function(){return removeWatch()})}},{key:"close",value:function close(){if(activeSession===this){var container=document.getElementById(CONTAINER_ID);if(container){react_dom_1.default.unmountComponentAtNode(container);this.emit("closed")}}}}]);return InspectorSession}(events_1.EventEmitter);function isAvailable(adapters){return view_registry_1.viewRegistry.getVisible(adapters).length>0}function open(adapters){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};activeSession&&activeSession.close();var views=view_registry_1.viewRegistry.getVisible(adapters);if(!views||0===views.length)throw new Error("Tried to open an inspector without views being available.\n      Make sure to call Inspector.isAvailable() with the same adapters before to check\n      if an inspector can be shown.");var container=getOrCreateContainerElement();var session=activeSession=new InspectorSession;react_dom_1.default.render(react_1.default.createElement(inspector_panel_1.InspectorPanel,{views:views,adapters:adapters,onClose:function onClose(){return session.close()},title:options.title}),container);return session}var Inspector={isAvailable:isAvailable,open:open};exports.Inspector=Inspector},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.InspectorPanel=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(3);var _inspector_view_chooser=__webpack_require__(3152);__webpack_require__(3153);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function hasAdaptersChanged(oldAdapters,newAdapters){return Object.keys(oldAdapters).length!==Object.keys(newAdapters).length||Object.keys(oldAdapters).some(function(key){return oldAdapters[key]!==newAdapters[key]})}var InspectorPanel=function(_Component){_inherits(InspectorPanel,_Component);function InspectorPanel(props){_classCallCheck(this,InspectorPanel);var _this=_possibleConstructorReturn(this,(InspectorPanel.__proto__||Object.getPrototypeOf(InspectorPanel)).call(this,props));_this.onViewSelected=function(view){view!==_this.state.selectedView&&_this.setState({selectedView:view})};_this.state={isHelpPopoverOpen:false,selectedView:props.views[0],views:props.views,adapters:_extends({},props.adapters)};return _this}_createClass(InspectorPanel,[{key:"renderSelectedPanel",value:function renderSelectedPanel(){return _react2.default.createElement(this.state.selectedView.component,{adapters:this.props.adapters,title:this.props.title})}},{key:"render",value:function render(){var _props=this.props,views=_props.views,onClose=_props.onClose,title=_props.title;var selectedView=this.state.selectedView;return _react2.default.createElement(_eui.EuiFlyout,{onClose:onClose,"data-test-subj":"inspectorPanel"},_react2.default.createElement(_eui.EuiFlyoutHeader,{hasBorder:true},_react2.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},_react2.default.createElement(_eui.EuiFlexItem,{grow:true},_react2.default.createElement(_eui.EuiTitle,{size:"s"},_react2.default.createElement("h1",null,title))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_inspector_view_chooser.InspectorViewChooser,{views:views,onViewSelected:this.onViewSelected,selectedView:selectedView})))),this.renderSelectedPanel())}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps,prevState){if(hasAdaptersChanged(prevState.adapters,nextProps.adapters))throw new Error("Adapters are not allowed to be changed on an open InspectorPanel.");var selectedViewMustChange=nextProps.views!==prevState.views&&!nextProps.views.includes(prevState.selectedView);return{views:nextProps.views,selectedView:selectedViewMustChange?nextProps.views[0]:prevState.selectedView}}}]);return InspectorPanel}(_react.Component);InspectorPanel.defaultProps={title:"Inspector"};InspectorPanel.propTypes={adapters:_propTypes2.default.object.isRequired,views:function views(props,propName,componentName){if(!Array.isArray(props[propName])||props[propName].length<1)throw new Error(propName+" prop must be an array of at least one element in "+componentName+".")},onClose:_propTypes2.default.func.isRequired,title:_propTypes2.default.string};exports.InspectorPanel=InspectorPanel},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.InspectorViewChooser=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var InspectorViewChooser=function(_Component){_inherits(InspectorViewChooser,_Component);function InspectorViewChooser(){var _ref;var _temp,_this,_ret;_classCallCheck(this,InspectorViewChooser);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=InspectorViewChooser.__proto__||Object.getPrototypeOf(InspectorViewChooser)).call.apply(_ref,[this].concat(args))),_this),_this.state={isSelectorOpen:false},_this.toggleSelector=function(){_this.setState(function(prev){return{isSelectorOpen:!prev.isSelectorOpen}})},_this.closeSelector=function(){_this.setState({isSelectorOpen:false})},_this.renderView=function(view,index){return _react2.default.createElement(_eui.EuiContextMenuItem,{key:index,onClick:function onClick(){_this.props.onViewSelected(view);_this.closeSelector()},toolTipContent:view.help,toolTipPosition:"left","data-test-subj":"inspectorViewChooser"+view.title},view.title)},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(InspectorViewChooser,[{key:"renderViewButton",value:function renderViewButton(){return _react2.default.createElement(_eui.EuiButtonEmpty,{size:"s",iconType:"arrowDown",iconSide:"right",onClick:this.toggleSelector,"data-test-subj":"inspectorViewChooser"},"View: ",this.props.selectedView.title)}},{key:"renderSingleView",value:function renderSingleView(){return _react2.default.createElement(_eui.EuiToolTip,{position:"bottom",content:this.props.selectedView.help},_react2.default.createElement("span",null,"View: ",this.props.selectedView.title))}},{key:"render",value:function render(){var views=this.props.views;if(views.length<2)return this.renderSingleView();var triggerButton=this.renderViewButton();return _react2.default.createElement(_eui.EuiPopover,{id:"inspectorViewChooser",ownFocus:true,button:triggerButton,isOpen:this.state.isSelectorOpen,closePopover:this.closeSelector,panelPaddingSize:"none",anchorPosition:"downRight"},_react2.default.createElement(_eui.EuiContextMenuPanel,{items:views.map(this.renderView)}))}}]);return InspectorViewChooser}(_react.Component);InspectorViewChooser.propTypes={views:_propTypes2.default.array.isRequired,onViewSelected:_propTypes2.default.func.isRequired,selectedView:_propTypes2.default.object.isRequired};exports.InspectorViewChooser=InspectorViewChooser},function(module,exports){},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var formatted_data_1=__webpack_require__(3155);exports.FormattedData=formatted_data_1.FormattedData;var data_adapter_1=__webpack_require__(3156);exports.DataAdapter=data_adapter_1.DataAdapter},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:true});var FormattedData=function FormattedData(raw,formatted){_classCallCheck(this,FormattedData);this.raw=raw;this.formatted=formatted};exports.FormattedData=FormattedData},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:true});var events_1=__webpack_require__(104);var DataAdapter=function(_events_1$EventEmitte){_inherits(DataAdapter,_events_1$EventEmitte);function DataAdapter(){_classCallCheck(this,DataAdapter);return _possibleConstructorReturn(this,(DataAdapter.__proto__||Object.getPrototypeOf(DataAdapter)).apply(this,arguments))}_createClass(DataAdapter,[{key:"setTabularLoader",value:function setTabularLoader(callback){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.tabular=callback;this.tabularOptions=options;this.emit("change","tabular")}},{key:"getTabular",value:function getTabular(){if(!this.tabular||!this.tabularOptions)return Promise.resolve({data:null,options:{}});var options=this.tabularOptions;return Promise.resolve(this.tabular()).then(function(data){return{data:data,options:options}})}}]);return DataAdapter}(events_1.EventEmitter);exports.DataAdapter=DataAdapter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var types_1=__webpack_require__(831);exports.RequestStatus=types_1.RequestStatus;var request_adapter_1=__webpack_require__(3158);exports.RequestAdapter=request_adapter_1.RequestAdapter},function(module,exports,__webpack_require__){"use strict";var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:true});var events_1=__webpack_require__(104);var request_responder_1=__webpack_require__(3159);var types_1=__webpack_require__(831);var RequestAdapter=function(_events_1$EventEmitte){_inherits(RequestAdapter,_events_1$EventEmitte);function RequestAdapter(){_classCallCheck(this,RequestAdapter);var _this=_possibleConstructorReturn(this,(RequestAdapter.__proto__||Object.getPrototypeOf(RequestAdapter)).apply(this,arguments));_this.requests=[];return _this}_createClass(RequestAdapter,[{key:"start",value:function start(name){var _this2=this;var params=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var req=_extends({},params,{name:name,startTime:Date.now(),status:types_1.RequestStatus.PENDING});this.requests.push(req);this._onChange();return new request_responder_1.RequestResponder(req,function(){return _this2._onChange()})}},{key:"reset",value:function reset(){this.requests=[];this._onChange()}},{key:"getRequests",value:function getRequests(){return this.requests}},{key:"_onChange",value:function _onChange(){this.emit("change")}}]);return RequestAdapter}(events_1.EventEmitter);exports.RequestAdapter=RequestAdapter},function(module,exports,__webpack_require__){"use strict";var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:true});var types_1=__webpack_require__(831);var RequestResponder=function(){function RequestResponder(request,onChange){_classCallCheck(this,RequestResponder);this.request=request;this.onChange=onChange}_createClass(RequestResponder,[{key:"json",value:function json(reqJson){this.request.json=reqJson;this.onChange();return this}},{key:"stats",value:function stats(_stats){this.request.stats=_extends({},this.request.stats||{},_stats);this.onChange();return this}},{key:"finish",value:function finish(status,response){this.request.time=Date.now()-this.request.startTime;this.request.status=status;this.request.response=response;this.onChange()}},{key:"ok",value:function ok(response){this.finish(types_1.RequestStatus.OK,response)}},{key:"error",value:function error(response){this.finish(types_1.RequestStatus.ERROR,response)}}]);return RequestResponder}();exports.RequestResponder=RequestResponder},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.updateOldState=void 0;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function convertHeatmapLabelColor(visState){var hasOverwriteColorParam=void 0!==_lodash2.default.get(visState,"params.valueAxes[0].labels.overwriteColor");if("heatmap"===visState.type&&visState.params&&!hasOverwriteColorParam){var showLabels=_lodash2.default.get(visState,"params.valueAxes[0].labels.show",false);var color=_lodash2.default.get(visState,"params.valueAxes[0].labels.color","#555");_lodash2.default.set(visState,"params.valueAxes[0].labels.overwriteColor",showLabels&&"#555"!==color)}}function convertTermAggregation(visState){visState.aggs&&visState.aggs.forEach(function(agg){"terms"===agg.type&&agg.params&&"_term"===agg.params.orderBy&&(agg.params.orderBy="_key")})}function convertPropertyNames(visState){if("boolean"===typeof _lodash2.default.get(visState,"params.showMeticsAtAllLevels")){visState.params.showMetricsAtAllLevels=visState.params.showMeticsAtAllLevels;delete visState.params.showMeticsAtAllLevels}}exports.updateOldState=function updateOldState(visState){if(!visState)return visState;var newState=_lodash2.default.cloneDeep(visState);convertTermAggregation(newState);convertPropertyNames(newState);if("gauge"===visState.type&&visState.fontSize){delete newState.fontSize;_lodash2.default.set(newState,"gauge.style.fontSize",visState.fontSize)}if(["gauge","metric"].includes(visState.type)&&"Metric"===_lodash2.default.get(visState.params,"gauge.gaugeType",null)){newState.type="metric";newState.params.addLegend=false;newState.params.type="metric";newState.params.metric=newState.params.gauge;delete newState.params.gauge;delete newState.params.metric.gaugeType;delete newState.params.metric.gaugeStyle;delete newState.params.metric.backStyle;delete newState.params.metric.scale;delete newState.params.metric.type;delete newState.params.metric.orientation;delete newState.params.metric.verticalSplit;delete newState.params.metric.autoExtend;newState.params.metric.metricColorMode=newState.params.metric.gaugeColorMode;delete newState.params.metric.gaugeColorMode}else if("metric"===visState.type&&"Metric"!==_lodash2.default.get(visState.params,"gauge.gaugeType","Metric")){newState.type="gauge";newState.params.type="gauge"}convertHeatmapLabelColor(newState);return newState}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(3162);__webpack_require__(3163);__webpack_require__(3164);__webpack_require__(3165);__webpack_require__(3166);__webpack_require__(3167);__webpack_require__(3168);__webpack_require__(3169);__webpack_require__(3170);__webpack_require__(3171);__webpack_require__(3172);__webpack_require__(3173);__webpack_require__(3174);__webpack_require__(3175);__webpack_require__(3176);__webpack_require__(3177);__webpack_require__(3178);__webpack_require__(3179);__webpack_require__(3180);var _alert=__webpack_require__(3181);var _alert2=_interopRequireDefault(_alert);var _datepicker=__webpack_require__(3182);var _datepicker2=_interopRequireDefault(_datepicker);var _day=__webpack_require__(3183);var _day2=_interopRequireDefault(_day);var _month=__webpack_require__(3184);var _month2=_interopRequireDefault(_month);var _popup=__webpack_require__(3185);var _popup2=_interopRequireDefault(_popup);var _year=__webpack_require__(3186);var _year2=_interopRequireDefault(_year);var _backdrop=__webpack_require__(3187);var _backdrop2=_interopRequireDefault(_backdrop);var _window=__webpack_require__(3188);var _window2=_interopRequireDefault(_window);var _pager=__webpack_require__(3189);var _pager2=_interopRequireDefault(_pager);var _pagination=__webpack_require__(3190);var _pagination2=_interopRequireDefault(_pagination);var _tooltipHtmlUnsafePopup=__webpack_require__(3191);var _tooltipHtmlUnsafePopup2=_interopRequireDefault(_tooltipHtmlUnsafePopup);var _tooltipPopup=__webpack_require__(3192);var _tooltipPopup2=_interopRequireDefault(_tooltipPopup);var _popover=__webpack_require__(3193);var _popover2=_interopRequireDefault(_popover);var _bar=__webpack_require__(3194);var _bar2=_interopRequireDefault(_bar);var _progress=__webpack_require__(3195);var _progress2=_interopRequireDefault(_progress);var _progressbar=__webpack_require__(3196);var _progressbar2=_interopRequireDefault(_progressbar);var _rating=__webpack_require__(3197);var _rating2=_interopRequireDefault(_rating);var _tab=__webpack_require__(3198);var _tab2=_interopRequireDefault(_tab);var _tabset=__webpack_require__(3199);var _tabset2=_interopRequireDefault(_tabset);var _timepicker=__webpack_require__(3200);var _timepicker2=_interopRequireDefault(_timepicker);var _typeaheadMatch=__webpack_require__(3201);var _typeaheadMatch2=_interopRequireDefault(_typeaheadMatch);var _typeaheadPopup=__webpack_require__(3202);var _typeaheadPopup2=_interopRequireDefault(_typeaheadPopup);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.transition","ui.bootstrap.collapse","ui.bootstrap.alert","ui.bootstrap.bindHtml","ui.bootstrap.buttons","ui.bootstrap.dateparser","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.dropdown","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]);angular.module("ui.bootstrap.tpls",["template/alert/alert.html","template/datepicker/datepicker.html","template/datepicker/day.html","template/datepicker/month.html","template/datepicker/popup.html","template/datepicker/year.html","template/modal/backdrop.html","template/modal/window.html","template/pagination/pager.html","template/pagination/pagination.html","template/tooltip/tooltip-html-unsafe-popup.html","template/tooltip/tooltip-popup.html","template/popover/popover.html","template/progressbar/bar.html","template/progressbar/progress.html","template/progressbar/progressbar.html","template/rating/rating.html","template/tabs/tab.html","template/tabs/tabset.html","template/timepicker/timepicker.html","template/typeahead/typeahead-match.html","template/typeahead/typeahead-popup.html"]);angular.module("template/alert/alert.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/alert/alert.html",_alert2.default)}]);angular.module("template/datepicker/datepicker.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/datepicker/datepicker.html",_datepicker2.default)}]);angular.module("template/datepicker/day.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/datepicker/day.html",_day2.default)}]);angular.module("template/datepicker/month.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/datepicker/month.html",_month2.default)}]);angular.module("template/datepicker/popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/datepicker/popup.html",_popup2.default)}]);angular.module("template/datepicker/year.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/datepicker/year.html",_year2.default)}]);angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/modal/backdrop.html",_backdrop2.default)}]);angular.module("template/modal/window.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/modal/window.html",_window2.default)}]);angular.module("template/pagination/pager.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/pagination/pager.html",_pager2.default)}]);angular.module("template/pagination/pagination.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/pagination/pagination.html",_pagination2.default)}]);angular.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/tooltip/tooltip-html-unsafe-popup.html",_tooltipHtmlUnsafePopup2.default)}]);angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/tooltip/tooltip-popup.html",_tooltipPopup2.default)}]);angular.module("template/popover/popover.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/popover/popover.html",_popover2.default)}]);angular.module("template/progressbar/bar.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/progressbar/bar.html",_bar2.default)}]);angular.module("template/progressbar/progress.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/progressbar/progress.html",_progress2.default)}]);angular.module("template/progressbar/progressbar.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/progressbar/progressbar.html",_progressbar2.default)}]);angular.module("template/rating/rating.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/rating/rating.html",_rating2.default)}]);angular.module("template/tabs/tab.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/tabs/tab.html",_tab2.default)}]);angular.module("template/tabs/tabset.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/tabs/tabset.html",_tabset2.default)}]);angular.module("template/timepicker/timepicker.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/timepicker/timepicker.html",_timepicker2.default)}]);angular.module("template/typeahead/typeahead-match.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/typeahead/typeahead-match.html",_typeaheadMatch2.default)}]);angular.module("template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/typeahead/typeahead-popup.html",_typeaheadPopup2.default)}])},function(module,exports,__webpack_require__){"use strict";angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:true}).controller("AccordionController",["$scope","$attrs","accordionConfig",function($scope,$attrs,accordionConfig){this.groups=[];this.closeOthers=function(openGroup){var closeOthers=angular.isDefined($attrs.closeOthers)?$scope.$eval($attrs.closeOthers):accordionConfig.closeOthers;closeOthers&&angular.forEach(this.groups,function(group){group!==openGroup&&(group.isOpen=false)})};this.addGroup=function(groupScope){var that=this;this.groups.push(groupScope);groupScope.$on("$destroy",function(event){that.removeGroup(groupScope)})};this.removeGroup=function(group){var index=this.groups.indexOf(group);-1!==index&&this.groups.splice(index,1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",transclude:true,replace:false,templateUrl:"template/accordion/accordion.html"}}).directive("accordionGroup",function(){return{require:"^accordion",restrict:"EA",transclude:true,replace:true,templateUrl:"template/accordion/accordion-group.html",scope:{heading:"@",isOpen:"=?",isDisabled:"=?"},controller:function controller(){this.setHeading=function(element){this.heading=element}},link:function link(scope,element,attrs,accordionCtrl){accordionCtrl.addGroup(scope);scope.$watch("isOpen",function(value){value&&accordionCtrl.closeOthers(scope)});scope.toggleOpen=function(){scope.isDisabled||(scope.isOpen=!scope.isOpen)}}}}).directive("accordionHeading",function(){return{restrict:"EA",transclude:true,template:"",replace:true,require:"^accordionGroup",link:function link(scope,element,attr,accordionGroupCtrl,transclude){accordionGroupCtrl.setHeading(transclude(scope,function(){}))}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function link(scope,element,attr,controller){scope.$watch(function(){return controller[attr.accordionTransclude]},function(heading){if(heading){element.html("");element.append(heading)}})}}})},function(module,exports,__webpack_require__){"use strict";angular.module("ui.bootstrap.alert",[]).controller("AlertController",["$scope","$attrs",function($scope,$attrs){$scope.closeable="close"in $attrs;this.close=$scope.close}]).directive("alert",function(){return{restrict:"EA",controller:"AlertController",templateUrl:"template/alert/alert.html",transclude:true,replace:true,scope:{type:"@",close:"&"}}}).directive("dismissOnTimeout",["$timeout",function($timeout){return{require:"alert",link:function link(scope,element,attrs,alertCtrl){$timeout(function(){alertCtrl.close()},parseInt(attrs.dismissOnTimeout,10))}}}])},function(module,exports,__webpack_require__){"use strict";angular.module("ui.bootstrap.bindHtml",[]).directive("bindHtmlUnsafe",function(){return function(scope,element,attr){element.addClass("ng-binding").data("$binding",attr.bindHtmlUnsafe);scope.$watch(attr.bindHtmlUnsafe,function bindHtmlUnsafeWatchAction(value){element.html(value||"")})}})},function(module,exports,__webpack_require__){"use strict";angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(buttonConfig){this.activeClass=buttonConfig.activeClass||"active";this.toggleEvent=buttonConfig.toggleEvent||"click"}]).directive("btnRadio",function(){return{require:["btnRadio","ngModel"],controller:"ButtonsController",link:function link(scope,element,attrs,ctrls){var buttonsCtrl=ctrls[0],ngModelCtrl=ctrls[1];ngModelCtrl.$render=function(){element.toggleClass(buttonsCtrl.activeClass,angular.equals(ngModelCtrl.$modelValue,scope.$eval(attrs.btnRadio)))};element.bind(buttonsCtrl.toggleEvent,function(){var isActive=element.hasClass(buttonsCtrl.activeClass);isActive&&!angular.isDefined(attrs.uncheckable)||scope.$apply(function(){ngModelCtrl.$setViewValue(isActive?null:scope.$eval(attrs.btnRadio));ngModelCtrl.$render()})})}}}).directive("btnCheckbox",function(){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",link:function link(scope,element,attrs,ctrls){var buttonsCtrl=ctrls[0],ngModelCtrl=ctrls[1];function getTrueValue(){return getCheckboxValue(attrs.btnCheckboxTrue,true)}function getFalseValue(){return getCheckboxValue(attrs.btnCheckboxFalse,false)}function getCheckboxValue(attributeValue,defaultValue){var val=scope.$eval(attributeValue);return angular.isDefined(val)?val:defaultValue}ngModelCtrl.$render=function(){element.toggleClass(buttonsCtrl.activeClass,angular.equals(ngModelCtrl.$modelValue,getTrueValue()))};element.bind(buttonsCtrl.toggleEvent,function(){scope.$apply(function(){ngModelCtrl.$setViewValue(element.hasClass(buttonsCtrl.activeClass)?getFalseValue():getTrueValue());ngModelCtrl.$render()})})}}})},function(module,exports,__webpack_require__){"use strict";angular.module("ui.bootstrap.collapse",["ui.bootstrap.transition"]).directive("collapse",["$transition",function($transition){return{link:function link(scope,element,attrs){var initialAnimSkip=true;var currentTransition;function doTransition(change){var newTransition=$transition(element,change);currentTransition&&currentTransition.cancel();currentTransition=newTransition;newTransition.then(newTransitionDone,newTransitionDone);return newTransition;function newTransitionDone(){currentTransition===newTransition&&(currentTransition=void 0)}}function expand(){if(initialAnimSkip){initialAnimSkip=false;expandDone()}else{element.removeClass("collapse").addClass("collapsing");doTransition({height:element[0].scrollHeight+"px"}).then(expandDone)}}function expandDone(){element.removeClass("collapsing");element.addClass("collapse in");element.css({height:"auto"})}function collapse(){if(initialAnimSkip){initialAnimSkip=false;collapseDone();element.css({height:0})}else{element.css({height:element[0].scrollHeight+"px"});element[0].offsetWidth;element.removeClass("collapse in").addClass("collapsing");doTransition({height:0}).then(collapseDone)}}function collapseDone(){element.removeClass("collapsing");element.addClass("collapse")}scope.$watch(attrs.collapse,function(shouldCollapse){shouldCollapse?collapse():expand()})}}}])},function(module,exports,__webpack_require__){"use strict";angular.module("ui.bootstrap.dateparser",[]).service("dateParser",["$locale","orderByFilter",function($locale,orderByFilter){this.parsers={};var formatCodeToRegex={yyyy:{regex:"\\d{4}",apply:function apply(value){this.year=+value}},yy:{regex:"\\d{2}",apply:function apply(value){this.year=+value+2e3}},y:{regex:"\\d{1,4}",apply:function apply(value){this.year=+value}},MMMM:{regex:$locale.DATETIME_FORMATS.MONTH.join("|"),apply:function apply(value){this.month=$locale.DATETIME_FORMATS.MONTH.indexOf(value)}},MMM:{regex:$locale.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function apply(value){this.month=$locale.DATETIME_FORMATS.SHORTMONTH.indexOf(value)}},MM:{regex:"0[1-9]|1[0-2]",apply:function apply(value){this.month=value-1}},M:{regex:"[1-9]|1[0-2]",apply:function apply(value){this.month=value-1}},dd:{regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function apply(value){this.date=+value}},d:{regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function apply(value){this.date=+value}},EEEE:{regex:$locale.DATETIME_FORMATS.DAY.join("|")},EEE:{regex:$locale.DATETIME_FORMATS.SHORTDAY.join("|")}};function createParser(format){var map=[],regex=format.split("");angular.forEach(formatCodeToRegex,function(data,code){var index=format.indexOf(code);if(index>-1){format=format.split("");regex[index]="("+data.regex+")";format[index]="$";for(var i=index+1,n=index+code.length;i<n;i++){regex[i]="";format[i]="$"}format=format.join("");map.push({index:index,apply:data.apply})}});return{regex:new RegExp("^"+regex.join("")+"$"),map:orderByFilter(map,"index")}}this.parse=function(input,format){if(!angular.isString(input)||!format)return input;format=$locale.DATETIME_FORMATS[format]||format;this.parsers[format]||(this.parsers[format]=createParser(format));var parser=this.parsers[format],regex=parser.regex,map=parser.map,results=input.match(regex);if(results&&results.length){var dt,fields={year:1900,month:0,date:1,hours:0};for(var i=1,n=results.length;i<n;i++){var mapper=map[i-1];mapper.apply&&mapper.apply.call(fields,results[i])}isValid(fields.year,fields.month,fields.date)&&(dt=new Date(fields.year,fields.month,fields.date,fields.hours));return dt}};function isValid(year,month,date){if(1===month&&date>28)return 29===date&&(year%4===0&&year%100!==0||year%400===0);if(3===month||5===month||8===month||10===month)return date<31;return true}}])},function(module,exports,__webpack_require__){"use strict";angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.position"]).constant("datepickerConfig",{formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",datepickerMode:"day",minMode:"day",maxMode:"year",showWeeks:true,startingDay:0,yearRange:20,minDate:null,maxDate:null}).controller("DatepickerController",["$scope","$attrs","$parse","$interpolate","$timeout","$log","dateFilter","datepickerConfig",function($scope,$attrs,$parse,$interpolate,$timeout,$log,dateFilter,datepickerConfig){var self=this,ngModelCtrl={$setViewValue:angular.noop};this.modes=["day","month","year"];angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","minMode","maxMode","showWeeks","startingDay","yearRange"],function(key,index){self[key]=angular.isDefined($attrs[key])?index<8?$interpolate($attrs[key])($scope.$parent):$scope.$parent.$eval($attrs[key]):datepickerConfig[key]});angular.forEach(["minDate","maxDate"],function(key){$attrs[key]?$scope.$parent.$watch($parse($attrs[key]),function(value){self[key]=value?new Date(value):null;self.refreshView()}):self[key]=datepickerConfig[key]?new Date(datepickerConfig[key]):null});$scope.datepickerMode=$scope.datepickerMode||datepickerConfig.datepickerMode;$scope.uniqueId="datepicker-"+$scope.$id+"-"+Math.floor(1e4*Math.random());this.activeDate=angular.isDefined($attrs.initDate)?$scope.$parent.$eval($attrs.initDate):new Date;$scope.isActive=function(dateObject){if(0===self.compare(dateObject.date,self.activeDate)){$scope.activeDateId=dateObject.uid;return true}return false};this.init=function(ngModelCtrl_){ngModelCtrl=ngModelCtrl_;ngModelCtrl.$render=function(){self.render()}};this.render=function(){if(ngModelCtrl.$modelValue){var date=new Date(ngModelCtrl.$modelValue),isValid=!isNaN(date);isValid?this.activeDate=date:$log.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.');ngModelCtrl.$setValidity("date",isValid)}this.refreshView()};this.refreshView=function(){if(this.element){this._refreshView();var date=ngModelCtrl.$modelValue?new Date(ngModelCtrl.$modelValue):null;ngModelCtrl.$setValidity("date-disabled",!date||this.element&&!this.isDisabled(date))}};this.createDateObject=function(date,format){var model=ngModelCtrl.$modelValue?new Date(ngModelCtrl.$modelValue):null;return{date:date,label:dateFilter(date,format),selected:model&&0===this.compare(date,model),disabled:this.isDisabled(date),current:0===this.compare(date,new Date)}};this.isDisabled=function(date){return this.minDate&&this.compare(date,this.minDate)<0||this.maxDate&&this.compare(date,this.maxDate)>0||$attrs.dateDisabled&&$scope.dateDisabled({date:date,mode:$scope.datepickerMode})};this.split=function(arr,size){var arrays=[];while(arr.length>0)arrays.push(arr.splice(0,size));return arrays};$scope.select=function(date){if($scope.datepickerMode===self.minMode){var dt=ngModelCtrl.$modelValue?new Date(ngModelCtrl.$modelValue):new Date(0,0,0,0,0,0,0);dt.setFullYear(date.getFullYear(),date.getMonth(),date.getDate());ngModelCtrl.$setViewValue(dt);ngModelCtrl.$render()}else{self.activeDate=date;$scope.datepickerMode=self.modes[self.modes.indexOf($scope.datepickerMode)-1];focusElement()}};$scope.move=function(direction){var year=self.activeDate.getFullYear()+direction*(self.step.years||0),month=self.activeDate.getMonth()+direction*(self.step.months||0);self.activeDate.setFullYear(year,month,1);self.refreshView()};$scope.toggleMode=function(direction){direction=direction||1;if($scope.datepickerMode===self.maxMode&&1===direction||$scope.datepickerMode===self.minMode&&-1===direction)return;$scope.datepickerMode=self.modes[self.modes.indexOf($scope.datepickerMode)+direction];focusElement()};$scope.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var focusElement=function focusElement(){$timeout(function(){self.element[0].focus()},0,false)};$scope.$on("datepicker.focus",focusElement)}]).directive("datepicker",function(){return{restrict:"EA",replace:true,templateUrl:"template/datepicker/datepicker.html",scope:{datepickerMode:"=?",dateDisabled:"&"},require:["datepicker","?^ngModel"],controller:"DatepickerController",link:function link(scope,element,attrs,ctrls){var datepickerCtrl=ctrls[0],ngModelCtrl=ctrls[1];ngModelCtrl&&datepickerCtrl.init(ngModelCtrl)}}}).directive("daypicker",["dateFilter",function(dateFilter){return{restrict:"EA",replace:true,templateUrl:"template/datepicker/day.html",require:"^datepicker",link:function link(scope,element,attrs,ctrl){scope.showWeeks=ctrl.showWeeks;ctrl.step={months:1};ctrl.element=element;var DAYS_IN_MONTH=[31,28,31,30,31,30,31,31,30,31,30,31];function getDaysInMonth(year,month){return 1!==month||year%4!==0||year%100===0&&year%400!==0?DAYS_IN_MONTH[month]:29}function getDates(startDate,n){var dates=new Array(n),current=new Date(startDate),i=0;current.setHours(12);while(i<n){dates[i++]=new Date(current);current.setDate(current.getDate()+1)}return dates}ctrl._refreshView=function(){var year=ctrl.activeDate.getFullYear(),month=ctrl.activeDate.getMonth(),firstDayOfMonth=new Date(year,month,1),difference=ctrl.startingDay-firstDayOfMonth.getDay(),numDisplayedFromPreviousMonth=difference>0?7-difference:-difference,firstDate=new Date(firstDayOfMonth);numDisplayedFromPreviousMonth>0&&firstDate.setDate(1-numDisplayedFromPreviousMonth);var days=getDates(firstDate,42);for(var i=0;i<42;i++)days[i]=angular.extend(ctrl.createDateObject(days[i],ctrl.formatDay),{secondary:days[i].getMonth()!==month,uid:scope.uniqueId+"-"+i});scope.labels=new Array(7);for(var j=0;j<7;j++)scope.labels[j]={abbr:dateFilter(days[j].date,ctrl.formatDayHeader),full:dateFilter(days[j].date,"EEEE")};scope.title=dateFilter(ctrl.activeDate,ctrl.formatDayTitle);scope.rows=ctrl.split(days,7);if(scope.showWeeks){scope.weekNumbers=[];var weekNumber=getISO8601WeekNumber(scope.rows[0][0].date),numWeeks=scope.rows.length;while(scope.weekNumbers.push(weekNumber++)<numWeeks);}};ctrl.compare=function(date1,date2){return new Date(date1.getFullYear(),date1.getMonth(),date1.getDate())-new Date(date2.getFullYear(),date2.getMonth(),date2.getDate())};function getISO8601WeekNumber(date){var checkDate=new Date(date);checkDate.setDate(checkDate.getDate()+4-(checkDate.getDay()||7));var time=checkDate.getTime();checkDate.setMonth(0);checkDate.setDate(1);return Math.floor(Math.round((time-checkDate)/864e5)/7)+1}ctrl.handleKeyDown=function(key,evt){var date=ctrl.activeDate.getDate();if("left"===key)date-=1;else if("up"===key)date-=7;else if("right"===key)date+=1;else if("down"===key)date+=7;else if("pageup"===key||"pagedown"===key){var month=ctrl.activeDate.getMonth()+("pageup"===key?-1:1);ctrl.activeDate.setMonth(month,1);date=Math.min(getDaysInMonth(ctrl.activeDate.getFullYear(),ctrl.activeDate.getMonth()),date)}else"home"===key?date=1:"end"===key&&(date=getDaysInMonth(ctrl.activeDate.getFullYear(),ctrl.activeDate.getMonth()));ctrl.activeDate.setDate(date)};ctrl.refreshView()}}}]).directive("monthpicker",["dateFilter",function(dateFilter){return{restrict:"EA",replace:true,templateUrl:"template/datepicker/month.html",require:"^datepicker",link:function link(scope,element,attrs,ctrl){ctrl.step={years:1};ctrl.element=element;ctrl._refreshView=function(){var months=new Array(12),year=ctrl.activeDate.getFullYear();for(var i=0;i<12;i++)months[i]=angular.extend(ctrl.createDateObject(new Date(year,i,1),ctrl.formatMonth),{uid:scope.uniqueId+"-"+i});scope.title=dateFilter(ctrl.activeDate,ctrl.formatMonthTitle);scope.rows=ctrl.split(months,3)};ctrl.compare=function(date1,date2){return new Date(date1.getFullYear(),date1.getMonth())-new Date(date2.getFullYear(),date2.getMonth())};ctrl.handleKeyDown=function(key,evt){var date=ctrl.activeDate.getMonth();if("left"===key)date-=1;else if("up"===key)date-=3;else if("right"===key)date+=1;else if("down"===key)date+=3;else if("pageup"===key||"pagedown"===key){var year=ctrl.activeDate.getFullYear()+("pageup"===key?-1:1);ctrl.activeDate.setFullYear(year)}else"home"===key?date=0:"end"===key&&(date=11);ctrl.activeDate.setMonth(date)};ctrl.refreshView()}}}]).directive("yearpicker",["dateFilter",function(dateFilter){return{restrict:"EA",replace:true,templateUrl:"template/datepicker/year.html",require:"^datepicker",link:function link(scope,element,attrs,ctrl){var range=ctrl.yearRange;ctrl.step={years:range};ctrl.element=element;function getStartingYear(year){return parseInt((year-1)/range,10)*range+1}ctrl._refreshView=function(){var years=new Array(range);for(var i=0,start=getStartingYear(ctrl.activeDate.getFullYear());i<range;i++)years[i]=angular.extend(ctrl.createDateObject(new Date(start+i,0,1),ctrl.formatYear),{uid:scope.uniqueId+"-"+i});scope.title=[years[0].label,years[range-1].label].join(" - ");scope.rows=ctrl.split(years,5);scope.yearRange=ctrl.yearRange};ctrl.compare=function(date1,date2){return date1.getFullYear()-date2.getFullYear()};ctrl.handleKeyDown=function(key,evt){var date=ctrl.activeDate.getFullYear();"left"===key?date-=1:"up"===key?date-=5:"right"===key?date+=1:"down"===key?date+=5:"pageup"===key||"pagedown"===key?date+=("pageup"===key?-1:1)*ctrl.step.years:"home"===key?date=getStartingYear(ctrl.activeDate.getFullYear()):"end"===key&&(date=getStartingYear(ctrl.activeDate.getFullYear())+range-1);ctrl.activeDate.setFullYear(date)};ctrl.refreshView()}}}]).constant("datepickerPopupConfig",{datepickerPopup:"yyyy-MM-dd",currentText:"Today",clearText:"Clear",closeText:"Done",closeOnDateSelection:true,appendToBody:false,showButtonBar:true}).directive("datepickerPopup",["$compile","$parse","$document","$position","dateFilter","dateParser","datepickerPopupConfig",function($compile,$parse,$document,$position,dateFilter,dateParser,datepickerPopupConfig){return{restrict:"EA",require:"ngModel",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&"},link:function link(scope,element,attrs,ngModel){var dateFormat,closeOnDateSelection=angular.isDefined(attrs.closeOnDateSelection)?scope.$parent.$eval(attrs.closeOnDateSelection):datepickerPopupConfig.closeOnDateSelection,appendToBody=angular.isDefined(attrs.datepickerAppendToBody)?scope.$parent.$eval(attrs.datepickerAppendToBody):datepickerPopupConfig.appendToBody;scope.showButtonBar=angular.isDefined(attrs.showButtonBar)?scope.$parent.$eval(attrs.showButtonBar):datepickerPopupConfig.showButtonBar;scope.getText=function(key){return scope[key+"Text"]||datepickerPopupConfig[key+"Text"]};attrs.$observe("datepickerPopup",function(value){dateFormat=value||datepickerPopupConfig.datepickerPopup;ngModel.$render()});var popupEl=angular.element("<div datepicker-popup-wrap><div datepicker></div></div>");popupEl.attr({"ng-model":"date","ng-change":"dateSelection()"});function cameltoDash(string){return string.replace(/([A-Z])/g,function($1){return"-"+$1.toLowerCase()})}var datepickerEl=angular.element(popupEl.children()[0]);attrs.datepickerOptions&&angular.forEach(scope.$parent.$eval(attrs.datepickerOptions),function(value,option){datepickerEl.attr(cameltoDash(option),value)});scope.watchData={};angular.forEach(["minDate","maxDate","datepickerMode"],function(key){if(attrs[key]){var getAttribute=$parse(attrs[key]);scope.$parent.$watch(getAttribute,function(value){scope.watchData[key]=value});datepickerEl.attr(cameltoDash(key),"watchData."+key);if("datepickerMode"===key){var setAttribute=getAttribute.assign;scope.$watch("watchData."+key,function(value,oldvalue){value!==oldvalue&&setAttribute(scope.$parent,value)})}}});attrs.dateDisabled&&datepickerEl.attr("date-disabled","dateDisabled({ date: date, mode: mode })");function parseDate(viewValue){if(viewValue){if(angular.isDate(viewValue)&&!isNaN(viewValue)){ngModel.$setValidity("date",true);return viewValue}if(angular.isString(viewValue)){var date=dateParser.parse(viewValue,dateFormat)||new Date(viewValue);if(isNaN(date)){ngModel.$setValidity("date",false);return}ngModel.$setValidity("date",true);return date}ngModel.$setValidity("date",false);return}ngModel.$setValidity("date",true);return null}ngModel.$parsers.unshift(parseDate);scope.dateSelection=function(dt){angular.isDefined(dt)&&(scope.date=dt);ngModel.$setViewValue(scope.date);ngModel.$render();if(closeOnDateSelection){scope.isOpen=false;element[0].focus()}};element.bind("input change keyup",function(){scope.$apply(function(){scope.date=ngModel.$modelValue})});ngModel.$render=function(){var date=ngModel.$viewValue?dateFilter(ngModel.$viewValue,dateFormat):"";element.val(date);scope.date=parseDate(ngModel.$modelValue)};var documentClickBind=function documentClickBind(event){scope.isOpen&&event.target!==element[0]&&scope.$apply(function(){scope.isOpen=false})};var keydown=function keydown(evt,noApply){scope.keydown(evt)};element.bind("keydown",keydown);scope.keydown=function(evt){if(27===evt.which){evt.preventDefault();evt.stopPropagation();scope.close()}else 40!==evt.which||scope.isOpen||(scope.isOpen=true)};scope.$watch("isOpen",function(value){if(value){scope.$broadcast("datepicker.focus");scope.position=appendToBody?$position.offset(element):$position.position(element);scope.position.top=scope.position.top+element.prop("offsetHeight");$document.bind("click",documentClickBind)}else $document.unbind("click",documentClickBind)});scope.select=function(date){if("today"===date){var today=new Date;if(angular.isDate(ngModel.$modelValue)){date=new Date(ngModel.$modelValue);date.setFullYear(today.getFullYear(),today.getMonth(),today.getDate())}else date=new Date(today.setHours(0,0,0,0))}scope.dateSelection(date)};scope.close=function(){scope.isOpen=false;element[0].focus()};var $popup=$compile(popupEl)(scope);popupEl.remove();appendToBody?$document.find("body").append($popup):element.after($popup);scope.$on("$destroy",function(){$popup.remove();element.unbind("keydown",keydown);$document.unbind("click",documentClickBind)})}}}]).directive("datepickerPopupWrap",function(){return{restrict:"EA",replace:true,transclude:true,templateUrl:"template/datepicker/popup.html",link:function link(scope,element,attrs){element.bind("click",function(event){event.preventDefault();event.stopPropagation()})}}})},function(module,exports,__webpack_require__){"use strict";angular.module("ui.bootstrap.dropdown",[]).constant("dropdownConfig",{openClass:"open"}).service("dropdownService",["$document",function($document){var openScope=null;this.open=function(dropdownScope){if(!openScope){$document.bind("click",closeDropdown);$document.bind("keydown",escapeKeyBind)}openScope&&openScope!==dropdownScope&&(openScope.isOpen=false);openScope=dropdownScope};this.close=function(dropdownScope){if(openScope===dropdownScope){openScope=null;$document.unbind("click",closeDropdown);$document.unbind("keydown",escapeKeyBind)}};var closeDropdown=function closeDropdown(evt){if(!openScope)return;var toggleElement=openScope.getToggleElement();if(evt&&toggleElement&&toggleElement[0].contains(evt.target))return;openScope.$apply(function(){openScope.isOpen=false})};var escapeKeyBind=function escapeKeyBind(evt){if(27===evt.which){openScope.focusToggleElement();closeDropdown()}}}]).controller("DropdownController",["$scope","$attrs","$parse","dropdownConfig","dropdownService","$animate",function($scope,$attrs,$parse,dropdownConfig,dropdownService,$animate){var getIsOpen,self=this,scope=$scope.$new(),openClass=dropdownConfig.openClass,setIsOpen=angular.noop,toggleInvoker=$attrs.onToggle?$parse($attrs.onToggle):angular.noop;this.init=function(element){self.$element=element;if($attrs.isOpen){getIsOpen=$parse($attrs.isOpen);setIsOpen=getIsOpen.assign;$scope.$watch(getIsOpen,function(value){scope.isOpen=!!value})}};this.toggle=function(open){return scope.isOpen=arguments.length?!!open:!scope.isOpen};this.isOpen=function(){return scope.isOpen};scope.getToggleElement=function(){return self.toggleElement};scope.focusToggleElement=function(){self.toggleElement&&self.toggleElement[0].focus()};scope.$watch("isOpen",function(isOpen,wasOpen){$animate[isOpen?"addClass":"removeClass"](self.$element,openClass);if(isOpen){scope.focusToggleElement();dropdownService.open(scope)}else dropdownService.close(scope);setIsOpen($scope,isOpen);angular.isDefined(isOpen)&&isOpen!==wasOpen&&toggleInvoker($scope,{open:!!isOpen})});$scope.$on("$locationChangeSuccess",function(){scope.isOpen=false});$scope.$on("$destroy",function(){scope.$destroy()})}]).directive("dropdown",function(){return{controller:"DropdownController",link:function link(scope,element,attrs,dropdownCtrl){dropdownCtrl.init(element)}}}).directive("dropdownToggle",function(){return{require:"?^dropdown",link:function link(scope,element,attrs,dropdownCtrl){if(!dropdownCtrl)return;dropdownCtrl.toggleElement=element;var toggleDropdown=function toggleDropdown(event){event.preventDefault();element.hasClass("disabled")||attrs.disabled||scope.$apply(function(){dropdownCtrl.toggle()})};element.bind("click",toggleDropdown);element.attr({"aria-haspopup":true,"aria-expanded":false});scope.$watch(dropdownCtrl.isOpen,function(isOpen){element.attr("aria-expanded",!!isOpen)});scope.$on("$destroy",function(){element.unbind("click",toggleDropdown)})}}})},function(module,exports,__webpack_require__){"use strict";angular.module("ui.bootstrap.modal",["ui.bootstrap.transition"]).factory("$$stackedMap",function(){return{createNew:function createNew(){var stack=[];return{add:function add(key,value){stack.push({key:key,value:value})},get:function get(key){for(var i=0;i<stack.length;i++)if(key==stack[i].key)return stack[i]},keys:function keys(){var keys=[];for(var i=0;i<stack.length;i++)keys.push(stack[i].key);return keys},top:function top(){return stack[stack.length-1]},remove:function remove(key){var idx=-1;for(var i=0;i<stack.length;i++)if(key==stack[i].key){idx=i;break}return stack.splice(idx,1)[0]},removeTop:function removeTop(){return stack.splice(stack.length-1,1)[0]},length:function length(){return stack.length}}}}}).directive("modalBackdrop",["$timeout",function($timeout){return{restrict:"EA",replace:true,templateUrl:"template/modal/backdrop.html",link:function link(scope,element,attrs){scope.backdropClass=attrs.backdropClass||"";scope.animate=false;$timeout(function(){scope.animate=true})}}}]).directive("modalWindow",["$modalStack","$timeout",function($modalStack,$timeout){return{restrict:"EA",scope:{index:"@",animate:"="},replace:true,transclude:true,templateUrl:function templateUrl(tElement,tAttrs){return tAttrs.templateUrl||"template/modal/window.html"},link:function link(scope,element,attrs){element.addClass(attrs.windowClass||"");scope.size=attrs.size;$timeout(function(){scope.animate=true;element[0].querySelectorAll("[autofocus]").length||element[0].focus()});scope.close=function(evt){var modal=$modalStack.getTop();if(modal&&modal.value.backdrop&&"static"!=modal.value.backdrop&&evt.target===evt.currentTarget){evt.preventDefault();evt.stopPropagation();$modalStack.dismiss(modal.key,"backdrop click")}}}}}]).directive("modalTransclude",function(){return{link:function link($scope,$element,$attrs,controller,$transclude){$transclude($scope.$parent,function(clone){$element.empty();$element.append(clone)})}}}).factory("$modalStack",["$transition","$timeout","$document","$compile","$rootScope","$$stackedMap",function($transition,$timeout,$document,$compile,$rootScope,$$stackedMap){var OPENED_MODAL_CLASS="modal-open";var backdropDomEl,backdropScope;var openedWindows=$$stackedMap.createNew();var $modalStack={};function backdropIndex(){var topBackdropIndex=-1;var opened=openedWindows.keys();for(var i=0;i<opened.length;i++)openedWindows.get(opened[i]).value.backdrop&&(topBackdropIndex=i);return topBackdropIndex}$rootScope.$watch(backdropIndex,function(newBackdropIndex){backdropScope&&(backdropScope.index=newBackdropIndex)});function removeModalWindow(modalInstance){var body=$document.find("body").eq(0);var modalWindow=openedWindows.get(modalInstance).value;openedWindows.remove(modalInstance);removeAfterAnimate(modalWindow.modalDomEl,modalWindow.modalScope,300,function(){modalWindow.modalScope.$destroy();body.toggleClass(OPENED_MODAL_CLASS,openedWindows.length()>0);checkRemoveBackdrop()})}function checkRemoveBackdrop(){if(backdropDomEl&&-1==backdropIndex()){var backdropScopeRef=backdropScope;removeAfterAnimate(backdropDomEl,backdropScope,150,function(){backdropScopeRef.$destroy();backdropScopeRef=null});backdropDomEl=void 0;backdropScope=void 0}}function removeAfterAnimate(domEl,scope,emulateTime,done){scope.animate=false;var transitionEndEventName=$transition.transitionEndEventName;if(transitionEndEventName){var timeout=$timeout(afterAnimating,emulateTime);domEl.bind(transitionEndEventName,function(){$timeout.cancel(timeout);afterAnimating();scope.$apply()})}else $timeout(afterAnimating);function afterAnimating(){if(afterAnimating.done)return;afterAnimating.done=true;domEl.remove();done&&done()}}$document.bind("keydown",function(evt){var modal;if(27===evt.which){modal=openedWindows.top();if(modal&&modal.value.keyboard){evt.preventDefault();$rootScope.$apply(function(){$modalStack.dismiss(modal.key,"escape key press")})}}});$modalStack.open=function(modalInstance,modal){openedWindows.add(modalInstance,{deferred:modal.deferred,modalScope:modal.scope,backdrop:modal.backdrop,keyboard:modal.keyboard});var body=$document.find("body").eq(0),currBackdropIndex=backdropIndex();if(currBackdropIndex>=0&&!backdropDomEl){backdropScope=$rootScope.$new(true);backdropScope.index=currBackdropIndex;var angularBackgroundDomEl=angular.element("<div modal-backdrop></div>");angularBackgroundDomEl.attr("backdrop-class",modal.backdropClass);backdropDomEl=$compile(angularBackgroundDomEl)(backdropScope);body.append(backdropDomEl)}var angularDomEl=angular.element("<div modal-window></div>");angularDomEl.attr({"template-url":modal.windowTemplateUrl,"window-class":modal.windowClass,size:modal.size,index:openedWindows.length()-1,animate:"animate"}).html(modal.content);var modalDomEl=$compile(angularDomEl)(modal.scope);openedWindows.top().value.modalDomEl=modalDomEl;body.append(modalDomEl);body.addClass(OPENED_MODAL_CLASS)};$modalStack.close=function(modalInstance,result){var modalWindow=openedWindows.get(modalInstance);if(modalWindow){modalWindow.value.deferred.resolve(result);removeModalWindow(modalInstance)}};$modalStack.dismiss=function(modalInstance,reason){var modalWindow=openedWindows.get(modalInstance);if(modalWindow){modalWindow.value.deferred.reject(reason);removeModalWindow(modalInstance)}};$modalStack.dismissAll=function(reason){var topModal=this.getTop();while(topModal){this.dismiss(topModal.key,reason);topModal=this.getTop()}};$modalStack.getTop=function(){return openedWindows.top()};return $modalStack}]).provider("$modal",function(){var $modalProvider={options:{backdrop:true,keyboard:true},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function($injector,$rootScope,$q,$http,$templateCache,$controller,$modalStack){var $modal={};function getTemplatePromise(options){return options.template?$q.when(options.template):$http.get(angular.isFunction(options.templateUrl)?options.templateUrl():options.templateUrl,{cache:$templateCache}).then(function(result){return result.data})}function getResolvePromises(resolves){var promisesArr=[];angular.forEach(resolves,function(value){(angular.isFunction(value)||angular.isArray(value))&&promisesArr.push($q.when($injector.invoke(value)))});return promisesArr}$modal.open=function(modalOptions){var modalResultDeferred=$q.defer();var modalOpenedDeferred=$q.defer();var modalInstance={result:modalResultDeferred.promise,opened:modalOpenedDeferred.promise,close:function close(result){$modalStack.close(modalInstance,result)},dismiss:function dismiss(reason){$modalStack.dismiss(modalInstance,reason)}};modalOptions=angular.extend({},$modalProvider.options,modalOptions);modalOptions.resolve=modalOptions.resolve||{};if(!modalOptions.template&&!modalOptions.templateUrl)throw new Error("One of template or templateUrl options is required.");var templateAndResolvePromise=$q.all([getTemplatePromise(modalOptions)].concat(getResolvePromises(modalOptions.resolve)));templateAndResolvePromise.then(function resolveSuccess(tplAndVars){var modalScope=(modalOptions.scope||$rootScope).$new();modalScope.$close=modalInstance.close;modalScope.$dismiss=modalInstance.dismiss;var ctrlInstance,ctrlLocals={};var resolveIter=1;if(modalOptions.controller){ctrlLocals.$scope=modalScope;ctrlLocals.$modalInstance=modalInstance;angular.forEach(modalOptions.resolve,function(value,key){ctrlLocals[key]=tplAndVars[resolveIter++]});ctrlInstance=$controller(modalOptions.controller,ctrlLocals);modalOptions.controllerAs&&(modalScope[modalOptions.controllerAs]=ctrlInstance)}$modalStack.open(modalInstance,{scope:modalScope,deferred:modalResultDeferred,content:tplAndVars[0],backdrop:modalOptions.backdrop,keyboard:modalOptions.keyboard,backdropClass:modalOptions.backdropClass,windowClass:modalOptions.windowClass,windowTemplateUrl:modalOptions.windowTemplateUrl,size:modalOptions.size})},function resolveError(reason){modalResultDeferred.reject(reason)});templateAndResolvePromise.then(function(){modalOpenedDeferred.resolve(true)},function(){modalOpenedDeferred.reject(false)});return modalInstance};return $modal}]};return $modalProvider})},function(module,exports,__webpack_require__){"use strict";angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope","$attrs","$parse",function($scope,$attrs,$parse){var self=this,ngModelCtrl={$setViewValue:angular.noop},setNumPages=$attrs.numPages?$parse($attrs.numPages).assign:angular.noop;this.init=function(ngModelCtrl_,config){ngModelCtrl=ngModelCtrl_;this.config=config;ngModelCtrl.$render=function(){self.render()};$attrs.itemsPerPage?$scope.$parent.$watch($parse($attrs.itemsPerPage),function(value){self.itemsPerPage=parseInt(value,10);$scope.totalPages=self.calculateTotalPages()}):this.itemsPerPage=config.itemsPerPage};this.calculateTotalPages=function(){var totalPages=this.itemsPerPage<1?1:Math.ceil($scope.totalItems/this.itemsPerPage);return Math.max(totalPages||0,1)};this.render=function(){$scope.page=parseInt(ngModelCtrl.$viewValue,10)||1};$scope.selectPage=function(page){if($scope.page!==page&&page>0&&page<=$scope.totalPages){ngModelCtrl.$setViewValue(page);ngModelCtrl.$render()}};$scope.getText=function(key){return $scope[key+"Text"]||self.config[key+"Text"]};$scope.noPrevious=function(){return 1===$scope.page};$scope.noNext=function(){return $scope.page===$scope.totalPages};$scope.$watch("totalItems",function(){$scope.totalPages=self.calculateTotalPages()});$scope.$watch("totalPages",function(value){setNumPages($scope.$parent,value);$scope.page>value?$scope.selectPage(value):ngModelCtrl.$render()})}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:false,directionLinks:true,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:true}).directive("pagination",["$parse","paginationConfig",function($parse,paginationConfig){return{restrict:"EA",scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@"},require:["pagination","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pagination.html",replace:true,link:function link(scope,element,attrs,ctrls){var paginationCtrl=ctrls[0],ngModelCtrl=ctrls[1];if(!ngModelCtrl)return;var maxSize=angular.isDefined(attrs.maxSize)?scope.$parent.$eval(attrs.maxSize):paginationConfig.maxSize,rotate=angular.isDefined(attrs.rotate)?scope.$parent.$eval(attrs.rotate):paginationConfig.rotate;scope.boundaryLinks=angular.isDefined(attrs.boundaryLinks)?scope.$parent.$eval(attrs.boundaryLinks):paginationConfig.boundaryLinks;scope.directionLinks=angular.isDefined(attrs.directionLinks)?scope.$parent.$eval(attrs.directionLinks):paginationConfig.directionLinks;paginationCtrl.init(ngModelCtrl,paginationConfig);attrs.maxSize&&scope.$parent.$watch($parse(attrs.maxSize),function(value){maxSize=parseInt(value,10);paginationCtrl.render()});function makePage(number,text,isActive){return{number:number,text:text,active:isActive}}function getPages(currentPage,totalPages){var pages=[];var startPage=1,endPage=totalPages;var isMaxSized=angular.isDefined(maxSize)&&maxSize<totalPages;if(isMaxSized)if(rotate){startPage=Math.max(currentPage-Math.floor(maxSize/2),1);endPage=startPage+maxSize-1;if(endPage>totalPages){endPage=totalPages;startPage=endPage-maxSize+1}}else{startPage=(Math.ceil(currentPage/maxSize)-1)*maxSize+1;endPage=Math.min(startPage+maxSize-1,totalPages)}for(var number=startPage;number<=endPage;number++){var page=makePage(number,number,number===currentPage);pages.push(page)}if(isMaxSized&&!rotate){if(startPage>1){var previousPageSet=makePage(startPage-1,"...",false);pages.unshift(previousPageSet)}if(endPage<totalPages){var nextPageSet=makePage(endPage+1,"...",false);pages.push(nextPageSet)}}return pages}var originalRender=paginationCtrl.render;paginationCtrl.render=function(){originalRender();scope.page>0&&scope.page<=scope.totalPages&&(scope.pages=getPages(scope.page,scope.totalPages))}}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:" Previous",nextText:"Next ",align:true}).directive("pager",["pagerConfig",function(pagerConfig){return{restrict:"EA",scope:{totalItems:"=",previousText:"@",nextText:"@"},require:["pager","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:true,link:function link(scope,element,attrs,ctrls){var paginationCtrl=ctrls[0],ngModelCtrl=ctrls[1];if(!ngModelCtrl)return;scope.align=angular.isDefined(attrs.align)?scope.$parent.$eval(attrs.align):pagerConfig.align;paginationCtrl.init(ngModelCtrl,pagerConfig)}}}])},function(module,exports,__webpack_require__){"use strict";angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("popoverPopup",function(){return{restrict:"EA",replace:true,scope:{title:"@",content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"}}).directive("popover",["$tooltip",function($tooltip){return $tooltip("popover","popover","click")}])},function(module,exports,__webpack_require__){"use strict";angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function($document,$window){function getStyle(el,cssprop){if(el.currentStyle)return el.currentStyle[cssprop];if($window.getComputedStyle)return $window.getComputedStyle(el)[cssprop];return el.style[cssprop]}function isStaticPositioned(element){return"static"===(getStyle(element,"position")||"static")}var parentOffsetEl=function parentOffsetEl(element){var docDomEl=$document[0];var offsetParent=element.offsetParent||docDomEl;while(offsetParent&&offsetParent!==docDomEl&&isStaticPositioned(offsetParent))offsetParent=offsetParent.offsetParent;return offsetParent||docDomEl};return{position:function position(element){var elBCR=this.offset(element);var offsetParentBCR={top:0,left:0};var offsetParentEl=parentOffsetEl(element[0]);if(offsetParentEl!=$document[0]){offsetParentBCR=this.offset(angular.element(offsetParentEl));offsetParentBCR.top+=offsetParentEl.clientTop-offsetParentEl.scrollTop;offsetParentBCR.left+=offsetParentEl.clientLeft-offsetParentEl.scrollLeft}var boundingClientRect=element[0].getBoundingClientRect();return{width:boundingClientRect.width||element.prop("offsetWidth"),height:boundingClientRect.height||element.prop("offsetHeight"),top:elBCR.top-offsetParentBCR.top,left:elBCR.left-offsetParentBCR.left}},offset:function offset(element){var boundingClientRect=element[0].getBoundingClientRect();return{width:boundingClientRect.width||element.prop("offsetWidth"),height:boundingClientRect.height||element.prop("offsetHeight"),top:boundingClientRect.top+($window.pageYOffset||$document[0].documentElement.scrollTop),left:boundingClientRect.left+($window.pageXOffset||$document[0].documentElement.scrollLeft)}},positionElements:function positionElements(hostEl,targetEl,positionStr,appendToBody){var positionStrParts=positionStr.split("-");var pos0=positionStrParts[0],pos1=positionStrParts[1]||"center";var hostElPos,targetElWidth,targetElHeight,targetElPos;hostElPos=appendToBody?this.offset(hostEl):this.position(hostEl);targetElWidth=targetEl.prop("offsetWidth");targetElHeight=targetEl.prop("offsetHeight");var shiftWidth={center:function center(){return hostElPos.left+hostElPos.width/2-targetElWidth/2},left:function left(){return hostElPos.left},right:function right(){return hostElPos.left+hostElPos.width}};var shiftHeight={center:function center(){return hostElPos.top+hostElPos.height/2-targetElHeight/2},top:function top(){return hostElPos.top},bottom:function bottom(){return hostElPos.top+hostElPos.height}};switch(pos0){case"right":targetElPos={top:shiftHeight[pos1](),left:shiftWidth[pos0]()};break;case"left":targetElPos={top:shiftHeight[pos1](),left:hostElPos.left-targetElWidth};break;case"bottom":targetElPos={top:shiftHeight[pos0](),left:shiftWidth[pos1]()};break;default:targetElPos={top:hostElPos.top-targetElHeight,left:shiftWidth[pos1]()}}return targetElPos}}}])},function(module,exports,__webpack_require__){"use strict";angular.module("ui.bootstrap.progressbar",[]).constant("progressConfig",{animate:true,max:100}).controller("ProgressController",["$scope","$attrs","progressConfig",function($scope,$attrs,progressConfig){var self=this,animate=angular.isDefined($attrs.animate)?$scope.$parent.$eval($attrs.animate):progressConfig.animate;this.bars=[];$scope.max=angular.isDefined($attrs.max)?$scope.$parent.$eval($attrs.max):progressConfig.max;this.addBar=function(bar,element){animate||element.css({transition:"none"});this.bars.push(bar);bar.$watch("value",function(value){bar.percent=+(100*value/$scope.max).toFixed(2)});bar.$on("$destroy",function(){element=null;self.removeBar(bar)})};this.removeBar=function(bar){this.bars.splice(this.bars.indexOf(bar),1)}}]).directive("progress",function(){return{restrict:"EA",replace:true,transclude:true,controller:"ProgressController",require:"progress",scope:{},templateUrl:"template/progressbar/progress.html"}}).directive("bar",function(){return{restrict:"EA",replace:true,transclude:true,require:"^progress",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/bar.html",link:function link(scope,element,attrs,progressCtrl){progressCtrl.addBar(scope,element)}}}).directive("progressbar",function(){return{restrict:"EA",replace:true,transclude:true,controller:"ProgressController",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/progressbar.html",link:function link(scope,element,attrs,progressCtrl){progressCtrl.addBar(scope,angular.element(element.children()[0]))}}})},function(module,exports,__webpack_require__){"use strict";angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5,stateOn:null,stateOff:null}).controller("RatingController",["$scope","$attrs","ratingConfig",function($scope,$attrs,ratingConfig){var ngModelCtrl={$setViewValue:angular.noop};this.init=function(ngModelCtrl_){ngModelCtrl=ngModelCtrl_;ngModelCtrl.$render=this.render;this.stateOn=angular.isDefined($attrs.stateOn)?$scope.$parent.$eval($attrs.stateOn):ratingConfig.stateOn;this.stateOff=angular.isDefined($attrs.stateOff)?$scope.$parent.$eval($attrs.stateOff):ratingConfig.stateOff;var ratingStates=angular.isDefined($attrs.ratingStates)?$scope.$parent.$eval($attrs.ratingStates):new Array(angular.isDefined($attrs.max)?$scope.$parent.$eval($attrs.max):ratingConfig.max);$scope.range=this.buildTemplateObjects(ratingStates)};this.buildTemplateObjects=function(states){for(var i=0,n=states.length;i<n;i++)states[i]=angular.extend({index:i},{stateOn:this.stateOn,stateOff:this.stateOff},states[i]);return states};$scope.rate=function(value){if(!$scope.readonly&&value>=0&&value<=$scope.range.length){ngModelCtrl.$setViewValue(value);ngModelCtrl.$render()}};$scope.enter=function(value){$scope.readonly||($scope.value=value);$scope.onHover({value:value})};$scope.reset=function(){$scope.value=ngModelCtrl.$viewValue;$scope.onLeave()};$scope.onKeydown=function(evt){if(/(37|38|39|40)/.test(evt.which)){evt.preventDefault();evt.stopPropagation();$scope.rate($scope.value+(38===evt.which||39===evt.which?1:-1))}};this.render=function(){$scope.value=ngModelCtrl.$viewValue}}]).directive("rating",function(){return{restrict:"EA",require:["rating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"template/rating/rating.html",replace:true,link:function link(scope,element,attrs,ctrls){var ratingCtrl=ctrls[0],ngModelCtrl=ctrls[1];ngModelCtrl&&ratingCtrl.init(ngModelCtrl)}}})},function(module,exports,__webpack_require__){"use strict";angular.module("ui.bootstrap.tabs",[]).controller("TabsetController",["$scope",function TabsetCtrl($scope){var ctrl=this,tabs=ctrl.tabs=$scope.tabs=[];ctrl.select=function(selectedTab){angular.forEach(tabs,function(tab){if(tab.active&&tab!==selectedTab){tab.active=false;tab.onDeselect()}});selectedTab.active=true;selectedTab.onSelect()};ctrl.addTab=function addTab(tab){tabs.push(tab);1===tabs.length?tab.active=true:tab.active&&ctrl.select(tab)};ctrl.removeTab=function removeTab(tab){var index=tabs.indexOf(tab);if(tab.active&&tabs.length>1&&!destroyed){var newActiveIndex=index==tabs.length-1?index-1:index+1;ctrl.select(tabs[newActiveIndex])}tabs.splice(index,1)};var destroyed;$scope.$on("$destroy",function(){destroyed=true})}]).directive("tabset",function(){return{restrict:"EA",transclude:true,replace:true,scope:{type:"@"},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function link(scope,element,attrs){scope.vertical=!!angular.isDefined(attrs.vertical)&&scope.$parent.$eval(attrs.vertical);scope.justified=!!angular.isDefined(attrs.justified)&&scope.$parent.$eval(attrs.justified)}}}).directive("tab",["$parse",function($parse){return{require:"^tabset",restrict:"EA",replace:true,templateUrl:"template/tabs/tab.html",transclude:true,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function controller(){},compile:function compile(elm,attrs,transclude){return function postLink(scope,elm,attrs,tabsetCtrl){scope.$watch("active",function(active){active&&tabsetCtrl.select(scope)});scope.disabled=false;attrs.disabled&&scope.$parent.$watch($parse(attrs.disabled),function(value){scope.disabled=!!value});scope.select=function(){scope.disabled||(scope.active=true)};tabsetCtrl.addTab(scope);scope.$on("$destroy",function(){tabsetCtrl.removeTab(scope)});scope.$transcludeFn=transclude}}}}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^tab",link:function link(scope,elm,attrs,tabCtrl){scope.$watch("headingElement",function updateHeadingElement(heading){if(heading){elm.html("");elm.append(heading)}})}}}]).directive("tabContentTransclude",function(){return{restrict:"A",require:"^tabset",link:function link(scope,elm,attrs){var tab=scope.$eval(attrs.tabContentTransclude);tab.$transcludeFn(tab.$parent,function(contents){angular.forEach(contents,function(node){isTabHeading(node)?tab.headingElement=node:elm.append(node)})})}};function isTabHeading(node){return node.tagName&&(node.hasAttribute("tab-heading")||node.hasAttribute("data-tab-heading")||"tab-heading"===node.tagName.toLowerCase()||"data-tab-heading"===node.tagName.toLowerCase())}})},function(module,exports,__webpack_require__){"use strict";angular.module("ui.bootstrap.timepicker",[]).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:true,meridians:null,readonlyInput:false,mousewheel:true}).controller("TimepickerController",["$scope","$attrs","$parse","$log","$locale","timepickerConfig",function($scope,$attrs,$parse,$log,$locale,timepickerConfig){var selected=new Date,ngModelCtrl={$setViewValue:angular.noop},meridians=angular.isDefined($attrs.meridians)?$scope.$parent.$eval($attrs.meridians):timepickerConfig.meridians||$locale.DATETIME_FORMATS.AMPMS;this.init=function(ngModelCtrl_,inputs){ngModelCtrl=ngModelCtrl_;ngModelCtrl.$render=this.render;var hoursInputEl=inputs.eq(0),minutesInputEl=inputs.eq(1);var mousewheel=angular.isDefined($attrs.mousewheel)?$scope.$parent.$eval($attrs.mousewheel):timepickerConfig.mousewheel;mousewheel&&this.setupMousewheelEvents(hoursInputEl,minutesInputEl);$scope.readonlyInput=angular.isDefined($attrs.readonlyInput)?$scope.$parent.$eval($attrs.readonlyInput):timepickerConfig.readonlyInput;this.setupInputEvents(hoursInputEl,minutesInputEl)};var hourStep=timepickerConfig.hourStep;$attrs.hourStep&&$scope.$parent.$watch($parse($attrs.hourStep),function(value){hourStep=parseInt(value,10)});var minuteStep=timepickerConfig.minuteStep;$attrs.minuteStep&&$scope.$parent.$watch($parse($attrs.minuteStep),function(value){minuteStep=parseInt(value,10)});$scope.showMeridian=timepickerConfig.showMeridian;$attrs.showMeridian&&$scope.$parent.$watch($parse($attrs.showMeridian),function(value){$scope.showMeridian=!!value;if(ngModelCtrl.$error.time){var hours=getHoursFromTemplate(),minutes=getMinutesFromTemplate();if(angular.isDefined(hours)&&angular.isDefined(minutes)){selected.setHours(hours);refresh()}}else updateTemplate()});function getHoursFromTemplate(){var hours=parseInt($scope.hours,10);var valid=$scope.showMeridian?hours>0&&hours<13:hours>=0&&hours<24;if(!valid)return;if($scope.showMeridian){12===hours&&(hours=0);$scope.meridian===meridians[1]&&(hours+=12)}return hours}function getMinutesFromTemplate(){var minutes=parseInt($scope.minutes,10);return minutes>=0&&minutes<60?minutes:void 0}function pad(value){return angular.isDefined(value)&&value.toString().length<2?"0"+value:value}this.setupMousewheelEvents=function(hoursInputEl,minutesInputEl){var isScrollingUp=function isScrollingUp(e){e.originalEvent&&(e=e.originalEvent);var delta=e.wheelDelta?e.wheelDelta:-e.deltaY;return e.detail||delta>0};hoursInputEl.bind("mousewheel wheel",function(e){$scope.$apply(isScrollingUp(e)?$scope.incrementHours():$scope.decrementHours());e.preventDefault()});minutesInputEl.bind("mousewheel wheel",function(e){$scope.$apply(isScrollingUp(e)?$scope.incrementMinutes():$scope.decrementMinutes());e.preventDefault()})};this.setupInputEvents=function(hoursInputEl,minutesInputEl){if($scope.readonlyInput){$scope.updateHours=angular.noop;$scope.updateMinutes=angular.noop;return}var invalidate=function invalidate(invalidHours,invalidMinutes){ngModelCtrl.$setViewValue(null);ngModelCtrl.$setValidity("time",false);angular.isDefined(invalidHours)&&($scope.invalidHours=invalidHours);angular.isDefined(invalidMinutes)&&($scope.invalidMinutes=invalidMinutes)};$scope.updateHours=function(){var hours=getHoursFromTemplate();if(angular.isDefined(hours)){selected.setHours(hours);refresh("h")}else invalidate(true)};hoursInputEl.bind("blur",function(e){!$scope.invalidHours&&$scope.hours<10&&$scope.$apply(function(){$scope.hours=pad($scope.hours)})});$scope.updateMinutes=function(){var minutes=getMinutesFromTemplate();if(angular.isDefined(minutes)){selected.setMinutes(minutes);refresh("m")}else invalidate(void 0,true)};minutesInputEl.bind("blur",function(e){!$scope.invalidMinutes&&$scope.minutes<10&&$scope.$apply(function(){$scope.minutes=pad($scope.minutes)})})};this.render=function(){var date=ngModelCtrl.$modelValue?new Date(ngModelCtrl.$modelValue):null;if(isNaN(date)){ngModelCtrl.$setValidity("time",false);$log.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')}else{date&&(selected=date);makeValid();updateTemplate()}};function refresh(keyboardChange){makeValid();ngModelCtrl.$setViewValue(new Date(selected));updateTemplate(keyboardChange)}function makeValid(){ngModelCtrl.$setValidity("time",true);$scope.invalidHours=false;$scope.invalidMinutes=false}function updateTemplate(keyboardChange){var hours=selected.getHours(),minutes=selected.getMinutes();$scope.showMeridian&&(hours=0===hours||12===hours?12:hours%12);$scope.hours="h"===keyboardChange?hours:pad(hours);$scope.minutes="m"===keyboardChange?minutes:pad(minutes);$scope.meridian=selected.getHours()<12?meridians[0]:meridians[1]}function addMinutes(minutes){var dt=new Date(selected.getTime()+6e4*minutes);selected.setHours(dt.getHours(),dt.getMinutes());refresh()}$scope.incrementHours=function(){addMinutes(60*hourStep)};$scope.decrementHours=function(){addMinutes(60*-hourStep)};$scope.incrementMinutes=function(){addMinutes(minuteStep)};$scope.decrementMinutes=function(){addMinutes(-minuteStep)};$scope.toggleMeridian=function(){addMinutes(720*(selected.getHours()<12?1:-1))}}]).directive("timepicker",function(){return{restrict:"EA",require:["timepicker","?^ngModel"],controller:"TimepickerController",replace:true,scope:{},templateUrl:"template/timepicker/timepicker.html",link:function link(scope,element,attrs,ctrls){var timepickerCtrl=ctrls[0],ngModelCtrl=ctrls[1];ngModelCtrl&&timepickerCtrl.init(ngModelCtrl,element.find("input"))}}})},function(module,exports,__webpack_require__){"use strict";angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).provider("$tooltip",function(){var defaultOptions={placement:"top",animation:true,popupDelay:0};var triggerMap={mouseenter:"mouseleave",click:"click",focus:"blur"};var globalOptions={};this.options=function(value){angular.extend(globalOptions,value)};this.setTriggers=function setTriggers(triggers){angular.extend(triggerMap,triggers)};function snake_case(name){var regexp=/[A-Z]/g;var separator="-";return name.replace(regexp,function(letter,pos){return(pos?separator:"")+letter.toLowerCase()})}this.$get=["$window","$compile","$timeout","$document","$position","$interpolate",function($window,$compile,$timeout,$document,$position,$interpolate){return function $tooltip(type,prefix,defaultTriggerShow){var options=angular.extend({},defaultOptions,globalOptions);function getTriggers(trigger){var show=trigger||options.trigger||defaultTriggerShow;var hide=triggerMap[show]||show;return{show:show,hide:hide}}var directiveName=snake_case(type);var startSym=$interpolate.startSymbol();var endSym=$interpolate.endSymbol();var template="<div "+directiveName+'-popup title="'+startSym+"title"+endSym+'" content="'+startSym+"content"+endSym+'" placement="'+startSym+"placement"+endSym+'" animation="animation" is-open="isOpen"></div>';return{restrict:"EA",compile:function compile(tElem,tAttrs){var tooltipLinker=$compile(template);return function link(scope,element,attrs){var tooltip;var tooltipLinkedScope;var transitionTimeout;var popupTimeout;var appendToBody=!!angular.isDefined(options.appendToBody)&&options.appendToBody;var triggers=getTriggers(void 0);var hasEnableExp=angular.isDefined(attrs[prefix+"Enable"]);var ttScope=scope.$new(true);var positionTooltip=function positionTooltip(){var ttPosition=$position.positionElements(element,tooltip,ttScope.placement,appendToBody);ttPosition.top+="px";ttPosition.left+="px";tooltip.css(ttPosition)};ttScope.isOpen=false;function toggleTooltipBind(){ttScope.isOpen?hideTooltipBind():showTooltipBind()}function showTooltipBind(){if(hasEnableExp&&!scope.$eval(attrs[prefix+"Enable"]))return;prepareTooltip();if(ttScope.popupDelay){if(!popupTimeout){popupTimeout=$timeout(show,ttScope.popupDelay,false);popupTimeout.then(function(reposition){return reposition()}).catch(function(error){if("canceled"!==error)throw error})}}else show()()}function hideTooltipBind(){scope.$evalAsync(function(){hide()})}function show(){popupTimeout=null;if(transitionTimeout){$timeout.cancel(transitionTimeout);transitionTimeout=null}if(!ttScope.content)return angular.noop;createTooltip();tooltip.css({top:0,left:0,display:"block"});ttScope.$digest();positionTooltip();ttScope.isOpen=true;ttScope.$digest();return positionTooltip}function hide(){ttScope.isOpen=false;$timeout.cancel(popupTimeout);popupTimeout=null;ttScope.animation?transitionTimeout||(transitionTimeout=$timeout(removeTooltip,500)):removeTooltip()}function createTooltip(){tooltip&&removeTooltip();tooltipLinkedScope=ttScope.$new();tooltip=tooltipLinker(tooltipLinkedScope,function(tooltip){appendToBody?$document.find("body").append(tooltip):element.after(tooltip)})}function removeTooltip(){transitionTimeout=null;if(tooltip){tooltip.remove();tooltip=null}if(tooltipLinkedScope){tooltipLinkedScope.$destroy();tooltipLinkedScope=null}}function prepareTooltip(){prepPlacement();prepPopupDelay()}attrs.$observe(type,function(val){ttScope.content=val;!val&&ttScope.isOpen&&hide()});attrs.$observe(prefix+"Title",function(val){ttScope.title=val});function prepPlacement(){var val=attrs[prefix+"Placement"];ttScope.placement=angular.isDefined(val)?val:options.placement}function prepPopupDelay(){var val=attrs[prefix+"PopupDelay"];var delay=parseInt(val,10);ttScope.popupDelay=isNaN(delay)?options.popupDelay:delay}var unregisterTriggers=function unregisterTriggers(){element.unbind(triggers.show,showTooltipBind);element.unbind(triggers.hide,hideTooltipBind)};function prepTriggers(){var val=attrs[prefix+"Trigger"];unregisterTriggers();triggers=getTriggers(val);if(triggers.show===triggers.hide)element.bind(triggers.show,toggleTooltipBind);else{element.bind(triggers.show,showTooltipBind);element.bind(triggers.hide,hideTooltipBind)}}prepTriggers();var animation=scope.$eval(attrs[prefix+"Animation"]);ttScope.animation=angular.isDefined(animation)?!!animation:options.animation;var appendToBodyVal=scope.$eval(attrs[prefix+"AppendToBody"]);appendToBody=angular.isDefined(appendToBodyVal)?appendToBodyVal:appendToBody;appendToBody&&scope.$on("$locationChangeSuccess",function closeTooltipOnLocationChangeSuccess(){ttScope.isOpen&&hide()});scope.$on("$destroy",function onDestroyTooltip(){$timeout.cancel(transitionTimeout);$timeout.cancel(popupTimeout);unregisterTriggers();removeTooltip();ttScope=null})}}}}}]}).directive("tooltipPopup",function(){return{restrict:"EA",replace:true,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function($tooltip){return $tooltip("tooltip","tooltip","mouseenter")}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"EA",replace:true,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}).directive("tooltipHtmlUnsafe",["$tooltip",function($tooltip){return $tooltip("tooltipHtmlUnsafe","tooltip","mouseenter")}])},function(module,exports,__webpack_require__){"use strict";angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function($q,$timeout,$rootScope){var $transition=function $transition(element,trigger,options){options=options||{};var deferred=$q.defer();var endEventName=$transition[options.animation?"animationEndEventName":"transitionEndEventName"];var transitionEndHandler=function transitionEndHandler(event){$rootScope.$apply(function(){element.unbind(endEventName,transitionEndHandler);deferred.resolve(element)})};endEventName&&element.bind(endEventName,transitionEndHandler);$timeout(function(){angular.isString(trigger)?element.addClass(trigger):angular.isFunction(trigger)?trigger(element):angular.isObject(trigger)&&element.css(trigger);endEventName||deferred.resolve(element)});deferred.promise.cancel=function(){endEventName&&element.unbind(endEventName,transitionEndHandler);deferred.reject("Transition cancelled")};return deferred.promise};var transElement=document.createElement("trans");var transitionEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"};var animationEndEventNames={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};function findEndEventName(endEventNames){for(var name in endEventNames)if(void 0!==transElement.style[name])return endEventNames[name]}$transition.transitionEndEventName=findEndEventName(transitionEndEventNames);$transition.animationEndEventName=findEndEventName(animationEndEventNames);return $transition}])},function(module,exports,__webpack_require__){"use strict";angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).factory("typeaheadParser",["$parse",function($parse){var TYPEAHEAD_REGEXP=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function parse(input){var match=input.match(TYPEAHEAD_REGEXP);if(!match)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+input+'".');return{itemName:match[3],source:$parse(match[4]),viewMapper:$parse(match[2]||match[1]),modelMapper:$parse(match[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function($compile,$parse,$q,$timeout,$document,$position,typeaheadParser){var HOT_KEYS=[9,13,27,38,40];return{require:"ngModel",link:function link(originalScope,element,attrs,modelCtrl){var minSearch=originalScope.$eval(attrs.typeaheadMinLength)||1;var waitTime=originalScope.$eval(attrs.typeaheadWaitMs)||0;var isEditable=false!==originalScope.$eval(attrs.typeaheadEditable);var isLoadingSetter=$parse(attrs.typeaheadLoading).assign||angular.noop;var onSelectCallback=$parse(attrs.typeaheadOnSelect);var inputFormatter=attrs.typeaheadInputFormatter?$parse(attrs.typeaheadInputFormatter):void 0;var appendToBody=!!attrs.typeaheadAppendToBody&&originalScope.$eval(attrs.typeaheadAppendToBody);var focusFirst=false!==originalScope.$eval(attrs.typeaheadFocusFirst);var $setModelValue=$parse(attrs.ngModel).assign;var parserResult=typeaheadParser.parse(attrs.typeahead);var hasFocus;var scope=originalScope.$new();originalScope.$on("$destroy",function(){scope.$destroy()});var popupId="typeahead-"+scope.$id+"-"+Math.floor(1e4*Math.random());element.attr({"aria-autocomplete":"list","aria-expanded":false,"aria-owns":popupId});var popUpEl=angular.element("<div typeahead-popup></div>");popUpEl.attr({id:popupId,matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"});angular.isDefined(attrs.typeaheadTemplateUrl)&&popUpEl.attr("template-url",attrs.typeaheadTemplateUrl);var resetMatches=function resetMatches(){scope.matches=[];scope.activeIdx=-1;element.attr("aria-expanded",false)};var getMatchId=function getMatchId(index){return popupId+"-option-"+index};scope.$watch("activeIdx",function(index){index<0?element.removeAttr("aria-activedescendant"):element.attr("aria-activedescendant",getMatchId(index))});var getMatchesAsync=function getMatchesAsync(inputValue){var locals={$viewValue:inputValue};isLoadingSetter(originalScope,true);$q.when(parserResult.source(originalScope,locals)).then(function(matches){var onCurrentRequest=inputValue===modelCtrl.$viewValue;if(onCurrentRequest&&hasFocus)if(matches.length>0){scope.activeIdx=focusFirst?0:-1;scope.matches.length=0;for(var i=0;i<matches.length;i++){locals[parserResult.itemName]=matches[i];scope.matches.push({id:getMatchId(i),label:parserResult.viewMapper(scope,locals),model:matches[i]})}scope.query=inputValue;scope.position=appendToBody?$position.offset(element):$position.position(element);scope.position.top=scope.position.top+element.prop("offsetHeight");element.attr("aria-expanded",true)}else resetMatches();onCurrentRequest&&isLoadingSetter(originalScope,false)},function(){resetMatches();isLoadingSetter(originalScope,false)})};resetMatches();scope.query=void 0;var timeoutPromise;var scheduleSearchWithTimeout=function scheduleSearchWithTimeout(inputValue){timeoutPromise=$timeout(function(){getMatchesAsync(inputValue)},waitTime)};var cancelPreviousTimeout=function cancelPreviousTimeout(){timeoutPromise&&$timeout.cancel(timeoutPromise)};modelCtrl.$parsers.unshift(function(inputValue){hasFocus=true;if(inputValue&&inputValue.length>=minSearch)if(waitTime>0){cancelPreviousTimeout();scheduleSearchWithTimeout(inputValue)}else getMatchesAsync(inputValue);else{isLoadingSetter(originalScope,false);cancelPreviousTimeout();resetMatches()}if(isEditable)return inputValue;if(inputValue){modelCtrl.$setValidity("editable",false);return}modelCtrl.$setValidity("editable",true);return inputValue});modelCtrl.$formatters.push(function(modelValue){var candidateViewValue,emptyViewValue;var locals={};if(inputFormatter){locals.$model=modelValue;return inputFormatter(originalScope,locals)}locals[parserResult.itemName]=modelValue;candidateViewValue=parserResult.viewMapper(originalScope,locals);locals[parserResult.itemName]=void 0;emptyViewValue=parserResult.viewMapper(originalScope,locals);return candidateViewValue!==emptyViewValue?candidateViewValue:modelValue});scope.select=function(activeIdx){var locals={};var model,item;locals[parserResult.itemName]=item=scope.matches[activeIdx].model;model=parserResult.modelMapper(originalScope,locals);$setModelValue(originalScope,model);modelCtrl.$setValidity("editable",true);onSelectCallback(originalScope,{$item:item,$model:model,$label:parserResult.viewMapper(originalScope,locals)});resetMatches();$timeout(function(){element[0].focus()},0,false)};element.bind("keydown",function(evt){if(0===scope.matches.length||-1===HOT_KEYS.indexOf(evt.which))return;if(-1==scope.activeIdx&&(13===evt.which||9===evt.which))return;evt.preventDefault();if(40===evt.which){scope.activeIdx=(scope.activeIdx+1)%scope.matches.length;scope.$digest()}else if(38===evt.which){scope.activeIdx=(scope.activeIdx>0?scope.activeIdx:scope.matches.length)-1;scope.$digest()}else if(13===evt.which||9===evt.which)scope.$apply(function(){scope.select(scope.activeIdx)});else if(27===evt.which){evt.stopPropagation();resetMatches();scope.$digest()}});element.bind("blur",function(evt){hasFocus=false});var dismissClickHandler=function dismissClickHandler(evt){if(element[0]!==evt.target){resetMatches();scope.$digest()}};$document.bind("click",dismissClickHandler);originalScope.$on("$destroy",function(){$document.unbind("click",dismissClickHandler);appendToBody&&$popup.remove()});var $popup=$compile(popUpEl)(scope);appendToBody?$document.find("body").append($popup):element.after($popup)}}}]).directive("typeaheadPopup",function(){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:true,templateUrl:"template/typeahead/typeahead-popup.html",link:function link(scope,element,attrs){scope.templateUrl=attrs.templateUrl;scope.isOpen=function(){return scope.matches.length>0};scope.isActive=function(matchIdx){return scope.active==matchIdx};scope.selectActive=function(matchIdx){scope.active=matchIdx};scope.selectMatch=function(activeIdx){scope.select({activeIdx:activeIdx})}}}}).directive("typeaheadMatch",["$http","$templateCache","$compile","$parse",function($http,$templateCache,$compile,$parse){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function link(scope,element,attrs){var tplUrl=$parse(attrs.templateUrl)(scope.$parent)||"template/typeahead/typeahead-match.html";$http.get(tplUrl,{cache:$templateCache}).then(function(resp){element.replaceWith($compile(resp.data.trim())(scope))})}}}]).filter("typeaheadHighlight",function(){function escapeRegexp(queryToEscape){return queryToEscape.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(matchItem,query){return query?(""+matchItem).replace(new RegExp(escapeRegexp(query),"gi"),"<strong>$&</strong>"):matchItem}})},function(module,exports){module.exports='<div class="alert" ng-class="[\'alert-\' + (type || \'warning\'), closeable ? \'alert-dismissable\' : null]" role="alert">\n    <button ng-show="closeable" type="button" class="close" ng-click="close()">\n        <span aria-hidden="true">&times;</span>\n        <span class="euiScreenReaderOnly">Close</span>\n    </button>\n    <div ng-transclude></div>\n</div>\n'},function(module,exports){module.exports='<div ng-switch="datepickerMode" role="application">\n  <daypicker ng-switch-when="day" tabindex="0"></daypicker>\n  <monthpicker ng-switch-when="month" tabindex="0"></monthpicker>\n  <yearpicker ng-switch-when="year" tabindex="0"></yearpicker>\n</div>\n'},function(module,exports){module.exports='<table\n  class="kuiDatePicker fullWidth"\n  role="grid"\n  aria-labelledby="{{uniqueId}}-title"\n  aria-activedescendant="{{activeDateId}}"\n>\n  <thead>\n    <tr>\n      <th\n        class="kuiDatePickerNavigationCell"\n        colspan="{{7 + showWeeks}}"\n      >\n        <div class="kuiDatePickerNavigation">\n          <button\n            type="button"\n            class="kuiDatePickerNavigationButton"\n            ng-click="move(-1)"\n            aria-label="Previous month"\n          >\n            <span class="kuiIcon fa-chevron-left"></span>\n          </button>\n\n          <button\n            id="{{uniqueId}}-title"\n            role="heading"\n            aria-live="assertive"\n            aria-atomic="true"\n            type="button"\n            class="kuiDatePickerNavigationButton"\n            ng-click="toggleMode()"\n          >\n            <strong>{{title}}</strong>\n          </button>\n\n          <button\n            type="button"\n            class="kuiDatePickerNavigationButton"\n            ng-click="move(1)"\n            aria-label="Next month"\n          >\n            <span class="kuiIcon fa-chevron-right"></span>\n          </button>\n        </div>\n      </th>\n    </tr>\n    <tr>\n      <th ng-show="showWeeks" class="text-center"></th>\n      <th\n        ng-repeat="label in labels track by $index"\n        class="kuiDatePickerHeaderCell"\n      >\n        <small aria-label="{{label.full}}">{{label.abbr}}</small>\n      </th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-show="showWeeks">\n        <em>{{ weekNumbers[$index] }}</em>\n      </td>\n\n      <td\n        ng-repeat="dt in row track by dt.date"\n        class="kuiDatePickerRowCell"\n        ng-class="{\'kuiDatePickerRowCell-isBlocked\': dt.disabled && !dt.secondary}"\n        id="{{dt.uid}}"\n        aria-disabled="{{!!dt.disabled}}"\n      >\n        <button\n          type="button"\n          class="kuiDatePickerRowCellContent"\n          ng-class="{\'kuiDatePickerRowCellContent-isSelected\': dt.selected, \'kuiDatePickerRowCellContent-isCurrent\': dt.current, \'kuiDatePickerRowCellContent-isOtherMonth\': dt.secondary}"\n          ng-click="select(dt.date)"\n          ng-disabled="dt.disabled"\n        >\n          <span>{{dt.label}}</span>\n        </button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n'},function(module,exports){module.exports='<table\n  class="kuiDatePicker fullWidth"\n  role="grid"\n  aria-labelledby="{{uniqueId}}-title"\n  aria-activedescendant="{{activeDateId}}"\n>\n  <thead>\n    <tr>\n      <th\n        class="kuiDatePickerNavigationCell"\n        colspan="3"\n      >\n        <div class="kuiDatePickerNavigation">\n          <button\n            type="button"\n            class="kuiDatePickerNavigationButton"\n            ng-click="move(-1)"\n            aria-label="Previous year"\n          >\n            <span class="kuiIcon fa-chevron-left"></span>\n          </button>\n\n          <button\n            id="{{uniqueId}}-title"\n            role="heading"\n            aria-live="assertive"\n            aria-atomic="true"\n            type="button"\n            class="kuiDatePickerNavigationButton"\n            ng-click="toggleMode()"\n          >\n            <strong>{{title}}</strong>\n          </button>\n\n          <button\n            type="button"\n            class="kuiDatePickerNavigationButton"\n            ng-click="move(1)"\n            aria-label="Next year"\n          >\n            <span class="kuiIcon fa-chevron-right"></span>\n          </button>\n        </div>\n      </th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td\n        ng-repeat="dt in row track by dt.date"\n        class="kuiDatePickerRowCell"\n        ng-class="{\'kuiDatePickerRowCell-isBlocked\': dt.disabled && !dt.secondary}"\n        id="{{dt.uid}}"\n        aria-disabled="{{!!dt.disabled}}"\n      >\n        <button\n          type="button"\n          class="kuiDatePickerRowCellContent"\n          ng-class="{\'kuiDatePickerRowCellContent-isSelected\': dt.selected, \'kuiDatePickerRowCellContent-isCurrent\': dt.current}"\n          ng-click="select(dt.date)"\n          ng-disabled="dt.disabled"\n        >\n          <span>{{dt.label}}</span>\n        </button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n'},function(module,exports){module.exports='<ul class="dropdown-menu" ng-style="{display: (isOpen && \'block\') || \'none\', top: position.top+\'px\', left: position.left+\'px\'}" ng-keydown="keydown($event)">\n\t<li ng-transclude></li>\n\t<li ng-if="showButtonBar" style="padding:10px 9px 2px">\n\t\t<span class="kuiButtonGroup pull-left">\n\t\t\t<button type="button" class="kuiButton kuiButton--small kuiButton--primary" ng-click="select(\'today\')">{{ getText(\'current\') }}</button>\n\t\t\t<button type="button" class="kuiButton kuiButton--small kuiButton--danger" ng-click="select(null)">{{ getText(\'clear\') }}</button>\n\t\t</span>\n\t\t<button type="button" class="kuiButton kuiButton--small kuiButton--primary pull-right" ng-click="close()">{{ getText(\'close\') }}</button>\n\t</li>\n</ul>\n'},function(module,exports){module.exports='<table\n  class="kuiDatePicker fullWidth"\n  role="grid"\n  aria-labelledby="{{uniqueId}}-title"\n  aria-activedescendant="{{activeDateId}}"\n>\n  <thead>\n    <tr>\n      <th\n        class="kuiDatePickerNavigationCell"\n        colspan="5"\n      >\n        <div class="kuiDatePickerNavigation">\n          <button\n            type="button"\n            class="kuiDatePickerNavigationButton"\n            ng-click="move(-1)"\n            aria-label="Previous {{yearRange}} years"\n          >\n            <span class="kuiIcon fa-chevron-left"></span>\n          </button>\n\n          <button\n            id="{{uniqueId}}-title"\n            role="heading"\n            aria-live="assertive"\n            aria-atomic="true"\n            type="button"\n            class="kuiDatePickerNavigationButton"\n            ng-click="toggleMode()"\n          >\n            <strong>{{title}}</strong>\n          </button>\n\n          <button\n            type="button"\n            class="kuiDatePickerNavigationButton"\n            ng-click="move(1)"\n            aria-label="Next {{yearRange}} years"\n          >\n            <span class="kuiIcon fa-chevron-right"></span>\n          </button>\n        </div>\n      </th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td\n        ng-repeat="dt in row track by dt.date"\n        class="kuiDatePickerRowCell"\n        ng-class="{\'kuiDatePickerRowCell-isBlocked\': dt.disabled && !dt.secondary}"\n        id="{{dt.uid}}"\n        aria-disabled="{{!!dt.disabled}}"\n      >\n        <button\n          type="button"\n          class="kuiDatePickerRowCellContent"\n          ng-class="{\'kuiDatePickerRowCellContent-isSelected\': dt.selected, \'kuiDatePickerRowCellContent-isCurrent\': dt.current}"\n          ng-click="select(dt.date)"\n          ng-disabled="dt.disabled"\n        >\n          <span>{{dt.label}}</span>\n        </button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n'},function(module,exports){module.exports='<div class="modal-backdrop fade {{ backdropClass }}"\n     ng-class="{in: animate}"\n     ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"\n></div>\n'},function(module,exports){module.exports='<div tabindex="-1" role="dialog" class="modal fade" ng-class="{in: animate}" ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}" ng-click="close($event)">\n    <div class="modal-dialog" ng-class="{\'modal-sm\': size == \'sm\', \'modal-lg\': size == \'lg\'}"><div class="modal-content" modal-transclude></div></div>\n</div>'},function(module,exports){module.exports='<ul class="pager">\n  <li ng-class="{disabled: noPrevious(), previous: align}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n  <li ng-class="{disabled: noNext(), next: align}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n</ul>'},function(module,exports){module.exports='<ul class="pagination">\n  <li ng-if="boundaryLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(1)">{{getText(\'first\')}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n  <li ng-repeat="page in pages track by $index" ng-class="{active: page.active}"><a href ng-click="selectPage(page.number)">{{page.text}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n  <li ng-if="boundaryLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(totalPages)">{{getText(\'last\')}}</a></li>\n</ul>'},function(module,exports){module.exports='<div class="bsTooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="bsTooltip-arrow"></div>\n  <div class="bsTooltip-inner" bind-html-unsafe="content"></div>\n</div>\n'},function(module,exports){module.exports='<div class="bsTooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="bsTooltip-arrow"></div>\n  <div class="bsTooltip-inner" ng-bind="content"></div>\n</div>\n'},function(module,exports){module.exports='<div class="popover {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-show="title"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n'},function(module,exports){module.exports='<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: percent + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>'},function(module,exports){module.exports='<div class="progress" ng-transclude></div>'},function(module,exports){module.exports='<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: percent + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>\n</div>'},function(module,exports){module.exports='<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}">\n    <i ng-repeat="r in range track by $index" ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')">\n        <span class="euiScreenReaderOnly">({{ $index < value ? \'*\' : \' \' }})</span>\n    </i>\n</span>\n'},function(module,exports){module.exports='<li ng-class="{active: active, disabled: disabled}">\n  <a href ng-click="select()" tab-heading-transclude>{{heading}}</a>\n</li>\n'},function(module,exports){module.exports='<div>\n  <ul class="nav nav-{{type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n'},function(module,exports){module.exports='<table>\n\t<tbody>\n\t\t<tr class="text-center">\n\t\t\t<td><a ng-click="incrementHours()" class="kuiButton kuiButton--hollow"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n\t\t\t<td>&nbsp;</td>\n\t\t\t<td><a ng-click="incrementMinutes()" class="kuiButton kuiButton--hollow"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n\t\t\t<td ng-show="showMeridian"></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidHours}">\n\t\t\t\t<input type="text" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-mousewheel="incrementHours()" ng-readonly="readonlyInput" maxlength="2">\n\t\t\t</td>\n\t\t\t<td>:</td>\n\t\t\t<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidMinutes}">\n\t\t\t\t<input type="text" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2">\n\t\t\t</td>\n\t\t\t<td ng-show="showMeridian"><button type="button" class="kuiButton kuiButton--basic text-center" ng-click="toggleMeridian()">{{meridian}}</button></td>\n\t\t</tr>\n\t\t<tr class="text-center">\n\t\t\t<td><a ng-click="decrementHours()" class="kuiButton kuiButton--hollow"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n\t\t\t<td>&nbsp;</td>\n\t\t\t<td><a ng-click="decrementMinutes()" class="kuiButton kuiButton--hollow"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n\t\t\t<td ng-show="showMeridian"></td>\n\t\t</tr>\n\t</tbody>\n</table>\n'},function(module,exports){module.exports='<a tabindex="-1" bind-html-unsafe="match.label | typeaheadHighlight:query"></a>'},function(module,exports){module.exports='<ul class="dropdown-menu" ng-show="isOpen()" ng-style="{top: position.top+\'px\', left: position.left+\'px\'}" style="display: block;" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)" role="option" id="{{match.id}}">\n        <div typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n'},function(module,exports,__webpack_require__){"use strict";__webpack_require__(3204)},function(module,exports,__webpack_require__){"use strict";__webpack_require__(3205);__webpack_require__(1328);__webpack_require__(3208)},function(module,exports,__webpack_require__){"use strict";__webpack_require__(3206);var _modules=__webpack_require__(2);_modules.uiModules.get("kibana",["ngAria"]).config(function($ariaProvider){$ariaProvider.config({bindKeydown:false,bindRoleForClick:false,tabindex:false})})},,,function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(2);_modules.uiModules.get("kibana").directive("scrolltoActivedescendant",function(){return{link:function link(scope,element,attrs){scope.$watch(function(){return attrs.ariaActivedescendant},function(val){if(val){var activeDescendant=element.find("#"+val);activeDescendant.length&&activeDescendant[0].scrollIntoView()}})}}})},function(module,exports,__webpack_require__){"use strict";__webpack_require__(16);__webpack_require__(8);__webpack_require__(1045);__webpack_require__(833);__webpack_require__(1303);__webpack_require__(474);__webpack_require__(94);__webpack_require__(1270);__webpack_require__(365);__webpack_require__(3216);__webpack_require__(1296);__webpack_require__(398);__webpack_require__(3217);__webpack_require__(1331);__webpack_require__(612);__webpack_require__(484);__webpack_require__(3256);__webpack_require__(9);__webpack_require__(3258);__webpack_require__(250);__webpack_require__(1237);__webpack_require__(475);__webpack_require__(1341);__webpack_require__(476);__webpack_require__(1018);__webpack_require__(798);__webpack_require__(3265);__webpack_require__(14);__webpack_require__(838);__webpack_require__(1347);__webpack_require__(3290);__webpack_require__(138);__webpack_require__(825);__webpack_require__(799);__webpack_require__(3296);__webpack_require__(841)},function(module,exports,__webpack_require__){"use strict";var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _angular=__webpack_require__(16);var _angular2=_interopRequireDefault(_angular);__webpack_require__(799);__webpack_require__(416);var _modules=__webpack_require__(2);var _kbn_top_nav=__webpack_require__(3211);var _kbn_top_nav2=_interopRequireDefault(_kbn_top_nav);var _kbn_top_nav_controller=__webpack_require__(1329);var _navbar_extensions=__webpack_require__(610);__webpack_require__(3214);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");_module.directive("kbnTopNav",function(Private){var KbnTopNavController=Private(_kbn_top_nav_controller.KbnTopNavControllerProvider);var navbarExtensions=Private(_navbar_extensions.NavBarExtensionsRegistryProvider);var getNavbarExtensions=_lodash2.default.memoize(function(name){if(!name)throw new Error("navbar directive requires a name attribute");return _lodash2.default.sortBy(navbarExtensions.byAppName[name],"order")});return{restrict:"E",transclude:true,template:_kbn_top_nav2.default,controller:function controller($scope,$attrs,$element,$transclude){$scope.transcludes={};$transclude(function(clone){var transcludedContentContainer=_lodash2.default.find(clone,function(item){if(item.attributes)return _lodash2.default.find(item.attributes,function(attr){return-1!==attr.name.indexOf("data-transclude-slots")})});if(!transcludedContentContainer)return;var transcludedContent=transcludedContentContainer.children;_lodash2.default.forEach(transcludedContent,function(transcludedItem){var transclusionSlot=transcludedItem.getAttribute("data-transclude-slot");$scope.transcludes[transclusionSlot]=transcludedItem})});var extensions=getNavbarExtensions($attrs.name);function initTopNav(newConfig,oldConfig){if(_lodash2.default.isEqual(oldConfig,newConfig))return;if(newConfig instanceof KbnTopNavController){newConfig.addItems(extensions);$scope.kbnTopNav=new KbnTopNavController(newConfig)}else{newConfig=newConfig.concat(extensions);$scope.kbnTopNav=new KbnTopNavController(newConfig)}$scope.kbnTopNav._link($scope,$element)}var getTopNavConfig=function getTopNavConfig(){return _lodash2.default.get($scope,$attrs.config,[])};var topNavConfig=getTopNavConfig();topNavConfig instanceof KbnTopNavController||$scope.$watch(getTopNavConfig,initTopNav,true);initTopNav(topNavConfig,null);return $scope.kbnTopNav},link:function link(scope){var transclusionSlotNames=["topLeftCorner","bottomRow"];transclusionSlotNames.forEach(function(name){var transcludedItem=scope.transcludes[name];if(transcludedItem){var transclusionSlot=document.querySelector('[data-transclude-slot="'+name+'"]');_angular2.default.element(transclusionSlot).replaceWith(transcludedItem)}})}}})},function(module,exports){module.exports='<div\n  class="kuiLocalNav"\n  ng-show="kbnTopNav.isVisible()"\n  data-test-subj="top-nav"\n>\n  \x3c!-- Top row --\x3e\n  <div class="kuiLocalNavRow">\n    \x3c!-- Top left corner slot, e.g. breadcrumbs, title. --\x3e\n    <div\n      class="kuiLocalNavRow__section"\n      data-transclude-slot="topLeftCorner"\n    ></div>\n\n    \x3c!-- Right-side: menu --\x3e\n    <div class="kuiLocalNavRow__section">\n      <div class="kuiLocalMenu">\n        <button\n          class="kuiLocalMenuItem"\n          ng-repeat="menuItem in kbnTopNav.menuItems"\n          aria-label="{{::menuItem.description}}"\n          aria-haspopup="{{!menuItem.hasFunction}}"\n          aria-expanded="{{kbnTopNav.isCurrent(menuItem.key)}}"\n          aria-disabled="{{menuItem.disableButton()}}"\n          ng-class="{\'kuiLocalMenuItem-isSelected\': kbnTopNav.isCurrent(menuItem.key), \'kuiLocalMenuItem-isDisabled\': menuItem.disableButton()}"\n          ng-click="kbnTopNav.handleClick(menuItem)"\n          ng-bind="menuItem.label"\n          tooltip="{{menuItem.tooltip()}}"\n          tooltip-placement="bottom"\n          tooltip-popup-delay="400"\n          tooltip-append-to-body="1"\n          data-test-subj="{{menuItem.testId}}"\n        ></button>\n\n        \x3c!-- Time-picker "menu item" --\x3e\n        <kbn-global-timepicker></kbn-global-timepicker>\n      </div>\n    </div>\n  </div>\n\n  \x3c!-- Dropdown content, e.g. time-picker. --\x3e\n  <div\n    class="kuiLocalDropdown"\n    ng-show="kbnTopNav.rendered"\n  >\n    <button class="kuiLocalDropdownCloseButton" ng-click="kbnTopNav.close()" aria-label="Close">\n      <span class="kuiIcon fa-chevron-circle-up"></span>\n    </button>\n    <div id="template_wrapper">\n      \x3c!-- Content gets dynamically inserted here. --\x3e\n    </div>\n  </div>\n\n  <div class="kuiLocalNavRow kuiLocalNavRow--secondary">\n    \x3c!-- Bottom row slot, e.g. tabs. --\x3e\n    <div data-transclude-slot="bottomRow"></div>\n  </div>\n</div>\n'},function(module,exports){module.exports='<kbn-timepicker\n  from="timefilterValues.time.from"\n  to="timefilterValues.time.to"\n  mode="timefilterValues.time.mode"\n  active-tab="\'filter\'"\n  interval="timefilterValues.refreshInterval"\n  on-filter-select="updateFilter(from, to, mode)"\n  on-interval-select="updateInterval(interval)">\n</kbn-timepicker>\n'},function(module,exports){module.exports='<kbn-timepicker\n  from="timefilterValues.time.from"\n  to="timefilterValues.time.to"\n  mode="timefilterValues.time.mode"\n  active-tab="\'interval\'"\n  interval="timefilterValues.refreshInterval"\n  on-filter-select="updateFilter(from, to, mode)"\n  on-interval-select="updateInterval(interval)">\n</kbn-timepicker>\n'},function(module,exports,__webpack_require__){"use strict";var _bread_crumbs=__webpack_require__(3215);var _bread_crumbs2=_interopRequireDefault(_bread_crumbs);var _modules=__webpack_require__(2);var _routes=__webpack_require__(12);var _routes2=_interopRequireDefault(_routes);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");_module.directive("breadCrumbs",function(){return{restrict:"E",replace:true,scope:{omitCurrentPage:"=",omitPages:"=",pageTitle:"=",useLinks:"="},template:_bread_crumbs2.default,controller:function controller($scope){function omitPagesFilter(crumb){return!$scope.omitPages||!$scope.omitPages.includes(crumb.id)}function omitCurrentPageFilter(crumb){return!($scope.omitCurrentPage&&crumb.current)}$scope.$watchMulti(["[]omitPages","omitCurrentPage"],function getBreadcrumbs(){$scope.breadcrumbs=_routes2.default.getBreadcrumbs().filter(omitPagesFilter).filter(omitCurrentPageFilter)})}}})},function(module,exports){module.exports='<div\n  class="kuiLocalBreadcrumbs"\n  data-test-subj="breadcrumbs"\n  role="heading"\n  aria-level="1"\n>\n  <div\n    class="kuiLocalBreadcrumb"\n    ng-if="useLinks"\n    ng-repeat="breadcrumb in breadcrumbs"\n  >\n    <a\n      class="kuiLocalBreadcrumb__link"\n      href="{{ breadcrumb.href }}"\n      data-test-subj="lnkBreadcrumb{{$index}}"\n    >\n      {{ breadcrumb.display}}\n    </a>\n  </div>\n\n  <div\n    class="kuiLocalBreadcrumb"\n    ng-if="!useLinks"\n    ng-repeat="breadcrumb in breadcrumbs"\n  >\n    {{ breadcrumb.display }}\n  </div>\n\n  <div\n    class="kuiLocalBreadcrumb"\n    ng-if="pageTitle"\n    data-test-subj="breadcrumbPageTitle"\n  >\n    {{ pageTitle }}\n  </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _modules=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var NL_RE=/\n/g;var events="keydown keypress keyup change";_modules.uiModules.get("kibana").directive("elasticTextarea",function(){return{restrict:"A",link:function link($scope,$el){function resize(){$el.attr("rows",_lodash2.default.size($el.val().match(NL_RE))+1)}$el.on(events,resize);$scope.$evalAsync(resize);$scope.$on("$destroy",function(){$el.off(events,resize)})}}})},function(module,exports,__webpack_require__){"use strict";__webpack_require__(3218)},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(2);var _kbn_form_controller=__webpack_require__(3219);var _kbn_model_controller=__webpack_require__(3220);_modules.uiModules.get("kibana").config(function($provide){$provide.decorator("formDirective",_kbn_form_controller.decorateFormController);$provide.decorator("ngFormDirective",_kbn_form_controller.decorateFormController);$provide.decorator("ngModelDirective",_kbn_model_controller.decorateModelController)})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();exports.decorateFormController=decorateFormController;function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function decorateFormController($delegate,$injector){var _$delegate=_slicedToArray($delegate,1),directive=_$delegate[0];var FormController=directive.controller;var KbnFormController=function(_FormController){_inherits(KbnFormController,_FormController);function KbnFormController($scope,$element){var _ref;_classCallCheck(this,KbnFormController);for(var _len=arguments.length,superArgs=Array(_len>2?_len-2:0),_key=2;_key<_len;_key++)superArgs[_key-2]=arguments[_key];var _this=_possibleConstructorReturn(this,(_ref=KbnFormController.__proto__||Object.getPrototypeOf(KbnFormController)).call.apply(_ref,[this].concat(superArgs)));var onSubmit=function onSubmit(event){_this._markInvalidTouched(event)};$element.on("submit",onSubmit);$scope.$on("$destroy",function(){$element.off("submit",onSubmit)});return _this}_createClass(KbnFormController,[{key:"errorCount",value:function errorCount(){return this._getInvalidModels().length}},{key:"softErrorCount",value:function softErrorCount(){return this._getInvalidModels().filter(function(model){return model.$touched||model.$dirty}).length}},{key:"describeErrors",value:function describeErrors(){var count=this.softErrorCount();return count+" Error"+(1===count?"":"s")}},{key:"$setTouched",value:function $setTouched(){this._getInvalidModels().forEach(function(model){return model.$setTouched()})}},{key:"_markInvalidTouched",value:function _markInvalidTouched(event){if(this.errorCount()){event.preventDefault();event.stopImmediatePropagation();this.$setTouched()}}},{key:"_getInvalidModels",value:function _getInvalidModels(){return this.$$controls.reduce(function(acc,control){if("function"===typeof control._getInvalidModels)return[].concat(_toConsumableArray(acc),_toConsumableArray(control._getInvalidModels()));if(control.$invalid)return[].concat(_toConsumableArray(acc),[control]);return acc},[])}}]);return KbnFormController}(FormController);KbnFormController.$inject=["$scope","$element"];directive.controller=[].concat(_toConsumableArray($injector.annotate(KbnFormController)),_toConsumableArray($injector.annotate(FormController)),[function(){for(var _len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];return new(Function.prototype.bind.apply(KbnFormController,[null].concat(args)))}]);return $delegate}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();exports.decorateModelController=decorateModelController;function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function decorateModelController($delegate,$injector){var _$delegate=_slicedToArray($delegate,1),directive=_$delegate[0];var ModelController=directive.controller;var KbnModelController=function(_ModelController){_inherits(KbnModelController,_ModelController);function KbnModelController($scope,$element){var _ref;_classCallCheck(this,KbnModelController);for(var _len=arguments.length,superArgs=Array(_len>2?_len-2:0),_key=2;_key<_len;_key++)superArgs[_key-2]=arguments[_key];var _this=_possibleConstructorReturn(this,(_ref=KbnModelController.__proto__||Object.getPrototypeOf(KbnModelController)).call.apply(_ref,[this].concat(superArgs)));var onInvalid=function onInvalid(){_this.$setTouched()};$element.on("invalid",onInvalid);$scope.$on("$destroy",function(){$element.off("invalid",onInvalid)});return _this}return KbnModelController}(ModelController);KbnModelController.$inject=["$scope","$element"];directive.controller=[].concat(_toConsumableArray($injector.annotate(KbnModelController)),_toConsumableArray($injector.annotate(ModelController)),[function(){for(var _len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];return new(Function.prototype.bind.apply(KbnModelController,[null].concat(args)))}]);return $delegate}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.toggleFilterDisabled=exports.enableFilter=exports.disableFilter=void 0;var _disable_filter=__webpack_require__(1332);Object.defineProperty(exports,"disableFilter",{enumerable:true,get:function get(){return _disable_filter.disableFilter}});Object.defineProperty(exports,"enableFilter",{enumerable:true,get:function get(){return _disable_filter.enableFilter}});Object.defineProperty(exports,"toggleFilterDisabled",{enumerable:true,get:function get(){return _disable_filter.toggleFilterDisabled}});var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _filter_bar=__webpack_require__(3222);var _filter_bar2=_interopRequireDefault(_filter_bar);__webpack_require__(1333);__webpack_require__(3223);__webpack_require__(3248);var _filter_applied_and_unwrap=__webpack_require__(3250);var _map_and_flatten_filters=__webpack_require__(830);var _map_flatten_and_wrap_filters=__webpack_require__(3251);var _extract_time_filter=__webpack_require__(3252);var _filter_out_time_based_filter=__webpack_require__(3253);var _change_time_filter=__webpack_require__(3254);var _query_filter=__webpack_require__(274);var _compare_filters=__webpack_require__(607);var _modules=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");_module.directive("filterBar",function(Private,Promise,getAppState){var mapAndFlattenFilters=Private(_map_and_flatten_filters.FilterBarLibMapAndFlattenFiltersProvider);var mapFlattenAndWrapFilters=Private(_map_flatten_and_wrap_filters.FilterBarLibMapFlattenAndWrapFiltersProvider);var extractTimeFilter=Private(_extract_time_filter.FilterBarLibExtractTimeFilterProvider);var filterOutTimeBasedFilter=Private(_filter_out_time_based_filter.FilterBarLibFilterOutTimeBasedFilterProvider);var queryFilter=Private(_query_filter.FilterBarQueryFilterProvider);return{template:_filter_bar2.default,restrict:"E",scope:{indexPatterns:"=",tooltipContent:"="},link:function link($scope,$elem){["addFilters","toggleFilter","toggleAll","pinFilter","pinAll","invertFilter","invertAll","removeFilter","removeAll"].forEach(function(method){$scope[method]=queryFilter[method]});$scope.state=getAppState();$scope.showCollapseLink=function(){var pill=$elem.find("filter-pill");return pill[pill.length-1].offsetTop>10};$scope.filterNavToggle={isOpen:true,tooltipContent:"Collapse to hide filters"};$scope.toggleFilterShown=function(){var collapser=$elem.find(".filter-nav-link__collapser");var filterPanelPill=$elem.find(".filter-panel__pill");if($scope.filterNavToggle.isOpen){$scope.filterNavToggle.tooltipContent="Expand to show filters";collapser.attr("aria-expanded","false");filterPanelPill.attr("style","width: calc(100% - 80px)")}else{$scope.filterNavToggle.tooltipContent="Collapse to hide filters";collapser.attr("aria-expanded","true");filterPanelPill.attr("style","width: auto")}$scope.filterNavToggle.isOpen=!$scope.filterNavToggle.isOpen};$scope.applyFilters=function(filters){addAndInvertFilters((0,_filter_applied_and_unwrap.filterAppliedAndUnwrap)(filters));$scope.newFilters=[];$scope.changeTimeFilter&&$scope.changeTimeFilter.meta&&$scope.changeTimeFilter.meta.apply&&(0,_change_time_filter.changeTimeFilter)($scope.changeTimeFilter)};$scope.addFilter=function(){$scope.editingFilter={meta:{isNew:true}}};$scope.deleteFilter=function(filter){$scope.removeFilter(filter);filter===$scope.editingFilter&&$scope.cancelEdit()};$scope.editFilter=function(filter){$scope.editingFilter=filter};$scope.cancelEdit=function(){delete $scope.editingFilter};$scope.saveEdit=function(filter,newFilter,isPinned){filter.meta.isNew||$scope.removeFilter(filter);delete $scope.editingFilter;$scope.addFilters([newFilter],isPinned)};$scope.clearFilterBar=function(){$scope.newFilters=[];$scope.changeTimeFilter=null};$scope.$listen(queryFilter,"update",function(){updateFilters()});$scope.$watch(getAppState,function(appState){$scope.state=appState});$scope.$watch("state.$newFilters",function(filters){if(!filters)return;if(filters.length>1)return mapFlattenAndWrapFilters(filters).then(function(results){extractTimeFilter(results).then(function(filter){$scope.changeTimeFilter=filter});return results}).then(filterOutTimeBasedFilter).then(function(results){$scope.newFilters=results});1===filters.length&&Promise.resolve(filters).then(function(filters){extractTimeFilter(filters).then(function(timeFilter){timeFilter&&(0,_change_time_filter.changeTimeFilter)(timeFilter)});return filters}).then(filterOutTimeBasedFilter).then(addAndInvertFilters)});function addAndInvertFilters(filters){var existingFilters=queryFilter.getFilters();var inversionFilters=_lodash2.default.filter(existingFilters,function(existingFilter){var newMatchingFilter=_lodash2.default.find(filters,_lodash2.default.partial(_compare_filters.compareFilters,existingFilter));return newMatchingFilter&&newMatchingFilter.meta&&existingFilter.meta&&existingFilter.meta.negate!==newMatchingFilter.meta.negate});var newFilters=_lodash2.default.reject(filters,function(filter){return _lodash2.default.find(inversionFilters,_lodash2.default.partial(_compare_filters.compareFilters,filter))});_lodash2.default.forEach(inversionFilters,$scope.invertFilter);$scope.addFilters(newFilters)}function updateFilters(){var filters=queryFilter.getFilters();mapAndFlattenFilters(filters).then(function(results){$scope.filters=_lodash2.default.sortBy(results,function(filter){return!filter.meta.pinned});$scope.$emit("filterbar:updated")})}updateFilters()}}})},function(module,exports){module.exports='<section aria-label="Filters">\n  <div class="filter-bar-confirm" ng-show="newFilters.length">\n    <form ng-submit="applyFilters(newFilters)">\n    <ul class="list-unstyled">\n      <li>Apply these filters?</li>\n      <li ng-repeat="filter in newFilters track by $index" class="filter" ng-click="filter.meta.apply = !filter.meta.apply"><input type="checkbox" ng-checked="filter.meta.apply"/>\n        <span ng-if="filter.meta.negate">NOT </span> {{ filter.meta.key }}: {{ filter.meta.value }}\n      </li>\n      <li ng-if="changeTimeFilter" class="changeTimeFilter filter" ng-click="changeTimeFilter.meta.apply = !changeTimeFilter.meta.apply"><input type="checkbox" ng-checked="changeTimeFilter.meta.apply"/> <strong>Change time to:</strong> {{changeTimeFilter.meta.value}} </li>\n      <li>\n        <div class="kuiButtonGroup">\n          <button class="kuiButton kuiButton--primary kuiButton--small">\n            Apply Now\n          </button>\n\n          <button\n            class="kuiButton kuiButton--hollow"\n            ng-click="clearFilterBar();"\n          >\n            Cancel\n          </button>\n        </div>\n      </li>\n    </ul>\n    </form>\n  </div>\n\n  <div\n    class="filter-bar filter-panel"\n    ng-class="filterNavToggle.isOpen == true || !showCollapseLink() ? \'\' : \'filter-panel--close\'"\n  >\n    <div class="filter-panel__pill">\n      <filter-pill\n        ng-repeat="filter in filters track by $index"\n        filter="filter"\n        on-toggle-filter="toggleFilter"\n        on-pin-filter="pinFilter"\n        on-invert-filter="invertFilter"\n        on-delete-filter="deleteFilter"\n        on-edit-filter="editFilter"\n      ></filter-pill>\n    </div>\n\n    <div\n      class="filter-link"\n    >\n      <div class="filter-description small">\n        <button\n          ng-click="addFilter()"\n          class="euiLink euiLink--primary"\n          data-test-subj="addFilter"\n        >\n          Add a filter\n          <span class="fa fa-plus"></span>\n        </button>\n      </div>\n    </div>\n\n    <div\n      class="filter-link pull-right"\n      ng-class="filterNavToggle.isOpen == true || !showCollapseLink() ? \'\' : \'action-show\'"\n      ng-show="filters.length"\n    >\n      <div class="filter-description small">\n        <a\n          ng-click="showFilterActions = !showFilterActions"\n          kbn-accessible-click\n          aria-expanded="{{!!showFilterActions}}"\n          aria-controls="filterActionsAllContainer"\n        >\n          Actions\n          <span\n            class="fa"\n            ng-class="{\n              \'fa-caret-down\': showFilterActions,\n              \'fa-caret-right\': !showFilterActions\n            }"\n            data-test-subj="showFilterActions"\n          ></span>\n        </a>\n      </div>\n    </div>\n\n    <div\n      class="filter-nav-link__icon"\n      tooltip="{{ filterNavToggle.tooltipContent }}"\n      tooltip-placement="left"\n      tooltip-popup-delay="0"\n      tooltip-append-to-body="1"\n      ng-show="filters.length && showCollapseLink()"\n      aria-hidden="!filters.length || !showCollapseLink()"\n    >\n      <button\n        class="filter-nav-link__collapser"\n        ng-click="toggleFilterShown($event)"\n        aria-expanded="true"\n        aria-label="Toggle filterbar"\n      >\n        <span class="kuiIcon" ng-class="filterNavToggle.isOpen == true ? \'fa-chevron-circle-up\' : \'fa-chevron-circle-down\'"></span>\n      </button>\n    </div>\n\n    <div\n      class="filter-edit-container"\n      ng-if="editingFilter"\n    >\n      <filter-editor\n        filter="editingFilter"\n        index-patterns="indexPatterns"\n        on-delete="deleteFilter(editingFilter)"\n        on-save="saveEdit(filter, newFilter, isPinned)"\n        on-cancel="cancelEdit()"\n      ></filter-editor>\n    </div>\n  </div>\n\n  <div\n    class="filter-bar filter-bar-condensed"\n    ng-show="filters.length && showFilterActions"\n    id="filterActionsAllContainer"\n  >\n    <div class="filter-actions-all">\n      <div class="filter-link">\n        <div class="filter-description"><strong>All filters:</strong></div>\n      </div>\n        <div class="filter-link">\n          <div class="filter-description"><a ng-click="toggleAll(false)" kbn-accessible-click>Enable</a></div>\n        </div>\n      <div class="filter-link">\n        <div class="filter-description"><a ng-click="toggleAll(true)" kbn-accessible-click>Disable</a></div>\n      </div>\n      <div class="filter-link">\n        <div class="filter-description"><a ng-click="pinAll(true)" kbn-accessible-click>Pin</a></div>\n      </div>\n      <div class="filter-link">\n        <div class="filter-description"><a ng-click="pinAll(false)" kbn-accessible-click>Unpin</a></div>\n      </div>\n      <div class="filter-link">\n        <div class="filter-description"><a ng-click="invertAll()" kbn-accessible-click>Invert</a></div>\n      </div>\n      <div class="filter-link">\n        <div class="filter-description"><a ng-click="toggleAll()" kbn-accessible-click>Toggle</a></div>\n      </div>\n      <div class="filter-link">\n        <div class="filter-description"><a ng-click="removeAll()" data-test-subj="removeAllFilters" kbn-accessible-click>Remove</a></div>\n      </div>\n    </div>\n  </div>\n</section>\n'},function(module,exports,__webpack_require__){"use strict";__webpack_require__(3224)},function(module,exports,__webpack_require__){"use strict";var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _modules=__webpack_require__(2);var _compat=__webpack_require__(70);var _filter_operators=__webpack_require__(1334);var _filter_editor=__webpack_require__(3226);var _filter_editor2=_interopRequireDefault(_filter_editor);__webpack_require__(485);__webpack_require__(3227);__webpack_require__(3232);__webpack_require__(3236);__webpack_require__(3238);__webpack_require__(3247);var _filter_editor_utils=__webpack_require__(835);var _lib=__webpack_require__(1340);var filterBuilder=_interopRequireWildcard(_lib);var _key_map=__webpack_require__(603);function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);newObj.default=obj;return newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}var _module=_modules.uiModules.get("kibana");_module.directive("filterEditor",function($timeout,indexPatterns){return{restrict:"E",template:_filter_editor2.default,scope:{indexPatterns:"=",filter:"=",onDelete:"&",onCancel:"&",onSave:"&"},controllerAs:"filterEditor",bindToController:true,controller:(0,_compat.callAfterBindingsWorkaround)(function($scope,$element,config){var _this=this;var pinnedByDefault=config.get("filters:pinnedByDefault");this.init=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var defaultIndexPattern,filter;return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if((0,_filter_editor_utils.areIndexPatternsProvided)(_this.indexPatterns)){_context.next=5;break}_context.next=3;return indexPatterns.getDefault();case 3:defaultIndexPattern=_context.sent;defaultIndexPattern&&(_this.indexPatterns=[defaultIndexPattern]);case 5:filter=_this.filter;_this.alias=filter.meta.alias;_this.isEditingQueryDsl=false;_this.queryDsl=(0,_filter_editor_utils.getQueryDslFromFilter)(filter);filter.meta.isNew?_this.setFocus("field"):(0,_filter_editor_utils.getFieldFromFilter)(filter,indexPatterns).then(function(field){_this.setField(field);_this.setOperator((0,_filter_editor_utils.getOperatorFromFilter)(filter));_this.params=(0,_filter_editor_utils.getParamsFromFilter)(filter)});case 10:case"end":return _context.stop()}},_callee,_this)}));$scope.$watch(function(){return _this.filter},this.init);$scope.$watchCollection(function(){return _this.filter.meta},this.init);this.setQueryDsl=function(queryDsl){_this.queryDsl=queryDsl};this.setField=function(field){_this.field=field;_this.operator=null;_this.params={}};this.onFieldSelect=function(field){_this.setField(field);_this.setFocus("operator")};this.setOperator=function(operator){_this.operator=operator};this.onOperatorSelect=function(operator){_this.setOperator(operator);_this.setFocus("params")};this.setParams=function(params){_this.params=params};this.setFocus=function(name){$timeout(function(){return $scope.$broadcast("focus-"+name)})};this.toggleEditingQueryDsl=function(){_this.isEditingQueryDsl=!_this.isEditingQueryDsl};this.isQueryDslEditorVisible=function(){var _filter$meta=_this.filter.meta,type=_filter$meta.type,isNew=_filter$meta.isNew;return _this.isEditingQueryDsl||!isNew&&!_filter_operators.FILTER_OPERATOR_TYPES.includes(type)};this.isValid=function(){if(_this.isQueryDslEditorVisible())return _lodash2.default.isObject(_this.queryDsl);var field=_this.field,operator=_this.operator,params=_this.params;return(0,_filter_editor_utils.isFilterValid)({field:field,operator:operator,params:params})};this.save=function(){var filter=_this.filter,field=_this.field,operator=_this.operator,params=_this.params,alias=_this.alias;var newFilter=void 0;if(_this.isQueryDslEditorVisible()){var meta=_lodash2.default.pick(filter.meta,["negate","index"]);meta.index=meta.index||_this.indexPatterns[0].id;newFilter=Object.assign(_this.queryDsl,{meta:meta})}else{var indexPattern=field.indexPattern;newFilter=(0,_filter_editor_utils.buildFilter)({indexPattern:indexPattern,field:field,operator:operator,params:params,filterBuilder:filterBuilder})}newFilter.meta.disabled=filter.meta.disabled;newFilter.meta.alias=alias;var isPinned=(0,_filter_editor_utils.isFilterPinned)(filter,pinnedByDefault);return _this.onSave({filter:filter,newFilter:newFilter,isPinned:isPinned})};$element.on("keydown",function(event){"escape"===_key_map.keyMap[event.keyCode]&&$timeout(function(){return _this.onCancel()})})})}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.callAfterBindingsWorkaround=callAfterBindingsWorkaround;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var InitAfterBindingsWorkaround=exports.InitAfterBindingsWorkaround=function InitAfterBindingsWorkaround($injector,$attrs,$element,$scope,$transclude){var _this=this;_classCallCheck(this,InitAfterBindingsWorkaround);if(!this.initAfterBindings)throw new Error("When using inheritance you must move the logic in the constructor to the `initAfterBindings` method");this.$onInit=function(){$injector.invoke(_this.initAfterBindings,_this,{$attrs:$attrs,$element:$element,$scope:$scope,$transclude:$transclude})}};InitAfterBindingsWorkaround.$inject=["$injector","$attrs","$element","$scope","$transclude"];function callAfterBindingsWorkaround(constructor){return function InitAfterBindingsWrapper($injector,$attrs,$element,$scope,$transclude){var _this2=this;this.$onInit=function(){$injector.invoke(constructor,_this2,{$attrs:$attrs,$element:$element,$scope:$scope,$transclude:$transclude})}}}},function(module,exports){module.exports='<div class="filterEditor kuiModal">\n  <div class="kuiModalHeader">\n    <div class="kuiModalHeader__title">\n      <span ng-show="filterEditor.filter.meta.isNew">Add</span>\n      <span ng-hide="filterEditor.filter.meta.isNew">Edit</span>\n      filter\n    </div>\n\n    <button\n      data-test-subj="filterEditorModalCloseButton"\n      class="kuiModalHeaderCloseButton kuiIcon fa-times"\n      ng-click="filterEditor.onCancel()"\n      aria-label="Close filter popover"\n    ></button>\n  </div>\n\n  <div class="kuiModalBody">\n    \x3c!-- Filter definition --\x3e\n    <div class="kuiVerticalRhythm">\n      <div class="kuiVerticalRhythmSmall filterEditor__labelBar">\n        <label class="kuiLabel">\n          Filter\n        </label>\n\n        <div>\n          <a\n            class="kuiLink"\n            ng-click="filterEditor.toggleEditingQueryDsl()"\n            kbn-accessible-click\n          >\n            <span ng-if="filterEditor.isEditingQueryDsl">\n              Search filter values\n            </span>\n\n            <span ng-if="!filterEditor.isEditingQueryDsl">\n              Edit Query DSL\n            </span>\n          </a>\n        </div>\n      </div>\n\n      \x3c!-- Filter dropdowns --\x3e\n      <div\n        class="kuiFieldGroup kuiVerticalRhythmSmall kuiFieldGroup--alignTop"\n        ng-show="!filterEditor.isQueryDslEditorVisible()"\n      >\n        <div class="kuiFieldGroupSection filterEditor__wideField">\n          <filter-field-select\n            data-test-subj="filterfieldSuggestionList"\n            index-patterns="filterEditor.indexPatterns"\n            field="filterEditor.field"\n            on-select="filterEditor.onFieldSelect(field)"\n          ></filter-field-select>\n        </div>\n\n        <div class="kuiFieldGroupSection">\n          <filter-operator-select\n            data-test-subj="filterOperatorList"\n            ng-if="filterEditor.field"\n            field="filterEditor.field"\n            operator="filterEditor.operator"\n            on-select="filterEditor.onOperatorSelect(operator)"\n          ></filter-operator-select>\n        </div>\n\n        <div class="kuiFieldGroupSection kuiFieldGroupSection--wide filterEditor__wideField filterEditorParamsInput">\n          <filter-params-editor\n            data-test-subj="filterParams"\n            ng-if="filterEditor.field && filterEditor.operator"\n            field="filterEditor.field"\n            operator="filterEditor.operator"\n            params="filterEditor.params"\n          ></filter-params-editor>\n        </div>\n      </div>\n\n      \x3c!-- DSL editor --\x3e\n      <div\n        class="kuiVerticalRhythmSmall"\n        ng-show="filterEditor.isQueryDslEditorVisible()"\n      >\n        <filter-query-dsl-editor\n          class="kuiVerticalRhythmSmall"\n          filter="filterEditor.filter"\n          on-change="filterEditor.setQueryDsl(queryDsl)"\n          is-visible="filterEditor.isQueryDslEditorVisible()"\n        ></filter-query-dsl-editor>\n\n        <p class="kuiText kuiVerticalRhythmSmall">\n          Filters are built using the <a class="kuiLink" target="_blank" rel="noopener noreferrer" documentation-href="query.queryDsl">Elasticsearch Query DSL</a>.\n        </p>\n      </div>\n    </div>\n\n    \x3c!-- Label --\x3e\n    <div class="kuiVerticalRhythm">\n      <div class="kuiVerticalRhythmSmall">\n        <label\n          class="kuiLabel"\n          for="filterEditorLabelInput"\n        >\n          Label\n        </label>\n      </div>\n\n      <input\n        class="kuiTextInput kuiVerticalRhythmSmall"\n        placeholder="Optional"\n        type="text"\n        ng-model="filterEditor.alias"\n        id="filterEditorLabelInput"\n      />\n    </div>\n  </div>\n\n  \x3c!-- Footer --\x3e\n  <div class="kuiModalFooter kuiBar">\n    <div class="kuiBarSection" ng-hide="filterEditor.filter.meta.isNew">\n      <button\n        class="kuiButton kuiButton--danger"\n        ng-click="filterEditor.onDelete()"\n        aria-label="Delete filter"\n      >\n        <span\n          class="kuiIcon fa-trash"\n          aria-hidden="true"\n        ></span>\n      </button>\n    </div>\n\n    <div class="kuiBarSection">\n      <button\n        class="kuiButton kuiButton--basic"\n        ng-click="filterEditor.onCancel()"\n      >\n        Cancel\n      </button>\n      <button\n        class="kuiButton kuiButton--primary"\n        ng-disabled="!filterEditor.isValid()"\n        ng-click="filterEditor.save()"\n        data-test-subj="saveFilter"\n      >\n        Save\n      </button>\n    </div>\n  </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";__webpack_require__(118);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _modules=__webpack_require__(2);var _filter_query_dsl_editor=__webpack_require__(3230);var _filter_query_dsl_editor2=_interopRequireDefault(_filter_query_dsl_editor);__webpack_require__(834);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");_module.directive("filterQueryDslEditor",function(){return{restrict:"E",template:_filter_query_dsl_editor2.default,scope:{isVisible:"=",filter:"=",onChange:"&"},link:{pre:function pre($scope){var aceEditor=void 0;$scope.queryDsl=_lodash2.default.omit($scope.filter,["meta","$state"]);$scope.aceLoaded=function(editor){aceEditor=editor;editor.$blockScrolling=Infinity;var session=editor.getSession();session.setTabSize(2);session.setUseSoftTabs(true)};$scope.$watch("isVisible",function(isVisible){isVisible&&aceEditor&&aceEditor.renderer.updateFull()})}}}})},,,function(module,exports){module.exports='<div\n  json-input\n  require-keys="true"\n  kbn-ui-ace-keyboard-mode\n  ui-ace="{\n    mode: \'json\',\n    onLoad: aceLoaded\n  }"\n  ng-model="queryDsl"\n  ng-change="onChange({\n    queryDsl: queryDsl\n  })"\n></div>\n'},function(module,exports){},function(module,exports,__webpack_require__){"use strict";__webpack_require__(417);var _modules=__webpack_require__(2);var _filter_editor_utils=__webpack_require__(835);var _filter_field_select=__webpack_require__(3235);var _filter_field_select2=_interopRequireDefault(_filter_field_select);__webpack_require__(487);__webpack_require__(611);__webpack_require__(488);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");_module.directive("filterFieldSelect",function(){return{restrict:"E",template:_filter_field_select2.default,scope:{indexPatterns:"=",field:"=",onSelect:"&"},link:function link($scope){$scope.$watch("indexPatterns",function(indexPatterns){$scope.fieldOptions=(0,_filter_editor_utils.getFieldOptions)(indexPatterns)});$scope.getFieldIndexPattern=function(field){return field.indexPattern.title};$scope.increaseLimit=function(){return $scope.limit+=50};$scope.resetLimit=function(){return $scope.limit=50};$scope.resetLimit()}}})},,,function(module,exports){module.exports='<ui-select\n  ng-model="field"\n  ui-select-focus-on="focus-field"\n  on-select="onSelect({ field: field })"\n  uis-open-close="resetLimit()"\n>\n  <ui-select-match placeholder="Fields...">\n    <span\n      class="uiSelectMatch--ellipsis"\n      tooltip="{{$select.selected.name}}"\n    >\n      {{$select.selected.name}}\n    </span>\n  </ui-select-match>\n  <ui-select-choices\n    class="uiSelectChoices--autoWidth"\n    repeat="field in fieldOptions\n      | filter:{ name: $select.search }\n      | orderBy:\'name\'\n      | sortPrefixFirst:$select.search:\'name\'\n      | limitTo: limit"\n    group-by="getFieldIndexPattern"\n    kbn-scroll-bottom="increaseLimit()"\n  >\n    <div ng-bind-html="field.name | highlight: $select.search"></div>\n  </ui-select-choices>\n</ui-select>\n'},function(module,exports,__webpack_require__){"use strict";__webpack_require__(417);var _modules=__webpack_require__(2);var _filter_editor_utils=__webpack_require__(835);var _filter_operator_select=__webpack_require__(3237);var _filter_operator_select2=_interopRequireDefault(_filter_operator_select);__webpack_require__(487);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");_module.directive("filterOperatorSelect",function(){return{restrict:"E",template:_filter_operator_select2.default,scope:{field:"=",operator:"=",onSelect:"&"},link:function link($scope){$scope.$watch("field",function(field){$scope.operatorOptions=(0,_filter_editor_utils.getOperatorOptions)(field)})}}})},function(module,exports){module.exports='<ui-select\n  ng-model="operator"\n  ui-select-focus-on="focus-operator"\n  on-select="onSelect({ operator: operator })"\n>\n  <ui-select-match placeholder="Operators...">\n    {{$select.selected.name}}\n  </ui-select-match>\n  <ui-select-choices repeat="operator in operatorOptions | filter:{ name: $select.search }">\n    <div ng-bind-html="operator.name | highlight: $select.search"></div>\n  </ui-select-choices>\n</ui-select>\n'},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(2);var _filter_params_editor=__webpack_require__(3239);var _filter_params_editor2=_interopRequireDefault(_filter_params_editor);__webpack_require__(3240);__webpack_require__(3243);__webpack_require__(3245);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");_module.directive("filterParamsEditor",function(){return{restrict:"E",template:_filter_params_editor2.default,scope:{field:"=",operator:"=",params:"="}}})},function(module,exports){module.exports='<ng-switch on="operator.type">\n  <filter-params-phrase-editor\n    ng-switch-when="phrase"\n    field="field"\n    params="params"\n  ></filter-params-phrase-editor>\n\n  <filter-params-phrases-editor\n    ng-switch-when="phrases"\n    field="field"\n    params="params"\n  ></filter-params-phrases-editor>\n\n  <filter-params-range-editor\n    ng-switch-when="range"\n    field="field"\n    params="params"\n  ></filter-params-range-editor>\n</ng-switch>\n'},function(module,exports,__webpack_require__){"use strict";__webpack_require__(417);var _modules=__webpack_require__(2);var _filter_params_phrase_editor=__webpack_require__(3241);var _filter_params_phrase_editor2=_interopRequireDefault(_filter_params_phrase_editor);var _filter_params_phrase_controller=__webpack_require__(1337);__webpack_require__(1338);__webpack_require__(485);__webpack_require__(487);__webpack_require__(836);__webpack_require__(488);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");_module.directive("filterParamsPhraseEditor",function(){return{restrict:"E",template:_filter_params_phrase_editor2.default,scope:{field:"=",params:"="},controllerAs:"filterParamsPhraseEditor",controller:_filter_params_phrase_controller.filterParamsPhraseController}})},function(module,exports){module.exports='<ui-select\n  ng-if="filterParamsPhraseEditor.shouldSuggestValues && field.aggregatable && field.type === \'string\'"\n  ng-model="params.phrase"\n  ui-select-focus-on="focus-params"\n  spinner-enabled="true"\n  spinner-class="kuiIcon kuiIcon--basic fa-spinner fa-spin"\n>\n  <ui-select-match placeholder="Values...">\n    <span\n      class="uiSelectMatch--ellipsis"\n      tooltip="{{$select.selected}}"\n    >\n      {{$select.selected}}\n    </span>\n  </ui-select-match>\n  <ui-select-choices\n    class="uiSelectChoices--autoWidth"\n    repeat="value in filterParamsPhraseEditor.compactUnion([$select.search, $select.selected], valueSuggestions) | filter:$select.search | sortPrefixFirst:$select.search"\n    refresh="filterParamsPhraseEditor.refreshValueSuggestions($select.search)"\n    refresh-delay="500"\n  >\n    <div ng-bind="value"></div>\n  </ui-select-choices>\n</ui-select>\n\n<filter-params-input-type\n  ng-if="!(filterParamsPhraseEditor.shouldSuggestValues && field.aggregatable && field.type === \'string\')"\n  placeholder="Value..."\n  type="field.type"\n  value="params.phrase"\n  on-change="params.phrase = value"\n  focus-on="focus-params"\n></filter-params-input-type>\n\n<small>\n  <a\n    ng-if="field.type === \'date\'"\n    class="kuiLink"\n    documentation-href="date.dateMath"\n    target="_blank"\n    rel="noopener noreferrer"\n  >\n    Accepted date formats\n  </a>\n</small>\n'},function(module,exports){module.exports='<div\n  ng-switch="type"\n  class="kuiFieldGroupSection kuiFieldGroupSection--wide"\n>\n  <input\n    ng-switch-when="string"\n    type="text"\n    placeholder="{{placeholder}}"\n    class="kuiTextInput"\n    ng-model="value"\n    ng-change="onChange({ value: value })"\n  />\n  <input\n    ng-switch-when="number"\n    string-to-number\n    type="number"\n    placeholder="{{placeholder}}"\n    step="any"\n    class="kuiTextInput"\n    ng-model="value"\n    ng-change="onChange({ value: value })"\n  />\n  <input\n    ng-switch-when="date"\n    type="text"\n    placeholder="{{placeholder}}"\n    validate-date-math\n    class="kuiTextInput"\n    ng-model="value"\n    ng-change="onChange({ value: value })"\n  />\n  <input\n    ng-switch-when="ip"\n    type="text"\n    placeholder="{{placeholder}}"\n    validate-ip\n    class="kuiTextInput"\n    ng-model="value"\n    ng-change="onChange({ value: value })"\n  />\n  <div ng-switch-when="boolean">\n    <select\n      class="kuiSelect"\n      ng-model="value"\n      ng-options="option for option in boolOptions"\n      ng-change="onChange({ value: value })"\n      ng-init="setDefaultBool()"\n    ></select>\n  </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";__webpack_require__(417);var _modules=__webpack_require__(2);var _filter_params_phrases_editor=__webpack_require__(3244);var _filter_params_phrases_editor2=_interopRequireDefault(_filter_params_phrases_editor);var _filter_params_phrase_controller=__webpack_require__(1337);__webpack_require__(487);__webpack_require__(488);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");_module.directive("filterParamsPhrasesEditor",function(){return{restrict:"E",template:_filter_params_phrases_editor2.default,scope:{field:"=",params:"="},controllerAs:"filterParamsPhrasesEditor",controller:_filter_params_phrase_controller.filterParamsPhraseController}})},function(module,exports){module.exports='<ui-select\n  ng-model="params.phrases"\n  multiple\n  ui-select-focus-on="focus-params"\n  spinner-enabled="true"\n  spinner-class="kuiIcon kuiIcon--basic fa-spinner fa-spin"\n>\n  <ui-select-match\n    placeholder="Values..."\n    class="uiSelectMatch--restrictToParent"\n  >\n    <span\n      data-test-subj="filterEditorPhrases"\n      class="uiSelectMatch--pillWithTooltip"\n      tooltip="{{$item}}"\n    >\n      {{$item}}\n    </span>\n  </ui-select-match>\n  <ui-select-choices\n    class="uiSelectChoices--autoWidth"\n    repeat="value in filterParamsPhrasesEditor.compactUnion([$select.search], valueSuggestions) | filter:$select.search | sortPrefixFirst:$select.search"\n    refresh="filterParamsPhrasesEditor.refreshValueSuggestions($select.search)"\n    refresh-delay="500"\n  >\n    <div ng-bind-html="value | highlight: $select.search"></div>\n  </ui-select-choices>\n</ui-select>\n'},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(2);var _filter_params_range_editor=__webpack_require__(3246);var _filter_params_range_editor2=_interopRequireDefault(_filter_params_range_editor);__webpack_require__(1338);__webpack_require__(485);__webpack_require__(836);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");_module.directive("filterParamsRangeEditor",function(){return{restrict:"E",template:_filter_params_range_editor2.default,scope:{field:"=",params:"="}}})},function(module,exports){module.exports='<div class="kuiVerticalRhythm">\n  <filter-params-input-type\n    placeholder="From..."\n    type="field.type"\n    value="params.range.from"\n    on-change="params.range.from = value"\n    focus-on="focus-params"\n  ></filter-params-input-type>\n</div>\n\n<div class="kuiVerticalRhythm">\n  <filter-params-input-type\n    placeholder="To..."\n    type="field.type"\n    value="params.range.to"\n    on-change="params.range.to = value"\n  ></filter-params-input-type>\n</div>\n\n<small>\n  <a\n    ng-if="field.type === \'date\'"\n    class="kuiLink"\n    documentation-href="date.dateMath"\n    target="_blank"\n    rel="noopener noreferrer"\n  >\n    Accepted date formats\n  </a>\n</small>\n'},function(module,exports){},function(module,exports,__webpack_require__){"use strict";var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _filter_pill=__webpack_require__(3249);var _filter_pill2=_interopRequireDefault(_filter_pill);var _modules=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");_module.directive("filterPill",function(){return{template:_filter_pill2.default,restrict:"E",scope:{filter:"=",onToggleFilter:"=",onPinFilter:"=",onInvertFilter:"=",onDeleteFilter:"=",onEditFilter:"="},bindToController:true,controllerAs:"pill",controller:function filterPillController(){var _this=this;this.activateActions=function(){_this.areActionsActivated=true};this.deactivateActions=function(){_this.areActionsActivated=false};this.isControlledByPanel=function(){return _lodash2.default.has(_this.filter,"meta.controlledBy")}}}})},function(module,exports){module.exports='<div\n  class="filter"\n  ng-class="{ negate: pill.filter.meta.negate, disabled: pill.filter.meta.disabled }"\n  data-test-subj="filter filter-{{ pill.filter.meta.disabled ? \'disabled\' : \'enabled\' }} {{ pill.filter.meta.key ? \'filter-key-\' + pill.filter.meta.key : \'\' }} {{ pill.filter.meta.value ? \'filter-value-\' + pill.filter.meta.value : \'\' }}"\n  ng-mouseover="pill.activateActions()"\n  ng-mouseleave="pill.deactivateActions()"\n>\n\n  <div\n    class="filter-description"\n    ng-class="{\'filter-description-deactivated\': pill.areActionsActivated}"\n    tabindex="0"\n    aria-disabled="{{pill.filter.meta.disabled}}"\n  >\n    <span ng-if="pill.filter.$state.store == \'globalState\'"><span class="fa fa-fw fa-thumb-tack pinned"></span></span>\n    <span ng-if="pill.filter.meta.negate">NOT</span>\n    <span ng-if="pill.filter.meta.alias">{{ pill.filter.meta.alias }}</span>\n    <span ng-if="!pill.filter.meta.alias">{{ pill.filter.meta.key }}:</span>\n    <span ng-if="!pill.filter.meta.alias">"{{ pill.filter.meta.value }}"</span>\n  </div>\n\n  <div class="filter-actions" ng-class="{\'filter-actions-activated\': pill.areActionsActivated}">\n    <button\n      class="action filter-toggle"\n      ng-click="pill.onToggleFilter(pill.filter)"\n      data-test-subj="disableFilter-{{ pill.filter.meta.key }}"\n      ng-focus="pill.activateActions()"\n      ng-blur="pill.deactivateActions()"\n      aria-label="{{pill.filter.meta.disabled ? \'Enable filter\' : \'Disable filter\'}}"\n      tooltip="{{pill.filter.meta.disabled ? \'Enable filter\' : \'Disable filter\'}}"\n      tooltip-append-to-body="true"\n    >\n      <span ng-show="pill.filter.meta.disabled" class="fa fa-fw fa-square-o disabled"></span>\n      <span ng-hide="pill.filter.meta.disabled" class="fa fa-fw fa-check-square-o enabled"></span>\n    </button>\n\n    <button\n      class="action filter-pin"\n      ng-click="pill.onPinFilter(pill.filter)"\n      data-test-subj="pinFilter-{{ pill.filter.meta.key }}"\n      ng-focus="pill.activateActions()"\n      ng-blur="pill.deactivateActions()"\n      aria-label="{{pill.filter.$state.store == \'globalState\' ? \'Unpin filter\' : \'Pin filter\'}}"\n      tooltip="{{pill.filter.$state.store == \'globalState\' ? \'Unpin filter\' : \'Pin filter\'}}"\n      tooltip-append-to-body="true"\n    >\n      <span ng-show="pill.filter.$state.store == \'globalState\'" class="fa fa-fw fa-thumb-tack pinned"></span>\n      <span ng-hide="pill.filter.$state.store == \'globalState\'" class="fa fa-fw fa-thumb-tack fa-rotate-270 unpinned"></span>\n    </button>\n\n    <button\n      class="action filter-invert"\n      ng-click="pill.onInvertFilter(pill.filter)"\n      data-test-subj="invertFilter-{{ pill.filter.meta.key }}"\n      ng-focus="pill.activateActions()"\n      ng-blur="pill.deactivateActions()"\n      aria-label="{{pill.filter.meta.negate ? \'Include matches\' : \'Exclude matches\'}}"\n      tooltip="{{pill.filter.meta.negate ? \'Include matches\' : \'Exclude matches\'}}"\n      tooltip-append-to-body="true"\n    >\n      <span ng-show="pill.filter.meta.negate" class="fa fa-fw fa-search-plus negative"></span>\n      <span ng-hide="pill.filter.meta.negate" class="fa fa-fw fa-search-minus positive"></span>\n    </button>\n\n    <button\n      class="action filter-remove"\n      ng-click="pill.onDeleteFilter(pill.filter)"\n      ng-focus="pill.activateActions()"\n      ng-blur="pill.deactivateActions()"\n      aria-label="Remove filter"\n      tooltip="Remove filter"\n      tooltip-append-to-body="true"\n    >\n      <span class="fa fa-fw fa-trash" data-test-subj="removeFilter-{{ pill.filter.meta.key }}"></span>\n    </button>\n\n    <button\n      class="action filter-edit"\n      ng-click="pill.onEditFilter(pill.filter)"\n      ng-disabled="pill.isControlledByPanel()"\n      ng-focus="pill.activateActions()"\n      ng-blur="pill.deactivateActions()"\n      aria-label="Edit filter"\n      tooltip="Edit filter"\n      tooltip-append-to-body="true"\n      data-test-subj="editFilter"\n    >\n      <span\n        ng-show="pill.isControlledByPanel()"\n        tooltip="Edit disabled because filter is controlled by Kibana"\n        class="fa fa-fw fa-edit fa-disabled"\n      ></span>\n      <span ng-hide="pill.isControlledByPanel()" class="fa fa-fw fa-edit"></span>\n    </button>\n\n  </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.filterAppliedAndUnwrap=filterAppliedAndUnwrap;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function filterAppliedAndUnwrap(filters){return _lodash2.default.filter(filters,"meta.apply")}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterBarLibMapFlattenAndWrapFiltersProvider=FilterBarLibMapFlattenAndWrapFiltersProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _map_and_flatten_filters=__webpack_require__(830);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function FilterBarLibMapFlattenAndWrapFiltersProvider(Private){var mapAndFlattenFilters=Private(_map_and_flatten_filters.FilterBarLibMapAndFlattenFiltersProvider);return function(filters){return mapAndFlattenFilters(filters).then(function(filters){return _lodash2.default.map(filters,function(filter){filter.meta=filter.meta||{};filter.meta.apply=true;return filter})})}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterBarLibExtractTimeFilterProvider=FilterBarLibExtractTimeFilterProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function FilterBarLibExtractTimeFilterProvider(indexPatterns,Promise){return Promise.method(function(filters){var id=_lodash2.default.get(filters,"[0].meta.index");if(null==id)return;return indexPatterns.get(id).then(function(indexPattern){var filter=_lodash2.default.find(filters,function(obj){var key=_lodash2.default.keys(obj.range)[0];return key===indexPattern.timeFieldName});if(filter&&filter.range)return filter})})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterBarLibFilterOutTimeBasedFilterProvider=FilterBarLibFilterOutTimeBasedFilterProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function FilterBarLibFilterOutTimeBasedFilterProvider(indexPatterns,Promise){return Promise.method(function(filters){var id=_lodash2.default.get(filters,"[0].meta.index");if(null==id)return;return indexPatterns.get(id).then(function(indexPattern){return _lodash2.default.filter(filters,function(filter){return!(filter.range&&filter.range[indexPattern.timeFieldName])})})})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.changeTimeFilter=changeTimeFilter;var _moment=__webpack_require__(10);var _moment2=_interopRequireDefault(_moment);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _timefilter=__webpack_require__(14);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function changeTimeFilter(filter){var key=_lodash2.default.keys(filter.range)[0];var values=filter.range[key];_timefilter.timefilter.setTime({from:(0,_moment2.default)(values.gt||values.gte),to:(0,_moment2.default)(values.lt||values.lte),mode:"absolute"})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterManagerProvider=FilterManagerProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _query_filter=__webpack_require__(274);var _phrase=__webpack_require__(363);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function FilterManagerProvider(Private){var queryFilter=Private(_query_filter.FilterBarQueryFilterProvider);var filterManager={};filterManager.generate=function(field,values,operation,index){values=Array.isArray(values)?values:[values];var fieldName=_lodash2.default.isObject(field)?field.name:field;var filters=_lodash2.default.flatten([queryFilter.getAppFilters()]);var newFilters=[];var negate="-"===operation;_lodash2.default.each(values,function(value){var filter=void 0;var existing=_lodash2.default.find(filters,function(filter){if(!filter)return;if("_exists_"===fieldName&&filter.exists)return filter.exists.field===value;if(_lodash2.default.has(filter,"query.match"))return filter.query.match[fieldName]&&filter.query.match[fieldName].query===value;if(filter.script)return filter.meta.field===fieldName&&filter.script.script.params.value===value});if(existing){existing.meta.disabled=false;existing.meta.negate!==negate&&queryFilter.invertFilter(existing);return}switch(fieldName){case"_exists_":filter={meta:{negate:negate,index:index},exists:{field:value}};break;default:if(field.scripted)filter={meta:{negate:negate,index:index,field:fieldName},script:(0,_phrase.getPhraseScript)(field,value)};else{filter={meta:{negate:negate,index:index},query:{match:{}}};filter.query.match[fieldName]={query:value,type:"phrase"}}}newFilters.push(filter)});return newFilters};filterManager.add=function(field,values,operation,index){var newFilters=this.generate(field,values,operation,index);return queryFilter.addFilters(newFilters)};return filterManager}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(3257)},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(2);_modules.uiModules.get("kibana").run(function($rootScope){$rootScope.constructor.prototype.$listen=function(emitter,eventName,handler){emitter.on(eventName,handler);this.$on("$destroy",function(){emitter.off(eventName,handler)})};$rootScope.constructor.prototype.$listenAndDigestAsync=function(emitter,eventName,handler){var _this=this;var evalAsyncWrappedHandler=function evalAsyncWrappedHandler(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];_this.$evalAsync(function(){return handler(args)})};this.$listen(emitter,eventName,evalAsyncWrappedHandler)}})},function(module,exports,__webpack_require__){"use strict";__webpack_require__(3259)},function(module,exports,__webpack_require__){"use strict";var _to_user=__webpack_require__(3260);var _from_user=__webpack_require__(3261);var _modules=__webpack_require__(2);_modules.uiModules.get("kibana").directive("parseQuery",function(Private){var fromUser=Private(_from_user.ParseQueryLibFromUserProvider);return{restrict:"A",require:"ngModel",scope:{ngModel:"="},link:function link($scope,elem,attr,ngModel){var init=function init(){$scope.ngModel=fromUser($scope.ngModel)};ngModel.$parsers.push(fromUser);ngModel.$formatters.push(_to_user.toUser);init()}}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.toUser=toUser;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _angular=__webpack_require__(16);var _angular2=_interopRequireDefault(_angular);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function toUser(text){if(null==text)return"";if(_lodash2.default.isObject(text)){if(text.match_all)return"";if(text.query_string)return toUser(text.query_string.query);return _angular2.default.toJson(text)}return""+text}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ParseQueryLibFromUserProvider=ParseQueryLibFromUserProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ParseQueryLibFromUserProvider(){return function(userInput){var matchAll="";if(_lodash2.default.isObject(userInput)){if(!Object.keys(userInput).length)return matchAll;return userInput}userInput=(userInput||"").trim();if(0===userInput.length)return matchAll;if("{"!==userInput[0])return userInput;try{return JSON.parse(userInput)}catch(e){return userInput}}}},function(module,exports){module.exports='<confirm-modal\n  data-test-subj="confirmModal"\n  on-cancel="onCancel"\n  on-confirm="onConfirm"\n  confirm-button-text="confirmButtonText"\n  cancel-button-text="cancelButtonText"\n  children="message"\n  data-title="title"\n  default-focused-button="defaultFocusedButton"\n></confirm-modal>\n'},function(module,exports){module.exports='<div class="euiOverlayMask" data-test-subj="modalOverlay"></div>\n'},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(2);__webpack_require__(1341);var _module=_modules.uiModules.get("kibana");_module.factory("confirmModalPromise",function(Promise,confirmModal){return function(message,customOptions){return new Promise(function(resolve,reject){var defaultOptions={onConfirm:resolve,onCancel:reject};var confirmOptions=Object.assign(defaultOptions,customOptions);confirmModal(message,confirmOptions)})}})},function(module,exports,__webpack_require__){"use strict";__webpack_require__(3266)},function(module,exports,__webpack_require__){"use strict";var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _jquery=__webpack_require__(13);var _jquery2=_interopRequireDefault(_jquery);__webpack_require__(474);var _modules=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var $style=(0,_jquery2.default)("<style>").appendTo("head").attr("id","style-compile");_modules.uiModules.get("kibana").run(function($rootScope,$compile,config){var truncateGradientHeight=15;var template=_lodash2.default.template(__webpack_require__(3267));var locals={};$rootScope.$watch(function(){return config.get("truncate:maxHeight")},function(maxHeight){if(maxHeight>0){locals.truncateMaxHeight=maxHeight+"px !important";locals.truncateGradientTop=maxHeight-truncateGradientHeight+"px"}else{locals.truncateMaxHeight="none";locals.truncateGradientTop="-"+truncateGradientHeight+"px"}$style.html(template(locals))})})},function(module,exports){module.exports=".truncate-by-height {\n  max-height: <%= truncateMaxHeight %>;\n  display: inline-block;\n}\n.truncate-by-height:before {\n  top: <%= truncateGradientTop %>;\n}\n"},function(module,exports,__webpack_require__){"use strict";var _timepicker=__webpack_require__(3269);var _timepicker2=_interopRequireDefault(_timepicker);__webpack_require__(3270);__webpack_require__(3273);__webpack_require__(3276);__webpack_require__(3279);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _relative_options=__webpack_require__(839);var _parse_relative_parts=__webpack_require__(3282);var _datemath=__webpack_require__(83);var _datemath2=_interopRequireDefault(_datemath);var _moment=__webpack_require__(10);var _moment2=_interopRequireDefault(_moment);__webpack_require__(3283);__webpack_require__(1345);__webpack_require__(840);__webpack_require__(3284);__webpack_require__(3285);var _modules=__webpack_require__(2);var _modes=__webpack_require__(1269);var _time_units=__webpack_require__(1344);var _pretty_interval=__webpack_require__(1346);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("ui/timepicker");_module.directive("kbnTimepicker",function(refreshIntervals){return{restrict:"E",scope:{from:"=",to:"=",mode:"=",interval:"=",activeTab:"=",onFilterSelect:"&",onIntervalSelect:"&"},template:_timepicker2.default,controller:function controller($scope){$scope.format="MMMM Do YYYY, HH:mm:ss.SSS";$scope.modes=Object.values(_modes.TIME_MODES);$scope.activeTab=$scope.activeTab||"filter";_lodash2.default.isUndefined($scope.mode)&&($scope.mode=_modes.TIME_MODES.QUICK);$scope.refreshLists=(0,_lodash2.default)(refreshIntervals).groupBy("section").values().value();$scope.relative={from:{count:1,unit:"m",preview:void 0,round:false},to:{count:0,unit:"s",preview:void 0,round:false}};$scope.absolute={from:(0,_moment2.default)(),to:(0,_moment2.default)()};$scope.units=_time_units.timeUnits;$scope.relativeOptions=_relative_options.relativeOptions;$scope.$watch("from",function(date){_moment2.default.isMoment(date)&&$scope.mode===_modes.TIME_MODES.ABSOLUTE&&($scope.absolute.from=date)});$scope.$watch("to",function(date){_moment2.default.isMoment(date)&&$scope.mode===_modes.TIME_MODES.ABSOLUTE&&($scope.absolute.to=date)});$scope.$watch("absolute.from",function(newDate){if(!newDate)return;_lodash2.default.set($scope,"browserAbsolute.from",new Date(newDate.year(),newDate.month(),newDate.date()))});$scope.$watch("absolute.to",function(newDate){if(!newDate)return;_lodash2.default.set($scope,"browserAbsolute.to",new Date(newDate.year(),newDate.month(),newDate.date()))});$scope.pickFromDate=function(date){if(!date)return _lodash2.default.get($scope,"browserAbsolute.from");var defaultTimeZoneDate=(0,_moment2.default)({year:date.getFullYear(),month:date.getMonth(),day:date.getDate(),hour:0,minute:0,second:0,millisecond:0});return $scope.absolute.from=defaultTimeZoneDate};$scope.pickToDate=function(date){if(!date)return _lodash2.default.get($scope,"browserAbsolute.to");var defaultTimeZoneDate=(0,_moment2.default)({year:date.getFullYear(),month:date.getMonth(),day:date.getDate(),hour:23,minute:59,second:59,millisecond:999});return $scope.absolute.to=defaultTimeZoneDate};$scope.setMode=function(thisMode){switch(thisMode){case _modes.TIME_MODES.QUICK:case _modes.TIME_MODES.RECENT:break;case _modes.TIME_MODES.RELATIVE:$scope.relative=(0,_parse_relative_parts.parseRelativeParts)($scope.from,$scope.to);$scope.formatRelative("from");$scope.formatRelative("to");break;case _modes.TIME_MODES.ABSOLUTE:$scope.absolute.from=_datemath2.default.parse($scope.from||(0,_moment2.default)().subtract(15,"minutes"));$scope.absolute.to=_datemath2.default.parse($scope.to||(0,_moment2.default)(),{roundUp:true})}$scope.mode=thisMode};$scope.setQuick=function(from,to){$scope.onFilterSelect({from:from,to:to,mode:_modes.TIME_MODES.QUICK})};$scope.setToNow=function(key){$scope.absolute[key]=(0,_moment2.default)()};$scope.setRelativeToNow=function(key){$scope.relative[key].count=0;$scope.relative[key].round=false;$scope.formatRelative(key)};$scope.checkRelative=function(){if(null!=$scope.relative.from.count&&null!=$scope.relative.to.count){var from=_datemath2.default.parse(getRelativeString("from"));var to=_datemath2.default.parse(getRelativeString("to"),{roundUp:true});if(to&&from)return to.isBefore(from);return true}};$scope.formatRelative=function(key){var relativeString=getRelativeString(key);var parsed=_datemath2.default.parse(relativeString,{roundUp:"to"===key});var preview=void 0;preview="now"===relativeString?"Now":parsed?parsed.format($scope.format):void 0;_lodash2.default.set($scope,"relative."+key+".preview",preview);return parsed};$scope.applyRelative=function(){$scope.onFilterSelect({from:getRelativeString("from"),to:getRelativeString("to"),mode:_modes.TIME_MODES.RELATIVE})};function getRelativeString(key){var count=_lodash2.default.get($scope,"relative."+key+".count",0);var round=_lodash2.default.get($scope,"relative."+key+".round",false);var matches=_lodash2.default.get($scope,"relative."+key+".unit","s").match(/([smhdwMy])(\+)?/);var unit=void 0;var operator="-";matches&&matches[1]&&(unit=matches[1]);matches&&matches[2]&&(operator=matches[2]);if(0===count&&!round)return"now";var result="now"+operator+count+unit;result+=round?"/"+unit:"";return result}$scope.applyAbsolute=function(){$scope.onFilterSelect({from:(0,_moment2.default)($scope.absolute.from),to:(0,_moment2.default)($scope.absolute.to),mode:_modes.TIME_MODES.ABSOLUTE})};$scope.prettyInterval=function(interval){return(0,_pretty_interval.prettyInterval)(interval.value)};$scope.setRefreshInterval=function(interval){interval=_lodash2.default.clone(interval||{});interval.pause=null!=interval.pause&&false!==interval.pause;$scope.onIntervalSelect({interval:{value:interval.value,pause:interval.pause}})};$scope.setMode($scope.mode)}}})},function(module,exports){module.exports='<div class="kbn-timepicker" data-test-subj="timePicker">\n\n  <div class="tab-content kbn-timepicker-content">\n    \x3c!-- Filters --\x3e\n    <div ng-show="activeTab === \'filter\'" role="tabpanel" class="tab-pane active">\n      <div class="kbn-timepicker-title">\n        <h2 class="kuiLocalDropdownTitle kbn-timepicker-title__text">\n          Time Range\n        </h2>\n      </div>\n\n      <div class="kuiVerticalRhythmSmall">\n        <div role="tablist" class="euiTabs euiTabs--small kbn-timepicker-modes kbn-timepicker-title__section">\n          <button\n            id="timepickerQuick"\n            role="tab"\n            class="euiTab"\n            ng-class="{\'euiTab-isSelected\': mode === \'quick\' }"\n            ng-click="setMode(\'quick\')"\n            aria-selected="{{mode === \'quick\'}}"\n            data-test-subj="timepicker-quick-button"\n          >\n            Quick\n          </button>\n\n          <button\n            id="timepickerRelative"\n            role="tab"\n            class="euiTab"\n            ng-class="{\'euiTab-isSelected\': mode === \'relative\' }"\n            ng-click="setMode(\'relative\')"\n            aria-selected="{{mode === \'relative\'}}"\n            data-test-subj="timepicker-relative-button"\n          >\n            Relative\n          </button>\n\n          <button\n            id="timepickerAbsolute"\n            role="tab"\n            class="euiTab"\n            ng-class="{\'euiTab-isSelected\': mode === \'absolute\' }"\n            ng-click="setMode(\'absolute\')"\n            aria-selected="{{mode === \'absolute\'}}"\n            data-test-subj="timepicker-absolute-button"\n          >\n            Absolute\n          </button>\n\n          <button\n            id="timepickerRecent"\n            role="tab"\n            class="euiTab"\n            ng-class="{\'euiTab-isSelected\': mode === \'recent\' }"\n            ng-click="setMode(\'recent\')"\n            aria-selected="{{mode === \'recent\'}}"\n            data-test-subj="timepicker-recent-button"\n          >\n            Recent\n          </button>\n        </div>\n      </div>\n\n      <div\n        class="kuiVerticalRhythmSmall"\n        ng-switch\n        on="mode"\n      >\n        <kbn-timepicker-quick-panel\n          ng-switch-when="quick"\n          set-quick="setQuick(from, to)"\n          role="tabpanel"\n          aria-labelledby="timepickerQuick"\n        ></kbn-timepicker-quick-panel>\n\n        <kbn-timepicker-recent-panel\n          ng-switch-when="recent"\n          set-quick="setQuick(from, to)"\n          role="tabpanel"\n          aria-labelledby="timepickerRecent"\n        ></kbn-timepicker-recent-panel>\n\n        <kbn-timepicker-relative-panel\n          ng-switch-when="relative"\n          apply-relative="applyRelative()"\n          check-relative="checkRelative()"\n          format-relative="formatRelative(key)"\n          relative="relative"\n          relative-options="relativeOptions"\n          set-relative-to-now="setRelativeToNow(key)"\n          units="units"\n          role="tabpanel"\n          aria-labelledby="timepickerRelative"\n        ></kbn-timepicker-relative-panel>\n\n        <kbn-timepicker-absolute-panel\n          ng-switch-when="absolute"\n          absolute="absolute"\n          apply-absolute="applyAbsolute()"\n          format="format"\n          pick-from-date="pickFromDate"\n          pick-to-date="pickToDate"\n          set-to-now="setToNow(key)"\n          role="tabpanel"\n          aria-labelledby="timepickerAbsolute"\n        ></kbn-timepicker-absolute-panel>\n      </div>\n    </div>\n\n    \x3c!-- Refresh Intervals --\x3e\n    <div ng-show="activeTab === \'interval\'" role="tabpanel" class="tab-pane active">\n      <h2 class="kuiLocalDropdownTitle">\n        Refresh Interval\n      </h2>\n\n      <div ng-repeat="list in refreshLists" class="kbn-refresh-section">\n        <ul class="list-unstyled">\n          <li ng-repeat="inter in list">\n            <a\n              class="refresh-interval"\n              ng-class="{ \'refresh-interval-active\': interval.value === inter.value }"\n              ng-click="setRefreshInterval(inter)"\n              kbn-accessible-click\n            >\n              {{prettyInterval(inter)}}\n            </a>\n          </li>\n        </ul>\n      </div>\n    </div>\n  </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";__webpack_require__(3271)},function(module,exports,__webpack_require__){"use strict";var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _kbn_timepicker_quick_panel=__webpack_require__(3272);var _kbn_timepicker_quick_panel2=_interopRequireDefault(_kbn_timepicker_quick_panel);var _modules=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("ui/timepicker");_module.directive("kbnTimepickerQuickPanel",function(config){return{restrict:"E",replace:true,scope:{setQuick:"&"},template:_kbn_timepicker_quick_panel2.default,controller:function controller($scope){var quickRanges=config.get("timepicker:quickRanges");$scope.quickLists=(0,_lodash2.default)(quickRanges).groupBy("section").values().value()}}})},function(module,exports){module.exports='<div class="kbn-timepicker-body">\n  <div ng-repeat="list in quickLists" class="kbn-timepicker-section kbn-timepicker-quick-section">\n    <ul class="list-unstyled">\n      <li ng-repeat="option in list">\n        <a\n          class="kuiLink"\n          ng-click="setQuick({from: option.from, to: option.to})"\n          ng-bind="::option.display"\n          kbn-accessible-click\n        ></a>\n      </li>\n    </ul>\n  </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";__webpack_require__(3274)},function(module,exports,__webpack_require__){"use strict";var _kbn_timepicker_recent_panel=__webpack_require__(3275);var _kbn_timepicker_recent_panel2=_interopRequireDefault(_kbn_timepicker_recent_panel);var _modules=__webpack_require__(2);var _time_history=__webpack_require__(1267);var _pretty_duration=__webpack_require__(1343);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("ui/timepicker");_module.directive("kbnTimepickerRecentPanel",function(){return{restrict:"E",replace:true,scope:{setQuick:"&"},template:_kbn_timepicker_recent_panel2.default,controller:function controller($scope,config){var getConfig=function getConfig(){return config.get.apply(config,arguments)};$scope.recent=_time_history.timeHistory.get().map(function(time){time.display=(0,_pretty_duration.prettyDuration)(time.from,time.to,getConfig);return time})}}})},function(module,exports){module.exports='<div class="kbn-timepicker-body">\n\n  <div ng-show="recent.length === 0" class="euiText">\n    <p>\n      No time history. Your most recent time ranges show up here, so you can easily view them later.\n    </p>\n  </div>\n\n  <div class="kbn-timepicker-section">\n    <ul class="list-unstyled">\n      <li ng-repeat="option in recent">\n        <a\n          class="kuiLink"\n          ng-click="setQuick({from: option.from, to: option.to})"\n          ng-bind="::option.display"\n          kbn-accessible-click\n        ></a>\n      </li>\n    </ul>\n  </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";__webpack_require__(3277)},function(module,exports,__webpack_require__){"use strict";var _kbn_timepicker_relative_panel=__webpack_require__(3278);var _kbn_timepicker_relative_panel2=_interopRequireDefault(_kbn_timepicker_relative_panel);var _modules=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("ui/timepicker");_module.directive("kbnTimepickerRelativePanel",function(){return{restrict:"E",replace:true,scope:{applyRelative:"&",checkRelative:"&",formatRelative:"&",relative:"=",relativeOptions:"=",setRelativeToNow:"&",units:"="},template:_kbn_timepicker_relative_panel2.default,controller:function controller(){}}})},function(module,exports){module.exports='<form role="form" ng-submit="applyRelative()" class="form-inline" name="relativeTime">\n  <div class="kbn-timepicker-body kuiVerticalRhythm">\n    <div class="kbn-timepicker-section kbn-timepicker-body-column">\n      <div class="kuiLocalDropdownHeader kbn-timepicker-form-header">\n        <label class="kuiLocalDropdownHeader__label">\n          From\n        </label>\n\n        <div class="kuiLocalDropdownHeader__actions">\n          <a\n            class="kuiLocalDropdownHeader__action"\n            ng-click="setRelativeToNow({key:\'from\'})"\n            kbn-accessible-click\n          >\n            Set To Now\n          </a>\n        </div>\n      </div>\n\n      <div class="kuiLocalDropdownFormNote kuiVerticalRhythmSmall">\n        <span ng-show="relative.from.preview">\n          {{relative.from.preview}}\n        </span>\n        <span ng-hide="relative.from.preview">\n          <em>Invalid Expression</em>\n        </span>\n      </div>\n\n      <div class="kuiFieldGroup kuiVerticalRhythmSmall">\n        <div class="kuiFieldGroupSection kuiFieldGroupSection--wide">\n          <input\n            required\n            ng-model="relative.from.count"\n            ng-change="formatRelative({key:\'from\'})"\n            greater-than="-1"\n            min="0"\n            type="number"\n            ng-class="{ \'kuiTextInput-isInvalid\' : checkRelative() }"\n            class="kuiTextInput fullWidth"\n          >\n        </div>\n\n        <div class="kuiFieldGroupSection">\n          <select\n            ng-model="relative.from.unit"\n            ng-options="opt.value as opt.text for opt in relativeOptions"\n            ng-change="formatRelative({key:\'from\'})"\n            ng-class="{ \'kuiSelect-isInvalid\': checkRelative() }"\n            class="kuiSelect fullWidth"\n          >\n          </select>\n        </div>\n      </div>\n\n      <div class="kuiVerticalRhythmSmall">\n        <label class="kuiCheckBoxLabel">\n          <input\n            class="kuiCheckBox"\n            type="checkbox"\n            ng-model="relative.from.round"\n            ng-checked="relative.from.round"\n            ng-change="formatRelative({key:\'from\'})"\n          >\n          <span class="kuiCheckBoxLabel__text">\n            round to the {{units[relative.from.unit.substring(0,1)]}}\n          </span>\n        </label>\n      </div>\n    </div>\n\n    <div class="kbn-timepicker-section kbn-timepicker-body-column">\n      <div class="kuiLocalDropdownHeader kbn-timepicker-form-header">\n        <label class="kuiLocalDropdownHeader__label">\n          To\n        </label>\n\n        <div class="kuiLocalDropdownHeader__actions">\n          <a\n            class="kuiLocalDropdownHeader__action"\n            ng-click="setRelativeToNow({key:\'to\'})"\n            kbn-accessible-click\n          >\n            Set To Now\n          </a>\n        </div>\n      </div>\n\n      <div class="kuiLocalDropdownFormNote kuiVerticalRhythmSmall">\n        <span ng-show="relative.to.preview">\n          {{relative.to.preview}}\n        </span>\n        <span ng-hide="relative.to.preview">\n          <em>Invalid Expression</em>\n        </span>\n      </div>\n\n      <div class="kuiFieldGroup kuiVerticalRhythmSmall">\n        <div class="kuiFieldGroupSection kuiFieldGroupSection--wide">\n          <input\n            required\n            ng-model="relative.to.count"\n            ng-change="formatRelative({key:\'to\'})"\n            greater-than="-1"\n            min="0"\n            type="number"\n            ng-class="{ \'kuiTextInput-isInvalid\': checkRelative() }"\n            class="kuiTextInput fullWidth"\n          >\n        </div>\n\n        <div class="kuiFieldGroupSection">\n          <select\n            ng-model="relative.to.unit"\n            ng-options="opt.value as opt.text for opt in relativeOptions"\n            ng-change="formatRelative({key:\'to\'})"\n            ng-class="{ \'kuiSelect-isInvalid\': checkRelative() }"\n            class="kuiSelect fullWidth"\n          >\n          </select>\n        </div>\n      </div>\n\n      <div class="kuiVerticalRhythmSmall">\n        <label class="kuiCheckBoxLabel">\n          <input\n            class="kuiCheckBox"\n            type="checkbox"\n            ng-model="relative.to.round"\n            ng-checked="relative.to.round"\n            ng-change="formatRelative({key:\'to\'})"\n          >\n          <span class="kuiCheckBoxLabel__text">\n            round to the {{units[relative.to.unit.substring(0,1)]}}\n          </span>\n        </label>\n      </div>\n    </div>\n  </div>\n\n  <div class="kbn-timepicker-actions kuiVerticalRhythm">\n    <span\n      class="kbn-timepicker-action-item kbn-timepicker-error"\n      ng-show="checkRelative()"\n    >\n      <strong>From</strong> must occur before <strong>To</strong>\n    </span>\n    <button\n      type="submit"\n      class="kuiButton kuiButton--primary kbn-timepicker-submit-button"\n      ng-disabled="!(relative.from.preview && relative.to.preview) || checkRelative()"\n      data-test-subj="timepickerGoButton"\n    >\n      Go\n    </button>\n  </div>\n</form>\n'},function(module,exports,__webpack_require__){"use strict";__webpack_require__(3280)},function(module,exports,__webpack_require__){"use strict";var _kbn_timepicker_absolute_panel=__webpack_require__(3281);var _kbn_timepicker_absolute_panel2=_interopRequireDefault(_kbn_timepicker_absolute_panel);var _modules=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("ui/timepicker");_module.directive("kbnTimepickerAbsolutePanel",function(){return{restrict:"E",replace:true,scope:{absolute:"=",applyAbsolute:"&",format:"=",pickFromDate:"=",pickToDate:"=",setToNow:"&"},template:_kbn_timepicker_absolute_panel2.default,controller:function controller(){}}})},function(module,exports){module.exports='<form name="absoluteTime" ng-submit="applyAbsolute()">\n  <div class="kbn-timepicker-body">\n    <div class="kbn-timepicker-section kbn-timepicker-body-column">\n      <div class="kuiLocalDropdownHeader kbn-timepicker-form-header">\n        <label class="kuiLocalDropdownHeader__label">\n          From\n        </label>\n\n        <div class="kuiLocalDropdownHeader__actions">\n          <a\n            class="kuiLocalDropdownHeader__action"\n            ng-click="setToNow({key:\'from\'})"\n            kbn-accessible-click\n          >\n            Set To Now\n          </a>\n        </div>\n      </div>\n\n      <input\n        type="text"\n        required\n        class="kuiTextInput fullWidth"\n        input-datetime="{{format}}"\n        ng-model="absolute.from"\n      >\n      <div ng-show="!absolute.from"><em>Invalid Date</em></div>\n\n      <div>\n        <datepicker ng-model="pickFromDate" ng-model-options="{ getterSetter: true }" max-date="pickToDate()" show-weeks="false"></datepicker>\n      </div>\n    </div>\n\n    <div class="kbn-timepicker-section kbn-timepicker-body-column">\n      <div class="kuiLocalDropdownHeader kbn-timepicker-form-header">\n        <label class="kuiLocalDropdownHeader__label">\n          To\n        </label>\n\n        <div class="kuiLocalDropdownHeader__actions">\n          <a\n            class="kuiLocalDropdownHeader__action"\n            ng-click="setToNow({key:\'to\'})"\n            kbn-accessible-click\n          >\n            Set To Now\n          </a>\n        </div>\n      </div>\n\n      <span ng-show="!absolute.to"><em>Invalid Date</em></span>\n      <input\n        type="text"\n        required\n        class="kuiTextInput fullWidth"\n        input-datetime="{{format}}"\n        ng-model="absolute.to"\n      >\n\n      <div>\n        <datepicker ng-model="pickToDate" ng-model-options="{ getterSetter: true }" min-date="pickFromDate()" show-weeks="false"></datepicker>\n      </div>\n    </div>\n  </div>\n\n  <div class="kbn-timepicker-actions kuiVerticalRhythm">\n    <span\n      class="kbn-timepicker-action-item kbn-timepicker-error"\n      ng-show="absolute.from > absolute.to"\n    >\n      <strong>From</strong> must occur before <strong>To</strong>\n    </span>\n    <button\n      type="submit"\n      class="kuiButton kuiButton--primary kbn-timepicker-submit-button"\n      ng-disabled="absolute.from > absolute.to || !absolute.from || !absolute.to"\n      data-test-subj="timepickerGoButton"\n    >\n      Go\n    </button>\n  </div>\n</form>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.parseRelativeString=parseRelativeString;exports.parseRelativeParts=parseRelativeParts;var _datemath=__webpack_require__(83);var _datemath2=_interopRequireDefault(_datemath);var _moment=__webpack_require__(10);var _moment2=_interopRequireDefault(_moment);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _relative_options=__webpack_require__(839);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function parseRelativeString(part){var results={};var matches=_lodash2.default.isString(part)&&part.match(/now(([\-\+])([0-9]+)([smhdwMy])(\/[smhdwMy])?)?/);var isNow=matches&&!matches[1];var operator=matches&&matches[2];var count=matches&&matches[3];var unit=matches&&matches[4];var roundBy=matches&&matches[5];if(isNow)return{count:0,unit:"s",round:false};if(count&&unit){results.count=parseInt(count,10);results.unit=unit;"+"===operator&&(results.unit+="+");results.round=!!roundBy;return results}results={count:0,unit:"s",round:false};var duration=_moment2.default.duration((0,_moment2.default)().diff(_datemath2.default.parse(part)));var units=_lodash2.default.pluck(_lodash2.default.clone(_relative_options.relativeOptions).reverse(),"value").filter(function(s){return/^[smhdwMy]$/.test(s)});var unitOp="";for(var i=0;i<units.length;i++){var as=duration.as(units[i]);as<0&&(unitOp="+");if(Math.abs(as)>1){results.count=Math.round(Math.abs(as));results.unit=units[i]+unitOp;results.round=false;break}}return results}function parseRelativeParts(from,to){var results={};results.from=parseRelativeString(from);results.to=parseRelativeString(to);if(results.from&&results.to)return results}},function(module,exports){},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(2);var _module=_modules.uiModules.get("kibana");_module.constant("refreshIntervals",[{value:0,section:0},{value:5e3,section:1},{value:1e4,section:1},{value:3e4,section:1},{value:45e3,section:1},{value:6e4,section:2},{value:3e5,section:2},{value:9e5,section:2},{value:18e5,section:2},{value:36e5,section:3},{value:72e5,section:3},{value:432e5,section:3},{value:864e5,section:3}])},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(2);var _kbn_global_timepicker=__webpack_require__(3286);var _kbn_global_timepicker2=_interopRequireDefault(_kbn_global_timepicker);var _time_navigation=__webpack_require__(3287);var _timefilter=__webpack_require__(14);var _pretty_duration=__webpack_require__(1343);var _pretty_interval=__webpack_require__(1346);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana").directive("kbnGlobalTimepicker",function(globalState,config){var getConfig=function getConfig(){return config.get.apply(config,arguments)};var listenForUpdates=function listenForUpdates($scope){$scope.$listenAndDigestAsync(_timefilter.timefilter,"refreshIntervalUpdate",function(){setTimefilterValues($scope)});$scope.$listenAndDigestAsync(_timefilter.timefilter,"timeUpdate",function(){setTimefilterValues($scope)});$scope.$listenAndDigestAsync(_timefilter.timefilter,"enabledUpdated",function(){setTimefilterValues($scope)})};function setTimefilterValues($scope){var time=_timefilter.timefilter.getTime();var refreshInterval=_timefilter.timefilter.getRefreshInterval();$scope.timefilterValues={refreshInterval:refreshInterval,time:time,display:{time:(0,_pretty_duration.prettyDuration)(time.from,time.to,getConfig),refreshInterval:(0,_pretty_interval.prettyInterval)(refreshInterval.value)},isAutoRefreshSelectorEnabled:_timefilter.timefilter.isAutoRefreshSelectorEnabled,isTimeRangeSelectorEnabled:_timefilter.timefilter.isTimeRangeSelectorEnabled}}return{template:_kbn_global_timepicker2.default,replace:true,require:"^kbnTopNav",link:function link($scope,element,attributes,kbnTopNav){listenForUpdates($scope);setTimefilterValues($scope);$scope.toggleRefresh=function(){_timefilter.timefilter.toggleRefresh()};$scope.forward=function(){_timefilter.timefilter.setTime(_time_navigation.timeNavigation.stepForward(_timefilter.timefilter.getBounds()))};$scope.back=function(){_timefilter.timefilter.setTime(_time_navigation.timeNavigation.stepBackward(_timefilter.timefilter.getBounds()))};$scope.updateFilter=function(from,to,mode){_timefilter.timefilter.setTime({from:from,to:to,mode:mode});kbnTopNav.close("filter")};$scope.updateInterval=function(interval){_timefilter.timefilter.setRefreshInterval(interval);kbnTopNav.close("interval")};$scope.getSharedTimeFilterFromDate=function(){return _timefilter.timefilter.isAutoRefreshSelectorEnabled||_timefilter.timefilter.isTimeRangeSelectorEnabled?_timefilter.timefilter.getBounds().min.clone().utc().format():null};$scope.getSharedTimeFilterToDate=function(){return _timefilter.timefilter.isAutoRefreshSelectorEnabled||_timefilter.timefilter.isTimeRangeSelectorEnabled?_timefilter.timefilter.getBounds().max.clone().utc().format():null}}}})},function(module,exports){module.exports='<div\n  ng-show="timefilterValues.isAutoRefreshSelectorEnabled || timefilterValues.isTimeRangeSelectorEnabled"\n  data-shared-timefilter-from="{{ getSharedTimeFilterFromDate() }}"\n  data-shared-timefilter-to="{{ getSharedTimeFilterToDate() }}"\n  class="kuiLocalMenu"\n  data-test-subj="globalTimepicker"\n>\n  <button\n    class="kuiLocalMenuItem"\n    aria-label="{{ timefilterValues.refreshInterval.pause ? \'Resume refreshing data\' : \'Pause refreshing data\' }}"\n    ng-click="toggleRefresh()"\n    ng-show="timefilterValues.isAutoRefreshSelectorEnabled && (timefilterValues.refreshInterval.value > 0)"\n    data-test-subj="globalTimepickerAutoRefreshButton"\n    data-test-subj-state="{{ timefilterValues.refreshInterval.pause ? \'inactive\' : \'active\' }}"\n  >\n    <span\n      class="kuiIcon"\n      aria-hidden="true"\n      ng-class="timefilterValues.refreshInterval.pause ? \'fa-play\' : \'fa-pause\'"\n    ></span>\n  </button>\n\n  <button\n    class="kuiLocalMenuItem navbar-timepicker-auto-refresh-desc"\n    ng-class="{\'kuiLocalMenuItem-isSelected\': kbnTopNav.isCurrent(\'interval\') }"\n    ng-show="timefilterValues.isAutoRefreshSelectorEnabled"\n    ng-click="kbnTopNav.toggle(\'interval\')"\n  >\n    <span ng-show="timefilterValues.refreshInterval.value === 0">\n      <span aria-hidden="true" class="kuiIcon fa-repeat"></span> Auto-refresh\n    </span>\n\n    <span\n      ng-show="timefilterValues.refreshInterval.value > 0"\n      aria-label="Data will refresh every {{timefilterValues.display.refreshInterval}}"\n    >\n      {{ timefilterValues.display.refreshInterval }}\n    </span>\n  </button>\n\n  <button\n    ng-show="timefilterValues.isTimeRangeSelectorEnabled"\n    class="kuiLocalMenuItem"\n    ng-click="back()"\n    aria-label="Move backward in time"\n  >\n    <span\n      class="kuiIcon fa-chevron-left"\n      aria-hidden="true"\n      tooltip="Move backward in time"\n    ></span>\n  </button>\n\n  <button\n    ng-show="timefilterValues.isTimeRangeSelectorEnabled"\n    data-test-subj="globalTimepickerButton"\n    class="kuiLocalMenuItem navbar-timepicker-time-desc"\n    ng-class="{\'kuiLocalMenuItem-isSelected\': kbnTopNav.isCurrent(\'filter\')}"\n    ng-click="kbnTopNav.toggle(\'filter\')"\n    aria-label="Open time range picker"\n    aria-haspopup="true"\n  >\n    <span aria-hidden="true" class="kuiIcon fa-clock-o"></span>\n    <span\n      aria-label="Current time range is {{timefilterValues.display.time}}"\n      data-test-subj="globalTimepickerRange"\n    >\n      {{timefilterValues.display.time}}\n    </span>\n  </button>\n\n  <button\n    ng-show="timefilterValues.isTimeRangeSelectorEnabled"\n    class="kuiLocalMenuItem"\n    ng-click="forward()"\n    aria-label="Move forward in time"\n  >\n    <span\n      aria-hidden="true"\n      class="kuiIcon fa-chevron-right"\n      tooltip="Move forward in time"\n    ></span>\n  </button>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.timeNavigation=void 0;var _moment=__webpack_require__(10);var _moment2=_interopRequireDefault(_moment);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.timeNavigation={stepForward:function stepForward(_ref){var min=_ref.min,max=_ref.max;var diff=max.diff(min);return{from:(0,_moment2.default)(max).add(1,"ms").toISOString(),to:(0,_moment2.default)(max).add(diff+1,"ms").toISOString(),mode:"absolute"}},stepBackward:function stepBackward(_ref2){var min=_ref2.min,max=_ref2.max;var diff=max.diff(min);return{from:(0,_moment2.default)(min).subtract(diff+1,"ms").toISOString(),to:(0,_moment2.default)(min).subtract(1,"ms").toISOString(),mode:"absolute"}},zoomOut:function zoomOut(_ref3){var min=_ref3.min,max=_ref3.max;var diff=max.diff(min);return{from:(0,_moment2.default)(min).subtract(diff/2,"ms").toISOString(),to:(0,_moment2.default)(max).add(diff/2,"ms").toISOString(),mode:"absolute"}},zoomIn:function zoomIn(_ref4){var min=_ref4.min,max=_ref4.max;var diff=max.diff(min);return{from:(0,_moment2.default)(min).add(diff/4,"ms").toISOString(),to:(0,_moment2.default)(max).subtract(diff/4,"ms").toISOString(),mode:"absolute"}}}},function(module,exports,__webpack_require__){"use strict";var _tooltip=__webpack_require__(3289);var _tooltip2=_interopRequireDefault(_tooltip);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}__webpack_require__(832).config(function($tooltipProvider){$tooltipProvider.options({placement:"bottom",animation:true,popupDelay:150,appendToBody:false})}).directive("kbnTooltip",function(){return{restrict:"E",template:_tooltip2.default,transclude:true,replace:true,scope:true,link:function link($scope,$el,attr){$scope.text=attr.text;$scope.placement=attr.placement||"top";$scope.delay=attr.delay||400;$scope.appendToBody=attr.appendToBody||0}}})},function(module,exports){module.exports='<span\n  tooltip="{{text}}"\n  tooltip-placement="{{placement}}"\n  tooltip-popup-delay="{{delay}}"\n  tooltip-append-to-body="{{appendToBody}}"\n  ng-transclude></span>'},function(module,exports,__webpack_require__){"use strict";__webpack_require__(3291)},function(module,exports,__webpack_require__){"use strict";var _typeahead=__webpack_require__(3292);var _typeahead2=_interopRequireDefault(_typeahead);var _modules=__webpack_require__(2);var _eui=__webpack_require__(3);__webpack_require__(611);__webpack_require__(3293);__webpack_require__(3294);__webpack_require__(3295);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var UP=_eui.comboBoxKeyCodes.UP,DOWN=_eui.comboBoxKeyCodes.DOWN,ENTER=_eui.comboBoxKeyCodes.ENTER,TAB=_eui.comboBoxKeyCodes.TAB,ESCAPE=_eui.comboBoxKeyCodes.ESCAPE;var typeahead=_modules.uiModules.get("kibana/typeahead");typeahead.directive("kbnTypeahead",function(){return{template:_typeahead2.default,transclude:true,restrict:"E",scope:{items:"=",itemTemplate:"=",onSelect:"&"},bindToController:true,controllerAs:"typeahead",controller:function controller($scope,$element){var _this=this;this.isHidden=true;this.selectedIndex=null;this.submit=function(){var item=_this.items[_this.selectedIndex];_this.onSelect({item:item});_this.selectedIndex=null};this.selectPrevious=function(){null!==_this.selectedIndex&&_this.selectedIndex>0?_this.selectedIndex--:_this.selectedIndex=_this.items.length-1;_this.scrollSelectedIntoView()};this.selectNext=function(){null!==_this.selectedIndex&&_this.selectedIndex<_this.items.length-1?_this.selectedIndex++:_this.selectedIndex=0;_this.scrollSelectedIntoView()};this.scrollSelectedIntoView=function(){var parent=$element.find(".typeahead-items")[0];var child=$element.find(".typeahead-item").eq(_this.selectedIndex)[0];parent.scrollTop=Math.min(parent.scrollTop,child.offsetTop);parent.scrollTop=Math.max(parent.scrollTop,child.offsetTop+child.offsetHeight-parent.offsetHeight)};this.isVisible=function(){var isFocusedOrMousedOver=_this.isFocused||_this.isMousedOver;return!_this.isHidden&&_this.items&&_this.items.length>0&&isFocusedOrMousedOver};this.resetLimit=function(){_this.limit=50};this.increaseLimit=function(){_this.limit+=50};this.onKeyDown=function(event){var keyCode=event.keyCode;keyCode===ESCAPE&&(_this.isHidden=true);if([TAB,ENTER].includes(keyCode)&&!_this.hidden&&null!==_this.selectedIndex){event.preventDefault();_this.submit()}else if(keyCode===UP&&_this.items.length>0){event.preventDefault();_this.isHidden=false;_this.selectPrevious()}else if(keyCode===DOWN&&_this.items.length>0){event.preventDefault();_this.isHidden=false;_this.selectNext()}else _this.selectedIndex=null};this.onKeyPress=function(){_this.isHidden=false};this.onItemClick=function(){_this.submit();$scope.$broadcast("focus");$scope.$evalAsync(function(){return _this.isHidden=false})};this.onFocus=function(){_this.isFocused=true;_this.isHidden=true;_this.resetLimit()};this.onBlur=function(){_this.isFocused=false};this.onMouseEnter=function(){_this.isMousedOver=true};this.onMouseLeave=function(){_this.isMousedOver=false}}}})},function(module,exports){module.exports='<div\n  class="typeahead"\n  ng-keydown="typeahead.onKeyDown($event)"\n  ng-keypress="typeahead.onKeyPress($event)"\n>\n  <ng-transclude></ng-transclude>\n  <div\n    class="typeahead-popover"\n    ng-show="typeahead.isVisible()"\n    ng-mouseenter="typeahead.onMouseEnter()"\n    ng-mouseleave="typeahead.onMouseLeave()"\n  >\n    <div\n      class="typeahead-items"\n      kbn-scroll-bottom="typeahead.increaseLimit()"\n    >\n      <div\n        class="typeahead-item"\n        ng-repeat="item in typeahead.items | limitTo: typeahead.limit"\n        ng-class="{active: $index === typeahead.selectedIndex}"\n        ng-click="typeahead.onItemClick()"\n        ng-mouseenter="typeahead.selectedIndex = $index"\n      >\n        <kbn-typeahead-item\n          item="item"\n          template="typeahead.itemTemplate"\n        >\n        </kbn-typeahead-item>\n      </div>\n    </div>\n  </div>\n</div>\n'},function(module,exports){},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(2);var typeahead=_modules.uiModules.get("kibana/typeahead");typeahead.directive("kbnTypeaheadInput",function(){return{restrict:"A",require:"^kbnTypeahead",link:function link($scope,$el,$attr,typeahead){$el.attr("autocomplete","off");$el.on("focus",function(){$scope.$evalAsync(function(){return typeahead.onFocus()})});$el.on("blur",function(){$scope.$evalAsync(function(){return typeahead.onBlur()})});$scope.$on("focus",function(){$el.focus()});$scope.$on("$destroy",function(){$el.off()})}}})},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(2);var typeahead=_modules.uiModules.get("kibana/typeahead");typeahead.directive("kbnTypeaheadItem",function($compile){return{restrict:"E",scope:{item:"=",template:"="},link:function link(scope,element){element.html(scope.template||"{{item}}");$compile(element.contents())(scope)}}})},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(2);var _saved_object_save_as_checkbox=__webpack_require__(3297);var _saved_object_save_as_checkbox2=_interopRequireDefault(_saved_object_save_as_checkbox);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana").directive("savedObjectSaveAsCheckBox",function(){return{restrict:"E",template:_saved_object_save_as_checkbox2.default,replace:true,scope:{savedObject:"="}}})},function(module,exports){module.exports='<div ng-hide="!savedObject.id || savedObject.isSaving">\n  <div ng-hide="!savedObject.isTitleChanged() || savedObject.copyOnSave" class="kuiLocalDropdownWarning kuiVerticalRhythmSmall">\n    In previous versions of Kibana, changing the name of a {{savedObject.getDisplayName()}} would make a copy with the new name. Use the \'Save as a new {{savedObject.getDisplayName()}}\' checkbox to do this now.\n  </div>\n\n  <label class="kuiCheckBoxLabel kuiVerticalRhythmSmall">\n    <input\n      class="kuiCheckBox"\n      type="checkbox"\n      data-test-subj="saveAsNewCheckbox"\n      ng-model="savedObject.copyOnSave"\n      ng-checked="savedObject.copyOnSave"\n    >\n\n    <span class="kuiCheckBoxLabel__text">\n      Save as a new {{savedObject.getDisplayName()}}\n    </span>\n  </label>\n</div>\n\n'},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";var context=__webpack_require__(3426);context.keys().forEach(function(key){return context(key)})},function(module,exports,__webpack_require__){var map={"./auto_select_if_only_one.js":3427,"./click_focus.js":3428,"./confirm_click.js":843,"./css_truncate.js":844,"./documentation_href.js":485,"./field_name.js":845,"./file_upload.js":3439,"./focus_on.js":836,"./inequality.js":840,"./infinite_scroll.js":1367,"./input_base64.js":3440,"./input_datetime.js":1345,"./input_focus.js":416,"./input_number.js":3553,"./json_input.js":1333,"./kbn_href.js":1239,"./kbn_src.js":1238,"./match_pairs.js":1400,"./paginate.js":1401,"./paginated_selectable_list.js":1402,"./rows.js":3556,"./saved_object_finder.js":862,"./scroll_bottom.js":611,"./string_to_number.js":1339,"./truncated.js":796,"./ui_select_focus_on.js":487,"./validate_agg.js":1307,"./validate_cidr_mask.js":1319,"./validate_date_math.js":826,"./validate_index_pattern.js":3559,"./validate_ip.js":827,"./validate_json.js":1403,"./validate_lowercase.js":3560};function webpackContext(req){return __webpack_require__(webpackContextResolve(req))}function webpackContextResolve(req){var id=map[req];if(!(id+1))throw new Error("Cannot find module '"+req+"'.");return id}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)};webpackContext.resolve=webpackContextResolve;module.exports=webpackContext;webpackContext.id=3426},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(2);var _module=_modules.uiModules.get("kibana");_module.directive("autoSelectIfOnlyOne",function(){return{restrict:"A",require:"ngModel",link:function link(scope,element,attributes,ngModelCtrl){scope.$watchCollection(attributes.autoSelectIfOnlyOne,function(options){if(options&&1===options.length){ngModelCtrl.$setViewValue(options[0]);ngModelCtrl.$render()}})}}})},function(module,exports,__webpack_require__){"use strict";var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _jquery=__webpack_require__(13);var _jquery2=_interopRequireDefault(_jquery);var _modules=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");_module.directive("clickFocus",function(){return{scope:{clickFocus:"="},restrict:"A",link:function link($scope,$elem){function handler(){var focusElem=_jquery2.default.find("input[name="+$scope.clickFocus+"]");focusElem[0]&&focusElem[0].focus()}$elem.bind("click",handler);$scope.$on("$destroy",_lodash2.default.bindKey($elem,"unbind","click",handler))}}})},function(module,exports){module.exports='<span\n  aria-label="Boolean field"\n  class="field-name-icon kuiIcon fa-adjust"\n></span>\n'},function(module,exports){module.exports='<span\n  aria-label="Conflicting field"\n  class="field-name-icon kuiIcon fa-warning"\n></span>\n'},function(module,exports){module.exports='<span\n  aria-label="Date field"\n  class="field-name-icon kuiIcon fa-clock-o"\n></span>\n'},function(module,exports){module.exports='<span\n  aria-label="Geo-point field"\n  class="field-name-icon kuiIcon fa-globe"\n></span>\n'},function(module,exports){module.exports='<span\n  aria-label="IP address field"\n  class="field-name-icon kuiIcon fa-laptop"\n></span>\n'},function(module,exports){module.exports='<span\n  aria-label="Murmur3 field"\n  class="field-name-icon"\n>\n  <strong aria-hidden="true">h</strong>\n</span>\n'},function(module,exports){module.exports='<span\n  aria-label="Number field"\n  class="field-name-icon"\n>\n  <strong aria-hidden="true">#</strong>\n</span>\n'},function(module,exports){module.exports='<span\n  aria-label="Source field"\n  class="field-name-icon kuiIcon fa-file-text-o"\n></span>\n'},function(module,exports){module.exports='<span\n  aria-label="String field"\n  class="field-name-icon"\n>\n  <strong aria-hidden="true">t</strong>\n</span>\n'},function(module,exports){module.exports='<span\n  aria-label="Unknown field"\n  class="field-name-icon"\n>\n  <strong aria-hidden="true">?</strong>\n</span>\n'},function(module,exports,__webpack_require__){"use strict";var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _jquery=__webpack_require__(13);var _jquery2=_interopRequireDefault(_jquery);var _modules=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");var html='<span class="dropzone" ng-transclude></span>';_module.directive("fileUpload",function(){return{restrict:"E",transclude:true,scope:{onRead:"&",onLocate:"&",uploadSelector:"@"},template:html,link:function link($scope,$elem,attrs){var $button=$elem.find($scope.uploadSelector);var $dropzone=$elem.find(".dropzone");var handleFile=function handleFile(file){if(_lodash2.default.isUndefined(file))return;if(_lodash2.default.has(attrs,"onRead")){var reader=new FileReader;reader.onload=function(e){$scope.$apply(function(){$scope.onRead({fileContents:e.target.result})})};reader.readAsText(file)}_lodash2.default.has(attrs,"onLocate")&&$scope.$apply(function(){$scope.onLocate({file:file})})};$dropzone.on("dragover",function(e){e.preventDefault();e.stopPropagation()});$dropzone.on("dragenter",function(e){e.preventDefault();e.stopPropagation()});$dropzone.on("drop",function(e){e.stopPropagation();e.preventDefault();var file=_lodash2.default.get(e,"originalEvent.dataTransfer.files[0]");file&&handleFile(file)});if($button){var $fileInput=(0,_jquery2.default)('<input type="file" style="opacity: 0; display:none; position:absolute; right: -999999999px" id="testfile" />');$elem.append($fileInput);$fileInput.on("change",function(e){var target=e.srcElement||e.target;_lodash2.default.get(target,"files.length")&&handleFile(target.files[0])});$button.on("click",function(){$fileInput.val(null);$fileInput.trigger("click")})}}}})},function(module,exports,__webpack_require__){"use strict";var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var _modules=__webpack_require__(2);var _rxjs=__webpack_require__(615);var Rx=_interopRequireWildcard(_rxjs);var _operators=__webpack_require__(623);function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);newObj.default=obj;return newObj}var _module=_modules.uiModules.get("kibana");var multipleUsageErrorMessage="Cannot use input-base-sixty-four directive on input with `multiple` attribute";var createFileContent$=function createFileContent$(file){return Rx.Observable.create(function(observer){var reader=new FileReader;reader.onerror=function(err){observer.error(err)};reader.onload=function(){observer.next(reader.result);observer.complete()};reader.readAsDataURL(file);return function(){reader.abort()}})};_module.directive("inputBaseSixtyFour",function(){return{restrict:"A",require:"ngModel",scope:"isolate",link:function link($scope,$elem,attrs,ngModel){if($elem.prop("multiple"))throw new Error(multipleUsageErrorMessage);var maxSizeValidator=function maxSizeValidator(dataUrl){return{errorKey:"maxSize",isValid:""===attrs.max||dataUrl.length<=parseInt(attrs.max)}};var validators=[maxSizeValidator];var fileContent$=Rx.fromEvent($elem,"change",function(e){return e}).pipe((0,_operators.map)(function(e){return e.target.files}),(0,_operators.switchMap)(function(files){if(0===files.length)return[];if(files.length>1)throw new Error(multipleUsageErrorMessage);return createFileContent$(files[0])}),(0,_operators.share)());var validations$=fileContent$.pipe((0,_operators.map)(function(fileContent){return validators.map(function(validator){return validator(fileContent)})}));var unsubscribe=Rx.combineLatest(fileContent$,validations$).subscribe(function(_ref){var _ref2=_slicedToArray(_ref,2),fileContent=_ref2[0],validations=_ref2[1];$scope.$evalAsync(function(){validations.forEach(function(validation){ngModel.$setValidity(validation.errorKey,validation.isValid)});validations.every(function(validation){return validation.isValid})&&ngModel.$setViewValue(fileContent)})},function(err){throw err});$scope.$on("destroy",unsubscribe)}}})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(2);var _module=_modules.uiModules.get("kibana");_module.directive("inputNumber",function(){return{restrict:"A",require:"ngModel",link:function link($scope,$elem,attrs,ngModel){ngModel.$parsers.push(checkNumber);ngModel.$formatters.push(checkNumber);function checkNumber(value){ngModel.$setValidity("number",!isNaN(parseFloat(value)));return value}}}})},function(module,exports){module.exports='<button\n  class="kuiLink"\n  ng-if="linkToTop"\n  ng-click="paginate.goToTop()"\n  data-test-subj="paginateControlsLinkToTop"\n>\n  Scroll to top\n</button>\n\n<div\n  class="pagination-other-pages"\n  data-test-subj="paginationControls"\n>\n  <ul class="pagination-other-pages-list pagination-sm" ng-if="page.count > 1">\n    <li ng-style="{\'visibility\':\'hidden\'}" ng-if="page.first">\n      <button\n        class="euiButtonEmpty euiButtonEmpty--text euiButtonEmpty--small euiPaginationButton"\n        ng-click="paginate.goToPage(page.prev)"\n      >\n        <span class="euiButtonEmpty__content"></span>\n      </button>\n    </li>\n    <li ng-style="{\'visibility\':\'visible\'}" ng-if="!page.first">\n      <button\n        class="euiButtonEmpty euiButtonEmpty--text euiButtonEmpty--small euiPaginationButton"\n        ng-click="paginate.goToPage(page.prev)"\n      >\n        <span class="euiButtonEmpty__content"></span>\n      </button>\n    </li>\n\n    <li ng-if="!otherPages.containsFirst">\n      <button\n        class="euiButtonEmpty euiButtonEmpty--text euiButtonEmpty--small euiPaginationButton"\n        ng-click="paginate.goToPage(1)"\n      >\n        <span class="euiButtonEmpty__content">1</span>\n      </button>\n      ...\n    </li>\n\n    <li\n      ng-repeat="other in otherPages"\n      ng-class="{ active: other.number === page.number }"\n    >\n      <button\n        class="euiButtonEmpty euiButtonEmpty--text euiButtonEmpty--small euiPaginationButton"\n        ng-class="{ \'euiPaginationButton-isActive\': other.number === page.number }"\n        ng-click="paginate.goToPage(other)"\n      >\n        <span class="euiButtonEmpty__content">{{other.number}}</span>\n      </button>\n    </li>\n\n    <li ng-if="!otherPages.containsLast">\n      ...\n      <button\n        class="euiButtonEmpty euiButtonEmpty--text euiButtonEmpty--small euiPaginationButton"\n        ng-click="paginate.goToPage(page.count)"\n      >\n        <span class="euiButtonEmpty__content">{{page.count}}</span>\n      </button>\n    </li>\n\n    <li ng-style="{\'visibility\':\'hidden\'}" ng-if="page.last">\n      <button\n        class="euiButtonEmpty euiButtonEmpty--text euiButtonEmpty--small euiPaginationButton"\n        data-test-subj="paginateNext"\n        ng-click="paginate.goToPage(page.next)"\n      >\n        <span class="euiButtonEmpty__content"></span>\n      </button>\n    </li>\n    <li ng-style="{\'visibility\':\'visible\'}" ng-if="!page.last">\n      <button\n        class="euiButtonEmpty euiButtonEmpty--text euiButtonEmpty--small euiPaginationButton"\n        data-test-subj="paginateNext"\n        ng-click="paginate.goToPage(page.next)"\n      >\n        <span class="euiButtonEmpty__content"></span>\n      </button>\n    </li>\n  </ul>\n</div>\n\n<form class="form-inline pagination-size" ng-if="showSelector">\n  <div class="form-group">\n    <label>Page Size</label>\n    <select\n      ng-model="paginate.perPage"\n      ng-options="opt.value as opt.title for opt in paginate.sizeOptions"\n      data-test-subj="paginateControlsPageSizeSelect"\n    ></select>\n  </div>\n</form>\n'},function(module,exports){module.exports='<form\n  role="form"\n  class="kuiVerticalRhythm"\n>\n  <div class="kuiBar">\n    <div class="kuiBarSection">\n      <div class="kuiSearchInput fullWidth">\n        <div class="kuiSearchInput__icon kuiIcon fa-search"></div>\n        <input\n          class="kuiSearchInput__input"\n          input-focus\n          disable-input-focus="disableAutoFocus"\n          ng-model="query"\n          placeholder="Filter..."\n          class="form-control"\n          name="query"\n          type="text"\n          autocomplete="off"\n        >\n      </div>\n    </div>\n\n    <div class="kuiBarSection">\n      <p class="kuiText kuiSubduedText">\n        {{ (hits | filter: query).length }} of {{ hitCount }}\n      </p>\n    </div>\n  </div>\n</form>\n\n<paginate\n  list="hits | filter: query"\n  per-page="{{ perPage }}"\n  class="kuiVerticalRhythm"\n>\n  <button\n    class="paginate-heading list-group-item list-sort-button"\n    ng-click="sortHits(hits)"\n    aria-live="assertive"\n  >\n    <span class="kuiScreenReaderOnly">Sort by</span>\n    Name\n    <span\n      class="fa"\n      ng-class="isAscending ? \'fa-caret-up\' : \'fa-caret-down\'">\n      <span class="kuiScreenReaderOnly">({{isAscending ? \'ascending\' : \'descending\'}})</span>\n    </span>\n  </button>\n  <ul class="li-striped list-group list-group-menu">\n    <li class="list-group-item list-group-menu-item" ng-repeat="hit in page">\n      <a\n        data-test-subj="paginatedListItem-{{accessor(hit)}}"\n        ng-show="userMakeUrl"\n        kbn-href="{{ makeUrl(hit) }}">\n        <span>{{ accessor(hit) }}</span>\n      </a>\n\n      <div ng-show="userOnSelect" ng-click="onSelect(hit, $event)">\n        <span>{{ accessor(hit) }}</span>\n      </div>\n    </li>\n\n    <li class="list-group-item list-group-no-results" ng-if="(hits | filter: query).length === 0">\n      <p>No matches found.</p>\n    </li>\n  </ul>\n</paginate>\n'},function(module,exports,__webpack_require__){"use strict";var _jquery=__webpack_require__(13);var _jquery2=_interopRequireDefault(_jquery);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _agg_config_result=__webpack_require__(421);var _agg_config_result2=_interopRequireDefault(_agg_config_result);var _filter_bar_click_handler=__webpack_require__(608);var _modules=__webpack_require__(2);var _table_cell_filter=__webpack_require__(3557);var _table_cell_filter2=_interopRequireDefault(_table_cell_filter);var _numeric=__webpack_require__(817);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");_module.directive("kbnRows",function($compile,$rootScope,getAppState,Private){var filterBarClickHandler=Private(_filter_bar_click_handler.FilterBarClickHandlerProvider);return{restrict:"A",link:function link($scope,$el,attr){function addCell($tr,contents){function createCell(){return(0,_jquery2.default)(document.createElement("td"))}function createFilterableCell(aggConfigResult){var $template=(0,_jquery2.default)(_table_cell_filter2.default);$template.addClass("cell-hover");var scope=$scope.$new();var $state=getAppState();var addFilter=filterBarClickHandler($state);scope.onFilterClick=function(event,negate){if((0,_jquery2.default)(event.target).is("a"))return;addFilter({point:{aggConfigResult:aggConfigResult},negate:negate})};return $compile($template)(scope)}var $cell=void 0;var $cellContent=void 0;if(contents instanceof _agg_config_result2.default){var field=contents.aggConfig.getField();var isCellContentFilterable=contents.aggConfig.isFilterable()&&(!field||field.filterable);if(isCellContentFilterable){$cell=createFilterableCell(contents);$cellContent=$cell.find("[data-cell-content]")}else $cell=$cellContent=createCell();contents=contents.toString("html")}else{$cell=$cellContent=createCell();(0,_numeric.isNumeric)(contents)&&$cell.addClass("numeric-value")}if(_lodash2.default.isObject(contents)){contents.attr&&$cellContent.attr(contents.attr);contents.class&&$cellContent.addClass(contents.class);contents.scope?$cellContent=$compile($cellContent.prepend(contents.markup))(contents.scope):$cellContent.prepend(contents.markup);contents.attr&&$cellContent.attr(contents.attr)}else""===contents?$cellContent.prepend("&nbsp;"):$cellContent.prepend(contents);$tr.append($cell)}function maxRowSize(max,row){return Math.max(max,row.length)}$scope.$watchMulti([attr.kbnRows,attr.kbnRowsMin],function(vals){var rows=vals[0];var min=vals[1];$el.empty();Array.isArray(rows)||(rows=[]);var width=rows.reduce(maxRowSize,0);if(isFinite(min)&&rows.length<min){rows=_lodash2.default.clone(rows);var emptyRow=new Array(width);_lodash2.default.times(width,function(i){emptyRow[i]=""});_lodash2.default.times(min-rows.length,function(){rows.push(emptyRow)})}rows.forEach(function(row){var $tr=(0,_jquery2.default)(document.createElement("tr")).appendTo($el);row.forEach(function(cell){addCell($tr,cell)})})})}}})},function(module,exports){module.exports='<td>\n  <div\n    data-cell-content\n    class="cell-hover"\n  >\n    <span class="table-cell-filter">\n      <span\n        data-test-subj="filterForCellValue"\n        ng-click="onFilterClick($event, false)"\n        class="fa fa-search-plus"\n        tooltip="Filter for value"\n        tooltip-append-to-body="1"\n      ></span>\n\n      <span\n        ng-click="onFilterClick($event, true)"\n        class="fa fa-search-minus"\n        tooltip="Filter out value"\n        tooltip-append-to-body="1"\n      ></span>\n    </span>\n  </div>\n</td>\n'},function(module,exports){module.exports='<form\n  role="form"\n  class="kuiVerticalRhythm"\n>\n  <div class="kuiBar">\n    <div class="kuiBarSection">\n      <div class="kuiSearchInput fullWidth">\n        <div class="kuiSearchInput__icon kuiIcon fa-search"></div>\n        <input\n          class="kuiSearchInput__input"\n          input-focus\n          disable-input-focus="disableAutoFocus"\n          ng-model="filter"\n          ng-attr-placeholder="{{ finder.properties.nouns | label }} Filter..."\n          ng-keydown="finder.filterKeyDown($event)"\n          name="filter"\n          type="text"\n          autocomplete="off"\n          data-test-subj="savedObjectFinderSearchInput"\n        >\n      </div>\n    </div>\n\n    <div class="kuiBarSection">\n      <p class="kuiText kuiSubduedText">\n        {{ pageFirstItem }}-{{ pageLastItem }} of {{ finder.hitCount }}\n      </p>\n\n      <div class="kuiButtonGroup">\n        <button\n          class="kuiButton kuiButton--primary"\n          ng-if="onAddNew"\n          ng-click="onAddNew()"\n          data-test-subj="addNewSavedObjectLink"\n        >\n          Add new {{ finder.properties.noun }}\n        </button>\n\n        <button\n          class="kuiButton kuiButton--secondary"\n          ng-if="!useLocalManagement"\n          ng-click="finder.manageObjects(finder.properties.name)"\n        >\n          Manage {{ finder.properties.nouns }}\n        </button>\n      </div>\n    </div>\n  </div>\n</form>\n\n<paginate\n  list="finder.hits"\n  per-page="20"\n  class="kuiVerticalRhythm"\n>\n  <button\n    class="paginate-heading list-group-item list-sort-button"\n    ng-click="finder.sortHits(finder.hits)"\n    aria-live="assertive"\n  >\n    <span class="kuiScreenReaderOnly">Sort by</span>\n    Name\n    <span\n      class="fa"\n      ng-class="finder.isAscending ? \'fa-caret-up\' : \'fa-caret-down\'">\n      <span class="kuiScreenReaderOnly">({{finder.isAscending ? \'ascending\' : \'descending\'}})</span>\n    </span>\n  </button>\n  <ul class="li-striped list-group list-group-menu" ng-class="{\'select-mode\': finder.selector.enabled}">\n    <li\n      class="list-group-item list-group-menu-item"\n      ng-class="{\'active\': finder.selector.index === $index && finder.selector.enabled}"\n      ng-repeat="hit in page"\n      ng-keydown="finder.hitKeyDown($event, page, paginate)"\n      ng-click="finder.onChoose(hit, $event)">\n\n      <a ng-href="{{finder.makeUrl(hit)}}"\n          ng-blur="finder.hitBlur($event)"\n          ng-click="finder.preventClick($event)">\n          <span aria-hidden="true" class="finder-type fa" ng-if="hit.icon" ng-class="hit.icon"></span>\n          <div class="kuiIcon fa-flask ng-scope" ng-if="hit.type.shouldMarkAsExperimentalInUI()"></div>\n          <span>{{hit.title}}</span>\n          <p ng-if="hit.description" ng-bind="hit.description"></p>\n      </a>\n    </li>\n    <li\n      class="list-group-item list-group-no-results"\n      ng-if="finder.hits.length === 0">\n      <p ng-bind="\'No matching \' + finder.properties.nouns + \' found.\'"></p>\n    </li>\n  </ul>\n</paginate>\n'},function(module,exports,__webpack_require__){"use strict";var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _modules=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana").directive("validateIndexPattern",function(){return{restrict:"A",require:"ngModel",link:function link($scope,elem,attr,ngModel){var illegalCharacters=["\\","/","?",'"',"<",">","|"," "];var allowWildcard=!_lodash2.default.isUndefined(attr.validateIndexPatternAllowWildcard)&&"false"!==attr.validateIndexPatternAllowWildcard;allowWildcard||illegalCharacters.push("*");var isValid=function isValid(input){if(null==input||""===input)return true===!attr.required;if("."===input||".."===input)return false;var match=_lodash2.default.find(illegalCharacters,function(character){return input.indexOf(character)>=0});return!match};ngModel.$validators.indexPattern=function(modelValue,viewValue){return isValid(viewValue)}}}})},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(2);_modules.uiModules.get("kibana").directive("validateLowercase",function(){return{restrict:"A",require:"ngModel",link:function link($scope,elem,attr,ctrl){ctrl.$validators.lowercase=function(modelValue,viewValue){if(ctrl.$isEmpty(modelValue))return true;return viewValue.toLowerCase()===viewValue}}}})},function(module,exports,__webpack_require__){"use strict";var context=__webpack_require__(3562);context.keys().forEach(function(key){return context(key)})},function(module,exports,__webpack_require__){var map={"./comma_list.js":3563,"./field_type.js":820,"./label.js":1308,"./markdown.js":1233,"./match_any.js":1404,"./moment.js":366,"./rison.js":1243,"./short_dots.js":614,"./sort_prefix_first.js":488,"./start_from.js":1405,"./trust_as_html.js":1406,"./unique.js":1407,"./uriescape.js":1242};function webpackContext(req){return __webpack_require__(webpackContextResolve(req))}function webpackContextResolve(req){var id=map[req];if(!(id+1))throw new Error("Cannot find module '"+req+"'.");return id}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)};webpackContext.resolve=webpackContextResolve;module.exports=webpackContext;webpackContext.id=3562},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(2);var _utils=__webpack_require__(396);_modules.uiModules.get("kibana").filter("commaList",function(){return function(input){var inclusive=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,_utils.formatListAsProse)((0,_utils.parseCommaSeparatedList)(input),{inclusive:inclusive})}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.registerTheme=registerTheme;exports.applyTheme=applyTheme;exports.getCurrentTheme=getCurrentTheme;var themes={};var currentTheme=void 0;function registerTheme(theme,styles){themes[theme]=styles}function applyTheme(newTheme){currentTheme=newTheme;var styleNode=document.getElementById("themeCss");if(styleNode){var css=themes[currentTheme];styleNode.styleSheet?styleNode.styleSheet.cssText=css:styleNode.appendChild(document.createTextNode(css))}}function getCurrentTheme(){return currentTheme}},,,,function(module,exports,__webpack_require__){var map={"./base.less":3569,"./callout.less":3570,"./config.less":3571,"./control_group.less":3572,"./dark-theme.less":3573,"./dark-variables.less":3574,"./hintbox.less":3575,"./input.less":3576,"./list-group-menu.less":3577,"./local_search.less":3578,"./navbar.less":3579,"./pagination.less":1409,"./react-input-range.less":3580,"./sidebar.less":3581,"./spinner.less":3582,"./table.less":3583,"./theme.less":3584,"./truncate.less":3585,"./ui_select.less":3586};function webpackContext(req){return __webpack_require__(webpackContextResolve(req))}function webpackContextResolve(req){var id=map[req];if(!(id+1))throw new Error("Cannot find module '"+req+"'.");return id}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)};webpackContext.resolve=webpackContextResolve;module.exports=webpackContext;webpackContext.id=3568},function(module,exports){},function(module,exports){},function(module,exports){},function(module,exports){},function(module,exports){},function(module,exports){},function(module,exports){},function(module,exports){},function(module,exports){},function(module,exports){},function(module,exports){},function(module,exports){},function(module,exports){},function(module,exports){},function(module,exports){},function(module,exports){},function(module,exports){},function(module,exports){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var __importDefault=(void 0,function(mod){return mod&&mod.__esModule?mod:{default:mod}});Object.defineProperty(exports,"__esModule",{value:true});var events_1=__webpack_require__(104);var jquery_1=__importDefault(__webpack_require__(13));var lodash_1=__webpack_require__(1);var resize_observer_polyfill_1=__importDefault(__webpack_require__(3930));function validateElArg(el){var $el=jquery_1.default(el);if(1!==$el.length)throw new TypeError("ResizeChecker must be constructed with a single DOM element.");return $el.get(0)}function getSize(el){return[el.clientWidth,el.clientHeight]}var ResizeChecker=function(_events_1$EventEmitte){_inherits(ResizeChecker,_events_1$EventEmitte);function ResizeChecker(el){var args=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,ResizeChecker);var _this=_possibleConstructorReturn(this,(ResizeChecker.__proto__||Object.getPrototypeOf(ResizeChecker)).call(this));_this.destroyed=false;_this.expectedSize=null;_this.el=validateElArg(el);_this.observer=new resize_observer_polyfill_1.default(function(){if(_this.expectedSize){var sameSize=lodash_1.isEqual(getSize(el),_this.expectedSize);_this.expectedSize=null;if(sameSize)return}_this.emit("resize")});args.disabled||_this.enable();return _this}_createClass(ResizeChecker,[{key:"enable",value:function enable(){if(this.destroyed)return;this.expectedSize=getSize(this.el);this.observer.observe(this.el)}},{key:"modifySizeWithoutTriggeringResize",value:function modifySizeWithoutTriggeringResize(block){try{block()}finally{this.el&&(this.expectedSize=getSize(this.el))}}},{key:"destroy",value:function destroy(){if(this.destroyed)return;this.destroyed=true;this.observer.disconnect();this.observer=null;this.expectedSize=null;this.el=null;this.removeAllListeners()}}]);return ResizeChecker}(events_1.EventEmitter);exports.ResizeChecker=ResizeChecker},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(2);var _tool_bar_pager_text=__webpack_require__(3964);var _tool_bar_pager_text2=_interopRequireDefault(_tool_bar_pager_text);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var app=_modules.uiModules.get("kibana");app.directive("toolBarPagerText",function(){return{restrict:"E",replace:true,template:_tool_bar_pager_text2.default,scope:{startItem:"=",endItem:"=",totalItems:"="},controllerAs:"toolBarPagerText",bindToController:true,controller:function ToolBarPagerTextController(){_classCallCheck(this,ToolBarPagerTextController)}}})},function(module,exports){module.exports='<div class="kuiToolBarText">\n  {{ toolBarPagerText.startItem | number }}&ndash;{{ toolBarPagerText.endItem | number }} of {{ toolBarPagerText.totalItems | number }}\n</div>'},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(2);var _tool_bar_pager_buttons=__webpack_require__(3966);var _tool_bar_pager_buttons2=_interopRequireDefault(_tool_bar_pager_buttons);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var app=_modules.uiModules.get("kibana");app.directive("toolBarPagerButtons",function(){return{restrict:"E",replace:true,template:_tool_bar_pager_buttons2.default,scope:{hasNextPage:"=",hasPreviousPage:"=",onPageNext:"=",onPagePrevious:"="},controllerAs:"toolBarPagerButtons",bindToController:true,controller:function ToolBarPagerButtonsController(){var _this=this;_classCallCheck(this,ToolBarPagerButtonsController);this.nextPage=function(){_this.onPageNext()};this.previousPage=function(){_this.onPagePrevious()}}}})},function(module,exports){module.exports='<div class="kuiButtonGroup">\n  <button\n    class="kuiButton kuiButton--basic kuiButton--icon"\n    ng-click="toolBarPagerButtons.previousPage()"\n    ng-disabled="!toolBarPagerButtons.hasPreviousPage"\n    data-test-subj="btnPrevPage"\n  >\n    <span class="kuiButton__icon kuiIcon fa-chevron-left"></span>\n  </button>\n  <button\n    class="kuiButton kuiButton--basic kuiButton--icon"\n    ng-click="toolBarPagerButtons.nextPage()"\n    ng-disabled="!toolBarPagerButtons.hasNextPage"\n    data-test-subj="btnNextPage"\n  >\n    <span class="kuiButton__icon kuiIcon fa-chevron-right"></span>\n  </button>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(2);var _pager=__webpack_require__(1456);function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}var app=_modules.uiModules.get("kibana");app.factory("pagerFactory",function(){return{create:function create(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return new(Function.prototype.bind.apply(_pager.Pager,[null].concat(_toConsumableArray(args))))}}})},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _modules=__webpack_require__(2);var _sortable_column=__webpack_require__(3969);var _sortable_column2=_interopRequireDefault(_sortable_column);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var app=_modules.uiModules.get("kibana");app.directive("sortableColumn",function(){return{restrict:"E",transclude:true,template:_sortable_column2.default,scope:{field:"@",sortField:"=",sortReverse:"=",onSortChange:"="},controllerAs:"sortableColumn",bindToController:true,controller:function(){function SortableColumnController(){var _this=this;_classCallCheck(this,SortableColumnController);this.toggle=function(){_this.sortField===_this.field?_this.onSortChange(_this.field,!_this.sortReverse):_this.onSortChange(_this.field,false)}}_createClass(SortableColumnController,[{key:"getAriaLabel",value:function getAriaLabel(){var direction=this.isSortedAscending()?"descending":"ascending";return"Sort "+this.field+" "+direction}},{key:"isSorted",value:function isSorted(){return this.sortField===this.field}},{key:"isSortedAscending",value:function isSortedAscending(){return this.isSorted()&&!this.sortReverse}},{key:"isSortedDescending",value:function isSortedDescending(){return this.isSorted()&&this.sortReverse}}]);return SortableColumnController}()}})},function(module,exports){module.exports='<button\n  class="kuiTableHeaderCellButton"\n  ng-class="{\'kuiTableHeaderCellButton-isSorted\': sortableColumn.isSorted()}"\n  ng-click="sortableColumn.toggle()"\n  aria-label="{{sortableColumn.getAriaLabel()}}"\n>\n  <span class="kuiTableHeaderCell__liner">\n    <span ng-transclude></span>\n    <span\n    class="kuiTableSortIcon kuiIcon"\n    ng-class="sortableColumn.isSortedAscending() ? \'fa-long-arrow-up\' : \'fa-long-arrow-down\'"\n    ></span>\n  </span>\n</button>\n'},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports){module.exports="/*\n * Timelion syntax parser\n */\n\n{\n function ltoo (literal) {\n  return {type: 'literal', value: literal}\n }\n\n function simpleLocation (location) {\n  // Returns an object representing the position of the function within the expression,\n  // demarcated by the position of its first character and last character. We calculate these values\n  // using the offset because the expression could span multiple lines, and we don't want to deal\n  // with column and line values.\n  return {\n   min: location.start.offset,\n   max: location.end.offset\n  }\n }\n\n var currentFunction;\n var currentArgs = [];\n\n var functions = [];\n var args = [];\n var variables = {};\n\n}\n\nstart\n = space? tree:series {\n  return {\n    tree: tree.filter(function (o) {return o != null}),\n    functions: functions,\n    args: args,\n    variables: variables\n  }\n }\n\narg_list\n = first:argument rest:(space? ',' space? arg:argument {return arg})* space? ','? {\n  return [first].concat(rest);\n }\n\nargument\n = name:argument_name space? '=' space? value:arg_type {\n  var arg = {\n   type: 'namedArg',\n   name: name,\n   value: value,\n   location: simpleLocation(location()),\n   text: text()\n  };\n  currentArgs.push(arg);\n  return arg;\n }\n / space? '=' space? value:arg_type? {\n  var exception = {\n   type: 'incompleteArgument',\n   currentArgs: currentArgs,\n   currentFunction: currentFunction,\n   location: simpleLocation(location()),\n   text: text()\n  }\n  error(JSON.stringify(exception));\n }\n / name:argument_name space? '=' {\n  var exception = {\n   type: 'incompleteArgumentValue',\n   currentArgs: currentArgs,\n   currentFunction: currentFunction,\n   name: name,\n   location: simpleLocation(location()),\n   text: text()\n  }\n  error(JSON.stringify(exception));\n }\n / element:arg_type {return element}\n\narg_type\n = variable_get\n / series_type\n / literal:literal {\n  var result = ltoo(literal);\n  result.location = simpleLocation(location()),\n  result.text = text();\n  return result;\n }\n\nvariable_get\n = '$' name:argument_name {\n  if (variables[name]) {\n   return variables[name];\n  } else {\n   error('$' + name + ' is not defined')\n  }\n }\n\nvariable_set\n = '$' name:argument_name space? '=' space? value:arg_type {\n  variables[name] = value;\n }\n\nseries_type\n = variable_set\n / variable_get\n / group\n / chain\n / reference\n\nseries\n = first:series_type rest:(space? ',' space? series:series_type {return series})* ','? {\n  return [first].concat(rest)\n }\n\nfunction_name\n = first:[a-zA-Z]+ rest:[.a-zA-Z0-9_-]* {\n  currentFunction = first.join('') + rest.join('');\n  currentArgs = [];\n  return currentFunction;\n}\n\nargument_name\n = first:[a-zA-Z]+ rest:[.a-zA-Z0-9_-]* { return first.join('') + rest.join('') }\n\nfunction \"function\"\n = space? '.' name:function_name space? '(' space? arg_list:arg_list? space? ')' space? {\n  var result = {\n    type: 'function',\n    function: name,\n    arguments: arg_list || [],\n    location: simpleLocation(location()),\n    text: text()\n  }\n\n  result.arguments.forEach(function (arg) {\n   arg.function = name;\n   args.push(arg);\n  })\n\n  functions.push(result)\n  return result;\n }\n / '.' func:function_name? {\n  var exception = {\n   type: 'incompleteFunction',\n   function: func,\n   location: simpleLocation(location()),\n   text: text()\n  }\n  error(JSON.stringify(exception));\n }\n\nreference\n = '@' plot:integer ':' series:integer {\n  return {\n   type: 'reference',\n   plot: plot,\n   series: series\n  }\n }\n / '@' plot:integer {\n  return {\n   type: 'reference',\n   plot: plot\n  }\n }\n\n\nchain\n = func:function space? rest:function* {return {type: 'chain', chain: [func].concat(rest)}}\n\ngroup\n = '(' space? grouped:series space? ')' functions:function* {\n  var first = {\n    type: 'chainList',\n    list: grouped\n  }\n  first.label = text();\n\n  return {type: \"chain\", chain: [first].concat(functions)};\n }\n\n /* ----- Core types ----- */\n\nliteral \"literal\"\n  =  '\"' chars:dq_char* '\"' { return chars.join(''); } // double quoted string\n  / \"'\" chars:sq_char* \"'\" { return chars.join(''); } // single quoted string\n  / 'true'  { return true; } // unquoted literals from here down\n  / 'false' { return false; }\n  / 'null'  { return null; }\n  / string:[^()\"',=\\ \\t]+ { // this also matches numbers via Number()\n   var result = string.join('');\n   // Sort of hacky, but PEG doesn't have backtracking so\n   // a number rule is hard to read, and performs worse\n   if (isNaN(Number(result))) return result;\n   return Number(result)\n  }\n\nspace\n = [\\ \\t\\r\\n]+\n\ndq_char\n  = \"\\\\\" sequence:('\"' / \"\\\\\") { return sequence; }\n  / [^\"] // everything except \"\n\nsq_char\n  = \"\\\\\" sequence:(\"'\" / \"\\\\\") { return sequence; }\n  / [^'] // everything except '\n\ninteger\n = digits:[0-9]+ {return parseInt(digits.join(''))}\n"},function(module,exports,__webpack_require__){"use strict";var _timelion_expression_suggestions=__webpack_require__(4050);var _timelion_expression_suggestions2=_interopRequireDefault(_timelion_expression_suggestions);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var app=__webpack_require__(2).get("apps/timelion",[]);app.directive("timelionExpressionSuggestions",function(){return{restrict:"E",scope:{suggestions:"=",suggestionsType:"=",selectedIndex:"=",onClickSuggestion:"&",shouldPopover:"="},replace:true,template:_timelion_expression_suggestions2.default,link:function link(scope){scope.onMouseDown=function(e){return e.preventDefault()}}}})},function(module,exports){module.exports='<div\n  id="timelionSuggestionList"\n  class="suggestions"\n  role="listbox"\n  ng-class="{ \'suggestions-isPopover\': shouldPopover === \'true\' }"\n  data-suggestions-list\n>\n  <div\n    class="suggestion"\n    id="timelionSuggestion{{$index}}"\n    role="option"\n    tabindex="0"\n    data-suggestion-list-item\n    ng-class="{active: $index === selectedIndex}"\n    ng-repeat="suggestion in suggestions track by suggestion.name"\n    ng-mousedown="onMouseDown($event)"\n    ng-click="onClickSuggestion({ suggestionIndex: $index })"\n    aria-label="{{suggestion.name}}"\n    aria-describedby="timelionSuggestionDescription{{$index}}"\n    data-test-subj="timelionSuggestionListItem"\n  >\n\n    <div ng-switch on="suggestionsType">\n\n      <div ng-switch-when="functions">\n        <h4>\n          <strong>.{{suggestion.name}}()</strong>\n          <small id="timelionSuggestionDescription{{$index}}">\n            {{suggestion.help}}\n            {{suggestion.chainable ? \'(Chainable)\' : \'(Data Source)\'}}\n          </small>\n        </h4>\n\n        <div ng-show="suggestion.args.length > (suggestion.chainable ? 1: 0)">\n          <div ng-show="suggestions.length > 1">\n            <strong>Arguments:</strong>\n            <span ng-repeat="arg in suggestion.args" ng-hide="$index < 1 && suggestion.chainable">\n              <strong>{{arg.name}}</strong>=(<em>{{arg.types.join(\' | \')}}</em>)\n              <em ng-show="!$last">,</em>\n            </span>\n          </div>\n\n          <div class="suggestion-details" ng-show="suggestions.length === 1">\n            <table class="table table-striped table-condensed table-bordered">\n            <thead>\n              <th scope="col">Argument Name</th>\n              <th scope="col">Accepted Types</th>\n              <th scope="col">Information</th>\n            </thead>\n            <tr ng-repeat="arg in suggestion.args" ng-hide="$index < 1 && suggestion.chainable">\n              <td>{{arg.name}}</td>\n              <td><em>{{arg.types.join(\', \')}}</em></td>\n              <td>{{arg.help}}</td>\n            </tr>\n            </table>\n          </div>\n        </div>\n      </div>\n\n      <div ng-switch-when="arguments">\n        <h4>\n          <strong>{{suggestion.name}}=</strong>\n          <small id="timelionSuggestionDescription{{$index}}">\n            {{suggestion.help}}\n          </small>\n        </h4>\n        <div>\n          <strong>Accepts:</strong>\n          <em>{{suggestion.types.join(\', \')}}</em>\n        </div>\n      </div>\n\n      <div ng-switch-when="argument_value">\n        <h4>\n          <strong>{{suggestion.name}}</strong>\n          <small id="timelionSuggestionDescription{{$index}}">\n            {{suggestion.help}}\n          </small>\n        </h4>\n      </div>\n\n    </div>\n  </div>\n</div>\n'},function(module,exports){module.exports='<div\n  class="timelionExpressionInputContainer"\n  role="combobox"\n  aria-expanded="{{suggestions.isVisible}}"\n  aria-owns="timelionSuggestionList"\n  aria-haspopup="true"\n>\n  \x3c!-- The `role=textbox` is required by VoiceOver to properly detect the autocompletion.\n       For some reasons it doesn\'t work without it (even though the default role of\n       the element is textbox anyway). --\x3e\n  <textarea\n    data-expression-input\n    role="textbox"\n    rows="{{ rows }}"\n    class="timelionExpressionInput kuiTextArea fullWidth"\n    placeholder="Try a query with .es(*)"\n    ng-model="sheet"\n    ng-focus="onFocusInput()"\n    ng-keydown="onKeyDownInput($event)"\n    ng-keyup="onKeyUpInput($event)"\n    ng-blur="onBlurInput()"\n    ng-mousedown="onMouseDownInput()"\n    ng-mouseup="onMouseUpInput()"\n    ng-click="onClickExpression()"\n    aria-label="Timelion expression"\n    aria-multiline="false"\n    aria-autocomplete="list"\n    aria-controls="timelionSuggestionList"\n    aria-activedescendant="{{ getActiveSuggestionId() }}"\n    data-test-subj="timelionExpressionTextArea"\n  ></textarea>\n\n  <timelion-expression-suggestions\n    ng-show="suggestions.isVisible"\n    suggestions="suggestions.list"\n    suggestions-type="suggestions.type"\n    selected-index="suggestions.index"\n    on-click-suggestion="onClickSuggestion(suggestionIndex)"\n    should-popover="shouldPopoverSuggestions"\n  ></timelion-expression-suggestions>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.suggest=exports.Suggestions=exports.SUGGESTION_TYPE=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var extractSuggestionsFromParsedResult=(_ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(result,cursorPosition,functionList,argValueSuggestions){var activeFunc,functionHelp,openParen,activeArg,functionName,functionArgs,argName,partialInput,valueSuggestions,_functionHelp$args$fi,staticSuggestions,argsHelp,argumentSuggestions,location;return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:activeFunc=result.functions.find(function(func){return cursorPosition>=func.location.min&&cursorPosition<func.location.max});if(activeFunc){_context.next=3;break}return _context.abrupt("return");case 3:functionHelp=functionList.find(function(func){return func.name===activeFunc.function});openParen=activeFunc.location.min+activeFunc.function.length+2;if(!(cursorPosition<openParen)){_context.next=7;break}return _context.abrupt("return",{list:[functionHelp],location:activeFunc.location,type:SUGGESTION_TYPE.FUNCTIONS});case 7:activeArg=activeFunc.arguments.find(function(argument){return inLocation(cursorPosition,argument.location)});if(!(activeArg&&"namedArg"===activeArg.type&&inLocation(cursorPosition,activeArg.value.location))){_context.next=21;break}functionName=activeFunc.function,functionArgs=activeFunc.arguments;argName=activeArg.name,partialInput=activeArg.value.text;valueSuggestions=void 0;if(!argValueSuggestions.hasDynamicSuggestionsForArgument(functionName,argName)){_context.next=18;break}_context.next=15;return argValueSuggestions.getDynamicSuggestionsForArgument(functionName,argName,functionArgs,partialInput);case 15:valueSuggestions=_context.sent;_context.next=20;break;case 18:_functionHelp$args$fi=functionHelp.args.find(function(arg){return arg.name===activeArg.name}),staticSuggestions=_functionHelp$args$fi.suggestions;valueSuggestions=argValueSuggestions.getStaticSuggestionsForInput(partialInput,staticSuggestions);case 20:return _context.abrupt("return",{list:valueSuggestions,location:activeArg.value.location,type:SUGGESTION_TYPE.ARGUMENT_VALUE});case 21:argsHelp=getArgumentsHelp(functionHelp,activeFunc.arguments);argumentSuggestions=argsHelp.filter(function(arg){if("namedArg"===_lodash2.default.get(activeArg,"type"))return _lodash2.default.startsWith(arg.name,activeArg.name);if(activeArg)return _lodash2.default.startsWith(arg.name,activeArg.text);return true});location=activeArg?activeArg.location:{min:cursorPosition,max:cursorPosition};return _context.abrupt("return",{list:argumentSuggestions,location:location,type:SUGGESTION_TYPE.ARGUMENTS});case 25:case"end":return _context.stop()}},_callee,this)})),function extractSuggestionsFromParsedResult(_x2,_x3,_x4,_x5){return _ref.apply(this,arguments)});var _ref;exports.suggest=(_ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(expression,functionList,Parser,cursorPosition,argValueSuggestions){var result,message,list,_message,functionName,functionArgs,functionHelp,_message2,argName,_functionName,_functionArgs,valueSuggestions,_functionHelp,argHelp;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return Parser.parse(expression);case 3:result=_context2.sent;_context2.next=6;return extractSuggestionsFromParsedResult(result,cursorPosition,functionList,argValueSuggestions);case 6:return _context2.abrupt("return",_context2.sent);case 9:_context2.prev=9;_context2.t0=_context2["catch"](0);message=void 0;_context2.prev=12;message=JSON.parse(_context2.t0.message);_context2.next=19;break;case 16:_context2.prev=16;_context2.t1=_context2["catch"](12);return _context2.abrupt("return");case 19:_context2.t2=message.type;_context2.next="incompleteFunction"===_context2.t2?22:"incompleteArgument"===_context2.t2?25:"incompleteArgumentValue"===_context2.t2?28:39;break;case 22:list=void 0;list=message.function?functionList.filter(function(func){return _lodash2.default.startsWith(func.name,message.function)}):functionList;return _context2.abrupt("return",{list:list,location:message.location,type:SUGGESTION_TYPE.FUNCTIONS});case 25:_message=message,functionName=_message.currentFunction,functionArgs=_message.currentArgs;functionHelp=functionList.find(function(func){return func.name===functionName});return _context2.abrupt("return",{list:getArgumentsHelp(functionHelp,functionArgs),location:message.location,type:SUGGESTION_TYPE.ARGUMENTS});case 28:_message2=message,argName=_message2.name,_functionName=_message2.currentFunction,_functionArgs=_message2.currentArgs;valueSuggestions=[];if(!argValueSuggestions.hasDynamicSuggestionsForArgument(_functionName,argName)){_context2.next=36;break}_context2.next=33;return argValueSuggestions.getDynamicSuggestionsForArgument(_functionName,argName,_functionArgs);case 33:valueSuggestions=_context2.sent;_context2.next=38;break;case 36:_functionHelp=functionList.find(function(func){return func.name===_functionName});if(_functionHelp){argHelp=_functionHelp.args.find(function(arg){return arg.name===argName});argHelp&&argHelp.suggestions&&(valueSuggestions=argHelp.suggestions)}case 38:return _context2.abrupt("return",{list:valueSuggestions,location:{min:cursorPosition,max:cursorPosition},type:SUGGESTION_TYPE.ARGUMENT_VALUE});case 39:case"end":return _context2.stop()}},_callee2,this,[[0,9],[12,16]])})),function suggest(_x6,_x7,_x8,_x9,_x10){return _ref2.apply(this,arguments)});var _ref2;exports.insertAtLocation=insertAtLocation;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var SUGGESTION_TYPE=exports.SUGGESTION_TYPE={ARGUMENTS:"arguments",ARGUMENT_VALUE:"argument_value",FUNCTIONS:"functions"};exports.Suggestions=function(){function Suggestions(){_classCallCheck(this,Suggestions);this.reset()}_createClass(Suggestions,[{key:"reset",value:function reset(){this.index=-1;this.list=[];this.type=null;this.isVisible=false}},{key:"setList",value:function setList(list,type){this.list=list.sort(function(a,b){if(a.name<b.name)return-1;if(a.name>b.name)return 1;return 0});this.type=type;this.index>-1&&(this.index=Math.max(0,Math.min(this.index,this.list.length-1)))}},{key:"getCount",value:function getCount(){return this.list.length}},{key:"isEmpty",value:function isEmpty(){return 0===this.list.length}},{key:"show",value:function show(){this.isVisible=true}},{key:"hide",value:function hide(){this.isVisible=false}},{key:"stepForward",value:function stepForward(){this.index>0&&(this.index-=1)}},{key:"stepBackward",value:function stepBackward(){this.index<this.list.length-1&&(this.index+=1)}}]);return Suggestions}();function inLocation(cursorPosition,location){return cursorPosition>=location.min&&cursorPosition<=location.max}function getArgumentsHelp(functionHelp){var functionArgs=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!functionHelp)return[];var argsHelp=functionHelp.chainable?functionHelp.args.slice(1):functionHelp.args.slice(0);var functionArgNames=functionArgs.map(function(arg){return arg.name});return argsHelp.filter(function(arg){return!functionArgNames.includes(arg.name)})}function insertAtLocation(valueToInsert,destination,replacementRangeStart,replacementRangeEnd){var prefix=destination.slice(0,replacementRangeStart);var suffix=destination.slice(replacementRangeEnd,destination.length);var result=""+prefix+valueToInsert+suffix;return result}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ArgValueSuggestionsProvider=ArgValueSuggestionsProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _saved_objects=__webpack_require__(57);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function ArgValueSuggestionsProvider(Private,indexPatterns){var _this=this;var getIndexPattern=(_ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(functionArgs){var indexPatternArg,indexPatternTitle,resp,indexPatternSavedObject;return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:indexPatternArg=functionArgs.find(function(argument){return"index"===argument.name});if(indexPatternArg){_context.next=3;break}return _context.abrupt("return");case 3:indexPatternTitle=_lodash2.default.get(indexPatternArg,"value.text");_context.next=6;return savedObjectsClient.find({type:"index-pattern",fields:["title"],search:'"'+indexPatternTitle+'"',search_fields:["title"],perPage:10});case 6:resp=_context.sent;indexPatternSavedObject=resp.savedObjects.find(function(savedObject){return savedObject.attributes.title===indexPatternTitle});if(indexPatternSavedObject){_context.next=10;break}return _context.abrupt("return");case 10:_context.next=12;return indexPatterns.get(indexPatternSavedObject.id);case 12:return _context.abrupt("return",_context.sent);case 13:case"end":return _context.stop()}},_callee,this)})),function getIndexPattern(_x){return _ref.apply(this,arguments)});var _ref;var savedObjectsClient=Private(_saved_objects.SavedObjectsClientProvider);function containsFieldName(partial,field){if(!partial)return true;return field.name.includes(partial)}var customHandlers={es:{index:function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(partial){var search,resp;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:search=partial?partial+"*":"*";_context2.next=3;return savedObjectsClient.find({type:"index-pattern",fields:["title"],search:""+search,search_fields:["title"],perPage:25});case 3:resp=_context2.sent;return _context2.abrupt("return",resp.savedObjects.map(function(savedObject){return{name:savedObject.attributes.title}}));case 5:case"end":return _context2.stop()}},_callee2,this)}));function index(_x2){return _ref2.apply(this,arguments)}return index}(),metric:function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(partial,functionArgs){var indexPattern,valueSplit;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(!(!partial||!partial.includes(":"))){_context3.next=2;break}return _context3.abrupt("return",[{name:"avg:"},{name:"cardinality:"},{name:"count"},{name:"max:"},{name:"min:"},{name:"percentiles:"},{name:"sum:"}]);case 2:_context3.next=4;return getIndexPattern(functionArgs);case 4:indexPattern=_context3.sent;if(indexPattern){_context3.next=7;break}return _context3.abrupt("return",[]);case 7:valueSplit=partial.split(":");return _context3.abrupt("return",indexPattern.fields.filter(function(field){return field.aggregatable&&"number"===field.type&&containsFieldName(valueSplit[1],field)}).map(function(field){return{name:valueSplit[0]+":"+field.name,help:field.type}}));case 9:case"end":return _context3.stop()}},_callee3,this)}));function metric(_x3,_x4){return _ref3.apply(this,arguments)}return metric}(),split:function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(partial,functionArgs){var indexPattern;return regeneratorRuntime.wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.next=2;return getIndexPattern(functionArgs);case 2:indexPattern=_context4.sent;if(indexPattern){_context4.next=5;break}return _context4.abrupt("return",[]);case 5:return _context4.abrupt("return",indexPattern.fields.filter(function(field){return field.aggregatable&&["number","boolean","date","ip","string"].includes(field.type)&&containsFieldName(partial,field)}).map(function(field){return{name:field.name,help:field.type}}));case 6:case"end":return _context4.stop()}},_callee4,this)}));function split(_x5,_x6){return _ref4.apply(this,arguments)}return split}(),timefield:function(){var _ref5=_asyncToGenerator(regeneratorRuntime.mark(function _callee5(partial,functionArgs){var indexPattern;return regeneratorRuntime.wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:_context5.next=2;return getIndexPattern(functionArgs);case 2:indexPattern=_context5.sent;if(indexPattern){_context5.next=5;break}return _context5.abrupt("return",[]);case 5:return _context5.abrupt("return",indexPattern.fields.filter(function(field){return"date"===field.type&&containsFieldName(partial,field)}).map(function(field){return{name:field.name}}));case 6:case"end":return _context5.stop()}},_callee5,this)}));function timefield(_x7,_x8){return _ref5.apply(this,arguments)}return timefield}()}};return{hasDynamicSuggestionsForArgument:function hasDynamicSuggestionsForArgument(functionName,argName){return customHandlers[functionName]&&customHandlers[functionName][argName]},getDynamicSuggestionsForArgument:function(){var _ref6=_asyncToGenerator(regeneratorRuntime.mark(function _callee6(functionName,argName,functionArgs){var partialInput=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return regeneratorRuntime.wrap(function _callee6$(_context6){while(1)switch(_context6.prev=_context6.next){case 0:_context6.next=2;return customHandlers[functionName][argName](partialInput,functionArgs);case 2:return _context6.abrupt("return",_context6.sent);case 3:case"end":return _context6.stop()}},_callee6,_this)}));function getDynamicSuggestionsForArgument(_x10,_x11,_x12){return _ref6.apply(this,arguments)}return getDynamicSuggestionsForArgument}(),getStaticSuggestionsForInput:function getStaticSuggestionsForInput(){var partialInput=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";var staticSuggestions=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(partialInput)return staticSuggestions.filter(function(suggestion){return suggestion.name.includes(partialInput)});return staticSuggestions}}}},,,function(module,exports){module.exports='<input\n  input-focus\n  aria-label="Custom interval"\n  class="kuiTextInput timelion-interval-custom"\n  ng-show="interval === \'other\'"\n  ng-class="{ \'timelion-interval-custom-compact\': interval === \'other\' }"\n  ng-model="otherInterval"\n><select\n  id="timelionInterval"\n  aria-label="Select interval"\n  class="kuiSelect timelion-interval-presets"\n  ng-class="{ \'timelion-interval-presets-compact\': interval === \'other\'}"\n  ng-model="interval"\n>\n  <option\n    ng-repeat="intervalOption in intervalOptions"\n    aria-label="{{::intervalLabels[intervalOption]}}"\n    value="{{::intervalOption}}"\n  >\n      {{::intervalOption}}\n  </option>\n</select>\n'},function(module,exports){},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ReactVisType=exports.VislibVisTypeProvider=exports.AngularVisTypeProvider=exports.BaseVisType=void 0;var _base_vis_type=__webpack_require__(642);var _angular_vis_type=__webpack_require__(4060);var _vislib_vis_type=__webpack_require__(4061);var _react_vis_type=__webpack_require__(4145);exports.BaseVisType=_base_vis_type.BaseVisType;exports.AngularVisTypeProvider=_angular_vis_type.AngularVisTypeProvider;exports.VislibVisTypeProvider=_vislib_vis_type.VislibVisTypeProvider;exports.ReactVisType=_react_vis_type.ReactVisType},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();exports.AngularVisTypeProvider=AngularVisTypeProvider;var _base_vis_type=__webpack_require__(642);var _jquery=__webpack_require__(13);var _jquery2=_interopRequireDefault(_jquery);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function AngularVisTypeProvider($compile,$rootScope){var AngularVisController=function(){function AngularVisController(domeElement,vis){_classCallCheck(this,AngularVisController);this.el=(0,_jquery2.default)(domeElement);this.vis=vis}_createClass(AngularVisController,[{key:"render",value:function render(esResponse,status){var _this=this;return new Promise(function(resolve,reject){var updateScope=function updateScope(){_this.$scope.vis=_this.vis;_this.$scope.visState=_this.vis.getState();_this.$scope.esResponse=esResponse;_this.$scope.renderComplete=resolve;_this.$scope.renderFailed=reject;_this.$scope.resize=Date.now();_this.$scope.updateStatus=status;_this.$scope.$apply()};if(_this.$scope)updateScope();else{_this.$scope=$rootScope.$new();_this.$scope.uiState=_this.vis.getUiState();updateScope();_this.el.html($compile(_this.vis.type.visConfig.template)(_this.$scope));_this.$scope.$apply()}})}},{key:"destroy",value:function destroy(){if(this.$scope){this.$scope.$destroy();this.$scope=null}}}]);return AngularVisController}();var AngularVisType=function(_BaseVisType){_inherits(AngularVisType,_BaseVisType);function AngularVisType(opts){_classCallCheck(this,AngularVisType);opts.visualization=AngularVisController;var _this2=_possibleConstructorReturn(this,(AngularVisType.__proto__||Object.getPrototypeOf(AngularVisType)).call(this,opts));_this2.visConfig.template=opts.visConfig?opts.visConfig.template:opts.template;if(!_this2.visConfig.template)throw new Error("Missing template for AngularVisType");return _this2}return AngularVisType}(_base_vis_type.BaseVisType);return AngularVisType}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();exports.VislibVisTypeProvider=VislibVisTypeProvider;__webpack_require__(884);__webpack_require__(4063);__webpack_require__(4065);__webpack_require__(4067);__webpack_require__(4069);__webpack_require__(4071);__webpack_require__(4080);var _base_vis_type=__webpack_require__(642);var _point_series=__webpack_require__(1472);var _vislib=__webpack_require__(643);var _vislib2=_interopRequireDefault(_vislib);var _jquery=__webpack_require__(13);var _jquery2=_interopRequireDefault(_jquery);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function VislibVisTypeProvider(Private,$rootScope,$timeout,$compile){var pointSeries=Private(_point_series.AggResponsePointSeriesProvider);var vislib=Private(_vislib2.default);var legendClassName={top:"vislib-container--legend-top",bottom:"vislib-container--legend-bottom",left:"vislib-container--legend-left",right:"vislib-container--legend-right"};var VislibVisController=function(){function VislibVisController(el,vis){_classCallCheck(this,VislibVisController);this.el=el;this.vis=vis;this.container=document.createElement("div");this.container.className="vislib-container";this.el.appendChild(this.container);this.chartEl=document.createElement("div");this.chartEl.className="vislib-chart";this.container.appendChild(this.chartEl)}_createClass(VislibVisController,[{key:"render",value:function render(esResponse){var _this=this;this.vis.vislibVis&&this.destroy();return new Promise((_ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(resolve){var $scope,legendHtml;return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(0===_this.el.clientWidth||0===_this.el.clientHeight)){_context.next=2;break}return _context.abrupt("return",resolve());case 2:$scope=void 0;if(_this.vis.params.addLegend){(0,_jquery2.default)(_this.container).attr("class",function(i,cls){return cls.replace(/vislib-container--legend-\S+/g,"")}).addClass(legendClassName[_this.vis.params.legendPosition]);$scope=$rootScope.$new();$scope.refreshLegend=0;$scope.vis=_this.vis;$scope.visData=esResponse;$scope.uiState=$scope.vis.getUiState();legendHtml=$compile("<vislib-legend></vislib-legend>")($scope);_this.container.appendChild(legendHtml[0]);$scope.$digest()}_this.vis.vislibVis=new vislib.Vis(_this.chartEl,_this.vis.params);_this.vis.vislibVis.on("brush",_this.vis.API.events.brush);_this.vis.vislibVis.on("click",_this.vis.API.events.filter);_this.vis.vislibVis.on("renderComplete",resolve);_this.vis.vislibVis.render(esResponse,_this.vis.getUiState());if(_this.vis.params.addLegend){$scope.refreshLegend++;$scope.$digest()}case 10:case"end":return _context.stop()}},_callee,_this)})),function(_x){return _ref.apply(this,arguments)}));var _ref}},{key:"destroy",value:function destroy(){if(this.vis.vislibVis){this.vis.vislibVis.off("brush",this.vis.API.events.brush);this.vis.vislibVis.off("click",this.vis.API.events.filter);this.vis.vislibVis.destroy();delete this.vis.vislibVis}(0,_jquery2.default)(this.container).find("vislib-legend").remove()}}]);return VislibVisController}();var VislibVisType=function(_BaseVisType){_inherits(VislibVisType,_BaseVisType);function VislibVisType(opts){_classCallCheck(this,VislibVisType);opts.responseHandler||(opts.responseHandler="basic");opts.responseConverter||(opts.responseConverter=pointSeries);opts.visualization=VislibVisController;var _this2=_possibleConstructorReturn(this,(VislibVisType.__proto__||Object.getPrototypeOf(VislibVisType)).call(this,opts));_this2.refreshLegend=0;return _this2}return VislibVisType}(_base_vis_type.BaseVisType);return VislibVisType}},function(module,exports){module.exports='<div class="form-group">\n  <div class="kuiSideBarFormRow">\n    <label class="kuiSideBarFormRow__label" for="visualizeBasicSettingsLegendPosition">\n      Legend Position\n    </label>\n    <div class="kuiSideBarFormRow__control">\n      <select\n        id="visualizeBasicSettingsLegendPosition"\n        class="form-control"\n        ng-model="editorState.params.legendPosition"\n        ng-options="position.value as position.text for position in vis.type.editorConfig.collections.legendPositions"\n      >\n      </select>\n    </div>\n  </div>\n\n  <div class="kuiSideBarFormRow">\n    <label class="kuiSideBarFormRow__label" for="showTooltip">\n      Show Tooltip\n    </label>\n    <div class="kuiSideBarFormRow__control">\n      <input id="showTooltip" type="checkbox" ng-model="editorState.params.addTooltip">\n    </div>\n  </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";__webpack_require__(840);var _modules=__webpack_require__(2);var _point_series_options=__webpack_require__(4064);var _point_series_options2=_interopRequireDefault(_point_series_options);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");_module.directive("pointSeriesOptions",function(){return{restrict:"E",template:_point_series_options2.default,replace:true}})},function(module,exports){module.exports='<div>\n  <div class="vis-option-item" ng-show="vis.hasSchemaAgg(\'segment\', \'date_histogram\')">\n    <label>\n      <input type="checkbox" ng-model="editorState.params.addTimeMarker" ng-checked="editorState.params.addTimeMarker">\n      Current time marker\n    </label>\n  </div>\n  <div class="vis-option-item">\n    <label>\n      <input type="checkbox" ng-model="editorState.params.setYExtents">\n      Set Y-Axis Extents\n    </label>\n    <div ng-if="editorState.params.setYExtents">\n      <label>\n        y-max\n        <input name="yMax"\n               class="form-control"\n               type="number"\n               step="0.1"\n               greater-than="{{editorState.params.yAxis.min}}"\n               ng-model="editorState.params.yAxis.max"\n               ng-required="editorState.params.setYExtents">\n      </label>\n      <div ng-show="editorState.params.yAxis.min >= editorState.params.yAxis.max">\n        <span class="text-danger">Max must be greater than min</span>\n      </div>\n      <label>\n        y-min\n        <input name="yMin"\n               class="form-control"\n               type="number"\n               step="0.1"\n               less-than="{{editorState.params.yAxis.max}}"\n               greater-than="{{editorState.params.scale === \'log\' ? 0 : \'\'}}"\n               ng-model="editorState.params.yAxis.min"\n               ng-required="editorState.params.setYExtents">\n      </label>\n    </div>\n    <div ng-show="editorState.params.setYExtents && editorState.params.scale === \'log\' && editorState.params.yAxis.min <= 0">\n      <span class="text-danger">Min must exceed 0 when a log scale is selected</span>\n    </div>\n    <div class="vis-option-item">\n      <label>\n        <input type="checkbox" ng-model="editorState.params.defaultYExtents" ng-disabled="editorState.params.setYExtents">\n        Scale Y-Axis to Data Bounds\n      </label>\n    </div>\n    <div class="vis-option-item">\n      <label>\n        <input type="checkbox" ng-model="editorState.params.orderBucketsBySum">\n        Order buckets by descending sum\n      </label>\n    </div>\n  </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(2);var _line_interpolation_option=__webpack_require__(4066);var _line_interpolation_option2=_interopRequireDefault(_line_interpolation_option);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");_module.directive("lineInterpolationOption",function(){return{restrict:"E",template:_line_interpolation_option2.default,replace:true}})},function(module,exports){module.exports='<div>\n  <label>\n    Line Mode\n  </label>\n  <select\n    class="form-control"\n    ng-model="editorState.params.interpolate"\n    ng-options="mode.value as mode.text for mode in vis.type.params.interpolationModes"\n  >\n  </select>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(2);var _heatmap_options=__webpack_require__(4068);var _heatmap_options2=_interopRequireDefault(_heatmap_options);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");_module.directive("heatmapOptions",function(){return{restrict:"E",template:_heatmap_options2.default,replace:true,link:function link($scope){$scope.collections=$scope.vis.type.editorConfig.collections;var verticalRotation=270;$scope.showColorRange=false;$scope.showLabels=false;$scope.customColors=false;$scope.valueAxis=$scope.editorState.params.valueAxes[0];$scope.options={rotateLabels:$scope.valueAxis.labels.rotate===verticalRotation};$scope.$watch("options.rotateLabels",function(rotate){$scope.editorState.params.valueAxes[0].labels.rotate=rotate?verticalRotation:0});$scope.resetColors=function(){$scope.uiState.set("vis.colors",null);$scope.customColors=false};$scope.toggleColorRangeSection=function(){var checkbox=arguments.length>0&&void 0!==arguments[0]&&arguments[0];$scope.showColorRange=!$scope.showColorRange;checkbox&&!$scope.editorState.params.setColorRange&&($scope.showColorRange=false);checkbox||!$scope.showColorRange||$scope.editorState.params.setColorRange||($scope.editorState.params.setColorRange=true)};$scope.toggleLabelSection=function(){var checkbox=arguments.length>0&&void 0!==arguments[0]&&arguments[0];$scope.showLabels=!$scope.showLabels;checkbox&&!$scope.valueAxis.labels.show&&($scope.showLabels=false);$scope.showLabels&&!$scope.valueAxis.labels.show&&($scope.editorState.params.valueAxes[0].labels.show=true)};$scope.getGreaterThan=function(index){if(0===index)return;return $scope.editorState.params.colorsRange[index-1].to};$scope.addRange=function(){var previousRange=_lodash2.default.last($scope.editorState.params.colorsRange);var from=previousRange?previousRange.to:0;$scope.editorState.params.colorsRange.push({from:from,to:null})};$scope.removeRange=function(index){$scope.editorState.params.colorsRange.splice(index,1)};$scope.getColor=function(index){var defaultColors=this.uiState.get("vis.defaultColors");var overwriteColors=this.uiState.get("vis.colors");var colors=defaultColors?_lodash2.default.defaults({},overwriteColors,defaultColors):overwriteColors;return colors?Object.values(colors)[index]:"transparent"};$scope.uiState.on("colorChanged",function(){$scope.customColors=true})}}})},function(module,exports){module.exports='<div>\n  <div class="kuiSideBarFormRow">\n    <label class="kuiSideBarFormRow__label" for="colorSchema">\n      Color Schema\n    </label>\n    <div class="kuiSideBarFormRow__control">\n      <select\n        id="colorSchema"\n        class="kuiSelect kuiSideBarSelect"\n        ng-model="editorState.params.colorSchema"\n        ng-options="mode for mode in collections.colorSchemas"\n      ></select>\n    </div>\n    <div\n      class="text-info text-center"\n      ng-show="customColors"\n      ng-click="resetColors()"\n      kbn-accessible-click\n    >\n      reset colors\n    </div>\n  </div>\n\n  <div class="kuiSideBarFormRow">\n    <label class="kuiSideBarFormRow__label" for="invertColors">\n      Reverse Color Schema\n    </label>\n    <div class="kuiSideBarFormRow__control">\n      <input class="kuiCheckBox" id="invertColors" type="checkbox" ng-model="editorState.params.invertColors">\n    </div>\n  </div>\n\n  <div class="kuiSideBarFormRow">\n    <label class="kuiSideBarFormRow__label" for="axisScale">\n      Color Scale\n    </label>\n    <div class="kuiSideBarFormRow__control">\n      <select\n        id="axisScale"\n        class="kuiSelect kuiSideBarSelect"\n        ng-model="editorState.params.valueAxes[0].scale.type"\n        ng-options="mode for mode in collections.scales"\n      ></select>\n    </div>\n  </div>\n\n  <div class="kuiSideBarFormRow">\n    <label class="kuiSideBarFormRow__label" for="defaultYExtents">\n      Scale to Data Bounds\n    </label>\n    <div class="kuiSideBarFormRow__control">\n      <input class="kuiCheckBox" id="defaultYExtents" type="checkbox" ng-model="editorState.params.valueAxes[0].scale.defaultYExtents">\n    </div>\n  </div>\n\n  <div class="kuiSideBarFormRow" ng-if="!editorState.params.setColorRange">\n    <label class="kuiSideBarFormRow__label" for="percentageMode">\n      Percentage Mode\n    </label>\n    <div class="kuiSideBarFormRow__control">\n      <input class="kuiCheckBox" id="percentageMode" type="checkbox" ng-model="editorState.params.percentageMode">\n    </div>\n  </div>\n\n  <div class="kuiSideBarFormRow" ng-if="!editorState.params.setColorRange">\n    <label class="kuiSideBarFormRow__label" for="colorsNumber">\n      Number of colors\n    </label>\n    <div class="kuiSideBarFormRow__control">\n      <input\n        id="colorsNumber"\n        class="kuiSideBarInput"\n        ng-model="editorState.params.colorsNumber"\n        type="number"\n        greater-than="1"\n        less-than="11"\n      >\n    </div>\n  </div>\n\n  <div>\n    <div class="kuiSideBarCollapsibleTitle">\n      <div\n        class="kuiSideBarCollapsibleTitle__label"\n        ng-click="toggleColorRangeSection()"\n        kbn-accessible-click\n        aria-expanded="{{!!showColorRange}}"\n        aria-controls="heatmapOptionsRanges"\n        aria-label="Toggle custom ranges options"\n      >\n        <span\n          aria-hidden="true"\n          ng-class="{ \'fa-caret-down\': showColorRange, \'fa-caret-right\': !showColorRange }"\n          class="kuiIcon fa-caret-right kuiSideBarCollapsibleTitle__caret"\n        ></span>\n        <span class="kuiSideBarCollapsibleTitle__text">\n          Custom Ranges\n        </span>\n      </div>\n      <input\n        aria-label="Enable custom ranges"\n        ng-model="editorState.params.setColorRange"\n        type="checkbox"\n        class="kuiSideBarSectionTitle__action"\n        ng-click="toggleColorRangeSection(true)"\n        kbn-accessible-click\n      >\n    </div>\n\n    <div\n      id="heatmapOptionsRanges"\n      ng-if="editorState.params.setColorRange"\n      ng-show="showColorRange"\n      class="kuiSideBarCollapsibleSection"\n    >\n      <div class="kuiSideBarSection">\n        <table class="vis-editor-agg-editor-ranges form-group" ng-show="editorState.params.colorsRange.length">\n          <tr>\n            <th scope="col">\n              <label id="heatmapCustomRangeFrom">From</label>\n            </th>\n            <th scope="col" colspan="2">\n              <label id="heatmapCustomRangeTo">To</label>\n            </th>\n          </tr>\n\n          <tr ng-repeat="range in editorState.params.colorsRange track by $index">\n            <td>\n              <input\n                aria-labelledby="heatmapCustomRangeFrom"\n                ng-model="range.from"\n                type="number"\n                class="form-control"\n                name="range.from"\n                greater-or-equal-than="{{getGreaterThan($index)}}"\n                step="any" />\n            </td>\n            <td>\n              <input\n                aria-labelledby="heatmapCustomRangeTo"\n                ng-model="range.to"\n                type="number"\n                class="form-control"\n                name="range.to"\n                greater-than="range.from"\n                step="any" />\n            </td>\n            <td>\n              <button\n                type="button"\n                ng-click="removeRange($index)"\n                class="kuiButton kuiButton--danger kuiButton--small"\n              >\n                <span class="kuiIcon fa-times"></span>\n              </button>\n            </td>\n          </tr>\n        </table>\n\n        <div class="hintbox" ng-show="!editorState.params.colorsRange.length">\n          <p>\n            <span class="kuiIcon fa-danger text-danger"></span>\n            <strong>Required:</strong> You must specify at least one range.\n          </p>\n        </div>\n\n        <button\n          ng-click="addRange()"\n          class="kuiButton kuiButton--primary kuiButton--fullWidth"\n        >\n          Add Range\n        </button>\n        <div class="euiSpacer euiSpacer--s"></div>\n        <div class="text text-center text-info">Note: colors can be changed in the legend</div>\n      </div>\n    </div>\n  </div>\n  <div>\n    <div class="kuiSideBarCollapsibleTitle">\n      <div\n        class="kuiSideBarCollapsibleTitle__label"\n        ng-click="toggleLabelSection()"\n        kbn-accessible-click\n        aria-expanded="{{!!showLabels}}"\n        aria-controls="heatmapOptionsLabels"\n      >\n        <span\n          aria-hidden="true"\n          ng-class="{\n          \'fa-caret-down\': showLabels,\n          \'fa-caret-right\': !showLabels\n          }"\n          class="kuiIcon fa-caret-right kuiSideBarCollapsibleTitle__caret"\n        ></span>\n        <span class="kuiSideBarCollapsibleTitle__text">\n          Show Labels\n        </span>\n      </div>\n      <input\n        aria-label="Show labels"\n        ng-model="editorState.params.valueAxes[0].labels.show"\n        type="checkbox"\n        class="kuiSideBarSectionTitle__action"\n      >\n    </div>\n    <div\n      id="heatmapOptionsLabels"\n      ng-if="editorState.params.valueAxes[0].labels.show"\n      ng-show="showLabels"\n      class="kuiSideBarCollapsibleSection"\n    >\n      <div class="kuiSideBarSection">\n        <div class="kuiSideBarFormRow">\n          <label class="kuiSideBarFormRow__label" for="rotateLabels">\n            Rotate\n          </label>\n          <div class="kuiSideBarFormRow__control">\n            <input class="kuiCheckBox" id="rotateLabels" type="checkbox" ng-model="options.rotateLabels">\n          </div>\n        </div>\n\n        <div class="kuiSideBarFormRow">\n          <label class="kuiSideBarFormRow__label" for="overwriteColor">\n            Overwrite automatic color\n          </label>\n          <div class="kuiSideBarFormRow__control">\n            <input class="kuiCheckBox" id="overwriteColor" type="checkbox" ng-model="editorState.params.valueAxes[0].labels.overwriteColor">\n          </div>\n        </div>\n\n        <div class="kuiSideBarFormRow" ng-show="editorState.params.valueAxes[0].labels.overwriteColor">\n          <label class="kuiSideBarFormRow__label" for="labelColor">\n            Color\n          </label>\n          <div class="kuiSideBarFormRow__control">\n            <input\n              id="labelColor"\n              class="kuiSideBarInput"\n              ng-model="editorState.params.valueAxes[0].labels.color"\n            >\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(2);var _gauge_options=__webpack_require__(4070);var _gauge_options2=_interopRequireDefault(_gauge_options);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");_module.directive("gaugeOptions",function(){return{restrict:"E",template:_gauge_options2.default,replace:true,link:function link($scope){$scope.collections=$scope.vis.type.editorConfig.collections;$scope.showColorRange=true;$scope.$watch("editorState.params.gauge.gaugeType",function(type){switch(type){case"Arc":$scope.editorState.params.gauge.type="meter";$scope.editorState.params.gauge.minAngle=void 0;$scope.editorState.params.gauge.maxAngle=void 0;break;case"Circle":$scope.editorState.params.gauge.type="meter";$scope.editorState.params.gauge.minAngle=0;$scope.editorState.params.gauge.maxAngle=2*Math.PI;break;case"Metric":$scope.editorState.params.gauge.type="simple"}});var updateLegend=function updateLegend(){$scope.editorState.params.gauge.style.bgColor||$scope.editorState.params.gauge.style.labelColor?$scope.editorState.params.addLegend=true:$scope.editorState.params.addLegend=false};$scope.$watch("editorState.params.gauge.gaugeColorMode",function(newValue){switch(newValue){case"Labels":$scope.editorState.params.gauge.style.labelColor=true;$scope.editorState.params.gauge.style.bgColor=false;break;case"Background":$scope.editorState.params.gauge.style.labelColor=false;$scope.editorState.params.gauge.style.bgColor=true;break;case"None":$scope.editorState.params.gauge.style.labelColor=false;$scope.editorState.params.gauge.style.bgColor=false}updateLegend()});$scope.resetColors=function(){$scope.uiState.set("vis.colors",null);$scope.customColors=false};$scope.getGreaterThan=function(index){if(0===index)return 0;return $scope.editorState.params.gauge.colorsRange[index-1].to};$scope.addRange=function(){var previousRange=_lodash2.default.last($scope.editorState.params.gauge.colorsRange);var from=previousRange?previousRange.to:0;var to=previousRange?from+(previousRange.to-previousRange.from):100;$scope.editorState.params.gauge.colorsRange.push({from:from,to:to})};$scope.removeRange=function(index){$scope.editorState.params.gauge.colorsRange.splice(index,1)};$scope.getColor=function(index){var defaultColors=this.uiState.get("vis.defaultColors");var overwriteColors=this.uiState.get("vis.colors");var colors=defaultColors?_lodash2.default.defaults({},overwriteColors,defaultColors):overwriteColors;return colors?Object.values(colors)[index]:"transparent"};$scope.uiState.on("colorChanged",function(){$scope.customColors=true})}}})},function(module,exports){module.exports='<div class="kuiSideBarSection">\n  <div class="kuiSideBarFormRow">\n    <label class="kuiSideBarFormRow__label" for="gaugeType">\n      Gauge Type\n    </label>\n    <div class="kuiSideBarFormRow__control">\n      <select\n        id="gaugeType"\n        class="kuiSelect kuiSideBarSelect"\n        ng-model="editorState.params.gauge.gaugeType"\n        ng-options="mode for mode in collections.gaugeTypes"\n      ></select>\n    </div>\n  </div>\n\n  <div class="kuiSideBarFormRow">\n    <label class="kuiSideBarFormRow__label" for="percentageMode">\n      Percentage Mode\n    </label>\n    <div class="kuiSideBarFormRow__control">\n      <input class="kuiCheckBox" id="percentageMode" type="checkbox" ng-model="editorState.params.gauge.percentageMode">\n    </div>\n  </div>\n\n  <div class="kuiSideBarFormRow" ng-hide="editorState.params.gauge.type === \'simple\'">\n    <label class="kuiSideBarFormRow__label" for="verticalSplit">\n      Vertical Split\n    </label>\n    <div class="kuiSideBarFormRow__control">\n      <input class="kuiCheckBox" id="verticalSplit" type="checkbox" ng-model="editorState.params.gauge.verticalSplit">&nbsp;\n      <icon-tip\n        content="\'Shows gauges one under another\'"\n        position="\'right\'"\n      ></icon-tip>\n    </div>\n  </div>\n\n  <div class="kuiSideBarFormRow">\n    <label class="kuiSideBarFormRow__label" for="displayWarnings">\n      Display warnings\n    </label>\n\n    <div class="kuiSideBarFormRow__control">\n      <input class="kuiCheckBox" id="displayWarnings" type="checkbox" ng-model="editorState.params.isDisplayWarning">\n      &nbsp;\n      <icon-tip\n        content="\'Turns on/off warnings. When turned on, a warning will be shown if not all labels could be displayed.\'"\n        position="\'right\'"\n      ></icon-tip>\n    </div>\n  </div>\n\n  <div class="kuiSideBarFormRow">\n    <label class="kuiSideBarFormRow__label" for="addLegend">\n      Show Legend\n    </label>\n    <div class="kuiSideBarFormRow__control">\n      <input class="kuiCheckBox" id="addLegend" type="checkbox" ng-model="editorState.params.addLegend">\n    </div>\n  </div>\n\n  <div class="kuiSideBarFormRow">\n    <label class="kuiSideBarFormRow__label" for="showLabels">\n      Show Labels\n    </label>\n    <div class="kuiSideBarFormRow__control">\n      <input class="kuiCheckBox" id="showLabels" type="checkbox" ng-model="editorState.params.gauge.labels.show">\n    </div>\n  </div>\n\n  <div class="kuiSideBarFormRow" ng-show="editorState.params.gauge.labels.show">\n    <label class="kuiSideBarFormRow__label" for="subText">\n      Sub Text\n    </label>\n    <div class="kuiSideBarFormRow__control">\n      <input\n        id="subText"\n        class="kuiInput kuiSideBarInput"\n        ng-model="editorState.params.gauge.style.subText"\n        type="text"\n      >\n    </div>\n  </div>\n\n  <div\n    class="kuiSideBarFormRow"\n    ng-hide="editorState.params.gauge.type === \'simple\'"\n    ng-show="editorState.params.gauge.colorsRange.length > 1"\n  >\n    <label class="kuiSideBarFormRow__label" for="extendRange">\n      Auto Extend Range\n    </label>\n    <div class="kuiSideBarFormRow__control">\n      <input class="kuiCheckBox" id="extendRange" type="checkbox" ng-model="editorState.params.gauge.extendRange">\n      &nbsp;\n      <icon-tip\n        content="\'Extends range to the maximum value in your data\'"\n        position="\'right\'"\n      ></icon-tip>\n    </div>\n  </div>\n\n  <div>\n    <div class="kuiSideBarCollapsibleTitle">\n      <div\n        kbn-accessible-click\n        aria-expanded="{{!!showColorRange}}"\n        aria-controls="gaugeOptionsRanges"\n        aria-label="Toggle range options"\n        class="kuiSideBarCollapsibleTitle__label"\n        ng-click="showColorRange = !showColorRange"\n      >\n      <span\n        aria-hidden="true"\n        ng-class="{ \'fa-caret-down\': showColorRange, \'fa-caret-right\': !showColorRange }"\n        class="fa fa-caret-right kuiSideBarCollapsibleTitle__caret"\n      ></span>\n        <span class="kuiSideBarCollapsibleTitle__text">\n        Ranges\n      </span>\n      </div>\n    </div>\n\n    <div id="gaugeOptionsRanges" ng-show="showColorRange" class="kuiSideBarCollapsibleSection">\n      <div class="kuiSideBarSection">\n        <table class="vis-editor-agg-editor-ranges form-group" ng-show="editorState.params.gauge.colorsRange.length">\n          <tr>\n            <th scope="col">\n              <label id="gaugeOptionsCustomRangeFrom">From</label>\n            </th>\n            <th scope="col" colspan="2">\n              <label id="gaugeOptionsCustomRangeTo">To</label>\n            </th>\n          </tr>\n\n          <tr ng-repeat="range in editorState.params.gauge.colorsRange track by $index">\n            <td>\n              <input\n                aria-labelledby="gaugeOptionsCustomRangeFrom"\n                ng-model="range.from"\n                type="number"\n                class="form-control"\n                name="range.from"\n                greater-or-equal-than="{{getGreaterThan($index)}}"\n                required\n                step="any" />\n            </td>\n            <td>\n              <input\n                aria-labelledby="gaugeOptionsCustomRangeTo"\n                ng-model="range.to"\n                type="number"\n                class="form-control"\n                name="range.to"\n                greater-or-equal-than="{{range.from}}"\n                required\n                step="any" />\n            </td>\n            <td>\n              <button\n                type="button"\n                ng-click="removeRange($index)"\n                ng-show="editorState.params.gauge.colorsRange.length > 1"\n                class="kuiButton kuiButton--danger kuiButton--small">\n                <i class="fa fa-times"></i>\n              </button>\n            </td>\n          </tr>\n        </table>\n\n        <div class="hintbox" ng-show="!editorState.params.gauge.colorsRange.length">\n          <p>\n            <i class="fa fa-danger text-danger"></i>\n            <strong>Required:</strong> You must specify at least one range.\n          </p>\n        </div>\n\n        <div\n          ng-click="addRange()"\n          class="kuiButton kuiButton--primary kuiButton--fullWidth">\n          Add Range\n        </div>\n        <div class="euiSpacer euiSpacer--s"></div>\n        <div class="text text-center text-info">Note: colors can be changed in the legend</div>\n      </div>\n    </div>\n  </div>\n  <div ng-show="editorState.params.gauge.colorsRange.length > 1">\n    <div class="kuiSideBarCollapsibleTitle">\n      <div\n        kbn-accessible-click\n        aria-expanded="{{!!showColorOptions}}"\n        aria-controls="gaugeOptionsColors"\n        aria-label="Toggle color options"\n        class="kuiSideBarCollapsibleTitle__label"\n        ng-click="showColorOptions = !showColorOptions"\n      >\n      <span\n        aria-hidden="true"\n        ng-class="{\n        \'fa-caret-down\': showColorOptions,\n        \'fa-caret-right\': !showColorOptions\n        }"\n        class="fa fa-caret-right kuiSideBarCollapsibleTitle__caret"\n      ></span>\n        <span class="kuiSideBarCollapsibleTitle__text">\n        Color Options\n      </span>\n      </div>\n    </div>\n    <div id="gaugeOptionsColors" ng-if="showColorOptions" class="kuiSideBarCollapsibleSection">\n      <div class="kuiSideBarSection">\n        <div class="kuiSideBarFormRow">\n          <label class="kuiSideBarFormRow__label" for="colorSchema">\n            Color Schema\n          </label>\n          <div class="kuiSideBarFormRow__control">\n            <select\n              id="colorSchema"\n              class="kuiSelect kuiSideBarSelect"\n              ng-model="editorState.params.gauge.colorSchema"\n              ng-options="mode for mode in collections.colorSchemas"\n            ></select>\n          </div>\n          <div class="text-info text-center" ng-show="customColors" ng-click="resetColors()">reset colors</div>\n        </div>\n\n        <div class="kuiSideBarFormRow">\n          <label class="kuiSideBarFormRow__label" for="invertColors">\n            Reverse Color Schema\n          </label>\n          <div class="kuiSideBarFormRow__control">\n            <input class="kuiCheckBox" id="invertColors" type="checkbox" ng-model="editorState.params.gauge.invertColors">\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div>\n    <div class="kuiSideBarCollapsibleTitle">\n      <div\n        kbn-accessible-click\n        aria-expanded="{{!!showStyle}}"\n        aria-controls="gaugeOptionsStyle"\n        aria-label="Toggle style options"\n        class="kuiSideBarCollapsibleTitle__label"\n        ng-click="showStyle = !showStyle"\n      >\n        <span\n          aria-hidden="true"\n          ng-class="{\n          \'fa-caret-down\': showStyle,\n          \'fa-caret-right\': !showStyle\n          }"\n          class="fa fa-caret-right kuiSideBarCollapsibleTitle__caret"\n        ></span>\n        <span class="kuiSideBarCollapsibleTitle__text">\n          Style\n        </span>\n      </div>\n    </div>\n    <div id="gaugeOptionsStyle" ng-if="showStyle" class="kuiSideBarCollapsibleSection">\n\n      <div class="kuiSideBarSection">\n        <div ng-hide="editorState.params.gauge.type === \'simple\'">\n          <div class="kuiSideBarFormRow" ng-show="editorState.params.gauge.colorsRange.length > 1">\n            <label class="kuiSideBarFormRow__label" for="labelColor">\n              Color Labels\n            </label>\n            <div class="kuiSideBarFormRow__control">\n              <input class="kuiCheckBox" id="labelColor" type="checkbox" ng-model="editorState.params.gauge.style.labelColor">\n            </div>\n          </div>\n          <div class="kuiSideBarFormRow">\n            <label class="kuiSideBarFormRow__label" for="showScale">\n              Show Scale\n            </label>\n            <div class="kuiSideBarFormRow__control">\n              <input class="kuiCheckBox" id="showScale" type="checkbox" ng-model="editorState.params.gauge.scale.show">\n            </div>\n          </div>\n        </div>\n        <div ng-show="editorState.params.gauge.type === \'simple\'">\n          <div class="kuiSideBarFormRow">\n            <label class="kuiSideBarFormRow__label" for="gaugeColorMode">\n              Color\n            </label>\n            <div class="kuiSideBarFormRow__control">\n              <select\n                id="gaugeColorMode"\n                class="kuiSelect kuiSideBarSelect"\n                ng-model="editorState.params.gauge.gaugeColorMode"\n                ng-options="mode for mode in collections.gaugeColorMode"\n              ></select>\n            </div>\n          </div>\n          <div class="kuiSideBarFormRow">\n            <label class="kuiSideBarFormRow__label" for="backColor">\n              Back/Text Color\n            </label>\n            <div class="kuiSideBarFormRow__control">\n              <input\n                id="backTextColor"\n                class="kuiInput kuiSideBarInput"\n                ng-model="editorState.params.gauge.style.bgFill"\n              >\n            </div>\n          </div>\n          <div class="kuiSideBarFormRow">\n            <label class="kuiSideBarFormRow__label" for="showScale">\n              Font Size (<span ng-bind="editorState.params.gauge.style.fontSize"></span>pt)\n            </label>\n            <div class="kuiSideBarFormRow__control">\n              <input type="range" ng-model="editorState.params.gauge.style.fontSize" class="form-control" min="12" max="120" />\n            </div>\n          </div>\n        </div>\n\n      </div>\n    </div>\n  </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";__webpack_require__(4072);__webpack_require__(4074);__webpack_require__(4076);__webpack_require__(4078)},function(module,exports,__webpack_require__){"use strict";var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _modules=__webpack_require__(2);var _value_axes=__webpack_require__(4073);var _value_axes2=_interopRequireDefault(_value_axes);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");_module.directive("vislibValueAxes",function(){return{restrict:"E",template:_value_axes2.default,replace:true,link:function link($scope){var isCategoryAxisHorizontal=true;function mapPosition(position){switch(position){case"bottom":return"left";case"top":return"right";case"left":return"bottom";case"right":return"top"}}function mapPositionOpposite(position){switch(position){case"bottom":return"top";case"top":return"bottom";case"left":return"right";case"right":return"left"}}$scope.rotateOptions=[{name:"horizontal",value:0},{name:"vertical",value:90},{name:"angled",value:75}];$scope.$watch("editorState.params.categoryAxes[0].position",function(position){isCategoryAxisHorizontal=["top","bottom"].includes(position);$scope.editorState.params.valueAxes.forEach(function(axis){var axisIsHorizontal=["top","bottom"].includes(axis.position);if(axisIsHorizontal===isCategoryAxisHorizontal){axis.position=mapPosition(axis.position);$scope.updateAxisName(axis)}})});$scope.getSeries=function(axis){var isFirst=$scope.editorState.params.valueAxes[0]===axis;var series=$scope.editorState.params.seriesParams.filter(function(series){return series.valueAxis===axis.id||isFirst&&!series.valueAxis});return series.map(function(series){return series.data.label}).join(", ")};$scope.getSeriesShort=function(axis){var maxStringLength=30;return $scope.getSeries(axis).substring(0,maxStringLength)};$scope.isPositionDisabled=function(position){if(isCategoryAxisHorizontal)return["top","bottom"].includes(position);return["left","right"].includes(position)};$scope.addValueAxis=function(){var firstAxis=$scope.editorState.params.valueAxes[0];var newAxis=_lodash2.default.cloneDeep(firstAxis);newAxis.id="ValueAxis-"+$scope.editorState.params.valueAxes.reduce(function(value,axis){if("ValueAxis-"===axis.id.substr(0,10)){var num=parseInt(axis.id.substr(10));num>=value&&(value=num+1)}return value},1);newAxis.position=mapPositionOpposite(firstAxis.position);var axisName=_lodash2.default.capitalize(newAxis.position)+"Axis-";newAxis.name=axisName+$scope.editorState.params.valueAxes.reduce(function(value,axis){if(axis.name.substr(0,axisName.length)===axisName){var num=parseInt(axis.name.substr(axisName.length));num>=value&&(value=num+1)}return value},1);$scope.editorState.params.valueAxes.push(newAxis);return newAxis};$scope.removeValueAxis=function(axis){$scope.editorState.params.valueAxes.length>1&&_lodash2.default.remove($scope.editorState.params.valueAxes,function(valAxis){return valAxis.id===axis.id})};$scope.updateExtents=function(axis){if(!axis.scale.setYExtents){delete axis.scale.min;delete axis.scale.max}};$scope.updateAxisName=function(axis){var axisName=_lodash2.default.capitalize(axis.position)+"Axis-";axis.name=axisName+$scope.editorState.params.valueAxes.reduce(function(value,axis){if(axis.name.substr(0,axisName.length)===axisName){var num=parseInt(axis.name.substr(axisName.length));num>=value&&(value=num+1)}return value},1)};var lastAxisTitles={};$scope.updateAxisTitle=function(){$scope.editorState.params.valueAxes.forEach(function(axis,axisNumber){var label="";var isFirst=0===axisNumber;var matchingSeries=[];$scope.editorState.params.seriesParams.forEach(function(series,i){var isMatchingSeries=isFirst&&!series.valueAxis||series.valueAxis===axis.id;if(isMatchingSeries){var seriesNumber=0;$scope.editorState.aggs.forEach(function(agg){if("metric"===agg.schema.name){seriesNumber===i&&matchingSeries.push(agg);seriesNumber++}})}});1===matchingSeries.length&&(label=matchingSeries[0].makeLabel());if(lastAxisTitles[axis.id]!==label&&""!==label){lastAxisTitles[axis.id]=label;axis.title.text=label}})};$scope.$watch(function(){return $scope.editorState.aggs.map(function(agg){return agg.makeLabel()}).join()},function(){$scope.updateAxisTitle()})}}})},function(module,exports){module.exports='<div class="kuiSideBarSection kuiSideBarSection__main">\n  <div class="kuiSideBarSectionTitle">\n    <div class="kuiSideBarSectionTitle__text">\n      Y-Axes\n    </div>\n\n    <button\n      data-test-subj="visualizeAddYAxisButton"\n      aria-label="Add Y axis"\n      ng-click="addValueAxis()"\n      tooltip="Add Y axis"\n      tooltip-append-to-body="true"\n      type="button"\n      class="kuiIcon fa-plus kuiSideBarSectionTitle__action"\n    ></button>\n  </div>\n\n  <div\n    ng-repeat="axis in editorState.params.valueAxes track by axis.id"\n    class="kuiSideBarSection"\n  >\n    <div class="kuiSideBarCollapsibleTitle">\n      <div\n        data-test-subj="toggleYAxisOptions-{{axis.id}}"\n        class="kuiSideBarCollapsibleTitle__label"\n        ng-click="isValueAxisOpen = !isValueAxisOpen"\n        kbn-accessible-click\n        aria-expanded="{{!!isValueAxisOpen}}"\n        aria-controls="axisOptions{{axis.id}}"\n        aria-label="Toggle {{axis.name}} options"\n      >\n        <span\n          aria-hidden="true"\n          ng-class="{ \'fa-caret-down\': isValueAxisOpen, \'fa-caret-right\': !isValueAxisOpen }"\n          class="kuiIcon fa-caret-right kuiSideBarCollapsibleTitle__caret"\n        ></span>\n        <span class="kuiSideBarCollapsibleTitle__text">\n          {{axis.name}}\n        </span>\n      </div>\n\n      <div tooltip="{{getSeries(axis)}}">{{getSeriesShort(axis)}}</div>\n\n      <button\n        ng-hide="editorState.params.valueAxes.length === 1"\n        aria-label="Remove Y axis"\n        ng-click="removeValueAxis(axis)"\n        tooltip="Remove Y axis"\n        tooltip-append-to-body="true"\n        type="button"\n        class="kuiIcon fa-remove kuiSideBarCollapsibleTitle__action"\n      ></button>\n    </div>\n\n    <div id="axisOptions{{axis.id}}" ng-show="isValueAxisOpen" class="kuiSideBarCollapsibleSection">\n      \x3c!-- General --\x3e\n      <div class="kuiSideBarSection">\n        <div class="kuiSideBarFormRow">\n          <label class="kuiSideBarFormRow__label" for="{ \'valueAxisShow\' + $index }">\n            Show\n          </label>\n          <div class="kuiSideBarFormRow__control">\n            <input class="kuiCheckBox" id="{ \'valueAxisShow\' + $index }" type="checkbox" ng-model="axis.show">\n          </div>\n        </div>\n\n        <div class="kuiSideBarFormRow">\n          <label class="kuiSideBarFormRow__label" for="{{ \'valueAxisTitle\' + $index }}">\n            Title\n          </label>\n          <div class="kuiSideBarFormRow__control">\n            <input\n              id="{{ \'valueAxisTitle\' + $index }}"\n              class="kuiInput kuiSideBarInput"\n              type="text"\n              ng-model="axis.title.text"\n            >\n          </div>\n        </div>\n\n        <div class="kuiSideBarFormRow">\n          <label class="kuiSideBarFormRow__label" for="{{ \'valueAxisPosition\' + $index }}">\n            Position\n          </label>\n          <div class="kuiSideBarFormRow__control">\n            <select\n              id="{{ \'valueAxisPosition\' + $index }}"\n              class="kuiSelect kuiSideBarSelect"\n              ng-change="updateAxisName(axis)"\n              ng-model="axis.position"\n              ng-options="mode disable when isPositionDisabled(mode) for mode in vis.type.editorConfig.collections.positions"\n            ></select>\n          </div>\n        </div>\n\n        <div class="kuiSideBarFormRow">\n          <label class="kuiSideBarFormRow__label" for="{{ \'valueAxisMode\' + $index }}">\n            Mode\n          </label>\n          <div class="kuiSideBarFormRow__control">\n            <select\n              id="{{ \'valueAxisMode\' + $index }}"\n              class="kuiSelect kuiSideBarSelect"\n              ng-model="axis.scale.mode"\n              ng-options="mode for mode in vis.type.editorConfig.collections.axisModes"\n            ></select>\n          </div>\n        </div>\n\n        <div class="kuiSideBarFormRow">\n          <label class="kuiSideBarFormRow__label" for="{{ \'valueAxisScaleType\' + $index }}">\n            Scale Type\n          </label>\n          <div class="kuiSideBarFormRow__control">\n            <select\n              data-test-subj="scaleSelectYAxis-{{axis.id}}"\n              id="{{ \'valueAxisScaleType\' + $index }}"\n              class="kuiSelect kuiSideBarSelect"\n              ng-model="axis.scale.type"\n              ng-options="type for type in vis.type.editorConfig.collections.scaleTypes"\n            ></select>\n          </div>\n        </div>\n      </div>\n\n      \x3c!-- Advanced options --\x3e\n      <div class="kuiSideBarSection">\n        <a\n          data-test-subj="toggleYAxisAdvancedOptions-{{axis.id}}"\n          class="kuiSideBarOptionsLink"\n          ng-click="isValueAxisAdvancedOptionsOpen = !isValueAxisAdvancedOptionsOpen"\n          kbn-accessible-click\n        >\n          <span\n            aria-hidden="true"\n            ng-class="{ \'fa-caret-down\': isValueAxisAdvancedOptionsOpen, \'fa-caret-right\': !isValueAxisAdvancedOptionsOpen }"\n            class="kuiIcon fa-caret-right kuiSideBarOptionsLink__caret"\n          ></span>\n          <span class="kuiSideBarOptionsLink__text">\n            <span ng-show="!isValueAxisAdvancedOptionsOpen">\n              Show\n            </span>\n            <span ng-show="isValueAxisAdvancedOptionsOpen">\n              Hide\n            </span>\n            Advanced Options\n          </span>\n        </a>\n\n        <div ng-show="isValueAxisAdvancedOptionsOpen">\n\n          \x3c!-- Labels --\x3e\n          <div class="kuiSideBarSection">\n            <h6 class="kuiSideBarFormSectionTitle">\n              Labels\n            </h6>\n\n            <div class="kuiSideBarFormRow">\n              <label class="kuiSideBarFormRow__label" for="{{ \'valueAxisShowLabels\' + $index }}">\n                Show Labels\n              </label>\n              <div class="kuiSideBarFormRow__control">\n                <input class="kuiCheckBox" id="{{ \'valueAxisShowLabels\' + $index }}" type="checkbox" ng-model="axis.labels.show">\n              </div>\n            </div>\n\n            <div class="kuiSideBarFormRow">\n              <label class="kuiSideBarFormRow__label" for="{{ \'valueAxisFilterLabels\' + $index }}">\n                Filter Labels\n              </label>\n              <div class="kuiSideBarFormRow__control">\n                <input\n                  data-test-subj="yAxisFilterLabelsCheckbox-{{axis.id}}"\n                  class="kuiCheckBox"\n                  id="{{ \'valueAxisFilterLabels\' + $index }}"\n                  type="checkbox"\n                  ng-model="axis.labels.filter"\n                >\n              </div>\n            </div>\n\n            <div class="kuiSideBarFormRow">\n              <label class="kuiSideBarFormRow__label" for="{{ \'valueAxisRotateLabels\' + $index }}">\n                Rotate\n              </label>\n              <div class="kuiSideBarFormRow__control">\n                <select\n                  id="{{ \'valueAxisRotateLabels\' + $index }}"\n                  class="kuiSelect kuiSideBarSelect"\n                  ng-model="axis.labels.rotate"\n                  ng-options="mode.value as mode.name for mode in rotateOptions"\n                ></select>\n              </div>\n            </div>\n\n            <div class="kuiSideBarFormRow">\n              <label class="kuiSideBarFormRow__label" for="{{ \'valueAxisTruncateLabels\' + $index }}">\n                Truncate\n              </label>\n              <div class="kuiSideBarFormRow__control">\n                <input\n                  id="{{ \'valueAxisTruncateLabels\' + $index }}"\n                  class="kuiInput kuiSideBarInput"\n                  type="number"\n                  ng-model="axis.labels.truncate"\n                >\n              </div>\n            </div>\n          </div>\n\n          \x3c!-- Custom Extents --\x3e\n          <div class="kuiSideBarSection">\n            <h6 class="kuiSideBarFormSectionTitle">\n              Custom Extents\n            </h6>\n\n            <div class="kuiSideBarFormRow">\n              <label class="kuiSideBarFormRow__label" for="{ \'defaultYExtents\' + $index }">\n                Scale to Data Bounds\n              </label>\n              <div class="kuiSideBarFormRow__control">\n                <input class="kuiCheckBox" id="{ \'defaultYExtents\' + $index }" type="checkbox" ng-model="axis.scale.defaultYExtents">\n              </div>\n            </div>\n\n            <div class="kuiSideBarFormRow">\n              <label class="kuiSideBarFormRow__label" for="{ \'setYExtents\' + $index }">\n                Set Axis Extents\n              </label>\n              <div class="kuiSideBarFormRow__control">\n                <input class="kuiCheckBox" id="{ \'setYExtents\' + $index }" type="checkbox" ng-model="axis.scale.setYExtents" ng-change="updateExtents(axis)">\n              </div>\n            </div>\n\n            <div ng-if="axis.scale.setYExtents">\n              <div class="kuiSideBarFormRow">\n                <label class="kuiSideBarFormRow__label">\n                  Max\n                </label>\n                <div class="kuiSideBarFormRow__control">\n                  <input\n                    name="yMax"\n                    class="kuiInput kuiSideBarInput"\n                    type="number"\n                    step="0.1"\n                    ng-model="axis.scale.max"\n                  >\n                </div>\n              </div>\n\n              <div class="kuiSideBarFormRow">\n                <label class="kuiSideBarFormRow__label">\n                  Min\n                </label>\n                <div class="kuiSideBarFormRow__control">\n                  <input\n                    name="yMin"\n                    class="kuiInput kuiSideBarInput"\n                    type="number"\n                    step="0.1"\n                    greater-than="{{axis.scale.type === \'log\' ? 0 : \'\'}}"\n                    ng-model="axis.scale.min"\n                  >\n                </div>\n              </div>\n              <div ng-show="axis.scale.type === \'log\' && axis.scale.min <= 0">\n                <span class="text-danger">Min must exceed 0 when a log scale is selected</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div style="height: 10px"></div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(2);var _category_axis=__webpack_require__(4075);var _category_axis2=_interopRequireDefault(_category_axis);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");_module.directive("vislibCategoryAxis",function(){return{restrict:"E",template:_category_axis2.default,replace:true,link:function link($scope){$scope.rotateOptions=[{name:"horizontal",value:0},{name:"vertical",value:90},{name:"angled",value:75}]}}})},function(module,exports){module.exports='<div class="kuiSideBarSection kuiSideBarSection__main">\n  <div class="kuiSideBarSectionTitle">\n    <div class="kuiSideBarSectionTitle__text">\n      X-Axis\n    </div>\n  </div>\n\n  \x3c!-- General --\x3e\n  <div class="kuiSideBarSection">\n    <div class="kuiSideBarFormRow">\n      <label class="kuiSideBarFormRow__label" for="categoryAxisShow">\n        Show\n      </label>\n      <div class="kuiSideBarFormRow__control">\n        <input class="kuiCheckBox" id="categoryAxisShow" type="checkbox" ng-model="editorState.params.categoryAxes[0].show">\n      </div>\n    </div>\n\n    <div class="kuiSideBarFormRow">\n      <label class="kuiSideBarFormRow__label" for="categoryAxisPosition">\n        Position\n      </label>\n      <div class="kuiSideBarFormRow__control">\n        <select\n          id="categoryAxisPosition"\n          class="kuiSelect kuiSideBarSelect"\n          ng-model="editorState.params.categoryAxes[0].position"\n          ng-options="mode for mode in vis.type.editorConfig.collections.positions"\n        ></select>\n      </div>\n    </div>\n  </div>\n\n  \x3c!-- Advanced options --\x3e\n  <div class="kuiSideBarSection">\n    <a\n      class="kuiSideBarOptionsLink"\n      ng-click="isCategoryAxisAdvancedOptionsOpen = !isCategoryAxisAdvancedOptionsOpen"\n      kbn-accessible-click\n    >\n      <span\n        aria-hidden="true"\n        ng-class="{ \'fa-caret-down\': isCategoryAxisAdvancedOptionsOpen, \'fa-caret-right\': !isCategoryAxisAdvancedOptionsOpen }"\n        class="kuiIcon fa-caret-right kuiSideBarOptionsLink__caret"\n      ></span>\n      <span class="kuiSideBarOptionsLink__text">\n        <span ng-show="!isCategoryAxisAdvancedOptionsOpen">\n          Show\n        </span>\n        <span ng-show="isCategoryAxisAdvancedOptionsOpen">\n          Hide\n        </span>\n        Advanced Options\n      </span>\n    </a>\n\n    <div ng-show="isCategoryAxisAdvancedOptionsOpen">\n      \x3c!-- Labels --\x3e\n      <div class="kuiSideBarSection">\n        <h6 class="kuiSideBarFormSectionTitle">\n          Labels\n        </h6>\n\n        <div class="kuiSideBarFormRow">\n          <label class="kuiSideBarFormRow__label" for="categoryAxisShowLabels">\n            Show Labels\n          </label>\n          <div class="kuiSideBarFormRow__control">\n            <input class="kuiCheckBox" id="categoryAxisShowLabels" type="checkbox" ng-model="editorState.params.categoryAxes[0].labels.show">\n          </div>\n        </div>\n\n        <div class="kuiSideBarFormRow">\n          <label class="kuiSideBarFormRow__label" for="categoryAxisShowFilter">\n            Filter Labels\n          </label>\n          <div class="kuiSideBarFormRow__control">\n            <input class="kuiCheckBox" id="categoryAxisShowFilter" type="checkbox" ng-model="editorState.params.categoryAxes[0].labels.filter">\n          </div>\n        </div>\n\n        <div class="kuiSideBarFormRow">\n          <label class="kuiSideBarFormRow__label" for="categoryAxisRotateLabels">\n            Rotate\n          </label>\n          <div class="kuiSideBarFormRow__control">\n            <select\n              id="categoryAxisRotateLabels"\n              class="kuiSelect kuiSideBarSelect"\n              ng-model="editorState.params.categoryAxes[0].labels.rotate"\n              ng-options="mode.value as mode.name for mode in rotateOptions"\n            ></select>\n          </div>\n        </div>\n\n        <div class="kuiSideBarFormRow">\n          <label class="kuiSideBarFormRow__label" for="categoryAxisTruncateLabels">\n            Truncate\n          </label>\n          <div class="kuiSideBarFormRow__control">\n            <input\n              id="categoryAxisTruncateLabels"\n              class="kuiInput kuiSideBarInput"\n              type="number"\n              ng-model="editorState.params.categoryAxes[0].labels.truncate"\n            >\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _modules=__webpack_require__(2);var _series=__webpack_require__(4077);var _series2=_interopRequireDefault(_series);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");_module.directive("vislibSeries",function(){return{restrict:"E",template:_series2.default,replace:true,link:function link($scope){function makeSerie(id,label){var last=$scope.series[$scope.series.length-1];return{show:true,mode:last?last.mode:"normal",type:last?last.type:"line",drawLinesBetweenPoints:!last||last.drawLinesBetweenPoints,showCircles:!last||last.showCircles,interpolate:last?last.interpolate:"linear",lineWidth:last?last.lineWidth:2,data:{id:id,label:label},valueAxis:last?last.valueAxis:$scope.editorState.params.valueAxes[0].id}}$scope.series=$scope.editorState.params.seriesParams;$scope.$watch(function(){return $scope.editorState.aggs.map(function(agg){return agg.makeLabel()}).join()},function(){var schemaTitle=$scope.vis.type.schemas.metrics[0].title;var metrics=$scope.editorState.aggs.filter(function(agg){var isMetric=agg.type&&"metrics"===agg.type.type;return isMetric&&agg.schema.title===schemaTitle});$scope.editorState.params.seriesParams=metrics.map(function(agg){var params=$scope.editorState.params.seriesParams.find(function(param){return param.data.id===agg.id});if(params){params.data.label=agg.makeLabel();return params}var series=makeSerie(agg.id,agg.makeLabel());return series})});$scope.$watch(function(){return $scope.editorState.params.seriesParams.map(function(series){return series.type}).join()},function(){var types=_lodash2.default.uniq(_lodash2.default.map($scope.editorState.params.seriesParams,"type"));$scope.vis.type.type=1===types.length?types[0]:"histogram"});$scope.$watch("editorState.params.valueAxes.length",function(){$scope.editorState.params.seriesParams.forEach(function(series){$scope.editorState.params.valueAxes.find(function(axis){return axis.id===series.valueAxis})||(series.valueAxis=$scope.editorState.params.valueAxes[0].id)})});$scope.changeValueAxis=function(index){var series=$scope.editorState.params.seriesParams[index];if("new"===series.valueAxis){var axis=$scope.addValueAxis();series.valueAxis=axis.id}$scope.updateAxisTitle()}}}})},function(module,exports){module.exports='<div class="kuiSideBarSection kuiSideBarSection__main">\n  <div class="kuiSideBarSectionTitle">\n    <div class="kuiSideBarSectionTitle__text">\n      Metrics\n    </div>\n  </div>\n\n  <div\n    ng-repeat="chart in editorState.params.seriesParams track by $index"\n    class="kuiSideBarSection"\n  >\n    <div class="kuiSideBarCollapsibleTitle">\n      <div\n        ng-init="isSeriesOpen = ($index === 0)"\n        class="kuiSideBarCollapsibleTitle__label"\n        ng-click="isSeriesOpen = !isSeriesOpen"\n        kbn-accessible-click\n        aria-expanded="{{!!isSeriesOpen}}"\n        aria-controls="visSeriesOptions{{$index}}"\n        aria-label="Toggle {{chart.data.label}} options"\n      >\n        <span\n          aria-hidden="true"\n          ng-class="{ \'fa-caret-down\': isSeriesOpen, \'fa-caret-right\': !isSeriesOpen }"\n          class="kuiIcon fa-caret-right kuiSideBarCollapsibleTitle__caret"\n        ></span>\n        <span class="kuiSideBarCollapsibleTitle__text">\n          {{chart.data.label}}\n        </span>\n      </div>\n    </div>\n\n    <div id="visSeriesOptions{{$index}}" ng-show="isSeriesOpen" class="kuiSideBarCollapsibleSection">\n      \x3c!-- General --\x3e\n      <div class="kuiSideBarSection">\n\n        <div class="kuiSideBarFormRow">\n          <label class="kuiSideBarFormRow__label" for="{{ \'seriesType\' + $index }}">\n            Chart Type\n          </label>\n          <div class="kuiSideBarFormRow__control">\n            <select\n              id="{{ \'seriesType\' + $index }}"\n              class="kuiSelect kuiSideBarSelect"\n              ng-model="chart.type"\n              ng-options="mode.value as mode.text for mode in vis.type.editorConfig.collections.chartTypes"\n            ></select>\n          </div>\n        </div>\n\n        <div class="kuiSideBarFormRow">\n          <label class="kuiSideBarFormRow__label" for="{{ \'seriesMode\' + $index }}">\n            Mode\n          </label>\n          <div class="kuiSideBarFormRow__control">\n            <select\n              id="{{ \'seriesMode\' + $index }}"\n              class="kuiSelect kuiSideBarSelect"\n              ng-model="chart.mode"\n              ng-options="mode for mode in vis.type.editorConfig.collections.chartModes"\n            ></select>\n          </div>\n        </div>\n\n        <div class="kuiSideBarFormRow">\n          <label class="kuiSideBarFormRow__label" for="{{ \'seriesValueAxis\' + $index }}">\n            Value Axis\n          </label>\n          <div class="kuiSideBarFormRow__control">\n            <select\n              id="{{ \'seriesValueAxis\' + $index }}"\n              class="kuiSelect kuiSideBarSelect"\n              ng-model="chart.valueAxis"\n              ng-change="changeValueAxis($index)"\n            >\n              <option ng-repeat="axis in editorState.params.valueAxes track by axis.id" value="{{axis.id}}">{{axis.name}}</option>\n              <option value="new">New Axis ...</option>\n            </select>\n          </div>\n        </div>\n\n        <div ng-show="chart.type == \'line\' || chart.type == \'area\'">\n          <div class="kuiSideBarFormRow">\n            <label class="kuiSideBarFormRow__label" for="{{ \'lineMode\' + $index }}">\n              Line Mode\n            </label>\n            <div class="kuiSideBarFormRow__control">\n              <select\n                id="{{ \'lineMode\' + $index }}"\n                class="kuiSelect kuiSideBarSelect"\n                ng-model="chart.interpolate"\n                ng-options="mode.value as mode.text for mode in vis.type.editorConfig.collections.interpolationModes"\n              >\n              </select>\n            </div>\n          </div>\n        </div>\n        <div ng-show="chart.type == \'line\'">\n          <div class="kuiSideBarFormRow">\n            <label class="kuiSideBarFormRow__label" for="{{ \'drawLines\' + $index }}">\n              Show Line\n            </label>\n            <div class="kuiSideBarFormRow__control">\n              <input class="kuiCheckBox" id="{{ \'drawLines\' + $index }}" type="checkbox" ng-model="chart.drawLinesBetweenPoints">\n            </div>\n          </div>\n\n          <div class="kuiSideBarFormRow">\n            <label class="kuiSideBarFormRow__label" for="{{ \'showCircles\' + $index }}">\n              Show Circles\n            </label>\n            <div class="kuiSideBarFormRow__control">\n              <input class="kuiCheckBox" id="{{ \'showCircles\' + $index }}" type="checkbox" ng-model="chart.showCircles">\n            </div>\n          </div>\n\n          <div class="kuiSideBarFormRow">\n            <label class="kuiSideBarFormRow__label">\n              Line Width\n            </label>\n            <div class="kuiSideBarFormRow__control">\n              <input name="lineWidth"\n                     class="kuiInput kuiSideBarInput"\n                     type="number"\n                     step="0.5"\n                     ng-model="chart.lineWidth"\n              >\n            </div>\n          </div>\n\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div style="height: 10px"></div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(2);var _grid=__webpack_require__(4079);var _grid2=_interopRequireDefault(_grid);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");_module.directive("vislibGrid",function(){return{restrict:"E",template:_grid2.default,replace:true,link:function link($scope){$scope.isGridOpen=true}}})},function(module,exports){module.exports='<div>\n  <div class="kuiSideBarCollapsibleTitle">\n    <div\n      class="kuiSideBarCollapsibleTitle__label"\n      ng-click="isGridOpen = !isGridOpen"\n      kbn-accessible-click\n      aria-expanded="{{!!isGridOpen}}"\n      aria-controls="visGridOptions"\n      aria-label="Toggle grid options"\n    >\n      <span\n        aria-hidden="true"\n        ng-class="{ \'fa-caret-down\': isGridOpen, \'fa-caret-right\': !isGridOpen }"\n        class="kuiIcon fa-caret-right kuiSideBarCollapsibleTitle__caret"\n      ></span>\n      <span class="kuiSideBarCollapsibleTitle__text">\n        Grid\n      </span>\n    </div>\n  </div>\n\n  <div id="visGridOptions" ng-show="isGridOpen" class="kuiSideBarCollapsibleSection">\n    \x3c!-- General --\x3e\n    <div class="kuiSideBarSection">\n      <div class="kuiSideBarFormRow">\n        <label class="kuiSideBarFormRow__label" for="showCategoryLines">\n          X-Axis Lines\n        </label>\n        <div class="kuiSideBarFormRow__control">\n          <input class="kuiCheckBox" id="showCategoryLines" type="checkbox" ng-model="editorState.params.grid.categoryLines">\n        </div>\n      </div>\n\n      <div class="kuiSideBarFormRow">\n        <label class="kuiSideBarFormRow__label" for="gridAxis">\n          Y-Axis Lines\n        </label>\n        <div class="kuiSideBarFormRow__control">\n          <select\n            id="gridAxis"\n            class="kuiSelect kuiSideBarSelect"\n            ng-model="editorState.params.grid.valueAxis"\n            ng-options="axis.id as axis.name for axis in editorState.params.valueAxes track by axis.id"\n          >\n            <option value="">Don\'t show</option>\n          </select>\n        </div>\n      </div>\n\n    </div>\n\n  </div>\n'},function(module,exports,__webpack_require__){"use strict";var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _vislib_vis_legend=__webpack_require__(4081);var _vislib_vis_legend2=_interopRequireDefault(_vislib_vis_legend);var _data=__webpack_require__(885);var _filter_bar_click_handler=__webpack_require__(608);var _modules=__webpack_require__(2);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana").directive("vislibLegend",function(Private,getAppState,$timeout){var Data=Private(_data.VislibLibDataProvider);var filterBarClickHandler=Private(_filter_bar_click_handler.FilterBarClickHandlerProvider);return{restrict:"E",template:_vislib_vis_legend2.default,link:function link($scope){var $state=getAppState();var clickHandler=filterBarClickHandler($state);$scope.legendId=(0,_eui.htmlIdGenerator)()("legend");$scope.open=$scope.uiState.get("vis.legendOpen",true);$scope.$watch("visData",function(data){if(!data)return;$scope.data=data});$scope.$watch("refreshLegend",function(){refresh()});$scope.highlight=function(event){var el=event.currentTarget;var handler=$scope.vis.vislibVis.handler;if(!handler||"function"!==typeof handler.highlight)return;handler.highlight.call(el,handler.el)};$scope.unhighlight=function(event){var el=event.currentTarget;var handler=$scope.vis.vislibVis.handler;if(!handler||"function"!==typeof handler.unHighlight)return;handler.unHighlight.call(el,handler.el)};$scope.setColor=function(label,color){var colors=$scope.uiState.get("vis.colors")||{};colors[label]===color?delete colors[label]:colors[label]=color;$scope.uiState.setSilent("vis.colors",null);$scope.uiState.set("vis.colors",colors);$scope.uiState.emit("colorChanged");refresh()};$scope.toggleLegend=function(){var bwcAddLegend=$scope.vis.params.addLegend;var bwcLegendStateDefault=null==bwcAddLegend||bwcAddLegend;$scope.open=!$scope.uiState.get("vis.legendOpen",bwcLegendStateDefault);$timeout(function(){$scope.uiState.set("vis.legendOpen",$scope.open)})};$scope.getToggleLegendClasses=function(){switch($scope.vis.params.legendPosition){case"top":return $scope.open?"fa-chevron-circle-up":"fa-chevron-circle-down";case"bottom":return $scope.open?"fa-chevron-circle-down":"fa-chevron-circle-up";case"left":return $scope.open?"fa-chevron-circle-left":"fa-chevron-circle-right";case"right":default:return $scope.open?"fa-chevron-circle-right":"fa-chevron-circle-left"}};$scope.filter=function(legendData,negate){clickHandler({point:legendData,negate:negate})};$scope.canFilter=function(legendData){var filters=clickHandler({point:legendData},true)||[];return filters.length};$scope.onLegendEntryKeydown=function(event,scope){if(event.keyCode===_eui.keyCodes.ESCAPE&&scope.showDetails){event.preventDefault();event.stopPropagation();scope.showDetails=false}};$scope.colors=["#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#508642","#CCA300","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#7EB26D","#EAB839","#6ED0E0","#EF843C","#E24D42","#1F78C1","#BA43A9","#705DA0","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"];function refresh(){var vislibVis=$scope.vis.vislibVis;if(!vislibVis||!vislibVis.visConfig){$scope.labels=[{label:"loading ..."}];return}null==$scope.uiState.get("vis.legendOpen")&&null!=$scope.vis.params.addLegend&&($scope.open=$scope.vis.params.addLegend);if(["heatmap","gauge"].includes(vislibVis.visConfigArgs.type)){var labels=vislibVis.getLegendLabels();labels&&($scope.labels=_lodash2.default.map(labels,function(label){return{label:label}}))}else $scope.labels=getLabels($scope.data,vislibVis.visConfigArgs.type);vislibVis.visConfig&&($scope.getColor=vislibVis.visConfig.data.getColorFunc())}function getLabels(data,type){if(!data)return[];data=data.columns||data.rows||[data];if("pie"===type)return Data.prototype.pieNames(data);return getSeriesLabels(data)}function getSeriesLabels(data){var values=data.map(function(chart){return chart.series}).reduce(function(a,b){return a.concat(b)},[]);return _lodash2.default.compact(_lodash2.default.uniq(values,"label"))}}}})},function(module,exports){module.exports='<div class="legend-col-wrapper" ng-if="labels.length">\n  <button\n    type="button"\n    ng-click="toggleLegend()"\n    class="kuiCollapseButton legend-collapse-button"\n    aria-label="Toggle legend"\n    aria-expanded="{{!!open}}"\n    aria-controls="{{::legendId}}"\n  >\n    <span class="kuiIcon {{getToggleLegendClasses()}}"></span>\n  </button>\n  <ul class="legend-ul" ng-show="open" id="{{::legendId}}">\n\n    <li\n      ng-repeat="legendData in labels track by legendData.label"\n      ng-mouseenter="highlight($event)"\n      ng-mouseleave="unhighlight($event)"\n      data-label="{{legendData.label}}"\n      class="legend-value color"\n    >\n\n      <div class="legend-value-container" ng-keydown="onLegendEntryKeydown($event, this)">\n        <div\n          kbn-accessible-click\n          data-label="{{legendData.label}}"\n          ng-focus="highlight($event)"\n          ng-blur="unhighlight($event)"\n          ng-click="showDetails = !showDetails"\n          ng-class="showDetails ? \'legend-value-full\' : \'legend-value-truncate\'"\n          class="legend-value-title"\n          tooltip="{{legendData.label}}"\n          tooltip-animation="false"\n          aria-label="{{legendData.label}}, toggle options"\n          data-test-subj="legend-{{legendData.label}}"\n        >\n          <i\n            class="fa fa-circle"\n            ng-style="{color: getColor(legendData.label)}"\n            data-test-subj="legendSelectedColor-{{getColor(legendData.label)}}"\n          ></i>\n          {{legendData.label}}\n        </div>\n\n        <div ng-if="showDetails" class="legend-value-details">\n          <div\n            class="kuiButtonGroup kuiButtonGroup--united kuiButtonGroup--fullWidth"\n            ng-show="canFilter(legendData)"\n          >\n            <button\n              class="kuiButton kuiButton--basic kuiButton--small"\n              ng-click="filter(legendData, false)"\n              aria-label="Filter for value {{legendData.label}}"\n            >\n              <span class="kuiIcon fa-search-plus"></span>\n            </button>\n\n            <button\n              class="kuiButton kuiButton--basic kuiButton--small"\n              ng-click="filter(legendData, true)"\n              aria-label="Filter out value {{legendData.label}}"\n            >\n              <span class="kuiIcon fa-search-minus"></span>\n            </button>\n          </div>\n\n          <div class="legend-value-color-picker" role="listbox">\n            <span\n              id="{{legendId}}ColorPickerDesc"\n              class="kuiScreenReaderOnly"\n            >\n              Set color for value {{legendData.label}}\n            </span>\n            <i\n              ng-repeat="choice in colors"\n              kbn-accessible-click\n              role="option"\n              aria-label="{{choice}}"\n              aria-describedby="{{legendId}}ColorPickerDesc"\n              aria-selected="{{choice === getColor(legendData.label)}}"\n              ng-click="setColor(legendData.label, choice)"\n              ng-class="choice == getColor(legendData.label) ? \'fa-circle-o\' : \'fa-circle\'"\n              ng-style="{color: choice}" class="fa dot"\n              data-test-subj="legendSelectColor-{{choice}}"\n            >\n            </i>\n          </div>\n\n        </div>\n      </div>\n\n    </li>\n  </ul>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VislibComponentsZeroInjectionInjectZerosProvider=VislibComponentsZeroInjectionInjectZerosProvider;var _ordered_x_keys=__webpack_require__(1469);var _zero_filled_array=__webpack_require__(4085);var _zero_fill_data_array=__webpack_require__(4086);function VislibComponentsZeroInjectionInjectZerosProvider(Private){var orderXValues=Private(_ordered_x_keys.VislibComponentsZeroInjectionOrderedXKeysProvider);var createZeroFilledArray=Private(_zero_filled_array.VislibComponentsZeroInjectionZeroFilledArrayProvider);var zeroFillDataArray=Private(_zero_fill_data_array.VislibComponentsZeroInjectionZeroFillDataArrayProvider);return function(obj,data){var orderBucketsBySum=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var keys=orderXValues(data,orderBucketsBySum);obj.forEach(function(series){var zeroArray=createZeroFilledArray(keys,series.label);series.values=zeroFillDataArray(zeroArray,series.values)});return obj}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VislibComponentsZeroInjectionUniqKeysProvider=VislibComponentsZeroInjectionUniqKeysProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _flatten_data=__webpack_require__(4084);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function VislibComponentsZeroInjectionUniqKeysProvider(Private){var flattenDataArray=Private(_flatten_data.VislibComponentsZeroInjectionFlattenDataProvider);return function(obj){if(!_lodash2.default.isObject(obj))throw new TypeError("UniqueXValuesUtilService expects an object");var flattenedData=flattenDataArray(obj);var uniqueXValues=new Map;var charts=void 0;charts=obj.series?[obj]:obj.rows?obj.rows:obj.columns;var isDate=charts.every(function(chart){return chart.ordered&&chart.ordered.date});var isOrdered=charts.every(function(chart){return chart.ordered});flattenedData.forEach(function(d,i){var key=d.x;var prev=uniqueXValues.get(key);var sum=d.y;if(prev){i=Math.min(i,prev.index);sum+=prev.sum}uniqueXValues.set(key,{index:i,isDate:isDate,isOrdered:isOrdered,isNumber:_lodash2.default.isNumber(key),sum:sum})});return uniqueXValues}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VislibComponentsZeroInjectionFlattenDataProvider=VislibComponentsZeroInjectionFlattenDataProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function VislibComponentsZeroInjectionFlattenDataProvider(){return function(obj){var charts=void 0;if(!_lodash2.default.isObject(obj)||!obj.rows&&!obj.columns&&!obj.series)throw new TypeError("FlattenDataObjUtilService expects an object with a series, rows, or columns key");obj.series||(charts=obj.rows?obj.rows:obj.columns);return(0,_lodash2.default)(charts||[obj]).pluck("series").flattenDeep().pluck("values").flattenDeep().filter(Boolean).value()}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VislibComponentsZeroInjectionZeroFilledArrayProvider=VislibComponentsZeroInjectionZeroFilledArrayProvider;function VislibComponentsZeroInjectionZeroFilledArrayProvider(){return function(arr,label){if(!Array.isArray(arr))throw new Error("ZeroFilledArrayUtilService expects an array of strings or numbers");var zeroFilledArray=[];arr.forEach(function(val){zeroFilledArray.push({x:val,xi:Infinity,y:0,series:label})});return zeroFilledArray}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VislibComponentsZeroInjectionZeroFillDataArrayProvider=VislibComponentsZeroInjectionZeroFillDataArrayProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function VislibComponentsZeroInjectionZeroFillDataArrayProvider(){return function(arr1,arr2){if(!Array.isArray(arr1)||!Array.isArray(arr2))throw new TypeError("ZeroFillDataArrayUtilService expects 2 arrays");var i=void 0;var val=void 0;var index=void 0;var max=arr2.length;var getX=function getX(d){return d.x===val.x};for(i=0;i<max;i++){val=arr2[i];index=_lodash2.default.findIndex(arr1,getX);arr1.splice(index,1,val)}return arr1}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VislibComponentsLabelsLabelsProvider=VislibComponentsLabelsLabelsProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _data_array=__webpack_require__(4088);var _uniq_labels=__webpack_require__(4090);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function VislibComponentsLabelsLabelsProvider(Private){var createArr=Private(_data_array.VislibComponentsLabelsDataArrayProvider);var getArrOfUniqLabels=Private(_uniq_labels.VislibComponentsLabelsUniqLabelsProvider);return function(obj){if(!_lodash2.default.isObject(obj))throw new TypeError("LabelUtil expects an object");return getArrOfUniqLabels(createArr(obj))}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VislibComponentsLabelsDataArrayProvider=VislibComponentsLabelsDataArrayProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _flatten_series=__webpack_require__(4089);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function VislibComponentsLabelsDataArrayProvider(Private){var flattenSeries=Private(_flatten_series.VislibComponentsLabelsFlattenSeriesProvider);return function(obj){if(!_lodash2.default.isObject(obj)||!obj.rows&&!obj.columns&&!obj.series)throw new TypeError("GetArrayUtilService expects an object with a series, rows, or columns key");if(!obj.series)return flattenSeries(obj);return obj.series}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VislibComponentsLabelsFlattenSeriesProvider=VislibComponentsLabelsFlattenSeriesProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function VislibComponentsLabelsFlattenSeriesProvider(){return function(obj){if(!_lodash2.default.isObject(obj)||!obj.rows&&!obj.columns)throw new TypeError("GetSeriesUtilService expects an object with either a rows or columns key");obj=obj.rows?obj.rows:obj.columns;return _lodash2.default.chain(obj).pluck("series").flattenDeep().value()}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VislibComponentsLabelsUniqLabelsProvider=VislibComponentsLabelsUniqLabelsProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function VislibComponentsLabelsUniqLabelsProvider(){return function(arr){if(!Array.isArray(arr))throw new TypeError("UniqLabelUtil expects an array of objects");return(0,_lodash2.default)(arr).pluck("label").unique().value()}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VislibComponentsColorColorProvider=VislibComponentsColorColorProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _mapped_colors=__webpack_require__(4092);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function VislibComponentsColorColorProvider(Private){var mappedColors=Private(_mapped_colors.VisColorMappedColorsProvider);return function(arrayOfStringsOrNumbers,colorMapping){colorMapping=colorMapping||{};if(!Array.isArray(arrayOfStringsOrNumbers))throw new Error("ColorUtil expects an array");arrayOfStringsOrNumbers.forEach(function(val){if(!_lodash2.default.isString(val)&&!_lodash2.default.isNumber(val)&&!_lodash2.default.isUndefined(val))throw new TypeError("ColorUtil expects an array of strings, numbers, or undefined values")});mappedColors.mapKeys(arrayOfStringsOrNumbers);return function(value){return colorMapping[value]||mappedColors.get(value)}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();exports.VisColorMappedColorsProvider=VisColorMappedColorsProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _d=__webpack_require__(19);var _d2=_interopRequireDefault(_d);var _color_palette=__webpack_require__(1470);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function VisColorMappedColorsProvider(config,$rootScope){var standardizeColor=function standardizeColor(color){return _d2.default.rgb(color).toString()};function getConfigColorMapping(){return _lodash2.default.mapValues(config.get("visualization:colorMapping"),standardizeColor)}var MappedColors=function(){function MappedColors(){var _this=this;_classCallCheck(this,MappedColors);$rootScope.$on("$routeChangeStart",function(){return _this.purge()});this.oldMap={};this.mapping={}}_createClass(MappedColors,[{key:"get",value:function get(key){return getConfigColorMapping()[key]||this.mapping[key]}},{key:"flush",value:function flush(){this.oldMap=_lodash2.default.clone(this.mapping);this.mapping={}}},{key:"purge",value:function purge(){this.oldMap={};this.mapping={}}},{key:"mapKeys",value:function mapKeys(keys){var _this2=this;var configMapping=getConfigColorMapping();var configColors=_lodash2.default.values(configMapping);var oldColors=_lodash2.default.values(this.oldMap);var keysToMap=[];_lodash2.default.each(keys,function(key){configMapping[key]&&delete _this2.mapping[key];_lodash2.default.contains(configColors,_this2.mapping[key])&&keysToMap.push(key);_this2.oldMap[key]&&(_this2.mapping[key]=_this2.oldMap[key]);null==_this2.get(key)&&keysToMap.push(key)});var allColors=(0,_lodash2.default)(this.mapping).values().union(configColors).union(oldColors).value();var colorPalette=(0,_color_palette.createColorPalette)(allColors.length+keysToMap.length);var newColors=_lodash2.default.difference(colorPalette,allColors);while(keysToMap.length>newColors.length)newColors=newColors.concat(_lodash2.default.sample(allColors,keysToMap.length-newColors.length));_lodash2.default.merge(this.mapping,_lodash2.default.zipObject(keysToMap,newColors))}}]);return MappedColors}();return new MappedColors}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PointSeriesGetSeriesProvider=PointSeriesGetSeriesProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _get_point=__webpack_require__(4094);var _add_to_siri=__webpack_require__(4095);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function PointSeriesGetSeriesProvider(Private){var getPoint=Private(_get_point.PointSeriesGetPointProvider);var addToSiri=Private(_add_to_siri.PointSeriesAddToSiriProvider);return function getSeries(rows,chart){var aspects=chart.aspects;var multiY=Array.isArray(aspects.y);var yScale=chart.yScale;var partGetPoint=_lodash2.default.partial(getPoint,aspects.x,aspects.series,yScale);var series=(0,_lodash2.default)(rows).transform(function(series,row){if(!multiY){var point=partGetPoint(row,aspects.y,aspects.z);point&&addToSiri(series,point,point.series,point.series,aspects.y.agg);return}aspects.y.forEach(function(y){var point=partGetPoint(row,y,aspects.z);if(!point)return;var seriesId=y.agg.id;var seriesLabel=y.col.title;if(aspects.series){var prefix=point.series?point.series+": ":"";seriesId=prefix+seriesId;seriesLabel=prefix+seriesLabel}addToSiri(series,point,seriesId,seriesLabel,y.agg)})},new Map).thru(function(series){return[].concat(_toConsumableArray(series.values()))}).value();multiY&&(series=_lodash2.default.sortBy(series,function(siri){var firstVal=siri.values[0];var y=void 0;if(firstVal){var agg=firstVal.aggConfigResult.aggConfig;y=_lodash2.default.find(aspects.y,function(y){return y.agg===agg})}return y?y.i:series.length}));return series}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PointSeriesGetPointProvider=PointSeriesGetPointProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function PointSeriesGetPointProvider(){function unwrap(aggConfigResult,def){return aggConfigResult?aggConfigResult.value:def}return function getPoint(x,series,yScale,row,y,z){var zRow=z&&row[z.i];var xRow=row[x.i];var point={x:unwrap(xRow,"_all"),y:unwrap(row[y.i]),z:zRow&&unwrap(zRow),aggConfigResult:row[y.i],extraMetrics:_lodash2.default.compact([zRow]),yScale:yScale};if("NaN"===point.y)return;if(series){var seriesArray=series.length?series:[series];point.aggConfig=seriesArray[0].agg;point.series=seriesArray.map(function(s){return s.agg.fieldFormatter()(unwrap(row[s.i]))}).join(" - ")}else if(y){point.aggConfig=y.col.aggConfig;point.series=y.col.title}yScale&&(point.y*=yScale);return point}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PointSeriesAddToSiriProvider=PointSeriesAddToSiriProvider;function PointSeriesAddToSiriProvider(){return function addToSiri(series,point,id,label,agg){id=null==id?"":id+"";if(series.has(id)){series.get(id).values.push(point);return}series.set(id,{label:null==label?id:label,aggLabel:agg.type?agg.type.makeLabel(agg):label,aggId:agg.parentId?agg.parentId:agg.id,count:0,values:[point]})}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PointSeriesGetAspectsProvider=PointSeriesGetAspectsProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _fake_x_aspect=__webpack_require__(4097);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function PointSeriesGetAspectsProvider(Private){var fakeXAspect=Private(_fake_x_aspect.PointSeriesFakeXAxisProvider);var map={segment:"x",metric:"y",radius:"z",width:"width",group:"series"};function columnToAspect(aspects,col,i){var schema=col.aggConfig.schema.name;var name=map[schema];if(!name)throw new TypeError('unknown schema name "'+schema+'"');var aspect={i:i,col:col,agg:col.aggConfig};aspects[name]||(aspects[name]=[]);aspects[name].push(aspect)}return function getAspects(vis,table){var aspects=(0,_lodash2.default)(table.columns).transform(columnToAspect,{}).transform(function(aspects,group,name){if("y"!==name&&"series"!==name&&group.length>1)throw new TypeError("Only multiple metrics and series are supported in point series");aspects[name]=group.length>1?group:group[0]}).value();aspects.x||(aspects.x=fakeXAspect(vis));return aspects}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PointSeriesFakeXAxisProvider=PointSeriesFakeXAxisProvider;var _agg_config=__webpack_require__(296);var _agg_type=__webpack_require__(822);function PointSeriesFakeXAxisProvider(){var allAgg=new _agg_type.AggType({name:"all",title:"All docs",ordered:false,hasNoDsl:true});return function makeFakeXAxis(vis){var fake=new _agg_config.AggConfig(vis,{type:allAgg,schema:vis.type.schemas.all.byName.segment});return{i:-1,agg:fake,col:{aggConfig:fake,label:fake.makeLabel()}}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PointSeriesInitYAxisProvider=PointSeriesInitYAxisProvider;function PointSeriesInitYAxisProvider(){return function initYAxis(chart){var y=chart.aspects.y;if(Array.isArray(y)){chart.yAxisFormatter=y[0].agg.fieldFormatter();chart.yAxisLabel=""}else{chart.yAxisFormatter=y.agg.fieldFormatter();chart.yAxisLabel=y.col.title}var z=chart.aspects.series;if(z)if(Array.isArray(z)){chart.zAxisFormatter=z[0].agg.fieldFormatter();chart.zAxisLabel=""}else{chart.zAxisFormatter=z.agg.fieldFormatter();chart.zAxisLabel=z.col.title}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PointSeriesInitXAxisProvider=PointSeriesInitXAxisProvider;function PointSeriesInitXAxisProvider(){return function initXAxis(chart){var x=chart.aspects.x;chart.xAxisFormatter=x.agg?x.agg.fieldFormatter():String;chart.xAxisLabel=x.col.title;if(!x.agg||!x.agg.type.ordered)return;chart.indexPattern=x.agg.vis.indexPattern;chart.xAxisField=x.agg.params.field;chart.ordered={};var xAggOutput=x.agg.write();xAggOutput.params.interval&&(chart.ordered.interval=xAggOutput.params.interval)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PointSeriesOrderedDateAxisProvider=PointSeriesOrderedDateAxisProvider;var _moment=__webpack_require__(10);var _moment2=_interopRequireDefault(_moment);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function PointSeriesOrderedDateAxisProvider(){return function orderedDateAxis(vis,chart){var xAgg=chart.aspects.x.agg;var buckets=xAgg.buckets;var format=buckets.getScaledDateFormat();chart.xAxisFormatter=function(val){return(0,_moment2.default)(val).format(format)};chart.ordered={date:true,interval:buckets.getInterval()};var axisOnTimeField=xAgg.fieldIsTimeField();var bounds=buckets.getBounds();if(bounds&&axisOnTimeField){chart.ordered.min=bounds.min;chart.ordered.max=bounds.max}else chart.ordered.endzones=false}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PointSeriesTooltipFormatter=PointSeriesTooltipFormatter;var _jquery=__webpack_require__(13);var _jquery2=_interopRequireDefault(_jquery);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function PointSeriesTooltipFormatter($compile,$rootScope){var $tooltipScope=$rootScope.$new();var $tooltip=(0,_jquery2.default)(__webpack_require__(4102));$compile($tooltip)($tooltipScope);return function tooltipFormatter(event){var datum=event.datum;if(!datum||!datum.aggConfigResult)return"";var details=$tooltipScope.details=[];var result={$parent:datum.aggConfigResult};function addDetail(result){var agg=result.aggConfig;var value=result.value;var detail={value:agg.fieldFormatter()(value),label:agg.makeLabel()};if(agg===datum.aggConfigResult.aggConfig){detail.percent=event.percent;null!=datum.yScale&&(detail.value=agg.fieldFormatter()(value*datum.yScale))}details.push(detail)}datum.extraMetrics.forEach(addDetail);while((result=result.$parent)&&result.aggConfig)addDetail(result);$tooltipScope.$apply();return $tooltip[0].outerHTML}}},function(module,exports){module.exports='<table>\n  <tbody>\n    <tr ng-repeat="detail in details" >\n      <td class="tooltip-label">{{detail.label}}</td>\n      <td class="tooltip-value">\n          {{detail.value}}\n          <span ng-if="detail.percent"> ({{detail.percent}})</span>\n      </td>\n    </tr>\n  </tbody>\n</table>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VislibProvider=VislibProvider;__webpack_require__(1473);__webpack_require__(1474);__webpack_require__(1475);__webpack_require__(1476);__webpack_require__(885);__webpack_require__(1477);__webpack_require__(1480);var _vis=__webpack_require__(4132);function VislibProvider(Private){return{version:"0.0.0",Vis:Private(_vis.VislibVisProvider)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.vislibGaugeProvider=vislibGaugeProvider;function vislibGaugeProvider(){return function(config){return config}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VislibLibLayoutTypesColumnLayoutProvider=VislibLibLayoutTypesColumnLayoutProvider;var _chart_split=__webpack_require__(4106);var _y_axis_split=__webpack_require__(4107);var _x_axis_split=__webpack_require__(4108);var _chart_title_split=__webpack_require__(4109);function VislibLibLayoutTypesColumnLayoutProvider(Private){var chartSplit=Private(_chart_split.VislibLibLayoutSplitsColumnChartChartSplitProvider);var yAxisSplit=Private(_y_axis_split.VislibLibLayoutSplitsColumnChartYAxisSplitProvider);var xAxisSplit=Private(_x_axis_split.VislibLibLayoutSplitsColumnChartXAxisSplitProvider);var chartTitleSplit=Private(_chart_title_split.VislibLibLayoutSplitsColumnChartChartTitleSplitProvider);return function(el,data){if(!el||!data)throw new Error("Both an el and data need to be specified");return[{parent:el,type:"div",class:"vis-wrapper",datum:data,children:[{type:"div",class:"y-axis-col-wrapper",children:[{type:"div",class:"y-axis-spacer-block y-axis-spacer-block-top"},{type:"div",class:"y-axis-col axis-wrapper-left",children:[{type:"div",class:"y-axis-chart-title",splits:chartTitleSplit},{type:"div",class:"y-axis-div-wrapper",splits:yAxisSplit}]},{type:"div",class:"y-axis-spacer-block y-axis-spacer-block-bottom"}]},{type:"div",class:"vis-col-wrapper",children:[{type:"div",class:"x-axis-wrapper axis-wrapper-top",children:[{type:"div",class:"x-axis-div-wrapper",splits:xAxisSplit}]},{type:"div",class:"chart-wrapper",splits:chartSplit},{type:"div",class:"vis-alerts"},{type:"div",class:"x-axis-wrapper axis-wrapper-bottom",children:[{type:"div",class:"x-axis-div-wrapper",splits:xAxisSplit},{type:"div",class:"x-axis-chart-title",splits:chartTitleSplit}]}]},{type:"div",class:"y-axis-col-wrapper",children:[{type:"div",class:"y-axis-spacer-block y-axis-spacer-block-top"},{type:"div",class:"y-axis-col axis-wrapper-right",children:[{type:"div",class:"y-axis-div-wrapper",splits:yAxisSplit}]},{type:"div",class:"y-axis-spacer-block y-axis-spacer-block-bottom"}]}]}]}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VislibLibLayoutSplitsColumnChartChartSplitProvider=VislibLibLayoutSplitsColumnChartChartSplitProvider;var _d=__webpack_require__(19);var _d2=_interopRequireDefault(_d);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function VislibLibLayoutSplitsColumnChartChartSplitProvider(){return function split(selection,parent){selection.each(function(data){var div=_d2.default.select(this).attr("class",function(){if(data.rows)return"chart-wrapper-row";if(data.columns)return"chart-wrapper-column";if(parent)return"chart-first chart-last chart-wrapper";return this.className+" chart-wrapper"});var divClass="";var chartsNumber=void 0;var charts=div.selectAll("charts").append("div").data(function(d){if(d.rows){chartsNumber=d.rows.length;return d.rows}if(d.columns){chartsNumber=d.columns.length;return d.columns}divClass="chart";chartsNumber=1;return[d]}).enter().append("div").attr("class",function(d,i){var fullDivClass=divClass;"chart"!==fullDivClass&&(chartsNumber>1?0===i?fullDivClass+=" chart-first":i===chartsNumber-1&&(fullDivClass+=" chart-last"):fullDivClass+=" chart-first chart-last");return fullDivClass});data.series||charts.call(split)})}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VislibLibLayoutSplitsColumnChartYAxisSplitProvider=VislibLibLayoutSplitsColumnChartYAxisSplitProvider;var _d=__webpack_require__(19);var _d2=_interopRequireDefault(_d);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function VislibLibLayoutSplitsColumnChartYAxisSplitProvider(){return function(selection){selection.each(function(){var div=_d2.default.select(this);var rows=void 0;div.selectAll(".y-axis-div").append("div").data(function(d){rows=d.rows?d.rows.length:1;return d.rows?d.rows:[d]}).enter().append("div").attr("class",function(d,i){var divClass="";0===i&&(divClass+=" chart-first");i===rows-1&&(divClass+=" chart-last");return"y-axis-div axis-div"+divClass})})}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VislibLibLayoutSplitsColumnChartXAxisSplitProvider=VislibLibLayoutSplitsColumnChartXAxisSplitProvider;var _d=__webpack_require__(19);var _d2=_interopRequireDefault(_d);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function VislibLibLayoutSplitsColumnChartXAxisSplitProvider(){return function(selection){selection.each(function(){var div=_d2.default.select(this);var columns=void 0;div.selectAll(".x-axis-div").append("div").data(function(d){columns=d.columns?d.columns.length:1;return d.columns?d.columns:[d]}).enter().append("div").attr("class",function(d,i){var divClass="";0===i&&(divClass+=" chart-first");i===columns-1&&(divClass+=" chart-last");return"x-axis-div axis-div"+divClass})})}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VislibLibLayoutSplitsColumnChartChartTitleSplitProvider=VislibLibLayoutSplitsColumnChartChartTitleSplitProvider;var _d=__webpack_require__(19);var _d2=_interopRequireDefault(_d);var _jquery=__webpack_require__(13);var _jquery2=_interopRequireDefault(_jquery);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function VislibLibLayoutSplitsColumnChartChartTitleSplitProvider(){return function(selection){selection.each(function(data){var div=_d2.default.select(this);var parent=(0,_jquery2.default)(this).parents(".vis-wrapper");if(!data.series){div.selectAll(".chart-title").data(function(d){return d.rows?d.rows:d.columns}).enter().append("div").attr("class","chart-title");data.rows?parent.find(".x-axis-chart-title").remove():parent.find(".y-axis-chart-title").remove();return div}return _d2.default.select(this).remove()})}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VislibLibLayoutTypesPieLayoutProvider=VislibLibLayoutTypesPieLayoutProvider;var _chart_split=__webpack_require__(4111);var _chart_title_split=__webpack_require__(4112);function VislibLibLayoutTypesPieLayoutProvider(Private){var chartSplit=Private(_chart_split.VislibLibLayoutSplitsPieChartChartSplitProvider);var chartTitleSplit=Private(_chart_title_split.VislibLibLayoutSplitsPieChartChartTitleSplitProvider);return function(el,data){if(!el||!data)throw new Error("Both an el and data need to be specified");return[{parent:el,type:"div",class:"vis-wrapper",datum:data,children:[{type:"div",class:"y-axis-chart-title",splits:chartTitleSplit},{type:"div",class:"vis-col-wrapper",children:[{type:"div",class:"chart-wrapper",splits:chartSplit},{type:"div",class:"x-axis-chart-title",splits:chartTitleSplit}]}]}]}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VislibLibLayoutSplitsPieChartChartSplitProvider=VislibLibLayoutSplitsPieChartChartSplitProvider;var _d=__webpack_require__(19);var _d2=_interopRequireDefault(_d);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function VislibLibLayoutSplitsPieChartChartSplitProvider(){return function split(selection){selection.each(function(data){var div=_d2.default.select(this).attr("class",function(){return data.rows?"chart-wrapper-row":data.columns?"chart-wrapper-column":"chart-wrapper"});var divClass=void 0;var charts=div.selectAll("charts").append("div").data(function(d){if(d.rows){divClass="chart-row";return d.rows}if(d.columns){divClass="chart-column";return d.columns}divClass="chart";return[d]}).enter().append("div").attr("class",function(){return divClass});data.slices||charts.call(split)})}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VislibLibLayoutSplitsPieChartChartTitleSplitProvider=VislibLibLayoutSplitsPieChartChartTitleSplitProvider;var _d=__webpack_require__(19);var _d2=_interopRequireDefault(_d);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function VislibLibLayoutSplitsPieChartChartTitleSplitProvider(){return function(selection,parent){selection.each(function(data){var div=_d2.default.select(this);if(!data.slices){div.selectAll(".chart-title").append("div").data(function(d){return d.rows?d.rows:d.columns}).enter().append("div").attr("class","chart-title");data.rows?_d2.default.select(parent).select(".x-axis-chart-title").remove():_d2.default.select(parent).select(".y-axis-chart-title").remove();return div}return _d2.default.select(this).remove()})}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GaugeLayoutProvider=GaugeLayoutProvider;var _chart_split=__webpack_require__(4114);var _chart_split2=_interopRequireDefault(_chart_split);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function GaugeLayoutProvider(Private){var chartSplit=Private(_chart_split2.default);return function(el,data){if(!el||!data)throw new Error("Both an el and data need to be specified");return[{parent:el,type:"div",class:"vis-wrapper",datum:data,children:[{type:"div",class:"y-axis-chart-title"},{type:"div",class:"vis-col-wrapper",children:[{type:"div",class:"chart-wrapper",splits:chartSplit},{type:"div",class:"vis-alerts"},{type:"div",class:"x-axis-chart-title"}]}]}]}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=ChartSplitFactory;var _d=__webpack_require__(19);var _d2=_interopRequireDefault(_d);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ChartSplitFactory(){return function split(selection){selection.each(function(data){var div=_d2.default.select(this).attr("class",function(){return data.rows?"chart-wrapper-row":data.columns?"chart-wrapper-column":"chart-wrapper"});var divClass=void 0;var charts=div.selectAll("charts").append("div").data(function(d){if(d.rows){divClass="chart-row";return d.rows}if(d.columns){divClass="chart-column";return d.columns}divClass="chart";return[d]}).enter().append("div").attr("class",function(){return divClass});data.series||charts.call(split)})}}module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();exports.VislibVisualizationsPointSeriesProvider=VislibVisualizationsPointSeriesProvider;var _d=__webpack_require__(19);var _d2=_interopRequireDefault(_d);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _jquery=__webpack_require__(13);var _jquery2=_interopRequireDefault(_jquery);var _tooltip=__webpack_require__(886);var _chart=__webpack_require__(887);var _time_marker=__webpack_require__(4121);var _series_types=__webpack_require__(4122);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function VislibVisualizationsPointSeriesProvider(Private){var Chart=Private(_chart.VislibVisualizationsChartProvider);var Tooltip=Private(_tooltip.TooltipProvider);var TimeMarker=Private(_time_marker.VislibVisualizationsTimeMarkerProvider);var seriTypes=Private(_series_types.VislibVisualizationsSeriesTypesProvider);var touchdownTmpl=_lodash2.default.template(__webpack_require__(4127));var PointSeries=function(_Chart){_inherits(PointSeries,_Chart);function PointSeries(handler,chartEl,chartData){_classCallCheck(this,PointSeries);var _this=_possibleConstructorReturn(this,(PointSeries.__proto__||Object.getPrototypeOf(PointSeries)).call(this,handler,chartEl,chartData));_this.handler=handler;_this.chartData=chartData;_this.chartEl=chartEl;_this.chartConfig=_this.findChartConfig();_this.handler.pointSeries=_this;return _this}_createClass(PointSeries,[{key:"findChartConfig",value:function findChartConfig(){var charts=this.handler.visConfig.get("charts");var chartIndex=this.handler.data.chartData().indexOf(this.chartData);return charts[chartIndex]}},{key:"getSeries",value:function getSeries(seriesId){return this.series.find(function(series){return series.chartData.aggId===seriesId})}},{key:"addBackground",value:function addBackground(svg,width,height){var startX=0;var startY=0;return svg.append("rect").attr("x",startX).attr("y",startY).attr("width",width).attr("height",height).attr("fill","transparent").attr("class","background")}},{key:"addGrid",value:function addGrid(svg){var _svg$node$getBBox=svg.node().getBBox(),width=_svg$node$getBBox.width,height=_svg$node$getBBox.height;return svg.append("g").attr("class","grid").call(this.handler.grid.draw(width,height))}},{key:"addClipPath",value:function addClipPath(svg){var _svg$node$getBBox2=svg.node().getBBox(),width=_svg$node$getBBox2.width,height=_svg$node$getBBox2.height;var startX=0;var startY=0;this.clipPathId="chart-area"+_lodash2.default.uniqueId();return svg.append("clipPath").attr("id",this.clipPathId).append("rect").attr("x",startX).attr("y",startY).attr("width",width).attr("height",height)}},{key:"addEvents",value:function addEvents(svg){var isBrushable=this.events.isBrushable();if(isBrushable){var brush=this.events.addBrushEvent(svg);return svg.call(brush)}}},{key:"createEndZones",value:function createEndZones(svg){var self=this;var xAxis=this.handler.categoryAxes[0];var xScale=xAxis.getScale();var ordered=xAxis.ordered;var isHorizontal=xAxis.axisConfig.isHorizontal();var missingMinMax=!ordered||_lodash2.default.isUndefined(ordered.min)||_lodash2.default.isUndefined(ordered.max);if(missingMinMax||false===ordered.endzones)return;var _svg$node$getBBox3=svg.node().getBBox(),width=_svg$node$getBBox3.width,height=_svg$node$getBBox3.height;var oneUnit=(ordered.units||_lodash2.default.identity)(1);var drawInverted=isHorizontal||xAxis.axisConfig.get("scale.inverted",false);var size=isHorizontal?width:height;var leftEndzone={x:drawInverted?0:Math.max(xScale(ordered.min),0),w:drawInverted?Math.max(xScale(ordered.min),0):height-Math.max(xScale(ordered.min),0)};var expandLastBucket=xAxis.axisConfig.get("scale.expandLastBucket");var rightLastVal=expandLastBucket?ordered.max:Math.min(ordered.max,_lodash2.default.last(xAxis.values));var rightStart=rightLastVal+oneUnit;var rightEndzone={x:drawInverted?xScale(rightStart):0,w:drawInverted?Math.max(size-xScale(rightStart),0):xScale(rightStart)};this.endzones=svg.selectAll(".layer").data([leftEndzone,rightEndzone]).enter().insert("g",".brush").attr("class","endzone").append("rect").attr("class","zone").attr("x",function(d){return isHorizontal?d.x:0}).attr("y",function(d){return isHorizontal?0:d.x}).attr("height",function(d){return isHorizontal?height:d.w}).attr("width",function(d){return isHorizontal?d.w:width});function callPlay(event){var boundData=event.target.__data__;var mouseChartXCoord=event.clientX-self.chartEl.getBoundingClientRect().left;var mouseChartYCoord=event.clientY-self.chartEl.getBoundingClientRect().top;var wholeBucket=boundData&&null!=boundData.x;var min=drawInverted?leftEndzone.w:rightEndzone.w;var max=drawInverted?rightEndzone.x:leftEndzone.x;var xLeft=isHorizontal?mouseChartXCoord:mouseChartYCoord;var xRight=isHorizontal?mouseChartXCoord:mouseChartYCoord;if(wholeBucket){xLeft=xScale(boundData.x);xRight=xScale(xAxis.addInterval(boundData.x))}return{wholeBucket:wholeBucket,touchdown:min>xLeft||max<xRight}}function textFormatter(){return touchdownTmpl(callPlay(_d2.default.event))}var endzoneTT=new Tooltip("endzones",this.handler.el,textFormatter,null);this.tooltips.push(endzoneTT);endzoneTT.order=0;endzoneTT.showCondition=function inEndzone(){return callPlay(_d2.default.event).touchdown};endzoneTT.render()(svg)}},{key:"calculateRadiusLimits",value:function calculateRadiusLimits(data){this.radii=(0,_lodash2.default)(data.series).map(function(series){return _lodash2.default.map(series.values,"z")}).flattenDeep().reduce(function(result,val){result.min>val&&(result.min=val);result.max<val&&(result.max=val);return result},{min:Infinity,max:-Infinity})}},{key:"draw",value:function draw(){var self=this;var $elem=(0,_jquery2.default)(this.chartEl);var width=this.chartConfig.width=$elem.width();var height=this.chartConfig.height=$elem.height();var xScale=this.handler.categoryAxes[0].getScale();var addTimeMarker=this.chartConfig.addTimeMarker;var times=this.chartConfig.times||[];var div=void 0;var svg=void 0;return function(selection){selection.each(function(data){var el=this;div=_d2.default.select(el);svg=div.append("svg").attr("width",width).attr("height",height);self.addBackground(svg,width,height);self.addGrid(svg);self.addClipPath(svg);self.addEvents(svg);self.createEndZones(svg);self.calculateRadiusLimits(data);self.series=[];_lodash2.default.each(self.chartConfig.series,function(seriArgs,i){if(!seriArgs.show)return;var SeriClass=seriTypes[seriArgs.type||self.handler.visConfig.get("chart.type")]||seriTypes.line;var series=new SeriClass(self.handler,svg,data.series[i],seriArgs);series.events=self.events;svg.call(series.draw());self.series.push(series)});if(addTimeMarker){var toTime=new Date(xScale.domain()[1].getTime()+6e4);var currentTime=new Date;toTime>currentTime&&new TimeMarker(times,xScale,height).render(svg)}return svg})}}}]);return PointSeries}(Chart);return PointSeries}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Tooltip=Tooltip;exports.TooltipProvider=TooltipProvider;var _d=__webpack_require__(19);var _d2=_interopRequireDefault(_d);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _binder=__webpack_require__(1478);var _position_tooltip=__webpack_require__(4118);var _jquery=__webpack_require__(13);var _jquery2=_interopRequireDefault(_jquery);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var allContents=[];function Tooltip(id,el,formatter,events){if(!(this instanceof Tooltip))return new Tooltip(id,el,formatter,events);this.id=id;this.el=el;this.order=100;this.formatter=formatter;this.events=events;this.containerClass="vis-wrapper";this.tooltipClass="vis-tooltip";this.tooltipSizerClass="vis-tooltip-sizing-clone";this.showCondition=_lodash2.default.constant(true);this.binder=new _binder.Binder}Tooltip.prototype.$get=_lodash2.default.once(function(){return(0,_jquery2.default)("<div>").addClass(this.tooltipClass).appendTo(document.body)});Tooltip.prototype.$getSizer=_lodash2.default.once(function(){return this.$get().clone().removeClass(this.tooltipClass).addClass(this.tooltipSizerClass).appendTo(document.body)});Tooltip.prototype.show=function(){var $tooltip=this.$get();var $chart=this.$getChart();var html=$tooltip.html();if(!$chart)return;var placement=(0,_position_tooltip.positionTooltip)({$window:(0,_jquery2.default)(window),$chart:$chart,$el:$tooltip,$sizer:this.$getSizer(),event:_d2.default.event},html);$tooltip.css({visibility:"visible",left:placement.left,top:placement.top})};Tooltip.prototype.hide=function(){var $tooltip=this.$get();allContents=[];$tooltip.css({visibility:"hidden",left:"-500px",top:"-500px"})};Tooltip.prototype.$getChart=function(){var chart=(0,_jquery2.default)(this.container&&this.container.node());return!!chart.length&&chart};Tooltip.prototype.render=function(){var self=this;return function(selection){var $tooltip=self.$get();var id=self.id;var order=self.order;void 0!==self.container&&self.container===_d2.default.select(self.el).select("."+self.containerClass)||(self.container=_d2.default.select(self.el).select("."+self.containerClass));var $chart=self.$getChart();$chart&&self.binder.jqOn($chart,"mouseleave",function(){$chart.removeData("previousPlacement")});selection.each(function(d,i){var element=_d2.default.select(this);function render(html){allContents=_lodash2.default.filter(allContents,function(content){return content.id!==id});html&&allContents.push({id:id,html:html,order:order});var allHtml=(0,_lodash2.default)(allContents).sortBy("order").pluck("html").compact().join("\n");if(allHtml){$tooltip.html(allHtml);self.show()}else self.hide()}self.binder.fakeD3Bind(this,"mousemove",function(){if(!self.showCondition.call(element,d,i))return render();var events=self.events?self.events.eventResponse(d,i):d;return render(self.formatter(events))});self.binder.fakeD3Bind(this,"mouseleave",function(){render()})})}};Tooltip.prototype.destroy=function(){this.hide();this.binder.destroy()};function TooltipProvider(){return Tooltip}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Binder=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _d=__webpack_require__(19);var _d2=_interopRequireDefault(_d);var _jquery=__webpack_require__(13);var _jquery2=_interopRequireDefault(_jquery);var _binder=__webpack_require__(709);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.Binder=function(_BinderBase){_inherits(Binder,_BinderBase);function Binder($scope){_classCallCheck(this,Binder);var _this=_possibleConstructorReturn(this,(Binder.__proto__||Object.getPrototypeOf(Binder)).call(this));$scope&&$scope.$on("$destroy",function(){return _this.destroy()});return _this}_createClass(Binder,[{key:"jqOn",value:function jqOn(el){for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];var $el=(0,_jquery2.default)(el);$el.on.apply($el,args);this.disposal.push(function(){return $el.off.apply($el,args)})}},{key:"fakeD3Bind",value:function fakeD3Bind(el,event,handler){var _this2=this;this.jqOn(el,event,function(e){var o=_d2.default.event;_d2.default.event=e;try{handler.apply(_this2,[_this2.__data__])}finally{_d2.default.event=o}})}}]);return Binder}(_binder.BinderBase)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.positionTooltip=positionTooltip;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _jquery=__webpack_require__(13);var _jquery2=_interopRequireDefault(_jquery);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var OFFSET=10;var $clone=void 0;var propDirs={top:"north",left:"west"};function positionTooltip(opts,html){if(!opts)return;var $chart=(0,_jquery2.default)(opts.$chart);var $el=(0,_jquery2.default)(opts.$el);var $window=(0,_jquery2.default)(opts.$window||window);var $sizer=(0,_jquery2.default)(opts.$sizer);var prev=$chart.data("previousPlacement")||{};var event=opts.event;if(!$chart.length||!$el.length)return;var size=getTtSize(html||$el.html(),$sizer);var pos=getBasePosition(size,event);var overflow=getOverflow(size,pos,[$chart,$window]);var placement=placeToAvoidOverflow(pos,prev,overflow);$chart.data("previousPlacement",placement);return placement}function getTtSize(ttHtml,$sizer){$sizer.html()!==ttHtml&&$sizer.html(ttHtml);var size={width:$sizer.outerWidth(),height:$sizer.outerHeight()};return size}function getBasePosition(size,event){return{east:event.clientX+OFFSET,west:event.clientX-size.width-OFFSET,south:event.clientY+OFFSET,north:event.clientY-size.height-OFFSET}}function getBounds($el){var bounds=_jquery2.default.isWindow($el[0])?{top:0,left:0}:$el.offset();bounds.top+=$el.scrollTop();bounds.left+=$el.scrollLeft();bounds.bottom=bounds.top+$el.outerHeight();bounds.right=bounds.left+$el.outerWidth();bounds.area=(bounds.bottom-bounds.top)*(bounds.right-bounds.left);return bounds}function getOverflow(size,pos,containers){var overflow={};containers.map(getBounds).sort(function(a,b){return a.area-b.area}).forEach(function(bounds){mergeOverflows(overflow,{north:bounds.top-pos.north,east:pos.east+size.width-bounds.right,south:pos.south+size.height-bounds.bottom,west:bounds.left-pos.west})});(window.overflows||(window.overflows=[])).push(overflow);return overflow}function mergeOverflows(dest,src){_lodash2.default.merge(dest,src,function(a,b){if(null==a||null==b)return a||b;if(a<0&&b<0)return Math.min(a,b);return Math.max(a,b)});dest.east&&dest.west&&dest.east>0&&dest.west>0&&(src.east<0||src.west<0)&&(src.east<src.west?dest.east=src.east:dest.west=src.west)}function pickPlacement(prop,pos,overflow,prev,pref,fallback,placement){var stash="_"+prop;var dirs=_lodash2.default.unique([prev[stash],pref,fallback].filter(Boolean));var dir=void 0;var value=void 0;for(var i=0;i<dirs.length;i++){dir=dirs[i];if(overflow[dir]>0)continue;value=pos[dir];break}if(null==value){dir=dirs[0];var offset=overflow[dir];propDirs[prop]===dir&&(offset*=-1);value=pos[dir]-offset}placement[prop]=value;placement[stash]=dir}function placeToAvoidOverflow(pos,prev,overflow){var placement={};pickPlacement("top",pos,overflow,prev,"south","north",placement);pickPlacement("left",pos,overflow,prev,"east","west",placement);return placement}positionTooltip.getTtSize=getTtSize;positionTooltip.getBasePosition=getBasePosition;positionTooltip.getOverflow=getOverflow;positionTooltip.getBounds=getBounds;positionTooltip.placeToAvoidOverflow=placeToAvoidOverflow;positionTooltip.removeClone=function(){$clone&&$clone.remove();$clone=null}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.dataLabel=dataLabel;var _d=__webpack_require__(19);var _d2=_interopRequireDefault(_d);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function dataLabel(selection,label){_d2.default.select(selection).attr("data-label",label)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();exports.VislibLibDispatchProvider=VislibLibDispatchProvider;var _d=__webpack_require__(19);var _d2=_interopRequireDefault(_d);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _jquery=__webpack_require__(13);var _jquery2=_interopRequireDefault(_jquery);var _simple_emitter=__webpack_require__(588);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function VislibLibDispatchProvider(Private,config){var Dispatch=function(_SimpleEmitter){_inherits(Dispatch,_SimpleEmitter);function Dispatch(handler){_classCallCheck(this,Dispatch);var _this=_possibleConstructorReturn(this,(Dispatch.__proto__||Object.getPrototypeOf(Dispatch)).call(this));_this.handler=handler;_this._listeners={};return _this}_createClass(Dispatch,[{key:"eventResponse",value:function eventResponse(d,i){var datum=d._input||d;var data=_d2.default.event.target.nearestViewportElement?_d2.default.event.target.nearestViewportElement.__data__:_d2.default.event.target.__data__;var label=d.label?d.label:d.series||"Count";var isSeries=!!(data&&data.series);var isSlices=!!(data&&data.slices);var series=isSeries?data.series:void 0;var slices=isSlices?data.slices:void 0;var handler=this.handler;var color=_lodash2.default.get(handler,"data.color");var eventData={value:d.y,point:datum,datum:datum,label:label,color:color?color(label):void 0,pointIndex:i,series:series,slices:slices,config:handler&&handler.visConfig,data:data,e:_d2.default.event,handler:handler};if(isSeries){var percentageMode=false;var isSeriesChart=handler.charts&&handler.charts[0]&&handler.charts[0].getSeries;var parentNode=_d2.default.event.target.parentNode;var parentData=parentNode?parentNode.__data__:null;if(isSeriesChart&&parentData){var aggId=parentData.aggId;var seriesFromAggId=handler.charts[0].getSeries(aggId);seriesFromAggId&&seriesFromAggId.getValueAxis&&(percentageMode=seriesFromAggId.getValueAxis().axisConfig.isPercentage())}var object=_lodash2.default.find(series,{label:label});if(object){eventData.value=+object.values[i].y;percentageMode&&(eventData.percent=(100*d.y).toFixed(1)+"%")}}return eventData}},{key:"addEvent",value:function addEvent(event,callback){return function(selection){selection.each(function(){var element=_d2.default.select(this);if("function"===typeof callback)return element.on(event,callback)})}}},{key:"addHoverEvent",value:function addHoverEvent(){var self=this;var isClickable=this.listenerCount("click")>0;var addEvent=this.addEvent;var $el=this.handler.el;this.handler.highlight||(this.handler.highlight=self.highlight);function hover(d,i){isClickable&&self.addMousePointer.call(this,arguments);self.handler.highlight.call(this,$el);self.emit("hover",self.eventResponse(d,i))}return addEvent("mouseover",hover)}},{key:"addMouseoutEvent",value:function addMouseoutEvent(){var self=this;var addEvent=this.addEvent;var $el=this.handler.el;this.handler.unHighlight||(this.handler.unHighlight=self.unHighlight);function mouseout(){self.handler.unHighlight.call(this,$el)}return addEvent("mouseout",mouseout)}},{key:"addClickEvent",value:function addClickEvent(){var self=this;var addEvent=this.addEvent;function click(d,i){self.emit("click",self.eventResponse(d,i))}return addEvent("click",click)}},{key:"allowBrushing",value:function allowBrushing(){var xAxis=this.handler.categoryAxes[0];return Boolean(xAxis.ordered)}},{key:"isBrushable",value:function isBrushable(){return this.allowBrushing()&&this.listenerCount("brush")>0}},{key:"addBrushEvent",value:function addBrushEvent(svg){if(!this.isBrushable())return;var self=this;var xScale=this.handler.categoryAxes[0].getScale();var brush=this.createBrush(xScale,svg);function simulateClickWithBrushEnabled(d,i){if(!validBrushClick(_d2.default.event))return;if(isQuantitativeScale(xScale)){var bar=_d2.default.select(this);var startX=_d2.default.mouse(svg.node());var startXInv=xScale.invert(startX[0]);brush.extent([startXInv,startXInv]);svg.call(brush);bar.call(brush)}else self.emit("click",self.eventResponse(d,i))}return this.addEvent("mousedown",simulateClickWithBrushEnabled)}},{key:"addMousePointer",value:function addMousePointer(){return _d2.default.select(this).style("cursor","pointer")}},{key:"highlight",value:function highlight(element){var label=this.getAttribute("data-label");if(!label)return;var dimming=config.get("visualization:dimmingOpacity");(0,_jquery2.default)(element).parent().find("[data-label]").css("opacity",1).not(function(els,el){return String((0,_jquery2.default)(el).data("label"))===label}).css("opacity",justifyOpacity(dimming))}},{key:"unHighlight",value:function unHighlight(element){(0,_jquery2.default)("[data-label]",element.parentNode).css("opacity",1)}},{key:"createBrush",value:function createBrush(xScale,svg){var self=this;var visConfig=self.handler.visConfig;var _svg$node$getBBox=svg.node().getBBox(),width=_svg$node$getBBox.width,height=_svg$node$getBBox.height;var isHorizontal=self.handler.categoryAxes[0].axisConfig.isHorizontal();var brush=_d2.default.svg.brush();isHorizontal?brush.x(xScale):brush.y(xScale);brush.on("brushend",function brushEnd(){var data=_d2.default.select(this).data()[0];var isTimeSeries=data.ordered&&data.ordered.date;var selected=xScale.domain().filter(function(d){return brush.extent()[0]<=xScale(d)&&xScale(d)<=brush.extent()[1]});var range=isTimeSeries?brush.extent():selected;return self.emit("brush",{range:range,config:visConfig,e:_d2.default.event,data:data})});if(self.listenerCount("brush")){var rect=svg.insert("g","g").attr("class","brush").call(brush).call(function(brushG){var brushHandler=brushG.on("mousedown.brush");if(!brushHandler)return;brushG.on("mousedown.brush",function(){validBrushClick(_d2.default.event)&&brushHandler.apply(this,arguments)})}).selectAll("rect");isHorizontal?rect.attr("height",height):rect.attr("width",width);return brush}}}]);return Dispatch}(_simple_emitter.SimpleEmitter);function isQuantitativeScale(scale){return!!scale.invert}function validBrushClick(event){return 0===event.button}function justifyOpacity(opacity){var decimalNumber=parseFloat(opacity,10);var fallbackOpacity=.5;return 0<=decimalNumber&&decimalNumber<=1?decimalNumber:fallbackOpacity}return Dispatch}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();exports.VislibVisualizationsTimeMarkerProvider=VislibVisualizationsTimeMarkerProvider;var _d=__webpack_require__(19);var _d2=_interopRequireDefault(_d);var _datemath=__webpack_require__(83);var _datemath2=_interopRequireDefault(_datemath);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function VislibVisualizationsTimeMarkerProvider(){var TimeMarker=function(){function TimeMarker(times,xScale,height){_classCallCheck(this,TimeMarker);var currentTimeArr=[{time:(new Date).getTime(),class:"time-marker",color:"#c80000",opacity:.3,width:2}];this.xScale=xScale;this.height=height;this.times=times.length?times.map(function(d){return{time:_datemath2.default.parse(d.time),class:d.class||"time-marker",color:d.color||"#c80000",opacity:d.opacity||.3,width:d.width||2}}):currentTimeArr}_createClass(TimeMarker,[{key:"_isTimeBasedChart",value:function _isTimeBasedChart(selection){var data=selection.data();return data.every(function(datum){return datum.ordered&&datum.ordered.date})}},{key:"render",value:function render(selection){var self=this;if(!self._isTimeBasedChart(selection))return;selection.each(function(){_d2.default.select(this).selectAll("time-marker").data(self.times).enter().append("line").attr("class",function(d){return d.class}).attr("pointer-events","none").attr("stroke",function(d){return d.color}).attr("stroke-width",function(d){return d.width}).attr("stroke-opacity",function(d){return d.opacity}).attr("x1",function(d){return self.xScale(d.time)}).attr("x2",function(d){return self.xScale(d.time)}).attr("y1",self.height).attr("y2",self.xScale.range()[0])})}}]);return TimeMarker}();return TimeMarker}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VislibVisualizationsSeriesTypesProvider=VislibVisualizationsSeriesTypesProvider;var _column_chart=__webpack_require__(4123);var _line_chart=__webpack_require__(4124);var _area_chart=__webpack_require__(4125);var _heatmap_chart=__webpack_require__(4126);function VislibVisualizationsSeriesTypesProvider(Private){return{histogram:Private(_column_chart.VislibVisualizationsColumnChartProvider),line:Private(_line_chart.VislibVisualizationsLineChartProvider),area:Private(_area_chart.VislibVisualizationsAreaChartProvider),heatmap:Private(_heatmap_chart.VislibVisualizationsHeatmapChartProvider)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();exports.VislibVisualizationsColumnChartProvider=VislibVisualizationsColumnChartProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _point_series=__webpack_require__(644);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function VislibVisualizationsColumnChartProvider(Private){var PointSeries=Private(_point_series.VislibVisualizationsPointSeriesProvider);var defaults={mode:"normal",showTooltip:true,color:void 0,fillColor:void 0};function datumWidth(defaultWidth,datum,nextDatum,scale,gutterWidth){var groupCount=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;var datumWidth=defaultWidth;if(nextDatum){datumWidth=(scale(nextDatum.x)-scale(datum.x)-gutterWidth)/groupCount;datumWidth>defaultWidth&&(datumWidth=defaultWidth)}return datumWidth}var ColumnChart=function(_PointSeries){_inherits(ColumnChart,_PointSeries);function ColumnChart(handler,chartEl,chartData,seriesConfigArgs){_classCallCheck(this,ColumnChart);var _this=_possibleConstructorReturn(this,(ColumnChart.__proto__||Object.getPrototypeOf(ColumnChart)).call(this,handler,chartEl,chartData,seriesConfigArgs));_this.seriesConfig=_lodash2.default.defaults(seriesConfigArgs||{},defaults);return _this}_createClass(ColumnChart,[{key:"addBars",value:function addBars(svg,data){var self=this;var color=this.handler.data.getColorFunc();var tooltip=this.baseChart.tooltip;var isTooltip=this.handler.visConfig.get("tooltip.show");var layer=svg.append("g").attr("class","series histogram").attr("clip-path","url(#"+this.baseChart.clipPathId+")");var bars=layer.selectAll("rect").data(data.values.filter(function(d){return!_lodash2.default.isNull(d.y)}));bars.exit().remove();bars.enter().append("rect").attr("data-label",data.label).attr("fill",function(){return color(data.label)}).attr("stroke",function(){return color(data.label)});self.updateBars(bars);isTooltip&&bars.call(tooltip.render());return bars}},{key:"updateBars",value:function updateBars(bars){if("stacked"===this.seriesConfig.mode)return this.addStackedBars(bars);return this.addGroupedBars(bars)}},{key:"addStackedBars",value:function addStackedBars(bars){var xScale=this.getCategoryAxis().getScale();var yScale=this.getValueAxis().getScale();var isHorizontal=this.getCategoryAxis().axisConfig.isHorizontal();var isTimeScale=this.getCategoryAxis().axisConfig.isTimeDomain();var yMin=yScale.domain()[0];var gutterSpacingPercentage=.15;var groupCount=this.getGroupedCount();var groupNum=this.getGroupedNum(this.chartData);var barWidth=void 0;var gutterWidth=void 0;if(isTimeScale){var _handler$data$get=this.handler.data.get("ordered"),min=_handler$data$get.min,interval=_handler$data$get.interval;var intervalWidth=xScale(min+interval)-xScale(min);intervalWidth=Math.abs(intervalWidth);gutterWidth=intervalWidth*gutterSpacingPercentage;barWidth=(intervalWidth-gutterWidth)/groupCount}function x(d,i){if(isTimeScale)return xScale(d.x)+datumWidth(barWidth,d,bars.data()[i+1],xScale,gutterWidth,groupCount)*groupNum;return xScale(d.x)+xScale.rangeBand()/groupCount*groupNum}function y(d){if(isHorizontal&&d.y<0||!isHorizontal&&d.y>0)return yScale(d.y0);return yScale(d.y0+d.y)}function widthFunc(d,i){if(isTimeScale)return datumWidth(barWidth,d,bars.data()[i+1],xScale,gutterWidth,groupCount);return xScale.rangeBand()/groupCount}function heightFunc(d){if(0===d.y0&&yMin>0)return yScale(yMin)-yScale(d.y);return Math.abs(yScale(d.y0)-yScale(d.y0+d.y))}bars.attr("x",isHorizontal?x:y).attr("width",isHorizontal?widthFunc:heightFunc).attr("y",isHorizontal?y:x).attr("height",isHorizontal?heightFunc:widthFunc);return bars}},{key:"addGroupedBars",value:function addGroupedBars(bars){var xScale=this.getCategoryAxis().getScale();var yScale=this.getValueAxis().getScale();var groupCount=this.getGroupedCount();var groupNum=this.getGroupedNum(this.chartData);var gutterSpacingPercentage=.15;var isTimeScale=this.getCategoryAxis().axisConfig.isTimeDomain();var isHorizontal=this.getCategoryAxis().axisConfig.isHorizontal();var isLogScale=this.getValueAxis().axisConfig.isLogScale();var barWidth=void 0;var gutterWidth=void 0;if(isTimeScale){var _handler$data$get2=this.handler.data.get("ordered"),min=_handler$data$get2.min,interval=_handler$data$get2.interval;var intervalWidth=xScale(min+interval)-xScale(min);intervalWidth=Math.abs(intervalWidth);gutterWidth=intervalWidth*gutterSpacingPercentage;barWidth=(intervalWidth-gutterWidth)/groupCount}function x(d,i){if(isTimeScale)return xScale(d.x)+datumWidth(barWidth,d,bars.data()[i+1],xScale,gutterWidth,groupCount)*groupNum;return xScale(d.x)+xScale.rangeBand()/groupCount*groupNum}function y(d){if(isHorizontal&&d.y<0||!isHorizontal&&d.y>0)return yScale(0);return yScale(d.y)}function widthFunc(d,i){if(isTimeScale)return datumWidth(barWidth,d,bars.data()[i+1],xScale,gutterWidth,groupCount);return xScale.rangeBand()/groupCount}function heightFunc(d){var baseValue=isLogScale?1:0;return Math.abs(yScale(baseValue)-yScale(d.y))}bars.attr("x",isHorizontal?x:y).attr("width",isHorizontal?widthFunc:heightFunc).attr("y",isHorizontal?y:x).attr("height",isHorizontal?heightFunc:widthFunc);return bars}},{key:"draw",value:function draw(){var self=this;return function(selection){selection.each(function(){var svg=self.chartEl.append("g");svg.data([self.chartData]);var bars=self.addBars(svg,self.chartData);self.addCircleEvents(bars);self.events.emit("rendered",{chart:self.chartData});return svg})}}}]);return ColumnChart}(PointSeries);return ColumnChart}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();exports.VislibVisualizationsLineChartProvider=VislibVisualizationsLineChartProvider;var _d=__webpack_require__(19);var _d2=_interopRequireDefault(_d);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _point_series=__webpack_require__(644);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function VislibVisualizationsLineChartProvider(Private){var PointSeries=Private(_point_series.VislibVisualizationsPointSeriesProvider);var defaults={mode:"normal",showCircles:true,radiusRatio:9,showLines:true,interpolate:"linear",lineWidth:2,color:void 0,fillColor:void 0};var LineChart=function(_PointSeries){_inherits(LineChart,_PointSeries);function LineChart(handler,chartEl,chartData,seriesConfigArgs){_classCallCheck(this,LineChart);var _this=_possibleConstructorReturn(this,(LineChart.__proto__||Object.getPrototypeOf(LineChart)).call(this,handler,chartEl,chartData,seriesConfigArgs));_this.seriesConfig=_lodash2.default.defaults(seriesConfigArgs||{},defaults);return _this}_createClass(LineChart,[{key:"addCircles",value:function addCircles(svg,data){var self=this;var showCircles=this.seriesConfig.showCircles;var color=this.handler.data.getColorFunc();var xScale=this.getCategoryAxis().getScale();var yScale=this.getValueAxis().getScale();var ordered=this.handler.data.get("ordered");var tooltip=this.baseChart.tooltip;var isTooltip=this.handler.visConfig.get("tooltip.show");var isHorizontal=this.getCategoryAxis().axisConfig.isHorizontal();var lineWidth=this.seriesConfig.lineWidth;var radii=this.baseChart.radii;var radiusStep=(radii.max-radii.min||100*radii.max)/Math.pow(this.seriesConfig.radiusRatio,2);var layer=svg.append("g").attr("class","points line").attr("clip-path","url(#"+this.baseChart.clipPathId+")");var circles=layer.selectAll("circle").data(function appendData(){return data.values.filter(function(d){return!_lodash2.default.isNull(d.y)})});circles.exit().remove();function cx(d){if(ordered&&ordered.date)return xScale(d.x);return xScale(d.x)+xScale.rangeBand()/2}function cy(d){var y0=d.y0||0;var y=d.y||0;return yScale(y0+y)}function cColor(d){return color(d.series)}function colorCircle(d){var parent=_d2.default.select(this).node().parentNode;var lengthOfParent=_d2.default.select(parent).data()[0].length;var isVisible=1===lengthOfParent;if(!showCircles&&!isVisible)return"none";return cColor(d)}function getCircleRadiusFn(modifier){return function getCircleRadius(d){var width=self.baseChart.chartConfig.width;var height=self.baseChart.chartConfig.height;var circleRadius=(d.z-radii.min)/radiusStep;var baseMagicNumber=2;var base=circleRadius?Math.sqrt(circleRadius+baseMagicNumber)+lineWidth:lineWidth;return _lodash2.default.min([base,width,height])+(modifier||0)}}circles.enter().append("circle").attr("r",getCircleRadiusFn()).attr("fill-opacity",this.seriesConfig.drawLinesBetweenPoints?1:.7).attr("cx",isHorizontal?cx:cy).attr("cy",isHorizontal?cy:cx).attr("class","circle-decoration").attr("data-label",data.label).attr("fill",colorCircle);circles.enter().append("circle").attr("r",getCircleRadiusFn(10)).attr("cx",isHorizontal?cx:cy).attr("cy",isHorizontal?cy:cx).attr("fill","transparent").attr("class","circle").attr("data-label",data.label).attr("stroke",cColor).attr("stroke-width",0);isTooltip&&circles.call(tooltip.render());return circles}},{key:"addLine",value:function addLine(svg,data){var xScale=this.getCategoryAxis().getScale();var yScale=this.getValueAxis().getScale();var color=this.handler.data.getColorFunc();var ordered=this.handler.data.get("ordered");var lineWidth=this.seriesConfig.lineWidth;var interpolate=this.seriesConfig.interpolate;var isHorizontal=this.getCategoryAxis().axisConfig.isHorizontal();var line=svg.append("g").attr("class","pathgroup lines").attr("clip-path","url(#"+this.baseChart.clipPathId+")");function cx(d){if(ordered&&ordered.date)return xScale(d.x);return xScale(d.x)+xScale.rangeBand()/2}function cy(d){var y=d.y||0;var y0=d.y0||0;return yScale(y0+y)}line.append("path").attr("data-label",data.label).attr("d",function(){var d3Line=_d2.default.svg.line().defined(function(d){return!_lodash2.default.isNull(d.y)}).interpolate(interpolate).x(isHorizontal?cx:cy).y(isHorizontal?cy:cx);return d3Line(data.values.filter(function(d){return!_lodash2.default.isNull(d.y)}))}).attr("fill","none").attr("stroke",function(){return color(data.label)}).attr("stroke-width",lineWidth);return line}},{key:"draw",value:function draw(){var self=this;return function(selection){selection.each(function(){var svg=self.chartEl.append("g");svg.data([self.chartData]);self.seriesConfig.drawLinesBetweenPoints&&self.addLine(svg,self.chartData);var circles=self.addCircles(svg,self.chartData);self.addCircleEvents(circles);self.events.emit("rendered",{chart:self.chartData});return svg})}}}]);return LineChart}(PointSeries);return LineChart}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();exports.VislibVisualizationsAreaChartProvider=VislibVisualizationsAreaChartProvider;var _d=__webpack_require__(19);var _d2=_interopRequireDefault(_d);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _jquery=__webpack_require__(13);var _jquery2=_interopRequireDefault(_jquery);var _point_series=__webpack_require__(644);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function VislibVisualizationsAreaChartProvider(Private){var PointSeries=Private(_point_series.VislibVisualizationsPointSeriesProvider);var defaults={mode:"normal",showCircles:true,radiusRatio:9,showLines:true,interpolate:"linear",color:void 0,fillColor:void 0};var AreaChart=function(_PointSeries){_inherits(AreaChart,_PointSeries);function AreaChart(handler,chartEl,chartData,seriesConfigArgs){_classCallCheck(this,AreaChart);var _this=_possibleConstructorReturn(this,(AreaChart.__proto__||Object.getPrototypeOf(AreaChart)).call(this,handler,chartEl,chartData,seriesConfigArgs));_this.seriesConfig=_lodash2.default.defaults(seriesConfigArgs||{},defaults);_this.isOverlapping="stacked"!==_this.seriesConfig.mode;if(_this.isOverlapping){var defaultOpacity=.6;_this.seriesConfig.defaultOpacity=defaultOpacity;handler.highlight=function(element){var label=this.getAttribute("data-label");if(!label)return;var highlightOpacity=.8;var highlightElements=(0,_jquery2.default)("[data-label]",element.parentNode).filter(function(els,el){return""+(0,_jquery2.default)(el).data("label")===label});(0,_jquery2.default)("[data-label]",element.parentNode).not(highlightElements).css("opacity",defaultOpacity/2);highlightElements.css("opacity",highlightOpacity)};handler.unHighlight=function(element){(0,_jquery2.default)("[data-label]",element).css("opacity",defaultOpacity);(0,_jquery2.default)("[data-label]",(0,_jquery2.default)(element).siblings()).css("opacity",1)}}return _this}_createClass(AreaChart,[{key:"addPath",value:function addPath(svg,data){var ordered=this.handler.data.get("ordered");var isTimeSeries=ordered&&ordered.date;var isOverlapping=this.isOverlapping;var color=this.handler.data.getColorFunc();var xScale=this.getCategoryAxis().getScale();var yScale=this.getValueAxis().getScale();var interpolate=this.seriesConfig.interpolate;var isHorizontal=this.getCategoryAxis().axisConfig.isHorizontal();var layer=svg.append("g").attr("class",function(d,i){return"series series-"+i});var path=layer.append("path").attr("data-label",data.label).style("fill",function(){return color(data.label)}).style("stroke",function(){return color(data.label)}).classed("overlap_area",function(){return isOverlapping}).attr("clip-path","url(#"+this.baseChart.clipPathId+")");function x(d){if(isTimeSeries)return xScale(d.x);return xScale(d.x)+xScale.rangeBand()/2}function y1(d){var y0=d.y0||0;var y=d.y||0;return yScale(y0+y)}function y0(d){var y0=d.y0||0;return yScale(y0)}function getArea(){return isHorizontal?_d2.default.svg.area().x(x).y0(y0).y1(y1):_d2.default.svg.area().y(x).x0(y0).x1(y1)}path.attr("d",function(){var area=getArea().defined(function(d){return!_lodash2.default.isNull(d.y)}).interpolate(interpolate);return area(data.values.filter(function(d){return!_lodash2.default.isNull(d.y)}))}).style("stroke-width","1px");return path}},{key:"addCircles",value:function addCircles(svg,data){var color=this.handler.data.getColorFunc();var xScale=this.getCategoryAxis().getScale();var yScale=this.getValueAxis().getScale();var ordered=this.handler.data.get("ordered");var circleRadius=12;var circleStrokeWidth=0;var tooltip=this.baseChart.tooltip;var isTooltip=this.handler.visConfig.get("tooltip.show");var isOverlapping=this.isOverlapping;var isHorizontal=this.getCategoryAxis().axisConfig.isHorizontal();var layer=svg.append("g").attr("class","points area").attr("clip-path","url(#"+this.baseChart.clipPathId+")");var circles=layer.selectAll("circles").data(function appendData(){return data.values.filter(function isZeroOrNull(d){return 0!==d.y&&!_lodash2.default.isNull(d.y)})});circles.exit().remove();circles.enter().append("circle").attr("data-label",data.label).attr("stroke",function(){return color(data.label)}).attr("fill","transparent").attr("stroke-width",circleStrokeWidth);function cx(d){if(ordered&&ordered.date)return xScale(d.x);return xScale(d.x)+xScale.rangeBand()/2}function cy(d){var y=d.y||0;if(isOverlapping)return yScale(y);return yScale(d.y0+y)}circles.attr("cx",isHorizontal?cx:cy).attr("cy",isHorizontal?cy:cx).attr("r",circleRadius);isTooltip&&circles.call(tooltip.render());return circles}},{key:"addPathEvents",value:function addPathEvents(path){var events=this.events;if(this.handler.visConfig.get("enableHover")){var hover=events.addHoverEvent();var mouseout=events.addMouseoutEvent();path.call(hover).call(mouseout)}}},{key:"draw",value:function draw(){var self=this;return function(selection){selection.each(function(){var svg=self.chartEl.append("g");svg.data([self.chartData]);var path=self.addPath(svg,self.chartData);self.addPathEvents(path);var circles=self.addCircles(svg,self.chartData);self.addCircleEvents(circles);self.events.emit("rendered",{chart:self.chartData});return svg})}}}]);return AreaChart}(PointSeries);return AreaChart}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();exports.VislibVisualizationsHeatmapChartProvider=VislibVisualizationsHeatmapChartProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _moment=__webpack_require__(10);var _moment2=_interopRequireDefault(_moment);var _point_series=__webpack_require__(644);var _heatmap_color=__webpack_require__(888);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function VislibVisualizationsHeatmapChartProvider(Private){var PointSeries=Private(_point_series.VislibVisualizationsPointSeriesProvider);var defaults={color:void 0,fillColor:void 0};var HeatmapChart=function(_PointSeries){_inherits(HeatmapChart,_PointSeries);function HeatmapChart(handler,chartEl,chartData,seriesConfigArgs){_classCallCheck(this,HeatmapChart);var _this=_possibleConstructorReturn(this,(HeatmapChart.__proto__||Object.getPrototypeOf(HeatmapChart)).call(this,handler,chartEl,chartData,seriesConfigArgs));_this.seriesConfig=_lodash2.default.defaults(seriesConfigArgs||{},defaults);_this.handler.visConfig.set("legend",{labels:_this.getHeatmapLabels(_this.handler.visConfig),colors:_this.getHeatmapColors(_this.handler.visConfig)});var colors=_this.handler.visConfig.get("legend.colors",null);if(colors){_this.handler.vis.uiState.setSilent("vis.defaultColors",null);_this.handler.vis.uiState.setSilent("vis.defaultColors",colors)}return _this}_createClass(HeatmapChart,[{key:"getHeatmapLabels",value:function getHeatmapLabels(cfg){var percentageMode=cfg.get("percentageMode");var colorsNumber=cfg.get("colorsNumber");var colorsRange=cfg.get("colorsRange");var zAxisConfig=this.getValueAxis().axisConfig;var zAxisFormatter=zAxisConfig.get("labels.axisFormatter");var zScale=this.getValueAxis().getScale();var _zScale$domain=zScale.domain(),_zScale$domain2=_slicedToArray(_zScale$domain,2),min=_zScale$domain2[0],max=_zScale$domain2[1];var labels=[];if(cfg.get("setColorRange"))colorsRange.forEach(function(range){var from=isFinite(range.from)?zAxisFormatter(range.from):range.from;var to=isFinite(range.to)?zAxisFormatter(range.to):range.to;labels.push(from+" - "+to)});else{if(max===min)return[min.toString()];for(var i=0;i<colorsNumber;i++){var label=void 0;var val=i/colorsNumber;var nextVal=(i+1)/colorsNumber;if(percentageMode){val=Math.ceil(100*val);nextVal=Math.ceil(100*nextVal);label=val+"% - "+nextVal+"%"}else{val=val*(max-min)+min;nextVal=nextVal*(max-min)+min;if(max>1){val=Math.ceil(val);nextVal=Math.ceil(nextVal)}isFinite(val)&&(val=zAxisFormatter(val));isFinite(nextVal)&&(nextVal=zAxisFormatter(nextVal));label=val+" - "+nextVal}labels.push(label)}}return labels}},{key:"getHeatmapColors",value:function getHeatmapColors(cfg){var colorsNumber=cfg.get("colorsNumber");var invertColors=cfg.get("invertColors");var colorSchema=cfg.get("colorSchema");var labels=this.getHeatmapLabels(cfg);var colors={};for(var i in labels)if(labels[i]){var val=invertColors?1-i/colorsNumber:i/colorsNumber;colors[labels[i]]=(0,_heatmap_color.getHeatmapColors)(val,colorSchema)}return colors}},{key:"addSquares",value:function addSquares(svg,data){var xScale=this.getCategoryAxis().getScale();var yScale=this.handler.categoryAxes[1].getScale();var zScale=this.getValueAxis().getScale();var tooltip=this.baseChart.tooltip;var isTooltip=this.handler.visConfig.get("tooltip.show");var isHorizontal=this.getCategoryAxis().axisConfig.isHorizontal();var colorsNumber=this.handler.visConfig.get("colorsNumber");var setColorRange=this.handler.visConfig.get("setColorRange");var colorsRange=this.handler.visConfig.get("colorsRange");var color=this.handler.data.getColorFunc();var labels=this.handler.visConfig.get("legend.labels");var zAxisConfig=this.getValueAxis().axisConfig;var zAxisFormatter=zAxisConfig.get("labels.axisFormatter");var showLabels=zAxisConfig.get("labels.show");var overwriteLabelColor=zAxisConfig.get("labels.overwriteColor",false);var layer=svg.append("g").attr("class","series");var squares=layer.selectAll("g.square").data(data.values);squares.exit().remove();var barWidth=void 0;if(this.getCategoryAxis().axisConfig.isTimeDomain()){var _handler$data$get=this.handler.data.get("ordered"),_min=_handler$data$get.min,interval=_handler$data$get.interval;var start=_min;var end=(0,_moment2.default)(_min).add(interval).valueOf();barWidth=xScale(end)-xScale(start);isHorizontal||(barWidth*=-1)}function x(d){return xScale(d.x)}function y(d){return yScale(d.series)}var _zScale$domain3=zScale.domain(),_zScale$domain4=_slicedToArray(_zScale$domain3,2),min=_zScale$domain4[0],max=_zScale$domain4[1];function getColorBucket(d){var val=0;if(setColorRange&&colorsRange.length){var bucket=_lodash2.default.find(colorsRange,function(range){return range.from<=d.y&&range.to>d.y});return bucket?colorsRange.indexOf(bucket):-1}if(isNaN(min)||isNaN(max))val=colorsNumber-1;else if(min===max)val=0;else{val=(d.y-min)/(max-min);val=Math.min(colorsNumber-1,Math.floor(val*colorsNumber))}return isNaN(val)?-1:val}function label(d){var colorBucket=getColorBucket(d);-1===colorBucket&&(d.hide=true);return labels[colorBucket]}function z(d){if(""===label(d))return"transparent";return color(label(d))}var squareWidth=barWidth||xScale.rangeBand();var squareHeight=yScale.rangeBand();squares.enter().append("g").attr("class","square");squares.append("rect").attr("x",x).attr("width",squareWidth).attr("y",y).attr("height",squareHeight).attr("data-label",label).attr("fill",z).attr("style","cursor: pointer; stroke: black; stroke-width: 0.1px").style("display",function(d){return d.hide?"none":"initial"});if(showLabels){var rotate=zAxisConfig.get("labels.rotate");var rotateRad=rotate*Math.PI/180;var cellPadding=5;var maxLength=Math.min(Math.abs(squareWidth/Math.cos(rotateRad)),Math.abs(squareHeight/Math.sin(rotateRad)))-cellPadding;var maxHeight=Math.min(Math.abs(squareWidth/Math.sin(rotateRad)),Math.abs(squareHeight/Math.cos(rotateRad)))-cellPadding;var labelColor=void 0;labelColor=overwriteLabelColor?zAxisConfig.get("labels.color"):function labelColor(d){var bgColor=z(d);var color=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(bgColor);return color&&(0,_eui.isColorDark)(parseInt(color[1]),parseInt(color[2]),parseInt(color[3]))?"#FFF":"#222"};var hiddenLabels=false;squares.append("text").text(function(d){return zAxisFormatter(d.y)}).style("display",function(d){var textLength=this.getBBox().width;var textHeight=this.getBBox().height;var textTooLong=textLength>maxLength;var textTooWide=textHeight>maxHeight;d.hide||!textTooLong&&!textTooWide||(hiddenLabels=true);return d.hide||textTooLong||textTooWide?"none":"initial"}).style("dominant-baseline","central").style("text-anchor","middle").style("fill",labelColor).attr("x",function(d){var center=x(d)+squareWidth/2;return center}).attr("y",function(d){var center=y(d)+squareHeight/2;return center}).attr("transform",function(d){var horizontalCenter=x(d)+squareWidth/2;var verticalCenter=y(d)+squareHeight/2;return"rotate("+rotate+","+horizontalCenter+","+verticalCenter+")"});hiddenLabels&&this.baseChart.handler.alerts.show("Some labels were hidden due to size constraints")}isTooltip&&squares.call(tooltip.render());return squares.selectAll("rect")}},{key:"draw",value:function draw(){var self=this;return function(selection){selection.each(function(){var svg=self.chartEl.append("g");svg.data([self.chartData]);var squares=self.addSquares(svg,self.chartData);self.addCircleEvents(squares);self.events.emit("rendered",{chart:self.chartData});return svg})}}}]);return HeatmapChart}(PointSeries);return HeatmapChart}},function(module,exports){module.exports='<p class="vis-tooltip-header bg-info">\n  <i class="fa fa-info-circle vis-tooltip-header-icon"></i>\n  <span class="vis-tooltip-header-text">\n    <%= wholeBucket ? \'Part of this bucket\' : \'This area\' %>\n    may contain partial data. <br> The selected time range does not fully cover it.\n  </span>\n</p>'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();exports.VislibVisualizationsPieChartProvider=VislibVisualizationsPieChartProvider;var _d=__webpack_require__(19);var _d2=_interopRequireDefault(_d);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _jquery=__webpack_require__(13);var _jquery2=_interopRequireDefault(_jquery);var _numeral=__webpack_require__(552);var _numeral2=_interopRequireDefault(_numeral);var _errors=__webpack_require__(56);var _chart=__webpack_require__(887);var _truncate_labels=__webpack_require__(1479);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function VislibVisualizationsPieChartProvider(Private){var Chart=Private(_chart.VislibVisualizationsChartProvider);var defaults={isDonut:false,showTooltip:true,color:void 0,fillColor:void 0};var PieChart=function(_Chart){_inherits(PieChart,_Chart);function PieChart(handler,chartEl,chartData){_classCallCheck(this,PieChart);var _this=_possibleConstructorReturn(this,(PieChart.__proto__||Object.getPrototypeOf(PieChart)).call(this,handler,chartEl,chartData));var charts=_this.handler.data.getVisData();_this._validatePieData(charts);_this._attr=_lodash2.default.defaults(handler.visConfig.get("chart",{}),defaults);return _this}_createClass(PieChart,[{key:"_validatePieData",value:function _validatePieData(charts){var isAllZeros=charts.every(function(chart){return 0===chart.slices.children.length});if(isAllZeros)throw new _errors.PieContainsAllZeros}},{key:"addPathEvents",value:function addPathEvents(element){var events=this.events;return element.call(events.addHoverEvent()).call(events.addMouseoutEvent()).call(events.addClickEvent())}},{key:"convertToPercentage",value:function convertToPercentage(slices){(function assignPercentages(slices){if(null!=slices.sumOfChildren)return;var parent=slices;var children=parent.children;var parentPercent=parent.percentOfParent;var sum=parent.sumOfChildren=Math.abs(children.reduce(function(sum,child){return sum+Math.abs(child.size)},0));children.forEach(function(child){child.percentOfGroup=Math.abs(child.size)/sum;child.percentOfParent=child.percentOfGroup;null!=parentPercent&&(child.percentOfParent*=parentPercent);child.children&&assignPercentages(child)})})(slices)}},{key:"addPath",value:function addPath(width,height,svg,slices){var self=this;var marginFactor=.95;var isDonut=self._attr.isDonut;var radius=Math.min(width,height)/2*marginFactor;var color=self.handler.data.getPieColorFunc();var tooltip=self.tooltip;var isTooltip=self._attr.addTooltip;var arcs=svg.append("g").attr("class","arcs");var labels=svg.append("g").attr("class","labels");var showLabels=self._attr.labels.show;var showValues=self._attr.labels.values;var truncateLabelLength=self._attr.labels.truncate;var showOnlyOnLastLevel=self._attr.labels.last_level;var partition=_d2.default.layout.partition().sort(null).value(function(d){return 100*d.percentOfParent});var x=_d2.default.scale.linear().range([0,2*Math.PI]);var y=_d2.default.scale.sqrt().range([0,showLabels?.7*radius:radius]);var startAngle=function startAngle(d){return Math.max(0,Math.min(2*Math.PI,x(d.x)))};var endAngle=function endAngle(d){if(d.dx<1e-8)return x(d.x);return Math.max(0,Math.min(2*Math.PI,x(d.x+d.dx)))};var arc=_d2.default.svg.arc().startAngle(startAngle).endAngle(endAngle).innerRadius(function(d){if(1===d.depth&&!isDonut)return 0;return Math.max(0,y(d.y))}).outerRadius(function(d){return Math.max(0,y(d.y+d.dy))});var outerArc=_d2.default.svg.arc().startAngle(startAngle).endAngle(endAngle).innerRadius(.8*radius).outerRadius(.8*radius);var maxDepth=0;var path=arcs.datum(slices).selectAll("path").data(partition.nodes).enter().append("path").attr("d",arc).attr("class",function(d){if(0===d.depth)return;d.depth>maxDepth&&(maxDepth=d.depth);return"slice"}).attr("data-test-subj",function(d){if(d.name)return"pieSlice-"+d.name.split(" ").join("-")}).call(self._addIdentifier,"name").style("fill",function(d){if(0===d.depth)return"none";return color(d.name)});if(showLabels){var labelGroups=labels.datum(slices).selectAll(".label").data(partition.nodes);var svgParentNode=svg.node().parentNode.parentNode;var svgBBox={width:svgParentNode.clientWidth,height:svgParentNode.clientHeight};var labelLayout=_d2.default.geom.quadtree().extent([[-svgBBox.width,-svgBBox.height],[svgBBox.width,svgBBox.height]]).x(function(d){return d.position.x}).y(function(d){return d.position.y})([]);labelGroups.enter().append("g").attr("class","label").append("text").text(function(d){if(0===d.depth){_d2.default.select(this.parentNode).remove();return}if(showValues){var value=(0,_numeral2.default)(d.value/100).format("0.[00]%");return d.name+" ("+value+")"}return d.name}).text(function(){return(0,_truncate_labels.truncateLabel)(this,truncateLabelLength)}).attr("text-anchor",function(d){var midAngle=startAngle(d)+(endAngle(d)-startAngle(d))/2;return midAngle<Math.PI?"start":"end"}).attr("class","label-text").each(function resolveConflicts(d){if(0===d.depth)return;var parentNode=this.parentNode;if(showOnlyOnLastLevel&&maxDepth!==d.depth){_d2.default.select(parentNode).remove();return}var bbox=this.getBBox();var pos=outerArc.centroid(d);var midAngle=startAngle(d)+(endAngle(d)-startAngle(d))/2;pos[1]+=4;pos[0]=(.7+d.depth/10)*radius*(midAngle<Math.PI?1:-1);d.position={x:pos[0],y:pos[1],left:midAngle<Math.PI?pos[0]:pos[0]-bbox.width,right:midAngle>Math.PI?pos[0]+bbox.width:pos[0],bottom:pos[1]+5,top:pos[1]-bbox.height-5};var conflicts=[];labelLayout.visit(function(node){if(!node.point)return;if(conflicts.length)return true;var point=node.point.position;var current=d.position;if(point){var horizontalConflict=point.left<0&&current.left<0||point.left>0&&current.left>0;var verticalConflict=point.top>=current.top&&point.top<=current.bottom||point.top<=current.top&&point.bottom>=current.top;if(horizontalConflict&&verticalConflict){point.point=node.point;conflicts.push(point)}return true}});if(conflicts.length){_d2.default.select(parentNode).remove();return}labelLayout.add(d)}).attr("x",function(d){if(0===d.depth||!d.position)return;return d.position.x}).attr("y",function(d){if(0===d.depth||!d.position)return;return d.position.y});labelGroups.append("polyline").attr("points",function(d){if(0===d.depth||!d.position)return;var pos1=outerArc.centroid(d);var x2=d.position.x>0?d.position.x-10:d.position.x+10;var pos2=[x2,d.position.y-4];pos1[1]=pos2[1];return[arc.centroid(d),pos1,pos2]}).attr("class","label-line")}isTooltip&&path.call(tooltip.render());return path}},{key:"_validateContainerSize",value:function _validateContainerSize(width,height){var minWidth=20;var minHeight=20;if(width<=minWidth||height<=minHeight)throw new _errors.ContainerTooSmall}},{key:"draw",value:function draw(){var self=this;return function(selection){selection.each(function(data){var slices=data.slices;var div=_d2.default.select(this);var width=(0,_jquery2.default)(this).width();var height=(0,_jquery2.default)(this).height();if(!slices.children.length)return;self.convertToPercentage(slices);self._validateContainerSize(width,height);var svg=div.append("svg").attr("width",width).attr("height",height).append("g").attr("transform","translate("+width/2+","+height/2+")");var path=self.addPath(width,height,svg,slices);self.addPathEvents(path);self.events.emit("rendered",{chart:data});return svg})}}}]);return PieChart}(Chart);return PieChart}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();exports.GaugeChartProvider=GaugeChartProvider;var _d=__webpack_require__(19);var _d2=_interopRequireDefault(_d);var _jquery=__webpack_require__(13);var _jquery2=_interopRequireDefault(_jquery);var _chart=__webpack_require__(887);var _gauge_types=__webpack_require__(4130);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function GaugeChartProvider(Private){var Chart=Private(_chart.VislibVisualizationsChartProvider);var gaugeTypes=Private(_gauge_types.GaugeTypesProvider);var GaugeChart=function(_Chart){_inherits(GaugeChart,_Chart);function GaugeChart(handler,chartEl,chartData){_classCallCheck(this,GaugeChart);var _this=_possibleConstructorReturn(this,(GaugeChart.__proto__||Object.getPrototypeOf(GaugeChart)).call(this,handler,chartEl,chartData));_this.gaugeConfig=handler.visConfig.get("gauge",{});_this.gauge=new gaugeTypes[_this.gaugeConfig.type](_this);return _this}_createClass(GaugeChart,[{key:"addEvents",value:function addEvents(element){var events=this.events;return element.call(events.addHoverEvent()).call(events.addMouseoutEvent()).call(events.addClickEvent())}},{key:"draw",value:function draw(){var self=this;var verticalSplit=this.gaugeConfig.verticalSplit;return function(selection){selection.each(function(data){var div=_d2.default.select(this);var containerMargin=20;var containerWidth=(0,_jquery2.default)(this).width()-containerMargin;var containerHeight=(0,_jquery2.default)(this).height()-containerMargin;var width=Math.floor(verticalSplit?(0,_jquery2.default)(this).width():containerWidth/data.series.length);var height=Math.floor((verticalSplit?containerHeight/data.series.length:(0,_jquery2.default)(this).height())-25);if(height<0||width<0)return;div.style("text-align","center").style("overflow-y","auto");data.series.forEach(function(series){var svg=div.append("svg").style("display","inline-block").style("overflow","hidden").attr("width",width);var g=svg.append("g");var gauges=self.gauge.drawGauge(g,series,width,height);svg.attr("height",height);var transformX=width/2;var transformY="Arc"===self.gaugeConfig.gaugeType?height/1.5:height/2;g.attr("transform","translate("+transformX+", "+transformY+")");self.addEvents(gauges)});div.append("div").attr("class","chart-title").style("text-align","center").text(data.label||data.yAxisLabel);self.events.emit("rendered",{chart:data});return div})}}}]);return GaugeChart}(Chart);return GaugeChart}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GaugeTypesProvider=GaugeTypesProvider;var _meter=__webpack_require__(4131);function GaugeTypesProvider(Private){return{meter:Private(_meter.MeterGaugeProvider)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();exports.MeterGaugeProvider=MeterGaugeProvider;var _d=__webpack_require__(19);var _d2=_interopRequireDefault(_d);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _heatmap_color=__webpack_require__(888);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function MeterGaugeProvider(){var defaultConfig={showTooltip:true,percentageMode:true,maxAngle:2*Math.PI*1.3,minAngle:2*Math.PI*.7,innerSpace:5,extents:[0,1e4],scale:{show:true,color:"#666",width:2,ticks:10,tickLength:8},labels:{show:true,color:"#666"},style:{bgWidth:.5,width:.9}};var MeterGauge=function(){function MeterGauge(gaugeChart){_classCallCheck(this,MeterGauge);this.gaugeChart=gaugeChart;this.gaugeConfig=gaugeChart.gaugeConfig;this.gaugeConfig=_lodash2.default.defaultsDeep(this.gaugeConfig,defaultConfig);this.gaugeChart.handler.visConfig.set("legend",{labels:this.getLabels(),colors:this.getColors()});var colors=this.gaugeChart.handler.visConfig.get("legend.colors",null);if(colors){this.gaugeChart.handler.vis.uiState.setSilent("vis.defaultColors",null);this.gaugeChart.handler.vis.uiState.setSilent("vis.defaultColors",colors)}this.colorFunc=this.gaugeChart.handler.data.getColorFunc()}_createClass(MeterGauge,[{key:"getLabels",value:function getLabels(){var isPercentageMode=this.gaugeConfig.percentageMode;var colorsRange=this.gaugeConfig.colorsRange;var max=_lodash2.default.last(colorsRange).to;var labels=[];colorsRange.forEach(function(range){var from=isPercentageMode?Math.round(100*range.from/max):range.from;var to=isPercentageMode?Math.round(100*range.to/max):range.to;labels.push(from+" - "+to)});return labels}},{key:"getColors",value:function getColors(){var invertColors=this.gaugeConfig.invertColors;var colorSchema=this.gaugeConfig.colorSchema;var colorsRange=this.gaugeConfig.colorsRange;var labels=this.getLabels();var colors={};for(var i=0;i<labels.length;i+=1){var divider=Math.max(colorsRange.length-1,1);var val=invertColors?1-i/divider:i/divider;colors[labels[i]]=(0,_heatmap_color.getHeatmapColors)(val,colorSchema)}return colors}},{key:"getBucket",value:function getBucket(val){var bucket=_lodash2.default.findIndex(this.gaugeConfig.colorsRange,function(range){return range.from<=val&&range.to>val});-1===bucket&&(bucket=val<this.gaugeConfig.colorsRange[0].from?0:this.gaugeConfig.colorsRange.length-1);return bucket}},{key:"getLabel",value:function getLabel(val){var bucket=this.getBucket(val);var labels=this.gaugeChart.handler.visConfig.get("legend.labels");return labels[bucket]}},{key:"getColorBucket",value:function getColorBucket(val){var bucket=this.getBucket(val);var labels=this.gaugeChart.handler.visConfig.get("legend.labels");return this.colorFunc(labels[bucket])}},{key:"drawScale",value:function drawScale(svg,radius,angle){var _this=this;var scaleWidth=this.gaugeConfig.scale.width;var tickLength=this.gaugeConfig.scale.tickLength;var scaleTicks=this.gaugeConfig.scale.ticks;var scale=svg.append("g");this.gaugeConfig.colorsRange.forEach(function(range){var color=_this.getColorBucket(range.from);var scaleArc=_d2.default.svg.arc().startAngle(angle(range.from)).endAngle(angle(range.to)).innerRadius(radius).outerRadius(radius+scaleWidth);scale.append("path").attr("d",scaleArc).style("stroke",color).style("fill",color)});var extents=angle.domain();for(var i=0;i<=scaleTicks;i++){var val=i*(extents[1]-extents[0])/scaleTicks;var tickAngle=angle(val)-Math.PI/2;var x0=Math.cos(tickAngle)*radius;var x1=Math.cos(tickAngle)*(radius-tickLength);var y0=Math.sin(tickAngle)*radius;var y1=Math.sin(tickAngle)*(radius-tickLength);var color=this.getColorBucket(val);scale.append("line").attr("x1",x0).attr("x2",x1).attr("y1",y0).attr("y2",y1).style("stroke-width",scaleWidth).style("stroke",color)}return scale}},{key:"drawGauge",value:function drawGauge(svg,data,width,height){var _this2=this;var self=this;var marginFactor=.95;var tooltip=this.gaugeChart.tooltip;var isTooltip=this.gaugeChart.handler.visConfig.get("addTooltip");var isDisplayWarning=this.gaugeChart.handler.visConfig.get("isDisplayWarning",false);var maxAngle=this.gaugeConfig.maxAngle;var minAngle=this.gaugeConfig.minAngle;var angleFactor="Arc"===this.gaugeConfig.gaugeType?.75:1;var maxRadius=Math.min(width,height/angleFactor)/2*marginFactor;var extendRange=this.gaugeConfig.extendRange;var maxY=_lodash2.default.max(data.values,"y").y;var min=this.gaugeConfig.colorsRange[0].from;var max=_lodash2.default.last(this.gaugeConfig.colorsRange).to;var angle=_d2.default.scale.linear().range([minAngle,maxAngle]).domain([min,extendRange&&max<maxY?maxY:max]);var radius=_d2.default.scale.linear().range([0,maxRadius]).domain([this.gaugeConfig.innerSpace+1,0]);var totalWidth=Math.abs(radius(0)-radius(1));var bgPadding=totalWidth*(1-this.gaugeConfig.style.bgWidth)/2;var gaugePadding=totalWidth*(1-this.gaugeConfig.style.width)/2;var arc=_d2.default.svg.arc().startAngle(minAngle).endAngle(function(d){return Math.max(0,Math.min(maxAngle,angle(Math.max(min,d.y))))}).innerRadius(function(d,i,j){return Math.max(0,radius(j+1)+gaugePadding)}).outerRadius(function(d,i,j){return Math.max(0,radius(j)-gaugePadding)});var bgArc=_d2.default.svg.arc().startAngle(minAngle).endAngle(maxAngle).innerRadius(function(d,i,j){return Math.max(0,radius(j+1)+bgPadding)}).outerRadius(function(d,i,j){return Math.max(0,radius(j)-bgPadding)});var gaugeHolders=svg.selectAll("path").data([data]).enter().append("g").attr("data-label",function(d){return _this2.getLabel(d.values[0].y)});var gauges=gaugeHolders.selectAll("g").data(function(d){return d.values}).enter();gauges.append("path").attr("d",bgArc).style("fill",this.gaugeConfig.style.bgFill);var series=gauges.append("path").attr("d",arc).style("fill",function(d){return self.getColorBucket(Math.max(min,d.y))});var smallContainer=svg.node().getBBox().height<70;var hiddenLabels=smallContainer;if(this.gaugeConfig.labels.show){svg.append("text").attr("class","chart-label").text(data.label).attr("y",-30).attr("style","dominant-baseline: central; text-anchor: middle;").style("display",function(){var textLength=this.getBBox().width;var textTooLong=textLength>maxRadius;textTooLong&&(hiddenLabels=true);return smallContainer||textTooLong?"none":"initial"});svg.append("text").attr("class","chart-label").text(this.gaugeConfig.style.subText).attr("y",20).attr("style","dominant-baseline: central; text-anchor: middle;").style("display",function(){var textLength=this.getBBox().width;var textTooLong=textLength>maxRadius;textTooLong&&(hiddenLabels=true);return smallContainer||textTooLong?"none":"initial"})}gauges.append("text").attr("class","chart-label").attr("y",-5).text(function(d){if(_this2.gaugeConfig.percentageMode){var percentage=Math.round(100*(d.y-min)/(max-min));return percentage+"%"}if(_lodash2.default.has(d,"aggConfigResult.aggConfig")){var fieldFormatter=d.aggConfigResult.aggConfig.fieldFormatter("text");return fieldFormatter(d.y)}return d.y}).attr("style","dominant-baseline: central;").style("text-anchor","middle").style("font-size","2em").style("display",function(){var textLength=this.getBBox().width;var textTooLong=textLength>maxRadius;textTooLong&&(hiddenLabels=true);return textTooLong?"none":"initial"});this.gaugeConfig.scale.show&&this.drawScale(svg,radius(1),angle);isTooltip&&series.each(function(){var gauge=_d2.default.select(this);gauge.call(tooltip.render())});hiddenLabels&&isDisplayWarning&&this.gaugeChart.handler.alerts.show("Some labels were hidden due to size constraints");return series}}]);return MeterGauge}();return MeterGauge}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();exports.VislibVisProvider=VislibVisProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _d=__webpack_require__(19);var _d2=_interopRequireDefault(_d);var _errors=__webpack_require__(56);var _events=__webpack_require__(398);__webpack_require__(1480);var _vis_config=__webpack_require__(4133);var _handler=__webpack_require__(4134);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function VislibVisProvider(Private){var Events=Private(_events.EventsProvider);var VisConfig=Private(_vis_config.VislibVisConfigProvider);var Handler=Private(_handler.VisHandlerProvider);var Vis=function(_Events){_inherits(Vis,_Events);function Vis($el,visConfigArgs){_classCallCheck(this,Vis);var _this=_possibleConstructorReturn(this,(Vis.__proto__||Object.getPrototypeOf(Vis)).call(this,arguments));_this.el=$el.get?$el.get(0):$el;_this.visConfigArgs=_lodash2.default.cloneDeep(visConfigArgs);return _this}_createClass(Vis,[{key:"hasLegend",value:function hasLegend(){return this.visConfigArgs.addLegend}},{key:"render",value:function render(data,uiState){if(!data)throw new Error("No valid data!");if(this.handler){this.data=null;this._runOnHandler("destroy")}this.data=data;this.uiState=uiState;this.visConfig=new VisConfig(this.visConfigArgs,this.data,this.uiState,this.el);this.handler=new Handler(this,this.visConfig);this._runOnHandler("render")}},{key:"getLegendLabels",value:function getLegendLabels(){return this.visConfig?this.visConfig.get("legend.labels",null):null}},{key:"getLegendColors",value:function getLegendColors(){return this.visConfig?this.visConfig.get("legend.colors",null):null}},{key:"_runOnHandler",value:function _runOnHandler(method){try{this.handler[method]()}catch(error){if(!(error instanceof _errors.KbnError))throw error;error.displayToScreen(this.handler)}}},{key:"destroy",value:function destroy(){var selection=_d2.default.select(this.el).select(".vis-wrapper");this.handler&&this._runOnHandler("destroy");selection.remove()}},{key:"set",value:function set(name,val){this.visConfigArgs[name]=val;this.render(this.data,this.uiState)}},{key:"get",value:function get(name){return this.visConfig.get(name)}},{key:"on",value:function on(event,listener){var first=0===this.listenerCount(event);var ret=Events.prototype.on.call(this,event,listener);var added=this.listenerCount(event)>0;first&&added&&this.handler&&this.handler.enable(event);return ret}},{key:"off",value:function off(event,listener){var last=1===this.listenerCount(event);var ret=Events.prototype.off.call(this,event,listener);var removed=0===this.listenerCount(event);last&&removed&&this.handler&&this.handler.disable(event);return ret}}]);return Vis}(Events);return Vis}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();exports.VislibVisConfigProvider=VislibVisConfigProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _types=__webpack_require__(1475);var _data=__webpack_require__(885);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function VislibVisConfigProvider(Private){var Data=Private(_data.VislibLibDataProvider);var visTypes=Private(_types.VislibTypesProvider);var DEFAULT_VIS_CONFIG={style:{margin:{top:10,right:3,bottom:5,left:3}},alerts:[],categoryAxes:[],valueAxes:[],grid:{}};var VisConfig=function(){function VisConfig(visConfigArgs,data,uiState,el){_classCallCheck(this,VisConfig);this.data=new Data(data,uiState);var visType=visTypes[visConfigArgs.type];var typeDefaults=visType(visConfigArgs,this.data);this._values=_lodash2.default.defaultsDeep({},typeDefaults,DEFAULT_VIS_CONFIG);this._values.el=el}_createClass(VisConfig,[{key:"get",value:function get(property,defaults){if(_lodash2.default.has(this._values,property)||"undefined"!==typeof defaults)return _lodash2.default.get(this._values,property,defaults);throw new Error("Accessing invalid config property: "+property)}},{key:"set",value:function set(property,value){return _lodash2.default.set(this._values,property,value)}}]);return VisConfig}();return VisConfig}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();exports.VisHandlerProvider=VisHandlerProvider;var _d=__webpack_require__(19);var _d2=_interopRequireDefault(_d);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _markdownIt=__webpack_require__(457);var _markdownIt2=_interopRequireDefault(_markdownIt);var _errors=__webpack_require__(56);var _binder=__webpack_require__(1478);var _layout=__webpack_require__(4135);var _chart_title=__webpack_require__(1483);var _alerts=__webpack_require__(4142);var _axis=__webpack_require__(1481);var _chart_grid=__webpack_require__(4143);var _vis_types=__webpack_require__(1477);var _render_complete=__webpack_require__(507);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var markdownIt=new _markdownIt2.default({html:false,linkify:true});function VisHandlerProvider(Private){var chartTypes=Private(_vis_types.VislibVisualizationsVisTypesProvider);var Layout=Private(_layout.VislibLibLayoutLayoutProvider);var ChartTitle=Private(_chart_title.VislibLibChartTitleProvider);var Alerts=Private(_alerts.VislibLibAlertsProvider);var Axis=Private(_axis.VislibLibAxisProvider);var Grid=Private(_chart_grid.VislibGridProvider);var Handler=function(){function Handler(vis,visConfig){_classCallCheck(this,Handler);this.el=visConfig.get("el");this.ChartClass=chartTypes[visConfig.get("type")];this.charts=[];this.vis=vis;this.visConfig=visConfig;this.data=visConfig.data;this.categoryAxes=visConfig.get("categoryAxes").map(function(axisArgs){return new Axis(visConfig,axisArgs)});this.valueAxes=visConfig.get("valueAxes").map(function(axisArgs){return new Axis(visConfig,axisArgs)});this.chartTitle=new ChartTitle(visConfig);this.alerts=new Alerts(this,visConfig.get("alerts"));this.grid=new Grid(this,visConfig.get("grid"));"point_series"===visConfig.get("type")&&this.data.stackData(this);visConfig.get("resize",false)&&(this.resize=visConfig.get("resize"));this.layout=new Layout(visConfig);this.binder=new _binder.Binder;this.renderArray=_lodash2.default.filter([this.layout,this.chartTitle,this.alerts],Boolean);this.renderArray=this.renderArray.concat(this.valueAxes).concat(this.categoryAxes.slice().reverse());this.getProxyHandler=_lodash2.default.memoize(function(event){var self=this;return function(e){self.vis.emit(event,e)}});this.enable=this.chartEventProxyToggle("on");this.disable=this.chartEventProxyToggle("off")}_createClass(Handler,[{key:"_validateData",value:function _validateData(){var dataType=this.data.type;if(!dataType)throw new _errors.NoResults}},{key:"render",value:function render(){if(this.visConfig.get("error",null))return this.error(this.visConfig.get("error"));var self=this;var binder=this.binder,_charts=this.charts,charts=void 0===_charts?[]:_charts;var selection=_d2.default.select(this.el);selection.selectAll("*").remove();this._validateData();this.renderArray.forEach(function(property){"function"===typeof property.render&&property.render()});var loadedCount=0;var chartSelection=selection.selectAll(".chart");chartSelection.each(function(chartData){var chart=new self.ChartClass(self,this,chartData);self.vis.activeEvents().forEach(function(event){self.enable(event,chart)});binder.on(chart.events,"rendered",function(){loadedCount++;loadedCount===chartSelection.length&&self.vis.emit("renderComplete")});charts.push(chart);chart.render()})}},{key:"chartEventProxyToggle",value:function chartEventProxyToggle(method){return function(event,chart){var proxyHandler=this.getProxyHandler(event);_lodash2.default.each(chart?[chart]:this.charts,function(chart){chart.events[method](event,proxyHandler)})}}},{key:"removeAll",value:function removeAll(el){return _d2.default.select(el).selectAll("*").remove()}},{key:"error",value:function error(message){this.removeAll(this.el);var div=_d2.default.select(this.el).append("div").attr("class","visualize-error chart error");if("No results found"===message){div.append("div").attr("class","text-center visualize-error visualize-chart").append("div").attr("class","item top").append("div").attr("class","item").append("h2").html('<i class="fa fa-meh-o"></i>').append("h4").text(message);div.append("div").attr("class","item bottom")}else div.append("h4").text(markdownIt.renderInline(message));(0,_render_complete.dispatchRenderComplete)(this.el);return div}},{key:"destroy",value:function destroy(){this.binder.destroy();this.renderArray.forEach(function(renderable){_lodash2.default.isFunction(renderable.destroy)&&renderable.destroy()});this.charts.splice(0).forEach(function(chart){_lodash2.default.isFunction(chart.destroy)&&chart.destroy()})}}]);return Handler}();return Handler}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();exports.VislibLibLayoutLayoutProvider=VislibLibLayoutLayoutProvider;var _d=__webpack_require__(19);var _d2=_interopRequireDefault(_d);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _jquery=__webpack_require__(13);var _jquery2=_interopRequireDefault(_jquery);var _layout_types=__webpack_require__(1476);var _axis=__webpack_require__(4136);var _chart_title=__webpack_require__(1483);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function VislibLibLayoutLayoutProvider(Private){var layoutType=Private(_layout_types.VislibLibLayoutLayoutTypesProvider);var Axis=Private(_axis.VislibLibAxisProvider);var ChartTitle=Private(_chart_title.VislibLibChartTitleProvider);var Layout=function(){function Layout(config){_classCallCheck(this,Layout);this.el=config.get("el");this.data=config.data.data;this.opts=config;this.layoutType=layoutType[config.get("type")](this.el,this.data)}_createClass(Layout,[{key:"render",value:function render(){this.removeAll(this.el);this.createLayout(this.layoutType);"point_series"===this.opts.get("type")&&this.updateCategoryAxisSize()}},{key:"createLayout",value:function createLayout(arr){var _this=this;return _lodash2.default.each(arr,function(obj){_this.layout(obj)})}},{key:"updateCategoryAxisSize",value:function updateCategoryAxisSize(){var visConfig=this.opts;var axisConfig=visConfig.get("categoryAxes[0]");var axis=new Axis(visConfig,axisConfig);var position=axis.axisConfig.get("position");var chartTitle=new ChartTitle(visConfig);var axisWrapperElement=(0,_jquery2.default)(this.el).find(".axis-wrapper-"+position);axisWrapperElement.css("visibility","hidden");axis.render();chartTitle.render();var width=axisWrapperElement.width();var height=axisWrapperElement.height();axis.destroy();(0,_jquery2.default)(this.el).find(".chart-title svg").remove();axisWrapperElement.css("visibility","");if(axis.axisConfig.isHorizontal()){var spacerNodes=(0,_jquery2.default)(this.el).find(".y-axis-spacer-block-"+position);spacerNodes.height(height+"px")}else axisWrapperElement.find(".y-axis-div-wrapper").width(width+"px")}},{key:"layout",value:function layout(obj){if(!obj.parent)throw new Error("No parent element provided");if(!obj.type)throw new Error("No element type provided");if("string"!==typeof obj.type)throw new Error(obj.type+" must be a string");"string"===typeof obj.parent&&"."!==obj.parent.charAt(0)&&(obj.parent="."+obj.parent);var childEl=this.appendElem(obj.parent,obj.type,obj.class);obj.datum&&childEl.datum(obj.datum);obj.splits&&childEl.call(obj.splits,obj.parent,this.opts);if(obj.children){var newParent=childEl[0][0];_lodash2.default.forEach(obj.children,function(obj){obj.parent||(obj.parent=newParent)});this.createLayout(obj.children)}return childEl}},{key:"appendElem",value:function appendElem(el,type,className){if(!el||!type||!className)throw new Error("Function requires that an el, type, and class be provided");"string"===typeof el&&(el=_d2.default.select(this.el).select(el)[0][0]);return _d2.default.select(el).append(type).attr("class",className)}},{key:"removeAll",value:function removeAll(el){return _d2.default.select(el).selectAll("*").remove()}}]);return Layout}();return Layout}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _axis=__webpack_require__(1481);Object.defineProperty(exports,"VislibLibAxisProvider",{enumerable:true,get:function get(){return _axis.VislibLibAxisProvider}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();exports.VislibLibAxisTitleProvider=VislibLibAxisTitleProvider;var _d=__webpack_require__(19);var _d2=_interopRequireDefault(_d);var _jquery=__webpack_require__(13);var _jquery2=_interopRequireDefault(_jquery);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function VislibLibAxisTitleProvider(){var AxisTitle=function(){function AxisTitle(axisConfig){_classCallCheck(this,AxisTitle);this.axisConfig=axisConfig;this.elSelector=this.axisConfig.get("title.elSelector").replace("{pos}",this.axisConfig.get("position"))}_createClass(AxisTitle,[{key:"render",value:function render(){_d2.default.select(this.axisConfig.get("rootEl")).selectAll(this.elSelector).call(this.draw())}},{key:"destroy",value:function destroy(){(0,_jquery2.default)(this.axisConfig.get("rootEl")).find(this.elSelector).find("svg").remove()}},{key:"draw",value:function draw(){var config=this.axisConfig;return function(selection){selection.each(function(){if(!config.get("show")&&!config.get("title.show",false))return;var el=this;var div=_d2.default.select(el);var width=(0,_jquery2.default)(el).width();var height=(0,_jquery2.default)(el).height();var axisPrefix=config.isHorizontal()?"x":"y";var svg=div.append("svg").attr("width",width).attr("height",height).attr("class","axis-title "+axisPrefix+"-axis-title");var bbox=svg.append("text").attr("transform",function(){if(config.isHorizontal())return"translate("+width/2+",0)";return"translate(0,"+height/2+") rotate(270)"}).attr("text-anchor","middle").attr("dominant-baseline","hanging").text(config.get("title.text")).node().getBBox();config.isHorizontal()?svg.attr("height",Math.ceil(bbox.height)):svg.attr("width",Math.ceil(bbox.height))})}}}]);return AxisTitle}();return AxisTitle}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();exports.VislibAxisLabelsProvider=VislibAxisLabelsProvider;var _d=__webpack_require__(19);var _d2=_interopRequireDefault(_d);var _jquery=__webpack_require__(13);var _jquery2=_interopRequireDefault(_jquery);var _truncate_labels=__webpack_require__(1479);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function VislibAxisLabelsProvider(){var AxisLabels=function(){function AxisLabels(axisConfig,scale){_classCallCheck(this,AxisLabels);this.axisConfig=axisConfig;this.axisScale=scale}_createClass(AxisLabels,[{key:"render",value:function render(selection){selection.call(this.draw())}},{key:"rotateAxisLabels",value:function rotateAxisLabels(){var config=this.axisConfig;return function(selection){var text=selection.selectAll(".tick text");config.get("labels.rotate")&&text.style("text-anchor",function(){var currentValue=(0,_jquery2.default)(this).css("text-anchor");var rotateDeg=config.get("labels.rotate");if(!rotateDeg)return currentValue;var position=config.get("position");switch(position){case"top":case"bottom":return"end";default:if(90===rotateDeg||-90===rotateDeg)return"middle";return currentValue}}).attr("dy",function(){return config.isHorizontal()?"0.3em":"0"}).attr("transform",function rotate(d,j){var position=config.get("position");var rotateDeg="top"===position?config.get("labels.rotate"):-config.get("labels.rotate");if("middle"===(0,_jquery2.default)(this).css("text-anchor")){var coord=text[0][j].getBBox();var transX=coord.x+coord.width/2;var transY=coord.y+coord.height/2;return"rotate("+rotateDeg+", "+transX+", "+transY+")"}var _transX=this.attributes.x.nodeValue;var _transY=this.attributes.y.nodeValue;return"rotate("+rotateDeg+", "+_transX+", "+_transY+")"})}}},{key:"truncateLabels",value:function truncateLabels(){var config=this.axisConfig;return function(selection){if(!config.get("labels.truncate"))return;selection.selectAll(".tick text").text(function(){return(0,_truncate_labels.truncateLabel)(this,config.get("labels.truncate"))})}}},{key:"filterAxisLabels",value:function filterAxisLabels(){var self=this;var config=this.axisConfig;var startPos=0;var padding=1.1;return function(selection){if(!config.get("labels.filter"))return;var el=(0,_jquery2.default)(config.get("rootEl")).find(config.get("elSelector"));var maxSize=config.isHorizontal()?el.width():el.height();var scaleRange=self.axisScale.scale.range();var scaleWidth=Math.abs(scaleRange[scaleRange.length-1]-scaleRange[0]);var scaleStartPad=.5*(maxSize-scaleWidth);selection.selectAll(".tick text").text(function(d){var par=_d2.default.select(this.parentNode).node();var myPos=scaleStartPad+(config.isHorizontal()?self.axisScale.scale(d):maxSize-self.axisScale.scale(d));var mySize=(config.isHorizontal()?par.getBBox().width:par.getBBox().height)*padding;var halfSize=mySize/2;if(startPos+halfSize<myPos&&maxSize>myPos+halfSize){startPos=myPos+halfSize;return this.textContent}_d2.default.select(this.parentNode).remove()})}}},{key:"draw",value:function draw(){var self=this;var config=this.axisConfig;return function(selection){selection.each(function(){selection.selectAll("text").attr("style",function(){var currentStyle=_d2.default.select(this).attr("style");return currentStyle+" font-size: "+config.get("labels.fontSize")+";"});config.get("labels.show")||selection.selectAll("text").attr("style","display: none;");selection.call(self.truncateLabels());selection.call(self.rotateAxisLabels());selection.call(self.filterAxisLabels())})}}}]);return AxisLabels}();return AxisLabels}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();exports.VislibAxisScaleProvider=VislibAxisScaleProvider;var _d=__webpack_require__(19);var _d2=_interopRequireDefault(_d);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _moment=__webpack_require__(10);var _moment2=_interopRequireDefault(_moment);var _errors=__webpack_require__(56);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function VislibAxisScaleProvider(){var AxisScale=function(){function AxisScale(axisConfig,visConfig){_classCallCheck(this,AxisScale);this.axisConfig=axisConfig;this.visConfig=visConfig;if("category"===this.axisConfig.get("type")){this.values=this.axisConfig.values;this.ordered=this.axisConfig.ordered}}_createClass(AxisScale,[{key:"getScaleType",value:function getScaleType(){return this.axisConfig.getScaleType()}},{key:"validateUserExtents",value:function validateUserExtents(domain){var config=this.axisConfig;return domain.map(function(val){val=parseFloat(val);if(isNaN(val))throw new Error(val+" is not a valid number");if(config.isPercentage()&&config.isUserDefined())return val/100;return val})}},{key:"getTimeDomain",value:function getTimeDomain(data){return[this.minExtent(data),this.maxExtent(data)]}},{key:"minExtent",value:function minExtent(data){return this.calculateExtent(data||this.values,"min")}},{key:"maxExtent",value:function maxExtent(data){return this.calculateExtent(data||this.values,"max")}},{key:"calculateExtent",value:function calculateExtent(data,extent){var ordered=this.ordered;var opts=[ordered[extent]];var point=_d2.default[extent](data);this.axisConfig.get("scale.expandLastBucket")&&"max"===extent&&(point=this.addInterval(point));opts.push(point);return _d2.default[extent](opts.reduce(function(opts,v){_lodash2.default.isNumber(v)||(v=+v);isNaN(v)||opts.push(v);return opts},[]))}},{key:"addInterval",value:function addInterval(x){return this.modByInterval(x,1)}},{key:"subtractInterval",value:function subtractInterval(x){return this.modByInterval(x,-1)}},{key:"modByInterval",value:function modByInterval(x,n){var ordered=this.ordered;if(!ordered)return x;var interval=ordered.interval;if(!interval)return x;if(!ordered.date)return x+ordered.interval*n;var y=(0,_moment2.default)(x);var method=n>0?"add":"subtract";_lodash2.default.times(Math.abs(n),function(){y[method](interval)});return y.valueOf()}},{key:"getAllPoints",value:function getAllPoints(){var _this=this;var config=this.axisConfig;var data=this.visConfig.data.chartData();var chartPoints=_lodash2.default.reduce(data,function(chartPoints,chart,chartIndex){var points=chart.series.reduce(function(points,seri,seriIndex){var seriConfig=_this.visConfig.get("charts["+chartIndex+"].series["+seriIndex+"]");var matchingValueAxis=!!seriConfig.valueAxis&&seriConfig.valueAxis===config.get("id");var isFirstAxis=config.get("id")===_this.visConfig.get("valueAxes[0].id");if(matchingValueAxis||!seriConfig.valueAxis&&isFirstAxis){var axisPoints=seri.values.map(function(val){if(val.y0)return val.y0+val.y;return val.y});return points.concat(axisPoints)}return points},[]);return chartPoints.concat(points)},[]);return chartPoints}},{key:"getYMin",value:function getYMin(){return _d2.default.min(this.getAllPoints())}},{key:"getYMax",value:function getYMax(){return _d2.default.max(this.getAllPoints())}},{key:"getExtents",value:function getExtents(){if("category"===this.axisConfig.get("type")){if(this.axisConfig.isTimeDomain())return this.getTimeDomain(this.values);if(this.axisConfig.isOrdinal())return this.values}var min=this.axisConfig.get("scale.min",this.getYMin());var max=this.axisConfig.get("scale.max",this.getYMax());var domain=[min,max];if(this.axisConfig.isUserDefined())return this.validateUserExtents(domain);if(this.axisConfig.isLogScale())return this.logDomain(min,max);if(this.axisConfig.isYExtents())return domain;return[Math.min(0,min),Math.max(0,max)]}},{key:"getRange",value:function getRange(length){return this.axisConfig.isHorizontal()?this.axisConfig.get("scale.inverted")?[length,0]:[0,length]:this.axisConfig.get("scale.inverted")?[0,length]:[length,0]}},{key:"throwCustomError",value:function throwCustomError(message){throw new Error(message)}},{key:"throwLogScaleValuesError",value:function throwLogScaleValuesError(){throw new _errors.InvalidLogScaleValues}},{key:"logDomain",value:function logDomain(min,max){if(min<0||max<0)return this.throwLogScaleValuesError();return[1,max]}},{key:"getD3Scale",value:function getD3Scale(scaleTypeArg){var scaleType=scaleTypeArg||"linear";"square root"===scaleType&&(scaleType="sqrt");if(this.axisConfig.isTimeDomain())return _d2.default.time.scale.utc();if(this.axisConfig.isOrdinal())return _d2.default.scale.ordinal();if("function"!==typeof _d2.default.scale[scaleType])return this.throwCustomError("Axis.getScaleType: "+scaleType+" is not a function");return _d2.default.scale[scaleType]()}},{key:"canApplyNice",value:function canApplyNice(){var config=this.axisConfig;return!config.isUserDefined()&&!config.isYExtents()&&!config.isOrdinal()&&!config.isTimeDomain()}},{key:"getScale",value:function getScale(length){var config=this.axisConfig;var scale=this.getD3Scale(config.getScaleType());var domain=this.getExtents();var range=this.getRange(length);var padding=config.get("style.rangePadding");var outerPadding=config.get("style.rangeOuterPadding");this.scale=scale.domain(domain);config.isOrdinal()?this.scale.rangeBands(range,padding,outerPadding):this.scale.range(range);this.canApplyNice()&&this.scale.nice();this.scale.clamp&&this.scale.clamp(true);this.validateScale(this.scale);return this.scale}},{key:"validateScale",value:function validateScale(scale){if(!scale||_lodash2.default.isNaN(scale))throw new Error("scale is "+scale)}}]);return AxisScale}();return AxisScale}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();exports.VislibLibAxisConfigProvider=VislibLibAxisConfigProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _d=__webpack_require__(19);var _d2=_interopRequireDefault(_d);var _scale_modes=__webpack_require__(4141);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function VislibLibAxisConfigProvider(){var defaults={show:true,type:"value",elSelector:".axis-wrapper-{pos} .axis-div",position:"left",scale:{type:"linear",expandLastBucket:true,inverted:false,setYExtents:null,defaultYExtents:null,min:null,max:null,mode:_scale_modes.SCALE_MODES.NORMAL},style:{color:"#ddd",lineWidth:"1px",opacity:1,tickColor:"#ddd",tickWidth:"1px",tickLength:"6px",rangePadding:.1,rangeOuterPadding:0},labels:{axisFormatter:null,show:true,rotate:0,rotateAnchor:"center",filter:false,color:"#ddd",font:'"Open Sans", "Lato", "Helvetica Neue", Helvetica, Arial, sans-serif',fontSize:"8pt",truncate:100},title:{text:"",elSelector:".axis-wrapper-{pos} .axis-div"}};var categoryDefaults={type:"category",position:"bottom"};var valueDefaults={labels:{axisFormatter:_d2.default.format("n")}};var horizontalDefaults={labels:{rotate:0,rotateAnchor:"end",filter:true,truncate:0}};var verticalDefaults={labels:{rotateAnchor:"middle"}};var AxisConfig=function(){function AxisConfig(chartConfig,axisConfigArgs){_classCallCheck(this,AxisConfig);var typeDefaults="category"===axisConfigArgs.type?categoryDefaults:valueDefaults;var axisConfigArgsClone=_lodash2.default.cloneDeep(axisConfigArgs);var isCategoryAxis="category"===axisConfigArgsClone.type;var isHorizontal=axisConfigArgsClone.position&&["top","bottom"].includes(axisConfigArgsClone.position);_lodash2.default.merge(typeDefaults,isHorizontal||isCategoryAxis?horizontalDefaults:verticalDefaults);this._values=_lodash2.default.defaultsDeep({},axisConfigArgsClone,typeDefaults,defaults);this._values.elSelector=this._values.elSelector.replace("{pos}",this._values.position);this._values.rootEl=chartConfig.get("el");this.data=chartConfig.data;if(isCategoryAxis){if(this._values.values)this.values=this._values.values;else{this.values=this.data.xValues(chartConfig.get("orderBucketsBySum",false));this.ordered=this.data.get("ordered")}this._values.labels.axisFormatter||(this._values.labels.axisFormatter=this.data.data.xAxisFormatter||this.data.get("xAxisFormatter"))}if("value"===this.get("type")){var isWiggleOrSilhouette=this.get("scale.mode")===_scale_modes.SCALE_MODES.WIGGLE||this.get("scale.mode")===_scale_modes.SCALE_MODES.SILHOUETTE;if(isWiggleOrSilhouette){this._values.scale.defaultYExtents=false;if(!axisConfigArgs.show){this._values.show=false;this._values.title.show=true}}this.isPercentage()&&(this._values.labels.axisFormatter=_d2.default.format("%"));this.isLogScale()&&(this._values.labels.filter=true)}if(null==axisConfigArgs.title||null==axisConfigArgs.title.text){var label=isCategoryAxis?"xAxisLabel":"yAxisLabel";this.set("title.text",this.data.get(label))}if(this.isHorizontal()&&this.isOrdinal()){this._values.labels.filter=_lodash2.default.get(axisConfigArgs,"labels.filter",false);this._values.labels.rotate=_lodash2.default.get(axisConfigArgs,"labels.rotate",90);this._values.labels.truncate=_lodash2.default.get(axisConfigArgs,"labels.truncate",100)}"category"!==this.get("type")||this.isHorizontal()||(this._values.scale.inverted=_lodash2.default.get(axisConfigArgs,"scale.inverted",true));var offset=void 0;var stacked=true;switch(this.get("scale.mode")){case _scale_modes.SCALE_MODES.NORMAL:offset="zero";stacked=false;break;case _scale_modes.SCALE_MODES.GROUPED:offset="group";stacked=false;break;case _scale_modes.SCALE_MODES.PERCENTAGE:offset=function expand(data){var n=data.length;var m=data[0].length;var y0=[];for(var j=0;j<m;++j){var o=0;for(var i=0;i<n;i++)o+=data[i][j][1];if(o)for(var _i=0;_i<n;_i++)data[_i][j][1]/=o}for(var _j=0;_j<m;++_j)y0[_j]=0;return y0};break;default:offset=this.get("scale.mode")}this.set("scale.offset",_lodash2.default.get(axisConfigArgs,"scale.offset",offset));this.set("scale.stacked",stacked)}_createClass(AxisConfig,[{key:"get",value:function get(property,defaults){if("undefined"===typeof defaults&&!_lodash2.default.has(this._values,property))throw new Error("Accessing invalid config property: "+property);var val=_lodash2.default.get(this._values,property,defaults);if(null==val&&null!=defaults)return defaults;return val}},{key:"set",value:function set(property,value){return _lodash2.default.set(this._values,property,value)}},{key:"isHorizontal",value:function isHorizontal(){return"top"===this._values.position||"bottom"===this._values.position}},{key:"isOrdinal",value:function isOrdinal(){return!!this.values&&!this.isTimeDomain()}},{key:"isTimeDomain",value:function isTimeDomain(){return this.ordered&&this.ordered.date}},{key:"isPercentage",value:function isPercentage(){return this._values.scale.mode===_scale_modes.SCALE_MODES.PERCENTAGE}},{key:"isUserDefined",value:function isUserDefined(){return this._values.scale.setYExtents}},{key:"isYExtents",value:function isYExtents(){return this._values.scale.defaultYExtents}},{key:"isLogScale",value:function isLogScale(){return"log"===this.getScaleType()}},{key:"getScaleType",value:function getScaleType(){return this._values.scale.type}}]);return AxisConfig}();return AxisConfig}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SCALE_MODES={NORMAL:"normal",PERCENTAGE:"percentage",WIGGLE:"wiggle",SILHOUETTE:"silhouette",GROUPED:"grouped",ALL:["normal","percentage","wiggle","silhouette"]}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();exports.VislibLibAlertsProvider=VislibLibAlertsProvider;var _jquery=__webpack_require__(13);var _jquery2=_interopRequireDefault(_jquery);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function VislibLibAlertsProvider(){var Alerts=function(){function Alerts(vis,alertDefs){var _this=this;_classCallCheck(this,Alerts);this.vis=vis;this.data=vis.data;this.alertDefs=_lodash2.default.cloneDeep(alertDefs);this.alerts=(0,_lodash2.default)(alertDefs).map(function(alertDef){if(!alertDef)return;if(alertDef.test&&!alertDef.test(vis,_this.data))return;return _this._addAlert(alertDef)}).compact()}_createClass(Alerts,[{key:"_addAlert",value:function _addAlert(alertDef){var type=alertDef.type||"info";var icon=alertDef.icon||type;var msg=alertDef.msg;var $icon=(0,_jquery2.default)("<i>").addClass("vis-alerts-icon fa fa-"+icon);var $text=(0,_jquery2.default)("<p>").addClass("vis-alerts-text").text(msg);var $closeIcon=(0,_jquery2.default)("<i>").addClass("fa fa-close");var $closeDiv=(0,_jquery2.default)("<div>").addClass("vis-alerts-close").append($closeIcon);var $alert=(0,_jquery2.default)("<div>").addClass("vis-alert vis-alert-"+type).append([$icon,$text,$closeDiv]);$closeDiv.on("click",function(){$alert.remove()});return $alert}},{key:"render",value:function render(){var alerts=this.alerts;var vis=this.vis;(0,_jquery2.default)(vis.el).find(".vis-alerts").append((0,_jquery2.default)("<div>").addClass("vis-alerts-tray"));if(!alerts.size())return;(0,_jquery2.default)(vis.el).find(".vis-alerts-tray").append(alerts.value())}},{key:"show",value:function show(msg,type){var vis=this.vis;var alert={msg:msg,type:type};if(this.alertDefs.find(function(alertDef){return alertDef.msg===alert.msg}))return;this.alertDefs.push(alert);(0,_jquery2.default)(vis.el).find(".vis-alerts-tray").append(this._addAlert(alert))}},{key:"destroy",value:function destroy(){(0,_jquery2.default)(this.vis.el).find(".vis-alerts").remove()}}]);return Alerts}();return Alerts}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();exports.VislibGridProvider=VislibGridProvider;var _d=__webpack_require__(19);var _d2=_interopRequireDefault(_d);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function VislibGridProvider(){var defaults={style:{color:"#eee"},categoryLines:false,valueAxis:void 0};var ChartGrid=function(){function ChartGrid(handler,gridConfig){_classCallCheck(this,ChartGrid);if(!gridConfig)return;this._handler=handler;this._values=_lodash2.default.defaultsDeep({},gridConfig,defaults)}_createClass(ChartGrid,[{key:"drawLine",value:function drawLine(svg,tick,axis,width,height){var isHorizontal=axis.axisConfig.isHorizontal();var scale=axis.getScale();svg.append("path").attr("d",function(){var x0=isHorizontal?tick:0;var x1=isHorizontal?tick:width;var y0=isHorizontal?0:tick;var y1=isHorizontal?height:tick;var d3Line=_d2.default.svg.line().x(function(d){return isHorizontal?scale(d[0]):d[0]}).y(function(d){return isHorizontal?d[1]:scale(d[1])});return d3Line([[x0,y0],[x1,y1]])}).attr("fill","none").attr("stroke",this.get("style.color")).attr("stroke-width",1)}},{key:"drawCategoryLines",value:function drawCategoryLines(svg,width,height){var _this=this;var axis=this._handler.categoryAxes[0];if(!axis)return;var ticks=axis.getScale().ticks;if(!ticks)return;ticks().forEach(function(tick){_this.drawLine(svg,tick,axis,width,height)})}},{key:"drawValueLines",value:function drawValueLines(svg,width,height){var _this2=this;var axis=this._handler.valueAxes.find(function(axis){return axis.axisConfig.get("id")===_this2.get("valueAxis")});if(!axis)return;var ticks=axis.getScale().ticks;if(!ticks)return;ticks().forEach(function(tick){_this2.drawLine(svg,tick,axis,width,height)})}},{key:"draw",value:function draw(width,height){var self=this;return function(selection){if(!self._values)return;selection.each(function(){self.get("categoryLines")&&self.drawCategoryLines(_d2.default.select(this),width,height);self.get("valueAxis",false)&&self.drawValueLines(_d2.default.select(this),width,height)})}}},{key:"get",value:function get(property,defaults){if(_lodash2.default.has(this._values,property)||"undefined"!==typeof defaults)return _lodash2.default.get(this._values,property,defaults);throw new Error("Accessing invalid config property: "+property)}},{key:"set",value:function set(property,value){return _lodash2.default.set(this._values,property,value)}}]);return ChartGrid}();return ChartGrid}},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(2);var _render_complete_helper=__webpack_require__(1484);_modules.uiModules.get("kibana").directive("renderComplete",function(){return{controller:function controller($scope,$element){var el=$element[0];var renderCompleteHelper=new _render_complete_helper.RenderCompleteHelper(el);$scope.$on("$destroy",renderCompleteHelper.destroy)}}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ReactVisType=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _reactDom=__webpack_require__(15);var _chrome=__webpack_require__(8);var _chrome2=_interopRequireDefault(_chrome);var _base_vis_type=__webpack_require__(642);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var ReactVisController=function(){function ReactVisController(element,vis){_classCallCheck(this,ReactVisController);this.el=element;this.vis=vis}_createClass(ReactVisController,[{key:"render",value:function render(visData,updateStatus){var _this=this;this.visData=visData;return new Promise(function(resolve){var Component=_this.vis.type.visConfig.component;var config=_chrome2.default.getUiSettingsClient();(0,_reactDom.render)(_react2.default.createElement(Component,{config:config,vis:_this.vis,visData:visData,renderComplete:resolve,updateStatus:updateStatus}),_this.el)})}},{key:"destroy",value:function destroy(){(0,_reactDom.unmountComponentAtNode)(this.el)}}]);return ReactVisController}();exports.ReactVisType=function(_BaseVisType){_inherits(ReactVisType,_BaseVisType);function ReactVisType(opts){_classCallCheck(this,ReactVisType);var _this2=_possibleConstructorReturn(this,(ReactVisType.__proto__||Object.getPrototypeOf(ReactVisType)).call(this,_extends({},opts,{visualization:ReactVisController})));if(!_this2.visConfig.component)throw new Error("Missing component for ReactVisType");return _this2}return ReactVisType}(_base_vis_type.BaseVisType)},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"3c9862715546cd524edf3b9fa7516994.svg"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TimelionRequestHandlerProvider=void 0;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _dashboard_context=__webpack_require__(889);var _timezone=__webpack_require__(882);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var TimelionRequestHandlerProvider=function TimelionRequestHandlerProvider(Private,Notifier,$http){var timezone=Private(_timezone.timezoneProvider)();var dashboardContext=Private(_dashboard_context.dashboardContextProvider);var notify=new Notifier({location:"Timelion"});return{name:"timelion",handler:function handler(vis,_ref){var timeRange=_ref.timeRange;return new Promise(function(resolve,reject){var expression=vis.params.expression;if(!expression)return;var httpResult=$http.post("../api/timelion/run",{sheet:[expression],extended:{es:{filter:dashboardContext()}},time:_lodash2.default.extend(timeRange,{interval:vis.params.interval,timezone:timezone})}).then(function(resp){return resp.data}).catch(function(resp){throw resp.data});httpResult.then(function(resp){resolve(resp)}).catch(function(resp){var err=new Error(resp.message);err.stack=resp.stack;notify.error(err);reject(err)})})}}};exports.TimelionRequestHandlerProvider=TimelionRequestHandlerProvider},function(module,exports,__webpack_require__){"use strict";__webpack_require__(883);__webpack_require__(1465);__webpack_require__(476);var _modules=__webpack_require__(2);_modules.uiModules.get("kibana/timelion_vis",["kibana"]).controller("TimelionVisController",function($scope){$scope.$on("timelionChartRendered",function(event){event.stopPropagation();$scope.renderComplete()})})},function(module,exports){},function(module,exports){module.exports='<div ng-controller="TimelionVisController" class="timelion-vis">\n    <div chart="esResponse.sheet[0]" interval="visState.params.interval"></div>\n</div>\n'},function(module,exports){module.exports='<div class="kuiSideBarSection">\n  <div class="form-group">\n    <label for="timelionInterval">Interval</label>\n    <div class="form-group">\n      <timelion-interval model="editorState.params.interval"></timelion-interval>\n    </div>\n  </div>\n\n  <div class="form-group">\n    <div>\n      <label>Timelion Expression</label>\n    </div>\n\n    <timelion-expression-input\n      sheet="editorState.params.expression"\n      rows="9"\n    ></timelion-expression-input>\n  </div>\n\n</div>\n'},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});__webpack_require__(4439);var _vis_category=__webpack_require__(71);var _vis_factory=__webpack_require__(85);var _vis_types=__webpack_require__(95);var _vis_controller=__webpack_require__(4440);var _controls_tab=__webpack_require__(4469);var _options_tab=__webpack_require__(4474);var _default_feedback_message=__webpack_require__(905);var _iconInputControl=__webpack_require__(4475);var _iconInputControl2=_interopRequireDefault(_iconInputControl);var _update_status=__webpack_require__(432);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function InputControlVisProvider(Private){var VisFactory=Private(_vis_factory.VisFactoryProvider);return VisFactory.createBaseVisualization({name:"input_control_vis",title:"Controls",image:_iconInputControl2.default,description:"Create interactive controls for easy dashboard manipulation.",category:_vis_category.CATEGORY.OTHER,stage:"lab",requiresUpdateStatus:[_update_status.Status.PARAMS,_update_status.Status.TIME],feedbackMessage:_default_feedback_message.defaultFeedbackMessage,visualization:_vis_controller.VisController,visConfig:{defaults:{controls:[],updateFiltersOnChange:false,useTimeFilter:false,pinFilters:false}},editor:"default",editorConfig:{optionTabs:[{name:"controls",title:"Controls",editor:_controls_tab.ControlsTab},{name:"options",title:"Options",editor:_options_tab.OptionsTab}]},requestHandler:"none",responseHandler:"none"})}_vis_types.VisTypesRegistryProvider.register(InputControlVisProvider);exports.default=InputControlVisProvider;module.exports=exports["default"]},function(module,exports){},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VisController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _reactDom=__webpack_require__(15);var _input_control_vis=__webpack_require__(4441);var _control_factory=__webpack_require__(4462);var _lineage=__webpack_require__(1524);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var VisController=function(){function VisController(el,vis){var _this=this;_classCallCheck(this,VisController);this.drawVis=function(){(0,_reactDom.render)(_react2.default.createElement(_input_control_vis.InputControlVis,{updateFiltersOnChange:_this.vis.params.updateFiltersOnChange,controls:_this.controls,stageFilter:_this.stageFilter,submitFilters:_this.submitFilters,resetControls:_this.updateControlsFromKbn,clearControls:_this.clearControls,hasChanges:_this.hasChanges,hasValues:_this.hasValues,refreshControl:_this.refreshControl}),_this.el)};this.stageFilter=(_ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(controlIndex,newValue){return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_this.controls[controlIndex].set(newValue);if(!_this.vis.params.updateFiltersOnChange){_context.next=5;break}_this.submitFilters();_context.next=8;break;case 5:_context.next=7;return _this.updateNestedControls();case 7:_this.drawVis();case 8:case"end":return _context.stop()}},_callee,_this)})),function(_x,_x2){return _ref.apply(this,arguments)});var _ref;this.submitFilters=function(){_this.controls.map((_ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(control){return regeneratorRuntime.wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:control.hasAncestors()&&control.hasUnsetAncestor()&&control.filterManager.findFilters().forEach(function(existingFilter){_this.vis.API.queryFilter.removeFilter(existingFilter)});case 1:case"end":return _context2.stop()}},_callee2,_this)})),function(_x3){return _ref2.apply(this,arguments)}));var _ref2;var stagedControls=_this.controls.filter(function(control){return control.hasChanged()});var newFilters=stagedControls.filter(function(control){return control.hasKbnFilter()}).map(function(control){return control.getKbnFilter()});stagedControls.forEach(function(control){control.filterManager.findFilters().forEach(function(existingFilter){_this.vis.API.queryFilter.removeFilter(existingFilter)})});_this.vis.API.queryFilter.addFilters(newFilters,_this.vis.params.pinFilters)};this.clearControls=function(){_this.controls.forEach(function(control){control.clear()});_this.drawVis()};this.updateControlsFromKbn=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){return regeneratorRuntime.wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_this.controls.forEach(function(control){control.reset()});_context3.next=3;return _this.updateNestedControls();case 3:_this.drawVis();case 4:case"end":return _context3.stop()}},_callee3,_this)}));this.hasChanges=function(){return _this.controls.map(function(control){return control.hasChanged()}).reduce(function(a,b){return a||b})};this.hasValues=function(){return _this.controls.map(function(control){return control.hasValue()}).reduce(function(a,b){return a||b})};this.refreshControl=(_ref4=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(controlIndex,query){return regeneratorRuntime.wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.next=2;return _this.controls[controlIndex].fetch(query);case 2:_this.drawVis();case 3:case"end":return _context4.stop()}},_callee4,_this)})),function(_x4,_x5){return _ref4.apply(this,arguments)});var _ref4;this.el=el;this.vis=vis;this.controls=[];this.queryBarUpdateHandler=this.updateControlsFromKbn.bind(this);this.vis.API.queryFilter.on("update",this.queryBarUpdateHandler)}_createClass(VisController,[{key:"render",value:function(){var _ref5=_asyncToGenerator(regeneratorRuntime.mark(function _callee5(visData,status){return regeneratorRuntime.wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:if(!(status.params||this.vis.params.useTimeFilter&&status.time)){_context5.next=7;break}this.controls=[];_context5.next=4;return this.initControls();case 4:this.controls=_context5.sent;this.drawVis();return _context5.abrupt("return");case 7:return _context5.abrupt("return");case 8:case"end":return _context5.stop()}},_callee5,this)}));function render(_x6,_x7){return _ref5.apply(this,arguments)}return render}()},{key:"destroy",value:function destroy(){this.vis.API.queryFilter.off("update",this.queryBarUpdateHandler);(0,_reactDom.unmountComponentAtNode)(this.el)}},{key:"initControls",value:function(){var _ref6=_asyncToGenerator(regeneratorRuntime.mark(function _callee6(){var _this2=this;var controlParamsList,controlFactoryPromises,controls,getControl,controlInitPromises;return regeneratorRuntime.wrap(function _callee6$(_context6){while(1)switch(_context6.prev=_context6.next){case 0:controlParamsList=this.vis.params.controls.filter(function(controlParams){return controlParams.indexPattern&&controlParams.fieldName});controlFactoryPromises=controlParamsList.map(function(controlParams){var factory=(0,_control_factory.controlFactory)(controlParams);return factory(controlParams,_this2.vis.API,_this2.vis.params.useTimeFilter)});_context6.next=4;return Promise.all(controlFactoryPromises);case 4:controls=_context6.sent;getControl=function getControl(id){return controls.find(function(control){return id===control.id})};controlInitPromises=[];(0,_lineage.getLineageMap)(controlParamsList).forEach(function(lineage,controlId){lineage.shift();var ancestors=[];lineage.forEach(function(ancestorId){ancestors.push(getControl(ancestorId))});var control=getControl(controlId);control.setAncestors(ancestors);controlInitPromises.push(control.fetch())});_context6.next=10;return Promise.all(controlInitPromises);case 10:return _context6.abrupt("return",controls);case 11:case"end":return _context6.stop()}},_callee6,this)}));function initControls(){return _ref6.apply(this,arguments)}return initControls}()},{key:"updateNestedControls",value:function(){var _ref7=_asyncToGenerator(regeneratorRuntime.mark(function _callee8(){var _this3=this;var fetchPromises;return regeneratorRuntime.wrap(function _callee8$(_context8){while(1)switch(_context8.prev=_context8.next){case 0:fetchPromises=this.controls.map(function(){var _ref8=_asyncToGenerator(regeneratorRuntime.mark(function _callee7(control){return regeneratorRuntime.wrap(function _callee7$(_context7){while(1)switch(_context7.prev=_context7.next){case 0:if(!control.hasAncestors()){_context7.next=3;break}_context7.next=3;return control.fetch();case 3:case"end":return _context7.stop()}},_callee7,_this3)}));return function(_x8){return _ref8.apply(this,arguments)}}());_context8.next=3;return Promise.all(fetchPromises);case 3:return _context8.abrupt("return",_context8.sent);case 4:case"end":return _context8.stop()}},_callee8,this)}));function updateNestedControls(){return _ref7.apply(this,arguments)}return updateNestedControls}()}]);return VisController}();exports.VisController=VisController},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.InputControlVis=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _range_control=__webpack_require__(4442);var _list_control=__webpack_require__(4461);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var InputControlVis=exports.InputControlVis=function(_Component){_inherits(InputControlVis,_Component);function InputControlVis(props){_classCallCheck(this,InputControlVis);var _this=_possibleConstructorReturn(this,(InputControlVis.__proto__||Object.getPrototypeOf(InputControlVis)).call(this,props));_this.handleSubmit=_this.handleSubmit.bind(_this);_this.handleReset=_this.handleReset.bind(_this);_this.handleClearAll=_this.handleClearAll.bind(_this);return _this}_createClass(InputControlVis,[{key:"handleSubmit",value:function handleSubmit(){this.props.submitFilters()}},{key:"handleReset",value:function handleReset(){this.props.resetControls()}},{key:"handleClearAll",value:function handleClearAll(){this.props.clearControls()}},{key:"renderControls",value:function renderControls(){var _this2=this;return this.props.controls.map(function(control,index){var controlComponent=null;switch(control.type){case"list":controlComponent=_react2.default.createElement(_list_control.ListControl,{id:control.id,label:control.label,options:control.selectOptions,selectedOptions:control.value,disableMsg:control.isEnabled()?null:control.disabledReason,multiselect:control.options.multiselect,dynamicOptions:control.options.dynamicOptions,controlIndex:index,stageFilter:_this2.props.stageFilter,fetchOptions:function fetchOptions(query){_this2.props.refreshControl(index,query)}});break;case"range":controlComponent=_react2.default.createElement(_range_control.RangeControl,{control:control,controlIndex:index,stageFilter:_this2.props.stageFilter});break;default:throw new Error("Unhandled control type "+control.type)}return _react2.default.createElement(_eui.EuiFlexItem,{key:control.id,style:{minWidth:"250px"},"data-test-subj":"inputControlItem"},controlComponent)})}},{key:"renderStagingButtons",value:function renderStagingButtons(){return _react2.default.createElement(_eui.EuiFlexGroup,null,_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormRow,null,_react2.default.createElement(_eui.EuiButton,{onClick:this.handleClearAll,disabled:!this.props.hasValues(),"data-test-subj":"inputControlClearBtn"},"Clear form"))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormRow,null,_react2.default.createElement(_eui.EuiButton,{onClick:this.handleReset,disabled:!this.props.hasChanges(),"data-test-subj":"inputControlCancelBtn"},"Cancel changes"))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormRow,null,_react2.default.createElement(_eui.EuiButton,{fill:true,onClick:this.handleSubmit,disabled:!this.props.hasChanges(),"data-test-subj":"inputControlSubmitBtn"},"Apply changes"))))}},{key:"render",value:function render(){var stagingButtons=void 0;this.props.controls.length>0&&!this.props.updateFiltersOnChange&&(stagingButtons=this.renderStagingButtons());return _react2.default.createElement("div",{className:"inputControlVis"},_react2.default.createElement(_eui.EuiFlexGroup,{wrap:true},this.renderControls()),stagingButtons)}}]);return InputControlVis}(_react.Component);InputControlVis.propTypes={stageFilter:_propTypes2.default.func.isRequired,submitFilters:_propTypes2.default.func.isRequired,resetControls:_propTypes2.default.func.isRequired,clearControls:_propTypes2.default.func.isRequired,controls:_propTypes2.default.array.isRequired,updateFiltersOnChange:_propTypes2.default.bool,hasChanges:_propTypes2.default.func.isRequired,hasValues:_propTypes2.default.func.isRequired,refreshControl:_propTypes2.default.func.isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RangeControl=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _reactInputRange=__webpack_require__(4443);var _reactInputRange2=_interopRequireDefault(_reactInputRange);var _form_row=__webpack_require__(1520);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var toState=function toState(_ref){var control=_ref.control;var sliderValue=control.hasValue()?control.value:{min:control.min,max:control.min};var state={sliderValue:sliderValue,minValue:control.hasValue()?control.value.min:"",maxValue:control.hasValue()?control.value.max:"",isRangeValid:true,errorMessage:""};return state};var RangeControl=exports.RangeControl=function(_Component){_inherits(RangeControl,_Component);function RangeControl(props){_classCallCheck(this,RangeControl);var _this=_possibleConstructorReturn(this,(RangeControl.__proto__||Object.getPrototypeOf(RangeControl)).call(this,props));_this.componentWillReceiveProps=function(nextProps){_this.setState(toState(nextProps))};_this.handleOnChange=function(value){_this.setState({sliderValue:value,minValue:value.min,isRangeValid:true,maxValue:value.max,errorMessage:""})};_this.handleOnChangeComplete=function(value){_this.props.stageFilter(_this.props.controlIndex,value)};_this.handleMinChange=function(evt){_this.handleChange(parseFloat(evt.target.value),_this.state.maxValue)};_this.handleMaxChange=function(evt){_this.handleChange(_this.state.minValue,parseFloat(evt.target.value))};_this.handleChange=function(min,max){min=isNaN(min)?"":min;max=isNaN(max)?"":max;var isMinValid=""!==min;var isMaxValid=""!==max;var isRangeValid=true;var errorMessage="";if(!isMinValid&&isMaxValid||isMinValid&&!isMaxValid){isRangeValid=false;errorMessage="both min and max must be set"}if(isMinValid&&isMaxValid&&max<min){isRangeValid=false;errorMessage="max must be greater or equal to min"}_this.setState({minValue:min,maxValue:max,isRangeValid:isRangeValid,errorMessage:errorMessage});isRangeValid&&isMaxValid&&isMinValid&&_this.handleOnChangeComplete({min:min,max:max})};_this.formatLabel=function(value){var formatedValue=value;var decimalPlaces=_lodash2.default.get(_this.props,"control.options.decimalPlaces");null!==decimalPlaces&&decimalPlaces>=0&&(formatedValue=value.toFixed(decimalPlaces));return formatedValue};_this.state=toState(props);return _this}_createClass(RangeControl,[{key:"renderControl",value:function renderControl(){if(!this.props.control.isEnabled())return _react2.default.createElement(_eui.EuiRange,{disabled:true});return _react2.default.createElement(_eui.EuiFormRow,{isInvalid:!this.state.isRangeValid,error:this.state.errorMessage?[this.state.errorMessage]:[],"data-test-subj":"rangeControlFormRow"},_react2.default.createElement(_eui.EuiFlexGroup,null,_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement("input",{id:this.props.control.id+"_min",name:"min",type:"number","data-test-subj":"rangeControlMinInputValue",className:"euiFieldNumber",value:this.state.minValue,min:this.props.control.min,max:this.props.control.max,onChange:this.handleMinChange})),_react2.default.createElement(_eui.EuiFlexItem,{className:"inputRangeContainer"},_react2.default.createElement(_reactInputRange2.default,{maxValue:this.props.control.max,minValue:this.props.control.min,step:this.props.control.options.step,value:this.state.sliderValue,onChange:this.handleOnChange,onChangeComplete:this.handleOnChangeComplete,draggableTrack:true,ariaLabelledby:this.props.control.id,formatLabel:this.formatLabel})),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement("input",{id:this.props.control.id+"_max",name:"max",type:"number",className:"euiFieldNumber","data-test-subj":"rangeControlMaxInputValue",value:this.state.maxValue,min:this.props.control.min,max:this.props.control.max,onChange:this.handleMaxChange}))))}},{key:"render",value:function render(){return _react2.default.createElement(_form_row.FormRow,{id:this.props.control.id,label:this.props.control.label,controlIndex:this.props.controlIndex,disableMsg:this.props.control.isEnabled()?null:this.props.control.disabledReason},this.renderControl())}}]);return RangeControl}(_react.Component);RangeControl.propTypes={control:_propTypes2.default.object.isRequired,controlIndex:_propTypes2.default.number.isRequired,stageFilter:_propTypes2.default.func.isRequired}},,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ListControl=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _form_row=__webpack_require__(1520);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true}):obj[key]=value;return obj}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var ListControl=exports.ListControl=function(_Component){_inherits(ListControl,_Component);function ListControl(){var _ref,_this2=this;var _temp,_this,_ret;_classCallCheck(this,ListControl);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=ListControl.__proto__||Object.getPrototypeOf(ListControl)).call.apply(_ref,[this].concat(args))),_this),_this.state={isLoading:false},_this.componentDidMount=function(){_this._isMounted=true},_this.componentWillUnmount=function(){_this._isMounted=false},_this.handleOnChange=function(selectedOptions){_this.props.stageFilter(_this.props.controlIndex,selectedOptions)},_this.debouncedFetch=_lodash2.default.debounce((_ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee(searchValue){return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return _this.props.fetchOptions(searchValue);case 2:_this._isMounted&&_this.setState({isLoading:false});case 3:case"end":return _context.stop()}},_callee,_this2)})),function(_x){return _ref2.apply(this,arguments)}),300),_this.onSearchChange=function(searchValue){_this.setState({isLoading:true},_this.debouncedFetch.bind(null,searchValue))},_temp),_possibleConstructorReturn(_this,_ret);var _ref2}_createClass(ListControl,[{key:"renderControl",value:function renderControl(){if(this.props.disableMsg)return _react2.default.createElement(_eui.EuiFieldText,{placeholder:"Select...",disabled:true});var options=this.props.options.map(function(option){return _defineProperty({label:option.label,value:option.value},"data-test-subj","option_"+option.value.replace(" ","_"))});return _react2.default.createElement(_eui.EuiComboBox,{placeholder:"Select...",options:options,isLoading:this.state.isLoading,async:this.props.dynamicOptions,onSearchChange:this.props.dynamicOptions?this.onSearchChange:void 0,selectedOptions:this.props.selectedOptions,onChange:this.handleOnChange,singleSelection:!this.props.multiselect,"data-test-subj":"listControlSelect"+this.props.controlIndex})}},{key:"render",value:function render(){return _react2.default.createElement(_form_row.FormRow,{id:this.props.id,label:this.props.label,controlIndex:this.props.controlIndex,disableMsg:this.props.disableMsg},this.renderControl())}}]);return ListControl}(_react.Component);var comboBoxOptionShape=_propTypes2.default.shape({label:_propTypes2.default.string.isRequired,value:_propTypes2.default.string.isRequired});ListControl.propTypes={id:_propTypes2.default.string.isRequired,label:_propTypes2.default.string.isRequired,selectedOptions:_propTypes2.default.arrayOf(comboBoxOptionShape).isRequired,options:_propTypes2.default.arrayOf(comboBoxOptionShape),disableMsg:_propTypes2.default.string,multiselect:_propTypes2.default.bool,dynamicOptions:_propTypes2.default.bool,controlIndex:_propTypes2.default.number.isRequired,stageFilter:_propTypes2.default.func.isRequired,fetchOptions:_propTypes2.default.func};ListControl.defaultProps={dynamicOptions:false,multiselect:true};ListControl.defaultProps={selectedOptions:[],options:[]}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.controlFactory=controlFactory;var _range_control_factory=__webpack_require__(4463);var _list_control_factory=__webpack_require__(4465);function controlFactory(controlParams){var factory=null;switch(controlParams.type){case"range":factory=_range_control_factory.rangeControlFactory;break;case"list":factory=_list_control_factory.listControlFactory;break;default:throw new Error("Unhandled control type "+controlParams.type)}return factory}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.rangeControlFactory=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();exports.rangeControlFactory=(_ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(controlParams,kbnApi,useTimeFilter){var indexPattern;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:indexPattern=void 0;_context2.prev=1;_context2.next=4;return kbnApi.indexPatterns.get(controlParams.indexPattern);case 4:indexPattern=_context2.sent;_context2.next=9;break;case 7:_context2.prev=7;_context2.t0=_context2["catch"](1);case 9:return _context2.abrupt("return",new RangeControl(controlParams,new _range_filter_manager.RangeFilterManager(controlParams.id,controlParams.fieldName,indexPattern,kbnApi.queryFilter),kbnApi,useTimeFilter));case 10:case"end":return _context2.stop()}},_callee2,this,[[1,7]])})),function rangeControlFactory(_x,_x2,_x3){return _ref2.apply(this,arguments)});var _ref2;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _control=__webpack_require__(1521);var _range_filter_manager=__webpack_require__(4464);var _create_search_source=__webpack_require__(1523);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var minMaxAgg=function minMaxAgg(field){var aggBody={};field.scripted?aggBody.script={inline:field.script,lang:field.lang}:aggBody.field=field.name;return{maxAgg:{max:aggBody},minAgg:{min:aggBody}}};var RangeControl=function(_Control){_inherits(RangeControl,_Control);function RangeControl(){_classCallCheck(this,RangeControl);return _possibleConstructorReturn(this,(RangeControl.__proto__||Object.getPrototypeOf(RangeControl)).apply(this,arguments))}_createClass(RangeControl,[{key:"fetch",value:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var indexPattern,fieldName,aggs,searchSource,resp,min,max;return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:indexPattern=this.filterManager.getIndexPattern();if(indexPattern){_context.next=4;break}this.disable((0,_control.noIndexPatternMsg)(this.controlParams.indexPattern));return _context.abrupt("return");case 4:fieldName=this.filterManager.fieldName;aggs=minMaxAgg(indexPattern.fields.byName[fieldName]);searchSource=(0,_create_search_source.createSearchSource)(this.kbnApi,null,indexPattern,aggs,this.useTimeFilter);resp=void 0;_context.prev=8;_context.next=11;return searchSource.fetch();case 11:resp=_context.sent;_context.next=18;break;case 14:_context.prev=14;_context.t0=_context["catch"](8);this.disable("Unable to fetch range min and max, error: "+_context.t0.message);return _context.abrupt("return");case 18:min=_lodash2.default.get(resp,"aggregations.minAgg.value",null);max=_lodash2.default.get(resp,"aggregations.maxAgg.value",null);if(!(null===min||null===max)){_context.next=23;break}this.disable((0,_control.noValuesDisableMsg)(fieldName,indexPattern.title));return _context.abrupt("return");case 23:this.min=min;this.max=max;this.enable=true;case 26:case"end":return _context.stop()}},_callee,this,[[8,14]])}));function fetch(){return _ref.apply(this,arguments)}return fetch}()}]);return RangeControl}(_control.Control)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RangeFilterManager=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _filter_manager=__webpack_require__(1522);var _range=__webpack_require__(295);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function toRange(sliderValue){return{gte:sliderValue.min,lte:sliderValue.max}}function fromRange(range){var sliderValue={};_lodash2.default.has(range,"gte")&&(sliderValue.min=_lodash2.default.get(range,"gte"));_lodash2.default.has(range,"gt")&&(sliderValue.min=_lodash2.default.get(range,"gt"));_lodash2.default.has(range,"lte")&&(sliderValue.max=_lodash2.default.get(range,"lte"));_lodash2.default.has(range,"lt")&&(sliderValue.max=_lodash2.default.get(range,"lt"));return sliderValue}exports.RangeFilterManager=function(_FilterManager){_inherits(RangeFilterManager,_FilterManager);function RangeFilterManager(){_classCallCheck(this,RangeFilterManager);return _possibleConstructorReturn(this,(RangeFilterManager.__proto__||Object.getPrototypeOf(RangeFilterManager)).apply(this,arguments))}_createClass(RangeFilterManager,[{key:"createFilter",value:function createFilter(value){var newFilter=(0,_range.buildRangeFilter)(this.indexPattern.fields.byName[this.fieldName],toRange(value),this.indexPattern);newFilter.meta.controlledBy=this.controlId;return newFilter}},{key:"getValueFromFilterBar",value:function getValueFromFilterBar(){var kbnFilters=this.findFilters();if(0===kbnFilters.length)return;var range=void 0;range=_lodash2.default.has(kbnFilters[0],"script")?_lodash2.default.get(kbnFilters[0],"script.script.params"):_lodash2.default.get(kbnFilters[0],["range",this.fieldName]);if(!range)return;return fromRange(range)}}]);return RangeFilterManager}(_filter_manager.FilterManager)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.listControlFactory=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();exports.listControlFactory=(_ref4=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(controlParams,kbnApi,useTimeFilter){var indexPattern,field;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:indexPattern=void 0;_context2.prev=1;_context2.next=4;return kbnApi.indexPatterns.get(controlParams.indexPattern);case 4:indexPattern=_context2.sent;field=indexPattern.fields.find(function(field){return field.name===controlParams.fieldName});field&&"string"!==field.type&&(controlParams.options.dynamicOptions=false);_context2.next=11;break;case 9:_context2.prev=9;_context2.t0=_context2["catch"](1);case 11:return _context2.abrupt("return",new ListControl(controlParams,new _phrase_filter_manager.PhraseFilterManager(controlParams.id,controlParams.fieldName,indexPattern,kbnApi.queryFilter),kbnApi,useTimeFilter));case 12:case"end":return _context2.stop()}},_callee2,this,[[1,9]])})),function listControlFactory(_x3,_x4,_x5){return _ref4.apply(this,arguments)});var _ref4;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _control=__webpack_require__(1521);var _phrase_filter_manager=__webpack_require__(4466);var _create_search_source=__webpack_require__(1523);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function getEscapedQuery(){var query=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return query.replace(/[.?+*|{}[\]()"\\#@&<>~]/g,function(match){return"\\"+match})}var termsAgg=function termsAgg(_ref){var field=_ref.field,size=_ref.size,direction=_ref.direction,query=_ref.query;var terms={order:{_count:direction}};size&&(terms.size=size<1?1:size);if(field.scripted){terms.script={inline:field.script,lang:field.lang};terms.valueType="number"===field.type?"float":field.type}else terms.field=field.name;query&&(terms.include=".*"+getEscapedQuery(query)+".*");return{termsAgg:{terms:terms}}};var ListControl=function(_Control){_inherits(ListControl,_Control);function ListControl(){var _ref2,_this2=this;var _temp,_this,_ret;_classCallCheck(this,ListControl);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref2=ListControl.__proto__||Object.getPrototypeOf(ListControl)).call.apply(_ref2,[this].concat(args))),_this),_this.fetch=(_ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee(query){var indexPattern,ancestorFilters,ancestorValues,fieldName,initialSearchSourceState,aggs,searchSource,resp,selectOptions;return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:indexPattern=_this.filterManager.getIndexPattern();if(indexPattern){_context.next=4;break}_this.disable((0,_control.noIndexPatternMsg)(_this.controlParams.indexPattern));return _context.abrupt("return");case 4:ancestorFilters=void 0;if(!_this.hasAncestors()){_context.next=14;break}if(!_this.hasUnsetAncestor()){_context.next=9;break}_this.disable("Disabled until '"+_this.ancestors[0].label+"' is set.");return _context.abrupt("return");case 9:ancestorValues=_this.getAncestorValues();if(!_lodash2.default.isEqual(ancestorValues,_this.lastAncestorValues)){_context.next=12;break}return _context.abrupt("return");case 12:_this.lastAncestorValues=ancestorValues;ancestorFilters=_this.getAncestorFilters();case 14:fieldName=_this.filterManager.fieldName;initialSearchSourceState={timeout:"1s",terminate_after:1e5};aggs=termsAgg({field:indexPattern.fields.byName[fieldName],size:_this.options.dynamicOptions?null:_lodash2.default.get(_this.options,"size",5),direction:"desc",query:query});searchSource=(0,_create_search_source.createSearchSource)(_this.kbnApi,initialSearchSourceState,indexPattern,aggs,_this.useTimeFilter,ancestorFilters);_this.lastQuery=query;resp=void 0;_context.prev=20;_context.next=23;return searchSource.fetch();case 23:resp=_context.sent;_context.next=30;break;case 26:_context.prev=26;_context.t0=_context["catch"](20);_this.disable("Unable to fetch terms, error: "+_context.t0.message);return _context.abrupt("return");case 30:if(!(query&&_this.lastQuery!==query)){_context.next=32;break}return _context.abrupt("return");case 32:selectOptions=_lodash2.default.get(resp,"aggregations.termsAgg.buckets",[]).map(function(bucket){return{label:_this.format(bucket.key),value:bucket.key.toString()}}).sort(function(a,b){return a.label.toLowerCase().localeCompare(b.label.toLowerCase())});if(!(0===selectOptions.length&&!query)){_context.next=36;break}_this.disable((0,_control.noValuesDisableMsg)(fieldName,indexPattern.title));return _context.abrupt("return");case 36:_this.selectOptions=selectOptions;_this.enable=true;_this.disabledReason="";case 39:case"end":return _context.stop()}},_callee,_this2,[[20,26]])})),function(_x2){return _ref3.apply(this,arguments)}),_temp),_possibleConstructorReturn(_this,_ret);var _ref3}_createClass(ListControl,[{key:"hasValue",value:function hasValue(){return"undefined"!==typeof this.value&&this.value.length>0}}]);return ListControl}(_control.Control)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PhraseFilterManager=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _filter_manager=__webpack_require__(1522);var _phrase=__webpack_require__(363);var _phrases=__webpack_require__(605);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.PhraseFilterManager=function(_FilterManager){_inherits(PhraseFilterManager,_FilterManager);function PhraseFilterManager(controlId,fieldName,indexPattern,queryFilter){_classCallCheck(this,PhraseFilterManager);return _possibleConstructorReturn(this,(PhraseFilterManager.__proto__||Object.getPrototypeOf(PhraseFilterManager)).call(this,controlId,fieldName,indexPattern,queryFilter))}_createClass(PhraseFilterManager,[{key:"createFilter",value:function createFilter(selectedOptions){var phrases=selectedOptions.map(function(phrase){return phrase.value});var newFilter=void 0;newFilter=1===phrases.length?(0,_phrase.buildPhraseFilter)(this.indexPattern.fields.byName[this.fieldName],phrases[0],this.indexPattern):(0,_phrases.buildPhrasesFilter)(this.indexPattern.fields.byName[this.fieldName],phrases,this.indexPattern);newFilter.meta.controlledBy=this.controlId;return newFilter}},{key:"getValueFromFilterBar",value:function getValueFromFilterBar(){var _this2=this;var kbnFilters=this.findFilters();if(0===kbnFilters.length)return;var values=kbnFilters.map(function(kbnFilter){return _this2._getValueFromFilter(kbnFilter)}).filter(function(value){return null!=value});if(0===values.length)return;return values.reduce(function(accumulator,currentValue){return accumulator.concat(currentValue)},[]).map(function(value){return{value:value,label:value}})}},{key:"_getValueFromFilter",value:function _getValueFromFilter(kbnFilter){var _this3=this;if(_lodash2.default.has(kbnFilter,"query.bool.should"))return _lodash2.default.get(kbnFilter,"query.bool.should").map(function(kbnFilter){return _this3._getValueFromFilter(kbnFilter)}).filter(function(value){if(value)return true;return false});if(_lodash2.default.has(kbnFilter,"script"))return _lodash2.default.get(kbnFilter,"script.script.params.value");if(_lodash2.default.has(kbnFilter,["query","match",this.fieldName]))return _lodash2.default.get(kbnFilter,["query","match",this.fieldName,"query"]);if(_lodash2.default.has(kbnFilter,["match_phrase",this.fieldName]))return _lodash2.default.get(kbnFilter,["match_phrase",this.fieldName])}}]);return PhraseFilterManager}(_filter_manager.FilterManager)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getLineageMap=getLineageMap;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getLineageMap(controlParamsList){function getControlParamsById(controlId){return controlParamsList.find(function(controlParams){return controlParams.id===controlId})}var lineageMap=new Map;controlParamsList.forEach(function(rootControlParams){var lineage=[rootControlParams.id];var getLineage=function getLineage(controlParams){if(_lodash2.default.has(controlParams,"parent")&&""!==controlParams.parent&&!lineage.includes(controlParams.parent)){lineage.push(controlParams.parent);var parent=getControlParamsById(controlParams.parent);getLineage(parent)}};getLineage(rootControlParams);lineageMap.set(rootControlParams.id,lineage)});return lineageMap}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getParentCandidates=getParentCandidates;var _editor_utils=__webpack_require__(904);function getParentCandidates(controlParamsList,controlId,lineageMap){return controlParamsList.filter(function(controlParams){if(!controlParams.indexPattern||!controlParams.fieldName)return false;var lineage=lineageMap.get(controlParams.id);if(lineage.includes(controlId))return false;return true}).map(function(controlParams,controlIndex){return{value:controlParams.id,text:(0,_editor_utils.getTitle)(controlParams,controlIndex)}})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ControlsTab=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _control_editor=__webpack_require__(4470);var _editor_utils=__webpack_require__(904);var _lineage=__webpack_require__(1524);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var ControlsTab=exports.ControlsTab=function(_Component){_inherits(ControlsTab,_Component);function ControlsTab(){var _ref,_this2=this;var _temp,_this,_ret;_classCallCheck(this,ControlsTab);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=ControlsTab.__proto__||Object.getPrototypeOf(ControlsTab)).call.apply(_ref,[this].concat(args))),_this),_this.state={type:"list"},_this.getIndexPatterns=(_ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee(search){var resp;return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return _this.props.scope.vis.API.savedObjectsClient.find({type:"index-pattern",fields:["title"],search:search+"*",search_fields:["title"],perPage:100});case 2:resp=_context.sent;return _context.abrupt("return",resp.savedObjects);case 4:case"end":return _context.stop()}},_callee,_this2)})),function(_x){return _ref2.apply(this,arguments)}),_this.getIndexPattern=(_ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(indexPatternId){return regeneratorRuntime.wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _this.props.scope.vis.API.indexPatterns.get(indexPatternId);case 2:return _context2.abrupt("return",_context2.sent);case 3:case"end":return _context2.stop()}},_callee2,_this2)})),function(_x2){return _ref3.apply(this,arguments)}),_this.handleLabelChange=function(controlIndex,evt){var updatedControl=_this.props.editorState.params.controls[controlIndex];updatedControl.label=evt.target.value;_this.setVisParam("controls",(0,_editor_utils.setControl)(_this.props.editorState.params.controls,controlIndex,updatedControl))},_this.handleIndexPatternChange=function(controlIndex,indexPatternId){var updatedControl=_this.props.editorState.params.controls[controlIndex];updatedControl.indexPattern=indexPatternId;updatedControl.fieldName="";_this.setVisParam("controls",(0,_editor_utils.setControl)(_this.props.editorState.params.controls,controlIndex,updatedControl))},_this.handleFieldNameChange=function(controlIndex,fieldName){var updatedControl=_this.props.editorState.params.controls[controlIndex];updatedControl.fieldName=fieldName;_this.setVisParam("controls",(0,_editor_utils.setControl)(_this.props.editorState.params.controls,controlIndex,updatedControl))},_this.handleCheckboxOptionChange=function(controlIndex,optionName,evt){var updatedControl=_this.props.editorState.params.controls[controlIndex];updatedControl.options[optionName]=evt.target.checked;_this.setVisParam("controls",(0,_editor_utils.setControl)(_this.props.editorState.params.controls,controlIndex,updatedControl))},_this.handleNumberOptionChange=function(controlIndex,optionName,evt){var updatedControl=_this.props.editorState.params.controls[controlIndex];updatedControl.options[optionName]=parseFloat(evt.target.value);_this.setVisParam("controls",(0,_editor_utils.setControl)(_this.props.editorState.params.controls,controlIndex,updatedControl))},_this.handleRemoveControl=function(controlIndex){_this.setVisParam("controls",(0,_editor_utils.removeControl)(_this.props.editorState.params.controls,controlIndex))},_this.moveControl=function(controlIndex,direction){_this.setVisParam("controls",(0,_editor_utils.moveControl)(_this.props.editorState.params.controls,controlIndex,direction))},_this.handleAddControl=function(){_this.setVisParam("controls",(0,_editor_utils.addControl)(_this.props.editorState.params.controls,(0,_editor_utils.newControl)(_this.state.type)))},_this.handleParentChange=function(controlIndex,evt){var updatedControl=_this.props.editorState.params.controls[controlIndex];updatedControl.parent=evt.target.value;_this.setVisParam("controls",(0,_editor_utils.setControl)(_this.props.editorState.params.controls,controlIndex,updatedControl))},_temp),_possibleConstructorReturn(_this,_ret);var _ref3;var _ref2}_createClass(ControlsTab,[{key:"setVisParam",value:function setVisParam(paramName,paramValue){var params=_lodash2.default.cloneDeep(this.props.editorState.params);params[paramName]=paramValue;this.props.stageEditorParams(params)}},{key:"renderControls",value:function renderControls(){var _this3=this;var lineageMap=(0,_lineage.getLineageMap)(this.props.editorState.params.controls);return this.props.editorState.params.controls.map(function(controlParams,controlIndex){var parentCandidates=(0,_lineage.getParentCandidates)(_this3.props.editorState.params.controls,controlParams.id,lineageMap);return _react2.default.createElement(_control_editor.ControlEditor,{key:controlParams.id,controlIndex:controlIndex,controlParams:controlParams,handleLabelChange:_this3.handleLabelChange,moveControl:_this3.moveControl,handleRemoveControl:_this3.handleRemoveControl,handleIndexPatternChange:_this3.handleIndexPatternChange,handleFieldNameChange:_this3.handleFieldNameChange,getIndexPatterns:_this3.getIndexPatterns,getIndexPattern:_this3.getIndexPattern,handleCheckboxOptionChange:_this3.handleCheckboxOptionChange,handleNumberOptionChange:_this3.handleNumberOptionChange,parentCandidates:parentCandidates,handleParentChange:_this3.handleParentChange})})}},{key:"render",value:function render(){var _this4=this;return _react2.default.createElement("div",null,this.renderControls(),_react2.default.createElement(_eui.EuiPanel,{grow:false},_react2.default.createElement(_eui.EuiFlexGroup,null,_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:"selectControlType"},_react2.default.createElement(_eui.EuiSelect,{options:[{value:"range",text:"Range slider"},{value:"list",text:"Options list"}],value:this.state.type,onChange:function onChange(evt){return _this4.setState({type:evt.target.value})},"aria-label":"Select control type"}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormRow,{id:"addControl"},_react2.default.createElement(_eui.EuiButton,{fill:true,onClick:this.handleAddControl,iconType:"plusInCircle","data-test-subj":"inputControlEditorAddBtn","aria-label":"Add control"},"Add"))))))}}]);return ControlsTab}(_react.Component);ControlsTab.propTypes={scope:_propTypes2.default.object.isRequired,stageEditorParams:_propTypes2.default.func.isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ControlEditor=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();__webpack_require__(4471);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _range_control_editor=__webpack_require__(4472);var _list_control_editor=__webpack_require__(4473);var _editor_utils=__webpack_require__(904);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var ControlEditor=exports.ControlEditor=function(_Component){_inherits(ControlEditor,_Component);function ControlEditor(){var _ref;var _temp,_this,_ret;_classCallCheck(this,ControlEditor);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=ControlEditor.__proto__||Object.getPrototypeOf(ControlEditor)).call.apply(_ref,[this].concat(args))),_this),_this.changeLabel=function(evt){_this.props.handleLabelChange(_this.props.controlIndex,evt)},_this.removeControl=function(){_this.props.handleRemoveControl(_this.props.controlIndex)},_this.moveUpControl=function(){_this.props.moveControl(_this.props.controlIndex,-1)},_this.moveDownControl=function(){_this.props.moveControl(_this.props.controlIndex,1)},_this.changeIndexPattern=function(evt){_this.props.handleIndexPatternChange(_this.props.controlIndex,evt)},_this.changeFieldName=function(evt){_this.props.handleFieldNameChange(_this.props.controlIndex,evt)},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(ControlEditor,[{key:"renderEditor",value:function renderEditor(){var controlEditor=null;switch(this.props.controlParams.type){case"list":controlEditor=_react2.default.createElement(_list_control_editor.ListControlEditor,{controlIndex:this.props.controlIndex,controlParams:this.props.controlParams,handleIndexPatternChange:this.changeIndexPattern,handleFieldNameChange:this.changeFieldName,getIndexPatterns:this.props.getIndexPatterns,getIndexPattern:this.props.getIndexPattern,handleNumberOptionChange:this.props.handleNumberOptionChange,handleCheckboxOptionChange:this.props.handleCheckboxOptionChange,parentCandidates:this.props.parentCandidates,handleParentChange:this.props.handleParentChange});break;case"range":controlEditor=_react2.default.createElement(_range_control_editor.RangeControlEditor,{controlIndex:this.props.controlIndex,controlParams:this.props.controlParams,handleIndexPatternChange:this.changeIndexPattern,handleFieldNameChange:this.changeFieldName,getIndexPatterns:this.props.getIndexPatterns,getIndexPattern:this.props.getIndexPattern,handleNumberOptionChange:this.props.handleNumberOptionChange});break;default:throw new Error("Unhandled control editor type "+this.props.controlParams.type)}var labelId="controlLabel"+this.props.controlIndex;return _react2.default.createElement(_eui.EuiForm,null,_react2.default.createElement(_eui.EuiFormRow,{id:labelId,label:"Control Label"},_react2.default.createElement(_eui.EuiFieldText,{value:this.props.controlParams.label,onChange:this.changeLabel})),controlEditor)}},{key:"renderEditorButtons",value:function renderEditorButtons(){return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiButtonIcon,{"aria-label":"Move control up",color:"primary",onClick:this.moveUpControl,iconType:"sortUp","data-test-subj":"inputControlEditorMoveUpControl"+this.props.controlIndex}),_react2.default.createElement(_eui.EuiButtonIcon,{"aria-label":"Move control down",color:"primary",onClick:this.moveDownControl,iconType:"sortDown","data-test-subj":"inputControlEditorMoveDownControl"+this.props.controlIndex}),_react2.default.createElement(_eui.EuiButtonIcon,{"aria-label":"Remove control",color:"danger",onClick:this.removeControl,iconType:"cross","data-test-subj":"inputControlEditorRemoveControl"+this.props.controlIndex}))}},{key:"render",value:function render(){return _react2.default.createElement(_eui.EuiPanel,{grow:false,className:"controlEditorPanel"},_react2.default.createElement(_eui.EuiAccordion,{id:"controlEditorAccordion",buttonContent:(0,_editor_utils.getTitle)(this.props.controlParams,this.props.controlIndex),extraAction:this.renderEditorButtons(),initialIsOpen:true},_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),this.renderEditor()))}}]);return ControlEditor}(_react.Component);ControlEditor.propTypes={controlIndex:_propTypes2.default.number.isRequired,controlParams:_propTypes2.default.object.isRequired,handleLabelChange:_propTypes2.default.func.isRequired,moveControl:_propTypes2.default.func.isRequired,handleRemoveControl:_propTypes2.default.func.isRequired,handleIndexPatternChange:_propTypes2.default.func.isRequired,handleFieldNameChange:_propTypes2.default.func.isRequired,getIndexPatterns:_propTypes2.default.func.isRequired,getIndexPattern:_propTypes2.default.func.isRequired,handleCheckboxOptionChange:_propTypes2.default.func.isRequired,handleNumberOptionChange:_propTypes2.default.func.isRequired,parentCandidates:_propTypes2.default.arrayOf(_propTypes2.default.shape({value:_propTypes2.default.string.isRequired,text:_propTypes2.default.string.isRequired})).isRequired,handleParentChange:_propTypes2.default.func.isRequired}},function(module,exports){},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RangeControlEditor=RangeControlEditor;var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _index_pattern_select=__webpack_require__(1525);var _field_select=__webpack_require__(1526);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function filterField(field){return"number"===field.type}function RangeControlEditor(props){var stepSizeId="stepSize-"+props.controlIndex;var decimalPlacesId="decimalPlaces-"+props.controlIndex;var handleDecimalPlacesChange=function handleDecimalPlacesChange(evt){props.handleNumberOptionChange(props.controlIndex,"decimalPlaces",evt)};var handleStepChange=function handleStepChange(evt){props.handleNumberOptionChange(props.controlIndex,"step",evt)};return _react2.default.createElement("div",null,_react2.default.createElement(_index_pattern_select.IndexPatternSelect,{indexPatternId:props.controlParams.indexPattern,onChange:props.handleIndexPatternChange,getIndexPatterns:props.getIndexPatterns,getIndexPattern:props.getIndexPattern,controlIndex:props.controlIndex}),_react2.default.createElement(_field_select.FieldSelect,{fieldName:props.controlParams.fieldName,indexPatternId:props.controlParams.indexPattern,filterField:filterField,onChange:props.handleFieldNameChange,getIndexPattern:props.getIndexPattern,controlIndex:props.controlIndex}),_react2.default.createElement(_eui.EuiFormRow,{id:stepSizeId,label:"Step Size"},_react2.default.createElement(_eui.EuiFieldNumber,{value:props.controlParams.options.step,onChange:handleStepChange,"data-test-subj":"rangeControlSizeInput"+props.controlIndex})),_react2.default.createElement(_eui.EuiFormRow,{id:decimalPlacesId,label:"Decimal Places"},_react2.default.createElement(_eui.EuiFieldNumber,{min:0,value:props.controlParams.options.decimalPlaces,onChange:handleDecimalPlacesChange,"data-test-subj":"rangeControlDecimalPlacesInput"+props.controlIndex})))}RangeControlEditor.propTypes={getIndexPatterns:_propTypes2.default.func.isRequired,getIndexPattern:_propTypes2.default.func.isRequired,controlIndex:_propTypes2.default.number.isRequired,controlParams:_propTypes2.default.object.isRequired,handleFieldNameChange:_propTypes2.default.func.isRequired,handleIndexPatternChange:_propTypes2.default.func.isRequired,handleNumberOptionChange:_propTypes2.default.func.isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ListControlEditor=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _index_pattern_select=__webpack_require__(1525);var _field_select=__webpack_require__(1526);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function filterField(field){return field.aggregatable&&["number","boolean","date","ip","string"].includes(field.type)}var ListControlEditor=exports.ListControlEditor=function(_Component){_inherits(ListControlEditor,_Component);function ListControlEditor(){var _ref,_this2=this;var _temp,_this,_ret;_classCallCheck(this,ListControlEditor);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=ListControlEditor.__proto__||Object.getPrototypeOf(ListControlEditor)).call.apply(_ref,[this].concat(args))),_this),_this.state={isLoadingFieldType:true,isStringField:false,prevFieldName:_this.props.controlParams.fieldName},_this.componentDidUpdate=function(){_this.state.isLoadingFieldType&&_this.loadIsStringField()},_this.loadIsStringField=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var indexPattern,field;return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(!_this.props.controlParams.indexPattern||!_this.props.controlParams.fieldName)){_context.next=3;break}_this.setState({isLoadingFieldType:false});return _context.abrupt("return");case 3:indexPattern=void 0;_context.prev=4;_context.next=7;return _this.props.getIndexPattern(_this.props.controlParams.indexPattern);case 7:indexPattern=_context.sent;_context.next=13;break;case 10:_context.prev=10;_context.t0=_context["catch"](4);return _context.abrupt("return");case 13:if(_this._isMounted){_context.next=15;break}return _context.abrupt("return");case 15:field=indexPattern.fields.find(function(field){return field.name===_this.props.controlParams.fieldName});if(field){_context.next=18;break}return _context.abrupt("return");case 18:_this.setState({isLoadingFieldType:false,isStringField:"string"===field.type});case 19:case"end":return _context.stop()}},_callee,_this2,[[4,10]])})),_this.renderOptions=function(){if(_this.state.isLoadingFieldType||!_this.props.controlParams.fieldName)return;var options=[];if(_this.props.parentCandidates&&_this.props.parentCandidates.length>0){var parentCandidatesOptions=[{value:"",text:""}].concat(_toConsumableArray(_this.props.parentCandidates));options.push(_react2.default.createElement(_eui.EuiFormRow,{id:"parentSelect-"+_this.props.controlIndex,label:"Parent control",helpText:"Options are based on the value of parent control. Disabled if parent is not set.",key:"parentSelect"},_react2.default.createElement(_eui.EuiSelect,{options:parentCandidatesOptions,value:_this.props.controlParams.parent,onChange:function onChange(evt){_this.props.handleParentChange(_this.props.controlIndex,evt)}})))}options.push(_react2.default.createElement(_eui.EuiFormRow,{id:"multiselect-"+_this.props.controlIndex,key:"multiselect",helpText:"Allow multiple selection"},_react2.default.createElement(_eui.EuiSwitch,{label:"Multiselect",checked:_this.props.controlParams.options.multiselect,onChange:function onChange(evt){_this.props.handleCheckboxOptionChange(_this.props.controlIndex,"multiselect",evt)},"data-test-subj":"listControlMultiselectInput"})));var dynamicOptionsHelpText=_this.state.isStringField?"Update options in response to user input":'Only available for "string" fields';options.push(_react2.default.createElement(_eui.EuiFormRow,{id:"dynamicOptions-"+_this.props.controlIndex,key:"dynamicOptions",helpText:dynamicOptionsHelpText},_react2.default.createElement(_eui.EuiSwitch,{label:"Dynamic Options",checked:_this.props.controlParams.options.dynamicOptions,onChange:function onChange(evt){_this.props.handleCheckboxOptionChange(_this.props.controlIndex,"dynamicOptions",evt)},disabled:!_this.state.isStringField,"data-test-subj":"listControlDynamicOptionsSwitch"})));_this.props.controlParams.options.dynamicOptions&&_this.state.isStringField||options.push(_react2.default.createElement(_eui.EuiFormRow,{id:"size-"+_this.props.controlIndex,label:"Size",key:"size",helpText:"Number of options"},_react2.default.createElement(_eui.EuiFieldNumber,{min:1,value:_this.props.controlParams.options.size,onChange:function onChange(evt){_this.props.handleNumberOptionChange(_this.props.controlIndex,"size",evt)},"data-test-subj":"listControlSizeInput"})));return options},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(ListControlEditor,[{key:"componentDidMount",value:function componentDidMount(){this._isMounted=true;this.loadIsStringField()}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._isMounted=false}},{key:"render",value:function render(){return _react2.default.createElement("div",null,_react2.default.createElement(_index_pattern_select.IndexPatternSelect,{indexPatternId:this.props.controlParams.indexPattern,onChange:this.props.handleIndexPatternChange,getIndexPatterns:this.props.getIndexPatterns,getIndexPattern:this.props.getIndexPattern,controlIndex:this.props.controlIndex}),_react2.default.createElement(_field_select.FieldSelect,{fieldName:this.props.controlParams.fieldName,indexPatternId:this.props.controlParams.indexPattern,filterField:filterField,onChange:this.props.handleFieldNameChange,getIndexPattern:this.props.getIndexPattern,controlIndex:this.props.controlIndex}),this.renderOptions())}}]);return ListControlEditor}(_react.Component);ListControlEditor.getDerivedStateFromProps=function(nextProps,prevState){var isNewFieldName=prevState.prevFieldName!==nextProps.controlParams.fieldName;if(!prevState.isLoadingFieldType&&isNewFieldName)return{isLoadingFieldType:true};return null};ListControlEditor.propTypes={getIndexPatterns:_propTypes2.default.func.isRequired,getIndexPattern:_propTypes2.default.func.isRequired,controlIndex:_propTypes2.default.number.isRequired,controlParams:_propTypes2.default.object.isRequired,handleFieldNameChange:_propTypes2.default.func.isRequired,handleIndexPatternChange:_propTypes2.default.func.isRequired,handleCheckboxOptionChange:_propTypes2.default.func.isRequired,handleNumberOptionChange:_propTypes2.default.func.isRequired,parentCandidates:_propTypes2.default.arrayOf(_propTypes2.default.shape({value:_propTypes2.default.string.isRequired,text:_propTypes2.default.string.isRequired})).isRequired,handleParentChange:_propTypes2.default.func.isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.OptionsTab=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var OptionsTab=exports.OptionsTab=function(_Component){_inherits(OptionsTab,_Component);function OptionsTab(){var _ref;var _temp,_this,_ret;_classCallCheck(this,OptionsTab);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=OptionsTab.__proto__||Object.getPrototypeOf(OptionsTab)).call.apply(_ref,[this].concat(args))),_this),_this.setVisParam=function(paramName,paramValue){var params=_lodash2.default.cloneDeep(_this.props.editorState.params);params[paramName]=paramValue;_this.props.stageEditorParams(params)},_this.handleUpdateFiltersChange=function(evt){_this.setVisParam("updateFiltersOnChange",evt.target.checked)},_this.handleUseTimeFilter=function(evt){_this.setVisParam("useTimeFilter",evt.target.checked)},_this.handlePinFilters=function(evt){_this.setVisParam("pinFilters",evt.target.checked)},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(OptionsTab,[{key:"render",value:function render(){return _react2.default.createElement(_eui.EuiForm,null,_react2.default.createElement(_eui.EuiFormRow,{id:"updateFiltersOnChange"},_react2.default.createElement(_eui.EuiSwitch,{label:"Update Kibana filters on each change",checked:this.props.editorState.params.updateFiltersOnChange,onChange:this.handleUpdateFiltersChange,"data-test-subj":"inputControlEditorUpdateFiltersOnChangeCheckbox"})),_react2.default.createElement(_eui.EuiFormRow,{id:"useTimeFilter"},_react2.default.createElement(_eui.EuiSwitch,{label:"Use time filter",checked:this.props.editorState.params.useTimeFilter,onChange:this.handleUseTimeFilter,"data-test-subj":"inputControlEditorUseTimeFilterCheckbox"})),_react2.default.createElement(_eui.EuiFormRow,{id:"pinFilters"},_react2.default.createElement(_eui.EuiSwitch,{label:"Pin filters to global state",checked:this.props.editorState.params.pinFilters,onChange:this.handlePinFilters,"data-test-subj":"inputControlEditorPinFiltersCheckbox"})))}}]);return OptionsTab}(_react.Component);OptionsTab.propTypes={scope:_propTypes2.default.object.isRequired,stageEditorParams:_propTypes2.default.func.isRequired}},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"428687c29242d0d2f3d7ac7e09942921.svg"},function(module,exports,__webpack_require__){"use strict";var _vis_types=__webpack_require__(95);var _histogram=__webpack_require__(4477);var _histogram2=_interopRequireDefault(_histogram);var _line=__webpack_require__(4479);var _line2=_interopRequireDefault(_line);var _pie=__webpack_require__(4481);var _pie2=_interopRequireDefault(_pie);var _area=__webpack_require__(4484);var _area2=_interopRequireDefault(_area);var _heatmap=__webpack_require__(4486);var _heatmap2=_interopRequireDefault(_heatmap);var _horizontal_bar=__webpack_require__(4489);var _horizontal_bar2=_interopRequireDefault(_horizontal_bar);var _gauge=__webpack_require__(4491);var _gauge2=_interopRequireDefault(_gauge);var _goal=__webpack_require__(4493);var _goal2=_interopRequireDefault(_goal);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_vis_types.VisTypesRegistryProvider.register(_histogram2.default);_vis_types.VisTypesRegistryProvider.register(_line2.default);_vis_types.VisTypesRegistryProvider.register(_pie2.default);_vis_types.VisTypesRegistryProvider.register(_area2.default);_vis_types.VisTypesRegistryProvider.register(_heatmap2.default);_vis_types.VisTypesRegistryProvider.register(_horizontal_bar2.default);_vis_types.VisTypesRegistryProvider.register(_gauge2.default);_vis_types.VisTypesRegistryProvider.register(_goal2.default)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=PointSeriesVisType;var _vis_factory=__webpack_require__(85);var _schemas=__webpack_require__(96);var _vis_category=__webpack_require__(71);var _point_series=__webpack_require__(654);var _point_series2=_interopRequireDefault(_point_series);var _iconVertical=__webpack_require__(4478);var _iconVertical2=_interopRequireDefault(_iconVertical);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function PointSeriesVisType(Private){var VisFactory=Private(_vis_factory.VisFactoryProvider);return VisFactory.createVislibVisualization({name:"histogram",title:"Vertical Bar",image:_iconVertical2.default,description:"Assign a continuous variable to each axis",category:_vis_category.CATEGORY.BASIC,visConfig:{defaults:{type:"histogram",grid:{categoryLines:false,style:{color:"#eee"}},categoryAxes:[{id:"CategoryAxis-1",type:"category",position:"bottom",show:true,style:{},scale:{type:"linear"},labels:{show:true,truncate:100},title:{}}],valueAxes:[{id:"ValueAxis-1",name:"LeftAxis-1",type:"value",position:"left",show:true,style:{},scale:{type:"linear",mode:"normal"},labels:{show:true,rotate:0,filter:false,truncate:100},title:{text:"Count"}}],seriesParams:[{show:"true",type:"histogram",mode:"stacked",data:{label:"Count",id:"1"},valueAxis:"ValueAxis-1",drawLinesBetweenPoints:true,showCircles:true}],addTooltip:true,addLegend:true,legendPosition:"right",times:[],addTimeMarker:false}},editorConfig:{collections:{positions:["top","left","right","bottom"],chartTypes:[{value:"line",text:"line"},{value:"area",text:"area"},{value:"histogram",text:"bar"}],axisModes:["normal","percentage","wiggle","silhouette"],scaleTypes:["linear","log","square root"],chartModes:["normal","stacked"],interpolationModes:[{value:"linear",text:"straight"},{value:"cardinal",text:"smoothed"},{value:"step-after",text:"stepped"}]},optionTabs:[{name:"advanced",title:"Metrics & Axes",editor:"<div><vislib-series></vislib-series><vislib-value-axes></vislib-value-axes><vislib-category-axis></vislib-category-axis></div>"},{name:"options",title:"Panel Settings",editor:_point_series2.default}],schemas:new _schemas.Schemas([{group:"metrics",name:"metric",title:"Y-Axis",min:1,aggFilter:["!geo_centroid","!geo_bounds"],defaults:[{schema:"metric",type:"count"}]},{group:"metrics",name:"radius",title:"Dot Size",min:0,max:1,aggFilter:["count","avg","sum","min","max","cardinality"]},{group:"buckets",name:"segment",title:"X-Axis",min:0,max:1,aggFilter:["!geohash_grid","!filter"]},{group:"buckets",name:"group",title:"Split Series",min:0,max:3,aggFilter:["!geohash_grid","!filter"]},{group:"buckets",name:"split",title:"Split Chart",min:0,max:1,aggFilter:["!geohash_grid","!filter"]}])}})}module.exports=exports["default"]},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"4be5b8808b5216ee6b6a1a4a29493e32.svg"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=PointSeriesVisType;var _vis_factory=__webpack_require__(85);var _schemas=__webpack_require__(96);var _vis_category=__webpack_require__(71);var _point_series=__webpack_require__(654);var _point_series2=_interopRequireDefault(_point_series);var _iconLine=__webpack_require__(4480);var _iconLine2=_interopRequireDefault(_iconLine);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function PointSeriesVisType(Private){var VisFactory=Private(_vis_factory.VisFactoryProvider);return VisFactory.createVislibVisualization({name:"line",title:"Line",image:_iconLine2.default,description:"Emphasize trends",category:_vis_category.CATEGORY.BASIC,visConfig:{defaults:{type:"line",grid:{categoryLines:false,style:{color:"#eee"}},categoryAxes:[{id:"CategoryAxis-1",type:"category",position:"bottom",show:true,style:{},scale:{type:"linear"},labels:{show:true,truncate:100},title:{}}],valueAxes:[{id:"ValueAxis-1",name:"LeftAxis-1",type:"value",position:"left",show:true,style:{},scale:{type:"linear",mode:"normal"},labels:{show:true,rotate:0,filter:false,truncate:100},title:{text:"Count"}}],seriesParams:[{show:"true",type:"line",mode:"normal",data:{label:"Count",id:"1"},valueAxis:"ValueAxis-1",drawLinesBetweenPoints:true,showCircles:true}],addTooltip:true,addLegend:true,legendPosition:"right",times:[],addTimeMarker:false}},editorConfig:{collections:{positions:["top","left","right","bottom"],chartTypes:[{value:"line",text:"line"},{value:"area",text:"area"},{value:"histogram",text:"bar"}],axisModes:["normal","percentage","wiggle","silhouette"],scaleTypes:["linear","log","square root"],chartModes:["normal","stacked"],interpolationModes:[{value:"linear",text:"straight"},{value:"cardinal",text:"smoothed"},{value:"step-after",text:"stepped"}]},optionTabs:[{name:"advanced",title:"Metrics & Axes",editor:"<div><vislib-series></vislib-series><vislib-value-axes></vislib-value-axes><vislib-category-axis></vislib-category-axis></div>"},{name:"options",title:"Panel Settings",editor:_point_series2.default}],schemas:new _schemas.Schemas([{group:"metrics",name:"metric",title:"Y-Axis",min:1,aggFilter:["!geo_centroid","!geo_bounds"],defaults:[{schema:"metric",type:"count"}]},{group:"metrics",name:"radius",title:"Dot Size",min:0,max:1,aggFilter:["count","avg","sum","min","max","cardinality","top_hits"]},{group:"buckets",name:"segment",title:"X-Axis",min:0,max:1,aggFilter:["!geohash_grid","!filter"]},{group:"buckets",name:"group",title:"Split Series",min:0,max:3,aggFilter:["!geohash_grid","!filter"]},{group:"buckets",name:"split",title:"Split Chart",min:0,max:1,aggFilter:["!geohash_grid","!filter"]}])}})}module.exports=exports["default"]},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"3211ece03a463a51c356a406827c30c0.svg"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=HistogramVisType;var _vis_factory=__webpack_require__(85);var _schemas=__webpack_require__(96);var _vis_category=__webpack_require__(71);var _pie=__webpack_require__(4482);var _pie2=_interopRequireDefault(_pie);var _iconPie=__webpack_require__(4483);var _iconPie2=_interopRequireDefault(_iconPie);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function HistogramVisType(Private){var VisFactory=Private(_vis_factory.VisFactoryProvider);return VisFactory.createVislibVisualization({name:"pie",title:"Pie",image:_iconPie2.default,description:"Compare parts of a whole",category:_vis_category.CATEGORY.BASIC,visConfig:{defaults:{type:"pie",addTooltip:true,addLegend:true,legendPosition:"right",isDonut:true,labels:{show:false,values:true,last_level:true,truncate:100}}},editorConfig:{collections:{legendPositions:[{value:"left",text:"left"},{value:"right",text:"right"},{value:"top",text:"top"},{value:"bottom",text:"bottom"}]},optionsTemplate:_pie2.default,schemas:new _schemas.Schemas([{group:"metrics",name:"metric",title:"Slice Size",min:1,max:1,aggFilter:["sum","count","cardinality","top_hits"],defaults:[{schema:"metric",type:"count"}]},{group:"buckets",name:"segment",icon:"fa fa-scissors",title:"Split Slices",min:0,max:Infinity,aggFilter:["!geohash_grid","!filter"]},{group:"buckets",name:"split",icon:"fa fa-th",title:"Split Chart",mustBeFirst:true,min:0,max:1,aggFilter:["!geohash_grid","!filter"]}])},hierarchicalData:true})}module.exports=exports["default"]},function(module,exports){module.exports='<div class="kuiSideBarSection">\n  <div class="form-group">\n    <div class="kuiSideBarSectionTitle">\n      <div class="kuiSideBarSectionTitle__text">\n        Pie Settings\n      </div>\n    </div>\n\n    <div class="kuiSideBarFormRow">\n      <label class="kuiSideBarFormRow__label" for="isDonut">\n        Donut\n      </label>\n      <div class="kuiSideBarFormRow__control">\n        <input id="isDonut" name="isDonut" type="checkbox" value="{{isDonut}}"\n               ng-checked="editorState.params.isDonut"\n               ng-model="editorState.params.isDonut"\n        >\n      </div>\n    </div>\n  </div>\n\n  <vislib-basic-options></vislib-basic-options>\n</div>\n\n\x3c!-- Labels --\x3e\n<div class="kuiSideBarSection">\n  <div class="form-group">\n    <div class="kuiSideBarSectionTitle">\n      <div class="kuiSideBarSectionTitle__text">\n        Labels Settings\n      </div>\n    </div>\n\n    <div class="kuiSideBarFormRow">\n      <label class="kuiSideBarFormRow__label" for="showLabels">\n        Show Labels\n      </label>\n      <div class="kuiSideBarFormRow__control">\n        <input class="kuiCheckBox" id="showLabels" type="checkbox" ng-model="editorState.params.labels.show">\n      </div>\n    </div>\n\n    <div class="kuiSideBarFormRow">\n      <label class="kuiSideBarFormRow__label" for="showLastLevel">\n        Show Top Level Only\n      </label>\n      <div class="kuiSideBarFormRow__control">\n        <input class="kuiCheckBox" id="showLastLevel" type="checkbox" ng-model="editorState.params.labels.last_level">\n      </div>\n    </div>\n\n    <div class="kuiSideBarFormRow">\n      <label class="kuiSideBarFormRow__label" for="showValues">\n        Show Values\n      </label>\n      <div class="kuiSideBarFormRow__control">\n        <input class="kuiCheckBox" id="showValues" type="checkbox" ng-model="editorState.params.labels.values">\n      </div>\n    </div>\n\n    <div class="kuiSideBarFormRow">\n      <label class="kuiSideBarFormRow__label" for="truncateLabels">\n        Truncate\n      </label>\n      <div class="kuiSideBarFormRow__control">\n        <input\n          id="truncateLabels"\n          class="kuiInput kuiSideBarInput"\n          type="number"\n          ng-model="editorState.params.labels.truncate"\n        >\n      </div>\n    </div>\n  </div>\n</div>\n'},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"283abe380441c6725a8faf00adfd138c.svg"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=PointSeriesVisType;var _vis_factory=__webpack_require__(85);var _schemas=__webpack_require__(96);var _vis_category=__webpack_require__(71);var _point_series=__webpack_require__(654);var _point_series2=_interopRequireDefault(_point_series);var _iconArea=__webpack_require__(4485);var _iconArea2=_interopRequireDefault(_iconArea);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function PointSeriesVisType(Private){var VisFactory=Private(_vis_factory.VisFactoryProvider);return VisFactory.createVislibVisualization({name:"area",title:"Area",image:_iconArea2.default,description:"Emphasize the quantity beneath a line chart",category:_vis_category.CATEGORY.BASIC,visConfig:{defaults:{type:"area",grid:{categoryLines:false,style:{color:"#eee"}},categoryAxes:[{id:"CategoryAxis-1",type:"category",position:"bottom",show:true,style:{},scale:{type:"linear"},labels:{show:true,truncate:100},title:{}}],valueAxes:[{id:"ValueAxis-1",name:"LeftAxis-1",type:"value",position:"left",show:true,style:{},scale:{type:"linear",mode:"normal"},labels:{show:true,rotate:0,filter:false,truncate:100},title:{text:"Count"}}],seriesParams:[{show:"true",type:"area",mode:"stacked",data:{label:"Count",id:"1"},drawLinesBetweenPoints:true,showCircles:true,interpolate:"linear",valueAxis:"ValueAxis-1"}],addTooltip:true,addLegend:true,legendPosition:"right",times:[],addTimeMarker:false}},editorConfig:{collections:{positions:["top","left","right","bottom"],chartTypes:[{value:"line",text:"line"},{value:"area",text:"area"},{value:"histogram",text:"bar"}],axisModes:["normal","percentage","wiggle","silhouette"],scaleTypes:["linear","log","square root"],chartModes:["normal","stacked"],interpolationModes:[{value:"linear",text:"straight"},{value:"cardinal",text:"smoothed"},{value:"step-after",text:"stepped"}]},optionTabs:[{name:"advanced",title:"Metrics & Axes",editor:"<div><vislib-series></vislib-series><vislib-value-axes></vislib-value-axes><vislib-category-axis></vislib-category-axis></div>"},{name:"options",title:"Panel Settings",editor:_point_series2.default}],schemas:new _schemas.Schemas([{group:"metrics",name:"metric",title:"Y-Axis",aggFilter:["!geo_centroid","!geo_bounds"],min:1,defaults:[{schema:"metric",type:"count"}]},{group:"metrics",name:"radius",title:"Dot Size",min:0,max:1,aggFilter:["count","avg","sum","min","max","cardinality"]},{group:"buckets",name:"segment",title:"X-Axis",min:0,max:1,aggFilter:["!geohash_grid","!filter"]},{group:"buckets",name:"group",title:"Split Series",min:0,max:3,aggFilter:["!geohash_grid","!filter"]},{group:"buckets",name:"split",title:"Split Chart",min:0,max:1,aggFilter:["!geohash_grid","!filter"]}])}})}module.exports=exports["default"]},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"ccd9193f3b8af43575b17f6b00df04ae.svg"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=HeatmapVisType;var _vis_factory=__webpack_require__(85);var _schemas=__webpack_require__(96);var _vis_category=__webpack_require__(71);var _heatmap=__webpack_require__(4487);var _heatmap2=_interopRequireDefault(_heatmap);var _colormaps=__webpack_require__(430);var _iconHeatmap=__webpack_require__(4488);var _iconHeatmap2=_interopRequireDefault(_iconHeatmap);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function HeatmapVisType(Private){var VisFactory=Private(_vis_factory.VisFactoryProvider);return VisFactory.createVislibVisualization({name:"heatmap",title:"Heat Map",image:_iconHeatmap2.default,description:"Shade cells within a matrix",category:_vis_category.CATEGORY.BASIC,visConfig:{defaults:{type:"heatmap",addTooltip:true,addLegend:true,enableHover:false,legendPosition:"right",times:[],colorsNumber:4,colorSchema:"Greens",setColorRange:false,colorsRange:[],invertColors:false,percentageMode:false,valueAxes:[{show:false,id:"ValueAxis-1",type:"value",scale:{type:"linear",defaultYExtents:false},labels:{show:false,rotate:0,overwriteColor:false,color:"#555"}}]}},editorConfig:{collections:{legendPositions:[{value:"left",text:"left"},{value:"right",text:"right"},{value:"top",text:"top"},{value:"bottom",text:"bottom"}],scales:["linear","log","square root"],colorSchemas:Object.keys(_colormaps.vislibColorMaps)},optionsTemplate:_heatmap2.default,schemas:new _schemas.Schemas([{group:"metrics",name:"metric",title:"Value",min:1,max:1,aggFilter:["count","avg","median","sum","min","max","cardinality","std_dev","top_hits"],defaults:[{schema:"metric",type:"count"}]},{group:"buckets",name:"segment",title:"X-Axis",min:0,max:1,aggFilter:["!geohash_grid","!filter"]},{group:"buckets",name:"group",title:"Y-Axis",min:0,max:1,aggFilter:["!geohash_grid","!filter"]},{group:"buckets",name:"split",title:"Split Chart",min:0,max:1,aggFilter:["!geohash_grid","!filter"]}])}})}module.exports=exports["default"]},function(module,exports){module.exports='<div class="kuiSideBarSection">\n  <div class="kuiSideBarSectionTitle">\n    <div class="kuiSideBarSectionTitle__text">\n      Basic Settings\n    </div>\n  </div>\n\n  <div class="kuiSideBarFormRow">\n    <label class="kuiSideBarFormRow__label" for="addTooltip">\n      Show Tooltips\n    </label>\n    <div class="kuiSideBarFormRow__control">\n      <input class="kuiCheckBox" id="addTooltip" type="checkbox" ng-model="editorState.params.addTooltip">\n    </div>\n  </div>\n\n  <div class="kuiSideBarFormRow">\n    <label class="kuiSideBarFormRow__label" for="enableHover">\n      Highlight\n    </label>\n    <div class="kuiSideBarFormRow__control">\n      <input class="kuiCheckBox" id="enableHover" type="checkbox" ng-model="editorState.params.enableHover">\n    </div>\n  </div>\n\n  <div class="kuiSideBarFormRow" ng-show="editorState.params.addLegend">\n    <label class="kuiSideBarFormRow__label" for="legendPosition">\n      Legend Position\n    </label>\n    <div class="kuiSideBarFormRow__control">\n      <select\n        id="legendPosition"\n        class="kuiSelect kuiSideBarSelect"\n        ng-model="editorState.params.legendPosition"\n        ng-options="position.value as position.text for position in vis.type.editorConfig.collections.legendPositions"\n      ></select>\n    </div>\n  </div>\n</div>\n\n<div class="kuiSideBarSection">\n\n  <div class="kuiSideBarSectionTitle">\n    <div class="kuiSideBarSectionTitle__text">\n      Heatmap Settings\n    </div>\n  </div>\n\n  <heatmap-options></heatmap-options>\n\n</div>\n'},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"74725229b8c17a39c35d6cf26a989557.svg"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=PointSeriesVisType;var _vis_factory=__webpack_require__(85);var _schemas=__webpack_require__(96);var _vis_category=__webpack_require__(71);var _point_series=__webpack_require__(654);var _point_series2=_interopRequireDefault(_point_series);var _iconHorizontal=__webpack_require__(4490);var _iconHorizontal2=_interopRequireDefault(_iconHorizontal);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function PointSeriesVisType(Private){var VisFactory=Private(_vis_factory.VisFactoryProvider);return VisFactory.createVislibVisualization({name:"horizontal_bar",title:"Horizontal Bar",image:_iconHorizontal2.default,description:"Assign a continuous variable to each axis",category:_vis_category.CATEGORY.BASIC,visConfig:{defaults:{type:"histogram",grid:{categoryLines:false,style:{color:"#eee"}},categoryAxes:[{id:"CategoryAxis-1",type:"category",position:"left",show:true,style:{},scale:{type:"linear"},labels:{show:true,rotate:0,filter:false,truncate:200},title:{}}],valueAxes:[{id:"ValueAxis-1",name:"LeftAxis-1",type:"value",position:"bottom",show:true,style:{},scale:{type:"linear",mode:"normal"},labels:{show:true,rotate:75,filter:true,truncate:100},title:{text:"Count"}}],seriesParams:[{show:true,type:"histogram",mode:"normal",data:{label:"Count",id:"1"},valueAxis:"ValueAxis-1",drawLinesBetweenPoints:true,showCircles:true}],addTooltip:true,addLegend:true,legendPosition:"right",times:[],addTimeMarker:false}},editorConfig:{collections:{positions:["top","left","right","bottom"],chartTypes:[{value:"line",text:"line"},{value:"area",text:"area"},{value:"histogram",text:"bar"}],axisModes:["normal","percentage","wiggle","silhouette"],scaleTypes:["linear","log","square root"],chartModes:["normal","stacked"],interpolationModes:[{value:"linear",text:"straight"},{value:"cardinal",text:"smoothed"},{value:"step-after",text:"stepped"}]},optionTabs:[{name:"advanced",title:"Metrics & Axes",editor:"<div><vislib-series></vislib-series><vislib-value-axes></vislib-value-axes><vislib-category-axis></vislib-category-axis></div>"},{name:"options",title:"Panel Settings",editor:_point_series2.default}],schemas:new _schemas.Schemas([{group:"metrics",name:"metric",title:"Y-Axis",min:1,aggFilter:["!geo_centroid","!geo_bounds"],defaults:[{schema:"metric",type:"count"}]},{group:"metrics",name:"radius",title:"Dot Size",min:0,max:1,aggFilter:["count","avg","sum","min","max","cardinality"]},{group:"buckets",name:"segment",title:"X-Axis",min:0,max:1,aggFilter:["!geohash_grid","!filter"]},{group:"buckets",name:"group",title:"Split Series",min:0,max:3,aggFilter:["!geohash_grid","!filter"]},{group:"buckets",name:"split",title:"Split Chart",min:0,max:1,aggFilter:["!geohash_grid","!filter"]}])}})}module.exports=exports["default"]},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"97bdb00c6bb0f0858161ef433ea62640.svg"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=GaugeVisType;var _vis_factory=__webpack_require__(85);var _schemas=__webpack_require__(96);var _vis_category=__webpack_require__(71);var _gauge=__webpack_require__(1528);var _gauge2=_interopRequireDefault(_gauge);var _colormaps=__webpack_require__(430);var _iconGauge=__webpack_require__(4492);var _iconGauge2=_interopRequireDefault(_iconGauge);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function GaugeVisType(Private){var VisFactory=Private(_vis_factory.VisFactoryProvider);return VisFactory.createVislibVisualization({name:"gauge",title:"Gauge",image:_iconGauge2.default,description:"Gauges indicate the status of a metric. Use it to show how a metric's value relates \n      to reference threshold values.",category:_vis_category.CATEGORY.DATA,visConfig:{defaults:{type:"gauge",addTooltip:true,addLegend:true,isDisplayWarning:false,gauge:{verticalSplit:false,extendRange:true,percentageMode:false,gaugeType:"Arc",gaugeStyle:"Full",backStyle:"Full",orientation:"vertical",colorSchema:"Green to Red",gaugeColorMode:"Labels",colorsRange:[{from:0,to:50},{from:50,to:75},{from:75,to:100}],invertColors:false,labels:{show:true,color:"black"},scale:{show:true,labels:false,color:"#333"},type:"meter",style:{bgWidth:.9,width:.9,mask:false,bgMask:false,maskBars:50,bgFill:"#eee",bgColor:true,subText:"",fontSize:60}}}},editorConfig:{collections:{gaugeTypes:["Arc","Circle"],gaugeColorMode:["None","Labels","Background"],scales:["linear","log","square root"],colorSchemas:Object.keys(_colormaps.vislibColorMaps)},optionsTemplate:_gauge2.default,schemas:new _schemas.Schemas([{group:"metrics",name:"metric",title:"Metric",min:1,aggFilter:["!std_dev","!geo_centroid","!percentiles","!percentile_ranks","!derivative","!serial_diff","!moving_avg","!cumulative_sum","!geo_bounds"],defaults:[{schema:"metric",type:"count"}]},{group:"buckets",name:"group",title:"Split Group",min:0,max:1,aggFilter:["!geohash_grid","!filter"]}])}})}module.exports=exports["default"]},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"d1c95c8e85228e93547df753065c0867.svg"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=GoalVisType;var _vis_factory=__webpack_require__(85);var _schemas=__webpack_require__(96);var _vis_category=__webpack_require__(71);var _gauge=__webpack_require__(1528);var _gauge2=_interopRequireDefault(_gauge);var _colormaps=__webpack_require__(430);var _iconGoal=__webpack_require__(4494);var _iconGoal2=_interopRequireDefault(_iconGoal);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function GoalVisType(Private){var VisFactory=Private(_vis_factory.VisFactoryProvider);return VisFactory.createVislibVisualization({name:"goal",title:"Goal",image:_iconGoal2.default,description:"A goal chart indicates how close you are to your final goal.",category:_vis_category.CATEGORY.DATA,visConfig:{defaults:{addTooltip:true,addLegend:false,isDisplayWarning:false,type:"gauge",gauge:{verticalSplit:false,autoExtend:false,percentageMode:true,gaugeType:"Arc",gaugeStyle:"Full",backStyle:"Full",orientation:"vertical",useRanges:false,colorSchema:"Green to Red",gaugeColorMode:"None",colorsRange:[{from:0,to:1e4}],invertColors:false,labels:{show:true,color:"black"},scale:{show:false,labels:false,color:"#333",width:2},type:"meter",style:{bgFill:"#000",bgColor:false,labelColor:false,subText:"",fontSize:60}}}},editorConfig:{collections:{gaugeTypes:["Arc","Circle"],gaugeColorMode:["None","Labels","Background"],scales:["linear","log","square root"],colorSchemas:Object.keys(_colormaps.vislibColorMaps)},optionsTemplate:_gauge2.default,schemas:new _schemas.Schemas([{group:"metrics",name:"metric",title:"Metric",min:1,aggFilter:["!std_dev","!geo_centroid","!percentiles","!percentile_ranks","!derivative","!serial_diff","!moving_avg","!cumulative_sum","!geo_bounds"],defaults:[{schema:"metric",type:"count"}]},{group:"buckets",name:"group",title:"Split Group",min:0,max:1,aggFilter:["!geohash_grid","!filter"]}])}})}module.exports=exports["default"]},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"0c6dccf6e8d60a35330c60a8831b1c08.svg"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});__webpack_require__(4496);var _markdown_vis_controller=__webpack_require__(4497);var _vis_factory=__webpack_require__(85);var _vis_category=__webpack_require__(71);var _markdown_vis_params=__webpack_require__(4499);var _markdown_vis_params2=_interopRequireDefault(_markdown_vis_params);var _vis_types=__webpack_require__(95);var _iconMarkdown=__webpack_require__(4500);var _iconMarkdown2=_interopRequireDefault(_iconMarkdown);var _editor_size=__webpack_require__(645);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_vis_types.VisTypesRegistryProvider.register(MarkdownVisProvider);function MarkdownVisProvider(Private){var VisFactory=Private(_vis_factory.VisFactoryProvider);return VisFactory.createReactVisualization({name:"markdown",title:"Markdown",isAccessible:true,image:_iconMarkdown2.default,description:"Create a document using markdown syntax",category:_vis_category.CATEGORY.OTHER,visConfig:{component:_markdown_vis_controller.MarkdownVisWrapper,defaults:{fontSize:12,openLinksInNewTab:false}},editorConfig:{optionsTemplate:_markdown_vis_params2.default,enableAutoApply:true,defaultSize:_editor_size.DefaultEditorSize.LARGE},options:{showTimePicker:false},requestHandler:"none",responseHandler:"none"})}exports.default=MarkdownVisProvider;module.exports=exports["default"]},function(module,exports){},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();exports.MarkdownVisWrapper=MarkdownVisWrapper;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _markdown=__webpack_require__(1529);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var MarkdownVisComponent=function(_Component){_inherits(MarkdownVisComponent,_Component);function MarkdownVisComponent(){_classCallCheck(this,MarkdownVisComponent);return _possibleConstructorReturn(this,(MarkdownVisComponent.__proto__||Object.getPrototypeOf(MarkdownVisComponent)).apply(this,arguments))}_createClass(MarkdownVisComponent,[{key:"componentDidMount",value:function componentDidMount(){this.props.renderComplete()}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.props.renderComplete()}},{key:"render",value:function render(){return _react2.default.createElement("div",{className:"markdown-vis",style:{fontSize:this.props.fontSize+"pt"}},_react2.default.createElement(_markdown.Markdown,{"data-test-subj":"markdownBody",markdown:this.props.markdown,openLinksInNewTab:this.props.openLinksInNewTab}))}}]);return MarkdownVisComponent}(_react.Component);function MarkdownVisWrapper(props){return _react2.default.createElement(MarkdownVisComponent,{fontSize:props.vis.params.fontSize,markdown:props.vis.params.markdown,openLinksInNewTab:props.vis.params.openLinksInNewTab,renderComplete:props.renderComplete})}},function(module,exports){},function(module,exports){module.exports='<div class="kuiSideBarSection">\n  <div class="markdown-vis-options form-group">\n    <div>\n      <label for="markdownVisInput">Markdown</label>\n      <small class="pull-right"><a target="_window" href="https://help.github.com/articles/github-flavored-markdown/">Help <i aria-hidden="true" class="fa fa-link"></i></a></small>\n    </div>\n    <div class="kuiSideBarFormRow">\n      <label class="kuiSideBarFormRow__label" for="markdownVisFontSize">\n        Font Size (<span ng-bind="editorState.params.fontSize"></span>pt)\n      </label>\n      <div class="kuiSideBarFormRow__control">\n        <input id="markdownVisFontSize" type="range" ng-model="editorState.params.fontSize" class="form-control" min="8" max="36" />\n      </div>\n    </div>\n    <div class="kuiSideBarFormRow">\n      <label class="kuiSideBarFormRow__label" for="markdownVisOpenLinksInNewTab">\n        Open links in new tab\n      </label>\n      <div class="kuiSideBarFormRow__control">\n        <input\n          id="markdownVisOpenLinksInNewTab"\n          type="checkbox"\n          ng-model="editorState.params.openLinksInNewTab"\n          class="kuiCheckBox"\n        />\n      </div>\n    </div>\n    <textarea\n      id="markdownVisInput"\n      ng-model="editorState.params.markdown"\n      class="form-control"\n      rows="20"\n      data-test-subj="markdownTextarea"\n    ></textarea>\n  </div>\n</div>\n'},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"86581dc57044730966dee64f92133ee2.svg"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});__webpack_require__(4502);__webpack_require__(4503);var _vis_factory=__webpack_require__(85);var _vis_category=__webpack_require__(71);var _schemas=__webpack_require__(96);var _vis_types=__webpack_require__(95);var _colormaps=__webpack_require__(430);var _metric_vis_controller=__webpack_require__(4505);var _icon_number=__webpack_require__(4507);var _icon_number2=_interopRequireDefault(_icon_number);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_vis_types.VisTypesRegistryProvider.register(MetricVisProvider);function MetricVisProvider(Private){var VisFactory=Private(_vis_factory.VisFactoryProvider);return VisFactory.createReactVisualization({name:"metric",title:"Metric",image:_icon_number2.default,description:"Display a calculation as a single number",category:_vis_category.CATEGORY.DATA,visConfig:{component:_metric_vis_controller.MetricVisComponent,defaults:{addTooltip:true,addLegend:false,type:"metric",metric:{percentageMode:false,useRanges:false,colorSchema:"Green to Red",metricColorMode:"None",colorsRange:[{from:0,to:1e4}],labels:{show:true},invertColors:false,style:{bgFill:"#000",bgColor:false,labelColor:false,subText:"",fontSize:60}}}},editorConfig:{collections:{metricColorMode:["None","Labels","Background"],colorSchemas:Object.keys(_colormaps.vislibColorMaps)},optionsTemplate:"<metric-vis-params></metric-vis-params>",schemas:new _schemas.Schemas([{group:"metrics",name:"metric",title:"Metric",min:1,aggFilter:["!std_dev","!geo_centroid","!derivative","!serial_diff","!moving_avg","!cumulative_sum","!geo_bounds"],defaults:[{type:"count",schema:"metric"}]},{group:"buckets",name:"group",title:"Split Group",min:0,max:1,aggFilter:["!geohash_grid","!filter"]}])}})}exports.default=MetricVisProvider;module.exports=exports["default"]},function(module,exports){},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(2);var _metric_vis_params=__webpack_require__(4504);var _metric_vis_params2=_interopRequireDefault(_metric_vis_params);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");_module.directive("metricVisParams",function(){return{restrict:"E",template:_metric_vis_params2.default,replace:true,link:function link($scope){$scope.collections=$scope.vis.type.editorConfig.collections;$scope.showColorRange=true;$scope.$watch("editorState.params.metric.metricColorMode",function(newValue){switch(newValue){case"Labels":$scope.editorState.params.metric.style.labelColor=true;$scope.editorState.params.metric.style.bgColor=false;break;case"Background":$scope.editorState.params.metric.style.labelColor=false;$scope.editorState.params.metric.style.bgColor=true;break;case"None":$scope.editorState.params.metric.style.labelColor=false;$scope.editorState.params.metric.style.bgColor=false}});$scope.resetColors=function(){$scope.uiState.set("vis.colors",null);$scope.customColors=false};$scope.getGreaterThan=function(index){if(0===index)return 0;return $scope.editorState.params.metric.colorsRange[index-1].to};$scope.addRange=function(){var previousRange=_lodash2.default.last($scope.editorState.params.metric.colorsRange);var from=previousRange?previousRange.to:0;var to=previousRange?from+(previousRange.to-previousRange.from):100;$scope.editorState.params.metric.colorsRange.push({from:from,to:to})};$scope.removeRange=function(index){$scope.editorState.params.metric.colorsRange.splice(index,1)};$scope.getColor=function(index){var defaultColors=this.uiState.get("vis.defaultColors");var overwriteColors=this.uiState.get("vis.colors");var colors=defaultColors?_lodash2.default.defaults({},overwriteColors,defaultColors):overwriteColors;return colors?Object.values(colors)[index]:"transparent"};$scope.uiState.on("colorChanged",function(){$scope.customColors=true})}}})},function(module,exports){module.exports='<div class="kuiSideBarSection">\n\n  <div class="kuiSideBarFormRow">\n    <label class="kuiSideBarFormRow__label" for="percentageMode">\n      Percentage Mode\n    </label>\n    <div class="kuiSideBarFormRow__control">\n      <input class="kuiCheckBox" id="percentageMode" type="checkbox" ng-model="editorState.params.metric.percentageMode">\n    </div>\n  </div>\n\n  <div class="kuiSideBarFormRow">\n    <label class="kuiSideBarFormRow__label" for="showLabels">\n      Show Labels\n    </label>\n    <div class="kuiSideBarFormRow__control">\n      <input class="kuiCheckBox" id="showLabels" type="checkbox" ng-model="editorState.params.metric.labels.show">\n    </div>\n  </div>\n\n  <div>\n    <div class="kuiSideBarCollapsibleTitle">\n      <div\n        kbn-accessible-click\n        aria-expanded="{{!!showColorRange}}"\n        aria-controls="metricOptionsRanges"\n        aria-label="Toggle range options"\n        class="kuiSideBarCollapsibleTitle__label"\n        ng-click="showColorRange = !showColorRange"\n      >\n      <span\n        aria-hidden="true"\n        ng-class="{ \'fa-caret-down\': showColorRange, \'fa-caret-right\': !showColorRange }"\n        class="fa fa-caret-right kuiSideBarCollapsibleTitle__caret"\n      ></span>\n        <span class="kuiSideBarCollapsibleTitle__text">\n        Ranges\n      </span>\n      </div>\n    </div>\n\n    <div id="metricOptionsRanges" ng-show="showColorRange" class="kuiSideBarCollapsibleSection">\n      <div class="kuiSideBarSection">\n        <table class="vis-editor-agg-editor-ranges form-group" ng-show="editorState.params.metric.colorsRange.length">\n          <tr>\n            <th>\n              <label id="metricOptionsCustomRangeFrom">From</label>\n            </th>\n            <th colspan="2">\n              <label id="metricOptionsCustomRangeTo">To</label>\n            </th>\n          </tr>\n\n          <tr ng-repeat="range in editorState.params.metric.colorsRange track by $index">\n            <td>\n              <input\n                aria-labelledby="metricOptionsCustomRangeFrom"\n                ng-model="range.from"\n                type="number"\n                class="form-control"\n                name="range.from"\n                greater-or-equal-than="{{getGreaterThan($index)}}"\n                required\n                step="any" />\n            </td>\n            <td>\n              <input\n                aria-labelledby="metricOptionsCustomRangeTo"\n                ng-model="range.to"\n                type="number"\n                class="form-control"\n                name="range.to"\n                greater-or-equal-than="{{range.from}}"\n                required\n                step="any" />\n            </td>\n            <td>\n              <button\n                type="button"\n                ng-click="removeRange($index)"\n                ng-show="editorState.params.metric.colorsRange.length > 1"\n                class="kuiButton kuiButton--danger kuiButton--small">\n                <i class="fa fa-times"></i>\n              </button>\n            </td>\n          </tr>\n        </table>\n\n        <div class="hintbox" ng-show="!editorState.params.metric.colorsRange.length">\n          <p>\n            <i class="fa fa-danger text-danger"></i>\n            <strong>Required:</strong> You must specify at least one range.\n          </p>\n        </div>\n\n        <div\n          ng-click="addRange()"\n          class="kuiButton kuiButton--primary kuiButton--fullWidth">\n          Add Range\n        </div>\n      </div>\n    </div>\n  </div>\n  <div ng-show="editorState.params.metric.colorsRange.length > 1">\n    <div class="kuiSideBarCollapsibleTitle">\n      <div\n        kbn-accessible-click\n        aria-expanded="{{!!showColorOptions}}"\n        aria-controls="metricOptionsColors"\n        aria-label="Toggle color options"\n        class="kuiSideBarCollapsibleTitle__label"\n        ng-click="showColorOptions = !showColorOptions"\n      >\n      <span\n        aria-hidden="true"\n        ng-class="{\n        \'fa-caret-down\': showColorOptions,\n        \'fa-caret-right\': !showColorOptions\n        }"\n        class="fa fa-caret-right kuiSideBarCollapsibleTitle__caret"\n      ></span>\n        <span class="kuiSideBarCollapsibleTitle__text">\n        Color Options\n      </span>\n      </div>\n    </div>\n    <div id="metricOptionsColors" ng-if="showColorOptions" class="kuiSideBarCollapsibleSection">\n      <div class="kuiSideBarSection">\n        <div class="kuiSideBarFormRow" ng-show="editorState.params.metric.colorsRange.length > 1">\n          <label class="kuiSideBarFormRow__label" for="metricColorMode">\n            Use Color For\n          </label>\n          <div class="kuiSideBarFormRow__control">\n            <select\n              id="metricColorMode"\n              class="kuiSelect kuiSideBarSelect"\n              ng-model="editorState.params.metric.metricColorMode"\n              ng-options="mode for mode in collections.metricColorMode"\n            ></select>\n          </div>\n        </div>\n        <div class="kuiSideBarFormRow" ng-show="editorState.params.metric.metricColorMode !== \'None\'">\n          <label class="kuiSideBarFormRow__label" for="colorSchema">\n            Color Schema\n          </label>\n          <div class="kuiSideBarFormRow__control">\n            <select\n              id="colorSchema"\n              class="kuiSelect kuiSideBarSelect"\n              ng-model="editorState.params.metric.colorSchema"\n              ng-options="mode for mode in collections.colorSchemas"\n            ></select>\n          </div>\n          <div class="text-info text-center" ng-show="customColors" ng-click="resetColors()">reset colors</div>\n        </div>\n\n        <div class="kuiSideBarFormRow"  ng-show="editorState.params.metric.metricColorMode !== \'None\'">\n          <label class="kuiSideBarFormRow__label" for="invertColors">\n            Reverse Color Schema\n          </label>\n          <div class="kuiSideBarFormRow__control">\n            <input class="kuiCheckBox" id="invertColors" type="checkbox" ng-model="editorState.params.metric.invertColors">\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div>\n    <div class="kuiSideBarCollapsibleTitle">\n      <div\n        kbn-accessible-click\n        aria-expanded="{{!!showStyle}}"\n        aria-controls="metricOptionsStyle"\n        aria-label="Toggle style options"\n        class="kuiSideBarCollapsibleTitle__label"\n        ng-click="showStyle = !showStyle"\n      >\n        <span\n          aria-hidden="true"\n          ng-class="{\n          \'fa-caret-down\': showStyle,\n          \'fa-caret-right\': !showStyle\n          }"\n          class="fa fa-caret-right kuiSideBarCollapsibleTitle__caret"\n        ></span>\n        <span class="kuiSideBarCollapsibleTitle__text">\n          Style\n        </span>\n      </div>\n    </div>\n    <div id="metricOptionsStyle" ng-if="showStyle" class="kuiSideBarCollapsibleSection">\n\n      <div class="kuiSideBarSection">\n\n        <div class="kuiSideBarFormRow">\n          <label class="kuiSideBarFormRow__label" for="metricFontSize">\n            Font Size (<span ng-bind="editorState.params.metric.style.fontSize"></span>pt)\n          </label>\n          <div class="kuiSideBarFormRow__control">\n            <input id="metricFontSize" type="range" ng-model="editorState.params.metric.style.fontSize" class="form-control" min="12" max="120" />\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MetricVisComponent=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _heatmap_color=__webpack_require__(888);var _eui=__webpack_require__(3);var _metric_vis_value=__webpack_require__(4506);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.MetricVisComponent=function(_Component){_inherits(MetricVisComponent,_Component);function MetricVisComponent(){var _ref;var _temp,_this,_ret;_classCallCheck(this,MetricVisComponent);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=MetricVisComponent.__proto__||Object.getPrototypeOf(MetricVisComponent)).call.apply(_ref,[this].concat(args))),_this),_this._filterBucket=function(metric){if(!metric.filterKey||!metric.bucketAgg)return;var table=_this.props.visData.tables[metric.tableIndex];_this.props.vis.API.events.addFilter(table,metric.columnIndex,metric.rowIndex)},_this._renderMetric=function(metric,index){return _react2.default.createElement(_metric_vis_value.MetricVisValue,{key:index,metric:metric,fontSize:_this.props.vis.params.metric.style.fontSize,onFilter:metric.filterKey&&metric.bucketAgg?_this._filterBucket:null,showLabel:_this.props.vis.params.metric.labels.show})},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(MetricVisComponent,[{key:"_getLabels",value:function _getLabels(){var config=this.props.vis.params.metric;var isPercentageMode=config.percentageMode;var colorsRange=config.colorsRange;var max=_lodash2.default.last(colorsRange).to;var labels=[];colorsRange.forEach(function(range){var from=isPercentageMode?Math.round(100*range.from/max):range.from;var to=isPercentageMode?Math.round(100*range.to/max):range.to;labels.push(from+" - "+to)});return labels}},{key:"_getColors",value:function _getColors(){var config=this.props.vis.params.metric;var invertColors=config.invertColors;var colorSchema=config.colorSchema;var colorsRange=config.colorsRange;var labels=this._getLabels();var colors={};for(var i=0;i<labels.length;i+=1){var divider=Math.max(colorsRange.length-1,1);var val=invertColors?1-i/divider:i/divider;colors[labels[i]]=(0,_heatmap_color.getHeatmapColors)(val,colorSchema)}return colors}},{key:"_getBucket",value:function _getBucket(val){var config=this.props.vis.params.metric;var bucket=_lodash2.default.findIndex(config.colorsRange,function(range){return range.from<=val&&range.to>val});-1===bucket&&(bucket=val<config.colorsRange[0].from?0:config.colorsRange.length-1);return bucket}},{key:"_getColor",value:function _getColor(val,labels,colors){var bucket=this._getBucket(val);var label=labels[bucket];return colors[label]}},{key:"_needsLightText",value:function _needsLightText(bgColor){var color=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(bgColor);if(!color)return false;return(0,_eui.isColorDark)(parseInt(color[1]),parseInt(color[2]),parseInt(color[3]))}},{key:"_getFormattedValue",value:function _getFormattedValue(fieldFormatter,value){if(_lodash2.default.isNaN(value))return"-";return fieldFormatter(value)}},{key:"_processTableGroups",value:function _processTableGroups(tableGroups){var _this2=this;var config=this.props.vis.params.metric;var isPercentageMode=config.percentageMode;var min=config.colorsRange[0].from;var max=_lodash2.default.last(config.colorsRange).to;var colors=this._getColors();var labels=this._getLabels();var metrics=[];tableGroups.tables.forEach(function(table,tableIndex){var bucketAgg=void 0;var rowHeaderIndex=void 0;table.columns.forEach(function(column,columnIndex){var aggConfig=column.aggConfig;if(aggConfig&&"buckets"===aggConfig.type.type){bucketAgg=aggConfig;rowHeaderIndex=columnIndex;return}table.rows.forEach(function(row,rowIndex){var title=column.title;var value=row[columnIndex];var color=_this2._getColor(value,labels,colors);if(isPercentageMode){var percentage=Math.round(100*(value-min)/(max-min));value=percentage+"%"}if(aggConfig){isPercentageMode||(value=_this2._getFormattedValue(aggConfig.fieldFormatter("html"),value));if(bucketAgg){var bucketValue=bucketAgg.fieldFormatter("text")(row[0]);title=bucketValue+" - "+aggConfig.makeLabel()}else title=aggConfig.makeLabel()}var shouldColor=config.colorsRange.length>1;metrics.push({label:title,value:value,color:shouldColor&&config.style.labelColor?color:null,bgColor:shouldColor&&config.style.bgColor?color:null,lightText:shouldColor&&config.style.bgColor&&_this2._needsLightText(color),filterKey:void 0!==rowHeaderIndex?row[rowHeaderIndex]:null,tableIndex:tableIndex,rowIndex:rowIndex,columnIndex:rowHeaderIndex,bucketAgg:bucketAgg})})})});return metrics}},{key:"render",value:function render(){var metricsHtml=void 0;if(this.props.visData){var metrics=this._processTableGroups(this.props.visData);metricsHtml=metrics.map(this._renderMetric)}return _react2.default.createElement("div",{className:"metric-vis"},metricsHtml)}},{key:"componentDidMount",value:function componentDidMount(){this.props.renderComplete()}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.props.renderComplete()}}]);return MetricVisComponent}(_react.Component)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MetricVisValue=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _classnames=__webpack_require__(5);var _classnames2=_interopRequireDefault(_classnames);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var MetricVisValue=function(_Component){_inherits(MetricVisValue,_Component);function MetricVisValue(){var _ref;var _temp,_this,_ret;_classCallCheck(this,MetricVisValue);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=MetricVisValue.__proto__||Object.getPrototypeOf(MetricVisValue)).call.apply(_ref,[this].concat(args))),_this),_this.onClick=function(){_this.props.onFilter(_this.props.metric)},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(MetricVisValue,[{key:"render",value:function render(){var _props=this.props,fontSize=_props.fontSize,metric=_props.metric,onFilter=_props.onFilter,showLabel=_props.showLabel;var hasFilter=!!onFilter;var metricValueStyle={fontSize:fontSize+"pt",color:metric.color};var containerClassName=(0,_classnames2.default)("metric-container",{"metric-container--light":metric.lightText,"metric-container--filterable":hasFilter});var metricComponent=_react2.default.createElement("div",{className:containerClassName,style:{backgroundColor:metric.bgColor},onClick:hasFilter?this.onClick:null,tabIndex:hasFilter?0:null,role:hasFilter?"button":null},_react2.default.createElement("div",{className:"metric-value",style:metricValueStyle,dangerouslySetInnerHTML:{__html:metric.value}}),showLabel&&_react2.default.createElement("div",null,metric.label));if(hasFilter)return _react2.default.createElement(_eui.EuiKeyboardAccessible,null,metricComponent);return metricComponent}}]);return MetricVisValue}(_react.Component);MetricVisValue.propTypes={fontSize:_propTypes2.default.number.isRequired,metric:_propTypes2.default.object.isRequired,onFilter:_propTypes2.default.func,showLabel:_propTypes2.default.bool};exports.MetricVisValue=MetricVisValue},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"71676fac241b6e6e51614074cf72152c.svg"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=MetricsVisProvider;__webpack_require__(4509);__webpack_require__(4510);var _iconVisualbuilder=__webpack_require__(4511);var _iconVisualbuilder2=_interopRequireDefault(_iconVisualbuilder);var _request_handler=__webpack_require__(4512);var _editor_controller=__webpack_require__(4515);var _vis_factory=__webpack_require__(85);var _vis_category=__webpack_require__(71);var _default_feedback_message=__webpack_require__(905);var _vis_types=__webpack_require__(95);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_vis_types.VisTypesRegistryProvider.register(MetricsVisProvider);function MetricsVisProvider(Private){var VisFactory=Private(_vis_factory.VisFactoryProvider);var ReactEditorController=Private(_editor_controller.ReactEditorControllerProvider).handler;var metricsRequestHandler=Private(_request_handler.MetricsRequestHandlerProvider).handler;return VisFactory.createReactVisualization({name:"metrics",title:"Visual Builder",description:"Build time-series using a visual pipeline interface",category:_vis_category.CATEGORY.TIME,image:_iconVisualbuilder2.default,stage:"experimental",feedbackMessage:_default_feedback_message.defaultFeedbackMessage,visConfig:{defaults:{id:"61ca57f0-469d-11e7-af02-69e470af7417",type:"timeseries",series:[{id:"61ca57f1-469d-11e7-af02-69e470af7417",color:"#68BC00",split_mode:"everything",metrics:[{id:"61ca57f2-469d-11e7-af02-69e470af7417",type:"count"}],separate_axis:0,axis_position:"right",formatter:"number",chart_type:"line",line_width:1,point_size:1,fill:.5,stacked:"none"}],time_field:"@timestamp",index_pattern:"",interval:"auto",axis_position:"left",axis_formatter:"number",axis_scale:"normal",show_legend:1,show_grid:1},component:__webpack_require__(1530)},editor:ReactEditorController,editorConfig:{component:__webpack_require__(1530)},options:{showQueryBar:false,showFilterBar:false,showIndexSelection:false},requestHandler:metricsRequestHandler,responseHandler:"none"})}module.exports=exports["default"]},function(module,exports){},function(module,exports){},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"a3b2c394347b7dba49ca15464bb9e234.svg"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MetricsRequestHandlerProvider=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _validate_interval=__webpack_require__(4513);var _dashboard_context=__webpack_require__(889);var _timezone=__webpack_require__(882);var _timefilter=__webpack_require__(14);var MetricsRequestHandlerProvider=function MetricsRequestHandlerProvider(Private,Notifier,config,$http){var dashboardContext=Private(_dashboard_context.dashboardContextProvider);var notify=new Notifier({location:"Metrics"});return{name:"metrics",handler:function handler(vis,_ref){var uiState=_ref.uiState,timeRange=_ref.timeRange;var timezone=Private(_timezone.timezoneProvider)();return new Promise(function(resolve){var panel=vis.params;var uiStateObj=uiState.get(panel.type,{});var parsedTimeRange=_timefilter.timefilter.calculateBounds(timeRange);var scaledDataFormat=config.get("dateFormat:scaled");var dateFormat=config.get("dateFormat");if(panel&&panel.id){var params={timerange:_extends({timezone:timezone},parsedTimeRange),filters:[dashboardContext()],panels:[panel],state:uiStateObj};try{var maxBuckets=config.get("metrics:max_buckets");(0,_validate_interval.validateInterval)(parsedTimeRange,panel,maxBuckets);var httpResult=$http.post("../api/metrics/vis/data",params).then(function(resp){return _extends({dateFormat:dateFormat,scaledDataFormat:scaledDataFormat,timezone:timezone},resp.data)}).catch(function(resp){throw resp.data});return httpResult.then(resolve).catch(function(resp){resolve({});var err=new Error(resp.message);err.stack=resp.stack;notify.error(err)})}catch(e){notify.error(e);return resolve()}}})}}};exports.MetricsRequestHandlerProvider=MetricsRequestHandlerProvider},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.validateInterval=validateInterval;var _parse_interval=__webpack_require__(117);var _interval_regexp=__webpack_require__(4514);function validateInterval(bounds,panel,maxBuckets){var interval=panel.interval;var min=bounds.min,max=bounds.max;if(!interval)return;if("auto"===interval)return;var greaterThanMatch=interval.match(_interval_regexp.GTE_INTERVAL_RE);if(greaterThanMatch)return;var duration=(0,_parse_interval.parseInterval)(interval);if(duration){var span=max.valueOf()-min.valueOf();var buckets=Math.floor(span/duration.asMilliseconds());if(buckets>maxBuckets)throw new Error("Max buckets exceeded: "+buckets+" is greater than "+maxBuckets+", try a larger time interval in the panel options.")}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.INTERVAL_STRING_RE=exports.GTE_INTERVAL_RE=void 0;var _datemath=__webpack_require__(83);var _datemath2=_interopRequireDefault(_datemath);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.GTE_INTERVAL_RE=new RegExp("^>=([\\d\\.]*\\s*("+_datemath2.default.units.join("|")+"))$");exports.INTERVAL_STRING_RE=new RegExp("^([0-9\\.]*)\\s*("+_datemath2.default.units.join("|")+")$")},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ReactEditorControllerProvider=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _chrome=__webpack_require__(8);var _chrome2=_interopRequireDefault(_chrome);var _reactDom=__webpack_require__(15);var _fetch_fields=__webpack_require__(4516);var _extract_index_patterns=__webpack_require__(4517);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function ReactEditorControllerProvider(Private,config){var fetchFields=Private(_fetch_fields.FetchFieldsProvider);var savedObjectsClient=_chrome2.default.getSavedObjectsClient();var ReactEditorController=function(){function ReactEditorController(el,savedObj){_classCallCheck(this,ReactEditorController);this.el=el;this.savedObj=savedObj;this.vis=savedObj.vis;this.vis.fields={}}_createClass(ReactEditorController,[{key:"render",value:function render(params){var _this=this;return new Promise(function(resolve){Promise.resolve().then(function(){if(""===_this.vis.params.index_pattern)return savedObjectsClient.get("index-pattern",config.get("defaultIndex")).then(function(indexPattern){_this.vis.params.index_pattern=indexPattern.attributes.title})}).then(function(){var indexPatterns=(0,_extract_index_patterns.extractIndexPatterns)(_this.vis);fetchFields(indexPatterns).then(function(fields){_this.vis.fields=_extends({},fields,_this.vis.fields);var Component=_this.vis.type.editorConfig.component;(0,_reactDom.render)(_react2.default.createElement(Component,{config:config,vis:_this.vis,savedObj:_this.savedObj,timeRange:params.timeRange,renderComplete:resolve,isEditorMode:true,appState:params.appState}),_this.el)})})})}},{key:"resize",value:function resize(){this.visData&&this.render(this.visData)}},{key:"destroy",value:function destroy(){(0,_reactDom.unmountComponentAtNode)(this.el)}}]);return ReactEditorController}();return{name:"react_editor",handler:ReactEditorController}}exports.ReactEditorControllerProvider=ReactEditorControllerProvider},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var FetchFieldsProvider=function FetchFieldsProvider(Notifier,$http){var notify=new Notifier({location:"Metrics"});return function(){var indexPatterns=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["*"];Array.isArray(indexPatterns)||(indexPatterns=[indexPatterns]);return new Promise(function(resolve,reject){var fields={};Promise.all(indexPatterns.map(function(pattern){var httpResult=$http.get("../api/metrics/fields?index="+pattern).then(function(resp){return resp.data}).catch(function(resp){throw resp.data});return httpResult.then(function(resp){resp.length&&pattern&&(fields[pattern]=resp)}).catch(function(resp){var err=new Error(resp.message);err.stack=resp.stack;notify.error(err);reject(err)})})).then(function(){resolve(fields)})})}};exports.FetchFieldsProvider=FetchFieldsProvider},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.extractIndexPatterns=extractIndexPatterns;var _lodash=__webpack_require__(1);function extractIndexPatterns(vis){var patternsToFetch=[];vis.fields[vis.params.index_pattern]||patternsToFetch.push(vis.params.index_pattern);vis.params.series.forEach(function(series){var indexPattern=series.series_index_pattern;series.override_index_pattern&&!vis.fields[indexPattern]&&patternsToFetch.push(indexPattern)});vis.params.annotations&&vis.params.annotations.forEach(function(item){var indexPattern=item.index_pattern;indexPattern&&!vis.fields[indexPattern]&&patternsToFetch.push(indexPattern)});return(0,_lodash.uniq)(patternsToFetch)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(3);var _reactToggle=__webpack_require__(4519);var _reactToggle2=_interopRequireDefault(_reactToggle);__webpack_require__(4523);var _visualize_loader=__webpack_require__(906);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var MIN_CHART_HEIGHT=250;var VisEditorVisualization=function(_Component){_inherits(VisEditorVisualization,_Component);function VisEditorVisualization(props){_classCallCheck(this,VisEditorVisualization);var _this=_possibleConstructorReturn(this,(VisEditorVisualization.__proto__||Object.getPrototypeOf(VisEditorVisualization)).call(this,props));_this.onUpdate=function(){_this._handler.update({timeRange:_this.props.timeRange})};_this.state={height:MIN_CHART_HEIGHT,dragging:false};_this.handleMouseUp=_this.handleMouseUp.bind(_this);_this.handleMouseDown=_this.handleMouseDown.bind(_this);_this.onSizeHandleKeyDown=_this.onSizeHandleKeyDown.bind(_this);_this._visEl=_react2.default.createRef();return _this}_createClass(VisEditorVisualization,[{key:"handleMouseDown",value:function handleMouseDown(){this.setState({dragging:true})}},{key:"handleMouseUp",value:function handleMouseUp(){this.setState({dragging:false})}},{key:"componentWillMount",value:function componentWillMount(){var _this2=this;this.handleMouseMove=function(event){_this2.state.dragging&&_this2.setState(function(prevState){return{height:Math.max(MIN_CHART_HEIGHT,prevState.height+event.movementY)}})};window.addEventListener("mousemove",this.handleMouseMove);window.addEventListener("mouseup",this.handleMouseUp)}},{key:"componentWillUnmount",value:function componentWillUnmount(){window.removeEventListener("mousemove",this.handleMouseMove);window.removeEventListener("mouseup",this.handleMouseUp);this._handler&&this._handler.destroy()}},{key:"_loadVisualization",value:function _loadVisualization(){var _this3=this;(0,_visualize_loader.getVisualizeLoader)().then(function(loader){if(!_this3._visEl.current)return;_this3._loader=loader;_this3._handler=_this3._loader.embedVisualizationWithSavedObject(_this3._visEl.current,_this3.props.savedObj,{uiState:_this3.props.uiState,listenOnChange:false,timeRange:_this3.props.timeRange,appState:_this3.props.appState});_this3._handlerUpdateHasAlreadyBeenTriggered&&_this3.onUpdate()})}},{key:"componentDidUpdate",value:function componentDidUpdate(){if(!this._handler){this._handlerUpdateHasAlreadyBeenTriggered=true;return}this.onUpdate()}},{key:"componentDidMount",value:function componentDidMount(){this._loadVisualization()}},{key:"onSizeHandleKeyDown",value:function onSizeHandleKeyDown(ev){var keyCode=ev.keyCode;if(keyCode===_eui.keyCodes.UP||keyCode===_eui.keyCodes.DOWN){ev.preventDefault();this.setState(function(prevState){var newHeight=prevState.height+(keyCode===_eui.keyCodes.UP?-15:15);return{height:Math.max(MIN_CHART_HEIGHT,newHeight)}})}}},{key:"render",value:function render(){var _props=this.props,dirty=_props.dirty,autoApply=_props.autoApply;var style={height:this.state.height};this.state.dragging&&(style.userSelect="none");var applyButtonClassName=dirty?"thor__button-solid-default":"thor__button-outlined-grayLight";var applyMessage="The latest changes have been applied.";dirty&&(applyMessage="The changes to this visualization have not been applied.");autoApply&&(applyMessage="The changes will be automatically applied.");var applyButton=_react2.default.createElement("div",{className:"vis_editor__dirty_controls"},_react2.default.createElement("label",{className:"vis_editor__dirty_controls-toggle-label",id:"tsvbAutoApply",htmlFor:"tsvbAutoApplyInput"},"Auto Apply"),_react2.default.createElement("div",{className:"vis_editor__dirty_controls-toggle"},_react2.default.createElement(_reactToggle2.default,{id:"tsvbAutoApplyInput",defaultChecked:autoApply,icons:false,onChange:this.props.onToggleAutoApply})),_react2.default.createElement("div",{className:"vis_editor__dirty_controls-button"},_react2.default.createElement("button",{disabled:!dirty,onClick:this.props.onCommit,className:applyButtonClassName+" md"},_react2.default.createElement("i",{className:"fa fa-play"})," Apply Changes")),_react2.default.createElement("div",{className:"vis_editor__dirty_controls-message"+(dirty?"-dirty":"")},applyMessage));return _react2.default.createElement("div",null,_react2.default.createElement("div",{style:style,className:"vis_editor__visualization","data-shared-items-container":true,"data-shared-item":true,"data-title":this.props.title,"data-description":this.props.description,"data-render-complete":"disabled",ref:this._visEl}),_react2.default.createElement("div",{className:"vis-editor-hide-for-reporting"},applyButton,_react2.default.createElement("button",{className:"vis_editor__visualization-draghandle",onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onKeyDown:this.onSizeHandleKeyDown,"aria-label":"Press up/down to adjust the chart size"},_react2.default.createElement("i",{className:"fa fa-ellipsis-h"}))))}}]);return VisEditorVisualization}(_react.Component);VisEditorVisualization.propTypes={model:_propTypes2.default.object,onBrush:_propTypes2.default.func,onChange:_propTypes2.default.func,onCommit:_propTypes2.default.func,onUiState:_propTypes2.default.func,uiState:_propTypes2.default.object,onToggleAutoApply:_propTypes2.default.func,savedObj:_propTypes2.default.object,timeRange:_propTypes2.default.object,dirty:_propTypes2.default.bool,autoApply:_propTypes2.default.bool,dateFormat:_propTypes2.default.string,appState:_propTypes2.default.object};exports.default=VisEditorVisualization;module.exports=exports["default"]},,,,,,function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:true});var events_1=__webpack_require__(104);var lodash_1=__webpack_require__(1);var render_complete_1=__webpack_require__(507);var timefilter_1=__webpack_require__(14);var visualization_loader_1=__webpack_require__(1531);var visualize_data_loader_1=__webpack_require__(4530);var RENDER_COMPLETE_EVENT="render_complete";var EmbeddedVisualizeHandler=function(){function EmbeddedVisualizeHandler(element,savedObject,params){var _this=this;_classCallCheck(this,EmbeddedVisualizeHandler);this.element=element;this.loaded=false;this.destroyed=false;this.listeners=new events_1.EventEmitter;this.shouldForceNextFetch=false;this.debouncedFetchAndRender=lodash_1.debounce(function(){if(_this.destroyed)return;var forceFetch=_this.shouldForceNextFetch;_this.shouldForceNextFetch=false;_this.fetch(forceFetch).then(_this.render)},100);this.onUiStateChange=function(){_this.fetchAndRender()};this.fetchAndRender=function(){var forceFetch=arguments.length>0&&void 0!==arguments[0]&&arguments[0];_this.shouldForceNextFetch=forceFetch||_this.shouldForceNextFetch;_this.debouncedFetchAndRender()};this.handleVisUpdate=function(){if(_this.appState){_this.appState.vis=_this.vis.getState();_this.appState.save()}_this.fetchAndRender()};this.reload=function(){_this.fetchAndRender(true)};this.fetch=function(){var forceFetch=arguments.length>0&&void 0!==arguments[0]&&arguments[0];_this.dataLoaderParams.aggs=_this.vis.getAggConfig();_this.dataLoaderParams.forceFetch=forceFetch;return _this.dataLoader.fetch(_this.dataLoaderParams)};this.render=function(){var visData=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return visualization_loader_1.visualizationLoader.render(_this.element,_this.vis,visData,_this.uiState,{listenOnChange:false}).then(function(){if(!_this.loaded){_this.loaded=true;_this.fetchAndRender()}})};var searchSource=savedObject.searchSource,vis=savedObject.vis;var appState=params.appState,uiState=params.uiState,queryFilter=params.queryFilter,timeRange=params.timeRange,filters=params.filters,query=params.query,Private=params.Private;this.dataLoaderParams={searchSource:searchSource,timeRange:timeRange,query:query,queryFilter:queryFilter,filters:filters,uiState:uiState,aggs:vis.getAggConfig(),forceFetch:false};this.firstRenderComplete=new Promise(function(resolve){_this.listeners.once(RENDER_COMPLETE_EVENT,resolve)});this.onRenderCompleteListener=function(){_this.listeners.emit(RENDER_COMPLETE_EVENT)};element.addEventListener("renderComplete",this.onRenderCompleteListener);this.appState=appState;this.vis=vis;uiState&&vis._setUiState(uiState);this.uiState=this.vis.getUiState();this.vis.on("update",this.handleVisUpdate);this.vis.on("reload",this.reload);this.uiState.on("change",this.onUiStateChange);timefilter_1.timefilter.on("autoRefreshFetch",this.reload);this.dataLoader=new visualize_data_loader_1.VisualizeDataLoader(vis,Private);this.renderCompleteHelper=new render_complete_1.RenderCompleteHelper(element);this.render()}_createClass(EmbeddedVisualizeHandler,[{key:"update",value:function update(){var _this2=this;var params=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var dataAttrs=params.dataAttrs;dataAttrs&&Object.keys(dataAttrs).forEach(function(key){if(null===dataAttrs[key]){_this2.element.removeAttribute("data-"+key);return}_this2.element.setAttribute("data-"+key,dataAttrs[key])});var fetchRequired=false;if(params.hasOwnProperty("timeRange")){fetchRequired=true;this.dataLoaderParams.timeRange=params.timeRange}if(params.hasOwnProperty("filters")){fetchRequired=true;this.dataLoaderParams.filters=params.filters}if(params.hasOwnProperty("query")){fetchRequired=true;this.dataLoaderParams.query=params.query}fetchRequired&&this.fetchAndRender()}},{key:"destroy",value:function destroy(){this.destroyed=true;this.debouncedFetchAndRender.cancel();timefilter_1.timefilter.off("autoRefreshFetch",this.reload);this.vis.removeListener("reload",this.reload);this.vis.removeListener("update",this.handleVisUpdate);this.element.removeEventListener("renderComplete",this.onRenderCompleteListener);this.uiState.off("change",this.onUiStateChange);visualization_loader_1.visualizationLoader.destroy(this.element);this.renderCompleteHelper.destroy()}},{key:"getElement",value:function getElement(){return this.element}},{key:"openInspector",value:function openInspector(){return this.vis.openInspector()}},{key:"whenFirstRenderComplete",value:function whenFirstRenderComplete(){return this.firstRenderComplete}},{key:"addRenderCompleteListener",value:function addRenderCompleteListener(listener){this.listeners.addListener(RENDER_COMPLETE_EVENT,listener)}},{key:"removeRenderCompleteListener",value:function removeRenderCompleteListener(listener){this.listeners.removeListener(RENDER_COMPLETE_EVENT,listener)}}]);return EmbeddedVisualizeHandler}();exports.EmbeddedVisualizeHandler=EmbeddedVisualizeHandler},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var __importDefault=(void 0,function(mod){return mod&&mod.__esModule?mod:{default:mod}});Object.defineProperty(exports,"__esModule",{value:true});var lodash_1=__webpack_require__(1);var react_1=__importDefault(__webpack_require__(0));var memoize_1=__webpack_require__(4526);var visualization_chart_1=__webpack_require__(4527);var visualization_noresults_1=__webpack_require__(4528);__webpack_require__(4529);function shouldShowNoResultsMessage(vis,visData){var requiresSearch=lodash_1.get(vis,"type.requiresSearch");var isZeroHits=0===lodash_1.get(visData,"hits.total");var shouldShowMessage=!lodash_1.get(vis,"params.handleNoResults");return Boolean(requiresSearch&&isZeroHits&&shouldShowMessage)}var Visualization=function(_react_1$default$Comp){_inherits(Visualization,_react_1$default$Comp);function Visualization(props){_classCallCheck(this,Visualization);var _this=_possibleConstructorReturn(this,(Visualization.__proto__||Object.getPrototypeOf(Visualization)).call(this,props));_this.showNoResultsMessage=memoize_1.memoizeLast(shouldShowNoResultsMessage);var vis=props.vis,uiState=props.uiState,listenOnChange=props.listenOnChange;vis._setUiState(props.uiState);listenOnChange&&uiState.on("change",_this.onUiStateChanged);return _this}_createClass(Visualization,[{key:"render",value:function render(){var _props=this.props,vis=_props.vis,visData=_props.visData,onInit=_props.onInit,uiState=_props.uiState;var noResults=this.showNoResultsMessage(vis,visData);return react_1.default.createElement("div",{className:"visualization"},noResults?react_1.default.createElement(visualization_noresults_1.VisualizationNoResults,{onInit:onInit}):react_1.default.createElement(visualization_chart_1.VisualizationChart,{vis:vis,visData:visData,onInit:onInit,uiState:uiState}))}},{key:"shouldComponentUpdate",value:function shouldComponentUpdate(nextProps){if(nextProps.uiState!==this.props.uiState)throw new Error("Changing uiState on <Visualization/> is not supported!");return true}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.props.uiState.off("change",this.onUiStateChanged)}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){var listenOnChange=this.props.listenOnChange;prevProps.listenOnChange!==listenOnChange&&(listenOnChange?this.props.uiState.on("change",this.onUiStateChanged):this.props.uiState.off("change",this.onUiStateChanged))}},{key:"onUiStateChanged",value:function onUiStateChanged(){this.forceUpdate()}}]);return Visualization}(react_1.default.Component);exports.Visualization=Visualization},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var neverCalled=Symbol();function memoizeLast(func){var prevCall=neverCalled;var memoizedFunction=function memoizedFunction(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];if(prevCall!==neverCalled&&prevCall.this===this&&prevCall.args.length===args.length&&prevCall.args.every(function(arg,index){return arg===args[index]}))return prevCall.returnValue;prevCall={args:args,this:this,returnValue:func.apply(this,args)};return prevCall.returnValue};return memoizedFunction}exports.memoizeLast=memoizeLast},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var __importDefault=(void 0,function(mod){return mod&&mod.__esModule?mod:{default:mod}});var __importStar=(void 0,function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);result["default"]=mod;return result});Object.defineProperty(exports,"__esModule",{value:true});var react_1=__importDefault(__webpack_require__(0));var Rx=__importStar(__webpack_require__(615));var operators_1=__webpack_require__(623);var render_complete_1=__webpack_require__(507);var resize_checker_1=__webpack_require__(879);var update_status_1=__webpack_require__(432);var VisualizationChart=function(_react_1$default$Comp){_inherits(VisualizationChart,_react_1$default$Comp);function VisualizationChart(props){var _this2=this;_classCallCheck(this,VisualizationChart);var _this=_possibleConstructorReturn(this,(VisualizationChart.__proto__||Object.getPrototypeOf(VisualizationChart)).call(this,props));_this.chartDiv=react_1.default.createRef();_this.containerDiv=react_1.default.createRef();_this.renderSubject=new Rx.Subject;var render$=_this.renderSubject.asObservable().pipe(operators_1.share());var success$=render$.pipe(operators_1.tap(function(){_this.chartDiv.current&&render_complete_1.dispatchRenderStart(_this.chartDiv.current)}),operators_1.filter(function(_ref){var vis=_ref.vis,visData=_ref.visData,container=_ref.container;return vis&&container&&(!vis.type.requiresSearch||visData)}),operators_1.debounceTime(100),operators_1.switchMap((_ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee(_ref2){var vis=_ref2.vis,visData=_ref2.visData,container=_ref2.container;var status;return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(_this.visualization){_context.next=2;break}throw new Error("Visualization implementation was not initialized on first render.");case 2:vis.size=[container.clientWidth,container.clientHeight];status=update_status_1.getUpdateStatus(vis.type.requiresUpdateStatus,_this,_this.props);return _context.abrupt("return",_this.visualization.render(visData,status));case 5:case"end":return _context.stop()}},_callee,_this2)})),function(_x){return _ref3.apply(this,arguments)})));var _ref3;var requestError$=render$.pipe(operators_1.filter(function(_ref4){var vis=_ref4.vis;return vis.requestError}));_this.renderSubscription=Rx.merge(success$,requestError$).subscribe(function(){null!==_this.chartDiv.current&&render_complete_1.dispatchRenderComplete(_this.chartDiv.current)});return _this}_createClass(VisualizationChart,[{key:"render",value:function render(){return react_1.default.createElement("div",{className:"vis-container",tabIndex:0,ref:this.containerDiv},react_1.default.createElement("span",{className:"kuiScreenReaderOnly"},this.props.vis.type.title," visualization, not yet accessible"),react_1.default.createElement("div",{"aria-hidden":!this.props.vis.type.isAccessible,className:"visualize-chart",ref:this.chartDiv}))}},{key:"componentDidMount",value:function componentDidMount(){var _this3=this;if(!this.chartDiv.current||!this.containerDiv.current)throw new Error("chartDiv and currentDiv reference should always be present.");var _props=this.props,vis=_props.vis,onInit=_props.onInit;var Visualization=vis.type.visualization;this.visualization=new Visualization(this.chartDiv.current,vis);if(onInit){var visLoaded=this.visualization.isLoaded&&this.visualization.isLoaded();Promise.resolve(visLoaded).then(onInit)}this.resizeChecker=new resize_checker_1.ResizeChecker(this.containerDiv.current);this.resizeChecker.on("resize",function(){return _this3.startRenderVisualization()});this.startRenderVisualization()}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.startRenderVisualization()}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.renderSubscription&&this.renderSubscription.unsubscribe();this.resizeChecker&&this.resizeChecker.destroy();this.visualization&&this.visualization.destroy()}},{key:"startRenderVisualization",value:function startRenderVisualization(){this.containerDiv.current&&this.chartDiv.current&&this.renderSubject.next({vis:this.props.vis,visData:this.props.visData,container:this.containerDiv.current})}}]);return VisualizationChart}(react_1.default.Component);exports.VisualizationChart=VisualizationChart},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var __importDefault=(void 0,function(mod){return mod&&mod.__esModule?mod:{default:mod}});Object.defineProperty(exports,"__esModule",{value:true});var react_1=__importDefault(__webpack_require__(0));var VisualizationNoResults=function(_react_1$default$Comp){_inherits(VisualizationNoResults,_react_1$default$Comp);function VisualizationNoResults(){_classCallCheck(this,VisualizationNoResults);return _possibleConstructorReturn(this,(VisualizationNoResults.__proto__||Object.getPrototypeOf(VisualizationNoResults)).apply(this,arguments))}_createClass(VisualizationNoResults,[{key:"render",value:function render(){return react_1.default.createElement("div",{className:"text-center visualize-error visualize-chart"},react_1.default.createElement("div",{className:"item top"}),react_1.default.createElement("div",{className:"item"},react_1.default.createElement("h2",{"aria-hidden":"true"},react_1.default.createElement("i",{"aria-hidden":"true",className:"fa fa-meh-o"})),react_1.default.createElement("h4",null,"No results found")),react_1.default.createElement("div",{className:"item bottom"}))}},{key:"componentDidMount",value:function componentDidMount(){this.props.onInit&&this.props.onInit()}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.props.onInit&&this.props.onInit()}}]);return VisualizationNoResults}(react_1.default.Component);exports.VisualizationNoResults=VisualizationNoResults},function(module,exports){},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:true});var lodash_1=__webpack_require__(1);var vis_request_handlers_1=__webpack_require__(907);var vis_response_handlers_1=__webpack_require__(655);var elasticsearch_errors_1=__webpack_require__(4531);var notify_1=__webpack_require__(9);function getHandler(from,type){if("function"===typeof type)return type;var handlerDesc=from.find(function(handler){return handler.name===type});if(!handlerDesc)throw new Error('Could not find handler "'+type+'".');return handlerDesc.handler}var VisualizeDataLoader=function(){function VisualizeDataLoader(vis,Private){_classCallCheck(this,VisualizeDataLoader);this.vis=vis;var _vis$type=vis.type,requestHandler=_vis$type.requestHandler,responseHandler=_vis$type.responseHandler;var requestHandlers=Private(vis_request_handlers_1.VisRequestHandlersRegistryProvider);var responseHandlers=Private(vis_response_handlers_1.VisResponseHandlersRegistryProvider);this.requestHandler=getHandler(requestHandlers,requestHandler);this.responseHandler=getHandler(responseHandlers,responseHandler)}_createClass(VisualizeDataLoader,[{key:"fetch",value:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(params){var requestHandlerResponse,canSkipResponseHandler;return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:this.vis.filters={timeRange:params.timeRange};_context.prev=1;_context.next=4;return this.requestHandler(this.vis,params);case 4:requestHandlerResponse=_context.sent;canSkipResponseHandler=this.previousRequestHandlerResponse&&this.previousRequestHandlerResponse===requestHandlerResponse&&this.previousVisState&&lodash_1.isEqual(this.previousVisState,this.vis.getState());this.previousVisState=this.vis.getState();this.previousRequestHandlerResponse=requestHandlerResponse;if(canSkipResponseHandler){_context.next=12;break}_context.next=11;return Promise.resolve(this.responseHandler(this.vis,requestHandlerResponse));case 11:this.visData=_context.sent;case 12:return _context.abrupt("return",this.visData);case 15:_context.prev=15;_context.t0=_context["catch"](1);params.searchSource.cancelQueued();this.vis.requestError=_context.t0;if(!elasticsearch_errors_1.isTermSizeZeroError(_context.t0)){_context.next=21;break}return _context.abrupt("return",notify_1.toastNotifications.addDanger("Your visualization ('"+this.vis.title+"') has an error: it has a term aggregation with a size of 0. Please set it to a number greater than 0 to resolve the error."));case 21:notify_1.toastNotifications.addDanger({title:"Error in visualization",text:_context.t0.message});case 22:case"end":return _context.stop()}},_callee,this,[[1,15]])}));function fetch(_x){return _ref.apply(this,arguments)}return fetch}()}]);return VisualizeDataLoader}();exports.VisualizeDataLoader=VisualizeDataLoader},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _elasticsearch_error=__webpack_require__(1532);Object.defineProperty(exports,"ElasticsearchError",{enumerable:true,get:function get(){return _elasticsearch_error.ElasticsearchError}});var _is_term_size_zero_error=__webpack_require__(4532);Object.defineProperty(exports,"isTermSizeZeroError",{enumerable:true,get:function get(){return _is_term_size_zero_error.isTermSizeZeroError}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isTermSizeZeroError=isTermSizeZeroError;var _elasticsearch_error=__webpack_require__(1532);function isTermSizeZeroError(error){return _elasticsearch_error.ElasticsearchError.hasRootCause(error,"size must be positive, got 0")}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _vis=__webpack_require__(4534);var _vis2=_interopRequireDefault(_vis);var _vis3=__webpack_require__(4560);var _vis4=_interopRequireDefault(_vis3);var _vis5=__webpack_require__(4564);var _vis6=_interopRequireDefault(_vis5);var _vis7=__webpack_require__(4566);var _vis8=_interopRequireDefault(_vis7);var _vis9=__webpack_require__(4568);var _vis10=_interopRequireDefault(_vis9);var _vis11=__webpack_require__(4572);var _vis12=_interopRequireDefault(_vis11);var _error=__webpack_require__(1543);var _error2=_interopRequireDefault(_error);var _no_data=__webpack_require__(4573);var _no_data2=_interopRequireDefault(_no_data);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var types={timeseries:_vis2.default,metric:_vis4.default,top_n:_vis6.default,table:_vis8.default,gauge:_vis10.default,markdown:_vis12.default};function Visualization(props){var visData=props.visData,model=props.model;var error=_lodash2.default.get(visData,model.id+".error");if(error)return _react2.default.createElement("div",{className:props.className},_react2.default.createElement(_error2.default,{error:error}));var path="table"===visData.type?"series":model.id+".series";var noData=0===_lodash2.default.get(visData,path,[]).length;if(noData)return _react2.default.createElement("div",{className:props.className},_react2.default.createElement(_no_data2.default,null));var component=types[model.type];if(component)return _react2.default.createElement(component,{dateFormat:props.dateFormat,reversed:props.reversed,backgroundColor:props.backgroundColor,model:props.model,onBrush:props.onBrush,onChange:props.onChange,onUiState:props.onUiState,uiState:props.uiState,visData:visData.type===model.type?visData:{}});return _react2.default.createElement("div",{className:props.className})}Visualization.defaultProps={className:"thor__visualization"};Visualization.propTypes={backgroundColor:_propTypes2.default.string,className:_propTypes2.default.string,model:_propTypes2.default.object,onBrush:_propTypes2.default.func,onChange:_propTypes2.default.func,onUiState:_propTypes2.default.func,uiState:_propTypes2.default.object,reversed:_propTypes2.default.bool,visData:_propTypes2.default.object,dateFormat:_propTypes2.default.string};exports.default=Visualization;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _tick_formatter=__webpack_require__(374);var _tick_formatter2=_interopRequireDefault(_tick_formatter);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _timeseries=__webpack_require__(4535);var _timeseries2=_interopRequireDefault(_timeseries);var _color=__webpack_require__(514);var _color2=_interopRequireDefault(_color);var _replace_vars=__webpack_require__(656);var _replace_vars2=_interopRequireDefault(_replace_vars);var _get_axis_label_string=__webpack_require__(4558);var _create_xaxis_formatter=__webpack_require__(4559);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function hasSeparateAxis(row){return row.separate_axis}var TimeseriesVisualization=function(_Component){_inherits(TimeseriesVisualization,_Component);function TimeseriesVisualization(props){_classCallCheck(this,TimeseriesVisualization);var _this=_possibleConstructorReturn(this,(TimeseriesVisualization.__proto__||Object.getPrototypeOf(TimeseriesVisualization)).call(this,props));_this.getInterval=function(){var _this$props=_this.props,visData=_this$props.visData,model=_this$props.model;var series=_lodash2.default.get(visData,model.id+".series",[]);return series.reduce(function(currentInterval,item){if(item.data.length>1){var seriesInterval=item.data[1][0]-item.data[0][0];if(!currentInterval||seriesInterval<currentInterval)return seriesInterval}return currentInterval},0)};_this.xaxisFormatter=function(val){var _this$props$visData=_this.props.visData,scaledDataFormat=_this$props$visData.scaledDataFormat,dateFormat=_this$props$visData.dateFormat;if(!scaledDataFormat||!dateFormat)return val;var formatter=(0,_create_xaxis_formatter.createXaxisFormatter)(_this.getInterval(),scaledDataFormat,dateFormat);return formatter(val)};return _this}_createClass(TimeseriesVisualization,[{key:"render",value:function render(){var _this2=this;var _props=this.props,backgroundColor=_props.backgroundColor,model=_props.model,visData=_props.visData;var series=_lodash2.default.get(visData,model.id+".series",[]);var annotations=void 0;model.annotations&&Array.isArray(model.annotations)&&(annotations=model.annotations.map(function(annotation){var data=_lodash2.default.get(visData,model.id+".annotations."+annotation.id,[]).map(function(item){return[item.key,item.docs]});return{id:annotation.id,color:annotation.color,icon:annotation.icon,series:data.map(function(s){return[s[0],s[1].map(function(doc){return(0,_replace_vars2.default)(annotation.template,null,doc)})]})}}));var seriesModel=model.series.map(function(s){return _lodash2.default.cloneDeep(s)});var firstSeries=seriesModel.find(function(s){return s.formatter&&!s.separate_axis});var formatter=(0,_tick_formatter2.default)(_lodash2.default.get(firstSeries,"formatter"),_lodash2.default.get(firstSeries,"value_template"));var mainAxis={position:model.axis_position,tickFormatter:formatter,axisFormatter:_lodash2.default.get(firstSeries,"formatter","number"),axisFormatterTemplate:_lodash2.default.get(firstSeries,"value_template")};model.axis_min&&(mainAxis.min=model.axis_min);model.axis_max&&(mainAxis.max=model.axis_max);if("log"===model.axis_scale){mainAxis.mode="log";mainAxis.transform=function(value){return value>0?Math.log(value)/Math.LN10:null};mainAxis.inverseTransform=function(value){return Math.pow(10,value)}}var yaxes=[mainAxis];seriesModel.forEach(function(s){series.filter(function(r){return _lodash2.default.startsWith(r.id,s.id)}).forEach(function(r){return r.tickFormatter=(0,_tick_formatter2.default)(s.formatter,s.value_template)});s.hide_in_legend&&series.filter(function(r){return _lodash2.default.startsWith(r.id,s.id)}).forEach(function(r){return delete r.label});"none"!==s.stacked&&series.filter(function(r){return _lodash2.default.startsWith(r.id,s.id)}).forEach(function(row){row.data=row.data.map(function(point){if(!point[1])return[point[0],0];return point})});if("percent"===s.stacked){s.separate_axis=true;s.axisFormatter="percent";s.axis_min=0;s.axis_max=1;s.axis_position=model.axis_position;var seriesData=series.filter(function(r){return _lodash2.default.startsWith(r.id,s.id)});var first=seriesData[0];first&&first.data.forEach(function(row,index){var rowSum=seriesData.reduce(function(acc,item){return item.data[index][1]+acc},0);seriesData.forEach(function(item){item.data[index][1]=rowSum&&item.data[index][1]/rowSum||0})})}});var interval=this.getInterval();var axisCount=1;seriesModel.some(hasSeparateAxis)&&seriesModel.forEach(function(row){if(row.separate_axis){axisCount++;var _formatter=(0,_tick_formatter2.default)(row.formatter,row.value_template);var yaxis={alignTicksWithAxis:1,position:row.axis_position,tickFormatter:_formatter,axisFormatter:row.axis_formatter,axisFormatterTemplate:row.value_template};null!=row.axis_min&&(yaxis.min=row.axis_min);null!=row.axis_max&&(yaxis.max=row.axis_max);yaxes.push(yaxis);series.filter(function(r){return _lodash2.default.startsWith(r.id,row.id)}).forEach(function(r){r.yaxis=axisCount})}});var params={dateFormat:this.props.dateFormat,crosshair:true,tickFormatter:formatter,legendPosition:model.legend_position||"right",series:series,annotations:annotations,yaxes:yaxes,reversed:this.props.reversed,showGrid:Boolean(model.show_grid),legend:Boolean(model.show_legend),xAxisFormatter:this.xaxisFormatter,onBrush:function onBrush(ranges){_this2.props.onBrush&&_this2.props.onBrush(ranges)}};interval&&(params.xaxisLabel=(0,_get_axis_label_string.getAxisLabelString)(interval));var style={};var panelBackgroundColor=model.background_color||backgroundColor;if(panelBackgroundColor){style.backgroundColor=panelBackgroundColor;params.reversed=(0,_color2.default)(panelBackgroundColor||backgroundColor).luminosity()<.45}return _react2.default.createElement("div",{className:"dashboard__visualization",style:style},_react2.default.createElement(_timeseries2.default,params))}}]);return TimeseriesVisualization}(_react.Component);TimeseriesVisualization.propTypes={backgroundColor:_propTypes2.default.string,className:_propTypes2.default.string,model:_propTypes2.default.object,onBrush:_propTypes2.default.func,onChange:_propTypes2.default.func,reversed:_propTypes2.default.bool,visData:_propTypes2.default.object,dateFormat:_propTypes2.default.string};exports.default=TimeseriesVisualization;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _get_last_value=__webpack_require__(325);var _get_last_value2=_interopRequireDefault(_get_last_value);var _timeseries_chart=__webpack_require__(4536);var _timeseries_chart2=_interopRequireDefault(_timeseries_chart);var _legend=__webpack_require__(4550);var _legend2=_interopRequireDefault(_legend);var _events=__webpack_require__(1535);var _events2=_interopRequireDefault(_events);var _reactcss=__webpack_require__(20);var _reactcss2=_interopRequireDefault(_reactcss);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var Timeseries=function(_Component){_inherits(Timeseries,_Component);function Timeseries(props){_classCallCheck(this,Timeseries);var _this=_possibleConstructorReturn(this,(Timeseries.__proto__||Object.getPrototypeOf(Timeseries)).call(this,props));var values=_this.getLastValues(props);_this.state={showLegend:null==props.legend||props.legend,values:values||{},show:_lodash2.default.keys(values)||[],ignoreLegendUpdates:false,ignoreVisibilityUpdates:false};_this.toggleFilter=_this.toggleFilter.bind(_this);_this.handleHideClick=_this.handleHideClick.bind(_this);_this.plothover=_this.plothover.bind(_this);return _this}_createClass(Timeseries,[{key:"filterLegend",value:function filterLegend(id){if(!_lodash2.default.has(this.state.values,id))return[];var notAllShown=_lodash2.default.keys(this.state.values).length!==this.state.show.length;var isCurrentlyShown=_lodash2.default.includes(this.state.show,id);var show=[];if(notAllShown&&isCurrentlyShown)this.setState({ignoreVisibilityUpdates:false,show:Object.keys(this.state.values)});else{show.push(id);this.setState({ignoreVisibilityUpdates:true,show:[id]})}return show}},{key:"toggleFilter",value:function toggleFilter(event,id){var show=this.filterLegend(id);_lodash2.default.isFunction(this.props.onFilter)&&this.props.onFilter(show);_events2.default.trigger("toggleFilter",id,this)}},{key:"getLastValues",value:function getLastValues(props){var values={};props.series.forEach(function(row){row.id||(row.id=row.label);values[row.id]=(0,_get_last_value2.default)(row.data)});return values}},{key:"updateLegend",value:function updateLegend(pos,item){var values={};pos?this.props.series.forEach(function(row){if(row.data&&Array.isArray(row.data))if(item&&row.data[item.dataIndex]&&row.data[item.dataIndex][0]===item.datapoint[0])values[row.id]=row.data[item.dataIndex][1];else{var closest=void 0;for(var i=0;i<row.data.length;i++){closest=i;if(row.data[i]&&pos.x<row.data[i][0])break}if(!row.data[closest])return values[row.id]=null;var _row$data$closest=_slicedToArray(row.data[closest],2),value=_row$data$closest[1];values[row.id]=null!=value&&value||null}}):_lodash2.default.assign(values,this.getLastValues(this.props));this.setState({values:values})}},{key:"componentWillReceiveProps",value:function componentWillReceiveProps(props){props.legend!==this.props.legend&&this.setState({showLegend:props.legend});if(!this.state.ignoreLegendUpdates){var values=this.getLastValues(props);var currentKeys=_lodash2.default.keys(this.state.values);var keys=_lodash2.default.keys(values);var diff=_lodash2.default.difference(keys,currentKeys);var nextState={values:values};diff.length&&!this.state.ignoreVisibilityUpdates&&(nextState.show=keys);this.setState(nextState)}}},{key:"plothover",value:function plothover(event,pos,item){this.updateLegend(pos,item)}},{key:"handleHideClick",value:function handleHideClick(){this.setState({showLegend:!this.state.showLegend})}},{key:"render",value:function render(){var className="rhythm_chart";this.props.reversed&&(className+=" reversed");var styles=(0,_reactcss2.default)({bottomLegend:{content:{flexDirection:"column"}}},{bottomLegend:"bottom"===this.props.legendPosition});return _react2.default.createElement("div",{className:className,"data-test-subj":"timeseriesChart"},_react2.default.createElement("div",{style:styles.content,className:"rhythm_chart__content"},_react2.default.createElement("div",{className:"rhythm_chart__visualization"},_react2.default.createElement(_timeseries_chart2.default,{dateFormat:this.props.dateFormat,crosshair:this.props.crosshair,onBrush:this.props.onBrush,plothover:this.plothover,reversed:this.props.reversed,series:this.props.series,annotations:this.props.annotations,show:this.state.show,showGrid:this.props.showGrid,tickFormatter:this.props.tickFormatter,options:this.props.options,xaxisLabel:this.props.xaxisLabel,yaxes:this.props.yaxes,xAxisFormatter:this.props.xAxisFormatter})),_react2.default.createElement(_legend2.default,{legendPosition:this.props.legendPosition,onClick:this.handleHideClick,onToggle:this.toggleFilter,series:this.props.series,showLegend:this.state.showLegend,seriesValues:this.state.values,seriesFilter:this.state.show,tickFormatter:this.props.tickFormatter})))}}]);return Timeseries}(_react.Component);Timeseries.defaultProps={legend:true,showGrid:true};Timeseries.propTypes={legend:_propTypes2.default.bool,legendPosition:_propTypes2.default.string,onFilter:_propTypes2.default.func,series:_propTypes2.default.array,annotations:_propTypes2.default.array,reversed:_propTypes2.default.bool,options:_propTypes2.default.object,tickFormatter:_propTypes2.default.func,showGrid:_propTypes2.default.bool,xaxisLabel:_propTypes2.default.string,dateFormat:_propTypes2.default.string};exports.default=Timeseries;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();exports.scaleUp=scaleUp;exports.scaleDown=scaleDown;var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _moment=__webpack_require__(10);var _moment2=_interopRequireDefault(_moment);var _reactcss=__webpack_require__(20);var _reactcss2=_interopRequireDefault(_reactcss);var _flot_chart=__webpack_require__(4537);var _flot_chart2=_interopRequireDefault(_flot_chart);var _annotation=__webpack_require__(4549);var _annotation2=_interopRequireDefault(_annotation);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function scaleUp(value){return window.devicePixelRatio*value}function scaleDown(value){return value/window.devicePixelRatio}var TimeseriesChart=function(_Component){_inherits(TimeseriesChart,_Component);function TimeseriesChart(props){_classCallCheck(this,TimeseriesChart);var _this=_possibleConstructorReturn(this,(TimeseriesChart.__proto__||Object.getPrototypeOf(TimeseriesChart)).call(this,props));_this.state={annotations:[],showTooltip:false,mouseHoverTimer:false};_this.handleMouseLeave=_this.handleMouseLeave.bind(_this);_this.handleMouseOver=_this.handleMouseOver.bind(_this);_this.renderAnnotations=_this.renderAnnotations.bind(_this);_this.handleDraw=_this.handleDraw.bind(_this);return _this}_createClass(TimeseriesChart,[{key:"calculateLeftRight",value:function calculateLeftRight(item,plot){var canvas=plot.getCanvas();var point=plot.pointOffset({x:item.datapoint[0],y:item.datapoint[1]});var edge=(scaleUp(point.left)+10)/canvas.width;var right=void 0;var left=void 0;if(edge>.5){right=scaleDown(canvas.width)-point.left;left=null}else{right=null;left=point.left}return[left,right]}},{key:"handleDraw",value:function handleDraw(plot){if(!plot||!this.props.annotations)return;var annotations=this.props.annotations.reduce(function(acc,anno){return acc.concat(anno.series.map(function(series){return{series:series,plot:plot,key:anno.id+"-"+series[0],icon:anno.icon,color:anno.color}}))},[]);this.setState({annotations:annotations})}},{key:"handleMouseOver",value:function handleMouseOver(e,pos,item,plot){"number"===typeof this.state.mouseHoverTimer&&window.clearTimeout(this.state.mouseHoverTimer);if(item){var plotOffset=plot.getPlotOffset();var point=plot.pointOffset({x:item.datapoint[0],y:item.datapoint[1]});var _calculateLeftRight=this.calculateLeftRight(item,plot),_calculateLeftRight2=_slicedToArray(_calculateLeftRight,2),left=_calculateLeftRight2[0],right=_calculateLeftRight2[1];var top=point.top;this.setState({showTooltip:true,item:item,left:left,right:right,top:top+10,bottom:plotOffset.bottom})}}},{key:"handleMouseLeave",value:function handleMouseLeave(){var _this2=this;this.state.mouseHoverTimer=window.setTimeout(function(){_this2.setState({showTooltip:false})},250)}},{key:"renderAnnotations",value:function renderAnnotations(annotation){return _react2.default.createElement(_annotation2.default,{series:annotation.series,plot:annotation.plot,key:annotation.key,icon:annotation.icon,reversed:this.props.reversed,color:annotation.color})}},{key:"render",value:function render(){var _this3=this;var _state=this.state,item=_state.item,right=_state.right,top=_state.top,left=_state.left;var series=this.props.series;var tooltip=void 0;var styles=(0,_reactcss2.default)({showTooltip:{tooltipContainer:{pointerEvents:"none",position:"absolute",top:top-28,left:left,right:right,zIndex:100,display:"flex",alignItems:"center",padding:"0 5px"},tooltip:{backgroundColor:this.props.reversed?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)",color:this.props.reversed?"black":"white",fontSize:"12px",padding:"4px 8px",borderRadius:"4px"},rightCaret:{display:right?"block":"none",color:this.props.reversed?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)"},leftCaret:{display:left?"block":"none",color:this.props.reversed?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)"},date:{color:this.props.reversed?"rgba(0,0,0,0.7)":"rgba(255,255,255,0.7)",fontSize:"12px",lineHeight:"12px"},items:{display:"flex",alignItems:"center"},text:{whiteSpace:"nowrap",fontSize:"12px",lineHeight:"12px",marginRight:5},icon:{marginRight:5},value:{fontSize:"12px",flexShrink:0,lineHeight:"12px",marginLeft:5}},hideTooltip:{tooltipContainer:{display:"none"}}},{showTooltip:this.state.showTooltip,hideTooltip:!this.state.showTooltip});if(item){var metric=series.find(function(r){return r.id===item.series.id});var formatter=metric&&metric.tickFormatter||this.props.tickFormatter||function(v){return v};var value=item.datapoint[2]?item.datapoint[1]-item.datapoint[2]:item.datapoint[1];tooltip=_react2.default.createElement("div",{style:styles.tooltipContainer},_react2.default.createElement("i",{className:"fa fa-caret-left",style:styles.leftCaret}),_react2.default.createElement("div",{style:styles.tooltip},_react2.default.createElement("div",{style:styles.items},_react2.default.createElement("div",{style:styles.icon},_react2.default.createElement("i",{className:"fa fa-circle",style:{color:item.series.color}})),_react2.default.createElement("div",{style:styles.text},item.series.label),_react2.default.createElement("div",{style:styles.value},formatter(value))),_react2.default.createElement("div",{style:styles.date},(0,_moment2.default)(item.datapoint[0]).format(this.props.dateFormat))),_react2.default.createElement("i",{className:"fa fa-caret-right",style:styles.rightCaret}))}var params={crosshair:this.props.crosshair,onPlotCreate:this.handlePlotCreate,onBrush:this.props.onBrush,onMouseLeave:this.handleMouseLeave,onMouseOver:this.handleMouseOver,onDraw:this.handleDraw,options:this.props.options,plothover:this.props.plothover,reversed:this.props.reversed,series:this.props.series,annotations:this.props.annotations,showGrid:this.props.showGrid,show:this.props.show,tickFormatter:this.props.tickFormatter,yaxes:this.props.yaxes,xAxisFormatter:this.props.xAxisFormatter};var annotations=this.state.annotations.map(this.renderAnnotations);var axisLabelClass="rhythm_chart__axis-label";this.props.reversed&&(axisLabelClass+=" reversed");return _react2.default.createElement("div",{ref:function ref(el){return _this3.container=el},className:"rhythm_chart__timeseries-container"},tooltip,annotations,_react2.default.createElement(_flot_chart2.default,params),_react2.default.createElement("div",{className:axisLabelClass},this.props.xaxisLabel))}}]);return TimeseriesChart}(_react.Component);TimeseriesChart.defaultProps={showGrid:true,dateFormat:"ll LTS"};TimeseriesChart.propTypes={crosshair:_propTypes2.default.bool,onBrush:_propTypes2.default.func,options:_propTypes2.default.object,plothover:_propTypes2.default.func,reversed:_propTypes2.default.bool,series:_propTypes2.default.array,annotations:_propTypes2.default.array,show:_propTypes2.default.array,tickFormatter:_propTypes2.default.func,yaxes:_propTypes2.default.array,showGrid:_propTypes2.default.bool,xaxisLabel:_propTypes2.default.string,dateFormat:_propTypes2.default.string};exports.default=TimeseriesChart},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _reactDom=__webpack_require__(15);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _flotCharts=__webpack_require__(4538);var _flotCharts2=_interopRequireDefault(_flotCharts);var _events=__webpack_require__(1535);var _events2=_interopRequireDefault(_events);var _resize=__webpack_require__(4546);var _resize2=_interopRequireDefault(_resize);var _calculate_bar_width=__webpack_require__(4547);var _calculate_bar_width2=_interopRequireDefault(_calculate_bar_width);var _colors=__webpack_require__(4548);var _colors2=_interopRequireDefault(_colors);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var FlotChart=function(_Component){_inherits(FlotChart,_Component);function FlotChart(props){_classCallCheck(this,FlotChart);var _this=_possibleConstructorReturn(this,(FlotChart.__proto__||Object.getPrototypeOf(FlotChart)).call(this,props));_this.handleResize=_this.handleResize.bind(_this);return _this}_createClass(FlotChart,[{key:"shouldComponentUpdate",value:function shouldComponentUpdate(props){var _this2=this;if(!this.plot)return true;if(props.reversed!==this.props.reversed)return true;if(props.showGrid!==this.props.showGrid)return true;if(props.yaxes&&this.props.yaxes){var valuesChanged=props.yaxes.some(function(axis,i){if(_this2.props.yaxes[i])return axis.position!==_this2.props.yaxes[i].position||axis.max!==_this2.props.yaxes[i].max||axis.min!==_this2.props.yaxes[i].min||axis.axisFormatter!==_this2.props.yaxes[i].axisFormatter||axis.mode!==_this2.props.yaxes[i].mode||axis.axisFormatterTemplate!==_this2.props.yaxes[i].axisFormatterTemplate});if(props.yaxes.length!==this.props.yaxes.length||valuesChanged)return true}return false}},{key:"shutdownChart",value:function shutdownChart(){if(!this.plot)return;(0,_flotCharts2.default)(this.target).unbind("plothover",this.props.plothover);this.props.onMouseOver&&(0,_flotCharts2.default)(this.target).on("plothover",this.handleMouseOver);this.props.onMouseLeave&&(0,_flotCharts2.default)(this.target).on("mouseleave",this.handleMouseLeave);this.props.onBrush&&(0,_flotCharts2.default)(this.target).off("plotselected",this.brushChart);this.plot.shutdown();if(this.props.crosshair){(0,_flotCharts2.default)(this.target).off("plothover",this.handlePlotover);_events2.default.off("thorPlotover",this.handleThorPlotover);_events2.default.off("thorPlotleave",this.handleThorPlotleave)}}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.shutdownChart()}},{key:"filterByShow",value:function filterByShow(show){if(show)return function(metric){return show.some(function(id){return _lodash2.default.startsWith(id,metric.id)})};return function(){return true}}},{key:"componentWillReceiveProps",value:function componentWillReceiveProps(newProps){if(this.plot){var series=newProps.series;var options=this.plot.getOptions();_lodash2.default.set(options,"series.bars.barWidth",(0,_calculate_bar_width2.default)(series));_lodash2.default.set(options,"xaxes[0].ticks",this.calculateTicks());this.plot.setData(this.calculateData(series,newProps.show));this.plot.setupGrid();this.plot.draw();_lodash2.default.isEqual(this.props.series,series)||this.handleDraw(this.plot)}else this.renderChart()}},{key:"componentDidMount",value:function componentDidMount(){this.renderChart()}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.shutdownChart();this.renderChart()}},{key:"calculateData",value:function calculateData(data,show){return(0,_lodash2.default)(data).filter(this.filterByShow(show)).map(function(set){if(_lodash2.default.isPlainObject(set))return set;return{color:"#990000",data:set}}).reverse().value()}},{key:"handleDraw",value:function handleDraw(plot){this.props.onDraw&&this.props.onDraw(plot)}},{key:"getOptions",value:function getOptions(props){var yaxes=props.yaxes||[{}];var lineColor=props.reversed?_colors2.default.lineColorReversed:_colors2.default.lineColor;var textColor=props.reversed?_colors2.default.textColorReversed:_colors2.default.textColor;var borderWidth={bottom:1,top:0,left:0,right:0};yaxes.some(function(y){return"left"===y.position})&&(borderWidth.left=1);yaxes.some(function(y){return"right"===y.position})&&(borderWidth.right=1);if(props.showGrid){borderWidth.top=1;borderWidth.left=1;borderWidth.right=1}var opts={legend:{show:false},yaxes:yaxes.map(function(axis){axis.tickLength=props.showGrid?null:0;return axis}),yaxis:{color:lineColor,font:{color:textColor},tickFormatter:props.tickFormatter},xaxis:{tickLength:props.showGrid?null:0,color:lineColor,timezone:"browser",mode:"time",font:{color:textColor},ticks:this.calculateTicks()},series:{shadowSize:0},grid:{margin:0,borderWidth:borderWidth,borderColor:lineColor,hoverable:true,mouseActiveRadius:200}};props.crosshair&&_lodash2.default.set(opts,"crosshair",{mode:"x",color:props.reversed?"#FFF":"#000",lineWidth:1});props.onBrush&&_lodash2.default.set(opts,"selection",{mode:"x",color:textColor});props.xAxisFormatter&&_lodash2.default.set(opts,"xaxis.tickFormatter",props.xAxisFormatter);_lodash2.default.set(opts,"series.bars.barWidth",(0,_calculate_bar_width2.default)(props.series));return _lodash2.default.assign(opts,props.options)}},{key:"calculateTicks",value:function calculateTicks(){var sample=this.props.xAxisFormatter(new Date);var tickLetterWidth=7;var tickPadding=45;var ticks=Math.floor(this.target.clientWidth/(sample.length*tickLetterWidth+tickPadding));return ticks}},{key:"handleResize",value:function handleResize(){var resize=(0,_reactDom.findDOMNode)(this.resize);if(!this.rendered){this.renderChart();return}if(resize&&resize.clientHeight>0&&resize.clientHeight>0){if(!this.plot)return;var options=this.plot.getOptions();_lodash2.default.set(options,"xaxes[0].ticks",this.calculateTicks());this.plot.resize();this.plot.setupGrid();this.plot.draw();this.handleDraw(this.plot)}}},{key:"renderChart",value:function renderChart(){var _this3=this;var resize=(0,_reactDom.findDOMNode)(this.resize);if(resize.clientWidth>0&&resize.clientHeight>0){this.rendered=true;var series=this.props.series;var data=this.calculateData(series,this.props.show);this.plot=_flotCharts2.default.plot(this.target,data,this.getOptions(this.props));this.handleDraw(this.plot);_lodash2.default.defer(function(){return _this3.handleResize()});this.handleMouseOver=function(){var _props;for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];_this3.props.onMouseOver&&(_props=_this3.props).onMouseOver.apply(_props,args.concat([_this3.plot]))};this.handleMouseLeave=function(){var _props2;for(var _len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];_this3.props.onMouseLeave&&(_props2=_this3.props).onMouseLeave.apply(_props2,args.concat([_this3.plot]))};(0,_flotCharts2.default)(this.target).on("plothover",this.handleMouseOver);(0,_flotCharts2.default)(this.target).on("mouseleave",this.handleMouseLeave);if(this.props.crosshair){this.handleThorPlotover=function(e,pos,item,originalPlot){if(_this3.plot!==originalPlot){_this3.plot.setCrosshair({x:_lodash2.default.get(pos,"x")});_this3.props.plothover(e,pos,item)}};this.handlePlotover=function(e,pos,item){return _events2.default.trigger("thorPlotover",[pos,item,_this3.plot])};this.handlePlotleave=function(){return _events2.default.trigger("thorPlotleave")};this.handleThorPlotleave=function(e){_this3.plot&&_this3.plot.clearCrosshair();_this3.props.plothover&&_this3.props.plothover(e)};(0,_flotCharts2.default)(this.target).on("plothover",this.handlePlotover);(0,_flotCharts2.default)(this.target).on("mouseleave",this.handlePlotleave);_events2.default.on("thorPlotover",this.handleThorPlotover);_events2.default.on("thorPlotleave",this.handleThorPlotleave)}_lodash2.default.isFunction(this.props.plothover)&&(0,_flotCharts2.default)(this.target).bind("plothover",this.props.plothover);(0,_flotCharts2.default)(this.target).on("mouseleave",function(){_events2.default.trigger("thorPlotleave")});if(_lodash2.default.isFunction(this.props.onBrush)){this.brushChart=function(e,ranges){_this3.props.onBrush(ranges);_this3.plot.clearSelection()};(0,_flotCharts2.default)(this.target).on("plotselected",this.brushChart)}}}},{key:"render",value:function render(){var _this4=this;return _react2.default.createElement(_resize2.default,{onResize:this.handleResize,ref:function ref(el){return _this4.resize=el},className:"rhythm_chart__timeseries-container"},_react2.default.createElement("div",{ref:function ref(el){return _this4.target=el},className:"rhythm_chart__timeseries-container"}))}}]);return FlotChart}(_react.Component);FlotChart.defaultProps={showGrid:true};FlotChart.propTypes={crosshair:_propTypes2.default.bool,onBrush:_propTypes2.default.func,onPlotCreate:_propTypes2.default.func,onMouseOver:_propTypes2.default.func,onMouseLeave:_propTypes2.default.func,options:_propTypes2.default.object,plothover:_propTypes2.default.func,reversed:_propTypes2.default.bool,series:_propTypes2.default.array,show:_propTypes2.default.array,tickFormatter:_propTypes2.default.func,showGrid:_propTypes2.default.bool,yaxes:_propTypes2.default.array};exports.default=FlotChart;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";var _jquery=__webpack_require__(13);var _jquery2=_interopRequireDefault(_jquery);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}window&&(window.jQuery=_jquery2.default);__webpack_require__(1488);__webpack_require__(1489);__webpack_require__(4539);__webpack_require__(4540);__webpack_require__(1490);__webpack_require__(1491);__webpack_require__(4541);__webpack_require__(4542);__webpack_require__(4543);__webpack_require__(4544);__webpack_require__(4545);module.exports=_jquery2.default},function(module,exports,__webpack_require__){"use strict";var _typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"===typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};(function($){var options={canvas:true};var render,getTextInfo,addText;var hasOwnProperty=Object.prototype.hasOwnProperty;function init(plot,classes){var Canvas=classes.Canvas;null==render&&(getTextInfo=Canvas.prototype.getTextInfo,addText=Canvas.prototype.addText,render=Canvas.prototype.render);Canvas.prototype.render=function(){if(!plot.getOptions().canvas)return render.call(this);var context=this.context,cache=this._textCache;context.save();context.textBaseline="middle";for(var layerKey in cache)if(hasOwnProperty.call(cache,layerKey)){var layerCache=cache[layerKey];for(var styleKey in layerCache)if(hasOwnProperty.call(layerCache,styleKey)){var styleCache=layerCache[styleKey],updateStyles=true;for(var key in styleCache)if(hasOwnProperty.call(styleCache,key)){var info=styleCache[key],positions=info.positions,lines=info.lines;if(updateStyles){context.fillStyle=info.font.color;context.font=info.font.definition;updateStyles=false}for(var position,i=0;position=positions[i];i++)if(position.active)for(var line,j=0;line=position.lines[j];j++)context.fillText(lines[j].text,line[0],line[1]);else positions.splice(i--,1);0==positions.length&&delete styleCache[key]}}}context.restore()};Canvas.prototype.getTextInfo=function(layer,text,font,angle,width){if(!plot.getOptions().canvas)return getTextInfo.call(this,layer,text,font,angle,width);var textStyle,layerCache,styleCache,info;text=""+text;textStyle="object"===("undefined"===typeof font?"undefined":_typeof(font))?font.style+" "+font.variant+" "+font.weight+" "+font.size+"px "+font.family:font;layerCache=this._textCache[layer];null==layerCache&&(layerCache=this._textCache[layer]={});styleCache=layerCache[textStyle];null==styleCache&&(styleCache=layerCache[textStyle]={});info=styleCache[text];if(null==info){var context=this.context;if("object"!==("undefined"===typeof font?"undefined":_typeof(font))){var element=$("<div>&nbsp;</div>").css("position","absolute").addClass("string"===typeof font?font:null).appendTo(this.getTextLayer(layer));font={lineHeight:element.height(),style:element.css("font-style"),variant:element.css("font-variant"),weight:element.css("font-weight"),family:element.css("font-family"),color:element.css("color")};font.size=element.css("line-height",1).height();element.remove()}textStyle=font.style+" "+font.variant+" "+font.weight+" "+font.size+"px "+font.family;info=styleCache[text]={width:0,height:0,positions:[],lines:[],font:{definition:textStyle,color:font.color}};context.save();context.font=textStyle;var lines=(text+"").replace(/<br ?\/?>|\r\n|\r/g,"\n").split("\n");for(var i=0;i<lines.length;++i){var lineText=lines[i],measured=context.measureText(lineText);info.width=Math.max(measured.width,info.width);info.height+=font.lineHeight;info.lines.push({text:lineText,width:measured.width,height:font.lineHeight})}context.restore()}return info};Canvas.prototype.addText=function(layer,x,y,text,font,angle,width,halign,valign){if(!plot.getOptions().canvas)return addText.call(this,layer,x,y,text,font,angle,width,halign,valign);var info=this.getTextInfo(layer,text,font,angle,width),positions=info.positions,lines=info.lines;y+=info.height/lines.length/2;y="middle"==valign?Math.round(y-info.height/2):"bottom"==valign?Math.round(y-info.height):Math.round(y);!(window.opera&&window.opera.version().split(".")[0]<12)||(y-=2);for(var position,i=0;position=positions[i];i++)if(position.x==x&&position.y==y){position.active=true;return}position={active:true,lines:[],x:x,y:y};positions.push(position);var line;for(i=0;line=lines[i];i++){"center"==halign?position.lines.push([Math.round(x-line.width/2),y]):"right"==halign?position.lines.push([Math.round(x-line.width),y]):position.lines.push([Math.round(x),y]);y+=line.height}}}$.plot.plugins.push({init:init,options:options,name:"canvas",version:"1.0"})})(jQuery)},function(module,exports,__webpack_require__){"use strict";(function($){function processRawData(plot,series,datapoints){var handlers={square:function square(ctx,x,y,radius,shadow){var size=radius*Math.sqrt(Math.PI)/2;ctx.rect(x-size,y-size,size+size,size+size)},diamond:function diamond(ctx,x,y,radius,shadow){var size=radius*Math.sqrt(Math.PI/2);ctx.moveTo(x-size,y);ctx.lineTo(x,y-size);ctx.lineTo(x+size,y);ctx.lineTo(x,y+size);ctx.lineTo(x-size,y)},triangle:function triangle(ctx,x,y,radius,shadow){var size=radius*Math.sqrt(2*Math.PI/Math.sin(Math.PI/3));var height=size*Math.sin(Math.PI/3);ctx.moveTo(x-size/2,y+height/2);ctx.lineTo(x+size/2,y+height/2);if(!shadow){ctx.lineTo(x,y-height/2);ctx.lineTo(x-size/2,y+height/2)}},cross:function cross(ctx,x,y,radius,shadow){var size=radius*Math.sqrt(Math.PI)/2;ctx.moveTo(x-size,y-size);ctx.lineTo(x+size,y+size);ctx.moveTo(x-size,y+size);ctx.lineTo(x+size,y-size)}};var s=series.points.symbol;handlers[s]&&(series.points.symbol=handlers[s])}function init(plot){plot.hooks.processDatapoints.push(processRawData)}$.plot.plugins.push({init:init,name:"symbols",version:"1.0"})})(jQuery)},function(module,exports,__webpack_require__){"use strict";(function($){var REDRAW_ATTEMPTS=10;var REDRAW_SHRINK=.95;function init(plot){var canvas=null,target=null,options=null,maxRadius=null,centerLeft=null,centerTop=null,processed=false,ctx=null;var highlights=[];plot.hooks.processOptions.push(function(plot,options){if(options.series.pie.show){options.grid.show=false;"auto"==options.series.pie.label.show&&(options.legend.show?options.series.pie.label.show=false:options.series.pie.label.show=true);"auto"==options.series.pie.radius&&(options.series.pie.label.show?options.series.pie.radius=.75:options.series.pie.radius=1);options.series.pie.tilt>1?options.series.pie.tilt=1:options.series.pie.tilt<0&&(options.series.pie.tilt=0)}});plot.hooks.bindEvents.push(function(plot,eventHolder){var options=plot.getOptions();if(options.series.pie.show){options.grid.hoverable&&eventHolder.unbind("mousemove").mousemove(onMouseMove);options.grid.clickable&&eventHolder.unbind("click").click(onClick)}});plot.hooks.processDatapoints.push(function(plot,series,data,datapoints){var options=plot.getOptions();options.series.pie.show&&processDatapoints(plot,series,data,datapoints)});plot.hooks.drawOverlay.push(function(plot,octx){var options=plot.getOptions();options.series.pie.show&&drawOverlay(plot,octx)});plot.hooks.draw.push(function(plot,newCtx){var options=plot.getOptions();options.series.pie.show&&draw(plot,newCtx)});function processDatapoints(plot,series,datapoints){if(!processed){processed=true;canvas=plot.getCanvas();target=$(canvas).parent();options=plot.getOptions();plot.setData(combine(plot.getData()))}}function combine(data){var total=0,combined=0,numCombined=0,color=options.series.pie.combine.color,newdata=[];for(var i=0;i<data.length;++i){var value=data[i].data;$.isArray(value)&&1==value.length&&(value=value[0]);$.isArray(value)?!isNaN(parseFloat(value[1]))&&isFinite(value[1])?value[1]=+value[1]:value[1]=0:value=!isNaN(parseFloat(value))&&isFinite(value)?[1,+value]:[1,0];data[i].data=[value]}for(i=0;i<data.length;++i)total+=data[i].data[0][1];for(i=0;i<data.length;++i){value=data[i].data[0][1];if(value/total<=options.series.pie.combine.threshold){combined+=value;numCombined++;color||(color=data[i].color)}}for(i=0;i<data.length;++i){value=data[i].data[0][1];(numCombined<2||value/total>options.series.pie.combine.threshold)&&newdata.push($.extend(data[i],{data:[[1,value]],color:data[i].color,label:data[i].label,angle:value*Math.PI*2/total,percent:value/(total/100)}))}numCombined>1&&newdata.push({data:[[1,combined]],color:color,label:options.series.pie.combine.label,angle:combined*Math.PI*2/total,percent:combined/(total/100)});return newdata}function draw(plot,newCtx){if(!target)return;var canvasWidth=plot.getPlaceholder().width(),canvasHeight=plot.getPlaceholder().height(),legendWidth=target.children().filter(".legend").children().width()||0;ctx=newCtx;processed=false;maxRadius=Math.min(canvasWidth,canvasHeight/options.series.pie.tilt)/2;centerTop=canvasHeight/2+options.series.pie.offset.top;centerLeft=canvasWidth/2;if("auto"==options.series.pie.offset.left){options.legend.position.match("w")?centerLeft+=legendWidth/2:centerLeft-=legendWidth/2;centerLeft<maxRadius?centerLeft=maxRadius:centerLeft>canvasWidth-maxRadius&&(centerLeft=canvasWidth-maxRadius)}else centerLeft+=options.series.pie.offset.left;var slices=plot.getData(),attempts=0;do{attempts>0&&(maxRadius*=REDRAW_SHRINK);attempts+=1;clear();options.series.pie.tilt<=.8&&drawShadow()}while(!drawPie()&&attempts<REDRAW_ATTEMPTS);if(attempts>=REDRAW_ATTEMPTS){clear();target.prepend("<div class='error'>Could not draw pie with labels contained inside canvas</div>")}if(plot.setSeries&&plot.insertLegend){plot.setSeries(slices);plot.insertLegend()}function clear(){ctx.clearRect(0,0,canvasWidth,canvasHeight);target.children().filter(".pieLabel, .pieLabelBackground").remove()}function drawShadow(){var shadowLeft=options.series.pie.shadow.left;var shadowTop=options.series.pie.shadow.top;var edge=10;var alpha=options.series.pie.shadow.alpha;var radius=options.series.pie.radius>1?options.series.pie.radius:maxRadius*options.series.pie.radius;if(radius>=canvasWidth/2-shadowLeft||radius*options.series.pie.tilt>=canvasHeight/2-shadowTop||radius<=edge)return;ctx.save();ctx.translate(shadowLeft,shadowTop);ctx.globalAlpha=alpha;ctx.fillStyle="#000";ctx.translate(centerLeft,centerTop);ctx.scale(1,options.series.pie.tilt);for(var i=1;i<=edge;i++){ctx.beginPath();ctx.arc(0,0,radius,0,2*Math.PI,false);ctx.fill();radius-=i}ctx.restore()}function drawPie(){var startAngle=Math.PI*options.series.pie.startAngle;var radius=options.series.pie.radius>1?options.series.pie.radius:maxRadius*options.series.pie.radius;ctx.save();ctx.translate(centerLeft,centerTop);ctx.scale(1,options.series.pie.tilt);ctx.save();var currentAngle=startAngle;for(var i=0;i<slices.length;++i){slices[i].startAngle=currentAngle;drawSlice(slices[i].angle,slices[i].color,true)}ctx.restore();if(options.series.pie.stroke.width>0){ctx.save();ctx.lineWidth=options.series.pie.stroke.width;currentAngle=startAngle;for(i=0;i<slices.length;++i)drawSlice(slices[i].angle,options.series.pie.stroke.color,false);ctx.restore()}drawDonutHole(ctx);ctx.restore();return!options.series.pie.label.show||drawLabels();function drawSlice(angle,color,fill){if(angle<=0||isNaN(angle))return;if(fill)ctx.fillStyle=color;else{ctx.strokeStyle=color;ctx.lineJoin="round"}ctx.beginPath();Math.abs(angle-2*Math.PI)>1e-9&&ctx.moveTo(0,0);ctx.arc(0,0,radius,currentAngle,currentAngle+angle/2,false);ctx.arc(0,0,radius,currentAngle+angle/2,currentAngle+angle,false);ctx.closePath();currentAngle+=angle;fill?ctx.fill():ctx.stroke()}function drawLabels(){var currentAngle=startAngle;var radius=options.series.pie.label.radius>1?options.series.pie.label.radius:maxRadius*options.series.pie.label.radius;for(var i=0;i<slices.length;++i){if(slices[i].percent>=100*options.series.pie.label.threshold&&!drawLabel(slices[i],currentAngle,i))return false;currentAngle+=slices[i].angle}return true;function drawLabel(slice,startAngle,index){if(0==slice.data[0][1])return true;var text,lf=options.legend.labelFormatter,plf=options.series.pie.label.formatter;text=lf?lf(slice.label,slice):slice.label;plf&&(text=plf(text,slice));var halfAngle=(startAngle+slice.angle+startAngle)/2;var x=centerLeft+Math.round(Math.cos(halfAngle)*radius);var y=centerTop+Math.round(Math.sin(halfAngle)*radius)*options.series.pie.tilt;var html="<span class='pieLabel' id='pieLabel"+index+"' style='position:absolute;top:"+y+"px;left:"+x+"px;'>"+text+"</span>";target.append(html);var label=target.children("#pieLabel"+index);var labelTop=y-label.height()/2;var labelLeft=x-label.width()/2;label.css("top",labelTop);label.css("left",labelLeft);if(0-labelTop>0||0-labelLeft>0||canvasHeight-(labelTop+label.height())<0||canvasWidth-(labelLeft+label.width())<0)return false;if(0!=options.series.pie.label.background.opacity){var c=options.series.pie.label.background.color;null==c&&(c=slice.color);var pos="top:"+labelTop+"px;left:"+labelLeft+"px;";$("<div class='pieLabelBackground' style='position:absolute;width:"+label.width()+"px;height:"+label.height()+"px;"+pos+"background-color:"+c+";'></div>").css("opacity",options.series.pie.label.background.opacity).insertBefore(label)}return true}}}}function drawDonutHole(layer){if(options.series.pie.innerRadius>0){layer.save();var innerRadius=options.series.pie.innerRadius>1?options.series.pie.innerRadius:maxRadius*options.series.pie.innerRadius;layer.globalCompositeOperation="destination-out";layer.beginPath();layer.fillStyle=options.series.pie.stroke.color;layer.arc(0,0,innerRadius,0,2*Math.PI,false);layer.fill();layer.closePath();layer.restore();layer.save();layer.beginPath();layer.strokeStyle=options.series.pie.stroke.color;layer.arc(0,0,innerRadius,0,2*Math.PI,false);layer.stroke();layer.closePath();layer.restore()}}function isPointInPoly(poly,pt){for(var c=false,i=-1,l=poly.length,j=l-1;++i<l;j=i)(poly[i][1]<=pt[1]&&pt[1]<poly[j][1]||poly[j][1]<=pt[1]&&pt[1]<poly[i][1])&&pt[0]<(poly[j][0]-poly[i][0])*(pt[1]-poly[i][1])/(poly[j][1]-poly[i][1])+poly[i][0]&&(c=!c);return c}function findNearbySlice(mouseX,mouseY){var x,y,slices=plot.getData(),options=plot.getOptions(),radius=options.series.pie.radius>1?options.series.pie.radius:maxRadius*options.series.pie.radius;for(var i=0;i<slices.length;++i){var s=slices[i];if(s.pie.show){ctx.save();ctx.beginPath();ctx.moveTo(0,0);ctx.arc(0,0,radius,s.startAngle,s.startAngle+s.angle/2,false);ctx.arc(0,0,radius,s.startAngle+s.angle/2,s.startAngle+s.angle,false);ctx.closePath();x=mouseX-centerLeft;y=mouseY-centerTop;if(ctx.isPointInPath){if(ctx.isPointInPath(mouseX-centerLeft,mouseY-centerTop)){ctx.restore();return{datapoint:[s.percent,s.data],dataIndex:0,series:s,seriesIndex:i}}}else{var p1X=radius*Math.cos(s.startAngle),p1Y=radius*Math.sin(s.startAngle),p2X=radius*Math.cos(s.startAngle+s.angle/4),p2Y=radius*Math.sin(s.startAngle+s.angle/4),p3X=radius*Math.cos(s.startAngle+s.angle/2),p3Y=radius*Math.sin(s.startAngle+s.angle/2),p4X=radius*Math.cos(s.startAngle+s.angle/1.5),p4Y=radius*Math.sin(s.startAngle+s.angle/1.5),p5X=radius*Math.cos(s.startAngle+s.angle),p5Y=radius*Math.sin(s.startAngle+s.angle),arrPoly=[[0,0],[p1X,p1Y],[p2X,p2Y],[p3X,p3Y],[p4X,p4Y],[p5X,p5Y]],arrPoint=[x,y];if(isPointInPoly(arrPoly,arrPoint)){ctx.restore();return{datapoint:[s.percent,s.data],dataIndex:0,series:s,seriesIndex:i}}}ctx.restore()}}return null}function onMouseMove(e){triggerClickHoverEvent("plothover",e)}function onClick(e){triggerClickHoverEvent("plotclick",e)}function triggerClickHoverEvent(eventname,e){var offset=plot.offset();var canvasX=parseInt(e.pageX-offset.left);var canvasY=parseInt(e.pageY-offset.top);var item=findNearbySlice(canvasX,canvasY);if(options.grid.autoHighlight)for(var i=0;i<highlights.length;++i){var h=highlights[i];h.auto!=eventname||item&&h.series==item.series||unhighlight(h.series)}item&&highlight(item.series,eventname);var pos={pageX:e.pageX,pageY:e.pageY};target.trigger(eventname,[pos,item])}function highlight(s,auto){var i=indexOfHighlight(s);if(-1==i){highlights.push({series:s,auto:auto});plot.triggerRedrawOverlay()}else auto||(highlights[i].auto=false)}function unhighlight(s){if(null==s){highlights=[];plot.triggerRedrawOverlay()}var i=indexOfHighlight(s);if(-1!=i){highlights.splice(i,1);plot.triggerRedrawOverlay()}}function indexOfHighlight(s){for(var i=0;i<highlights.length;++i){var h=highlights[i];if(h.series==s)return i}return-1}function drawOverlay(plot,octx){var options=plot.getOptions();var radius=options.series.pie.radius>1?options.series.pie.radius:maxRadius*options.series.pie.radius;octx.save();octx.translate(centerLeft,centerTop);octx.scale(1,options.series.pie.tilt);for(var i=0;i<highlights.length;++i)drawHighlight(highlights[i].series);drawDonutHole(octx);octx.restore();function drawHighlight(series){if(series.angle<=0||isNaN(series.angle))return;octx.fillStyle="rgba(255, 255, 255, "+options.series.pie.highlight.opacity+")";octx.beginPath();Math.abs(series.angle-2*Math.PI)>1e-9&&octx.moveTo(0,0);octx.arc(0,0,radius,series.startAngle,series.startAngle+series.angle/2,false);octx.arc(0,0,radius,series.startAngle+series.angle/2,series.startAngle+series.angle,false);octx.closePath();octx.fill()}}}var options={series:{pie:{show:false,radius:"auto",innerRadius:0,startAngle:1.5,tilt:1,shadow:{left:5,top:15,alpha:.02},offset:{top:0,left:"auto"},stroke:{color:"#fff",width:1},label:{show:"auto",formatter:function formatter(label,slice){return"<div style='font-size:x-small;text-align:center;padding:2px;color:"+slice.color+";'>"+label+"<br/>"+Math.round(slice.percent)+"%</div>"},radius:1,background:{color:null,opacity:0},threshold:0},combine:{threshold:-1,color:null,label:"Other"},highlight:{opacity:.5}}}};$.plot.plugins.push({init:init,options:options,name:"pie",version:"1.1"})})(jQuery)},function(module,exports,__webpack_require__){"use strict";(function($){var options={series:{stack:null}};function init(plot){function findMatchingSeries(s,allseries){var res=null;for(var i=0;i<allseries.length;++i){if(s==allseries[i])break;allseries[i].stack==s.stack&&(res=allseries[i])}return res}function stackData(plot,s,datapoints){if(null==s.stack||false===s.stack)return;var other=findMatchingSeries(s,plot.getData());if(!other)return;var px,py,intery,qx,qy,bottom,l,m,ps=datapoints.pointsize,points=datapoints.points,otherps=other.datapoints.pointsize,otherpoints=other.datapoints.points,newpoints=[],withlines=s.lines.show,horizontal=s.bars.horizontal,withbottom=ps>2&&(horizontal?datapoints.format[2].x:datapoints.format[2].y),withsteps=withlines&&s.lines.steps,fromgap=true,keyOffset=horizontal?1:0,accumulateOffset=horizontal?0:1,i=0,j=0;while(true){if(i>=points.length)break;l=newpoints.length;if(null==points[i]){for(m=0;m<ps;++m)newpoints.push(points[i+m]);i+=ps}else if(j>=otherpoints.length){if(!withlines)for(m=0;m<ps;++m)newpoints.push(points[i+m]);i+=ps}else if(null==otherpoints[j]){for(m=0;m<ps;++m)newpoints.push(null);fromgap=true;j+=otherps}else{px=points[i+keyOffset];py=points[i+accumulateOffset];qx=otherpoints[j+keyOffset];qy=otherpoints[j+accumulateOffset];bottom=0;if(px==qx){for(m=0;m<ps;++m)newpoints.push(points[i+m]);newpoints[l+accumulateOffset]+=qy;bottom=qy;i+=ps;j+=otherps}else if(px>qx){if(withlines&&i>0&&null!=points[i-ps]){intery=py+(points[i-ps+accumulateOffset]-py)*(qx-px)/(points[i-ps+keyOffset]-px);newpoints.push(qx);newpoints.push(intery+qy);for(m=2;m<ps;++m)newpoints.push(points[i+m]);bottom=qy}j+=otherps}else{if(fromgap&&withlines){i+=ps;continue}for(m=0;m<ps;++m)newpoints.push(points[i+m]);withlines&&j>0&&null!=otherpoints[j-otherps]&&(bottom=qy+(otherpoints[j-otherps+accumulateOffset]-qy)*(px-qx)/(otherpoints[j-otherps+keyOffset]-qx));newpoints[l+accumulateOffset]+=bottom;i+=ps}fromgap=false;l!=newpoints.length&&withbottom&&(newpoints[l+2]+=bottom)}if(withsteps&&l!=newpoints.length&&l>0&&null!=newpoints[l]&&newpoints[l]!=newpoints[l-ps]&&newpoints[l+1]!=newpoints[l-ps+1]){for(m=0;m<ps;++m)newpoints[l+ps+m]=newpoints[l+m];newpoints[l+1]=newpoints[l-ps+1]}}datapoints.points=newpoints}plot.hooks.processDatapoints.push(stackData)}$.plot.plugins.push({init:init,options:options,name:"stack",version:"1.2"})})(jQuery)},function(module,exports,__webpack_require__){"use strict";(function($){var options={series:{threshold:null}};function init(plot){function thresholdData(plot,s,datapoints,below,color){var i,x,y,p,prevp,ps=datapoints.pointsize,thresholded=$.extend({},s);thresholded.datapoints={points:[],pointsize:ps,format:datapoints.format};thresholded.label=null;thresholded.color=color;thresholded.threshold=null;thresholded.originSeries=s;thresholded.data=[];var origpoints=datapoints.points,addCrossingPoints=s.lines.show;var threspoints=[];var newpoints=[];var m;for(i=0;i<origpoints.length;i+=ps){x=origpoints[i];y=origpoints[i+1];prevp=p;p=y<below?threspoints:newpoints;if(addCrossingPoints&&prevp!=p&&null!=x&&i>0&&null!=origpoints[i-ps]){var interx=x+(below-y)*(x-origpoints[i-ps])/(y-origpoints[i-ps+1]);prevp.push(interx);prevp.push(below);for(m=2;m<ps;++m)prevp.push(origpoints[i+m]);p.push(null);p.push(null);for(m=2;m<ps;++m)p.push(origpoints[i+m]);p.push(interx);p.push(below);for(m=2;m<ps;++m)p.push(origpoints[i+m])}p.push(x);p.push(y);for(m=2;m<ps;++m)p.push(origpoints[i+m])}datapoints.points=newpoints;thresholded.datapoints.points=threspoints;if(thresholded.datapoints.points.length>0){var origIndex=$.inArray(s,plot.getData());plot.getData().splice(origIndex+1,0,thresholded)}}function processThresholds(plot,s,datapoints){if(!s.threshold)return;if(s.threshold instanceof Array){s.threshold.sort(function(a,b){return a.below-b.below});$(s.threshold).each(function(i,th){thresholdData(plot,s,datapoints,th.below,th.color)})}else thresholdData(plot,s,datapoints,s.threshold.below,s.threshold.color)}plot.hooks.processDatapoints.push(processThresholds)}$.plot.plugins.push({init:init,options:options,name:"threshold",version:"1.2"})})(jQuery)},function(module,exports,__webpack_require__){"use strict";(function($){var options={series:{fillBetween:null}};function init(plot){function findBottomSeries(s,allseries){var i;for(i=0;i<allseries.length;++i)if(allseries[i].id===s.fillBetween)return allseries[i];if("number"===typeof s.fillBetween){if(s.fillBetween<0||s.fillBetween>=allseries.length)return null;return allseries[s.fillBetween]}return null}function computeFillBottoms(plot,s,datapoints){if(null==s.fillBetween)return;var other=findBottomSeries(s,plot.getData());if(!other)return;var px,py,intery,qx,qy,bottom,l,m,ps=datapoints.pointsize,points=datapoints.points,otherps=other.datapoints.pointsize,otherpoints=other.datapoints.points,newpoints=[],withlines=s.lines.show,withbottom=ps>2&&datapoints.format[2].y,withsteps=withlines&&s.lines.steps,fromgap=true,i=0,j=0;while(true){if(i>=points.length)break;l=newpoints.length;if(null==points[i]){for(m=0;m<ps;++m)newpoints.push(points[i+m]);i+=ps}else if(j>=otherpoints.length){if(!withlines)for(m=0;m<ps;++m)newpoints.push(points[i+m]);i+=ps}else if(null==otherpoints[j]){for(m=0;m<ps;++m)newpoints.push(null);fromgap=true;j+=otherps}else{px=points[i];py=points[i+1];qx=otherpoints[j];qy=otherpoints[j+1];bottom=0;if(px===qx){for(m=0;m<ps;++m)newpoints.push(points[i+m]);bottom=qy;i+=ps;j+=otherps}else if(px>qx){if(withlines&&i>0&&null!=points[i-ps]){intery=py+(points[i-ps+1]-py)*(qx-px)/(points[i-ps]-px);newpoints.push(qx);newpoints.push(intery);for(m=2;m<ps;++m)newpoints.push(points[i+m]);bottom=qy}j+=otherps}else{if(fromgap&&withlines){i+=ps;continue}for(m=0;m<ps;++m)newpoints.push(points[i+m]);withlines&&j>0&&null!=otherpoints[j-otherps]&&(bottom=qy+(otherpoints[j-otherps+1]-qy)*(px-qx)/(otherpoints[j-otherps]-qx));i+=ps}fromgap=false;l!==newpoints.length&&withbottom&&(newpoints[l+2]=bottom)}if(withsteps&&l!==newpoints.length&&l>0&&null!==newpoints[l]&&newpoints[l]!==newpoints[l-ps]&&newpoints[l+1]!==newpoints[l-ps+1]){for(m=0;m<ps;++m)newpoints[l+ps+m]=newpoints[l+m];newpoints[l+1]=newpoints[l-ps+1]}}datapoints.points=newpoints}plot.hooks.processDatapoints.push(computeFillBottoms)}$.plot.plugins.push({init:init,options:options,name:"fillbetween",version:"1.0"})})(jQuery)},function(module,exports,__webpack_require__){"use strict";(function($){function log10(value){return Math.log(value)/Math.LN10}function floorAsLog10(value){return Math.floor(log10(value))}function ceilAsLog10(value){return Math.ceil(log10(value))}function floorInBase(n,base){return base*Math.floor(n/base)}function getUnicodePower(power){var superscripts=["","","","","","","","","",""],result="",str_power=""+power;for(var i=0;i<str_power.length;i++)"+"===str_power[i]||("-"===str_power[i]?result+="":result+=superscripts[str_power[i]]);return result}function init(plot){plot.hooks.processOptions.push(function(plot){$.each(plot.getAxes(),function(axisName,axis){var opts=axis.options;if("log"===opts.mode){axis.tickGenerator=function(axis){var ticks=[],end=ceilAsLog10(axis.max),start=floorAsLog10(axis.datamin),tick=Number.NaN,i=0;if(null===axis.datamin||axis.datamin<=0){start=0;axis.min=.6}if(end<=start)ticks=[1e-6,1e-5,1e-4,.001,.01,.1,1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9];else if(log10(axis.max)-log10(axis.datamin)<1){var prev;start=floorInBase(axis.min,axis.tickSize);do{prev=tick;tick=start+i*axis.tickSize;ticks.push(tick);++i}while(tick<axis.max&&tick!==prev)}else{for(;i<=end-start;i++){tick=Math.pow(10,start+i);ticks.push(tick)}var length=ticks.length;if(end-start<6)for(var j=1;j<2*length-1;j+=2){tick=5*ticks[j-1];ticks.splice(j,0,tick)}}return ticks};axis.tickFormatter=function(value,axis){var formatted;if(log10(axis.max)-log10(axis.datamin)<1){var factor=axis.tickDecimals?Math.pow(10,axis.tickDecimals):1;formatted=""+Math.round(value*factor)/factor;if(null!==axis.tickDecimals){var decimal=formatted.indexOf(".");var precision=-1===decimal?0:formatted.length-decimal-1;if(precision<axis.tickDecimals)return(precision?formatted:formatted+".")+(""+factor).substr(1,axis.tickDecimals-precision)}}else{var multiplier="",exponential=parseFloat(value).toExponential(0),power=getUnicodePower(exponential.slice(2));"1"!==exponential[0]&&(multiplier=exponential[0]+"x");formatted=multiplier+"10"+power}return formatted}}})})}$.plot.plugins.push({init:init,name:"log",version:"0.9"})})(jQuery)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _reactDom=__webpack_require__(15);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var Resize=function(_Component){_inherits(Resize,_Component);function Resize(props){_classCallCheck(this,Resize);var _this=_possibleConstructorReturn(this,(Resize.__proto__||Object.getPrototypeOf(Resize)).call(this,props));_this.state={};_this.handleResize=_this.handleResize.bind(_this);return _this}_createClass(Resize,[{key:"checkSize",value:function checkSize(){var _this2=this;var el=(0,_reactDom.findDOMNode)(this.el);if(!el)return;this.timeout=setTimeout(function(){var _state=_this2.state,currentHeight=_state.currentHeight,currentWidth=_state.currentWidth;if(currentHeight!==el.parentNode.clientHeight||currentWidth!==el.parentNode.clientWidth){_this2.setState({currentWidth:el.parentNode.clientWidth,currentHeight:el.parentNode.clientHeight});_this2.handleResize()}clearTimeout(_this2.timeout);_this2.checkSize()},this.props.frequency)}},{key:"componentDidMount",value:function componentDidMount(){this.checkSize()}},{key:"componentWillUnmount",value:function componentWillUnmount(){clearTimeout(this.timeout)}},{key:"handleResize",value:function handleResize(){this.props.onResize&&this.props.onResize()}},{key:"render",value:function render(){var _this3=this;var style=this.props.style||{};var className=this.props.className||"";return _react2.default.createElement("div",{style:style,className:className,ref:function ref(el){return _this3.el=el}},this.props.children)}}]);return Resize}(_react.Component);Resize.defaultProps={frequency:500};Resize.propTypes={frequency:_propTypes2.default.number,onResize:_propTypes2.default.func};exports.default=Resize;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function(series){var multiplier=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.7;var first=_lodash2.default.first(series);try{return(first.data[1][0]-first.data[0][0])*multiplier}catch(e){return 1e3}};module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default={lineColor:"rgba(0,0,0,0.2)",lineColorReversed:"rgba(255,255,255,0.4)",textColor:"rgba(0,0,0,0.4)",textColorReversed:"rgba(255,255,255,0.6)",valueColor:"rgba(0,0,0,0.7)",valueColorReversed:"rgba(255,255,255,0.8)"};module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _moment=__webpack_require__(10);var _moment2=_interopRequireDefault(_moment);var _reactcss=__webpack_require__(20);var _reactcss2=_interopRequireDefault(_reactcss);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var Annotation=function(_Component){_inherits(Annotation,_Component);function Annotation(props){_classCallCheck(this,Annotation);var _this=_possibleConstructorReturn(this,(Annotation.__proto__||Object.getPrototypeOf(Annotation)).call(this,props));_this.state={showTooltip:false};_this.handleMouseOut=_this.handleMouseOut.bind(_this);_this.handleMouseOver=_this.handleMouseOver.bind(_this);return _this}_createClass(Annotation,[{key:"renderTooltip",value:function renderTooltip(){if(!this.state.showTooltip)return null;var _props$series=_slicedToArray(this.props.series,2),timestamp=_props$series[0],messageSource=_props$series[1];var reversed=this.props.reversed?"-reversed":"";var messages=messageSource.map(function(message,i){return _react2.default.createElement("div",{key:message+"-"+i,className:"annotation__message"},message)});return _react2.default.createElement("div",{className:"annotation__tooltip"},_react2.default.createElement("div",{className:"annotation__tooltip-body"+reversed},_react2.default.createElement("div",{className:"annotation__timestamp"+reversed},(0,_moment2.default)(timestamp).format("lll")),messages),_react2.default.createElement("div",{className:"annotation__caret"+reversed}))}},{key:"handleMouseOver",value:function handleMouseOver(){this.setState({showTooltip:true})}},{key:"handleMouseOut",value:function handleMouseOut(){this.setState({showTooltip:false})}},{key:"render",value:function render(){var _props=this.props,color=_props.color,plot=_props.plot,icon=_props.icon,series=_props.series;var offset=plot.pointOffset({x:series[0],y:0});var tooltip=this.renderTooltip();var style=(0,_reactcss2.default)({default:{container:{left:offset.left-6,bottom:0,top:5},line:{backgroundColor:color},icon:{color:color}}});return _react2.default.createElement("div",{className:"annotation",style:style.container},_react2.default.createElement("div",{className:"annotation__line",style:style.line}),_react2.default.createElement("div",{onFocus:this.handleMouseOver,onBlur:this.handleMouseOut,onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,className:"annotation__icon"},_react2.default.createElement("i",{className:"fa "+icon,style:style.icon}),tooltip))}}]);return Annotation}(_react.Component);Annotation.propTypes={series:_propTypes2.default.array,icon:_propTypes2.default.string,color:_propTypes2.default.string,plot:_propTypes2.default.object,reversed:_propTypes2.default.bool};exports.default=Annotation;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _vertical_legend=__webpack_require__(4551);var _vertical_legend2=_interopRequireDefault(_vertical_legend);var _horizontal_legend=__webpack_require__(4552);var _horizontal_legend2=_interopRequireDefault(_horizontal_legend);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function Legend(props){if("bottom"===props.legendPosition)return _react2.default.createElement(_horizontal_legend2.default,props);return _react2.default.createElement(_vertical_legend2.default,props)}Legend.propTypes={legendPosition:_propTypes2.default.string,onClick:_propTypes2.default.func,onToggle:_propTypes2.default.func,series:_propTypes2.default.array,showLegend:_propTypes2.default.bool,seriesValues:_propTypes2.default.object,seriesFilter:_propTypes2.default.array,tickFormatter:_propTypes2.default.func};exports.default=Legend;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _create_legend_series=__webpack_require__(1536);var _create_legend_series2=_interopRequireDefault(_create_legend_series);var _reactcss=__webpack_require__(20);var _reactcss2=_interopRequireDefault(_reactcss);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function VerticalLegend(props){var rows=props.series.map((0,_create_legend_series2.default)(props));var htmlId=(0,_eui.htmlIdGenerator)();var hideLegend=!props.showLegend;var leftLegend="left"===props.legendPosition;var styles=(0,_reactcss2.default)({default:{legend:{width:200}},leftLegend:{legend:{order:"-1"},control:{order:"2"}},hideLegend:{legend:{width:12},series:{display:"none"}}},{hideLegend:hideLegend,leftLegend:leftLegend});var openClass=leftLegend?"fa-chevron-right":"fa-chevron-left";var closeClass=leftLegend?"fa-chevron-left":"fa-chevron-right";var legendControlClass=hideLegend?"fa "+openClass:"fa "+closeClass;return _react2.default.createElement("div",{className:"rhythm_chart__legend",style:styles.legend},_react2.default.createElement("div",{className:"rhythm_chart__legend-control",style:styles.control},_react2.default.createElement("button",{className:legendControlClass,onClick:props.onClick,"aria-label":"Toggle chart legend","aria-expanded":!!props.showLegend,"aria-controls":htmlId("legend")})),_react2.default.createElement("div",{className:"rhythm_chart__legend-series",style:styles.series,id:htmlId("legend")},rows))}VerticalLegend.propTypes={legendPosition:_propTypes2.default.string,onClick:_propTypes2.default.func,onToggle:_propTypes2.default.func,series:_propTypes2.default.array,showLegend:_propTypes2.default.bool,seriesValues:_propTypes2.default.object,seriesFilter:_propTypes2.default.array,tickFormatter:_propTypes2.default.func};exports.default=VerticalLegend;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _create_legend_series=__webpack_require__(1536);var _create_legend_series2=_interopRequireDefault(_create_legend_series);var _reactcss=__webpack_require__(20);var _reactcss2=_interopRequireDefault(_reactcss);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function HorizontalLegend(props){var rows=props.series.map((0,_create_legend_series2.default)(props));var htmlId=(0,_eui.htmlIdGenerator)();var styles=(0,_reactcss2.default)({hideLegned:{legend:{display:"none"}}},{hideLegned:!props.showLegend});var legendControlClass="fa fa-chevron-down";props.showLegend||(legendControlClass="fa fa-chevron-up");return _react2.default.createElement("div",{className:"rhythm_chart__legend-horizontal"},_react2.default.createElement("div",{className:"rhythm_chart__legend-control"},_react2.default.createElement("button",{className:legendControlClass,onClick:props.onClick,"aria-label":"Toggle chart legend","aria-expanded":!!props.showLegend,"aria-controls":htmlId("legend")})),_react2.default.createElement("div",{className:"rhythm_chart__legend-series",style:styles.legend,id:htmlId("legend")},rows))}HorizontalLegend.propTypes={legendPosition:_propTypes2.default.string,onClick:_propTypes2.default.func,onToggle:_propTypes2.default.func,series:_propTypes2.default.array,showLegend:_propTypes2.default.bool,seriesValues:_propTypes2.default.object,seriesFilter:_propTypes2.default.array,tickFormatter:_propTypes2.default.func};exports.default=HorizontalLegend;module.exports=exports["default"]},,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getAxisLabelString=getAxisLabelString;var _relative_options=__webpack_require__(839);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _moment=__webpack_require__(10);var _moment2=_interopRequireDefault(_moment);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var unitLookup={s:"seconds",m:"minutes",h:"hours",d:"days",w:"weeks",M:"months",y:"years"};function getAxisLabelString(interval){var units=_lodash2.default.pluck(_lodash2.default.clone(_relative_options.relativeOptions).reverse(),"value").filter(function(s){return/^[smhdwMy]$/.test(s)});var duration=_moment2.default.duration(interval,"ms");for(var i=0;i<units.length;i++){var as=duration.as(units[i]);if(Math.abs(as)>1){var unitValue=Math.round(Math.abs(as));var unitString=unitLookup[units[i]];return"per "+unitValue+" "+unitString}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getFormat=getFormat;exports.createXaxisFormatter=createXaxisFormatter;var _moment=__webpack_require__(10);var _moment2=_interopRequireDefault(_moment);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getFormat(interval,rules,dateFormat){for(var i=rules.length-1;i>=0;i--){var rule=rules[i];if(!rule[0]||interval>=_moment2.default.duration(rule[0]))return rule[1]}return dateFormat}function createXaxisFormatter(interval,rules,dateFormat){return function(val){return(0,_moment2.default)(val).format(getFormat(interval,rules,dateFormat))}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _vis_with_splits=__webpack_require__(1539);var _tick_formatter=__webpack_require__(374);var _tick_formatter2=_interopRequireDefault(_tick_formatter);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _metric=__webpack_require__(4562);var _metric2=_interopRequireDefault(_metric);var _get_last_value=__webpack_require__(325);var _get_last_value2=_interopRequireDefault(_get_last_value);var _color=__webpack_require__(514);var _color2=_interopRequireDefault(_color);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getColors(props){var model=props.model,visData=props.visData;var series=_lodash2.default.get(visData,model.id+".series",[]);var color=void 0;var background=void 0;model.background_color_rules&&model.background_color_rules.forEach(function(rule){if(rule.operator&&null!=rule.value){var value=series[0]&&(0,_get_last_value2.default)(series[0].data)||0;if(_lodash2.default[rule.operator](value,rule.value)){background=rule.background_color;color=rule.color}}});return{color:color,background:background}}function MetricVisualization(props){var backgroundColor=props.backgroundColor,model=props.model,visData=props.visData;var colors=getColors(props);var series=_lodash2.default.get(visData,model.id+".series",[]).filter(function(row){return row}).map(function(row,i){var seriesDef=model.series.find(function(s){return _lodash2.default.includes(row.id,s.id)});var newProps={};seriesDef&&(newProps.formatter=(0,_tick_formatter2.default)(seriesDef.formatter,seriesDef.value_template));0===i&&colors.color&&(newProps.color=colors.color);return _lodash2.default.assign({},_lodash2.default.pick(row,["label","data"]),newProps)});var params={metric:series[0],reversed:props.reversed,additionalLabel:props.additionalLabel};series[1]&&(params.secondary=series[1]);var panelBackgroundColor=colors.background||backgroundColor;panelBackgroundColor&&"inherit"!==panelBackgroundColor&&(params.reversed=(0,_color2.default)(panelBackgroundColor).luminosity()<.45);var style={backgroundColor:panelBackgroundColor};return _react2.default.createElement("div",{className:"dashboard__visualization",style:style},_react2.default.createElement(_metric2.default,params))}MetricVisualization.propTypes={backgroundColor:_propTypes2.default.string,className:_propTypes2.default.string,additionalLabel:_propTypes2.default.string,model:_propTypes2.default.object,onBrush:_propTypes2.default.func,onChange:_propTypes2.default.func,reversed:_propTypes2.default.bool,visData:_propTypes2.default.object};exports.default=(0,_vis_with_splits.visWithSplits)(MetricVisualization);module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getDisplayName=getDisplayName;function getDisplayName(Component){return Component.displayName||Component.name||"Component"}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _get_last_value=__webpack_require__(325);var _get_last_value2=_interopRequireDefault(_get_last_value);var _reactcss=__webpack_require__(20);var _reactcss2=_interopRequireDefault(_reactcss);var _calculate_coordinates=__webpack_require__(909);var _calculate_coordinates2=_interopRequireDefault(_calculate_coordinates);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var Metric=function(_Component){_inherits(Metric,_Component);function Metric(props){_classCallCheck(this,Metric);var _this=_possibleConstructorReturn(this,(Metric.__proto__||Object.getPrototypeOf(Metric)).call(this,props));_this.state={scale:1,left:0,top:0,translateX:1,translateY:1};_this.handleResize=_this.handleResize.bind(_this);return _this}_createClass(Metric,[{key:"componentWillMount",value:function componentWillMount(){var _this2=this;var check=function check(){_this2.timeout=setTimeout(function(){var newState=(0,_calculate_coordinates2.default)(_this2.inner,_this2.resize,_this2.state);newState&&_this2.state&&!_lodash2.default.isEqual(newState,_this2.state)&&_this2.handleResize();check()},500)};check()}},{key:"componentWillUnmount",value:function componentWillUnmount(){clearTimeout(this.timeout)}},{key:"componentDidMount",value:function componentDidMount(){this.handleResize()}},{key:"handleResize",value:function handleResize(){var newState=(0,_calculate_coordinates2.default)(this.inner,this.resize,this.state);this.setState(newState)}},{key:"render",value:function render(){var _this3=this;var _props=this.props,metric=_props.metric,secondary=_props.secondary;var _state=this.state,scale=_state.scale,translateX=_state.translateX,translateY=_state.translateY;var primaryFormatter=metric&&(metric.tickFormatter||metric.formatter)||function(n){return n};var primaryValue=primaryFormatter((0,_get_last_value2.default)(metric&&metric.data||0));var styles=(0,_reactcss2.default)({default:{container:{},inner:{top:this.state.top||0,left:this.state.left||0,transform:"matrix("+scale+", 0, 0, "+scale+", "+translateX+", "+translateY+")"},primary_text:{color:"rgba(0,0,0,0.5)"},primary_value:{color:"#000"},secondary_text:{color:"rgba(0,0,0,0.5)"},secondary_value:{color:"#000"}},reversed:{primary_text:{color:"rgba(255,255,255,0.7)"},primary_value:{color:"#FFF"},secondary_text:{color:"rgba(255,255,255,0.7)"},secondary_value:{color:"#FFF"}}},this.props);this.props.backgroundColor&&(styles.container.backgroundColor=this.props.backgroundColor);metric&&metric.color&&(styles.primary_value.color=metric.color);var primaryLabel=void 0;metric&&metric.label&&(primaryLabel=_react2.default.createElement("div",{style:styles.primary_text,className:"rhythm_metric__primary-label"},metric.label));var secondarySnippet=void 0;if(secondary){var secondaryFormatter=secondary.formatter||function(n){return n};var secondaryValue=secondaryFormatter((0,_get_last_value2.default)(secondary.data));secondary.color&&(styles.secondary_value.color=secondary.color);var secondaryLabel=void 0;secondary.label&&(secondaryLabel=_react2.default.createElement("div",{style:styles.secondary_text,className:"rhythm_metric__secondary-label"},secondary.label));secondarySnippet=_react2.default.createElement("div",{className:"rhythm_metric__secondary"},secondaryLabel,_react2.default.createElement("div",{style:styles.secondary_value,className:"rhythm_metric__secondary-value"},secondaryValue))}var additionalLabel=void 0;this.props.additionalLabel&&(additionalLabel=_react2.default.createElement("div",{className:"rhythm_metric__additionalLabel"},this.props.additionalLabel));return _react2.default.createElement("div",{className:"rhythm_metric",style:styles.container},_react2.default.createElement("div",{ref:function ref(el){return _this3.resize=el},className:"rhythm_metric__resize"},_react2.default.createElement("div",{ref:function ref(el){return _this3.inner=el},className:"rhythm_metric__inner",style:styles.inner},_react2.default.createElement("div",{className:"rhythm_metric__primary"},primaryLabel,_react2.default.createElement("div",{style:styles.primary_value,"data-test-subj":"tsvbMetricValue",className:"rhythm_metric__primary-value"},primaryValue)),secondarySnippet,additionalLabel)))}}]);return Metric}(_react.Component);Metric.propTypes={backgroundColor:_propTypes2.default.string,metric:_propTypes2.default.object,secondary:_propTypes2.default.object,reversed:_propTypes2.default.bool,additionalLabel:_propTypes2.default.string};exports.default=Metric;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=calcDimensions;function calcDimensions(el,scale){var newWidth=Math.floor(el.clientWidth*scale);var newHeight=Math.floor(el.clientHeight*scale);return[newWidth,newHeight]}module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _tick_formatter=__webpack_require__(374);var _tick_formatter2=_interopRequireDefault(_tick_formatter);var _top_n=__webpack_require__(4565);var _top_n2=_interopRequireDefault(_top_n);var _get_last_value=__webpack_require__(325);var _get_last_value2=_interopRequireDefault(_get_last_value);var _color2=__webpack_require__(514);var _color3=_interopRequireDefault(_color2);var _replace_vars=__webpack_require__(656);var _replace_vars2=_interopRequireDefault(_replace_vars);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _lodash=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var OPERATORS={gt:_lodash.gt,gte:_lodash.gte,lt:_lodash.lt,lte:_lodash.lte};function sortByDirection(data,direction,fn){if("desc"===direction)return(0,_lodash.sortBy)(data,fn).reverse();return(0,_lodash.sortBy)(data,fn)}function sortSeries(visData,model){var series=(0,_lodash.get)(visData,model.id+".series",[]);return model.series.reduce(function(acc,item){var itemSeries=series.filter(function(s){var id=(0,_lodash.first)(s.id.split(/:/));return id===item.id});var direction=item.terms_direction||"desc";if("_term"===item.terms_order_by)return acc.concat(itemSeries);return acc.concat(sortByDirection(itemSeries,direction,function(s){return(0,_get_last_value2.default)(s.data)}))},[])}function TopNVisualization(props){var backgroundColor=props.backgroundColor,model=props.model,visData=props.visData;var series=sortSeries(visData,model).map(function(item){var id=(0,_lodash.first)(item.id.split(/:/));var seriesConfig=model.series.find(function(s){return s.id===id});if(seriesConfig){var formatter=(0,_tick_formatter2.default)(seriesConfig.formatter,seriesConfig.value_template);var value=(0,_get_last_value2.default)(item.data);var _color=item.color||seriesConfig.color;model.bar_color_rules&&model.bar_color_rules.forEach(function(rule){rule.operator&&null!=rule.value&&rule.bar_color&&OPERATORS[rule.operator](value,rule.value)&&(_color=rule.bar_color)});return _extends({},item,{color:_color,tickFormatter:formatter})}return item});var params={series:series,reversed:props.reversed};var panelBackgroundColor=model.background_color||backgroundColor;panelBackgroundColor&&"inherit"!==panelBackgroundColor&&(params.reversed=(0,_color3.default)(panelBackgroundColor).luminosity()<.45);model.drilldown_url&&(params.onClick=function(item){window.location=(0,_replace_vars2.default)(model.drilldown_url,{},{key:item.label})});var style={backgroundColor:panelBackgroundColor};return _react2.default.createElement("div",{className:"dashboard__visualization",style:style},_react2.default.createElement(_top_n2.default,params))}TopNVisualization.propTypes={backgroundColor:_propTypes2.default.string,className:_propTypes2.default.string,model:_propTypes2.default.object,onBrush:_propTypes2.default.func,onChange:_propTypes2.default.func,reversed:_propTypes2.default.bool,visData:_propTypes2.default.object};exports.default=TopNVisualization;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _get_last_value=__webpack_require__(325);var _get_last_value2=_interopRequireDefault(_get_last_value);var _reactcss=__webpack_require__(20);var _reactcss2=_interopRequireDefault(_reactcss);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var TopN=function(_Component){_inherits(TopN,_Component);function TopN(){_classCallCheck(this,TopN);return _possibleConstructorReturn(this,(TopN.__proto__||Object.getPrototypeOf(TopN)).apply(this,arguments))}_createClass(TopN,[{key:"handleClick",value:function handleClick(item){var _this2=this;return function(){_this2.props.onClick&&_this2.props.onClick(item)}}},{key:"renderRow",value:function renderRow(maxValue){var _this3=this;return function(item){var key=""+(item.id||item.label);var lastValue=(0,_get_last_value2.default)(item.data);var formatter=item.tickFormatter||_this3.props.tickFormatter;var value=formatter(lastValue);var width=lastValue/maxValue*100+"%";var backgroundColor=item.color;var styles=(0,_reactcss2.default)({default:{innerBar:{width:width,backgroundColor:backgroundColor}},onClick:{row:{cursor:"pointer"}}},_this3.props);return _react2.default.createElement("tr",{key:key,onClick:_this3.handleClick(_extends({lastValue:lastValue},item)),style:styles.row},_react2.default.createElement("td",{width:"1*",className:"rhythm_top_n__label"},item.label),_react2.default.createElement("td",{width:"100%",className:"rhythm_top_n__bar"},_react2.default.createElement("div",{className:"rhythm_top_n__inner-bar",style:styles.innerBar})),_react2.default.createElement("td",{width:"1*",className:"rhythm_top_n__value","data-test-subj":"tsvbTopNValue"},value))}}},{key:"render",value:function render(){if(!this.props.series)return null;var maxValue=this.props.series.reduce(function(max,series){var lastValue=(0,_get_last_value2.default)(series.data);return lastValue>max?lastValue:max},0);var rows=this.props.series.map(this.renderRow(maxValue));var className="rhythm_top_n";this.props.reversed&&(className+=" reversed");return _react2.default.createElement("div",{className:className},_react2.default.createElement("table",{className:"rhythm_top_n__table"},_react2.default.createElement("tbody",null,rows)))}}]);return TopN}(_react.Component);TopN.defaultProps={tickFormatter:function tickFormatter(n){return n},onClick:function onClick(i){return i},direction:"desc"};TopN.propTypes={tickFormatter:_propTypes2.default.func,onClick:_propTypes2.default.func,series:_propTypes2.default.array,reversed:_propTypes2.default.bool,direction:_propTypes2.default.string};exports.default=TopN;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _tick_formatter=__webpack_require__(374);var _tick_formatter2=_interopRequireDefault(_tick_formatter);var _calculate_label=__webpack_require__(908);var _calculate_label2=_interopRequireDefault(_calculate_label);var _is_sortable=__webpack_require__(4567);var _eui=__webpack_require__(3);var _replace_vars=__webpack_require__(656);var _replace_vars2=_interopRequireDefault(_replace_vars);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function getColor(rules,colorKey,value){var color=void 0;rules&&rules.forEach(function(rule){rule.operator&&null!=rule.value&&_lodash2.default[rule.operator](value,rule.value)&&(color=rule[colorKey])});return color}var TableVis=function(_Component){_inherits(TableVis,_Component);function TableVis(props){_classCallCheck(this,TableVis);var _this=_possibleConstructorReturn(this,(TableVis.__proto__||Object.getPrototypeOf(TableVis)).call(this,props));_this.renderRow=_this.renderRow.bind(_this);return _this}_createClass(TableVis,[{key:"renderRow",value:function renderRow(row){var model=this.props.model;var rowId=row.key;var rowDisplay=rowId;if(model.drilldown_url){var url=(0,_replace_vars2.default)(model.drilldown_url,{},{key:row.key});rowDisplay=_react2.default.createElement("a",{href:url},rowDisplay)}var columns=row.series.filter(function(item){return item}).map(function(item){var column=model.series.find(function(c){return c.id===item.id});if(!column)return null;var formatter=(0,_tick_formatter2.default)(column.formatter,column.value_template);var value=formatter(item.last);var trend=void 0;if(column.trend_arrows){var trendClass=item.slope>0?"fa-long-arrow-up":"fa-long-arrow-down";trend=_react2.default.createElement("span",{className:"tsvb-table__trend"},_react2.default.createElement("i",{className:"fa "+trendClass}))}var style={color:getColor(column.color_rules,"text",item.last)};return _react2.default.createElement("td",{key:rowId+"-"+item.id,className:"tsvb-table__value",style:style},_react2.default.createElement("span",{className:"tsvb-table__value-display"},value),trend)});return _react2.default.createElement("tr",{key:rowId},_react2.default.createElement("td",{className:"tsvb-table__fieldName"},rowDisplay),columns)}},{key:"renderHeader",value:function renderHeader(){var _props=this.props,model=_props.model,uiState=_props.uiState,onUiState=_props.onUiState;var stateKey=model.type+".sort";var sort=uiState.get(stateKey,{column:"_default_",order:"asc"});var columns=model.series.map(function(item){var metric=_lodash2.default.last(item.metrics);var label=item.label||(0,_calculate_label2.default)(metric,item.metrics);var handleClick=function handleClick(){if(!(0,_is_sortable.isSortable)(metric))return;var order=void 0;order=sort.column===item.id&&"asc"===sort.order?"desc":"asc";onUiState(stateKey,{column:item.id,order:order})};var sortComponent=void 0;if((0,_is_sortable.isSortable)(metric)){var _sortIcon=void 0;_sortIcon=sort.column===item.id?"asc"===sort.order?"sort-asc":"sort-desc":"sort";sortComponent=_react2.default.createElement("i",{className:"fa fa-"+_sortIcon})}var headerContent=_react2.default.createElement("span",null,label," ",sortComponent);(0,_is_sortable.isSortable)(metric)||(headerContent=_react2.default.createElement(_eui.EuiToolTip,{content:"This Column is Not Sortable"},headerContent));return _react2.default.createElement("th",{className:"tsvb-table__columnName",onClick:handleClick,key:item.id,scope:"col"},headerContent)});var label=model.pivot_label||model.pivot_field||model.pivot_id;var sortIcon=void 0;sortIcon="_default_"===sort.column?"asc"===sort.order?"sort-asc":"sort-desc":"sort";var sortComponent=_react2.default.createElement("i",{className:"fa fa-"+sortIcon});var handleSortClick=function handleSortClick(){var order=void 0;order="_default_"===sort.column&&"asc"===sort.order?"desc":"asc";onUiState(stateKey,{column:"_default_",order:order})};return _react2.default.createElement("tr",null,_react2.default.createElement("th",{scope:"col",onClick:handleSortClick},label," ",sortComponent),columns)}},{key:"render",value:function render(){var _props2=this.props,visData=_props2.visData,model=_props2.model;var header=this.renderHeader();var rows=void 0;var reversedClass="";this.props.reversed&&(reversedClass="reversed");if(_lodash2.default.isArray(visData.series)&&visData.series.length)rows=visData.series.map(this.renderRow);else{var message="No results available.";model.pivot_id||(message+=" You must choose a group by field for this visualization.");rows=_react2.default.createElement("tr",null,_react2.default.createElement("td",{className:"tsvb-table__noResults",colSpan:model.series.length+1},message))}return _react2.default.createElement("div",{className:"dashboard__visualization "+reversedClass,"data-test-subj":"tableView"},_react2.default.createElement("table",{className:"table"},_react2.default.createElement("thead",null,header),_react2.default.createElement("tbody",null,rows)))}}]);return TableVis}(_react.Component);TableVis.defaultProps={sort:{}};TableVis.propTypes={visData:_propTypes2.default.object,model:_propTypes2.default.object,backgroundColor:_propTypes2.default.string,onPaginate:_propTypes2.default.func,onUiState:_propTypes2.default.func,uiState:_propTypes2.default.object,pageNumber:_propTypes2.default.number,reversed:_propTypes2.default.bool};exports.default=TableVis;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isSortable=isSortable;var _basic_aggs=__webpack_require__(1541);var _basic_aggs2=_interopRequireDefault(_basic_aggs);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function isSortable(metric){return _basic_aggs2.default.includes(metric.type)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _vis_with_splits=__webpack_require__(1539);var _tick_formatter=__webpack_require__(374);var _tick_formatter2=_interopRequireDefault(_tick_formatter);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _gauge=__webpack_require__(4569);var _gauge2=_interopRequireDefault(_gauge);var _get_last_value=__webpack_require__(325);var _get_last_value2=_interopRequireDefault(_get_last_value);var _color=__webpack_require__(514);var _color2=_interopRequireDefault(_color);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getColors(props){var model=props.model,visData=props.visData;var series=_lodash2.default.get(visData,model.id+".series",[]);var text=void 0;var gauge=void 0;model.gauge_color_rules&&model.gauge_color_rules.forEach(function(rule){if(rule.operator&&null!=rule.value){var value=series[0]&&(0,_get_last_value2.default)(series[0].data)||0;if(_lodash2.default[rule.operator](value,rule.value)){gauge=rule.gauge;text=rule.text}}});return{text:text,gauge:gauge}}function GaugeVisualization(props){var backgroundColor=props.backgroundColor,model=props.model,visData=props.visData;var colors=getColors(props);var series=_lodash2.default.get(visData,model.id+".series",[]).filter(function(row){return row}).map(function(row,i){var seriesDef=model.series.find(function(s){return _lodash2.default.includes(row.id,s.id)});var newProps={};seriesDef&&(newProps.formatter=(0,_tick_formatter2.default)(seriesDef.formatter,seriesDef.value_template));0===i&&colors.gauge&&(newProps.color=colors.gauge);return _lodash2.default.assign({},row,newProps)});var params={metric:series[0],type:model.gauge_style||"half",reversed:props.reversed,additionalLabel:props.additionalLabel};colors.text&&(params.valueColor=colors.text);model.gauge_width&&(params.gaugeLine=model.gauge_width);model.gauge_inner_color&&(params.innerColor=model.gauge_inner_color);model.gauge_inner_width&&(params.innerLine=model.gauge_inner_width);null!=model.gauge_max&&(params.max=model.gauge_max);var panelBackgroundColor=model.background_color||backgroundColor;panelBackgroundColor&&"inherit"!==panelBackgroundColor&&(params.reversed=(0,_color2.default)(panelBackgroundColor).luminosity()<.45);var style={backgroundColor:panelBackgroundColor};return _react2.default.createElement("div",{className:"dashboard__visualization",style:style},_react2.default.createElement(_gauge2.default,params))}GaugeVisualization.propTypes={backgroundColor:_propTypes2.default.string,className:_propTypes2.default.string,additionalLabel:_propTypes2.default.string,model:_propTypes2.default.object,onBrush:_propTypes2.default.func,onChange:_propTypes2.default.func,reversed:_propTypes2.default.bool,visData:_propTypes2.default.object};exports.default=(0,_vis_with_splits.visWithSplits)(GaugeVisualization);module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _get_last_value=__webpack_require__(325);var _get_last_value2=_interopRequireDefault(_get_last_value);var _get_value_by=__webpack_require__(4570);var _get_value_by2=_interopRequireDefault(_get_value_by);var _gauge_vis=__webpack_require__(4571);var _gauge_vis2=_interopRequireDefault(_gauge_vis);var _reactcss=__webpack_require__(20);var _reactcss2=_interopRequireDefault(_reactcss);var _calculate_coordinates=__webpack_require__(909);var _calculate_coordinates2=_interopRequireDefault(_calculate_coordinates);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var Gauge=function(_Component){_inherits(Gauge,_Component);function Gauge(props){_classCallCheck(this,Gauge);var _this=_possibleConstructorReturn(this,(Gauge.__proto__||Object.getPrototypeOf(Gauge)).call(this,props));_this.state={scale:1,top:0,left:0,translateX:1,translateY:1};_this.handleResize=_this.handleResize.bind(_this);return _this}_createClass(Gauge,[{key:"componentWillMount",value:function componentWillMount(){var _this2=this;var check=function check(){_this2.timeout=setTimeout(function(){var newState=(0,_calculate_coordinates2.default)(_this2.inner,_this2.resize,_this2.state);newState&&_this2.state&&!_lodash2.default.isEqual(newState,_this2.state)&&_this2.handleResize();check()},500)};check()}},{key:"componentWillUnmount",value:function componentWillUnmount(){clearTimeout(this.timeout)}},{key:"componentDidMount",value:function componentDidMount(){this.handleResize()}},{key:"handleResize",value:function handleResize(){var newState=(0,_calculate_coordinates2.default)(this.inner,this.resize,this.state);this.setState(newState)}},{key:"render",value:function render(){var _this3=this;var _props=this.props,metric=_props.metric,type=_props.type;var _state=this.state,scale=_state.scale,translateX=_state.translateX,translateY=_state.translateY;var value=metric&&(0,_get_last_value2.default)(metric.data)||0;var max=metric&&(0,_get_value_by2.default)("max",metric.data)||1;var formatter=metric&&(metric.tickFormatter||metric.formatter)||this.props.tickFormatter||function(v){return v};var title=metric&&metric.label||"";var styles=(0,_reactcss2.default)({default:{inner:{top:this.state.top||0,left:this.state.left||0,transform:"matrix("+scale+", 0, 0, "+scale+", "+translateX+", "+translateY+")"}},valueColor:{value:{color:this.props.valueColor}}},this.props);var gaugeProps={reversed:this.props.reversed,value:value,gaugeLine:this.props.gaugeLine,innerLine:this.props.innerLine,innerColor:this.props.innerColor,max:this.props.max||max,color:metric&&metric.color||"#8ac336",type:type};var metrics=void 0;var additionalLabel=void 0;this.props.additionalLabel&&(additionalLabel=_react2.default.createElement("div",{className:"thorGauge_additionalLabel"},this.props.additionalLabel));metrics="half"===type?_react2.default.createElement("div",{className:"thorHalfGauge__metrics",ref:function ref(el){return _this3.inner=el},style:styles.inner},_react2.default.createElement("div",{className:"thorHalfGauge__label",ref:"title"},title),_react2.default.createElement("div",{className:"thorHalfGauge__value",style:styles.value,ref:"label"},formatter(value)),additionalLabel):_react2.default.createElement("div",{className:"thorCircleGauge__metrics",ref:function ref(el){return _this3.inner=el},style:styles.inner},_react2.default.createElement("div",{className:"thorCircleGauge__value",style:styles.value,ref:"label"},formatter(value)),_react2.default.createElement("div",{className:"thorCircleGauge__label",ref:"title"},title),additionalLabel);var className="half"===type?"thorHalfGauge":"thorCircleGauge";this.props.reversed&&(className="reversed "+className);return _react2.default.createElement("div",{className:className},_react2.default.createElement("div",{ref:function ref(el){return _this3.resize=el},className:className+"__resize"},metrics,_react2.default.createElement(_gauge_vis2.default,gaugeProps)))}}]);return Gauge}(_react.Component);Gauge.defaultProps={type:"half",innerLine:2,gaugeLine:10};Gauge.propTypes={gaugeLine:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.number]),innerColor:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.number]),innerLine:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.number]),max:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.number]),metric:_propTypes2.default.object,reversed:_propTypes2.default.bool,type:_propTypes2.default.oneOf(["half","circle"]),valueColor:_propTypes2.default.string,additionalLabel:_propTypes2.default.string};exports.default=Gauge;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function(fn,data){if(_lodash2.default.isNumber(data))return data;if(!Array.isArray(data))return 0;var values=data.map(function(v){return v[1]});return _lodash2.default[fn](values)};module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _reactcss=__webpack_require__(20);var _reactcss2=_interopRequireDefault(_reactcss);var _calculate_coordinates=__webpack_require__(909);var _calculate_coordinates2=_interopRequireDefault(_calculate_coordinates);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var GaugeVis=function(_Component){_inherits(GaugeVis,_Component);function GaugeVis(props){_classCallCheck(this,GaugeVis);var _this=_possibleConstructorReturn(this,(GaugeVis.__proto__||Object.getPrototypeOf(GaugeVis)).call(this,props));_this.state={scale:1,top:0,left:0,translateX:1,translateY:1};_this.handleResize=_this.handleResize.bind(_this);return _this}_createClass(GaugeVis,[{key:"componentWillMount",value:function componentWillMount(){var _this2=this;var check=function check(){_this2.timeout=setTimeout(function(){var newState=(0,_calculate_coordinates2.default)(_this2.inner,_this2.resize,_this2.state);newState&&_this2.state&&!_lodash2.default.isEqual(newState,_this2.state)&&_this2.handleResize();check()},500)};check()}},{key:"componentWillUnmount",value:function componentWillUnmount(){clearTimeout(this.timeout)}},{key:"componentDidMount",value:function componentDidMount(){this.handleResize()}},{key:"handleResize",value:function handleResize(){var newState=(0,_calculate_coordinates2.default)(this.inner,this.resize,this.state);this.setState(newState)}},{key:"render",value:function render(){var _this3=this;var _props=this.props,type=_props.type,value=_props.value,max=_props.max,color=_props.color;var _state=this.state,scale=_state.scale,translateX=_state.translateX,translateY=_state.translateY;var size=2*Math.PI*50;var sliceSize="half"===type?.6:1;var percent=value<max?value/max:1;var styles=(0,_reactcss2.default)({default:{resize:{position:"relative",display:"flex",rowDirection:"column",flex:"1 0 auto"},svg:{position:"absolute",top:this.state.top,left:this.state.left,transform:"matrix("+scale+", 0, 0, "+scale+", "+translateX+", "+translateY+")"},innerLine:{strokeWidth:this.props.innerLine},gaugeLine:{strokeWidth:this.props.gaugeLine}},half:{svg:{transform:"matrix("+scale+", 0, 0, "+scale+", "+translateX+", "+translateY+")"}}},{half:"half"===type});var props={circle:{r:50,cx:60,cy:60,fill:"rgba(0,0,0,0)",stroke:color,strokeWidth:this.props.gaugeLine,strokeDasharray:percent*sliceSize*size+" "+size,transform:"rotate(-90 60 60)"},circleBackground:{r:50,cx:60,cy:60,fill:"rgba(0,0,0,0)",stroke:this.props.reversed?"rgba(255,255,255,0.2)":"rgba(0,0,0,0.2)",strokeDasharray:sliceSize*size+" "+size,strokeWidth:this.props.innerLine}};if("half"===type){props.circle.transform="rotate(-197.8 60 60)";props.circleBackground.transform="rotate(162 60 60)"}this.props.innerColor&&(props.circleBackground.stroke=this.props.innerColor);var svg=void 0;svg="half"===type?_react2.default.createElement("svg",{width:120.72,height:78.72},_react2.default.createElement("circle",_extends({},props.circleBackground,{style:styles.innerLine})),_react2.default.createElement("circle",_extends({},props.circle,{style:styles.gaugeLine}))):_react2.default.createElement("svg",{width:120.72,height:120.72},_react2.default.createElement("circle",props.circleBackground),_react2.default.createElement("circle",props.circle));return _react2.default.createElement("div",{ref:function ref(el){return _this3.resize=el},style:styles.resize},_react2.default.createElement("div",{style:styles.svg,ref:function ref(el){return _this3.inner=el}},svg))}}]);return GaugeVis}(_react.Component);GaugeVis.defaultProps={innerLine:2,gaugeLine:10};GaugeVis.propTypes={color:_propTypes2.default.string,gaugeLine:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.number]),innerColor:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.number]),innerLine:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.number]),max:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.number]),metric:_propTypes2.default.object,reversed:_propTypes2.default.bool,value:_propTypes2.default.number,type:_propTypes2.default.oneOf(["half","circle"])};exports.default=GaugeVis;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _color=__webpack_require__(514);var _color2=_interopRequireDefault(_color);var _reactMarkdown=__webpack_require__(1245);var _reactMarkdown2=_interopRequireDefault(_reactMarkdown);var _replace_vars=__webpack_require__(656);var _replace_vars2=_interopRequireDefault(_replace_vars);var _convert_series_to_vars=__webpack_require__(1542);var _convert_series_to_vars2=_interopRequireDefault(_convert_series_to_vars);var _error=__webpack_require__(1543);var _error2=_interopRequireDefault(_error);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function MarkdownVisualization(props){var backgroundColor=props.backgroundColor,model=props.model,visData=props.visData,dateFormat=props.dateFormat;var series=_lodash2.default.get(visData,model.id+".series",[]);var variables=(0,_convert_series_to_vars2.default)(series,model,dateFormat);var style={};var reversed=props.reversed;var panelBackgroundColor=model.background_color||backgroundColor;if(panelBackgroundColor){style.backgroundColor=panelBackgroundColor;reversed=(0,_color2.default)(panelBackgroundColor).luminosity()<.45}var markdown=void 0;if(model.markdown){var markdownSource=(0,_replace_vars2.default)(model.markdown,{},_extends({_all:variables},variables));var className="thorMarkdown";var contentClassName="thorMarkdown__content "+model.markdown_vertical_align;model.markdown_scrollbars&&(contentClassName+=" scrolling");reversed&&(className+=" reversed");var markdownError=markdownSource instanceof Error?markdownSource:null;markdown=_react2.default.createElement("div",{className:className,"data-test-subj":"tsvbMarkdown"},markdownError&&_react2.default.createElement(_error2.default,{error:markdownError}),_react2.default.createElement("style",{type:"text/css"},model.markdown_css),_react2.default.createElement("div",{className:contentClassName},_react2.default.createElement("div",{id:"markdown-"+model.id},!markdownError&&_react2.default.createElement(_reactMarkdown2.default,{escapeHtml:true,source:markdownSource}))))}return _react2.default.createElement("div",{className:"dashboard__visualization",style:style},markdown)}MarkdownVisualization.propTypes={backgroundColor:_propTypes2.default.string,className:_propTypes2.default.string,model:_propTypes2.default.object,onBrush:_propTypes2.default.func,onChange:_propTypes2.default.func,reversed:_propTypes2.default.bool,visData:_propTypes2.default.object,dateFormat:_propTypes2.default.string};exports.default=MarkdownVisualization;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function NoDataComponent(){return _react2.default.createElement("div",{className:"metrics_issue","data-test-subj":"noTSVBDataMessage"},_react2.default.createElement("div",{className:"metrics_issue__title"},"No data to display for the selected metrics ."))}exports.default=NoDataComponent;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function VisPickerItem(props){var label=props.label,icon=props.icon,type=props.type;var itemClassName="vis_editor__vis_picker-item";var iconClassName="vis_editor__vis_picker-icon";var labelClassName="vis_editor__vis_picker-label";if(props.selected){itemClassName+=" selected";iconClassName+=" selected";labelClassName+=" selected"}return _react2.default.createElement("button",{role:"tab",className:itemClassName,onClick:function onClick(){return props.onClick(type)},"data-test-subj":type+"TsvbTypeBtn"},_react2.default.createElement("div",{className:iconClassName},_react2.default.createElement("i",{className:"fa "+icon})),_react2.default.createElement("div",{className:labelClassName},label))}VisPickerItem.propTypes={icon:_propTypes2.default.string,label:_propTypes2.default.string,onClick:_propTypes2.default.func,type:_propTypes2.default.string,selected:_propTypes2.default.bool};function VisPicker(props){var handleChange=function handleChange(type){props.onChange({type:type})};var model=props.model;var icons=[{type:"timeseries",icon:"fa-line-chart",label:"Time Series"},{type:"metric",icon:"fa-superscript",label:"Metric"},{type:"top_n",icon:"fa-bar-chart fa-rotate-90",label:"Top N"},{type:"gauge",icon:"fa-circle-o-notch",label:"Gauge"},{type:"markdown",icon:"fa-paragraph",label:"Markdown"},{type:"table",icon:"fa-paragraph",label:"Table"}].map(function(item){return _react2.default.createElement(VisPickerItem,_extends({key:item.type,onClick:handleChange,selected:item.type===model.type},item))});return _react2.default.createElement("div",{className:"vis_editor__vis_picker-container",role:"tablist"},icons)}VisPicker.propTypes={model:_propTypes2.default.object,onChange:_propTypes2.default.func};exports.default=VisPicker;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _timeseries=__webpack_require__(4576);var _timeseries2=_interopRequireDefault(_timeseries);var _metric=__webpack_require__(4619);var _metric2=_interopRequireDefault(_metric);var _top_n=__webpack_require__(4620);var _top_n2=_interopRequireDefault(_top_n);var _table=__webpack_require__(4621);var _table2=_interopRequireDefault(_table);var _gauge=__webpack_require__(4622);var _gauge2=_interopRequireDefault(_gauge);var _markdown=__webpack_require__(4623);var _markdown2=_interopRequireDefault(_markdown);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var types={timeseries:_timeseries2.default,table:_table2.default,metric:_metric2.default,top_n:_top_n2.default,gauge:_gauge2.default,markdown:_markdown2.default};function PanelConfig(props){var model=props.model;var component=types[model.type];if(component)return _react2.default.createElement(component,props);return _react2.default.createElement("div",null,"Missing panel config for ",model.type,"")}PanelConfig.propTypes={fields:_propTypes2.default.object,model:_propTypes2.default.object,onChange:_propTypes2.default.func,visData:_propTypes2.default.object,dateFormat:_propTypes2.default.string};exports.default=PanelConfig;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _series_editor=__webpack_require__(433);var _series_editor2=_interopRequireDefault(_series_editor);var _annotations_editor=__webpack_require__(4617);var _annotations_editor2=_interopRequireDefault(_annotations_editor);var _index_pattern=__webpack_require__(326);var _create_select_handler=__webpack_require__(45);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _create_text_handler=__webpack_require__(46);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _color_picker=__webpack_require__(258);var _color_picker2=_interopRequireDefault(_color_picker);var _yes_no=__webpack_require__(259);var _yes_no2=_interopRequireDefault(_yes_no);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var TimeseriesPanelConfig=function(_Component){_inherits(TimeseriesPanelConfig,_Component);function TimeseriesPanelConfig(props){_classCallCheck(this,TimeseriesPanelConfig);var _this=_possibleConstructorReturn(this,(TimeseriesPanelConfig.__proto__||Object.getPrototypeOf(TimeseriesPanelConfig)).call(this,props));_this.state={selectedTab:"data"};return _this}_createClass(TimeseriesPanelConfig,[{key:"switchTab",value:function switchTab(selectedTab){this.setState({selectedTab:selectedTab})}},{key:"render",value:function render(){var _this2=this;var defaults={filter:"",axis_max:"",axis_min:"",legend_position:"right",show_grid:1};var model=_extends({},defaults,this.props.model);var selectedTab=this.state.selectedTab;var handleSelectChange=(0,_create_select_handler2.default)(this.props.onChange);var handleTextChange=(0,_create_text_handler2.default)(this.props.onChange);var htmlId=(0,_eui.htmlIdGenerator)();var positionOptions=[{label:"Right",value:"right"},{label:"Left",value:"left"}];var selectedPositionOption=positionOptions.find(function(option){return model.axis_position===option.value});var scaleOptions=[{label:"Normal",value:"normal"},{label:"Log",value:"log"}];var selectedAxisScaleOption=scaleOptions.find(function(option){return model.axis_scale===option.value});var legendPositionOptions=[{label:"Right",value:"right"},{label:"Left",value:"left"},{label:"Bottom",value:"bottom"}];var selectedLegendPosOption=legendPositionOptions.find(function(option){return model.legend_position===option.value});var view=void 0;view="data"===selectedTab?_react2.default.createElement(_series_editor2.default,{fields:this.props.fields,model:this.props.model,name:this.props.name,onChange:this.props.onChange}):"annotations"===selectedTab?_react2.default.createElement(_annotations_editor2.default,{fields:this.props.fields,model:this.props.model,name:"annotations",onChange:this.props.onChange}):_react2.default.createElement("div",{className:"vis_editor__container"},_react2.default.createElement(_index_pattern.IndexPattern,{fields:this.props.fields,model:this.props.model,onChange:this.props.onChange}),_react2.default.createElement("div",{className:"vis_editor__vis_config-row"},_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("axisMin")},"Axis Min"),_react2.default.createElement("input",{id:htmlId("axisMin"),className:"vis_editor__input-grows",type:"text",onChange:handleTextChange("axis_min"),value:model.axis_min}),_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("axisMax")},"Axis Max"),_react2.default.createElement("input",{id:htmlId("axisMax"),className:"vis_editor__input-grows",type:"text",onChange:handleTextChange("axis_max"),value:model.axis_max}),_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("axisPos")},"Axis Position"),_react2.default.createElement("div",{className:"vis_editor__row_item"},_react2.default.createElement(_eui.EuiComboBox,{isClearable:false,id:htmlId("axisPos"),options:positionOptions,selectedOptions:selectedPositionOption?[selectedPositionOption]:[],onChange:handleSelectChange("axis_position"),singleSelection:true})),_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("axisPos")},"Axis Scale"),_react2.default.createElement("div",{className:"vis_editor__row_item"},_react2.default.createElement(_eui.EuiComboBox,{isClearable:false,id:htmlId("axisScale"),options:scaleOptions,selectedOptions:selectedAxisScaleOption?[selectedAxisScaleOption]:[],onChange:handleSelectChange("axis_scale"),singleSelection:true}))),_react2.default.createElement("div",{className:"vis_editor__vis_config-row"},_react2.default.createElement("div",{className:"vis_editor__label"},"Background Color"),_react2.default.createElement(_color_picker2.default,{onChange:this.props.onChange,name:"background_color",value:model.background_color}),_react2.default.createElement("div",{className:"vis_editor__label"},"Show Legend"),_react2.default.createElement(_yes_no2.default,{value:model.show_legend,name:"show_legend",onChange:this.props.onChange}),_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("legendPos")},"Legend Position"),_react2.default.createElement("div",{className:"vis_editor__row_item"},_react2.default.createElement(_eui.EuiComboBox,{isClearable:false,id:htmlId("legendPos"),options:legendPositionOptions,selectedOptions:selectedLegendPosOption?[selectedLegendPosOption]:[],onChange:handleSelectChange("legend_position"),singleSelection:true})),_react2.default.createElement("div",{className:"vis_editor__label"},"Display Grid"),_react2.default.createElement(_yes_no2.default,{value:model.show_grid,name:"show_grid",onChange:this.props.onChange})),_react2.default.createElement("div",{className:"vis_editor__vis_config-row"},_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("panelFilter")},"Panel Filter"),_react2.default.createElement("input",{id:htmlId("panelFilter"),className:"vis_editor__input-grows",type:"text",onChange:handleTextChange("filter"),value:model.filter}),_react2.default.createElement("div",{className:"vis_editor__label"},"Ignore Global Filter"),_react2.default.createElement(_yes_no2.default,{value:model.ignore_global_filter,name:"ignore_global_filter",onChange:this.props.onChange})));return _react2.default.createElement("div",null,_react2.default.createElement("div",{className:"kbnTabs",role:"tablist"},_react2.default.createElement("button",{role:"tab","aria-selected":"data"===selectedTab,className:"kbnTabs__tab"+("data"===selectedTab?"-active":""),onClick:function onClick(){return _this2.switchTab("data")}},"Data"),_react2.default.createElement("button",{role:"tab","aria-selected":"options"===selectedTab,className:"kbnTabs__tab"+("options"===selectedTab?"-active":""),onClick:function onClick(){return _this2.switchTab("options")}},"Panel Options"),_react2.default.createElement("button",{role:"tab","aria-selected":"annotations"===selectedTab,className:"kbnTabs__tab"+("annotations"===selectedTab?"-active":""),onClick:function onClick(){return _this2.switchTab("annotations")}},"Annotations")),view)}}]);return TimeseriesPanelConfig}(_react.Component);TimeseriesPanelConfig.propTypes={fields:_propTypes2.default.object,model:_propTypes2.default.object,onChange:_propTypes2.default.func,visData:_propTypes2.default.object};exports.default=TimeseriesPanelConfig;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _uuid=__webpack_require__(78);var _uuid2=_interopRequireDefault(_uuid);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function(source){var series=_lodash2.default.cloneDeep(source);series.id=_uuid2.default.v1();series.metrics.forEach(function(metric){var id=_uuid2.default.v1();var metricId=metric.id;metric.id=id;series.terms_order_by===metricId&&(series.terms_order_by=id);series.metrics.filter(function(r){return r.field===metricId}).forEach(function(r){return r.field=id});series.metrics.filter(function(r){return"calculation"===r.type&&r.variables.some(function(v){return v.field===metricId})}).forEach(function(r){r.variables.filter(function(v){return v.field===metricId}).forEach(function(v){v.id=_uuid2.default.v1();v.field=id})})});return series};module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _series=__webpack_require__(4579);var _series2=_interopRequireDefault(_series);var _series3=__webpack_require__(4610);var _series4=_interopRequireDefault(_series3);var _series5=__webpack_require__(4611);var _series6=_interopRequireDefault(_series5);var _series7=__webpack_require__(4612);var _series8=_interopRequireDefault(_series7);var _series9=__webpack_require__(4614);var _series10=_interopRequireDefault(_series9);var _series11=__webpack_require__(4615);var _series12=_interopRequireDefault(_series11);var _reactAnythingSortable=__webpack_require__(301);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var lookup={top_n:_series6.default,table:_series8.default,metric:_series4.default,timeseries:_series2.default,gauge:_series10.default,markdown:_series12.default};var Series=function(_Component){_inherits(Series,_Component);function Series(props){_classCallCheck(this,Series);var _this=_possibleConstructorReturn(this,(Series.__proto__||Object.getPrototypeOf(Series)).call(this,props));_this.state={visible:true,selectedTab:"metrics"};_this.handleChange=_this.handleChange.bind(_this);_this.switchTab=_this.switchTab.bind(_this);_this.toggleVisible=_this.toggleVisible.bind(_this);return _this}_createClass(Series,[{key:"switchTab",value:function switchTab(selectedTab){this.setState({selectedTab:selectedTab})}},{key:"handleChange",value:function handleChange(part){if(this.props.onChange){var model=this.props.model;var doc=_lodash2.default.assign({},model,part);this.props.onChange(doc)}}},{key:"toggleVisible",value:function toggleVisible(e){e.preventDefault();this.setState({visible:!this.state.visible})}},{key:"render",value:function render(){var panel=this.props.panel;var Component=lookup[panel.type];if(Component){var params={className:this.props.className,disableAdd:this.props.disableAdd,disableDelete:this.props.disableDelete,fields:this.props.fields,name:this.props.name,onAdd:this.props.onAdd,onChange:this.handleChange,onClone:this.props.onClone,onDelete:this.props.onDelete,onMouseDown:this.props.onMouseDown,onTouchStart:this.props.onTouchStart,onShouldSortItem:this.props.onShouldSortItem,onSortableItemMount:this.props.onSortableItemMount,onSortableItemReadyToMove:this.props.onSortableItemReadyToMove,model:this.props.model,panel:this.props.panel,selectedTab:this.state.selectedTab,sortData:this.props.sortData,style:this.props.style,switchTab:this.switchTab,toggleVisible:this.toggleVisible,visible:this.state.visible};return _react2.default.createElement(Component,params)}return _react2.default.createElement("div",null,"Missing Series component for panel type: ",panel.type)}}]);return Series}(_react.Component);Series.defaultProps={name:"metrics"};Series.propTypes={className:_propTypes2.default.string,disableAdd:_propTypes2.default.bool,disableDelete:_propTypes2.default.bool,fields:_propTypes2.default.object,name:_propTypes2.default.string,onAdd:_propTypes2.default.func,onChange:_propTypes2.default.func,onClone:_propTypes2.default.func,onDelete:_propTypes2.default.func,onMouseDown:_propTypes2.default.func,onShouldSortItem:_propTypes2.default.func.isRequired,onSortableItemMount:_propTypes2.default.func,onSortableItemReadyToMove:_propTypes2.default.func,onTouchStart:_propTypes2.default.func,model:_propTypes2.default.object,panel:_propTypes2.default.object,sortData:_propTypes2.default.string};exports.default=(0,_reactAnythingSortable.sortable)(Series);module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _color_picker=__webpack_require__(258);var _color_picker2=_interopRequireDefault(_color_picker);var _add_delete_buttons=__webpack_require__(147);var _add_delete_buttons2=_interopRequireDefault(_add_delete_buttons);var _config=__webpack_require__(4582);var _config2=_interopRequireDefault(_config);var _reactAnythingSortable=__webpack_require__(301);var _reactAnythingSortable2=_interopRequireDefault(_reactAnythingSortable);var _eui=__webpack_require__(3);var _split=__webpack_require__(515);var _split2=_interopRequireDefault(_split);var _create_agg_row_render=__webpack_require__(434);var _create_agg_row_render2=_interopRequireDefault(_create_agg_row_render);var _create_text_handler=__webpack_require__(46);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _sort_keyhandler=__webpack_require__(516);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function TimeseriesSeries(props){var panel=props.panel,fields=props.fields,onAdd=props.onAdd,onDelete=props.onDelete,disableDelete=props.disableDelete,disableAdd=props.disableAdd,selectedTab=props.selectedTab,onChange=props.onChange,visible=props.visible;var defaults={label:""};var model=_extends({},defaults,props.model);var handleChange=(0,_create_text_handler2.default)(onChange);var aggs=model.metrics.map((0,_create_agg_row_render2.default)(props));var caretClassName="fa fa-caret-down";visible||(caretClassName="fa fa-caret-right");var body=null;if(visible){var metricsClassName="kbnTabs__tab";var optionsClassname="kbnTabs__tab";"metrics"===selectedTab&&(metricsClassName+="-active");"options"===selectedTab&&(optionsClassname+="-active");var seriesBody=void 0;if("metrics"===selectedTab){var handleSort=function handleSort(data){var metrics=data.map(function(id){return model.metrics.find(function(m){return m.id===id})});props.onChange({metrics:metrics})};seriesBody=_react2.default.createElement("div",null,_react2.default.createElement(_reactAnythingSortable2.default,{style:{cursor:"default"},dynamic:true,direction:"vertical",onSort:handleSort,sortHandle:"vis_editor__agg_sort"},aggs),_react2.default.createElement("div",{className:"vis_editor__series_row"},_react2.default.createElement("div",{className:"vis_editor__series_row-item"},_react2.default.createElement(_split2.default,{onChange:props.onChange,fields:fields,panel:panel,model:model}))))}else seriesBody=_react2.default.createElement(_config2.default,{fields:props.fields,model:props.model,onChange:props.onChange});body=_react2.default.createElement("div",{className:"vis_editor__series-row"},_react2.default.createElement("div",{className:"kbnTabs sm",role:"tablist"},_react2.default.createElement("button",{role:"tab","aria-selected":"metrics"===selectedTab,className:metricsClassName,onClick:function onClick(){return props.switchTab("metrics")}},"Metrics"),_react2.default.createElement("button",{role:"tab","data-test-subj":"seriesOptions","aria-selected":"options"===selectedTab,className:optionsClassname,onClick:function onClick(){return props.switchTab("options")}},"Options")),seriesBody)}var colorPicker=_react2.default.createElement(_color_picker2.default,{disableTrash:true,onChange:props.onChange,name:"color",value:model.color});var dragHandle=void 0;props.disableDelete||(dragHandle=_react2.default.createElement(_eui.EuiToolTip,{content:"Sort"},_react2.default.createElement("button",{className:"vis_editor__sort thor__button-outlined-default sm","aria-label":"Sort series by pressing up/down",onKeyDown:(0,_sort_keyhandler.createUpDownHandler)(props.onShouldSortItem)},_react2.default.createElement("i",{className:"fa fa-sort"}))));return _react2.default.createElement("div",{className:props.className+" vis_editor__series",style:props.style,onMouseDown:props.onMouseDown,onTouchStart:props.onTouchStart},_react2.default.createElement("div",{className:"vis_editor__container"},_react2.default.createElement("div",{className:"vis_editor__series-details"},_react2.default.createElement("button",{className:"vis_editor__series-visibility-toggle",onClick:props.toggleVisible,"aria-label":"Toggle series editor","aria-expanded":props.visible},_react2.default.createElement("i",{className:caretClassName})),colorPicker,_react2.default.createElement("div",{className:"vis_editor__row vis_editor__row_item"},_react2.default.createElement("input",{className:"vis_editor__input-grows",onChange:handleChange("label"),placeholder:"Label",value:model.label})),dragHandle,_react2.default.createElement(_add_delete_buttons2.default,{addTooltip:"Add Series",deleteTooltip:"Delete Series",cloneTooltip:"Clone Series",onDelete:onDelete,onClone:props.onClone,onAdd:onAdd,disableDelete:disableDelete,disableAdd:disableAdd}))),body)}TimeseriesSeries.propTypes={className:_propTypes2.default.string,colorPicker:_propTypes2.default.bool,disableAdd:_propTypes2.default.bool,disableDelete:_propTypes2.default.bool,fields:_propTypes2.default.object,name:_propTypes2.default.string,onAdd:_propTypes2.default.func,onChange:_propTypes2.default.func,onClone:_propTypes2.default.func,onDelete:_propTypes2.default.func,onMouseDown:_propTypes2.default.func,onShouldSortItem:_propTypes2.default.func.isRequired,onSortableItemMount:_propTypes2.default.func,onSortableItemReadyToMove:_propTypes2.default.func,onTouchStart:_propTypes2.default.func,model:_propTypes2.default.object,panel:_propTypes2.default.object,selectedTab:_propTypes2.default.string,sortData:_propTypes2.default.string,style:_propTypes2.default.object,switchTab:_propTypes2.default.func,toggleVisible:_propTypes2.default.func,visible:_propTypes2.default.bool};exports.default=TimeseriesSeries;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CustomColorPicker=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _common=__webpack_require__(50);var _ChromeFields=__webpack_require__(1134);var _ChromeFields2=_interopRequireDefault(_ChromeFields);var _ChromePointer=__webpack_require__(1135);var _ChromePointer2=_interopRequireDefault(_ChromePointer);var _ChromePointerCircle=__webpack_require__(1136);var _ChromePointerCircle2=_interopRequireDefault(_ChromePointerCircle);var _CompactColor=__webpack_require__(1137);var _CompactColor2=_interopRequireDefault(_CompactColor);var _color=__webpack_require__(136);var _color2=_interopRequireDefault(_color);var _reactAddonsShallowCompare=__webpack_require__(4581);var _reactAddonsShallowCompare2=_interopRequireDefault(_reactAddonsShallowCompare);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var CustomColorPicker=exports.CustomColorPicker=function(_Component){_inherits(CustomColorPicker,_Component);function CustomColorPicker(props){_classCallCheck(this,CustomColorPicker);var _this=_possibleConstructorReturn(this,(CustomColorPicker.__proto__||Object.getPrototypeOf(CustomColorPicker)).call(this,props));_this.handleChange=_this.handleChange.bind(_this);return _this}_createClass(CustomColorPicker,[{key:"shouldComponentUpdate",value:function shouldComponentUpdate(nextProps,nextState){return(0,_reactAddonsShallowCompare2.default)(nextProps,nextState)}},{key:"handleChange",value:function handleChange(data){this.props.onChange(data)}},{key:"render",value:function render(){var _this2=this;var rgb=this.props.rgb;var styles={active:{background:"rgba("+rgb.r+", "+rgb.g+", "+rgb.b+", "+rgb.a+")"},Saturation:{radius:"2px 2px 0 0 "},Hue:{radius:"2px"},Alpha:{radius:"2px"}};var handleSwatchChange=function handleSwatchChange(data){data.hex?_color2.default.isValidHex(data.hex)&&_this2.props.onChange({hex:data.hex,source:"hex"}):_this2.props.onChange(data)};var swatches=this.props.colors.map(function(c){return _react2.default.createElement(_CompactColor2.default,{key:c,color:c,onClick:handleSwatchChange})});return _react2.default.createElement("div",{className:"custom-picker color_picker"},_react2.default.createElement("div",{className:"color_picker__saturation"},_react2.default.createElement(_common.Saturation,_extends({style:styles.Saturation},this.props,{pointer:_ChromePointerCircle2.default,onChange:this.handleChange}))),_react2.default.createElement("div",{className:"color_picker__body"},_react2.default.createElement("div",{className:"color_picker__controls flexbox-fix"},_react2.default.createElement("div",{className:this.props.disableAlpha?"color_picker__color-disable_alpha":"color_picker__color"},_react2.default.createElement("div",{className:this.props.disableAlpha?"color_picker__swatch-disable_alpha":"color_picker__swatch"},_react2.default.createElement("div",{className:"color_picker__active"}),_react2.default.createElement(_common.Checkboard,null))),_react2.default.createElement("div",{className:"color_picker__toggles"},_react2.default.createElement("div",{className:this.props.disableAlpha?"color_picker__hue-disable_alpha":"color_picker__hue"},_react2.default.createElement(_common.Hue,_extends({style:styles.Hue},this.props,{pointer:_ChromePointer2.default,onChange:this.handleChange}))),_react2.default.createElement("div",{className:this.props.disableAlpha?"color_picker__alpha-disable_alpha":"color_picker__alpha"},_react2.default.createElement(_common.Alpha,_extends({style:styles.Alpha},this.props,{pointer:_ChromePointer2.default,onChange:this.handleChange}))))),_react2.default.createElement(_ChromeFields2.default,_extends({},this.props,{onChange:this.handleChange,disableAlpha:this.props.disableAlpha})),_react2.default.createElement("div",{className:"color_picker__swatches flexbox-fix"},swatches)))}}]);return CustomColorPicker}(_react.Component);CustomColorPicker.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#0F1419","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"]};CustomColorPicker.propTypes={color:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.object]),onChangeComplete:_propTypes2.default.func,onChange:_propTypes2.default.func};exports.default=(0,_common.ColorWrap)(CustomColorPicker)},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _data_format_picker=__webpack_require__(910);var _data_format_picker2=_interopRequireDefault(_data_format_picker);var _create_select_handler=__webpack_require__(45);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _yes_no=__webpack_require__(259);var _yes_no2=_interopRequireDefault(_yes_no);var _create_text_handler=__webpack_require__(46);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _index_pattern=__webpack_require__(326);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function TimeseriesConfig(props){var handleSelectChange=(0,_create_select_handler2.default)(props.onChange);var handleTextChange=(0,_create_text_handler2.default)(props.onChange);var defaults={fill:"",line_width:"",point_size:"",value_template:"{{value}}",offset_time:"",split_color_mode:"gradient",axis_min:"",axis_max:"",stacked:"none",steps:0};var model=_extends({},defaults,props.model);var htmlId=(0,_eui.htmlIdGenerator)();var stackedOptions=[{label:"None",value:"none"},{label:"Stacked",value:"stacked"},{label:"Percent",value:"percent"}];var selectedStackedOption=stackedOptions.find(function(option){return model.stacked===option.value});var positionOptions=[{label:"Right",value:"right"},{label:"Left",value:"left"}];var selectedAxisPosOption=positionOptions.find(function(option){return model.axis_position===option.value});var chartTypeOptions=[{label:"Bar",value:"bar"},{label:"Line",value:"line"}];var selectedChartTypeOption=chartTypeOptions.find(function(option){return model.chart_type===option.value});var splitColorOptions=[{label:"Gradient",value:"gradient"},{label:"Rainbow",value:"rainbow"}];var selectedSplitColorOption=splitColorOptions.find(function(option){return model.split_color_mode===option.value});var type=void 0;"line"===model.chart_type&&(type=_react2.default.createElement("div",{className:"vis_editor__series_config-row"},_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("chartType")},"Chart Type"),_react2.default.createElement("div",{className:"vis_editor__item"},_react2.default.createElement(_eui.EuiComboBox,{isClearable:false,id:htmlId("chartType"),options:chartTypeOptions,selectedOptions:selectedChartTypeOption?[selectedChartTypeOption]:[],onChange:handleSelectChange("chart_type"),singleSelection:true})),_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("stacked")},"Stacked"),_react2.default.createElement("div",{className:"vis_editor__item"},_react2.default.createElement(_eui.EuiComboBox,{isClearable:false,id:htmlId("stacked"),options:stackedOptions,selectedOptions:selectedStackedOption?[selectedStackedOption]:[],onChange:handleSelectChange("stacked"),singleSelection:true})),_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("fill")},"Fill (0 to 1)"),_react2.default.createElement("input",{id:htmlId("fill"),className:"vis_editor__input-grows",type:"number",step:"0.1",onChange:handleTextChange("fill"),value:model.fill}),_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("lineWidth")},"Line Width"),_react2.default.createElement("input",{id:htmlId("lineWidth"),className:"vis_editor__input-grows",type:"number",onChange:handleTextChange("line_width"),value:model.line_width}),_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("pointSize")},"Point Size"),_react2.default.createElement("input",{id:htmlId("pointSize"),className:"vis_editor__input-grows",type:"number",onChange:handleTextChange("point_size"),value:model.point_size}),_react2.default.createElement("div",{className:"vis_editor__label"},"Steps"),_react2.default.createElement(_yes_no2.default,{value:model.steps,name:"steps",onChange:props.onChange})));"bar"===model.chart_type&&(type=_react2.default.createElement("div",{className:"vis_editor__series_config-row"},_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("chartType")},"Chart Type"),_react2.default.createElement("div",{className:"vis_editor__item"},_react2.default.createElement(_eui.EuiComboBox,{isClearable:false,id:htmlId("chartType"),options:chartTypeOptions,selectedOptions:selectedChartTypeOption?[selectedChartTypeOption]:[],onChange:handleSelectChange("chart_type"),singleSelection:true})),_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("stacked")},"Stacked"),_react2.default.createElement("div",{className:"vis_editor__item"},_react2.default.createElement(_eui.EuiComboBox,{isClearable:false,id:htmlId("stacked"),options:stackedOptions,selectedOptions:selectedStackedOption?[selectedStackedOption]:[],onChange:handleSelectChange("stacked"),singleSelection:true})),_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("fill")},"Fill (0 to 1)"),_react2.default.createElement("input",{id:htmlId("fill"),className:"vis_editor__input-grows",type:"number",step:"0.5",onChange:handleTextChange("fill"),value:model.fill}),_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("lineWidth")},"Line Width"),_react2.default.createElement("input",{id:htmlId("lineWidth"),className:"vis_editor__input-grows",type:"number",onChange:handleTextChange("line_width"),value:model.line_width})));var disableSeparateYaxis=!model.separate_axis;return _react2.default.createElement("div",null,_react2.default.createElement("div",{className:"vis_editor__series_config-container"},_react2.default.createElement("div",{className:"vis_editor__series_config-row"},_react2.default.createElement(_data_format_picker2.default,{onChange:handleSelectChange("formatter"),value:model.formatter}),_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("template")},"Template (eg.",_react2.default.createElement("code",null,"{{value}}/s"),")"),_react2.default.createElement("input",{id:htmlId("template"),className:"vis_editor__input-grows",onChange:handleTextChange("value_template"),value:model.value_template})),type,_react2.default.createElement("div",{className:"vis_editor__series_config-row"},_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("offset")},"Offset series time by (1m, 1h, 1w, 1d)"),_react2.default.createElement("input",{id:htmlId("offset"),"data-test-subj":"offsetTimeSeries",className:"vis_editor__input-grows",type:"text",onChange:handleTextChange("offset_time"),value:model.offset_time}),_react2.default.createElement("div",{className:"vis_editor__label"},"Hide in Legend"),_react2.default.createElement(_yes_no2.default,{value:model.hide_in_legend,name:"hide_in_legend",onChange:props.onChange}),_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("splitColor")},"Split Color Theme"),_react2.default.createElement("div",{className:"vis_editor__row_item"},_react2.default.createElement(_eui.EuiComboBox,{isClearable:false,id:htmlId("splitColor"),options:splitColorOptions,selectedOptions:selectedSplitColorOption?[selectedSplitColorOption]:[],onChange:handleSelectChange("split_color_mode"),singleSelection:true}))),_react2.default.createElement("div",{className:"vis_editor__series_config-row"},_react2.default.createElement("div",{className:"vis_editor__label"},"Separate Axis"),_react2.default.createElement(_yes_no2.default,{value:model.separate_axis,name:"separate_axis",onChange:props.onChange}),_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("axisMin")},"Axis Min"),_react2.default.createElement("input",{id:htmlId("axisMin"),className:"vis_editor__input-grows",type:"number",disabled:disableSeparateYaxis,onChange:handleTextChange("axis_min"),value:model.axis_min}),_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("axisMax")},"Axis Max"),_react2.default.createElement("input",{id:htmlId("axisMax"),className:"vis_editor__input-grows",type:"number",disabled:disableSeparateYaxis,onChange:handleTextChange("axis_max"),value:model.axis_max}),_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("axisPos")},"Axis Position"),_react2.default.createElement("div",{className:"vis_editor__row_item"},_react2.default.createElement(_eui.EuiComboBox,{isClearable:false,isDisabled:disableSeparateYaxis,id:htmlId("axisPos"),options:positionOptions,selectedOptions:selectedAxisPosOption?[selectedAxisPosOption]:[],onChange:handleSelectChange("axis_position"),singleSelection:true}))),_react2.default.createElement("div",{className:"vis_editor__series_config-row"},_react2.default.createElement("div",{className:"vis_editor__label"},"Override Index Pattern"),_react2.default.createElement(_yes_no2.default,{value:model.override_index_pattern,name:"override_index_pattern",onChange:props.onChange}),_react2.default.createElement(_index_pattern.IndexPattern,_extends({},props,{prefix:"series_",className:"vis_editor__row_item vis_editor__row",disabled:!model.override_index_pattern,"with-interval":true}))),_react2.default.createElement("div",{className:"vis_editor__series_config-row"},_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("series_filter")},"Filter"),_react2.default.createElement("input",{id:htmlId("series_filter"),className:"vis_editor__input-grows",type:"text",onChange:handleTextChange("filter"),value:model.filter}))))}TimeseriesConfig.propTypes={fields:_propTypes2.default.object,model:_propTypes2.default.object,onChange:_propTypes2.default.func};exports.default=TimeseriesConfig;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=byType;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function byType(type){return function(field){switch(type){case"numeric":return _lodash2.default.includes(["number"],field.type);case"string":return _lodash2.default.includes(["string","keyword","text"],field.type);case"date":return _lodash2.default.includes(["date"],field.type);default:return true}}}module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SplitByTerms=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _group_by_select=__webpack_require__(657);var _group_by_select2=_interopRequireDefault(_group_by_select);var _create_text_handler=__webpack_require__(46);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _create_select_handler=__webpack_require__(45);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _field_select=__webpack_require__(260);var _field_select2=_interopRequireDefault(_field_select);var _metric_select=__webpack_require__(327);var _metric_select2=_interopRequireDefault(_metric_select);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SplitByTerms=exports.SplitByTerms=function SplitByTerms(props){var handleTextChange=(0,_create_text_handler2.default)(props.onChange);var handleSelectChange=(0,_create_select_handler2.default)(props.onChange);var indexPattern=props.indexPattern;var defaults={terms_direction:"desc",terms_size:10,terms_order_by:"_count"};var model=_extends({},defaults,props.model);var metrics=model.metrics;var defaultCount={value:"_count",label:"Doc Count (default)"};var terms={value:"_term",label:"Terms"};var dirOptions=[{value:"desc",label:"Descending"},{value:"asc",label:"Ascending"}];var selectedDirectionOption=dirOptions.find(function(option){return model.terms_direction===option.value});return _react2.default.createElement("div",{className:"vis_editor__split-container"},_react2.default.createElement("div",{className:"vis_editor__label"},"Group By"),_react2.default.createElement("div",{className:"vis_editor__split-selects"},_react2.default.createElement(_group_by_select2.default,{value:model.split_mode,onChange:handleSelectChange("split_mode")})),_react2.default.createElement("div",{className:"vis_editor__label"},"By"),_react2.default.createElement("div",{className:"vis_editor__item"},_react2.default.createElement(_field_select2.default,{indexPattern:indexPattern,onChange:handleSelectChange("terms_field"),value:model.terms_field,fields:props.fields})),_react2.default.createElement("div",{className:"vis_editor__label"},"Top"),_react2.default.createElement("input",{placeholder:"Size...",type:"number",value:model.terms_size,className:"vis_editor__split-term_count",onChange:handleTextChange("terms_size")}),_react2.default.createElement("div",{className:"vis_editor__label"},"Order By"),_react2.default.createElement("div",{className:"vis_editor__split-aggs"},_react2.default.createElement(_metric_select2.default,{metrics:metrics,clearable:false,additionalOptions:[defaultCount,terms],onChange:handleSelectChange("terms_order_by"),restrict:"basic",value:model.terms_order_by})),_react2.default.createElement("div",{className:"vis_editor__label"},"Direction"),_react2.default.createElement("div",{className:"vis_editor__split-aggs"},_react2.default.createElement(_eui.EuiComboBox,{isClearable:false,options:dirOptions,selectedOptions:selectedDirectionOption?[selectedDirectionOption]:[],onChange:handleSelectChange("terms_direction"),singleSelection:true})))};SplitByTerms.propTypes={model:_propTypes2.default.object,onChange:_propTypes2.default.func,indexPattern:_propTypes2.default.string,fields:_propTypes2.default.object}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getAncestors(siblings,item){var ancestors=item.id&&[item.id]||[];siblings.forEach(function(sib){_lodash2.default.includes(ancestors,sib.field)&&ancestors.push(sib.id)});return ancestors}exports.default=function(siblings,model){var ancestors=getAncestors(siblings,model);return siblings.filter(function(row){return!_lodash2.default.includes(ancestors,row.id)})};module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SplitByFilter=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _create_text_handler=__webpack_require__(46);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _create_select_handler=__webpack_require__(45);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _group_by_select=__webpack_require__(657);var _group_by_select2=_interopRequireDefault(_group_by_select);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SplitByFilter=exports.SplitByFilter=function SplitByFilter(props){var onChange=props.onChange;var defaults={filter:""};var model=_extends({},defaults,props.model);var handleTextChange=(0,_create_text_handler2.default)(onChange);var handleSelectChange=(0,_create_select_handler2.default)(onChange);return _react2.default.createElement("div",{className:"vis_editor__split-container"},_react2.default.createElement("div",{className:"vis_editor__label"},"Group By"),_react2.default.createElement("div",{className:"vis_editor__split-selects"},_react2.default.createElement(_group_by_select2.default,{value:model.split_mode,onChange:handleSelectChange("split_mode")})),_react2.default.createElement("div",{className:"vis_editor__label"},"Query String"),_react2.default.createElement("input",{className:"vis_editor__split-filter",value:model.filter,onChange:handleTextChange("filter")}))};SplitByFilter.propTypes={model:_propTypes2.default.object,onChange:_propTypes2.default.func}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _create_select_handler=__webpack_require__(45);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _group_by_select=__webpack_require__(657);var _group_by_select2=_interopRequireDefault(_group_by_select);var _filter_items=__webpack_require__(4588);var _filter_items2=_interopRequireDefault(_filter_items);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function SplitByFilters(props){var onChange=props.onChange,model=props.model;var handleSelectChange=(0,_create_select_handler2.default)(onChange);return _react2.default.createElement("div",{className:"vis_editor__item"},_react2.default.createElement("div",{className:"vis_editor__split-container"},_react2.default.createElement("div",{className:"vis_editor__label"},"Group By"),_react2.default.createElement("div",{className:"vis_editor__split-selects"},_react2.default.createElement(_group_by_select2.default,{value:model.split_mode,onChange:handleSelectChange("split_mode")}))),_react2.default.createElement("div",{className:"vis_editor__split-container"},_react2.default.createElement("div",{className:"vis_editor__row vis_editor__item"},_react2.default.createElement(_filter_items2.default,{name:"split_filters",model:model,onChange:onChange}))))}SplitByFilters.propTypes={model:_propTypes2.default.object,onChange:_propTypes2.default.func};exports.default=SplitByFilters;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _collection_actions=__webpack_require__(328);var collectionActions=_interopRequireWildcard(_collection_actions);var _add_delete_buttons=__webpack_require__(147);var _add_delete_buttons2=_interopRequireDefault(_add_delete_buttons);var _color_picker=__webpack_require__(258);var _color_picker2=_interopRequireDefault(_color_picker);var _uuid=__webpack_require__(78);var _uuid2=_interopRequireDefault(_uuid);function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);newObj.default=obj;return newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true}):obj[key]=value;return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var FilterItems=function(_Component){_inherits(FilterItems,_Component);function FilterItems(props){_classCallCheck(this,FilterItems);var _this=_possibleConstructorReturn(this,(FilterItems.__proto__||Object.getPrototypeOf(FilterItems)).call(this,props));_this.renderRow=_this.renderRow.bind(_this);return _this}_createClass(FilterItems,[{key:"handleChange",value:function handleChange(item,name){var _this2=this;return function(e){var handleChange=collectionActions.handleChange.bind(null,_this2.props);handleChange(_lodash2.default.assign({},item,_defineProperty({},name,_lodash2.default.get(e,"value",_lodash2.default.get(e,"target.value")))))}}},{key:"renderRow",value:function renderRow(row,i,items){var _this3=this;var defaults={filter:"",label:""};var model=_extends({},defaults,row);var handleChange=function handleChange(part){var fn=collectionActions.handleChange.bind(null,_this3.props);fn(_lodash2.default.assign({},model,part))};var newFilter=function newFilter(){return{color:_this3.props.model.color,id:_uuid2.default.v1()}};var handleAdd=collectionActions.handleAdd.bind(null,this.props,newFilter);var handleDelete=collectionActions.handleDelete.bind(null,this.props,model);return _react2.default.createElement("div",{className:"vis_editor__split-filter-row",key:model.id},_react2.default.createElement("div",{className:"vis_editor__split-filter-color"},_react2.default.createElement(_color_picker2.default,{disableTrash:true,onChange:handleChange,name:"color",value:model.color})),_react2.default.createElement("div",{className:"vis_editor__split-filter-item"},_react2.default.createElement("input",{placeholder:"Filter",className:"vis_editor__input-grows-100",type:"text",onChange:this.handleChange(model,"filter"),value:model.filter})),_react2.default.createElement("div",{className:"vis_editor__split-filter-item"},_react2.default.createElement("input",{placeholder:"Label",className:"vis_editor__input-grows-100",type:"text",onChange:this.handleChange(model,"label"),value:model.label})),_react2.default.createElement("div",{className:"vis_editor__split-filter-control"},_react2.default.createElement(_add_delete_buttons2.default,{onAdd:handleAdd,onDelete:handleDelete,disableDelete:items.length<2})))}},{key:"render",value:function render(){var _props=this.props,model=_props.model,name=_props.name;if(!model[name])return _react2.default.createElement("div",null);var rows=model[name].map(this.renderRow);return _react2.default.createElement("div",{className:"vis_editor__split-filters"},rows)}}]);return FilterItems}(_react.Component);FilterItems.propTypes={name:_propTypes2.default.string,model:_propTypes2.default.object,onChange:_propTypes2.default.func};exports.default=FilterItems;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _create_select_handler=__webpack_require__(45);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _group_by_select=__webpack_require__(657);var _group_by_select2=_interopRequireDefault(_group_by_select);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function SplitByEverything(props){var onChange=props.onChange,model=props.model;var handleSelectChange=(0,_create_select_handler2.default)(onChange);return _react2.default.createElement("div",{className:"vis_editor__split-container"},_react2.default.createElement("div",{className:"vis_editor__label"},"Group By"),_react2.default.createElement("div",{className:"vis_editor__split-selects"},_react2.default.createElement(_group_by_select2.default,{value:model.split_mode,onChange:handleSelectChange("split_mode")})))}SplitByEverything.propTypes={model:_propTypes2.default.object,onChange:_propTypes2.default.func};exports.default=SplitByEverything;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _new_metric_agg_fn=__webpack_require__(911);var _new_metric_agg_fn2=_interopRequireDefault(_new_metric_agg_fn);var _agg_lookup=__webpack_require__(1540);var _collection_actions=__webpack_require__(328);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function(props,items){return function(doc){1!==items.length||(0,_agg_lookup.isBasicAgg)(doc)?_collection_actions.handleChange.call(null,props,doc):_collection_actions.handleAdd.call(null,props,function(){var metric=(0,_new_metric_agg_fn2.default)();metric.type=doc.type;var incompatPipelines=["calculation","series_agg"];_lodash2.default.contains(incompatPipelines,doc.type)||(metric.field=doc.id);return metric})}};module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _agg_to_component=__webpack_require__(4592);var _agg_to_component2=_interopRequireDefault(_agg_to_component);var _reactAnythingSortable=__webpack_require__(301);var _unsupported_agg=__webpack_require__(4609);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function Agg(props){var model=props.model;var Component=_agg_to_component2.default[model.type];Component||(Component=_unsupported_agg.UnsupportedAgg);var style=_extends({cursor:"default"},props.style);return _react2.default.createElement("div",{className:props.className,style:style,onMouseDown:props.onMouseDown,onTouchStart:props.onTouchStart},_react2.default.createElement(Component,{fields:props.fields,disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onChange:props.onChange,onDelete:props.onDelete,panel:props.panel,series:props.series,siblings:props.siblings}))}Agg.propTypes={disableDelete:_propTypes2.default.bool,fields:_propTypes2.default.object,model:_propTypes2.default.object,onAdd:_propTypes2.default.func,onChange:_propTypes2.default.func,onDelete:_propTypes2.default.func,onMouseDown:_propTypes2.default.func,onSortableItemMount:_propTypes2.default.func,onSortableItemReadyToMove:_propTypes2.default.func,onTouchStart:_propTypes2.default.func,panel:_propTypes2.default.object,series:_propTypes2.default.object,siblings:_propTypes2.default.array,sortData:_propTypes2.default.string};exports.default=(0,_reactAnythingSortable.sortable)(Agg);module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _moving_average=__webpack_require__(4593);var _derivative=__webpack_require__(4594);var _calculation=__webpack_require__(4595);var _calculation2=_interopRequireDefault(_calculation);var _std_agg=__webpack_require__(4596);var _std_agg2=_interopRequireDefault(_std_agg);var _percentile=__webpack_require__(4597);var _percentile2=_interopRequireDefault(_percentile);var _cumulative_sum=__webpack_require__(4598);var _cumulative_sum2=_interopRequireDefault(_cumulative_sum);var _std_deviation=__webpack_require__(4599);var _std_sibling=__webpack_require__(4600);var _series_agg=__webpack_require__(4601);var _series_agg2=_interopRequireDefault(_series_agg);var _serial_diff=__webpack_require__(4602);var _positive_only=__webpack_require__(4603);var _filter_ratio=__webpack_require__(4604);var _percentile_rank=__webpack_require__(4605);var _static=__webpack_require__(4606);var _math=__webpack_require__(4607);var _math2=_interopRequireDefault(_math);var _top_hit=__webpack_require__(4608);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default={count:_std_agg2.default,avg:_std_agg2.default,max:_std_agg2.default,min:_std_agg2.default,sum:_std_agg2.default,std_deviation:_std_deviation.StandardDeviationAgg,sum_of_squares:_std_agg2.default,variance:_std_agg2.default,avg_bucket:_std_sibling.StandardSiblingAgg,max_bucket:_std_sibling.StandardSiblingAgg,min_bucket:_std_sibling.StandardSiblingAgg,sum_bucket:_std_sibling.StandardSiblingAgg,variance_bucket:_std_sibling.StandardSiblingAgg,sum_of_squares_bucket:_std_sibling.StandardSiblingAgg,std_deviation_bucket:_std_sibling.StandardSiblingAgg,percentile:_percentile2.default,percentile_rank:_percentile_rank.PercentileRankAgg,cardinality:_std_agg2.default,value_count:_std_agg2.default,calculation:_calculation2.default,cumulative_sum:_cumulative_sum2.default,moving_average:_moving_average.MovingAverageAgg,derivative:_derivative.DerivativeAgg,series_agg:_series_agg2.default,serial_diff:_serial_diff.SerialDiffAgg,filter_ratio:_filter_ratio.FilterRatioAgg,positive_only:_positive_only.PositiveOnlyAgg,static:_static.Static,math:_math2.default,top_hit:_top_hit.TopHitAgg};module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MovingAverageAgg=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _agg_row=__webpack_require__(90);var _agg_row2=_interopRequireDefault(_agg_row);var _agg_select=__webpack_require__(97);var _agg_select2=_interopRequireDefault(_agg_select);var _metric_select=__webpack_require__(327);var _metric_select2=_interopRequireDefault(_metric_select);var _create_change_handler=__webpack_require__(98);var _create_change_handler2=_interopRequireDefault(_create_change_handler);var _create_select_handler=__webpack_require__(45);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _create_text_handler=__webpack_require__(46);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _create_number_handler=__webpack_require__(1545);var _create_number_handler2=_interopRequireDefault(_create_number_handler);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var MovingAverageAgg=exports.MovingAverageAgg=function MovingAverageAgg(props){var siblings=props.siblings;var defaults={settings:"",minimize:0,window:"",model:"simple"};var model=_extends({},defaults,props.model);var handleChange=(0,_create_change_handler2.default)(props.onChange,model);var handleSelectChange=(0,_create_select_handler2.default)(handleChange);var handleTextChange=(0,_create_text_handler2.default)(handleChange);var handleNumberChange=(0,_create_number_handler2.default)(handleChange);var modelOptions=[{label:"Simple",value:"simple"},{label:"Linear",value:"linear"},{label:"Exponentially Weighted",value:"ewma"},{label:"Holt-Linear",value:"holt"},{label:"Holt-Winters",value:"holt_winters"}];var minimizeOptions=[{label:"True",value:1},{label:"False",value:0}];var htmlId=(0,_eui.htmlIdGenerator)();var selectedModelOption=modelOptions.find(function(option){return model.model===option.value});var selectedMinimizeOption=minimizeOptions.find(function(option){return model.minimize===option.value});return _react2.default.createElement(_agg_row2.default,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings},_react2.default.createElement("div",{className:"vis_editor__row_item"},_react2.default.createElement("div",{className:"vis_editor__agg_row-item"},_react2.default.createElement("div",{className:"vis_editor__row_item"},_react2.default.createElement("div",{className:"vis_editor__label"},"Aggregation"),_react2.default.createElement(_agg_select2.default,{panelType:props.panel.type,siblings:props.siblings,value:model.type,onChange:handleSelectChange("type")})),_react2.default.createElement("div",{className:"vis_editor__row_item"},_react2.default.createElement("div",{className:"vis_editor__label"},"Metric"),_react2.default.createElement(_metric_select2.default,{onChange:handleSelectChange("field"),metrics:siblings,metric:model,value:model.field}))),_react2.default.createElement("div",{className:"vis_editor__agg_row-item"},_react2.default.createElement("div",{className:"vis_editor__row_item"},_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("model")},"Model"),_react2.default.createElement(_eui.EuiComboBox,{isClearable:false,id:htmlId("model"),placeholder:"Select...",options:modelOptions,selectedOptions:selectedModelOption?[selectedModelOption]:[],onChange:handleSelectChange("model"),singleSelection:true})),_react2.default.createElement("div",{className:"vis_editor__row_item"},_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("windowSize")},"Window Size"),_react2.default.createElement("input",{id:htmlId("windowSize"),className:"vis_editor__input-grows-100",type:"text",onChange:handleNumberChange("window"),value:model.window})),_react2.default.createElement("div",{className:"vis_editor__row_item"},_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("minimize")},"Minimize"),_react2.default.createElement(_eui.EuiComboBox,{id:htmlId("minimize"),placeholder:"Select...",options:minimizeOptions,selectedOptions:selectedMinimizeOption?[selectedMinimizeOption]:[],onChange:handleSelectChange("minimize"),singleSelection:true})),_react2.default.createElement("div",{className:"vis_editor__row_item"},_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("windowSize")},"Predict"),_react2.default.createElement("input",{id:htmlId("predict"),className:"vis_editor__input-grows-100",type:"text",onChange:handleNumberChange("predict"),value:model.predict}))),_react2.default.createElement("div",{className:"vis_editor__agg_row-item"},_react2.default.createElement("div",{className:"vis_editor__row_item"},_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("settings")},"Settings (",_react2.default.createElement("code",null,"Key=Value")," space-delimited)"),_react2.default.createElement("input",{id:htmlId("settings"),className:"vis_editor__input-grows-100",type:"text",onChange:handleTextChange("settings"),value:model.settings})))))};MovingAverageAgg.propTypes={disableDelete:_propTypes2.default.bool,fields:_propTypes2.default.object,model:_propTypes2.default.object,onAdd:_propTypes2.default.func,onChange:_propTypes2.default.func,onDelete:_propTypes2.default.func,panel:_propTypes2.default.object,series:_propTypes2.default.object,siblings:_propTypes2.default.array}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DerivativeAgg=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _agg_select=__webpack_require__(97);var _agg_select2=_interopRequireDefault(_agg_select);var _metric_select=__webpack_require__(327);var _metric_select2=_interopRequireDefault(_metric_select);var _agg_row=__webpack_require__(90);var _agg_row2=_interopRequireDefault(_agg_row);var _create_change_handler=__webpack_require__(98);var _create_change_handler2=_interopRequireDefault(_create_change_handler);var _create_select_handler=__webpack_require__(45);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _create_text_handler=__webpack_require__(46);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DerivativeAgg=exports.DerivativeAgg=function DerivativeAgg(props){var siblings=props.siblings;var defaults={unit:""};var model=_extends({},defaults,props.model);var handleChange=(0,_create_change_handler2.default)(props.onChange,model);var handleSelectChange=(0,_create_select_handler2.default)(handleChange);var handleTextChange=(0,_create_text_handler2.default)(handleChange);var htmlId=(0,_eui.htmlIdGenerator)();return _react2.default.createElement(_agg_row2.default,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings},_react2.default.createElement("div",{className:"vis_editor__row_item"},_react2.default.createElement("div",{className:"vis_editor__label"},"Aggregation"),_react2.default.createElement(_agg_select2.default,{panelType:props.panel.type,siblings:props.siblings,value:model.type,onChange:handleSelectChange("type")})),_react2.default.createElement("div",{className:"vis_editor__row_item"},_react2.default.createElement("div",{className:"vis_editor__label"},"Metric"),_react2.default.createElement(_metric_select2.default,{onChange:handleSelectChange("field"),metrics:siblings,metric:model,value:model.field})),_react2.default.createElement("div",null,_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("units")},"Units (1s, 1m, etc)"),_react2.default.createElement("input",{id:htmlId("units"),className:"vis_editor__input",onChange:handleTextChange("unit"),value:model.unit,type:"text"})))};DerivativeAgg.propTypes={disableDelete:_propTypes2.default.bool,fields:_propTypes2.default.object,model:_propTypes2.default.object,onAdd:_propTypes2.default.func,onChange:_propTypes2.default.func,onDelete:_propTypes2.default.func,panel:_propTypes2.default.object,series:_propTypes2.default.object,siblings:_propTypes2.default.array}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _uuid=__webpack_require__(78);var _uuid2=_interopRequireDefault(_uuid);var _agg_row=__webpack_require__(90);var _agg_row2=_interopRequireDefault(_agg_row);var _agg_select=__webpack_require__(97);var _agg_select2=_interopRequireDefault(_agg_select);var _create_change_handler=__webpack_require__(98);var _create_change_handler2=_interopRequireDefault(_create_change_handler);var _create_select_handler=__webpack_require__(45);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _create_text_handler=__webpack_require__(46);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _vars=__webpack_require__(1546);var _vars2=_interopRequireDefault(_vars);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var CalculationAgg=function(_Component){_inherits(CalculationAgg,_Component);function CalculationAgg(){_classCallCheck(this,CalculationAgg);return _possibleConstructorReturn(this,(CalculationAgg.__proto__||Object.getPrototypeOf(CalculationAgg)).apply(this,arguments))}_createClass(CalculationAgg,[{key:"componentWillMount",value:function componentWillMount(){this.props.model.variables||this.props.onChange(_lodash2.default.assign({},this.props.model,{variables:[{id:_uuid2.default.v1()}]}))}},{key:"render",value:function render(){var siblings=this.props.siblings;var defaults={script:""};var model=_extends({},defaults,this.props.model);var handleChange=(0,_create_change_handler2.default)(this.props.onChange,model);var handleSelectChange=(0,_create_select_handler2.default)(handleChange);var handleTextChange=(0,_create_text_handler2.default)(handleChange);var htmlId=(0,_eui.htmlIdGenerator)();return _react2.default.createElement(_agg_row2.default,{disableDelete:this.props.disableDelete,model:this.props.model,onAdd:this.props.onAdd,onDelete:this.props.onDelete,siblings:this.props.siblings},_react2.default.createElement("div",{className:"vis_editor__row_item"},_react2.default.createElement("div",null,_react2.default.createElement("div",{className:"vis_editor__label"},"Aggregation"),_react2.default.createElement(_agg_select2.default,{panelType:this.props.panel.type,siblings:this.props.siblings,value:model.type,onChange:handleSelectChange("type")}),_react2.default.createElement("div",{className:"vis_editor__variables"},_react2.default.createElement("div",{className:"vis_editor__label"},"Variables"),_react2.default.createElement(_vars2.default,{metrics:siblings,onChange:handleChange,name:"variables",model:model})),_react2.default.createElement("div",{className:"vis_editor__row_item"},_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("painless")},"Painless Script - Variables are keys on the ",_react2.default.createElement("code",null,"params"),"object, i.e. ",_react2.default.createElement("code",null,"params.<name>"),". To access the bucket interval (in milliseconds) use ",_react2.default.createElement("code",null,"params._interval"),"."),_react2.default.createElement("input",{id:htmlId("painless"),className:"vis_editor__input-grows-100",type:"text",onChange:handleTextChange("script"),value:model.script})))))}}]);return CalculationAgg}(_react.Component);CalculationAgg.propTypes={disableDelete:_propTypes2.default.bool,fields:_propTypes2.default.object,model:_propTypes2.default.object,onAdd:_propTypes2.default.func,onChange:_propTypes2.default.func,onDelete:_propTypes2.default.func,panel:_propTypes2.default.object,series:_propTypes2.default.object,siblings:_propTypes2.default.array};exports.default=CalculationAgg;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _agg_select=__webpack_require__(97);var _agg_select2=_interopRequireDefault(_agg_select);var _field_select=__webpack_require__(260);var _field_select2=_interopRequireDefault(_field_select);var _agg_row=__webpack_require__(90);var _agg_row2=_interopRequireDefault(_agg_row);var _create_change_handler=__webpack_require__(98);var _create_change_handler2=_interopRequireDefault(_create_change_handler);var _create_select_handler=__webpack_require__(45);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function StandardAgg(props){var model=props.model,panel=props.panel,series=props.series,fields=props.fields;var handleChange=(0,_create_change_handler2.default)(props.onChange,model);var handleSelectChange=(0,_create_select_handler2.default)(handleChange);var restrict="numeric";"cardinality"===model.type&&(restrict="none");var indexPattern=series.override_index_pattern&&series.series_index_pattern||panel.index_pattern;var htmlId=(0,_eui.htmlIdGenerator)();return _react2.default.createElement(_agg_row2.default,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings},_react2.default.createElement("div",{className:"vis_editor__item"},_react2.default.createElement("div",{className:"vis_editor__label"},"Aggregation"),_react2.default.createElement(_agg_select2.default,{panelType:props.panel.type,siblings:props.siblings,value:model.type,onChange:handleSelectChange("type")})),"count"!==model.type?_react2.default.createElement("div",{className:"vis_editor__item"},_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("field")},"Field"),_react2.default.createElement(_field_select2.default,{id:htmlId("field"),fields:fields,type:model.type,restrict:restrict,indexPattern:indexPattern,value:model.field,onChange:handleSelectChange("field")})):null)}StandardAgg.propTypes={disableDelete:_propTypes2.default.bool,fields:_propTypes2.default.object,model:_propTypes2.default.object,onAdd:_propTypes2.default.func,onChange:_propTypes2.default.func,onDelete:_propTypes2.default.func,panel:_propTypes2.default.object,series:_propTypes2.default.object,siblings:_propTypes2.default.array};exports.default=StandardAgg;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _agg_select=__webpack_require__(97);var _agg_select2=_interopRequireDefault(_agg_select);var _field_select=__webpack_require__(260);var _field_select2=_interopRequireDefault(_field_select);var _agg_row=__webpack_require__(90);var _agg_row2=_interopRequireDefault(_agg_row);var _collection_actions=__webpack_require__(328);var collectionActions=_interopRequireWildcard(_collection_actions);var _add_delete_buttons=__webpack_require__(147);var _add_delete_buttons2=_interopRequireDefault(_add_delete_buttons);var _uuid=__webpack_require__(78);var _uuid2=_interopRequireDefault(_uuid);var _create_change_handler=__webpack_require__(98);var _create_change_handler2=_interopRequireDefault(_create_change_handler);var _create_select_handler=__webpack_require__(45);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _eui=__webpack_require__(3);function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);newObj.default=obj;return newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var newPercentile=function newPercentile(opts){return _lodash2.default.assign({id:_uuid2.default.v1(),mode:"line",shade:.2},opts)};var Percentiles=function(_Component){_inherits(Percentiles,_Component);function Percentiles(props){_classCallCheck(this,Percentiles);var _this=_possibleConstructorReturn(this,(Percentiles.__proto__||Object.getPrototypeOf(Percentiles)).call(this,props));_this.renderRow=_this.renderRow.bind(_this);return _this}_createClass(Percentiles,[{key:"handleTextChange",value:function handleTextChange(item,name){var _this2=this;return function(e){var handleChange=collectionActions.handleChange.bind(null,_this2.props);var part={};part[name]=_lodash2.default.get(e,"[0].value",_lodash2.default.get(e,"target.value"));handleChange(_lodash2.default.assign({},item,part))}}},{key:"renderRow",value:function renderRow(row,i,items){var defaults={value:"",percentile:"",shade:""};var model=_extends({},defaults,row);var handleAdd=collectionActions.handleAdd.bind(null,this.props,newPercentile);var handleDelete=collectionActions.handleDelete.bind(null,this.props,model);var modeOptions=[{label:"Line",value:"line"},{label:"Band",value:"band"}];var optionsStyle={};"line"===model.mode&&(optionsStyle.display="none");var htmlId=(0,_eui.htmlIdGenerator)(model.id);var selectedModeOption=modeOptions.find(function(option){return model.mode===option.value});return _react2.default.createElement("div",{className:"vis_editor__percentiles-row",key:model.id},_react2.default.createElement("div",{className:"vis_editor__percentiles-content"},_react2.default.createElement("input",{"aria-label":"Percentile",placeholder:"Percentile",className:"vis_editor__input-grows",type:"number",step:"1",onChange:this.handleTextChange(model,"value"),value:model.value}),_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("mode")},"Mode"),_react2.default.createElement("div",{className:"vis_editor__row_item"},_react2.default.createElement(_eui.EuiComboBox,{isClearable:false,id:htmlId("mode"),options:modeOptions,selectedOptions:selectedModeOption?[selectedModeOption]:[],onChange:this.handleTextChange(model,"mode"),singleSelection:true})),_react2.default.createElement("label",{style:optionsStyle,className:"vis_editor__label",htmlFor:htmlId("fillTo")},"Fill To"),_react2.default.createElement("input",{id:htmlId("fillTo"),style:optionsStyle,className:"vis_editor__input-grows",type:"number",step:"1",onChange:this.handleTextChange(model,"percentile"),value:model.percentile}),_react2.default.createElement("label",{style:optionsStyle,className:"vis_editor__label",htmlFor:htmlId("shade")},"Shade (0 to 1)"),_react2.default.createElement("input",{id:htmlId("shade"),style:optionsStyle,className:"vis_editor__input-grows",type:"number",step:"0.1",onChange:this.handleTextChange(model,"shade"),value:model.shade})),_react2.default.createElement(_add_delete_buttons2.default,{onAdd:handleAdd,onDelete:handleDelete,disableDelete:items.length<2}))}},{key:"render",value:function render(){var _props=this.props,model=_props.model,name=_props.name;if(!model[name])return _react2.default.createElement("div",null);var rows=model[name].map(this.renderRow);return _react2.default.createElement("div",{className:"vis_editor__percentiles"},rows)}}]);return Percentiles}(_react.Component);Percentiles.defaultProps={name:"percentile"};Percentiles.propTypes={name:_propTypes2.default.string,model:_propTypes2.default.object,onChange:_propTypes2.default.func};var PercentileAgg=function(_Component2){_inherits(PercentileAgg,_Component2);function PercentileAgg(){_classCallCheck(this,PercentileAgg);return _possibleConstructorReturn(this,(PercentileAgg.__proto__||Object.getPrototypeOf(PercentileAgg)).apply(this,arguments))}_createClass(PercentileAgg,[{key:"componentWillMount",value:function componentWillMount(){this.props.model.percentiles||this.props.onChange(_lodash2.default.assign({},this.props.model,{percentiles:[newPercentile({value:50})]}))}},{key:"render",value:function render(){var _props2=this.props,series=_props2.series,model=_props2.model,panel=_props2.panel,fields=_props2.fields;var handleChange=(0,_create_change_handler2.default)(this.props.onChange,model);var handleSelectChange=(0,_create_select_handler2.default)(handleChange);var indexPattern=series.override_index_pattern&&series.series_index_pattern||panel.index_pattern;return _react2.default.createElement(_agg_row2.default,{disableDelete:this.props.disableDelete,model:this.props.model,onAdd:this.props.onAdd,onDelete:this.props.onDelete,siblings:this.props.siblings},_react2.default.createElement("div",{className:"vis_editor__row_item"},_react2.default.createElement("div",{className:"vis_editor__agg_row-item"},_react2.default.createElement("div",{className:"vis_editor__row_item"},_react2.default.createElement("div",{className:"vis_editor__label"},"Aggregation"),_react2.default.createElement(_agg_select2.default,{panelType:this.props.panel.type,siblings:this.props.siblings,value:model.type,onChange:handleSelectChange("type")})),_react2.default.createElement("div",{className:"vis_editor__row_item"},_react2.default.createElement("div",{className:"vis_editor__label"},"Field"),_react2.default.createElement(_field_select2.default,{fields:fields,type:model.type,restrict:"numeric",indexPattern:indexPattern,value:model.field,onChange:handleSelectChange("field")}))),_react2.default.createElement(Percentiles,{onChange:handleChange,name:"percentiles",model:model})))}}]);return PercentileAgg}(_react.Component);PercentileAgg.propTypes={disableDelete:_propTypes2.default.bool,fields:_propTypes2.default.object,model:_propTypes2.default.object,onAdd:_propTypes2.default.func,onChange:_propTypes2.default.func,onDelete:_propTypes2.default.func,panel:_propTypes2.default.object,series:_propTypes2.default.object,siblings:_propTypes2.default.array};exports.default=PercentileAgg;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _agg_row=__webpack_require__(90);var _agg_row2=_interopRequireDefault(_agg_row);var _agg_select=__webpack_require__(97);var _agg_select2=_interopRequireDefault(_agg_select);var _metric_select=__webpack_require__(327);var _metric_select2=_interopRequireDefault(_metric_select);var _create_change_handler=__webpack_require__(98);var _create_change_handler2=_interopRequireDefault(_create_change_handler);var _create_select_handler=__webpack_require__(45);var _create_select_handler2=_interopRequireDefault(_create_select_handler);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function CumulativeSumAgg(props){var model=props.model,siblings=props.siblings;var handleChange=(0,_create_change_handler2.default)(props.onChange,model);var handleSelectChange=(0,_create_select_handler2.default)(handleChange);return _react2.default.createElement(_agg_row2.default,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings},_react2.default.createElement("div",{className:"vis_editor__row_item"},_react2.default.createElement("div",{className:"vis_editor__label"},"Aggregation"),_react2.default.createElement(_agg_select2.default,{panelType:props.panel.type,siblings:props.siblings,value:model.type,onChange:handleSelectChange("type")})),_react2.default.createElement("div",{className:"vis_editor__row_item"},_react2.default.createElement("div",{className:"vis_editor__label"},"Metric"),_react2.default.createElement(_metric_select2.default,{onChange:handleSelectChange("field"),metrics:siblings,metric:model,value:model.field})))}CumulativeSumAgg.propTypes={disableDelete:_propTypes2.default.bool,fields:_propTypes2.default.object,model:_propTypes2.default.object,onAdd:_propTypes2.default.func,onChange:_propTypes2.default.func,onDelete:_propTypes2.default.func,panel:_propTypes2.default.object,series:_propTypes2.default.object,siblings:_propTypes2.default.array};exports.default=CumulativeSumAgg;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StandardDeviationAgg=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _agg_select=__webpack_require__(97);var _agg_select2=_interopRequireDefault(_agg_select);var _field_select=__webpack_require__(260);var _field_select2=_interopRequireDefault(_field_select);var _agg_row=__webpack_require__(90);var _agg_row2=_interopRequireDefault(_agg_row);var _create_change_handler=__webpack_require__(98);var _create_change_handler2=_interopRequireDefault(_create_change_handler);var _create_select_handler=__webpack_require__(45);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _create_text_handler=__webpack_require__(46);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var StandardDeviationAgg=exports.StandardDeviationAgg=function StandardDeviationAgg(props){var series=props.series,panel=props.panel,fields=props.fields;var defaults={sigma:""};var model=_extends({},defaults,props.model);var modeOptions=[{label:"Raw",value:"raw"},{label:"Upper Bound",value:"upper"},{label:"Lower Bound",value:"lower"}];"table"!==panel.type&&modeOptions.push({label:"Bounds Band",value:"band"});var handleChange=(0,_create_change_handler2.default)(props.onChange,model);var handleSelectChange=(0,_create_select_handler2.default)(handleChange);var handleTextChange=(0,_create_text_handler2.default)(handleChange);var indexPattern=series.override_index_pattern&&series.series_index_pattern||panel.index_pattern;var htmlId=(0,_eui.htmlIdGenerator)();var selectedModeOption=modeOptions.find(function(option){return model.mode===option.value});return _react2.default.createElement(_agg_row2.default,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings},_react2.default.createElement("div",{className:"vis_editor__row_item"},_react2.default.createElement("div",{className:"vis_editor__label"},"Aggregation"),_react2.default.createElement(_agg_select2.default,{panelType:props.panel.type,siblings:props.siblings,value:model.type,onChange:handleSelectChange("type")})),_react2.default.createElement("div",{className:"vis_editor__std_deviation-field"},_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("field")},"Field"),_react2.default.createElement(_field_select2.default,{id:htmlId("field"),fields:fields,type:model.type,restrict:"numeric",indexPattern:indexPattern,value:model.field,onChange:handleSelectChange("field")})),_react2.default.createElement("div",{className:"vis_editor__std_deviation-sigma_item"},_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("sigma")},"Sigma"),_react2.default.createElement("input",{id:htmlId("sigma"),className:"vis_editor__std_deviation-sigma",value:model.sigma,onChange:handleTextChange("sigma")})),_react2.default.createElement("div",{className:"vis_editor__row_item"},_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("mode")},"Mode"),_react2.default.createElement(_eui.EuiComboBox,{id:htmlId("mode"),options:modeOptions,selectedOptions:selectedModeOption?[selectedModeOption]:[],onChange:handleSelectChange("mode"),singleSelection:true})))};StandardDeviationAgg.propTypes={disableDelete:_propTypes2.default.bool,fields:_propTypes2.default.object,model:_propTypes2.default.object,onAdd:_propTypes2.default.func,onChange:_propTypes2.default.func,onDelete:_propTypes2.default.func,panel:_propTypes2.default.object,series:_propTypes2.default.object,siblings:_propTypes2.default.array}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StandardSiblingAgg=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _agg_row=__webpack_require__(90);var _agg_row2=_interopRequireDefault(_agg_row);var _metric_select=__webpack_require__(327);var _metric_select2=_interopRequireDefault(_metric_select);var _agg_select=__webpack_require__(97);var _agg_select2=_interopRequireDefault(_agg_select);var _create_change_handler=__webpack_require__(98);var _create_change_handler2=_interopRequireDefault(_create_change_handler);var _create_select_handler=__webpack_require__(45);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _create_text_handler=__webpack_require__(46);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var StandardSiblingAgg=exports.StandardSiblingAgg=function StandardSiblingAgg(props){var siblings=props.siblings;var defaults={sigma:""};var model=_extends({},defaults,props.model);var htmlId=(0,_eui.htmlIdGenerator)();var handleChange=(0,_create_change_handler2.default)(props.onChange,model);var handleSelectChange=(0,_create_select_handler2.default)(handleChange);var handleTextChange=(0,_create_text_handler2.default)(handleChange);var stdDev={};if("std_deviation_bucket"===model.type){stdDev.sigma=_react2.default.createElement("div",{className:"vis_editor__std_deviation-sigma_item"},_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("sigma")},"Sigma"),_react2.default.createElement("input",{id:htmlId("sigma"),className:"vis_editor__std_deviation-sigma",value:model.sigma,onChange:handleTextChange("sigma")}));var modeOptions=[{label:"Raw",value:"raw"},{label:"Upper Bound",value:"upper"},{label:"Lower Bound",value:"lower"},{label:"Bounds Band",value:"band"}];var selectedModeOption=modeOptions.find(function(option){return model.mode===option.value});stdDev.mode=_react2.default.createElement("div",{className:"vis_editor__row_item"},_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("mode")},"Mode"),_react2.default.createElement(_eui.EuiComboBox,{id:htmlId("mode"),options:modeOptions,selectedOptions:selectedModeOption?[selectedModeOption]:[],onChange:handleSelectChange("mode"),singleSelection:true}))}return _react2.default.createElement(_agg_row2.default,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings},_react2.default.createElement("div",{className:"vis_editor__row_item"},_react2.default.createElement("div",{className:"vis_editor__label"},"Aggregation"),_react2.default.createElement(_agg_select2.default,{panelType:props.panel.type,siblings:props.siblings,value:model.type,onChange:handleSelectChange("type")})),_react2.default.createElement("div",{className:"vis_editor__std_sibling-metric"},_react2.default.createElement("div",{className:"vis_editor__label"},"Metric"),_react2.default.createElement(_metric_select2.default,{onChange:handleSelectChange("field"),exclude:["percentile"],metrics:siblings,metric:model,value:model.field})),stdDev.sigma,stdDev.mode)};StandardSiblingAgg.propTypes={disableDelete:_propTypes2.default.bool,fields:_propTypes2.default.object,model:_propTypes2.default.object,onAdd:_propTypes2.default.func,onChange:_propTypes2.default.func,onDelete:_propTypes2.default.func,panel:_propTypes2.default.object,series:_propTypes2.default.object,siblings:_propTypes2.default.array}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _agg_select=__webpack_require__(97);var _agg_select2=_interopRequireDefault(_agg_select);var _agg_row=__webpack_require__(90);var _agg_row2=_interopRequireDefault(_agg_row);var _create_change_handler=__webpack_require__(98);var _create_change_handler2=_interopRequireDefault(_create_change_handler);var _create_select_handler=__webpack_require__(45);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function SeriesAgg(props){var panel=props.panel,model=props.model;var handleChange=(0,_create_change_handler2.default)(props.onChange,model);var handleSelectChange=(0,_create_select_handler2.default)(handleChange);var htmlId=(0,_eui.htmlIdGenerator)();var functionOptions=[{label:"Sum",value:"sum"},{label:"Max",value:"max"},{label:"Min",value:"min"},{label:"Avg",value:"mean"},{label:"Overall Sum",value:"overall_sum"},{label:"Overall Max",value:"overall_max"},{label:"Overall Min",value:"overall_min"},{label:"Overall Avg",value:"overall_avg"},{label:"Cumulative Sum",value:"cumulative_sum"}];var selectedFunctionOption=functionOptions.find(function(option){return model.function===option.value});if("table"===panel.type)return _react2.default.createElement(_agg_row2.default,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings},_react2.default.createElement("div",{className:"vis_editor__item"},_react2.default.createElement("div",{className:"vis_editor__label"},"Series Agg is not compatible with the table visualization.")));return _react2.default.createElement(_agg_row2.default,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings},_react2.default.createElement("div",{className:"vis_editor__item"},_react2.default.createElement("div",{className:"vis_editor__label"},"Aggregation"),_react2.default.createElement(_agg_select2.default,{panelType:panel.type,siblings:props.siblings,value:model.type,onChange:handleSelectChange("type")})),_react2.default.createElement("div",{className:"vis_editor__item"},_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("function")},"Function"),_react2.default.createElement(_eui.EuiComboBox,{id:htmlId("function"),options:functionOptions,selectedOptions:selectedFunctionOption?[selectedFunctionOption]:[],onChange:handleSelectChange("function"),singleSelection:true})))}SeriesAgg.propTypes={disableDelete:_propTypes2.default.bool,fields:_propTypes2.default.object,model:_propTypes2.default.object,onAdd:_propTypes2.default.func,onChange:_propTypes2.default.func,onDelete:_propTypes2.default.func,panel:_propTypes2.default.object,series:_propTypes2.default.object,siblings:_propTypes2.default.array};exports.default=SeriesAgg;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SerialDiffAgg=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _agg_select=__webpack_require__(97);var _agg_select2=_interopRequireDefault(_agg_select);var _metric_select=__webpack_require__(327);var _metric_select2=_interopRequireDefault(_metric_select);var _agg_row=__webpack_require__(90);var _agg_row2=_interopRequireDefault(_agg_row);var _create_change_handler=__webpack_require__(98);var _create_change_handler2=_interopRequireDefault(_create_change_handler);var _create_select_handler=__webpack_require__(45);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _create_number_handler=__webpack_require__(1545);var _create_number_handler2=_interopRequireDefault(_create_number_handler);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SerialDiffAgg=exports.SerialDiffAgg=function SerialDiffAgg(props){var siblings=props.siblings;var defaults={lag:""};var model=_extends({},defaults,props.model);var handleChange=(0,_create_change_handler2.default)(props.onChange,model);var handleSelectChange=(0,_create_select_handler2.default)(handleChange);var handleNumberChange=(0,_create_number_handler2.default)(handleChange);var htmlId=(0,_eui.htmlIdGenerator)();return _react2.default.createElement(_agg_row2.default,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings},_react2.default.createElement("div",{className:"vis_editor__row_item"},_react2.default.createElement("div",{className:"vis_editor__label"},"Aggregation"),_react2.default.createElement(_agg_select2.default,{panelType:props.panel.type,siblings:props.siblings,value:model.type,onChange:handleSelectChange("type")})),_react2.default.createElement("div",{className:"vis_editor__row_item"},_react2.default.createElement("div",{className:"vis_editor__label"},"Metric"),_react2.default.createElement(_metric_select2.default,{onChange:handleSelectChange("field"),metrics:siblings,metric:model,value:model.field})),_react2.default.createElement("div",null,_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("lag")},"Lag"),_react2.default.createElement("input",{id:htmlId("lag"),className:"vis_editor__input",onChange:handleNumberChange("lag"),value:model.lag,type:"text"})))};SerialDiffAgg.propTypes={disableDelete:_propTypes2.default.bool,fields:_propTypes2.default.object,model:_propTypes2.default.object,onAdd:_propTypes2.default.func,onChange:_propTypes2.default.func,onDelete:_propTypes2.default.func,panel:_propTypes2.default.object,series:_propTypes2.default.object,siblings:_propTypes2.default.array}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PositiveOnlyAgg=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _agg_select=__webpack_require__(97);var _agg_select2=_interopRequireDefault(_agg_select);var _metric_select=__webpack_require__(327);var _metric_select2=_interopRequireDefault(_metric_select);var _agg_row=__webpack_require__(90);var _agg_row2=_interopRequireDefault(_agg_row);var _create_change_handler=__webpack_require__(98);var _create_change_handler2=_interopRequireDefault(_create_change_handler);var _create_select_handler=__webpack_require__(45);var _create_select_handler2=_interopRequireDefault(_create_select_handler);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PositiveOnlyAgg=exports.PositiveOnlyAgg=function PositiveOnlyAgg(props){var siblings=props.siblings;var defaults={unit:""};var model=_extends({},defaults,props.model);var handleChange=(0,_create_change_handler2.default)(props.onChange,model);var handleSelectChange=(0,_create_select_handler2.default)(handleChange);return _react2.default.createElement(_agg_row2.default,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings},_react2.default.createElement("div",{className:"vis_editor__row_item"},_react2.default.createElement("div",{className:"vis_editor__label"},"Aggregation"),_react2.default.createElement(_agg_select2.default,{panelType:props.panel.type,siblings:props.siblings,value:model.type,onChange:handleSelectChange("type")})),_react2.default.createElement("div",{className:"vis_editor__row_item"},_react2.default.createElement("div",{className:"vis_editor__label"},"Metric"),_react2.default.createElement(_metric_select2.default,{onChange:handleSelectChange("field"),metrics:siblings,metric:model,value:model.field})))};PositiveOnlyAgg.propTypes={disableDelete:_propTypes2.default.bool,fields:_propTypes2.default.object,model:_propTypes2.default.object,onAdd:_propTypes2.default.func,onChange:_propTypes2.default.func,onDelete:_propTypes2.default.func,panel:_propTypes2.default.object,series:_propTypes2.default.object,siblings:_propTypes2.default.array}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterRatioAgg=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _agg_select=__webpack_require__(97);var _agg_select2=_interopRequireDefault(_agg_select);var _field_select=__webpack_require__(260);var _field_select2=_interopRequireDefault(_field_select);var _agg_row=__webpack_require__(90);var _agg_row2=_interopRequireDefault(_agg_row);var _create_change_handler=__webpack_require__(98);var _create_change_handler2=_interopRequireDefault(_create_change_handler);var _create_select_handler=__webpack_require__(45);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _create_text_handler=__webpack_require__(46);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var FilterRatioAgg=exports.FilterRatioAgg=function FilterRatioAgg(props){var series=props.series,fields=props.fields,panel=props.panel;var handleChange=(0,_create_change_handler2.default)(props.onChange,props.model);var handleSelectChange=(0,_create_select_handler2.default)(handleChange);var handleTextChange=(0,_create_text_handler2.default)(handleChange);var indexPattern=series.override_index_pattern&&series.series_index_pattern||panel.index_pattern;var defaults={numerator:"*",denominator:"*",metric_agg:"count"};var model=_extends({},defaults,props.model);var htmlId=(0,_eui.htmlIdGenerator)();var restrictMode="cardinality"===model.metric_agg?"none":"numeric";return _react2.default.createElement(_agg_row2.default,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings},_react2.default.createElement("div",{style:{flex:"1 0 auto"}},_react2.default.createElement("div",{style:{flex:"1 0 auto",display:"flex"}},_react2.default.createElement("div",{className:"vis_editor__row_item"},_react2.default.createElement("div",{className:"vis_editor__label"},"Aggregation"),_react2.default.createElement(_agg_select2.default,{panelType:props.panel.type,siblings:props.siblings,value:model.type,onChange:handleSelectChange("type")})),_react2.default.createElement("div",{className:"vis_editor__row_item"},_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("numerator")},"Numerator"),_react2.default.createElement("input",{id:htmlId("numerator"),className:"vis_editor__input-grows-100",onChange:handleTextChange("numerator"),value:model.numerator,type:"text"})),_react2.default.createElement("div",{className:"vis_editor__row_item"},_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("denominator")},"Denominator"),_react2.default.createElement("input",{id:htmlId("denominator"),className:"vis_editor__input-grows-100",onChange:handleTextChange("denominator"),value:model.denominator,type:"text"}))),_react2.default.createElement("div",{style:{flex:"1 0 auto",display:"flex",marginTop:"10px"}},_react2.default.createElement("div",{className:"vis_editor__row_item"},_react2.default.createElement("div",{className:"vis_editor__label"},"Metric Aggregation"),_react2.default.createElement(_agg_select2.default,{siblings:props.siblings,panelType:"metrics",value:model.metric_agg,onChange:handleSelectChange("metric_agg")})),"count"!==model.metric_agg?_react2.default.createElement("div",{className:"vis_editor__row_item"},_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("aggField")},"Field"),_react2.default.createElement(_field_select2.default,{id:htmlId("aggField"),fields:fields,type:model.metric_agg,restrict:restrictMode,indexPattern:indexPattern,value:model.field,onChange:handleSelectChange("field")})):null)))};FilterRatioAgg.propTypes={disableDelete:_propTypes2.default.bool,fields:_propTypes2.default.object,model:_propTypes2.default.object,onAdd:_propTypes2.default.func,onChange:_propTypes2.default.func,onDelete:_propTypes2.default.func,panel:_propTypes2.default.object,series:_propTypes2.default.object,siblings:_propTypes2.default.array}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PercentileRankAgg=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _agg_select=__webpack_require__(97);var _agg_select2=_interopRequireDefault(_agg_select);var _field_select=__webpack_require__(260);var _field_select2=_interopRequireDefault(_field_select);var _agg_row=__webpack_require__(90);var _agg_row2=_interopRequireDefault(_agg_row);var _create_change_handler=__webpack_require__(98);var _create_change_handler2=_interopRequireDefault(_create_change_handler);var _create_select_handler=__webpack_require__(45);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _create_text_handler=__webpack_require__(46);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PercentileRankAgg=exports.PercentileRankAgg=function PercentileRankAgg(props){var series=props.series,panel=props.panel,fields=props.fields;var defaults={value:""};var model=_extends({},defaults,props.model);var handleChange=(0,_create_change_handler2.default)(props.onChange,model);var handleSelectChange=(0,_create_select_handler2.default)(handleChange);var handleTextChange=(0,_create_text_handler2.default)(handleChange);var indexPattern=series.override_index_pattern&&series.series_index_pattern||panel.index_pattern;var htmlId=(0,_eui.htmlIdGenerator)();return _react2.default.createElement(_agg_row2.default,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings},_react2.default.createElement("div",{className:"vis_editor__row_item"},_react2.default.createElement("div",{className:"vis_editor__label"},"Aggregation"),_react2.default.createElement(_agg_select2.default,{panelType:props.panel.type,siblings:props.siblings,value:model.type,onChange:handleSelectChange("type")})),_react2.default.createElement("div",{className:"vis_editor__row_item"},_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("field")},"Field"),_react2.default.createElement(_field_select2.default,{id:htmlId("field"),fields:fields,type:model.type,restrict:"numeric",indexPattern:indexPattern,value:model.field,onChange:handleSelectChange("field")})),_react2.default.createElement("div",{className:"vis_editor__percentile_rank_value"},_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("value")},"Value"),_react2.default.createElement("input",{id:htmlId("value"),className:"vis_editor__input-grows",value:model.value,onChange:handleTextChange("value")})))};PercentileRankAgg.propTypes={disableDelete:_propTypes2.default.bool,fields:_propTypes2.default.object,model:_propTypes2.default.object,onAdd:_propTypes2.default.func,onChange:_propTypes2.default.func,onDelete:_propTypes2.default.func,panel:_propTypes2.default.object,series:_propTypes2.default.object,siblings:_propTypes2.default.array}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Static=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _agg_select=__webpack_require__(97);var _agg_select2=_interopRequireDefault(_agg_select);var _agg_row=__webpack_require__(90);var _agg_row2=_interopRequireDefault(_agg_row);var _create_change_handler=__webpack_require__(98);var _create_change_handler2=_interopRequireDefault(_create_change_handler);var _create_select_handler=__webpack_require__(45);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _create_text_handler=__webpack_require__(46);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Static=exports.Static=function Static(props){var handleChange=(0,_create_change_handler2.default)(props.onChange,props.model);var handleSelectChange=(0,_create_select_handler2.default)(handleChange);var handleTextChange=(0,_create_text_handler2.default)(handleChange);var defaults={numerator:"*",denominator:"*",metric_agg:"count"};var model=_extends({},defaults,props.model);var htmlId=(0,_eui.htmlIdGenerator)();return _react2.default.createElement(_agg_row2.default,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings},_react2.default.createElement("div",{style:{flex:"1 0 auto"}},_react2.default.createElement("div",{style:{flex:"1 0 auto",display:"flex"}},_react2.default.createElement("div",{className:"vis_editor__row_item"},_react2.default.createElement("div",{className:"vis_editor__label"},"Aggregation"),_react2.default.createElement(_agg_select2.default,{panelType:props.panel.type,siblings:props.siblings,value:model.type,onChange:handleSelectChange("type")})),_react2.default.createElement("div",{className:"vis_editor__row_item"},_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("staticValue")},"Static Value"),_react2.default.createElement("input",{id:htmlId("staticValue"),className:"vis_editor__input-grows-100",onChange:handleTextChange("value"),value:model.value,step:"0.1",type:"number"})))))};Static.propTypes={disableDelete:_propTypes2.default.bool,fields:_propTypes2.default.object,model:_propTypes2.default.object,onAdd:_propTypes2.default.func,onChange:_propTypes2.default.func,onDelete:_propTypes2.default.func,panel:_propTypes2.default.object,series:_propTypes2.default.object,siblings:_propTypes2.default.array}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _uuid=__webpack_require__(78);var _uuid2=_interopRequireDefault(_uuid);var _agg_row=__webpack_require__(90);var _agg_row2=_interopRequireDefault(_agg_row);var _agg_select=__webpack_require__(97);var _agg_select2=_interopRequireDefault(_agg_select);var _create_change_handler=__webpack_require__(98);var _create_change_handler2=_interopRequireDefault(_create_change_handler);var _create_select_handler=__webpack_require__(45);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _create_text_handler=__webpack_require__(46);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _vars=__webpack_require__(1546);var _vars2=_interopRequireDefault(_vars);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var MathAgg=function(_Component){_inherits(MathAgg,_Component);function MathAgg(){_classCallCheck(this,MathAgg);return _possibleConstructorReturn(this,(MathAgg.__proto__||Object.getPrototypeOf(MathAgg)).apply(this,arguments))}_createClass(MathAgg,[{key:"componentWillMount",value:function componentWillMount(){this.props.model.variables||this.props.onChange(_lodash2.default.assign({},this.props.model,{variables:[{id:_uuid2.default.v1()}]}))}},{key:"render",value:function render(){var siblings=this.props.siblings;var defaults={script:""};var model=_extends({},defaults,this.props.model);var handleChange=(0,_create_change_handler2.default)(this.props.onChange,model);var handleSelectChange=(0,_create_select_handler2.default)(handleChange);var handleTextChange=(0,_create_text_handler2.default)(handleChange);return _react2.default.createElement(_agg_row2.default,{disableDelete:this.props.disableDelete,model:this.props.model,onAdd:this.props.onAdd,onDelete:this.props.onDelete,siblings:this.props.siblings},_react2.default.createElement("div",{className:"vis_editor__row_item"},_react2.default.createElement("div",null,_react2.default.createElement("div",{className:"vis_editor__label"},"Aggregation"),_react2.default.createElement(_agg_select2.default,{siblings:this.props.siblings,value:model.type,onChange:handleSelectChange("type")}),_react2.default.createElement("div",{className:"vis_editor__variables"},_react2.default.createElement("div",{className:"vis_editor__label"},"Variables"),_react2.default.createElement(_vars2.default,{metrics:siblings,onChange:handleChange,name:"variables",model:model,includeSiblings:true})),_react2.default.createElement("div",{className:"vis_editor__row_item"},_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:"mathExpressionInput"},"Expression"),_react2.default.createElement("textarea",{"data-test-subj":"mathExpression",id:"mathExpressionInput","aria-describedby":"mathExpressionDescription",className:"vis_editor__input-grows-100",onChange:handleTextChange("script")},model.script),_react2.default.createElement("div",{className:"vis_editor__note",id:"mathExpressionDescription"},"This field uses basic math expressions (see"," ",_react2.default.createElement("a",{href:"https://github.com/elastic/tinymath/blob/master/docs/functions.md",target:"_blank"},"TinyMath"),") - Variables are keys on the ",_react2.default.createElement("code",null,"params")," object, i.e. ",_react2.default.createElement("code",null,"params.<name>")," To access all the data use",_react2.default.createElement("code",null,"params._all.<name>.values")," for an array of the values and ",_react2.default.createElement("code",null,"params._all.<name>.timestamps"),"for an array of the timestamps. ",_react2.default.createElement("code",null,"params._timestamp"),"is available for the current bucket's timestamp,",_react2.default.createElement("code",null,"params._index")," is available for the current bucket's index, and ",_react2.default.createElement("code",null,"params._interval"),"s available for the interval in milliseconds.")))))}}]);return MathAgg}(_react.Component);MathAgg.propTypes={disableDelete:_propTypes2.default.bool,fields:_propTypes2.default.object,model:_propTypes2.default.object,onAdd:_propTypes2.default.func,onChange:_propTypes2.default.func,onDelete:_propTypes2.default.func,panel:_propTypes2.default.object,series:_propTypes2.default.object,siblings:_propTypes2.default.array};exports.default=MathAgg;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TopHitAgg=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _agg_row=__webpack_require__(90);var _agg_row2=_interopRequireDefault(_agg_row);var _agg_select=__webpack_require__(97);var _agg_select2=_interopRequireDefault(_agg_select);var _field_select=__webpack_require__(260);var _field_select2=_interopRequireDefault(_field_select);var _create_change_handler=__webpack_require__(98);var _create_change_handler2=_interopRequireDefault(_create_change_handler);var _create_select_handler=__webpack_require__(45);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _create_text_handler=__webpack_require__(46);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.TopHitAgg=function TopHitAgg(props){var fields=props.fields,series=props.series,panel=props.panel;var defaults={agg_with:"avg",size:1,order:"desc"};var model=_extends({},defaults,props.model);var indexPattern=series.override_index_pattern&&series.series_index_pattern||panel.index_pattern;var handleChange=(0,_create_change_handler2.default)(props.onChange,model);var handleSelectChange=(0,_create_select_handler2.default)(handleChange);var handleTextChange=(0,_create_text_handler2.default)(handleChange);var aggWithOptions=[{label:"Avg",value:"avg"},{label:"Max",value:"max"},{label:"Min",value:"min"},{label:"Sum",value:"sum"}];var orderOptions=[{label:"Asc",value:"asc"},{label:"Desc",value:"desc"}];var htmlId=(0,_eui.htmlIdGenerator)();var selectedAggWithOption=aggWithOptions.find(function(option){return model.agg_with===option.value});var selectedOrderOption=orderOptions.find(function(option){return model.order===option.value});return _react2.default.createElement(_agg_row2.default,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings},_react2.default.createElement("div",{className:"vis_editor__row_item"},_react2.default.createElement("div",{className:"vis_editor__agg_row-item"},_react2.default.createElement("div",{className:"vis_editor__row_item"},_react2.default.createElement("div",{className:"vis_editor__label"},"Aggregation"),_react2.default.createElement(_agg_select2.default,{panelType:props.panel.type,siblings:props.siblings,value:model.type,onChange:handleSelectChange("type")})),_react2.default.createElement("div",{className:"vis_editor__row_item"},_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("field")},"Field"),_react2.default.createElement(_field_select2.default,{id:htmlId("field"),fields:fields,type:model.type,restrict:"numeric",indexPattern:indexPattern,value:model.field,onChange:handleSelectChange("field")}))),_react2.default.createElement("div",{className:"vis_editor__agg_row-item"},_react2.default.createElement("div",{className:"vis_editor__row_item"},_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("size")},"Size"),_react2.default.createElement("input",{id:htmlId("size"),className:"vis_editor__input-grows-100",value:model.size,onChange:handleTextChange("size")})),_react2.default.createElement("div",{className:"vis_editor__row_item"},_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("agg_with")},"Aggregate with"),_react2.default.createElement(_eui.EuiComboBox,{isClearable:false,id:htmlId("agg_with"),placeholder:"Select...",options:aggWithOptions,selectedOptions:selectedAggWithOption?[selectedAggWithOption]:[],onChange:handleSelectChange("agg_with"),singleSelection:true})),_react2.default.createElement("div",{className:"vis_editor__row_item"},_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("order_by")},"Order by"),_react2.default.createElement(_field_select2.default,{id:htmlId("order_by"),restrict:"date",value:model.order_by,onChange:handleSelectChange("order_by"),indexPattern:indexPattern,fields:fields})),_react2.default.createElement("div",{className:"vis_editor__row_item"},_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("order")},"Order"),_react2.default.createElement(_eui.EuiComboBox,{isClearable:false,id:htmlId("order"),placeholder:"Select...",options:orderOptions,selectedOptions:selectedOrderOption?[selectedOrderOption]:[],onChange:handleSelectChange("order"),singleSelection:true})))))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UnsupportedAgg=UnsupportedAgg;var _agg_row=__webpack_require__(90);var _agg_row2=_interopRequireDefault(_agg_row);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function UnsupportedAgg(props){return _react2.default.createElement(_agg_row2.default,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings},_react2.default.createElement("div",{className:"vis_editor__row_item"},_react2.default.createElement("p",null,"The ",_react2.default.createElement("code",null,props.model.type)," aggregation is no longer supported.")))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _color_picker=__webpack_require__(258);var _color_picker2=_interopRequireDefault(_color_picker);var _add_delete_buttons=__webpack_require__(147);var _add_delete_buttons2=_interopRequireDefault(_add_delete_buttons);var _series_config=__webpack_require__(658);var _reactAnythingSortable=__webpack_require__(301);var _reactAnythingSortable2=_interopRequireDefault(_reactAnythingSortable);var _split=__webpack_require__(515);var _split2=_interopRequireDefault(_split);var _eui=__webpack_require__(3);var _create_agg_row_render=__webpack_require__(434);var _create_agg_row_render2=_interopRequireDefault(_create_agg_row_render);var _create_text_handler=__webpack_require__(46);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _sort_keyhandler=__webpack_require__(516);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function MetricSeries(props){var panel=props.panel,fields=props.fields,onAdd=props.onAdd,onChange=props.onChange,onDelete=props.onDelete,disableDelete=props.disableDelete,disableAdd=props.disableAdd,selectedTab=props.selectedTab,visible=props.visible;var defaults={label:""};var model=_extends({},defaults,props.model);var handleChange=(0,_create_text_handler2.default)(onChange);var aggs=model.metrics.map((0,_create_agg_row_render2.default)(props));var caretClassName="fa fa-caret-down";visible||(caretClassName="fa fa-caret-right");var body=null;if(visible){var metricsClassName="kbnTabs__tab";var optionsClassname="kbnTabs__tab";"metrics"===selectedTab&&(metricsClassName+="-active");"options"===selectedTab&&(optionsClassname+="-active");var seriesBody=void 0;if("metrics"===selectedTab){var handleSort=function handleSort(data){var metrics=data.map(function(id){return model.metrics.find(function(m){return m.id===id})});props.onChange({metrics:metrics})};seriesBody=_react2.default.createElement("div",null,_react2.default.createElement(_reactAnythingSortable2.default,{style:{cursor:"default"},dynamic:true,direction:"vertical",onSort:handleSort,sortHandle:"vis_editor__agg_sort"},aggs),_react2.default.createElement("div",{className:"vis_editor__series_row"},_react2.default.createElement("div",{className:"vis_editor__series_row-item"},_react2.default.createElement(_split2.default,{onChange:props.onChange,fields:fields,panel:panel,model:model}))))}else seriesBody=_react2.default.createElement(_series_config.SeriesConfig,{fields:props.fields,model:props.model,onChange:props.onChange});body=_react2.default.createElement("div",{className:"vis_editor__series-row"},_react2.default.createElement("div",{className:"kbnTabs sm",role:"tablist"},_react2.default.createElement("button",{role:"tab","aria-selected":"metrics"===selectedTab,className:metricsClassName,onClick:function onClick(){return props.switchTab("metrics")}},"Metrics"),_react2.default.createElement("button",{role:"tab","data-test-subj":"seriesOptions","aria-selected":"options"===selectedTab,className:optionsClassname,onClick:function onClick(){return props.switchTab("options")}},"Options")),seriesBody)}var colorPicker=void 0;props.colorPicker&&(colorPicker=_react2.default.createElement(_color_picker2.default,{disableTrash:true,onChange:props.onChange,name:"color",value:model.color}));var dragHandle=void 0;props.disableDelete||(dragHandle=_react2.default.createElement(_eui.EuiToolTip,{content:"Sort"},_react2.default.createElement("button",{className:"vis_editor__sort thor__button-outlined-default sm","aria-label":"Sort series by pressing up/down",onKeyDown:(0,_sort_keyhandler.createUpDownHandler)(props.onShouldSortItem)},_react2.default.createElement("i",{className:"fa fa-sort"}))));return _react2.default.createElement("div",{className:props.className+" vis_editor__series",style:props.style,onMouseDown:props.onMouseDown,onTouchStart:props.onTouchStart},_react2.default.createElement("div",{className:"vis_editor__container"},_react2.default.createElement("div",{className:"vis_editor__series-details"},_react2.default.createElement("button",{className:"vis_editor__series-visibility-toggle",onClick:props.toggleVisible,"aria-label":"Toggle series editor","aria-expanded":props.visible},_react2.default.createElement("i",{className:caretClassName})),colorPicker,_react2.default.createElement("div",{className:"vis_editor__row vis_editor__row_item"},_react2.default.createElement("input",{className:"vis_editor__input-grows",onChange:handleChange("label"),placeholder:"Label",value:model.label})),dragHandle,_react2.default.createElement(_add_delete_buttons2.default,{addTooltip:"Add Series",deleteTooltip:"Delete Series",cloneTooltip:"Clone Series",onDelete:onDelete,onClone:props.onClone,onAdd:onAdd,disableDelete:disableDelete,disableAdd:disableAdd}))),body)}MetricSeries.propTypes={className:_propTypes2.default.string,colorPicker:_propTypes2.default.bool,disableAdd:_propTypes2.default.bool,disableDelete:_propTypes2.default.bool,fields:_propTypes2.default.object,name:_propTypes2.default.string,onAdd:_propTypes2.default.func,onChange:_propTypes2.default.func,onClone:_propTypes2.default.func,onDelete:_propTypes2.default.func,onMouseDown:_propTypes2.default.func,onSortableItemMount:_propTypes2.default.func,onSortableItemReadyToMove:_propTypes2.default.func,onTouchStart:_propTypes2.default.func,model:_propTypes2.default.object,panel:_propTypes2.default.object,selectedTab:_propTypes2.default.string,sortData:_propTypes2.default.string,style:_propTypes2.default.object,switchTab:_propTypes2.default.func,toggleVisible:_propTypes2.default.func,visible:_propTypes2.default.bool};exports.default=MetricSeries;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _color_picker=__webpack_require__(258);var _color_picker2=_interopRequireDefault(_color_picker);var _add_delete_buttons=__webpack_require__(147);var _add_delete_buttons2=_interopRequireDefault(_add_delete_buttons);var _series_config=__webpack_require__(658);var _reactAnythingSortable=__webpack_require__(301);var _reactAnythingSortable2=_interopRequireDefault(_reactAnythingSortable);var _split=__webpack_require__(515);var _split2=_interopRequireDefault(_split);var _eui=__webpack_require__(3);var _create_text_handler=__webpack_require__(46);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _create_agg_row_render=__webpack_require__(434);var _create_agg_row_render2=_interopRequireDefault(_create_agg_row_render);var _sort_keyhandler=__webpack_require__(516);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function TopNSeries(props){var panel=props.panel,model=props.model,fields=props.fields,onAdd=props.onAdd,onChange=props.onChange,onDelete=props.onDelete,disableDelete=props.disableDelete,disableAdd=props.disableAdd,selectedTab=props.selectedTab,visible=props.visible;var handleChange=(0,_create_text_handler2.default)(onChange);var aggs=model.metrics.map((0,_create_agg_row_render2.default)(props));var caretClassName="fa fa-caret-down";visible||(caretClassName="fa fa-caret-right");var body=null;if(visible){var metricsClassName="kbnTabs__tab";var optionsClassname="kbnTabs__tab";"metrics"===selectedTab&&(metricsClassName+="-active");"options"===selectedTab&&(optionsClassname+="-active");var seriesBody=void 0;if("metrics"===selectedTab){var handleSort=function handleSort(data){var metrics=data.map(function(id){return model.metrics.find(function(m){return m.id===id})});props.onChange({metrics:metrics})};seriesBody=_react2.default.createElement("div",null,_react2.default.createElement(_reactAnythingSortable2.default,{style:{cursor:"default"},dynamic:true,direction:"vertical",onSort:handleSort,sortHandle:"vis_editor__agg_sort"},aggs),_react2.default.createElement("div",{className:"vis_editor__series_row"},_react2.default.createElement("div",{className:"vis_editor__series_row-item"},_react2.default.createElement(_split2.default,{onChange:props.onChange,fields:fields,panel:panel,model:model}))))}else seriesBody=_react2.default.createElement(_series_config.SeriesConfig,{fields:props.fields,model:props.model,onChange:props.onChange});body=_react2.default.createElement("div",{className:"vis_editor__series-row"},_react2.default.createElement("div",{className:"kbnTabs sm",role:"tablist"},_react2.default.createElement("button",{role:"tab","aria-selected":"metrics"===selectedTab,className:metricsClassName,onClick:function onClick(){return props.switchTab("metrics")}},"Metrics"),_react2.default.createElement("button",{role:"tab","data-test-subj":"seriesOptions","aria-selected":"options"===selectedTab,className:optionsClassname,onClick:function onClick(){return props.switchTab("options")}},"Options")),seriesBody)}var colorPicker=_react2.default.createElement(_color_picker2.default,{disableTrash:true,onChange:props.onChange,name:"color",value:model.color});var dragHandle=void 0;props.disableDelete||(dragHandle=_react2.default.createElement(_eui.EuiToolTip,{content:"Sort"},_react2.default.createElement("button",{className:"vis_editor__sort thor__button-outlined-default sm","aria-label":"Sort series by pressing up/down",onKeyDown:(0,_sort_keyhandler.createUpDownHandler)(props.onShouldSortItem)},_react2.default.createElement("i",{className:"fa fa-sort"}))));return _react2.default.createElement("div",{className:props.className+" vis_editor__series",style:props.style,onMouseDown:props.onMouseDown,onTouchStart:props.onTouchStart},_react2.default.createElement("div",{className:"vis_editor__container"},_react2.default.createElement("div",{className:"vis_editor__series-details"},_react2.default.createElement("button",{className:"vis_editor__series-visibility-toggle",onClick:props.toggleVisible,"aria-label":"Toggle series editor","aria-expanded":props.visible},_react2.default.createElement("i",{className:caretClassName})),colorPicker,_react2.default.createElement("div",{className:"vis_editor__row vis_editor__row_item"},_react2.default.createElement("input",{className:"vis_editor__input-grows",onChange:handleChange("label"),placeholder:"Label",value:model.label})),dragHandle,_react2.default.createElement(_add_delete_buttons2.default,{addTooltip:"Add Series",deleteTooltip:"Delete Series",cloneTooltip:"Clone Series",onDelete:onDelete,onClone:props.onClone,onAdd:onAdd,disableDelete:disableDelete,disableAdd:disableAdd}))),body)}TopNSeries.propTypes={className:_propTypes2.default.string,colorPicker:_propTypes2.default.bool,disableAdd:_propTypes2.default.bool,disableDelete:_propTypes2.default.bool,fields:_propTypes2.default.object,name:_propTypes2.default.string,onAdd:_propTypes2.default.func,onChange:_propTypes2.default.func,onClone:_propTypes2.default.func,onDelete:_propTypes2.default.func,onMouseDown:_propTypes2.default.func,onSortableItemMount:_propTypes2.default.func,onSortableItemReadyToMove:_propTypes2.default.func,onTouchStart:_propTypes2.default.func,model:_propTypes2.default.object,panel:_propTypes2.default.object,selectedTab:_propTypes2.default.string,sortData:_propTypes2.default.string,style:_propTypes2.default.object,switchTab:_propTypes2.default.func,toggleVisible:_propTypes2.default.func,visible:_propTypes2.default.bool};exports.default=TopNSeries;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _add_delete_buttons=__webpack_require__(147);var _add_delete_buttons2=_interopRequireDefault(_add_delete_buttons);var _config=__webpack_require__(4613);var _config2=_interopRequireDefault(_config);var _reactAnythingSortable=__webpack_require__(301);var _reactAnythingSortable2=_interopRequireDefault(_reactAnythingSortable);var _eui=__webpack_require__(3);var _create_text_handler=__webpack_require__(46);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _create_agg_row_render=__webpack_require__(434);var _create_agg_row_render2=_interopRequireDefault(_create_agg_row_render);var _sort_keyhandler=__webpack_require__(516);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function TopNSeries(props){var model=props.model,onAdd=props.onAdd,onChange=props.onChange,onDelete=props.onDelete,disableDelete=props.disableDelete,disableAdd=props.disableAdd,selectedTab=props.selectedTab,visible=props.visible;var handleChange=(0,_create_text_handler2.default)(onChange);var aggs=model.metrics.map((0,_create_agg_row_render2.default)(props));var caretClassName="fa fa-caret-down";visible||(caretClassName="fa fa-caret-right");var body=null;if(visible){var metricsClassName="kbnTabs__tab";var optionsClassname="kbnTabs__tab";"metrics"===selectedTab&&(metricsClassName+="-active");"options"===selectedTab&&(optionsClassname+="-active");var seriesBody=void 0;if("metrics"===selectedTab){var handleSort=function handleSort(data){var metrics=data.map(function(id){return model.metrics.find(function(m){return m.id===id})});props.onChange({metrics:metrics})};seriesBody=_react2.default.createElement("div",null,_react2.default.createElement(_reactAnythingSortable2.default,{style:{cursor:"default"},dynamic:true,direction:"vertical",onSort:handleSort,sortHandle:"vis_editor__agg_sort"},aggs))}else seriesBody=_react2.default.createElement(_config2.default,{panel:props.panel,fields:props.fields,model:props.model,onChange:props.onChange});body=_react2.default.createElement("div",{className:"vis_editor__series-row"},_react2.default.createElement("div",{className:"kbnTabs sm"},_react2.default.createElement("div",{className:metricsClassName,onClick:function onClick(){return props.switchTab("metrics")}},"Metrics"),_react2.default.createElement("div",{"data-test-subj":"seriesOptions",className:optionsClassname,onClick:function onClick(){return props.switchTab("options")}},"Options")),seriesBody)}var dragHandle=void 0;props.disableDelete||(dragHandle=_react2.default.createElement(_eui.EuiToolTip,{content:"Sort"},_react2.default.createElement("button",{className:"vis_editor__sort thor__button-outlined-default sm","aria-label":"Sort series by pressing up/down",onKeyDown:(0,_sort_keyhandler.createUpDownHandler)(props.onShouldSortItem)},_react2.default.createElement("i",{className:"fa fa-sort"}))));return _react2.default.createElement("div",{className:props.className+" vis_editor__series",style:props.style,onMouseDown:props.onMouseDown,onTouchStart:props.onTouchStart},_react2.default.createElement("div",{className:"vis_editor__container"},_react2.default.createElement("div",{className:"vis_editor__series-details"},_react2.default.createElement("button",{className:"vis_editor__series-visibility-toggle",onClick:props.toggleVisible},_react2.default.createElement("i",{className:caretClassName})),_react2.default.createElement("div",{className:"vis_editor__row vis_editor__row_item"},_react2.default.createElement("input",{"aria-label":"Label",className:"vis_editor__input-grows",onChange:handleChange("label"),placeholder:"Label",value:model.label})),dragHandle,_react2.default.createElement(_add_delete_buttons2.default,{addTooltip:"Add Series",deleteTooltip:"Delete Series",cloneTooltip:"Clone Series",onDelete:onDelete,onClone:props.onClone,onAdd:onAdd,disableDelete:disableDelete,disableAdd:disableAdd}))),body)}TopNSeries.propTypes={className:_propTypes2.default.string,disableAdd:_propTypes2.default.bool,disableDelete:_propTypes2.default.bool,fields:_propTypes2.default.object,name:_propTypes2.default.string,onAdd:_propTypes2.default.func,onChange:_propTypes2.default.func,onClone:_propTypes2.default.func,onDelete:_propTypes2.default.func,onMouseDown:_propTypes2.default.func,onSortableItemMount:_propTypes2.default.func,onSortableItemReadyToMove:_propTypes2.default.func,onTouchStart:_propTypes2.default.func,model:_propTypes2.default.object,panel:_propTypes2.default.object,selectedTab:_propTypes2.default.string,sortData:_propTypes2.default.string,style:_propTypes2.default.object,switchTab:_propTypes2.default.func,toggleVisible:_propTypes2.default.func,visible:_propTypes2.default.bool};exports.default=TopNSeries;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _uuid=__webpack_require__(78);var _uuid2=_interopRequireDefault(_uuid);var _data_format_picker=__webpack_require__(910);var _data_format_picker2=_interopRequireDefault(_data_format_picker);var _create_select_handler=__webpack_require__(45);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _create_text_handler=__webpack_require__(46);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _field_select=__webpack_require__(260);var _field_select2=_interopRequireDefault(_field_select);var _yes_no=__webpack_require__(259);var _yes_no2=_interopRequireDefault(_yes_no);var _color_rules=__webpack_require__(659);var _color_rules2=_interopRequireDefault(_color_rules);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var TableSeriesConfig=function(_Component){_inherits(TableSeriesConfig,_Component);function TableSeriesConfig(){_classCallCheck(this,TableSeriesConfig);return _possibleConstructorReturn(this,(TableSeriesConfig.__proto__||Object.getPrototypeOf(TableSeriesConfig)).apply(this,arguments))}_createClass(TableSeriesConfig,[{key:"componentWillMount",value:function componentWillMount(){var model=this.props.model;(!model.color_rules||model.color_rules&&0===model.color_rules.length)&&this.props.onChange({color_rules:[{id:_uuid2.default.v1()}]})}},{key:"render",value:function render(){var defaults={offset_time:"",value_template:""};var model=_extends({},defaults,this.props.model);var handleSelectChange=(0,_create_select_handler2.default)(this.props.onChange);var handleTextChange=(0,_create_text_handler2.default)(this.props.onChange);var htmlId=(0,_eui.htmlIdGenerator)();var functionOptions=[{label:"Sum",value:"sum"},{label:"Max",value:"max"},{label:"Min",value:"min"},{label:"Avg",value:"mean"},{label:"Overall Sum",value:"overall_sum"},{label:"Overall Max",value:"overall_max"},{label:"Overall Min",value:"overall_min"},{label:"Overall Avg",value:"overall_avg"},{label:"Cumulative Sum",value:"cumulative_sum"}];var selectedAggFuncOption=functionOptions.find(function(option){return model.aggregate_function===option.value});return _react2.default.createElement("div",null,_react2.default.createElement("div",{className:"vis_editor__series_config-container"},_react2.default.createElement("div",{className:"vis_editor__series_config-row"},_react2.default.createElement(_data_format_picker2.default,{onChange:handleSelectChange("formatter"),value:model.formatter}),_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("valueTemplateInput")},"Template (eg.",_react2.default.createElement("code",null,"{{value}}/s"),")"),_react2.default.createElement("input",{id:htmlId("valueTemplateInput"),className:"vis_editor__input-grows",onChange:handleTextChange("value_template"),value:model.value_template})),_react2.default.createElement("div",{className:"vis_editor__series_config-row"},_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("filterInput")},"Filter"),_react2.default.createElement("input",{id:htmlId("filterInput"),className:"vis_editor__input-grows",onChange:handleTextChange("filter"),value:model.filter}),_react2.default.createElement("label",{className:"vis_editor__label"},"Show Trend Arrows"),_react2.default.createElement(_yes_no2.default,{value:model.trend_arrows,name:"trend_arrows",onChange:this.props.onChange})),_react2.default.createElement("div",{className:"vis_editor__series_config-row"},_react2.default.createElement("div",{className:"vis_editor__row_item"},_react2.default.createElement(_field_select2.default,{fields:this.props.fields,indexPattern:this.props.panel.index_pattern,value:model.aggregate_by,onChange:handleSelectChange("aggregate_by")})),_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("aggregateFunctionInput")},"Aggregate Function"),_react2.default.createElement("div",{className:"vis_editor__row_item"},_react2.default.createElement(_eui.EuiComboBox,{id:htmlId("aggregateFunctionInput"),options:functionOptions,selectedOptions:selectedAggFuncOption?[selectedAggFuncOption]:[],onChange:handleSelectChange("aggregate_function"),singleSelection:true}))),_react2.default.createElement("div",{className:"vis_editor__series_config-row summarize__colorRules"},_react2.default.createElement(_color_rules2.default,{primaryName:"text",primaryVarName:"text",hideSecondary:true,model:model,onChange:this.props.onChange,name:"color_rules"}))))}}]);return TableSeriesConfig}(_react.Component);TableSeriesConfig.propTypes={fields:_propTypes2.default.object,model:_propTypes2.default.object,onChange:_propTypes2.default.func};exports.default=TableSeriesConfig;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _color_picker=__webpack_require__(258);var _color_picker2=_interopRequireDefault(_color_picker);var _add_delete_buttons=__webpack_require__(147);var _add_delete_buttons2=_interopRequireDefault(_add_delete_buttons);var _series_config=__webpack_require__(658);var _reactAnythingSortable=__webpack_require__(301);var _reactAnythingSortable2=_interopRequireDefault(_reactAnythingSortable);var _split=__webpack_require__(515);var _split2=_interopRequireDefault(_split);var _eui=__webpack_require__(3);var _create_agg_row_render=__webpack_require__(434);var _create_agg_row_render2=_interopRequireDefault(_create_agg_row_render);var _create_text_handler=__webpack_require__(46);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _sort_keyhandler=__webpack_require__(516);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function GaugeSeries(props){var panel=props.panel,fields=props.fields,onAdd=props.onAdd,onChange=props.onChange,onDelete=props.onDelete,disableDelete=props.disableDelete,disableAdd=props.disableAdd,selectedTab=props.selectedTab,visible=props.visible;var defaults={label:""};var model=_extends({},defaults,props.model);var handleChange=(0,_create_text_handler2.default)(onChange);var aggs=model.metrics.map((0,_create_agg_row_render2.default)(props));var caretClassName="fa fa-caret-down";visible||(caretClassName="fa fa-caret-right");var body=null;if(visible){var metricsClassName="kbnTabs__tab";var optionsClassname="kbnTabs__tab";"metrics"===selectedTab&&(metricsClassName+="-active");"options"===selectedTab&&(optionsClassname+="-active");var seriesBody=void 0;if("metrics"===selectedTab){var handleSort=function handleSort(data){var metrics=data.map(function(id){return model.metrics.find(function(m){return m.id===id})});props.onChange({metrics:metrics})};seriesBody=_react2.default.createElement("div",null,_react2.default.createElement(_reactAnythingSortable2.default,{style:{cursor:"default"},dynamic:true,direction:"vertical",onSort:handleSort,sortHandle:"vis_editor__agg_sort"},aggs),_react2.default.createElement("div",{className:"vis_editor__series_row"},_react2.default.createElement("div",{className:"vis_editor__series_row-item"},_react2.default.createElement(_split2.default,{onChange:props.onChange,fields:fields,panel:panel,model:model}))))}else seriesBody=_react2.default.createElement(_series_config.SeriesConfig,{fields:props.fields,model:props.model,onChange:props.onChange});body=_react2.default.createElement("div",{className:"vis_editor__series-row"},_react2.default.createElement("div",{className:"kbnTabs sm",role:"tablist"},_react2.default.createElement("button",{role:"tab","aria-selected":"metrics"===selectedTab,className:metricsClassName,onClick:function onClick(){return props.switchTab("metrics")}},"Metrics"),_react2.default.createElement("button",{role:"tab","data-test-subj":"seriesOptions","aria-selected":"options"===selectedTab,className:optionsClassname,onClick:function onClick(){return props.switchTab("options")}},"Options")),seriesBody)}var colorPicker=_react2.default.createElement(_color_picker2.default,{disableTrash:true,onChange:props.onChange,name:"color",value:model.color});var dragHandle=void 0;props.disableDelete||(dragHandle=_react2.default.createElement(_eui.EuiToolTip,{content:"Sort"},_react2.default.createElement("button",{className:"vis_editor__sort thor__button-outlined-default sm","aria-label":"Sort series by pressing up/down",onKeyDown:(0,_sort_keyhandler.createUpDownHandler)(props.onShouldSortItem)},_react2.default.createElement("i",{className:"fa fa-sort"}))));return _react2.default.createElement("div",{className:props.className+" vis_editor__series",style:props.style,onMouseDown:props.onMouseDown,onTouchStart:props.onTouchStart},_react2.default.createElement("div",{className:"vis_editor__container"},_react2.default.createElement("div",{className:"vis_editor__series-details"},_react2.default.createElement("button",{className:"vis_editor__series-visibility-toggle",onClick:props.toggleVisible,"aria-label":"Toggle series editor","aria-expanded":props.visible},_react2.default.createElement("i",{className:caretClassName})),colorPicker,_react2.default.createElement("div",{className:"vis_editor__row vis_editor__row_item"},_react2.default.createElement("input",{className:"vis_editor__input-grows",onChange:handleChange("label"),placeholder:"Label",value:model.label})),dragHandle,_react2.default.createElement(_add_delete_buttons2.default,{addTooltip:"Add Series",deleteTooltip:"Delete Series",cloneTooltip:"Clone Series",onDelete:onDelete,onClone:props.onClone,onAdd:onAdd,disableDelete:disableDelete,disableAdd:disableAdd}))),body)}GaugeSeries.propTypes={className:_propTypes2.default.string,colorPicker:_propTypes2.default.bool,disableAdd:_propTypes2.default.bool,disableDelete:_propTypes2.default.bool,fields:_propTypes2.default.object,name:_propTypes2.default.string,onAdd:_propTypes2.default.func,onChange:_propTypes2.default.func,onClone:_propTypes2.default.func,onDelete:_propTypes2.default.func,onMouseDown:_propTypes2.default.func,onSortableItemMount:_propTypes2.default.func,onSortableItemReadyToMove:_propTypes2.default.func,onTouchStart:_propTypes2.default.func,model:_propTypes2.default.object,panel:_propTypes2.default.object,selectedTab:_propTypes2.default.string,sortData:_propTypes2.default.string,style:_propTypes2.default.object,switchTab:_propTypes2.default.func,toggleVisible:_propTypes2.default.func,visible:_propTypes2.default.bool};exports.default=GaugeSeries;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _add_delete_buttons=__webpack_require__(147);var _add_delete_buttons2=_interopRequireDefault(_add_delete_buttons);var _series_config=__webpack_require__(658);var _reactAnythingSortable=__webpack_require__(301);var _reactAnythingSortable2=_interopRequireDefault(_reactAnythingSortable);var _split=__webpack_require__(515);var _split2=_interopRequireDefault(_split);var _create_agg_row_render=__webpack_require__(434);var _create_agg_row_render2=_interopRequireDefault(_create_agg_row_render);var _create_text_handler=__webpack_require__(46);var _create_text_handler2=_interopRequireDefault(_create_text_handler);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function MarkdownSeries(props){var panel=props.panel,fields=props.fields,onAdd=props.onAdd,onChange=props.onChange,onDelete=props.onDelete,disableDelete=props.disableDelete,disableAdd=props.disableAdd,selectedTab=props.selectedTab,visible=props.visible;var defaults={label:"",var_name:""};var model=_extends({},defaults,props.model);var handleChange=(0,_create_text_handler2.default)(onChange);var aggs=model.metrics.map((0,_create_agg_row_render2.default)(props));var caretClassName="fa fa-caret-down";visible||(caretClassName="fa fa-caret-right");var body=null;if(visible){var metricsClassName="kbnTabs__tab";var optionsClassname="kbnTabs__tab";"metrics"===selectedTab&&(metricsClassName+="-active");"options"===selectedTab&&(optionsClassname+="-active");var seriesBody=void 0;if("metrics"===selectedTab){var handleSort=function handleSort(data){var metrics=data.map(function(id){return model.metrics.find(function(m){return m.id===id})});props.onChange({metrics:metrics})};seriesBody=_react2.default.createElement("div",null,_react2.default.createElement(_reactAnythingSortable2.default,{style:{cursor:"default"},dynamic:true,direction:"vertical",onSort:handleSort,sortHandle:"vis_editor__agg_sort"},aggs),_react2.default.createElement("div",{className:"vis_editor__series_row"},_react2.default.createElement("div",{className:"vis_editor__series_row-item"},_react2.default.createElement(_split2.default,{onChange:props.onChange,fields:fields,panel:panel,model:model}))))}else seriesBody=_react2.default.createElement(_series_config.SeriesConfig,{fields:props.fields,model:props.model,onChange:props.onChange});body=_react2.default.createElement("div",{className:"vis_editor__series-row"},_react2.default.createElement("div",{className:"kbnTabs sm",role:"tablist"},_react2.default.createElement("button",{role:"tab","aria-selected":"metrics"===selectedTab,className:metricsClassName,onClick:function onClick(){return props.switchTab("metrics")}},"Metrics"),_react2.default.createElement("button",{role:"tab","data-test-subj":"seriesOptions","aria-selected":"metrics"===selectedTab,className:optionsClassname,onClick:function onClick(){return props.switchTab("options")}},"Options")),seriesBody)}return _react2.default.createElement("div",{className:props.className+" vis_editor__series",style:props.style,onMouseDown:props.onMouseDown,onTouchStart:props.onTouchStart},_react2.default.createElement("div",{className:"vis_editor__container"},_react2.default.createElement("div",{className:"vis_editor__series-details"},_react2.default.createElement("button",{className:"vis_editor__series-visibility-toggle",onClick:props.toggleVisible,"aria-label":"Toggle series editor","aria-expanded":props.visible},_react2.default.createElement("i",{className:caretClassName})),_react2.default.createElement("div",{className:"vis_editor__row vis_editor__row_item"},_react2.default.createElement("input",{className:"vis_editor__input-grows vis_editor__row_item",onChange:handleChange("label"),placeholder:"Label",value:model.label}),_react2.default.createElement("input",{className:"vis_editor__input-grows",onChange:handleChange("var_name"),placeholder:"Variable Name",value:model.var_name})),_react2.default.createElement(_add_delete_buttons2.default,{addTooltip:"Add Series",deleteTooltip:"Delete Series",cloneTooltip:"Clone Series",onDelete:onDelete,onClone:props.onClone,onAdd:onAdd,disableDelete:disableDelete,disableAdd:disableAdd}))),body)}MarkdownSeries.propTypes={className:_propTypes2.default.string,colorPicker:_propTypes2.default.bool,disableAdd:_propTypes2.default.bool,disableDelete:_propTypes2.default.bool,fields:_propTypes2.default.object,name:_propTypes2.default.string,onAdd:_propTypes2.default.func,onChange:_propTypes2.default.func,onClone:_propTypes2.default.func,onDelete:_propTypes2.default.func,onMouseDown:_propTypes2.default.func,onSortableItemMount:_propTypes2.default.func,onSortableItemReadyToMove:_propTypes2.default.func,onTouchStart:_propTypes2.default.func,model:_propTypes2.default.object,panel:_propTypes2.default.object,selectedTab:_propTypes2.default.string,sortData:_propTypes2.default.string,style:_propTypes2.default.object,switchTab:_propTypes2.default.func,toggleVisible:_propTypes2.default.func,visible:_propTypes2.default.bool};exports.default=MarkdownSeries;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _uuid=__webpack_require__(78);var _uuid2=_interopRequireDefault(_uuid);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _new_metric_agg_fn=__webpack_require__(911);var _new_metric_agg_fn2=_interopRequireDefault(_new_metric_agg_fn);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function(){var obj=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _lodash2.default.assign({id:_uuid2.default.v1(),color:"#68BC00",split_mode:"everything",metrics:[(0,_new_metric_agg_fn2.default)()],separate_axis:0,axis_position:"right",formatter:"number",chart_type:"line",line_width:1,point_size:1,fill:.5,stacked:"none"},obj)};module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _collection_actions=__webpack_require__(328);var collectionActions=_interopRequireWildcard(_collection_actions);var _add_delete_buttons=__webpack_require__(147);var _add_delete_buttons2=_interopRequireDefault(_add_delete_buttons);var _color_picker=__webpack_require__(258);var _color_picker2=_interopRequireDefault(_color_picker);var _field_select=__webpack_require__(260);var _field_select2=_interopRequireDefault(_field_select);var _uuid=__webpack_require__(78);var _uuid2=_interopRequireDefault(_uuid);var _icon_select=__webpack_require__(4618);var _icon_select2=_interopRequireDefault(_icon_select);var _yes_no=__webpack_require__(259);var _yes_no2=_interopRequireDefault(_yes_no);var _eui=__webpack_require__(3);function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);newObj.default=obj;return newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function newAnnotation(){return{id:_uuid2.default.v1(),color:"#F00",index_pattern:"*",time_field:"@timestamp",icon:"fa-tag",ignore_global_filters:1,ignore_panel_filters:1}}var AnnotationsEditor=function(_Component){_inherits(AnnotationsEditor,_Component);function AnnotationsEditor(props){_classCallCheck(this,AnnotationsEditor);var _this=_possibleConstructorReturn(this,(AnnotationsEditor.__proto__||Object.getPrototypeOf(AnnotationsEditor)).call(this,props));_this.renderRow=_this.renderRow.bind(_this);return _this}_createClass(AnnotationsEditor,[{key:"handleChange",value:function handleChange(item,name){var _this2=this;return function(e){var handleChange=collectionActions.handleChange.bind(null,_this2.props);var part={};part[name]=_lodash2.default.get(e,"[0].value",_lodash2.default.get(e,"target.value"));handleChange(_lodash2.default.assign({},item,part))}}},{key:"renderRow",value:function renderRow(row){var _this3=this;var defaults={fields:"",template:"",index_pattern:"*",query_string:""};var model=_extends({},defaults,row);var handleChange=function handleChange(part){var fn=collectionActions.handleChange.bind(null,_this3.props);fn(_lodash2.default.assign({},model,part))};var htmlId=(0,_eui.htmlIdGenerator)(model.id);var handleAdd=collectionActions.handleAdd.bind(null,this.props,newAnnotation);var handleDelete=collectionActions.handleDelete.bind(null,this.props,model);return _react2.default.createElement("div",{className:"vis_editor__annotations-row",key:model.id},_react2.default.createElement("div",{className:"vis_editor__annotations-color"},_react2.default.createElement(_color_picker2.default,{disableTrash:true,onChange:handleChange,name:"color",value:model.color})),_react2.default.createElement("div",{className:"vis_editor__annotations-content"},_react2.default.createElement("div",{className:"vis_editor__row"},_react2.default.createElement("div",{className:"vis_editor__row-item"},_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("indexPattern")},"Index Pattern (required)"),_react2.default.createElement("input",{id:htmlId("indexPattern"),className:"vis_editor__input-grows-100",type:"text",onChange:this.handleChange(model,"index_pattern"),value:model.index_pattern})),_react2.default.createElement("div",{className:"vis_editor__row-item"},_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("timeField")},"Time Field (required)"),_react2.default.createElement(_field_select2.default,{id:htmlId("timeField"),restrict:"date",value:model.time_field,onChange:this.handleChange(model,"time_field"),indexPattern:model.index_pattern,fields:this.props.fields}))),_react2.default.createElement("div",{className:"vis_editor__row"},_react2.default.createElement("div",{className:"vis_editor__row-item"},_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("queryString")},"Query String"),_react2.default.createElement("input",{id:htmlId("queryString"),className:"vis_editor__input-grows-100",type:"text",onChange:this.handleChange(model,"query_string"),value:model.query_string})),_react2.default.createElement("fieldset",{className:"vis_editor__row-item-small"},_react2.default.createElement("legend",{className:"vis_editor__label"},"Ignore Global Filters"),_react2.default.createElement(_yes_no2.default,{value:model.ignore_global_filters,name:"ignore_global_filters",onChange:handleChange})),_react2.default.createElement("fieldset",{className:"vis_editor__row-item-small"},_react2.default.createElement("legend",{className:"vis_editor__label"},"Ignore Panel Filters"),_react2.default.createElement(_yes_no2.default,{value:model.ignore_panel_filters,name:"ignore_panel_filters",onChange:handleChange}))),_react2.default.createElement("div",{className:"vis_editor__row"},_react2.default.createElement("div",{className:"vis_editor__row-item"},_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("icon")},"Icon (required)"),_react2.default.createElement("div",{className:"vis_editor__item"},_react2.default.createElement(_icon_select2.default,{id:htmlId("icon"),value:model.icon,onChange:this.handleChange(model,"icon")}))),_react2.default.createElement("div",{className:"vis_editor__row-item"},_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("fields")},"Fields (required - comma separated paths)"),_react2.default.createElement("input",{id:htmlId("fields"),className:"vis_editor__input-grows-100",type:"text",onChange:this.handleChange(model,"fields"),value:model.fields})),_react2.default.createElement("div",{className:"vis_editor__row-item"},_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("rowTemplate")},"Row Template (required - eg.",_react2.default.createElement("code",null,"{{field}}"),")"),_react2.default.createElement("input",{id:htmlId("rowTemplate"),className:"vis_editor__input-grows-100",type:"text",onChange:this.handleChange(model,"template"),value:model.template})))),_react2.default.createElement("div",{className:"vis_editor__annotations-controls"},_react2.default.createElement(_add_delete_buttons2.default,{onAdd:handleAdd,onDelete:handleDelete})))}},{key:"render",value:function render(){var model=this.props.model;var content=void 0;if(model.annotations&&model.annotations.length){var annotations=model.annotations.map(this.renderRow);content=_react2.default.createElement("div",{className:"vis_editor__annotations"},_react2.default.createElement("div",{className:"kbnTabs sm",role:"tablist"},_react2.default.createElement("button",{role:"tab","aria-selected":true,className:"kbnTabs__tab-active"},"Data Sources")),annotations)}else{var handleAdd=collectionActions.handleAdd.bind(null,this.props,newAnnotation);content=_react2.default.createElement("div",{className:"vis_editor__annotations-missing"},_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("p",null,"Click the button below to create an annotation data source."),_react2.default.createElement("button",{className:"thor__button-outlined-default large",onClick:handleAdd},"Add Data Source")))}return _react2.default.createElement("div",{className:"vis_editor__container"},content)}}]);return AnnotationsEditor}(_react.Component);AnnotationsEditor.defaultProps={name:"annotations"};AnnotationsEditor.propTypes={fields:_propTypes2.default.object,model:_propTypes2.default.object,name:_propTypes2.default.string,onChange:_propTypes2.default.func};exports.default=AnnotationsEditor;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function renderOption(option){var icon=option.value;var label=option.label;return _react2.default.createElement("div",{className:"Select-value"},_react2.default.createElement("span",{className:"Select-value-label","aria-label":label+" icon"},_react2.default.createElement("span",{className:"vis_editor__icon_select-value kuiIcon "+icon}),label))}function IconSelect(props){var selectedIcon=props.icons.find(function(option){return props.value===option.value});return _react2.default.createElement(_eui.EuiComboBox,{isClearable:false,id:props.id,options:props.icons,selectedOptions:selectedIcon?[selectedIcon]:[],onChange:props.onChange,singleSelection:true,renderOption:renderOption})}IconSelect.defaultProps={icons:[{value:"fa-asterisk",label:"Asterisk"},{value:"fa-bell",label:"Bell"},{value:"fa-bolt",label:"Bolt"},{value:"fa-bomb",label:"Bomb"},{value:"fa-bug",label:"Bug"},{value:"fa-comment",label:"Comment"},{value:"fa-exclamation-circle",label:"Exclamation Circle"},{value:"fa-exclamation-triangle",label:"Exclamation Triangle"},{value:"fa-fire",label:"Fire"},{value:"fa-flag",label:"Flag"},{value:"fa-heart",label:"Heart"},{value:"fa-map-marker",label:"Map Marker"},{value:"fa-map-pin",label:"Map Pin"},{value:"fa-star",label:"Star"},{value:"fa-tag",label:"Tag"}]};IconSelect.propTypes={icons:_propTypes2.default.array,id:_propTypes2.default.string,onChange:_propTypes2.default.func,value:_propTypes2.default.string.isRequired};exports.default=IconSelect;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _series_editor=__webpack_require__(433);var _series_editor2=_interopRequireDefault(_series_editor);var _index_pattern=__webpack_require__(326);var _create_text_handler=__webpack_require__(46);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _color_rules=__webpack_require__(659);var _color_rules2=_interopRequireDefault(_color_rules);var _yes_no=__webpack_require__(259);var _yes_no2=_interopRequireDefault(_yes_no);var _uuid=__webpack_require__(78);var _uuid2=_interopRequireDefault(_uuid);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var MetricPanelConfig=function(_Component){_inherits(MetricPanelConfig,_Component);function MetricPanelConfig(props){_classCallCheck(this,MetricPanelConfig);var _this=_possibleConstructorReturn(this,(MetricPanelConfig.__proto__||Object.getPrototypeOf(MetricPanelConfig)).call(this,props));_this.state={selectedTab:"data"};return _this}_createClass(MetricPanelConfig,[{key:"componentWillMount",value:function componentWillMount(){var model=this.props.model;(!model.background_color_rules||model.background_color_rules&&0===model.background_color_rules.length)&&this.props.onChange({background_color_rules:[{id:_uuid2.default.v1()}]})}},{key:"switchTab",value:function switchTab(selectedTab){this.setState({selectedTab:selectedTab})}},{key:"render",value:function render(){var _this2=this;var selectedTab=this.state.selectedTab;var defaults={filter:""};var model=_extends({},defaults,this.props.model);var htmlId=(0,_eui.htmlIdGenerator)();var handleTextChange=(0,_create_text_handler2.default)(this.props.onChange);var view=void 0;view="data"===selectedTab?_react2.default.createElement(_series_editor2.default,{colorPicker:false,fields:this.props.fields,limit:2,model:this.props.model,name:this.props.name,onChange:this.props.onChange}):_react2.default.createElement("div",{className:"vis_editor__container"},_react2.default.createElement(_index_pattern.IndexPattern,{fields:this.props.fields,model:this.props.model,onChange:this.props.onChange}),_react2.default.createElement("div",{className:"vis_editor__vis_config-row"},_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("panelFilter")},"Panel Filter"),_react2.default.createElement("input",{id:htmlId("panelFilter"),className:"vis_editor__input-grows",type:"text",onChange:handleTextChange("filter"),value:model.filter}),_react2.default.createElement("div",{className:"vis_editor__label"},"Ignore Global Filter"),_react2.default.createElement(_yes_no2.default,{value:model.ignore_global_filter,name:"ignore_global_filter",onChange:this.props.onChange})),_react2.default.createElement("div",null,_react2.default.createElement("div",{className:"vis_editor__label"},"Color Rules")),_react2.default.createElement("div",{className:"vis_editor__vis_config-row"},_react2.default.createElement(_color_rules2.default,{model:model,onChange:this.props.onChange,name:"background_color_rules"})));return _react2.default.createElement("div",null,_react2.default.createElement("div",{className:"kbnTabs",role:"tablist"},_react2.default.createElement("button",{role:"tab","aria-selected":"data"===selectedTab,className:"kbnTabs__tab"+("data"===selectedTab?"-active":""),onClick:function onClick(){return _this2.switchTab("data")}},"Data"),_react2.default.createElement("button",{role:"tab","aria-selected":"options"===selectedTab,className:"kbnTabs__tab"+("options"===selectedTab?"-active":""),onClick:function onClick(){return _this2.switchTab("options")}},"Panel Options")),view)}}]);return MetricPanelConfig}(_react.Component);MetricPanelConfig.propTypes={fields:_propTypes2.default.object,model:_propTypes2.default.object,onChange:_propTypes2.default.func,visData:_propTypes2.default.object};exports.default=MetricPanelConfig;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _series_editor=__webpack_require__(433);var _series_editor2=_interopRequireDefault(_series_editor);var _index_pattern=__webpack_require__(326);var _create_text_handler=__webpack_require__(46);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _color_rules=__webpack_require__(659);var _color_rules2=_interopRequireDefault(_color_rules);var _color_picker=__webpack_require__(258);var _color_picker2=_interopRequireDefault(_color_picker);var _uuid=__webpack_require__(78);var _uuid2=_interopRequireDefault(_uuid);var _yes_no=__webpack_require__(259);var _yes_no2=_interopRequireDefault(_yes_no);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var TopNPanelConfig=function(_Component){_inherits(TopNPanelConfig,_Component);function TopNPanelConfig(props){_classCallCheck(this,TopNPanelConfig);var _this=_possibleConstructorReturn(this,(TopNPanelConfig.__proto__||Object.getPrototypeOf(TopNPanelConfig)).call(this,props));_this.state={selectedTab:"data"};return _this}_createClass(TopNPanelConfig,[{key:"componentWillMount",value:function componentWillMount(){var model=this.props.model;var parts={};(!model.bar_color_rules||model.bar_color_rules&&0===model.bar_color_rules.length)&&(parts.bar_color_rules=[{id:_uuid2.default.v1()}]);this.props.onChange(parts)}},{key:"switchTab",value:function switchTab(selectedTab){this.setState({selectedTab:selectedTab})}},{key:"render",value:function render(){var _this2=this;var selectedTab=this.state.selectedTab;var defaults={drilldown_url:"",filter:""};var model=_extends({},defaults,this.props.model);var htmlId=(0,_eui.htmlIdGenerator)();var handleTextChange=(0,_create_text_handler2.default)(this.props.onChange);var view=void 0;view="data"===selectedTab?_react2.default.createElement(_series_editor2.default,{colorPicker:false,fields:this.props.fields,model:this.props.model,name:this.props.name,onChange:this.props.onChange}):_react2.default.createElement("div",{className:"vis_editor__container"},_react2.default.createElement("div",{className:"vis_editor__vis_config-row"},_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("itemUrl")},"Item Url (This supports mustache templating.",_react2.default.createElement("code",null,"{{key}}")," is set to the term)"),_react2.default.createElement("input",{id:htmlId("itemUrl"),className:"vis_editor__input-grows",onChange:handleTextChange("drilldown_url"),value:model.drilldown_url})),_react2.default.createElement(_index_pattern.IndexPattern,{fields:this.props.fields,model:this.props.model,onChange:this.props.onChange}),_react2.default.createElement("div",{className:"vis_editor__vis_config-row"},_react2.default.createElement("div",{className:"vis_editor__label"},"Background Color"),_react2.default.createElement(_color_picker2.default,{onChange:this.props.onChange,name:"background_color",value:model.background_color}),_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("panelFilter")},"Panel Filter"),_react2.default.createElement("input",{id:htmlId("panelFilter"),className:"vis_editor__input-grows",type:"text",onChange:handleTextChange("filter"),value:model.filter}),_react2.default.createElement("div",{className:"vis_editor__label"},"Ignore Global Filter"),_react2.default.createElement(_yes_no2.default,{value:model.ignore_global_filter,name:"ignore_global_filter",onChange:this.props.onChange})),_react2.default.createElement("div",null,_react2.default.createElement("div",{className:"vis_editor__label"},"Color Rules")),_react2.default.createElement("div",{className:"vis_editor__vis_config-row"},_react2.default.createElement(_color_rules2.default,{model:model,primaryVarName:"bar_color",primaryName:"bar",hideSecondary:true,onChange:this.props.onChange,name:"bar_color_rules"})));return _react2.default.createElement("div",null,_react2.default.createElement("div",{className:"kbnTabs",role:"tablist"},_react2.default.createElement("button",{role:"tab","aria-selected":"data"===selectedTab,className:"kbnTabs__tab"+("data"===selectedTab?"-active":""),onClick:function onClick(){return _this2.switchTab("data")}},"Data"),_react2.default.createElement("button",{role:"tab","aria-selected":"options"===selectedTab,className:"kbnTabs__tab"+("options"===selectedTab?"-active":""),onClick:function onClick(){return _this2.switchTab("options")}},"Panel Options")),view)}}]);return TopNPanelConfig}(_react.Component);TopNPanelConfig.propTypes={fields:_propTypes2.default.object,model:_propTypes2.default.object,onChange:_propTypes2.default.func,visData:_propTypes2.default.object};exports.default=TopNPanelConfig;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _field_select=__webpack_require__(260);var _field_select2=_interopRequireDefault(_field_select);var _series_editor=__webpack_require__(433);var _series_editor2=_interopRequireDefault(_series_editor);var _index_pattern=__webpack_require__(326);var _create_text_handler=__webpack_require__(46);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _create_select_handler=__webpack_require__(45);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _uuid=__webpack_require__(78);var _uuid2=_interopRequireDefault(_uuid);var _yes_no=__webpack_require__(259);var _yes_no2=_interopRequireDefault(_yes_no);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var TablePanelConfig=function(_Component){_inherits(TablePanelConfig,_Component);function TablePanelConfig(props){_classCallCheck(this,TablePanelConfig);var _this=_possibleConstructorReturn(this,(TablePanelConfig.__proto__||Object.getPrototypeOf(TablePanelConfig)).call(this,props));_this.state={selectedTab:"data"};return _this}_createClass(TablePanelConfig,[{key:"componentWillMount",value:function componentWillMount(){var model=this.props.model;var parts={};(!model.bar_color_rules||model.bar_color_rules&&0===model.bar_color_rules.length)&&(parts.bar_color_rules=[{id:_uuid2.default.v1()}]);this.props.onChange(parts)}},{key:"switchTab",value:function switchTab(selectedTab){this.setState({selectedTab:selectedTab})}},{key:"render",value:function render(){var _this2=this;var selectedTab=this.state.selectedTab;var defaults={drilldown_url:"",filter:"",pivot_label:"",pivot_rows:10};var model=_extends({},defaults,this.props.model);var handleSelectChange=(0,_create_select_handler2.default)(this.props.onChange);var handleTextChange=(0,_create_text_handler2.default)(this.props.onChange);var htmlId=(0,_eui.htmlIdGenerator)();var view=void 0;view="data"===selectedTab?_react2.default.createElement("div",null,_react2.default.createElement("div",{className:"vis_editor__table-pivot-fields"},_react2.default.createElement("div",{className:"vis_editor__container"},_react2.default.createElement("div",{className:"vis_editor__vis_config-row"},_react2.default.createElement("p",null,"For the table visualization you need to define a field to group by using a terms aggregation.")),_react2.default.createElement("div",{className:"vis_editor__vis_config-row"},_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("field")},"Group By Field"),_react2.default.createElement("div",{className:"vis_editor__row_item","data-test-subj":"groupByField"},_react2.default.createElement(_field_select2.default,{id:htmlId("field"),fields:this.props.fields,value:model.pivot_id,indexPattern:model.index_pattern,onChange:handleSelectChange("pivot_id")})),_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("pivotLabelInput")},"Column Label"),_react2.default.createElement("input",{id:htmlId("pivotLabelInput"),className:"vis_editor__input-grows","data-test-subj":"columnLabelName",type:"text",onChange:handleTextChange("pivot_label"),value:model.pivot_label}),_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("pivotRowsInput")},"Rows"),_react2.default.createElement("input",{id:htmlId("pivotRowsInput"),className:"vis_editor__input-number",type:"number",onChange:handleTextChange("pivot_rows"),value:model.pivot_rows})))),_react2.default.createElement(_series_editor2.default,{fields:this.props.fields,model:this.props.model,name:this.props.name,onChange:this.props.onChange})):_react2.default.createElement("div",{className:"vis_editor__container"},_react2.default.createElement("div",{className:"vis_editor__vis_config-row"},_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("drilldownInput")},"Item Url (This supports mustache templating.",_react2.default.createElement("code",null,"{{key}}")," is set to the term)"),_react2.default.createElement("input",{id:htmlId("drilldownInput"),className:"vis_editor__input-grows",onChange:handleTextChange("drilldown_url"),value:model.drilldown_url})),_react2.default.createElement(_index_pattern.IndexPattern,{fields:this.props.fields,model:this.props.model,onChange:this.props.onChange}),_react2.default.createElement("div",{className:"vis_editor__vis_config-row"},_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("panelFilterInput")},"Panel Filter"),_react2.default.createElement("input",{id:htmlId("panelFilterInput"),className:"vis_editor__input-grows",type:"text",onChange:handleTextChange("filter"),value:model.filter}),_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("globalFilterOption")},"Ignore Global Filter"),_react2.default.createElement(_yes_no2.default,{id:htmlId("globalFilterOption"),value:model.ignore_global_filter,name:"ignore_global_filter",onChange:this.props.onChange})));return _react2.default.createElement("div",null,_react2.default.createElement("div",{className:"kbnTabs"},_react2.default.createElement("div",{className:"kbnTabs__tab"+("data"===selectedTab?"-active":""),onClick:function onClick(){return _this2.switchTab("data")}},"Columns"),_react2.default.createElement("div",{className:"kbnTabs__tab"+("options"===selectedTab?"-active":""),onClick:function onClick(){return _this2.switchTab("options")}},"Panel Options")),view)}}]);return TablePanelConfig}(_react.Component);TablePanelConfig.propTypes={fields:_propTypes2.default.object,model:_propTypes2.default.object,onChange:_propTypes2.default.func,visData:_propTypes2.default.object};exports.default=TablePanelConfig;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _series_editor=__webpack_require__(433);var _series_editor2=_interopRequireDefault(_series_editor);var _index_pattern=__webpack_require__(326);var _create_select_handler=__webpack_require__(45);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _create_text_handler=__webpack_require__(46);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _color_rules=__webpack_require__(659);var _color_rules2=_interopRequireDefault(_color_rules);var _color_picker=__webpack_require__(258);var _color_picker2=_interopRequireDefault(_color_picker);var _uuid=__webpack_require__(78);var _uuid2=_interopRequireDefault(_uuid);var _yes_no=__webpack_require__(259);var _yes_no2=_interopRequireDefault(_yes_no);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var GaugePanelConfig=function(_Component){_inherits(GaugePanelConfig,_Component);function GaugePanelConfig(props){_classCallCheck(this,GaugePanelConfig);var _this=_possibleConstructorReturn(this,(GaugePanelConfig.__proto__||Object.getPrototypeOf(GaugePanelConfig)).call(this,props));_this.state={selectedTab:"data"};return _this}_createClass(GaugePanelConfig,[{key:"componentWillMount",value:function componentWillMount(){var model=this.props.model;var parts={};(!model.gauge_color_rules||model.gauge_color_rules&&0===model.gauge_color_rules.length)&&(parts.gauge_color_rules=[{id:_uuid2.default.v1()}]);null==model.gauge_width&&(parts.gauge_width=10);null==model.gauge_inner_width&&(parts.gauge_inner_width=10);null==model.gauge_style&&(parts.gauge_style="half");this.props.onChange(parts)}},{key:"switchTab",value:function switchTab(selectedTab){this.setState({selectedTab:selectedTab})}},{key:"render",value:function render(){var _this2=this;var selectedTab=this.state.selectedTab;var defaults={gauge_max:"",filter:"",gauge_style:"circle",gauge_inner_width:"",gauge_width:""};var model=_extends({},defaults,this.props.model);var handleSelectChange=(0,_create_select_handler2.default)(this.props.onChange);var handleTextChange=(0,_create_text_handler2.default)(this.props.onChange);var styleOptions=[{label:"Circle",value:"circle"},{label:"Half Circle",value:"half"}];var htmlId=(0,_eui.htmlIdGenerator)();var selectedGaugeStyleOption=styleOptions.find(function(option){return model.gauge_style===option.value});var view=void 0;view="data"===selectedTab?_react2.default.createElement(_series_editor2.default,{colorPicker:true,fields:this.props.fields,limit:1,model:this.props.model,name:this.props.name,onChange:this.props.onChange}):_react2.default.createElement("div",{className:"vis_editor__container"},_react2.default.createElement(_index_pattern.IndexPattern,{fields:this.props.fields,model:this.props.model,onChange:this.props.onChange}),_react2.default.createElement("div",{className:"vis_editor__vis_config-row"},_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("panelFilter")},"Panel Filter"),_react2.default.createElement("input",{id:htmlId("panelFilter"),className:"vis_editor__input-grows",type:"text",onChange:handleTextChange("filter"),value:model.filter}),_react2.default.createElement("div",{className:"vis_editor__label"},"Ignore Global Filter"),_react2.default.createElement(_yes_no2.default,{value:model.ignore_global_filter,name:"ignore_global_filter",onChange:this.props.onChange})),_react2.default.createElement("div",{className:"vis_editor__vis_config-row"},_react2.default.createElement("div",{className:"vis_editor__label"},"Background Color"),_react2.default.createElement(_color_picker2.default,{onChange:this.props.onChange,name:"background_color",value:model.background_color}),_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("gaugeMax")},"Gauge Max (empty for auto)"),_react2.default.createElement("input",{id:htmlId("gaugeMax"),className:"vis_editor__input-grows",type:"number",onChange:handleTextChange("gauge_max"),value:model.gauge_max}),_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("gaugeStyle")},"Gauge Style"),_react2.default.createElement(_eui.EuiComboBox,{isClearable:false,id:htmlId("gaugeStyle"),options:styleOptions,selectedOptions:selectedGaugeStyleOption?[selectedGaugeStyleOption]:[],onChange:handleSelectChange("gauge_style"),singleSelection:true})),_react2.default.createElement("div",{className:"vis_editor__vis_config-row"},_react2.default.createElement("div",{className:"vis_editor__label"},"Inner Color"),_react2.default.createElement(_color_picker2.default,{onChange:this.props.onChange,name:"gauge_inner_color",value:model.gauge_inner_color}),_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("innerLine")},"Inner Line Width"),_react2.default.createElement("input",{id:htmlId("innerLine"),className:"vis_editor__input-grows",type:"number",onChange:handleTextChange("gauge_inner_width"),value:model.gauge_inner_width}),_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("gaugeLine")},"Gauge Line Width"),_react2.default.createElement("input",{id:htmlId("gaugeLine"),className:"vis_editor__input-grows",type:"number",onChange:handleTextChange("gauge_width"),value:model.gauge_width})),_react2.default.createElement("div",null,_react2.default.createElement("div",{className:"vis_editor__label"},"Color Rules")),_react2.default.createElement("div",{className:"vis_editor__vis_config-row"},_react2.default.createElement(_color_rules2.default,{primaryName:"gauge color",primaryVarName:"gauge",secondaryName:"text color",secondaryVarName:"text",model:model,onChange:this.props.onChange,name:"gauge_color_rules"})));return _react2.default.createElement("div",null,_react2.default.createElement("div",{className:"kbnTabs",role:"tablist"},_react2.default.createElement("button",{role:"tab","aria-selected":"data"===selectedTab,className:"kbnTabs__tab"+("data"===selectedTab?"-active":""),onClick:function onClick(){return _this2.switchTab("data")}},"Data"),_react2.default.createElement("button",{role:"tab","aria-selected":"options"===selectedTab,className:"kbnTabs__tab"+("options"===selectedTab?"-active":""),onClick:function onClick(){return _this2.switchTab("options")}},"Panel Options")),view)}}]);return GaugePanelConfig}(_react.Component);GaugePanelConfig.propTypes={fields:_propTypes2.default.object,model:_propTypes2.default.object,onChange:_propTypes2.default.func,visData:_propTypes2.default.object};exports.default=GaugePanelConfig;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _series_editor=__webpack_require__(433);var _series_editor2=_interopRequireDefault(_series_editor);var _index_pattern=__webpack_require__(326);__webpack_require__(4624);var _create_select_handler=__webpack_require__(45);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _create_text_handler=__webpack_require__(46);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _color_picker=__webpack_require__(258);var _color_picker2=_interopRequireDefault(_color_picker);var _yes_no=__webpack_require__(259);var _yes_no2=_interopRequireDefault(_yes_no);var _markdown_editor=__webpack_require__(4625);var _markdown_editor2=_interopRequireDefault(_markdown_editor);var _lessBrowser=__webpack_require__(4631);var _lessBrowser2=_interopRequireDefault(_lessBrowser);var _components=__webpack_require__(33);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var lessC=(0,_lessBrowser2.default)(window,{env:"production"});var MarkdownPanelConfig=function(_Component){_inherits(MarkdownPanelConfig,_Component);function MarkdownPanelConfig(props){_classCallCheck(this,MarkdownPanelConfig);var _this=_possibleConstructorReturn(this,(MarkdownPanelConfig.__proto__||Object.getPrototypeOf(MarkdownPanelConfig)).call(this,props));_this.state={selectedTab:"markdown"};_this.handleCSSChange=_this.handleCSSChange.bind(_this);return _this}_createClass(MarkdownPanelConfig,[{key:"switchTab",value:function switchTab(selectedTab){this.setState({selectedTab:selectedTab})}},{key:"handleCSSChange",value:function handleCSSChange(value){var _this2=this;var model=this.props.model;var lessSrc="#markdown-"+model.id+" {\n  "+value+"\n}";lessC.render(lessSrc,{compress:true},function(e,output){var parts={markdown_less:value};output&&(parts.markdown_css=output.css);_this2.props.onChange(parts)})}},{key:"render",value:function render(){var _this3=this;var defaults={filter:""};var model=_extends({},defaults,this.props.model);var selectedTab=this.state.selectedTab;var handleSelectChange=(0,_create_select_handler2.default)(this.props.onChange);var handleTextChange=(0,_create_text_handler2.default)(this.props.onChange);var htmlId=(0,_eui.htmlIdGenerator)();var alignOptions=[{label:"Top",value:"top"},{label:"Middle",value:"middle"},{label:"Bottom",value:"bottom"}];var selectedAlignOption=alignOptions.find(function(option){return model.markdown_vertical_align===option.value});var view=void 0;view="markdown"===selectedTab?_react2.default.createElement(_markdown_editor2.default,this.props):"data"===selectedTab?_react2.default.createElement(_series_editor2.default,{colorPicker:false,fields:this.props.fields,model:this.props.model,name:this.props.name,onChange:this.props.onChange}):_react2.default.createElement("div",{className:"vis_editor__container"},_react2.default.createElement(_index_pattern.IndexPattern,{fields:this.props.fields,model:this.props.model,onChange:this.props.onChange}),_react2.default.createElement("div",{className:"vis_editor__vis_config-row"},_react2.default.createElement("div",{className:"vis_editor__label"},"Background Color"),_react2.default.createElement(_color_picker2.default,{onChange:this.props.onChange,name:"background_color",value:model.background_color}),_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("panelFilter")},"Panel Filter"),_react2.default.createElement("input",{id:htmlId("panelFilter"),className:"vis_editor__input-grows",type:"text",onChange:handleTextChange("filter"),value:model.filter}),_react2.default.createElement("div",{className:"vis_editor__label"},"Ignore Global Filter"),_react2.default.createElement(_yes_no2.default,{value:model.ignore_global_filter,name:"ignore_global_filter",onChange:this.props.onChange})),_react2.default.createElement("div",{className:"vis_editor__vis_config-row"},_react2.default.createElement("div",{className:"vis_editor__label"},"Show Scrollbars"),_react2.default.createElement(_yes_no2.default,{value:model.markdown_scrollbars,name:"markdown_scrollbars",onChange:this.props.onChange}),_react2.default.createElement("label",{className:"vis_editor__label",htmlFor:htmlId("valign")},"Vertical Alignment"),_react2.default.createElement("div",{className:"vis_editor__row_item"},_react2.default.createElement(_eui.EuiComboBox,{isClearable:false,id:htmlId("valign"),options:alignOptions,selectedOptions:selectedAlignOption?[selectedAlignOption]:[],onChange:handleSelectChange("markdown_vertical_align"),singleSelection:true}))),_react2.default.createElement("div",{className:"vis_editor__vis_config-row"},_react2.default.createElement("div",{className:"vis_editor__label"},"Custom CSS (supports Less)")),_react2.default.createElement("div",{className:"vis_editor__ace-editor"},_react2.default.createElement(_components.KuiCodeEditor,{mode:"less",theme:"github",width:"100%",name:"ace-css-"+model.id,setOptions:{fontSize:"14px"},value:model.markdown_less,onChange:this.handleCSSChange})));return _react2.default.createElement("div",null,_react2.default.createElement("div",{className:"kbnTabs",role:"tablist"},_react2.default.createElement("button",{role:"tab","aria-selected":"markdown"===selectedTab,className:"kbnTabs__tab"+("markdown"===selectedTab?"-active":""),onClick:function onClick(){return _this3.switchTab("markdown")}},"Markdown"),_react2.default.createElement("button",{"data-test-subj":"markdownDataBtn",role:"tab","aria-selected":"data"===selectedTab,className:"kbnTabs__tab"+("data"===selectedTab?"-active":""),onClick:function onClick(){return _this3.switchTab("data")}},"Data"),_react2.default.createElement("button",{role:"tab","aria-selected":"options"===selectedTab,className:"kbnTabs__tab"+("options"===selectedTab?"-active":""),onClick:function onClick(){return _this3.switchTab("options")}},"Panel Options")),view)}}]);return MarkdownPanelConfig}(_react.Component);MarkdownPanelConfig.propTypes={fields:_propTypes2.default.object,model:_propTypes2.default.object,onChange:_propTypes2.default.func,visData:_propTypes2.default.object,dateFormat:_propTypes2.default.string};exports.default=MarkdownPanelConfig;module.exports=exports["default"]},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _tick_formatter=__webpack_require__(374);var _tick_formatter2=_interopRequireDefault(_tick_formatter);var _convert_series_to_vars=__webpack_require__(1542);var _convert_series_to_vars2=_interopRequireDefault(_convert_series_to_vars);var _components=__webpack_require__(33);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);__webpack_require__(1547);__webpack_require__(4630);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var MarkdownEditor=function(_Component){_inherits(MarkdownEditor,_Component);function MarkdownEditor(props){_classCallCheck(this,MarkdownEditor);var _this=_possibleConstructorReturn(this,(MarkdownEditor.__proto__||Object.getPrototypeOf(MarkdownEditor)).call(this,props));_this.handleChange=_this.handleChange.bind(_this);_this.handleOnLoad=_this.handleOnLoad.bind(_this);return _this}_createClass(MarkdownEditor,[{key:"handleChange",value:function handleChange(value){this.props.onChange({markdown:value})}},{key:"handleOnLoad",value:function handleOnLoad(ace){this.ace=ace}},{key:"handleVarClick",value:function handleVarClick(snippet){var _this2=this;return function(){_this2.ace&&_this2.ace.insert(snippet)}}},{key:"render",value:function render(){var _this3=this;var _props=this.props,model=_props.model,visData=_props.visData,dateFormat=_props.dateFormat;var series=_lodash2.default.get(visData,model.id+".series",[]);var variables=(0,_convert_series_to_vars2.default)(series,model,dateFormat);var rows=[];var rawFormatter=(0,_tick_formatter2.default)("0.[0000]");var createPrimitiveRow=function createPrimitiveRow(key){var snippet="{{ "+key+" }}";var value=_lodash2.default.get(variables,key);/raw$/.test(key)&&(value=rawFormatter(value));rows.push(_react2.default.createElement("tr",{key:key},_react2.default.createElement("td",null,_react2.default.createElement("a",{onClick:_this3.handleVarClick(snippet)},snippet)),_react2.default.createElement("td",null,_react2.default.createElement("code",null,"",value,""))))};var createArrayRow=function createArrayRow(key){var snippet="{{# "+key+" }}{{/ "+key+" }}";var date=_lodash2.default.get(variables,key+"[0][0]");var value=_lodash2.default.get(variables,key+"[0][1]");/raw$/.test(key)&&(value=rawFormatter(value));rows.push(_react2.default.createElement("tr",{key:key},_react2.default.createElement("td",null,_react2.default.createElement("a",{onClick:_this3.handleVarClick(snippet)},"{{ "+key+" }}")),_react2.default.createElement("td",null,_react2.default.createElement("code",null,"[ [ ",date,", ",value," ], ... ]"))))};function walk(obj){var path=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];for(var name in obj)Array.isArray(obj[name])?createArrayRow(path.concat(name).join(".")):_lodash2.default.isObject(obj[name])?walk(obj[name],path.concat(name)):createPrimitiveRow(path.concat(name).join("."))}walk(variables);return _react2.default.createElement("div",{className:"vis_editor__markdown"},_react2.default.createElement("div",{className:"vis_editor__markdown-editor"},_react2.default.createElement(_components.KuiCodeEditor,{onLoad:this.handleOnLoad,mode:"markdown",theme:"github",width:"100%",height:"100%",name:"ace-"+model.id,setOptions:{wrap:true,fontSize:"14px"},value:model.markdown,onChange:this.handleChange})),_react2.default.createElement("div",{className:"vis_editor__markdown-variables"},_react2.default.createElement(_eui.EuiText,null,"The following variables can be used in the Markdown by using the Handlebar (mustache) syntax."," ",_react2.default.createElement("a",{href:"http://handlebarsjs.com/expressions.html",target:"_BLANK"},"Click here for documentation")," ","on the available expressions."),_react2.default.createElement("table",{className:"table"},_react2.default.createElement("thead",null,_react2.default.createElement("tr",null,_react2.default.createElement("th",{scope:"col"},"Name"),_react2.default.createElement("th",{scope:"col"},"Value"))),_react2.default.createElement("tbody",null,rows)),0===rows.length&&_react2.default.createElement("div",{className:"vis_editor__no-markdown-variables"},"No variables available for the selected data metrics."),_react2.default.createElement("div",{className:"vis_editor__markdown-code-desc"},_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("p",null,"There is also a special variable named ",_react2.default.createElement("code",null,"_all")," which you can use to access the entire tree. This is useful for creating lists with data from a group by..."))),_react2.default.createElement(_eui.EuiCodeBlock,null,"# All servers:\n\n            {{#each _all}}\n            - {{ label }} {{ last.formatted }}\n            {{/each}}")))}}]);return MarkdownEditor}(_react.Component);MarkdownEditor.propTypes={onChange:_propTypes2.default.func,model:_propTypes2.default.object,visData:_propTypes2.default.object,dateFormat:_propTypes2.default.string};exports.default=MarkdownEditor;module.exports=exports["default"]},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _moment=__webpack_require__(10);var _moment2=_interopRequireDefault(_moment);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function(timefilter){return function(ranges){timefilter.setTime({from:(0,_moment2.default)(ranges.xaxis.from).toISOString(),to:(0,_moment2.default)(ranges.xaxis.to).toISOString(),mode:"absolute"})}};module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";__webpack_require__(4684);__webpack_require__(4685);var _iconVectorMap=__webpack_require__(4688);var _iconVectorMap2=_interopRequireDefault(_iconVectorMap);var _vis_factory=__webpack_require__(85);var _vis_category=__webpack_require__(71);var _schemas=__webpack_require__(96);var _vis_types=__webpack_require__(95);var _truncated_colormaps=__webpack_require__(522);var _util=__webpack_require__(1567);var _region_map_visualization=__webpack_require__(4689);var _update_status=__webpack_require__(432);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_vis_types.VisTypesRegistryProvider.register(function RegionMapProvider(Private,regionmapsConfig,config){var VisFactory=Private(_vis_factory.VisFactoryProvider);var RegionMapsVisualization=Private(_region_map_visualization.RegionMapsVisualizationProvider);var vectorLayers=regionmapsConfig.layers.map(_util.mapToLayerWithId.bind(null,"self_hosted",false));var selectedLayer=vectorLayers[0];var selectedJoinField=selectedLayer?vectorLayers[0].fields[0]:null;return VisFactory.createBaseVisualization({name:"region_map",title:"Region Map",description:"Show metrics on a thematic map. Use one of the provided base maps, or add your own. Darker colors represent higher values.",category:_vis_category.CATEGORY.MAP,image:_iconVectorMap2.default,visConfig:{defaults:{legendPosition:"bottomright",addTooltip:true,colorSchema:"Yellow to Red",selectedLayer:selectedLayer,emsHotLink:"",selectedJoinField:selectedJoinField,isDisplayWarning:true,wms:config.get("visualization:tileMap:WMSdefaults"),mapZoom:2,mapCenter:[0,0],outlineWeight:1,showAllShapes:true}},requiresUpdateStatus:[_update_status.Status.AGGS,_update_status.Status.PARAMS,_update_status.Status.RESIZE,_update_status.Status.DATA,_update_status.Status.UI_STATE],visualization:RegionMapsVisualization,editorConfig:{optionsTemplate:"<region_map-vis-params></region_map-vis-params>",collections:{legendPositions:[{value:"bottomleft",text:"bottom left"},{value:"bottomright",text:"bottom right"},{value:"topleft",text:"top left"},{value:"topright",text:"top right"}],colorSchemas:Object.keys(_truncated_colormaps.truncatedColorMaps),vectorLayers:vectorLayers,baseLayers:[]},schemas:new _schemas.Schemas([{group:"metrics",name:"metric",title:"Value",min:1,max:1,aggFilter:["count","avg","sum","min","max","cardinality","top_hits","sum_bucket","min_bucket","max_bucket","avg_bucket"],defaults:[{schema:"metric",type:"count"}]},{group:"buckets",name:"segment",icon:"fa fa-globe",title:"shape field",min:1,max:1,aggFilter:["terms"]}])},responseHandler:"tabify"})})},function(module,exports){},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(2);var _notify=__webpack_require__(9);var _region_map_vis_params=__webpack_require__(4686);var _region_map_vis_params2=_interopRequireDefault(_region_map_vis_params);var _util=__webpack_require__(1567);__webpack_require__(1568);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana/region_map").directive("regionMapVisParams",function(serviceSettings,regionmapsConfig){return{restrict:"E",template:_region_map_vis_params2.default,link:function link($scope){$scope.collections=$scope.vis.type.editorConfig.collections;$scope.onLayerChange=onLayerChange;regionmapsConfig.includeElasticMapsService&&serviceSettings.getFileLayers().then(function(layersFromService){layersFromService=layersFromService.map(_util.mapToLayerWithId.bind(null,"elastic_maps_service",true));var newVectorLayers=$scope.collections.vectorLayers.slice();var _loop=function _loop(i){var layerFromService=layersFromService[i];var alreadyAdded=newVectorLayers.some(function(layer){return layerFromService.layerId===layer.layerId});if(!alreadyAdded){"geojson"===layerFromService.format&&(layerFromService.format={type:"geojson"});newVectorLayers.push(layerFromService)}};for(var i=0;i<layersFromService.length;i+=1)_loop(i);$scope.collections.vectorLayers=newVectorLayers;if($scope.collections.vectorLayers[0]&&!$scope.editorState.params.selectedLayer){$scope.editorState.params.selectedLayer=$scope.collections.vectorLayers[0];onLayerChange()}setTimeout(function(){$scope.dirty=false},0);$scope.collections.vectorLayers=newVectorLayers;if($scope.collections.vectorLayers[0]&&!$scope.editorState.params.selectedLayer){$scope.editorState.params.selectedLayer=$scope.collections.vectorLayers[0];onLayerChange()}setTimeout(function(){$scope.dirty=false},0)}).catch(function(error){_notify.toastNotifications.addWarning(error.message)});function onLayerChange(){if(!$scope.editorState.params.selectedLayer)return;$scope.editorState.params.selectedJoinField=$scope.editorState.params.selectedLayer.fields[0];$scope.editorState.params.selectedLayer.isEMS?$scope.editorState.params.emsHotLink=serviceSettings.getEMSHotLink($scope.editorState.params.selectedLayer):$scope.editorState.params.emsHotLink=null}onLayerChange()}}})},function(module,exports){module.exports='<div class="kuiSideBarSection">\n  <div class="form-group">\n    <div class="kuiSideBarSectionTitle">\n      <div class="kuiSideBarSectionTitle__text">\n        Layer Settings\n      </div>\n    </div>\n\n    <div class="kuiSideBarFormRow">\n      <label class="kuiSideBarFormRow__label" for="regionMap">\n        Vector map\n      </label>\n      <div class="kuiSideBarFormRow__control">\n        <select\n          id="regionMap"\n          class="kuiSelect kuiSideBarSelect"\n          ng-model="editorState.params.selectedLayer"\n          ng-options="layer.name for layer in collections.vectorLayers track by layer.layerId"\n          ng-change="onLayerChange()"\n        ></select>\n      </div>\n    </div>\n\n    <div class="kuiSideBarFormRow" ng-hide="!editorState.params.emsHotLink">\n        <a\n          class="ems-hotlink"\n          target="_blank"\n          rel="noopener noreferrer"\n          ng-href="{{editorState.params.emsHotLink}}"\n          target="_blank"\n          title="Preview {{editorState.params.selectedLayer.name}} on the Elastic Maps Service"\n        >Preview on EMS\n        </a>\n    </div>\n\n    <div class="kuiSideBarFormRow">\n      <label class="kuiSideBarFormRow__label" for="joinField">\n        Join field\n      </label>\n      <div class="kuiSideBarFormRow__control">\n        <select id="joinField"\n          class="kuiSelect kuiSideBarSelect"\n          ng-model="editorState.params.selectedJoinField"\n          ng-options="field.description for field in editorState.params.selectedLayer.fields track by field.name"\n        >\n          <option value=\'\'>Select</option></select>\n      </div>\n    </div>\n    <div class="kuiSideBarFormRow">\n      <label class="kuiSideBarFormRow__label" for="displayWarnings">\n        Display warnings\n      </label>\n\n      <div class="kuiSideBarFormRow__control">\n        <input id="displayWarnings" type="checkbox" ng-model="editorState.params.isDisplayWarning">\n        &nbsp;\n        <icon-tip\n          content="\'Turns on/off warnings. When turned on, warning will be shown for each term that cannot be matched to a shape in the vector layer based on the join field. When turned off, these warnings will be turned off.\'"\n          position="\'right\'"\n        ></icon-tip>\n      </div>\n    </div>\n    <div class="kuiSideBarFormRow">\n      <label class="kuiSideBarFormRow__label" for="onlyShowMatchingShapes">\n        Show all shapes\n      </label>\n      <div class="kuiSideBarFormRow__control">\n        <input id="onlyShowMatchingShapes" type="checkbox" ng-model="editorState.params.showAllShapes">\n        &nbsp;\n        <icon-tip\n          content="\'Turning this off only shows the shapes that were matched with a corresponding term\'"\n          position="\'right\'"\n        ></icon-tip>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class="kuiSideBarSection">\n\n  <div class="kuiSideBarSectionTitle">\n    <div class="kuiSideBarSectionTitle__text">Style settings</div>\n  </div>\n  <div class="kuiSideBarFormRow" >\n    <label class="kuiSideBarFormRow__label" for="colorSchema">\n      Color Schema\n    </label>\n    <div class="kuiSideBarFormRow__control">\n      <select\n        id="colorSchema"\n        class="kuiSelect kuiSideBarSelect"\n        ng-model="editorState.params.colorSchema"\n        ng-options="mode for mode in collections.colorSchemas"\n      ></select>\n    </div>\n  </div>\n  <div class="kuiSideBarFormRow" >\n    <label class="kuiSideBarFormRow__label" for="outlineWeight">\n      Outline weight\n    </label>\n    <div class="kuiSideBarFormRow__control">\n      <input\n        id="outlineWeight"\n        class="kuiInput kuiSideBarInput"\n        type="number"\n        ng-model="editorState.params.outlineWeight"\n      >\n    </div>\n  </div>\n</div>\n\n<wms-options options="editorState.params.wms"></wms-options>\n'},function(module,exports){module.exports='<div>\n\n\n  <div class="kuiSideBarSection">\n    <div class="kuiSideBarSectionTitle">\n      <div class="kuiSideBarSectionTitle__text">\n        Base Layer Settings\n      </div>\n    </div>\n\n\n    <div class="kuiSideBarFormRow" ng-show="!options.enabled">\n      <label class="kuiSideBarFormRow__label" for="tmsLayers">\n        Layers\n      </label>\n      <div class="kuiSideBarFormRow__control">\n        <select\n          id="tmsLayers"\n          class="kuiSelect kuiSideBarSelect"\n          ng-model="options.selectedTmsLayer"\n          ng-options="layer.id for layer in options.tmsLayers track by layer.id"\n        ></select>\n      </div>\n    </div>\n\n    <div class="kuiSideBarFormRow">\n      <label class="kuiSideBarFormRow__label" for="wmsCompliantMapServer">\n        WMS map server\n      </label>\n\n      <div class="kuiSideBarFormRow__control">\n        <input\n          id="wmsCompliantMapServer"\n          type="checkbox"\n          name="wms.enabled"\n          ng-model="options.enabled"\n        >\n        &nbsp;\n        <icon-tip\n          content="\'Use WMS compliant map tile server. For advanced users only.\'"\n          position="\'right\'"\n        ></icon-tip>\n      </div>\n    </div>\n\n    <div ng-show="options.enabled" class="well">\n      <div class="vis-option-item form-group">\n        <p>WMS is an OGC standard for map image services. For more information, go <a\n          href="http://www.opengeospatial.org/standards/wms">here</a>.</p>\n        <label>\n          WMS url*\n          <icon-tip\n            position="\'right\'"\n            content="\'The URL of the WMS web service\'"\n          ></icon-tip>\n        </label>\n        <input type="text" class="form-control"\n               name="wms.url"\n               ng-model="options.url">\n      </div>\n\n      <div class="vis-option-item form-group">\n        <label>\n          WMS layers*\n          <icon-tip\n            position="\'right\'"\n            content="\'A comma separated list of layers to use\'"\n          ></icon-tip>\n        </label>\n        <input type="text" class="form-control"\n               ng-require="options.enabled"\n               name="wms.options.layers"\n               ng-model="options.options.layers">\n      </div>\n\n      <div class="vis-option-item form-group">\n        <label>\n          WMS version*\n          <icon-tip\n            position="\'right\'"\n            content="\'The version of WMS the server supports\'"\n          ></icon-tip>\n        </label>\n        <input type="text" class="form-control"\n               name="wms.options.version"\n               ng-model="options.options.version">\n      </div>\n\n      <div class="vis-option-item form-group">\n        <label>\n          WMS format*\n          <icon-tip\n            position="\'right\'"\n            content="\'Usually image/png or image/jpeg. Use png if the server will return transparent layers.\'"\n          ></icon-tip>\n        </label>\n        <input type="text" class="form-control"\n               name="wms.options.format"\n               ng-model="options.options.format">\n      </div>\n\n      <div class="vis-option-item form-group">\n        <label>\n          WMS attribution\n          <icon-tip\n            position="\'right\'"\n            content="\'Attribution string for the lower right corner\'"\n          ></icon-tip>\n        </label>\n        <input type="text" class="form-control"\n               name="wms.options.attribution"\n               ng-model="options.options.attribution">\n      </div>\n\n      <div class="vis-option-item form-group">\n        <label>\n          WMS styles*\n          <icon-tip\n            position="\'right\'"\n            content="\'A comma separated list of WMS server supported styles to use. Blank in most cases.\'"\n          ></icon-tip>\n        </label>\n        <input type="text" class="form-control"\n               name="wms.options.styles"\n               ng-model="options.options.styles">\n      </div>\n\n      <p>* if this parameter is incorrect, maps will fail to load.</p>\n\n\n    </div>\n  </div>\n</div>\n'},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"31c86fc56ac59def71b7d7cff315270b.svg"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;if(void 0===getter)return;return getter.call(receiver)};exports.RegionMapsVisualizationProvider=RegionMapsVisualizationProvider;__webpack_require__(884);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _base_maps_visualization=__webpack_require__(1569);var _choropleth_layer=__webpack_require__(4698);var _choropleth_layer2=_interopRequireDefault(_choropleth_layer);var _truncated_colormaps=__webpack_require__(522);var _tooltip_formatter=__webpack_require__(4700);var _tooltip_formatter2=_interopRequireDefault(_tooltip_formatter);__webpack_require__(921);var _notify=__webpack_require__(9);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function RegionMapsVisualizationProvider(Private,config){var tooltipFormatter=Private(_tooltip_formatter2.default);var BaseMapsVisualization=Private(_base_maps_visualization.BaseMapsVisualizationProvider);return function(_BaseMapsVisualizatio){_inherits(RegionMapsVisualization,_BaseMapsVisualizatio);function RegionMapsVisualization(container,vis){_classCallCheck(this,RegionMapsVisualization);var _this=_possibleConstructorReturn(this,(RegionMapsVisualization.__proto__||Object.getPrototypeOf(RegionMapsVisualization)).call(this,container,vis));_this._vis=_this.vis;_this._choroplethLayer=null;return _this}_createClass(RegionMapsVisualization,[{key:"render",value:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(esResponse,status){return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return _get(RegionMapsVisualization.prototype.__proto__||Object.getPrototypeOf(RegionMapsVisualization.prototype),"render",this).call(this,esResponse,status);case 2:if(!this._choroplethLayer){_context.next=5;break}_context.next=5;return this._choroplethLayer.whenDataLoaded();case 5:case"end":return _context.stop()}},_callee,this)}));function render(_x,_x2){return _ref.apply(this,arguments)}return render}()},{key:"_updateData",value:function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(tableGroup){var results,buckets,metricsAgg;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:this._chartData=tableGroup;results=void 0;if(tableGroup&&tableGroup.tables&&tableGroup.tables.length&&2===tableGroup.tables[0].columns.length){buckets=tableGroup.tables[0].rows;results=buckets.map(function(_ref3){var _ref4=_slicedToArray(_ref3,2),term=_ref4[0],value=_ref4[1];return{term:term,value:value}})}else results=[];!this._vis.params.selectedJoinField&&this._vis.params.selectedLayer&&(this._vis.params.selectedJoinField=this._vis.params.selectedLayer.fields[0]);if(this._vis.params.selectedLayer){_context2.next=6;break}return _context2.abrupt("return");case 6:this._updateChoroplethLayerForNewMetrics(this._vis.params.selectedLayer.url,this._vis.params.selectedLayer.attribution,this._vis.params.showAllShapes,results);metricsAgg=_lodash2.default.first(this._vis.getAggConfig().bySchemaName.metric);this._choroplethLayer.setMetrics(results,metricsAgg);this._setTooltipFormatter();this._kibanaMap.useUiStateFromVisualization(this._vis);case 11:case"end":return _context2.stop()}},_callee2,this)}));function _updateData(_x3){return _ref2.apply(this,arguments)}return _updateData}()},{key:"_updateParams",value:function(){var _ref5=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var visParams;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _get(RegionMapsVisualization.prototype.__proto__||Object.getPrototypeOf(RegionMapsVisualization.prototype),"_updateParams",this).call(this);case 2:visParams=this.vis.params;!visParams.selectedJoinField&&visParams.selectedLayer&&(visParams.selectedJoinField=visParams.selectedLayer.fields[0]);if(!(!visParams.selectedJoinField||!visParams.selectedLayer)){_context3.next=6;break}return _context3.abrupt("return");case 6:this._updateChoroplethLayerForNewProperties(visParams.selectedLayer.url,visParams.selectedLayer.attribution,this._vis.params.showAllShapes);this._choroplethLayer.setJoinField(visParams.selectedJoinField.name);this._choroplethLayer.setColorRamp(_truncated_colormaps.truncatedColorMaps[visParams.colorSchema]);this._choroplethLayer.setLineWeight(visParams.outlineWeight);this._setTooltipFormatter();case 11:case"end":return _context3.stop()}},_callee3,this)}));function _updateParams(){return _ref5.apply(this,arguments)}return _updateParams}()},{key:"_updateChoroplethLayerForNewMetrics",value:function _updateChoroplethLayerForNewMetrics(url,attribution,showAllData,newMetrics){if(this._choroplethLayer&&this._choroplethLayer.canReuseInstanceForNewMetrics(url,showAllData,newMetrics))return;return this._recreateChoroplethLayer(url,attribution,showAllData)}},{key:"_updateChoroplethLayerForNewProperties",value:function _updateChoroplethLayerForNewProperties(url,attribution,showAllData){if(this._choroplethLayer&&this._choroplethLayer.canReuseInstance(url,showAllData))return;return this._recreateChoroplethLayer(url,attribution,showAllData)}},{key:"_recreateChoroplethLayer",value:function _recreateChoroplethLayer(url,attribution,showAllData){var _this2=this;this._kibanaMap.removeLayer(this._choroplethLayer);this._choroplethLayer?this._choroplethLayer=this._choroplethLayer.cloneChoroplethLayerForNewData(url,attribution,this.vis.params.selectedLayer.format,showAllData,this.vis.params.selectedLayer.meta):this._choroplethLayer=new _choropleth_layer2.default(url,attribution,this.vis.params.selectedLayer.format,showAllData,this.vis.params.selectedLayer.meta);this._choroplethLayer.on("select",function(event){if(!_this2._isAggReady())return;var rowIndex=_this2._chartData.tables[0].rows.findIndex(function(row){return row[0]===event});_this2._vis.API.events.addFilter(_this2._chartData.tables[0],0,rowIndex,event)});this._choroplethLayer.on("styleChanged",function(event){var shouldShowWarning=_this2._vis.params.isDisplayWarning&&config.get("visualization:regionmap:showWarnings");event.mismatches.length>0&&shouldShowWarning&&_notify.toastNotifications.addWarning({title:"Unable to show "+event.mismatches.length+" "+(event.mismatches.length>1?"results":"result")+" on map",text:"Ensure that each of these term matches a shape on that shape's join field: "+event.mismatches.join(", ")})});this._kibanaMap.addLayer(this._choroplethLayer)}},{key:"_isAggReady",value:function _isAggReady(){return this._vis.getAggConfig().bySchemaName.segment&&this._vis.getAggConfig().bySchemaName.segment[0]}},{key:"_setTooltipFormatter",value:function _setTooltipFormatter(){var metricsAgg=_lodash2.default.first(this._vis.getAggConfig().bySchemaName.metric);if(this._isAggReady()){var fieldName=this._vis.getAggConfig().bySchemaName.segment[0].makeLabel();this._choroplethLayer.setTooltipFormatter(tooltipFormatter,metricsAgg,fieldName)}else this._choroplethLayer.setTooltipFormatter(tooltipFormatter,metricsAgg,null)}}]);return RegionMapsVisualization}(BaseMapsVisualization)}},,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.zoomToPrecision=zoomToPrecision;var _decode_geo_hash=__webpack_require__(829);var maxPrecision=12;var zoomPrecisionMap={};var minGeohashPixels=16;function calculateZoomToPrecisionMap(maxZoom){for(var zoom=0;zoom<=maxZoom;zoom+=1){if("number"===typeof zoomPrecisionMap[zoom])continue;var worldPixels=256*Math.pow(2,zoom);zoomPrecisionMap[zoom]=1;for(var precision=2;precision<=maxPrecision;precision+=1){var columns=(0,_decode_geo_hash.geohashColumns)(precision);if(!(worldPixels/columns>=minGeohashPixels))break;zoomPrecisionMap[zoom]=precision}}}function zoomToPrecision(mapZoom,maxPrecision,maxZoom){calculateZoomToPrecisionMap("number"===typeof maxZoom?maxZoom:21);return Math.min(zoomPrecisionMap[mapZoom],maxPrecision)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;if(void 0===getter)return;return getter.call(receiver)};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _jquery=__webpack_require__(13);var _jquery2=_interopRequireDefault(_jquery);var _leaflet=__webpack_require__(261);var _leaflet2=_interopRequireDefault(_leaflet);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _d=__webpack_require__(19);var _d2=_interopRequireDefault(_d);var _kibana_map_layer=__webpack_require__(922);var _truncated_colormaps=__webpack_require__(522);var _topojsonClient=__webpack_require__(4699);var topojson=_interopRequireWildcard(_topojsonClient);var _notify=__webpack_require__(9);var _color_util=__webpack_require__(1572);var colorUtil=_interopRequireWildcard(_color_util);function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);newObj.default=obj;return newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var EMPTY_STYLE={weight:1,opacity:.6,color:"rgb(200,200,200)",fillOpacity:0};var ChoroplethLayer=function(_KibanaMapLayer){_inherits(ChoroplethLayer,_KibanaMapLayer);_createClass(ChoroplethLayer,null,[{key:"_doInnerJoin",value:function _doInnerJoin(sortedMetrics,sortedGeojsonFeatures,joinField){var j=0;for(var i=0;i<sortedGeojsonFeatures.length;i++){var property=sortedGeojsonFeatures[i].properties[joinField];sortedGeojsonFeatures[i].__kbnJoinedMetric=null;var position=sortedMetrics.length?compareLexicographically(property,sortedMetrics[j].term):-1;if(-1===position);else if(0===position)sortedGeojsonFeatures[i].__kbnJoinedMetric=sortedMetrics[j];else if(1===position)while(j<sortedMetrics.length){var newTerm=sortedMetrics[j].term;var newPosition=compareLexicographically(newTerm,property);if(-1===newPosition);else{if(0===newPosition){sortedGeojsonFeatures[i].__kbnJoinedMetric=sortedMetrics[j];break}if(1===newPosition)break}if(j===sortedMetrics.length-1)break;j++}}}}]);function ChoroplethLayer(geojsonUrl,attribution,format,showAllShapes,meta){var _this2=this;_classCallCheck(this,ChoroplethLayer);var _this=_possibleConstructorReturn(this,(ChoroplethLayer.__proto__||Object.getPrototypeOf(ChoroplethLayer)).call(this));_this._metrics=null;_this._joinField=null;_this._colorRamp=_truncated_colormaps.truncatedColorMaps[Object.keys(_truncated_colormaps.truncatedColorMaps)[0]];_this._lineWeight=1;_this._tooltipFormatter=function(){return""};_this._attribution=attribution;_this._boundsOfData=null;_this._showAllShapes=showAllShapes;_this._geojsonUrl=geojsonUrl;_this._leafletLayer=_leaflet2.default.geoJson(null,{onEachFeature:function onEachFeature(feature,layer){layer.on("click",function(){_this.emit("select",feature.properties[_this._joinField])});var location=null;layer.on({mouseover:function mouseover(){var tooltipContents=_this._tooltipFormatter(feature);if(!location){var leafletGeojson=_leaflet2.default.geoJson(feature);location=leafletGeojson.getBounds().getCenter()}_this.emit("showTooltip",{content:tooltipContents,position:location})},mouseout:function mouseout(){_this.emit("hideTooltip")}})},style:_this._makeEmptyStyleFunction()});_this._loaded=false;_this._error=false;_this._isJoinValid=false;_this._whenDataLoaded=new Promise((_ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(resolve){var data,featureCollection,formatType,features,errorMessage;return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return _this._makeJsonAjaxCall(geojsonUrl);case 3:data=_context.sent;featureCollection=void 0;formatType="string"===typeof format?format:format.type;if(!("geojson"===formatType)){_context.next=10;break}featureCollection=data;_context.next=16;break;case 10:if(!("topojson"===formatType)){_context.next=15;break}features=_lodash2.default.get(data,"objects."+meta.feature_collection_path);featureCollection=topojson.feature(data,features);_context.next=16;break;case 15:throw new Error("Unrecognized format "+formatType);case 16:_this._sortedFeatures=featureCollection.features.slice();_this._sortFeatures();showAllShapes&&_this._leafletLayer.addData(featureCollection);_this._loaded=true;_this._setStyle();resolve();_context.next=32;break;case 24:_context.prev=24;_context.t0=_context["catch"](0);_this._loaded=true;_this._error=true;errorMessage=void 0;errorMessage=404===_context.t0.status?"Server responding with '404' when attempting to fetch "+geojsonUrl+". \n                          Make sure the file exists at that location.":"Cannot download "+geojsonUrl+" file. Please ensure the\nCORS configuration of the server permits requests from the Kibana application on this host.";_notify.toastNotifications.addDanger({title:"Error downloading vector data",text:errorMessage});resolve();case 32:case"end":return _context.stop()}},_callee,_this2,[[0,24]])})),function(_x){return _ref.apply(this,arguments)}));var _ref;return _this}_createClass(ChoroplethLayer,[{key:"_makeJsonAjaxCall",value:function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(url){return regeneratorRuntime.wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _jquery2.default.ajax({dataType:"json",url:url});case 2:return _context2.abrupt("return",_context2.sent);case 3:case"end":return _context2.stop()}},_callee2,this)}));function _makeJsonAjaxCall(_x2){return _ref2.apply(this,arguments)}return _makeJsonAjaxCall}()},{key:"_invalidateJoin",value:function _invalidateJoin(){this._isJoinValid=false}},{key:"_doInnerJoin",value:function _doInnerJoin(){ChoroplethLayer._doInnerJoin(this._metrics,this._sortedFeatures,this._joinField);this._isJoinValid=true}},{key:"_setStyle",value:function _setStyle(){if(this._error||!this._loaded||!this._metrics||!this._joinField)return;if(!this._isJoinValid){this._doInnerJoin();if(!this._showAllShapes){var featureCollection={type:"FeatureCollection",features:this._sortedFeatures.filter(function(feature){return feature.__kbnJoinedMetric})};this._leafletLayer.addData(featureCollection)}}var styler=this._makeChoroplethStyler();this._leafletLayer.setStyle(styler.leafletStyleFunction);if(this._metrics&&this._metrics.length>0){var _getMinMax=getMinMax(this._metrics),min=_getMinMax.min,max=_getMinMax.max;this._legendColors=colorUtil.getLegendColors(this._colorRamp);var quantizeDomain=min!==max?[min,max]:_d2.default.scale.quantize().domain();this._legendQuantizer=_d2.default.scale.quantize().domain(quantizeDomain).range(this._legendColors)}this._boundsOfData=styler.getLeafletBounds();this.emit("styleChanged",{mismatches:styler.getMismatches()})}},{key:"getUrl",value:function getUrl(){return this._geojsonUrl}},{key:"setTooltipFormatter",value:function setTooltipFormatter(tooltipFormatter,metricsAgg,fieldName){var _this3=this;this._tooltipFormatter=function(geojsonFeature){if(!_this3._metrics)return"";var match=_this3._metrics.find(function(bucket){return 0===compareLexicographically(bucket.term,geojsonFeature.properties[_this3._joinField])});return tooltipFormatter(metricsAgg,match,fieldName)}}},{key:"setJoinField",value:function setJoinField(joinfield){if(joinfield===this._joinField)return;this._joinField=joinfield;this._sortFeatures();this._setStyle()}},{key:"cloneChoroplethLayerForNewData",value:function cloneChoroplethLayerForNewData(url,attribution,format,showAllData,meta){var clonedLayer=new ChoroplethLayer(url,attribution,format,showAllData,meta);clonedLayer.setJoinField(this._joinField);clonedLayer.setColorRamp(this._colorRamp);clonedLayer.setLineWeight(this._lineWeight);clonedLayer.setTooltipFormatter(this._tooltipFormatter);this._metrics&&this._metricsAgg&&clonedLayer.setMetrics(this._metrics,this._metricsAgg);return clonedLayer}},{key:"_sortFeatures",value:function _sortFeatures(){var _this4=this;if(this._sortedFeatures&&this._joinField){this._sortedFeatures.sort(function(a,b){var termA=a.properties[_this4._joinField];var termB=b.properties[_this4._joinField];return compareLexicographically(termA,termB)});this._invalidateJoin()}}},{key:"whenDataLoaded",value:function whenDataLoaded(){return this._whenDataLoaded}},{key:"setMetrics",value:function setMetrics(metrics,metricsAgg){this._metrics=metrics.slice();this._metricsAgg=metricsAgg;this._valueFormatter=this._metricsAgg.fieldFormatter();this._metrics.sort(function(a,b){return compareLexicographically(a.term,b.term)});this._invalidateJoin();this._setStyle()}},{key:"setColorRamp",value:function setColorRamp(colorRamp){if(_lodash2.default.isEqual(colorRamp,this._colorRamp))return;this._colorRamp=colorRamp;this._setStyle()}},{key:"setLineWeight",value:function setLineWeight(lineWeight){if(this._lineWeight===lineWeight)return;this._lineWeight=lineWeight;this._setStyle()}},{key:"canReuseInstance",value:function canReuseInstance(geojsonUrl,showAllShapes){return this._geojsonUrl===geojsonUrl&&this._showAllShapes===showAllShapes}},{key:"canReuseInstanceForNewMetrics",value:function canReuseInstanceForNewMetrics(geojsonUrl,showAllShapes,newMetrics){if(this._geojsonUrl!==geojsonUrl)return false;if(showAllShapes)return this._showAllShapes===showAllShapes;if(!this._metrics)return;var currentKeys=Object.keys(this._metrics);var newKeys=Object.keys(newMetrics);return _lodash2.default.isEqual(currentKeys,newKeys)}},{key:"getBounds",value:function getBounds(){var bounds=_get(ChoroplethLayer.prototype.__proto__||Object.getPrototypeOf(ChoroplethLayer.prototype),"getBounds",this).call(this);return this._boundsOfData?this._boundsOfData:bounds}},{key:"appendLegendContents",value:function appendLegendContents(jqueryDiv){var _this5=this;if(!this._legendColors||!this._legendQuantizer||!this._metricsAgg)return;var titleText=this._metricsAgg.makeLabel();var $title=(0,_jquery2.default)("<div>").addClass("tilemap-legend-title").text(titleText);jqueryDiv.append($title);this._legendColors.forEach(function(color){var labelText=_this5._legendQuantizer.invertExtent(color).map(_this5._valueFormatter).join(" ");var label=(0,_jquery2.default)("<div>");var icon=(0,_jquery2.default)("<i>").css({background:color,"border-color":makeColorDarker(color)});var text=(0,_jquery2.default)("<span>").text(labelText);label.append(icon);label.append(text);jqueryDiv.append(label)})}},{key:"_makeEmptyStyleFunction",value:function _makeEmptyStyleFunction(){var emptyStyle=_lodash2.default.assign({},EMPTY_STYLE,{weight:this._lineWeight});return function(){return emptyStyle}}},{key:"_makeChoroplethStyler",value:function _makeChoroplethStyler(){var _this6=this;var emptyStyle=this._makeEmptyStyleFunction();if(0===this._metrics.length)return{leafletStyleFunction:function leafletStyleFunction(){return emptyStyle()},getMismatches:function getMismatches(){return[]},getLeafletBounds:function getLeafletBounds(){return null}};var _getMinMax2=getMinMax(this._metrics),min=_getMinMax2.min,max=_getMinMax2.max;var boundsOfAllFeatures=new _leaflet2.default.LatLngBounds;return{leafletStyleFunction:function leafletStyleFunction(geojsonFeature){var match=geojsonFeature.__kbnJoinedMetric;if(!match)return emptyStyle();var boundsOfFeature=_leaflet2.default.geoJson(geojsonFeature).getBounds();boundsOfAllFeatures.extend(boundsOfFeature);return{fillColor:getChoroplethColor(match.value,min,max,_this6._colorRamp),weight:_this6._lineWeight,opacity:1,color:"white",fillOpacity:.7}},getMismatches:function getMismatches(){var mismatches=_this6._metrics.slice();_this6._sortedFeatures.forEach(function(feature){var index=mismatches.indexOf(feature.__kbnJoinedMetric);index>=0&&mismatches.splice(index,1)});return mismatches.map(function(b){return b.term})},getLeafletBounds:function getLeafletBounds(){return boundsOfAllFeatures.isValid()?boundsOfAllFeatures:null}}}}]);return ChoroplethLayer}(_kibana_map_layer.KibanaMapLayer);exports.default=ChoroplethLayer;function compareLexicographically(termA,termB){termA="string"===typeof termA?termA:termA.toString();termB="string"===typeof termB?termB:termB.toString();return termA.localeCompare(termB)}function makeColorDarker(color){var amount=1.3;return _d2.default.hcl(color).darker(amount).toString()}function getMinMax(data){var min=data[0].value;var max=data[0].value;for(var i=1;i<data.length;i+=1){min=Math.min(data[i].value,min);max=Math.max(data[i].value,max)}return{min:min,max:max}}function getChoroplethColor(value,min,max,colorRamp){if(min===max)return colorUtil.getColor(colorRamp,colorRamp.length-1);var fraction=(value-min)/(max-min);var index=Math.round(colorRamp.length*fraction)-1;var i=Math.max(Math.min(colorRamp.length-1,index),0);return colorUtil.getColor(colorRamp,i)}module.exports=exports["default"]},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=TileMapTooltipFormatter;var _jquery=__webpack_require__(13);var _jquery2=_interopRequireDefault(_jquery);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function TileMapTooltipFormatter($compile,$rootScope){var $tooltipScope=$rootScope.$new();var $el=(0,_jquery2.default)("<div>").html(__webpack_require__(4701));$compile($el)($tooltipScope);return function tooltipFormatter(metricAgg,metric,fieldName){if(!metric)return"";$tooltipScope.details=[];fieldName&&metric&&$tooltipScope.details.push({label:fieldName,value:metric.term});metric&&$tooltipScope.details.push({label:metricAgg.makeLabel(),value:metricAgg.fieldFormatter()(metric.value)});$tooltipScope.$apply();return $el.html()}}module.exports=exports["default"]},function(module,exports){module.exports='<table>\n  <tbody>\n    <tr ng-repeat="detail in details" >\n      <td class="tooltip-label"><b>{{detail.label}}</b></td>\n      <td class="tooltip-value">{{detail.value}}</td>\n    </tr>\n  </tbody>\n</table>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});__webpack_require__(4703);__webpack_require__(4704);__webpack_require__(4705);__webpack_require__(1573);__webpack_require__(4713);var _vis_factory=__webpack_require__(85);var _vis_category=__webpack_require__(71);var _schemas=__webpack_require__(96);var _table_vis=__webpack_require__(4715);var _table_vis2=_interopRequireDefault(_table_vis);var _vis_types=__webpack_require__(95);var _iconTable=__webpack_require__(4716);var _iconTable2=_interopRequireDefault(_iconTable);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_vis_types.VisTypesRegistryProvider.register(TableVisTypeProvider);function TableVisTypeProvider(Private){var VisFactory=Private(_vis_factory.VisFactoryProvider);return VisFactory.createAngularVisualization({type:"table",name:"table",title:"Data Table",image:_iconTable2.default,description:"Display values in a table",category:_vis_category.CATEGORY.DATA,visConfig:{defaults:{perPage:10,showPartialRows:false,showMetricsAtAllLevels:false,sort:{columnIndex:null,direction:null},showTotal:false,totalFunc:"sum"},template:_table_vis2.default},editorConfig:{optionsTemplate:"<table-vis-params></table-vis-params>",schemas:new _schemas.Schemas([{group:"metrics",name:"metric",title:"Metric",aggFilter:["!geo_centroid","!geo_bounds"],min:1,defaults:[{type:"count",schema:"metric"}]},{group:"buckets",name:"bucket",title:"Split Rows",aggFilter:["!filter"]},{group:"buckets",name:"split",title:"Split Table",aggFilter:["!filter"]}])},responseHandlerConfig:{asAggConfigResults:true},hierarchicalData:function hierarchicalData(vis){return Boolean(vis.params.showPartialRows||vis.params.showMetricsAtAllLevels)}})}exports.default=TableVisTypeProvider;module.exports=exports["default"]},function(module,exports){},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(2);var _lodash=__webpack_require__(1);var _module=_modules.uiModules.get("kibana/table_vis",["kibana"]);_module.controller("KbnTableVisController",function($scope){var uiStateSort=$scope.uiState?$scope.uiState.get("vis.params.sort"):{};(0,_lodash.assign)($scope.vis.params.sort,uiStateSort);$scope.sort=$scope.vis.params.sort;$scope.$watchCollection("sort",function(newSort){$scope.uiState.set("vis.params.sort",newSort)});$scope.$watch("renderComplete",function(){var tableGroups=$scope.tableGroups=null;var hasSomeRows=$scope.hasSomeRows=null;if($scope.esResponse){tableGroups=$scope.esResponse;hasSomeRows=tableGroups.tables.some(function haveRows(table){if(table.tables)return table.tables.some(haveRows);return table.rows.length>0})}$scope.hasSomeRows=hasSomeRows;hasSomeRows&&($scope.tableGroups=tableGroups);$scope.renderComplete()})})},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(2);var _table_vis_params=__webpack_require__(4706);var _table_vis_params2=_interopRequireDefault(_table_vis_params);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana/table_vis").directive("tableVisParams",function(){return{restrict:"E",template:_table_vis_params2.default,link:function link($scope){$scope.totalAggregations=["sum","avg","min","max","count"];$scope.$watchMulti(["editorState.params.showPartialRows","editorState.params.showMetricsAtAllLevels"],function(){if(!$scope.vis)return;var params=$scope.editorState.params;params.showPartialRows||params.showMetricsAtAllLevels?$scope.metricsAtAllLevels=true:$scope.metricsAtAllLevels=false})}}})},function(module,exports){module.exports='\n<div class="kuiSideBarSection">\n  <div class="form-group">\n    <label for="datatableVisualizationPerPage">Per Page</label>\n    <input type="number" ng-model="editorState.params.perPage" class="form-control" id="datatableVisualizationPerPage">\n  </div>\n\n  <div class="checkbox">\n    <label>\n      <input type="checkbox" ng-model="editorState.params.showMetricsAtAllLevels">\n      Show metrics for every bucket/level\n    </label>\n  </div>\n\n  <div class="checkbox">\n    <label>\n      <input type="checkbox" ng-model="editorState.params.showPartialRows">\n      Show partial rows\n    </label>\n  </div>\n\n  <div class="checkbox">\n    <label>\n      <input type="checkbox" ng-model="metricsAtAllLevels" disabled>\n      Calculate metrics for every bucket/level\n    </label>\n  </div>\n\n  <div class="checkbox">\n    <label>\n      <input type="checkbox" ng-model="editorState.params.showTotal">\n      Show total\n    </label>\n  </div>\n\n  <div>\n    <label for="datatableVisualizationTotalFunction">Total function</label>\n    <select ng-disabled="!editorState.params.showTotal"\n            class="form-control"\n            ng-model="editorState.params.totalFunc"\n            ng-options="x for x in totalAggregations" id="datatableVisualizationTotalFunction">\n    </select>\n  </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";__webpack_require__(16);__webpack_require__(1574);__webpack_require__(4708);__webpack_require__(4711);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _modules=__webpack_require__(2);var _agg_table=__webpack_require__(4712);var _agg_table2=_interopRequireDefault(_agg_table);var _field_formats=__webpack_require__(116);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana",["RecursionHelper"]).directive("kbnAggTable",function($filter,config,Private,RecursionHelper){var numberFormatter=_field_formats.fieldFormats.getDefaultInstance("number").getConverterFor("text");return{restrict:"E",template:_agg_table2.default,scope:{table:"=",perPage:"=?",sort:"=?",exportTitle:"=?",showTotal:"=",totalFunc:"="},controllerAs:"aggTable",compile:function compile($el){return RecursionHelper.compile($el)},controller:function controller($scope){var self=this;self._saveAs=__webpack_require__(923).saveAs;self.csv={separator:config.get("csv:separator"),quoteValues:config.get("csv:quoteValues")};self.exportAsCsv=function(formatted){var csv=new Blob([self.toCsv(formatted)],{type:"text/plain;charset=utf-8"});self._saveAs(csv,self.csv.filename)};self.toCsv=function(formatted){var rows=$scope.table.rows;var columns=formatted?$scope.formattedColumns:$scope.table.columns;var nonAlphaNumRE=/[^a-zA-Z0-9]/;var allDoubleQuoteRE=/"/g;function escape(val){!formatted&&_lodash2.default.isObject(val)&&(val=val.valueOf());val=String(val);self.csv.quoteValues&&nonAlphaNumRE.test(val)&&(val='"'+val.replace(allDoubleQuoteRE,'""')+'"');return val}var csvRows=rows.map(function(row){return row.map(escape)});csvRows.unshift(columns.map(function(col){return escape(col.title)}));return csvRows.map(function(row){return row.join(self.csv.separator)+"\r\n"}).join("")};$scope.$watch("table",function(){var table=$scope.table;if(!table){$scope.rows=null;$scope.formattedColumns=null;return}self.csv.filename=($scope.exportTitle||table.title()||"table")+".csv";$scope.rows=table.rows;$scope.formattedColumns=table.columns.map(function(col,i){var agg=$scope.table.aggConfig(col);var field=agg.getField();var formattedColumn={title:col.title,filterable:field&&field.filterable&&"buckets"===agg.schema.group};var last=i===table.columns.length-1;(last||"metrics"===agg.schema.group)&&(formattedColumn.class="visualize-table-right");var isFieldNumeric=false;var isFieldDate=false;var aggType=agg.type;if(aggType&&"metrics"===aggType.type)if("top_hits"===aggType.name)"concat"!==agg._opts.params.aggregate&&(isFieldNumeric=true);else if("cardinality"===aggType.name)isFieldNumeric=true;else if(field){isFieldNumeric="number"===field.type;isFieldDate="date"===field.type}else isFieldNumeric=true;else if(field){isFieldNumeric="number"===field.type;isFieldDate="date"===field.type}if(isFieldNumeric||isFieldDate||"count"===$scope.totalFunc){var sum=function sum(tableRows){return _lodash2.default.reduce(tableRows,function(prev,curr){if(void 0===curr[i].value)return prev;return prev+curr[i].value},0)};var formatter=agg.fieldFormatter("text");switch($scope.totalFunc){case"sum":isFieldDate||(formattedColumn.total=formatter(sum(table.rows)));break;case"avg":isFieldDate||(formattedColumn.total=formatter(sum(table.rows)/table.rows.length));break;case"min":formattedColumn.total=formatter(_lodash2.default.chain(table.rows).map(i).map("value").min().value());break;case"max":formattedColumn.total=formatter(_lodash2.default.chain(table.rows).map(i).map("value").max().value());break;case"count":formattedColumn.total=numberFormatter(table.rows.length)}}return formattedColumn})})}}})},function(module,exports,__webpack_require__){"use strict";__webpack_require__(4709)},function(module,exports,__webpack_require__){"use strict";var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _agg_config_result=__webpack_require__(421);var _agg_config_result2=_interopRequireDefault(_agg_config_result);var _modules=__webpack_require__(2);var _paginated_table=__webpack_require__(4710);var _paginated_table2=_interopRequireDefault(_paginated_table);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana").directive("paginatedTable",function($filter){var orderBy=$filter("orderBy");return{restrict:"E",template:_paginated_table2.default,transclude:true,scope:{rows:"=",columns:"=",linkToTop:"=",perPage:"=?",showBlankRows:"=?",sortHandler:"=?",sort:"=?",showSelector:"=?",showTotal:"=",totalFunc:"="},controllerAs:"paginatedTable",controller:function controller($scope){var self=this;self.sort={columnIndex:null,direction:null};self.sortColumn=function(colIndex){var sortDirection=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";var col=$scope.columns[colIndex];if(!col)return;if(false===col.sortable)return;if(self.sort.columnIndex===colIndex){var directions={null:"asc",asc:"desc",desc:null};sortDirection=directions[self.sort.direction]}self.sort.columnIndex=colIndex;self.sort.direction=sortDirection;$scope.sort&&_lodash2.default.assign($scope.sort,self.sort)};self.rowsToShow=function(numRowsPerPage,actualNumRowsOnThisPage){return false===$scope.showBlankRows?actualNumRowsOnThisPage:numRowsPerPage};function valueGetter(row){var value=row[self.sort.columnIndex];value&&null!=value.value&&(value=value.value);"boolean"===typeof value&&(value=value?0:1);value instanceof _agg_config_result2.default&&null===value.valueOf()&&(value=false);return value}$scope.sort&&null!==$scope.sort.columnIndex&&self.sortColumn($scope.sort.columnIndex,$scope.sort.direction);function resortRows(){var newSort=$scope.sort;newSort&&!_lodash2.default.isEqual(newSort,self.sort)&&self.sortColumn(newSort.columnIndex,newSort.direction);if(!$scope.rows||!$scope.columns){$scope.sortedRows=false;return}var sort=self.sort;null==sort.direction?$scope.sortedRows=$scope.rows.slice(0):$scope.sortedRows=orderBy($scope.rows,valueGetter,"desc"===sort.direction)}$scope.$watchMulti(["rows","columns","[]sort","[]paginatedTable.sort"],resortRows)}}})},function(module,exports){module.exports='<paginate\n  ng-if="sortedRows.length"\n  list="sortedRows"\n  per-page-prop="perPage"\n  class="agg-table">\n  <div class="agg-table-paginated">\n    <table class="table table-condensed">\n      <thead data-test-subj="paginated-table-header">\n        <tr>\n          <th\n            scope="col"\n            ng-repeat="col in columns"\n            ng-click="paginatedTable.sortColumn($index)"\n            kbn-accessible-click\n            tabindex="0"\n            class="{{ col.class }}">\n            <span ng-bind="::col.title"></span>\n\n            <icon-tip\n              ng-if="col.info"\n              content="\'{{ col.info }}\'"\n            ></icon-tip>\n\n            <i\n              ng-if="col.sortable !== false"\n              class="fa"\n              ng-class="{\n                \'fa-sort-asc\': paginatedTable.sort.columnIndex === $index && paginatedTable.sort.direction === \'asc\',\n                \'fa-sort-desc\': paginatedTable.sort.columnIndex === $index && paginatedTable.sort.direction === \'desc\',\n                \'fa-sort\': paginatedTable.sort.columnIndex !== $index || paginatedTable.sort.direction === null\n              }">\n            </i>\n          </th>\n        </tr>\n      </thead>\n      <tbody\n        data-test-subj="paginated-table-body"\n        kbn-rows="page"\n        kbn-rows-min="paginatedTable.rowsToShow(perPage, page.length)"\n      >\n      </tbody>\n      <tfoot ng-if="showTotal">\n        <tr>\n          <th scope="col" ng-repeat="col in columns" class="numeric-value">{{col.total}}</th>\n        </tr>\n      </tfoot>\n    </table>\n  </div>\n\n  \x3c!-- auto-inserted by the paginate directive... --\x3e\n  \x3c!-- <paginate-controls></paginate-controls> --\x3e\n  <div class="pagination-container" ng-transclude></div>\n</paginate>\n'},function(module,exports){},function(module,exports){module.exports='<paginated-table\n  ng-if="rows.length"\n  rows="rows"\n  columns="formattedColumns"\n  per-page="perPage"\n  sort="sort"\n  show-total="showTotal"\n  totalFunc="totalFunc">\n\n  <div class="agg-table-controls">\n    <small>Export:</small>&nbsp;&nbsp;\n    <a class="small" ng-click="aggTable.exportAsCsv(false)">\n      Raw <i aria-hidden="true" class="fa fa-download"></i>\n    </a>&nbsp;&nbsp;&nbsp;\n    <a class="small" ng-click="aggTable.exportAsCsv(true)">\n      Formatted <i aria-hidden="true" class="fa fa-download"></i>\n    </a>\n    <paginate-controls></paginate-controls>\n  </div>\n</paginated-table>\n'},function(module,exports,__webpack_require__){"use strict";__webpack_require__(16);__webpack_require__(1574);__webpack_require__(1573);var _modules=__webpack_require__(2);var _agg_table_group=__webpack_require__(4714);var _agg_table_group2=_interopRequireDefault(_agg_table_group);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana",["RecursionHelper"]).directive("kbnAggTableGroup",function(RecursionHelper){return{restrict:"E",template:_agg_table_group2.default,scope:{group:"=",perPage:"=?",sort:"=?",exportTitle:"=?",showTotal:"=",totalFunc:"="},compile:function compile($el){return RecursionHelper.compile($el,{post:function post($scope){$scope.$watch("group",function(group){$scope.rows=$scope.columns=false;if(!group||!group.tables.length)return;var firstTable=group.tables[0];var params=firstTable.aggConfig&&firstTable.aggConfig.params;var childLayout=params&&!params.row?"columns":"rows";$scope[childLayout]=group.tables})}})}}})},function(module,exports){module.exports='<table ng-if="rows" class="table agg-table-group" ng-repeat="table in rows">\n  <thead>\n    <tr>\n      <th ng-if="table.tables" scope="col">\n        <span class="agg-table-group-header">{{ table.title }}</span>\n      </th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td>\n        <kbn-agg-table-group\n          ng-if="table.tables"\n          group="table"\n          per-page="perPage"\n          sort="sort"\n          show-total="showTotal"\n          total-func="totalFunc"></kbn-agg-table-group>\n        <kbn-agg-table\n          ng-if="table.rows"\n          table="table"\n          export-title="exportTitle"\n          per-page="perPage"\n          sort="sort"\n          show-total="showTotal"\n          total-func="totalFunc">\n        </kbn-agg-table>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<table ng-if="columns" class="table agg-table-group">\n  <thead>\n    <tr>\n      <th ng-repeat="table in columns" ng-if="table.tables" scope="col">\n        <span class="agg-table-group-header">{{ table.title }}</span>\n      </th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td ng-repeat="table in columns">\n        <kbn-agg-table-group\n          ng-if="table.tables"\n          group="table"\n          per-page="perPage"\n          sort="sort"\n          show-total="showTotal"\n          total-func="totalFunc"></kbn-agg-table-group>\n        <kbn-agg-table\n          ng-if="table.rows"\n          table="table"\n          export-title="exportTitle"\n          per-page="perPage"\n          sort="sort"\n          show-total="showTotal"\n          total-func="totalFunc">\n        </kbn-agg-table>\n      </td>\n    </tr>\n  </tbody>\n</table>\n'},function(module,exports){module.exports='<div ng-controller="KbnTableVisController" class="table-vis">\n  <div ng-if="!hasSomeRows && hasSomeRows !== null" class="table-vis-error">\n    <h2 aria-hidden="true"><i aria-hidden="true" class="fa fa-meh-o"></i></h2>\n    <h4>No results found</h4>\n  </div>\n\n  <div ng-if="tableGroups" class="table-vis-container" data-test-subj="tableVis">\n    <kbn-agg-table-group\n      group="tableGroups"\n      export-title="visState.title"\n      per-page="visState.params.perPage"\n      sort="sort"\n      show-total="visState.params.showTotal"\n      total-func="visState.params.totalFunc">\n    </kbn-agg-table-group>\n  </div>\n</div>\n'},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"05997d91a7ba91b3eb8774591478f045.svg"},function(module,exports,__webpack_require__){"use strict";__webpack_require__(4718);__webpack_require__(4719);var _vis_factory=__webpack_require__(85);var _vis_category=__webpack_require__(71);var _schemas=__webpack_require__(96);var _tag_cloud_visualization=__webpack_require__(4726);var _vis_types=__webpack_require__(95);var _iconTagcloud=__webpack_require__(4732);var _iconTagcloud2=_interopRequireDefault(_iconTagcloud);var _update_status=__webpack_require__(432);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_vis_types.VisTypesRegistryProvider.register(function(Private){var VisFactory=Private(_vis_factory.VisFactoryProvider);return VisFactory.createBaseVisualization({name:"tagcloud",title:"Tag Cloud",image:_iconTagcloud2.default,description:"A group of words, sized according to their importance",category:_vis_category.CATEGORY.OTHER,visConfig:{defaults:{scale:"linear",orientation:"single",minFontSize:18,maxFontSize:72,showLabel:true}},requiresUpdateStatus:[_update_status.Status.PARAMS,_update_status.Status.RESIZE,_update_status.Status.DATA],visualization:_tag_cloud_visualization.TagCloudVisualization,responseHandler:"tabify",editorConfig:{collections:{scales:["linear","log","square root"],orientations:["single","right angled","multiple"]},optionsTemplate:"<tagcloud-vis-params></tagcloud-vis-params>",schemas:new _schemas.Schemas([{group:"metrics",name:"metric",title:"Tag Size",min:1,max:1,aggFilter:["!std_dev","!percentiles","!percentile_ranks","!derivative","!geo_bounds","!geo_centroid"],defaults:[{schema:"metric",type:"count"}]},{group:"buckets",name:"segment",icon:"fa fa-cloud",title:"Tags",min:1,max:1,aggFilter:["terms","significant_terms"]}])}})})},function(module,exports){},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(2);var _tag_cloud_vis_params=__webpack_require__(4720);var _tag_cloud_vis_params2=_interopRequireDefault(_tag_cloud_vis_params);var _noUiSlider=__webpack_require__(4721);var _noUiSlider2=_interopRequireDefault(_noUiSlider);__webpack_require__(4723);__webpack_require__(4724);__webpack_require__(4725);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana/table_vis").directive("tagcloudVisParams",function(){return{restrict:"E",template:_tag_cloud_vis_params2.default,link:function link($scope,$element){var sliderContainer=$element[0];var slider=sliderContainer.querySelector(".tag-cloud-fontsize-slider");$scope.config=$scope.vis.type.editorConfig;_noUiSlider2.default.create(slider,{start:[$scope.editorState.params.minFontSize,$scope.editorState.params.maxFontSize],connect:true,step:1,range:{min:1,max:100},format:{to:function to(value){return parseInt(value)},from:function from(value){return parseInt(value)}}});slider.noUiSlider.on("slide",function(){var fontSize=slider.noUiSlider.get();$scope.$apply(function(){$scope.editorState.params.minFontSize=fontSize[0];$scope.editorState.params.maxFontSize=fontSize[1]})});$scope.$watch("editorState.params.minFontSize",function(val){val=parseInt(val);slider.noUiSlider.get()[0]!==val&&slider.noUiSlider.set([val,null])});$scope.$watch("editorState.params.maxFontSize",function(val){val=parseInt(val);slider.noUiSlider.get()[1]!==val&&slider.noUiSlider.set([null,val])})}}})},function(module,exports){module.exports='<div class="kuiSideBarSection">\n  <div class="form-group">\n    <div class="form-group">\n      <label>Text Scale</label>\n      <select class="form-control" ng-model="editorState.params.scale" ng-options="mode for mode in config.collections.scales"></select>\n    </div>\n    <div class="form-group">\n      <label>Orientations</label>\n      <select class="form-control" ng-model="editorState.params.orientation" ng-options="mode for mode in config.collections.orientations"></select>\n    </div>\n    <div class="form-group">\n      <label>Font Size</label>\n      <div class="tag-cloud-fontsize-slider"></div>\n      <div class="kuiBar">\n        <div class="kuiBarSection">\n          <input\n            type="number"\n            min="1"\n            max="{{editorState.params.maxFontSize}}"\n            class="kuiTextInput tag-cloud-fontsize-slider__input"\n            ng-model="editorState.params.minFontSize"\n            aria-label="Minimum tag font size"\n            aria-describedby="tagCloudFontSliderMinUnit"\n          >\n          <span id="tagCloudFontSliderMinUnit" aria-label="pixels">px</span>\n        </div>\n        <div class="kuiBarSection">\n          <input\n            type="number"\n            min="{{editorState.params.minFontSize}}"\n            max="100"\n            class="kuiTextInput tag-cloud-fontsize-slider__input"\n            ng-model="editorState.params.maxFontSize"\n            aria-label="Maximum tag font size"\n            aria-describedby="tagCloudFontSliderMaxUnit"\n          >\n          <span id="tagCloudFontSliderMaxUnit" aria-label="pixels">px</span>\n        </div>\n      </div>\n    </div>\n    <div>\n      <label>\n        <input type="checkbox" value="{{hideLabel}}" ng-model="editorState.params.showLabel" name="showLabel"\n               ng-checked="editorState.params.showLabel">\n        Show Label\n      </label>\n    </div>\n  </div>\n</div>\n'},,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TagCloudVisualization=void 0;var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _tag_cloud=__webpack_require__(4727);var _tag_cloud2=_interopRequireDefault(_tag_cloud);var _rxjs=__webpack_require__(615);var Rx=_interopRequireWildcard(_rxjs);var _operators=__webpack_require__(623);var _reactDom=__webpack_require__(15);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _label=__webpack_require__(4730);var _feedback_message=__webpack_require__(4731);function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);newObj.default=obj;return newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var MAX_TAG_COUNT=200;exports.TagCloudVisualization=function(){function TagCloudVisualization(node,vis){var _this=this;_classCallCheck(this,TagCloudVisualization);this._containerNode=node;var cloudContainer=document.createElement("div");cloudContainer.classList.add("tagcloud-vis");cloudContainer.setAttribute("data-test-subj","tagCloudVisualization");this._containerNode.appendChild(cloudContainer);this._vis=vis;this._bucketAgg=null;this._truncated=false;this._tagCloud=new _tag_cloud2.default(cloudContainer);this._tagCloud.on("select",function(event){if(!_this._bucketAgg)return;_this._vis.API.events.addFilter(event.meta.data,0,event.meta.rowIndex)});this._renderComplete$=Rx.fromEvent(this._tagCloud,"renderComplete");this._feedbackNode=document.createElement("div");this._containerNode.appendChild(this._feedbackNode);this._feedbackMessage=_react2.default.createRef();(0,_reactDom.render)(_react2.default.createElement(_feedback_message.FeedbackMessage,{ref:this._feedbackMessage}),this._feedbackNode);this._labelNode=document.createElement("div");this._containerNode.appendChild(this._labelNode);this._label=_react2.default.createRef();(0,_reactDom.render)(_react2.default.createElement(_label.Label,{ref:this._label}),this._labelNode)}_createClass(TagCloudVisualization,[{key:"render",value:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(data,status){var hasAggDefined;return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:(status.params||status.aggs)&&this._updateParams();status.data&&this._updateData(data);status.resize&&this._resize();_context.next=5;return this._renderComplete$.pipe((0,_operators.take)(1)).toPromise();case 5:hasAggDefined=this._vis.aggs[0]&&this._vis.aggs[1];if(hasAggDefined){_context.next=9;break}this._feedbackMessage.current.setState({shouldShowTruncate:false,shouldShowIncomplete:false});return _context.abrupt("return");case 9:this._label.current.setState({label:this._vis.aggs[0].makeLabel()+" - "+this._vis.aggs[1].makeLabel(),shouldShowLabel:this._vis.params.showLabel});this._feedbackMessage.current.setState({shouldShowTruncate:this._truncated,shouldShowIncomplete:this._tagCloud.getStatus()===_tag_cloud2.default.STATUS.INCOMPLETE});case 11:case"end":return _context.stop()}},_callee,this)}));function render(_x,_x2){return _ref.apply(this,arguments)}return render}()},{key:"destroy",value:function destroy(){this._tagCloud.destroy();(0,_reactDom.unmountComponentAtNode)(this._feedbackNode);(0,_reactDom.unmountComponentAtNode)(this._labelNode)}},{key:"_updateData",value:function _updateData(response){var _this2=this;if(!response||!response.tables.length){this._tagCloud.setData([]);return}var data=response.tables[0];var segmentAggs=this._vis.aggs.bySchemaName.segment;segmentAggs&&segmentAggs.length>0?this._bucketAgg=segmentAggs[0]:this._bucketAgg=null;var tags=data.rows.map(function(row,rowIndex){var _row=_slicedToArray(row,2),tag=_row[0],count=_row[1];return{displayText:_this2._bucketAgg?_this2._bucketAgg.fieldFormatter()(tag):tag,rawText:tag,value:count,meta:{data:data,rowIndex:rowIndex}}});if(tags.length>MAX_TAG_COUNT){tags.length=MAX_TAG_COUNT;this._truncated=true}else this._truncated=false;this._tagCloud.setData(tags)}},{key:"_updateParams",value:function _updateParams(){this._tagCloud.setOptions(this._vis.params)}},{key:"_resize",value:function _resize(){this._tagCloud.resize()}}]);return TagCloudVisualization}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _d=__webpack_require__(19);var _d2=_interopRequireDefault(_d);var _d3Cloud=__webpack_require__(4728);var _d3Cloud2=_interopRequireDefault(_d3Cloud);var _seed_colors=__webpack_require__(1471);var _events=__webpack_require__(104);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var ORIENTATIONS={single:function single(){return 0},"right angled":function rightAngled(tag){return 90*hashWithinRange(tag.text,2)},multiple:function multiple(tag){return 15*hashWithinRange(tag.text,12)-90}};var D3_SCALING_FUNCTIONS={linear:function linear(){return _d2.default.scale.linear()},log:function log(){return _d2.default.scale.log()},"square root":function squareRoot(){return _d2.default.scale.sqrt()}};var TagCloud=function(_EventEmitter){_inherits(TagCloud,_EventEmitter);function TagCloud(domNode){_classCallCheck(this,TagCloud);var _this=_possibleConstructorReturn(this,(TagCloud.__proto__||Object.getPrototypeOf(TagCloud)).call(this));_this._element=domNode;_this._d3SvgContainer=_d2.default.select(_this._element).append("svg");_this._svgGroup=_this._d3SvgContainer.append("g");_this._size=[1,1];_this.resize();_this._fontFamily="Open Sans, sans-serif";_this._fontStyle="normal";_this._fontWeight="normal";_this._spiral="archimedean";_this._timeInterval=1e3;_this._padding=5;_this._orientation="single";_this._minFontSize=10;_this._maxFontSize=36;_this._textScale="linear";_this._optionsAsString=null;_this._words=null;_this._setTimeoutId=null;_this._pendingJob=null;_this._layoutIsUpdating=null;_this._allInViewBox=false;_this._DOMisUpdating=false;return _this}_createClass(TagCloud,[{key:"setOptions",value:function setOptions(options){if(JSON.stringify(options)===this._optionsAsString)return;this._optionsAsString=JSON.stringify(options);this._orientation=options.orientation;this._minFontSize=Math.min(options.minFontSize,options.maxFontSize);this._maxFontSize=Math.max(options.minFontSize,options.maxFontSize);this._textScale=options.scale;this._invalidate(false)}},{key:"resize",value:function resize(){var newWidth=this._element.offsetWidth;var newHeight=this._element.offsetHeight;if(newWidth===this._size[0]&&newHeight===this._size[1])return;var wasInside=this._size[0]>=this._cloudWidth&&this._size[1]>=this._cloudHeight;var willBeInside=this._cloudWidth<=newWidth&&this._cloudHeight<=newHeight;this._size[0]=newWidth;this._size[1]=newHeight;wasInside&&willBeInside&&this._allInViewBox?this._invalidate(true):this._invalidate(false)}},{key:"setData",value:function setData(data){this._words=data;this._invalidate(false)}},{key:"destroy",value:function destroy(){clearTimeout(this._setTimeoutId);this._element.innerHTML=""}},{key:"getStatus",value:function getStatus(){return this._allInViewBox?TagCloud.STATUS.COMPLETE:TagCloud.STATUS.INCOMPLETE}},{key:"_updateContainerSize",value:function _updateContainerSize(){this._d3SvgContainer.attr("width",this._size[0]);this._d3SvgContainer.attr("height",this._size[1]);this._svgGroup.attr("width",this._size[0]);this._svgGroup.attr("height",this._size[1])}},{key:"_isJobRunning",value:function _isJobRunning(){return this._setTimeoutId||this._layoutIsUpdating||this._DOMisUpdating}},{key:"_processPendingJob",value:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var job,cloudBBox;return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(this._pendingJob){_context.next=2;break}return _context.abrupt("return");case 2:if(!this._isJobRunning()){_context.next=4;break}return _context.abrupt("return");case 4:this._completedJob=null;_context.next=7;return this._pickPendingJob();case 7:job=_context.sent;if(!job.words.length){_context.next=20;break}if(!job.refreshLayout){_context.next=12;break}_context.next=12;return this._updateLayout(job);case 12:_context.next=14;return this._updateDOM(job);case 14:cloudBBox=this._svgGroup[0][0].getBBox();this._cloudWidth=cloudBBox.width;this._cloudHeight=cloudBBox.height;this._allInViewBox=cloudBBox.x>=0&&cloudBBox.y>=0&&cloudBBox.x+cloudBBox.width<=this._element.offsetWidth&&cloudBBox.y+cloudBBox.height<=this._element.offsetHeight;_context.next=21;break;case 20:this._emptyDOM(job);case 21:if(this._pendingJob)this._processPendingJob();else{this._completedJob=job;this.emit("renderComplete")}case 22:case"end":return _context.stop()}},_callee,this)}));function _processPendingJob(){return _ref.apply(this,arguments)}return _processPendingJob}()},{key:"_pickPendingJob",value:function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var _this2=this;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return new Promise(function(resolve){_this2._setTimeoutId=setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var job;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:job=_this2._pendingJob;_this2._pendingJob=null;_this2._setTimeoutId=null;resolve(job);case 4:case"end":return _context2.stop()}},_callee2,_this2)})),0)});case 2:return _context3.abrupt("return",_context3.sent);case 3:case"end":return _context3.stop()}},_callee3,this)}));function _pickPendingJob(){return _ref2.apply(this,arguments)}return _pickPendingJob}()},{key:"_emptyDOM",value:function _emptyDOM(){this._svgGroup.selectAll("text").remove();this._cloudWidth=0;this._cloudHeight=0;this._allInViewBox=true;this._DOMisUpdating=false}},{key:"_updateDOM",value:function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(job){var _this3=this;var canSkipDomUpdate,affineTransform,svgTextNodes,stage;return regeneratorRuntime.wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:canSkipDomUpdate=this._pendingJob||this._setTimeoutId;if(!canSkipDomUpdate){_context4.next=4;break}this._DOMisUpdating=false;return _context4.abrupt("return");case 4:this._DOMisUpdating=true;affineTransform=positionWord.bind(null,this._element.offsetWidth/2,this._element.offsetHeight/2);svgTextNodes=this._svgGroup.selectAll("text");stage=svgTextNodes.data(job.words,getText);_context4.next=10;return new Promise(function(resolve){var enterSelection=stage.enter();var enteringTags=enterSelection.append("text");enteringTags.style("font-size",getSizeInPixels);enteringTags.style("font-style",_this3._fontStyle);enteringTags.style("font-weight",function(){return _this3._fontWeight});enteringTags.style("font-family",function(){return _this3._fontFamily});enteringTags.style("fill",getFill);enteringTags.attr("text-anchor",function(){return"middle"});enteringTags.attr("transform",affineTransform);enteringTags.attr("data-test-subj",getDisplayText);enteringTags.text(getDisplayText);var self=_this3;enteringTags.on({click:function click(event){self.emit("select",event)},mouseover:function mouseover(){_d2.default.select(this).style("cursor","pointer")},mouseout:function mouseout(){_d2.default.select(this).style("cursor","default")}});var movingTags=stage.transition();movingTags.duration(600);movingTags.style("font-size",getSizeInPixels);movingTags.style("font-style",_this3._fontStyle);movingTags.style("font-weight",function(){return _this3._fontWeight});movingTags.style("font-family",function(){return _this3._fontFamily});movingTags.attr("transform",affineTransform);var exitingTags=stage.exit();var exitTransition=exitingTags.transition();exitTransition.duration(200);exitingTags.style("fill-opacity",1e-6);exitingTags.attr("font-size",1);exitingTags.remove();var exits=0;var moves=0;var resolveWhenDone=function resolveWhenDone(){if(0===exits&&0===moves){_this3._DOMisUpdating=false;resolve(true)}};exitTransition.each(function(){return exits++});exitTransition.each("end",function(){exits--;resolveWhenDone()});movingTags.each(function(){return moves++});movingTags.each("end",function(){moves--;resolveWhenDone()})});case 10:case"end":return _context4.stop()}},_callee4,this)}));function _updateDOM(_x){return _ref4.apply(this,arguments)}return _updateDOM}()},{key:"_makeTextSizeMapper",value:function _makeTextSizeMapper(){var mapSizeToFontSize=D3_SCALING_FUNCTIONS[this._textScale]();var range=1===this._words.length?[this._maxFontSize,this._maxFontSize]:[this._minFontSize,this._maxFontSize];mapSizeToFontSize.range(range);this._words&&mapSizeToFontSize.domain(_d2.default.extent(this._words,getValue));return mapSizeToFontSize}},{key:"_makeNewJob",value:function _makeNewJob(){return{refreshLayout:true,size:this._size.slice(),words:this._words}}},{key:"_makeJobPreservingLayout",value:function _makeJobPreservingLayout(){return{refreshLayout:false,size:this._size.slice(),words:this._completedJob.words.map(function(tag){return{x:tag.x,y:tag.y,rotate:tag.rotate,size:tag.size,rawText:tag.rawText||tag.text,displayText:tag.displayText,meta:tag.meta}})}}},{key:"_invalidate",value:function _invalidate(keepLayout){if(!this._words)return;this._updateContainerSize();var canReuseLayout=keepLayout&&!this._isJobRunning()&&this._completedJob;this._pendingJob=canReuseLayout?this._makeJobPreservingLayout():this._makeNewJob();this._processPendingJob()}},{key:"_updateLayout",value:function(){var _ref5=_asyncToGenerator(regeneratorRuntime.mark(function _callee5(job){var _this4=this;var mapSizeToFontSize,tagCloudLayoutGenerator;return regeneratorRuntime.wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:if(!(job.size[0]<=0||job.size[1]<=0)){_context5.next=2;break}return _context5.abrupt("return");case 2:mapSizeToFontSize=this._makeTextSizeMapper();tagCloudLayoutGenerator=(0,_d3Cloud2.default)();tagCloudLayoutGenerator.size(job.size);tagCloudLayoutGenerator.padding(this._padding);tagCloudLayoutGenerator.rotate(ORIENTATIONS[this._orientation]);tagCloudLayoutGenerator.font(this._fontFamily);tagCloudLayoutGenerator.fontStyle(this._fontStyle);tagCloudLayoutGenerator.fontWeight(this._fontWeight);tagCloudLayoutGenerator.fontSize(function(tag){return mapSizeToFontSize(tag.value)});tagCloudLayoutGenerator.random(seed);tagCloudLayoutGenerator.spiral(this._spiral);tagCloudLayoutGenerator.words(job.words);tagCloudLayoutGenerator.text(getDisplayText);tagCloudLayoutGenerator.timeInterval(this._timeInterval);this._layoutIsUpdating=true;_context5.next=19;return new Promise(function(resolve){tagCloudLayoutGenerator.on("end",function(){_this4._layoutIsUpdating=false;resolve(true)});tagCloudLayoutGenerator.start()});case 19:case"end":return _context5.stop()}},_callee5,this)}));function _updateLayout(_x2){return _ref5.apply(this,arguments)}return _updateLayout}()},{key:"getDebugInfo",value:function getDebugInfo(){var debug={};debug.positions=this._completedJob?this._completedJob.words.map(function(tag){return{displayText:tag.displayText,rawText:tag.rawText||tag.text,x:tag.x,y:tag.y,rotate:tag.rotate}}):[];debug.size={width:this._size[0],height:this._size[1]};return debug}}]);return TagCloud}(_events.EventEmitter);TagCloud.STATUS={COMPLETE:0,INCOMPLETE:1};function seed(){return.5}function getText(word){return word.rawText}function getDisplayText(word){return word.displayText}function positionWord(xTranslate,yTranslate,word){if(isNaN(word.x)||isNaN(word.y)||isNaN(word.rotate))return"translate("+3*xTranslate+", "+3*yTranslate+")rotate(0)";return"translate("+(word.x+xTranslate)+", "+(word.y+yTranslate)+")rotate("+word.rotate+")"}function getValue(tag){return tag.value}function getSizeInPixels(tag){return tag.size+"px"}var colorScale=_d2.default.scale.ordinal().range(_seed_colors.seedColors);function getFill(tag){return colorScale(tag.text)}function hashWithinRange(str,max){str=JSON.stringify(str);var hash=0;var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=void 0;try{for(var _step,_iterator=str[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var ch=_step.value;hash=(31*hash+ch.charCodeAt(0))%max}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return Math.abs(hash)%max}exports.default=TagCloud;module.exports=exports["default"]},,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Label=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.Label=function(_Component){_inherits(Label,_Component);function Label(){_classCallCheck(this,Label);var _this=_possibleConstructorReturn(this,(Label.__proto__||Object.getPrototypeOf(Label)).call(this));_this.state={label:"",shouldShowLabel:true};return _this}_createClass(Label,[{key:"render",value:function render(){return _react2.default.createElement("div",{className:"tagcloud-custom-label",style:{display:this.state.shouldShowLabel?"block":"none"}},this.state.label)}}]);return Label}(_react.Component)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FeedbackMessage=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.FeedbackMessage=function(_Component){_inherits(FeedbackMessage,_Component);function FeedbackMessage(){_classCallCheck(this,FeedbackMessage);var _this=_possibleConstructorReturn(this,(FeedbackMessage.__proto__||Object.getPrototypeOf(FeedbackMessage)).call(this));_this.state={shouldShowTruncate:false,shouldShowIncomplete:false};return _this}_createClass(FeedbackMessage,[{key:"render",value:function render(){return _react2.default.createElement("div",{className:"tagcloud-notifications"},_react2.default.createElement("div",{className:"tagcloud-truncated-message",style:{display:this.state.shouldShowTruncate?"block":"none"}},"The number of tags has been truncated to avoid long draw times."),_react2.default.createElement("div",{className:"tagcloud-incomplete-message",style:{display:this.state.shouldShowIncomplete?"block":"none"}},"The container is too small to display the entire cloud. Tags might be cropped or omitted."))}}]);return FeedbackMessage}(_react.Component)},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"5a2ae67159a441fd4b6cf30c0c6cc5b1.svg"},function(module,exports,__webpack_require__){"use strict";__webpack_require__(884);__webpack_require__(4734);var _supports=__webpack_require__(4736);var _vis_category=__webpack_require__(71);var _vis_factory=__webpack_require__(85);var _coordinate_maps_visualization=__webpack_require__(4737);var _schemas=__webpack_require__(96);var _iconTilemap=__webpack_require__(4745);var _iconTilemap2=_interopRequireDefault(_iconTilemap);var _vis_types=__webpack_require__(95);var _update_status=__webpack_require__(432);var _coordinatemap_response_handler=__webpack_require__(4746);var _truncated_colormaps=__webpack_require__(522);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_vis_types.VisTypesRegistryProvider.register(function TileMapVisType(Private,getAppState,courier,config){var VisFactory=Private(_vis_factory.VisFactoryProvider);var CoordinateMapsVisualization=Private(_coordinate_maps_visualization.CoordinateMapsVisualizationProvider);return VisFactory.createBaseVisualization({name:"tile_map",title:"Coordinate Map",image:_iconTilemap2.default,description:"Plot latitude and longitude coordinates on a map",category:_vis_category.CATEGORY.MAP,visConfig:{canDesaturate:!!_supports.supports.cssFilters,defaults:{colorSchema:"Yellow to Red",mapType:"Scaled Circle Markers",isDesaturated:true,addTooltip:true,heatClusterSize:1.5,legendPosition:"bottomright",mapZoom:2,mapCenter:[0,0],wms:config.get("visualization:tileMap:WMSdefaults")}},requiresUpdateStatus:[_update_status.Status.AGGS,_update_status.Status.PARAMS,_update_status.Status.RESIZE,_update_status.Status.UI_STATE],responseHandler:(0,_coordinatemap_response_handler.makeGeoJsonResponseHandler)(),visualization:CoordinateMapsVisualization,editorConfig:{collections:{colorSchemas:Object.keys(_truncated_colormaps.truncatedColorMaps),legendPositions:[{value:"bottomleft",text:"bottom left"},{value:"bottomright",text:"bottom right"},{value:"topleft",text:"top left"},{value:"topright",text:"top right"}],mapTypes:["Scaled Circle Markers","Shaded Circle Markers","Shaded Geohash Grid","Heatmap"],baseLayers:[]},optionsTemplate:"<tile-map-vis-params></tile-map-vis-params>",schemas:new _schemas.Schemas([{group:"metrics",name:"metric",title:"Value",min:1,max:1,aggFilter:["count","avg","sum","min","max","cardinality","top_hits"],defaults:[{schema:"metric",type:"count"}]},{group:"buckets",name:"segment",title:"Geo Coordinates",aggFilter:"geohash_grid",min:1,max:1}])}})})},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(2);var _tile_map_vis_params=__webpack_require__(4735);var _tile_map_vis_params2=_interopRequireDefault(_tile_map_vis_params);__webpack_require__(1568);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");_module.directive("tileMapVisParams",function(){return{restrict:"E",template:_tile_map_vis_params2.default}})},function(module,exports){module.exports='\x3c!-- vis type specific options --\x3e\n<div class="kuiSideBarSection">\n  <div class="form-group">\n    <label for="coordinateMapOptionsMapType">Map type</label>\n      <select\n        id="coordinateMapOptionsMapType"\n        name="agg"\n      class="form-control"\n      ng-model="editorState.params.mapType"\n      ng-init="editorState.params.mapType || vis.type.editorConfig.collections.mapTypes[0]"\n      ng-options="mapType as mapType for mapType in vis.type.editorConfig.collections.mapTypes"\n      >\n    </select>\n  </div>\n\n\n  <div class="kuiSideBarFormRow" >\n    <label class="kuiSideBarFormRow__label" for="colorSchema">\n      Color Schema\n    </label>\n    <div class="kuiSideBarFormRow__control">\n      <select\n        id="colorSchema"\n        class="kuiSelect kuiSideBarSelect"\n        ng-model="editorState.params.colorSchema"\n        ng-options="mode for mode in vis.type.editorConfig.collections.colorSchemas"\n      ></select>\n    </div>\n  </div>\n\n  <div ng-if="editorState.params.mapType === \'Heatmap\'" class="form-group">\n    <div>\n      <label>\n        Cluster size\n      </label>\n      <div class="vis-editor-agg-form-row">\n        <input\n          name="heatClusterSize"\n          ng-model="editorState.params.heatClusterSize"\n          required\n          class="form-control"\n          type="range"\n          min="1.0"\n          max="3.0"\n          step="0.1"\n          >\n        <div class="vis-editor-agg-form-value">\n          {{editorState.params.heatClusterSize}}\n        </div>\n      </div>\n    </div>\n\n  </div>\n\n  <vislib-basic-options></vislib-basic-options>\n\n  <div class="kuiSideBarFormRow">\n    <label class="kuiSideBarFormRow__label" for="desaturateMapTiles">\n      Desaturate tiles\n    </label>\n\n    <div class="kuiSideBarFormRow__control">\n      <input\n        type="checkbox"\n        id="desaturateMapTiles"\n        name="isDesaturated"\n        ng-disabled="!vis.type.visConfig.canDesaturate"\n        ng-model="editorState.params.isDesaturated"\n      >\n      &nbsp;\n      <icon-tip\n        content="\'Reduce the vibrancy of tile colors. This does not work in any version of Internet Explorer.\'"\n        position="\'right\'"\n      ></icon-tip>\n    </div>\n  </div>\n</div>\n\n<wms-options options="editorState.params.wms"></wms-options>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.supports=void 0;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.supports={cssFilters:function(){var e=document.createElement("img");var rules=["webkitFilter","mozFilter","msFilter","filter"];var test="grayscale(1)";rules.forEach(function(rule){e.style[rule]=test});document.body.appendChild(e);var styles=window.getComputedStyle(e);var can=(0,_lodash2.default)(styles).pick(rules).includes(test);document.body.removeChild(e);return can}()}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;if(void 0===getter)return;return getter.call(receiver)};exports.CoordinateMapsVisualizationProvider=CoordinateMapsVisualizationProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _geohash_layer=__webpack_require__(4738);var _base_maps_visualization=__webpack_require__(1569);var _agg_config=__webpack_require__(296);__webpack_require__(4742);var _tooltip_formatter=__webpack_require__(4743);var _notify=__webpack_require__(9);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function CoordinateMapsVisualizationProvider(Notifier,Private){var BaseMapsVisualization=Private(_base_maps_visualization.BaseMapsVisualizationProvider);var tooltipFormatter=Private(_tooltip_formatter.TileMapTooltipFormatterProvider);var CoordinateMapsVisualization=function(_BaseMapsVisualizatio){_inherits(CoordinateMapsVisualization,_BaseMapsVisualizatio);function CoordinateMapsVisualization(element,vis){_classCallCheck(this,CoordinateMapsVisualization);var _this=_possibleConstructorReturn(this,(CoordinateMapsVisualization.__proto__||Object.getPrototypeOf(CoordinateMapsVisualization)).call(this,element,vis));_this._geohashLayer=null;_this._notify=new Notifier({location:"Coordinate Map"});return _this}_createClass(CoordinateMapsVisualization,[{key:"_makeKibanaMap",value:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var _this2=this;var updateGeohashAgg,uiState,previousPrecision,precisionChange;return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return _get(CoordinateMapsVisualization.prototype.__proto__||Object.getPrototypeOf(CoordinateMapsVisualization.prototype),"_makeKibanaMap",this).call(this);case 2:updateGeohashAgg=function updateGeohashAgg(){var geohashAgg=_this2._getGeoHashAgg();if(!geohashAgg)return;geohashAgg.params.mapBounds=_this2._kibanaMap.getBounds();geohashAgg.params.mapZoom=_this2._kibanaMap.getZoomLevel();geohashAgg.params.mapCenter=_this2._kibanaMap.getCenter()};updateGeohashAgg();uiState=this.vis.getUiState();uiState.on("change",function(prop){"mapZoom"!==prop&&"mapCenter"!==prop||updateGeohashAgg()});previousPrecision=this._kibanaMap.getGeohashPrecision();precisionChange=false;this._kibanaMap.on("zoomchange",function(){var geohashAgg=_this2._getGeoHashAgg();precisionChange=previousPrecision!==_this2._kibanaMap.getGeohashPrecision();previousPrecision=_this2._kibanaMap.getGeohashPrecision();if(!geohashAgg)return;var isAutoPrecision="boolean"!==typeof geohashAgg.params.autoPrecision||geohashAgg.params.autoPrecision;isAutoPrecision&&(geohashAgg.params.precision=previousPrecision)});this._kibanaMap.on("zoomend",function(){var geohashAgg=_this2._getGeoHashAgg();if(!geohashAgg)return;var isAutoPrecision="boolean"!==typeof geohashAgg.params.autoPrecision||geohashAgg.params.autoPrecision;if(!isAutoPrecision)return;precisionChange?_this2.vis.updateState():_this2._updateData(_this2._geoJsonFeatureCollectionAndMeta)});this._kibanaMap.addDrawControl();this._kibanaMap.on("drawCreated:rectangle",function(event){var geohashAgg=_this2._getGeoHashAgg();_this2.addSpatialFilter(geohashAgg,"geo_bounding_box",event.bounds)});this._kibanaMap.on("drawCreated:polygon",function(event){var geohashAgg=_this2._getGeoHashAgg();_this2.addSpatialFilter(geohashAgg,"geo_polygon",{points:event.points})});case 13:case"end":return _context.stop()}},_callee,this)}));function _makeKibanaMap(){return _ref.apply(this,arguments)}return _makeKibanaMap}()},{key:"_updateData",value:function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(geojsonFeatureCollectionAndMeta){return regeneratorRuntime.wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(!("Heatmap"!==this._getMapsParams().mapType&&geojsonFeatureCollectionAndMeta===this._geoJsonFeatureCollectionAndMeta)){_context2.next=2;break}return _context2.abrupt("return");case 2:if(this._geohashLayer){this._kibanaMap.removeLayer(this._geohashLayer);this._geohashLayer=null}if(geojsonFeatureCollectionAndMeta){_context2.next=8;break}this._geoJsonFeatureCollectionAndMeta=null;this._kibanaMap.removeLayer(this._geohashLayer);this._geohashLayer=null;return _context2.abrupt("return");case 8:this._geoJsonFeatureCollectionAndMeta=geojsonFeatureCollectionAndMeta;this._recreateGeohashLayer();case 10:case"end":return _context2.stop()}},_callee2,this)}));function _updateData(_x){return _ref2.apply(this,arguments)}return _updateData}()},{key:"_recreateGeohashLayer",value:function _recreateGeohashLayer(){if(this._geohashLayer){this._kibanaMap.removeLayer(this._geohashLayer);this._geohashLayer=null}var geohashOptions=this._getGeohashOptions();this._geohashLayer=new _geohash_layer.GeohashLayer(this._geoJsonFeatureCollectionAndMeta.featureCollection,this._geoJsonFeatureCollectionAndMeta.meta,geohashOptions,this._kibanaMap.getZoomLevel(),this._kibanaMap);this._kibanaMap.addLayer(this._geohashLayer)}},{key:"_updateParams",value:function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var geohashOptions;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _get(CoordinateMapsVisualization.prototype.__proto__||Object.getPrototypeOf(CoordinateMapsVisualization.prototype),"_updateParams",this).call(this);case 2:this._kibanaMap.setDesaturateBaseLayer(this.vis.params.isDesaturated);geohashOptions=this._getGeohashOptions();if(!this._geohashLayer||!this._geohashLayer.isReusable(geohashOptions)){this._geoJsonFeatureCollectionAndMeta&&this._recreateGeohashLayer();this._updateData(this._geoJsonFeatureCollectionAndMeta)}case 5:case"end":return _context3.stop()}},_callee3,this)}));function _updateParams(){return _ref3.apply(this,arguments)}return _updateParams}()},{key:"_getGeohashOptions",value:function _getGeohashOptions(){var newParams=this._getMapsParams();var metricAgg=this._getMetricAgg();var boundTooltipFormatter=tooltipFormatter.bind(null,this.vis.getAggConfig(),metricAgg);return{label:metricAgg?metricAgg.makeLabel():"",valueFormatter:this._geoJsonFeatureCollectionAndMeta?metricAgg&&metricAgg.fieldFormatter():null,tooltipFormatter:this._geoJsonFeatureCollectionAndMeta?boundTooltipFormatter:null,mapType:newParams.mapType,isFilteredByCollar:this._isFilteredByCollar(),fetchBounds:this.getGeohashBounds.bind(this),colorRamp:newParams.colorSchema,heatmap:{heatClusterSize:newParams.heatClusterSize}}}},{key:"addSpatialFilter",value:function addSpatialFilter(agg,filterName,filterData){if(!agg)return;var indexPatternName=agg._indexPattern.id;var field=agg.fieldName();var filter={meta:{negate:false,index:indexPatternName}};filter[filterName]={ignore_unmapped:true};filter[filterName][field]=filterData;this.vis.API.queryFilter.addFilters([filter]);this.vis.updateState()}},{key:"getGeohashBounds",value:function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(){var agg,searchSource,esResp;return regeneratorRuntime.wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:agg=this._getGeoHashAgg();if(!agg){_context4.next=17;break}searchSource=this.vis.searchSource.createChild();searchSource.setField("size",0);searchSource.setField("aggs",function(){var geoBoundsAgg=new _agg_config.AggConfig(agg.vis,{type:"geo_bounds",enabled:true,params:{field:agg.getField()},schema:"metric"});return{1:geoBoundsAgg.toDsl()}});esResp=void 0;_context4.prev=6;_context4.next=9;return searchSource.fetch();case 9:esResp=_context4.sent;_context4.next=16;break;case 12:_context4.prev=12;_context4.t0=_context4["catch"](6);_notify.toastNotifications.addDanger({title:"Unable to get bounds",text:""+_context4.t0.message});return _context4.abrupt("return");case 16:return _context4.abrupt("return",_lodash2.default.get(esResp,"aggregations.1.bounds"));case 17:case"end":return _context4.stop()}},_callee4,this,[[6,12]])}));function getGeohashBounds(){return _ref4.apply(this,arguments)}return getGeohashBounds}()},{key:"_getGeoHashAgg",value:function _getGeoHashAgg(){return this.vis.getAggConfig().find(function(agg){return"geohash_grid"===_lodash2.default.get(agg,"type.dslName")})}},{key:"_getMetricAgg",value:function _getMetricAgg(){return this.vis.getAggConfig().find(function(agg){return"metrics"===agg.type.type})}},{key:"_isFilteredByCollar",value:function _isFilteredByCollar(){var DEFAULT=false;var agg=this._getGeoHashAgg();return agg?_lodash2.default.get(agg,"params.isFilteredByCollar",DEFAULT):DEFAULT}}]);return CoordinateMapsVisualization}(BaseMapsVisualization);return CoordinateMapsVisualization}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GeohashLayer=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _leaflet=__webpack_require__(261);var _leaflet2=_interopRequireDefault(_leaflet);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _kibana_map_layer=__webpack_require__(922);var _heatmap=__webpack_require__(4739);var _scaled_circles=__webpack_require__(924);var _shaded_circles=__webpack_require__(4740);var _geohash_grid=__webpack_require__(4741);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.GeohashLayer=function(_KibanaMapLayer){_inherits(GeohashLayer,_KibanaMapLayer);function GeohashLayer(featureCollection,featureCollectionMetaData,options,zoom,kibanaMap){_classCallCheck(this,GeohashLayer);var _this=_possibleConstructorReturn(this,(GeohashLayer.__proto__||Object.getPrototypeOf(GeohashLayer)).call(this));_this._featureCollection=featureCollection;_this._featureCollectionMetaData=featureCollectionMetaData;_this._geohashOptions=options;_this._zoom=zoom;_this._kibanaMap=kibanaMap;var geojson=_leaflet2.default.geoJson(_this._featureCollection);_this._bounds=geojson.getBounds();_this._createGeohashMarkers();_this._lastBounds=null;return _this}_createClass(GeohashLayer,[{key:"_createGeohashMarkers",value:function _createGeohashMarkers(){var _this2=this;var markerOptions={isFilteredByCollar:this._geohashOptions.isFilteredByCollar,valueFormatter:this._geohashOptions.valueFormatter,tooltipFormatter:this._geohashOptions.tooltipFormatter,label:this._geohashOptions.label,colorRamp:this._geohashOptions.colorRamp};switch(this._geohashOptions.mapType){case"Scaled Circle Markers":this._geohashMarkers=new _scaled_circles.ScaledCirclesMarkers(this._featureCollection,this._featureCollectionMetaData,markerOptions,this._zoom,this._kibanaMap);break;case"Shaded Circle Markers":this._geohashMarkers=new _shaded_circles.ShadedCirclesMarkers(this._featureCollection,this._featureCollectionMetaData,markerOptions,this._zoom,this._kibanaMap);break;case"Shaded Geohash Grid":this._geohashMarkers=new _geohash_grid.GeohashGridMarkers(this._featureCollection,this._featureCollectionMetaData,markerOptions,this._zoom,this._kibanaMap);break;case"Heatmap":var radius=15;if(this._featureCollectionMetaData.geohashGridDimensionsAtEquator){var minGridLength=_lodash2.default.min(this._featureCollectionMetaData.geohashGridDimensionsAtEquator);var metersPerPixel=this._kibanaMap.getMetersPerPixel();radius=minGridLength/metersPerPixel/2}radius*=parseFloat(this._geohashOptions.heatmap.heatClusterSize);this._geohashMarkers=new _heatmap.HeatmapMarkers(this._featureCollection,{radius:radius,blur:radius,maxZoom:this._kibanaMap.getZoomLevel(),minOpacity:.1,tooltipFormatter:this._geohashOptions.tooltipFormatter},this._zoom,this._featureCollectionMetaData.max);break;default:throw new Error(this._geohashOptions.mapType+" mapType not recognized")}this._geohashMarkers.on("showTooltip",function(event){return _this2.emit("showTooltip",event)});this._geohashMarkers.on("hideTooltip",function(event){return _this2.emit("hideTooltip",event)});this._leafletLayer=this._geohashMarkers.getLeafletLayer()}},{key:"appendLegendContents",value:function appendLegendContents(jqueryDiv){return this._geohashMarkers.appendLegendContents(jqueryDiv)}},{key:"movePointer",value:function movePointer(){var _geohashMarkers;(_geohashMarkers=this._geohashMarkers).movePointer.apply(_geohashMarkers,arguments)}},{key:"getBounds",value:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var geoHashBounds,northEast,southWest;return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!this._geohashOptions.fetchBounds){_context.next=8;break}_context.next=3;return this._geohashOptions.fetchBounds();case 3:geoHashBounds=_context.sent;if(!geoHashBounds){_context.next=8;break}northEast=_leaflet2.default.latLng(geoHashBounds.top_left.lat,geoHashBounds.bottom_right.lon);southWest=_leaflet2.default.latLng(geoHashBounds.bottom_right.lat,geoHashBounds.top_left.lon);return _context.abrupt("return",_leaflet2.default.latLngBounds(southWest,northEast));case 8:return _context.abrupt("return",this._bounds);case 9:case"end":return _context.stop()}},_callee,this)}));function getBounds(){return _ref.apply(this,arguments)}return getBounds}()},{key:"updateExtent",value:function updateExtent(){if(!this._geohashOptions.isFilteredByCollar){var bounds=this._kibanaMap.getLeafletBounds();if(!this._lastBounds||!this._lastBounds.equals(bounds)){this._kibanaMap.removeLayer(this);this._createGeohashMarkers();this._kibanaMap.addLayer(this)}this._lastBounds=bounds}}},{key:"isReusable",value:function isReusable(options){if(_lodash2.default.isEqual(this._geohashOptions,options))return true;return this._geohashOptions.colorRamp===options.colorRamp&&(this._geohashOptions.mapType===options.mapType&&!("Heatmap"===this._geohashOptions.mapType&&!_lodash2.default.isEqual(this._geohashOptions.heatmap,options)))}}]);return GeohashLayer}(_kibana_map_layer.KibanaMapLayer)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.HeatmapMarkers=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _leaflet=__webpack_require__(261);var _leaflet2=_interopRequireDefault(_leaflet);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _d=__webpack_require__(19);var _d2=_interopRequireDefault(_d);var _events=__webpack_require__(104);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.HeatmapMarkers=function(_EventEmitter){_inherits(HeatmapMarkers,_EventEmitter);function HeatmapMarkers(featureCollection,options,zoom,max){_classCallCheck(this,HeatmapMarkers);var _this=_possibleConstructorReturn(this,(HeatmapMarkers.__proto__||Object.getPrototypeOf(HeatmapMarkers)).call(this));_this._geojsonFeatureCollection=featureCollection;var points=dataToHeatArray(featureCollection,max);_this._leafletLayer=_leaflet2.default.heatLayer(points,options);_this._tooltipFormatter=options.tooltipFormatter;_this._zoom=zoom;_this._disableTooltips=false;_this._getLatLng=_lodash2.default.memoize(function(feature){return _leaflet2.default.latLng(feature.geometry.coordinates[1],feature.geometry.coordinates[0])},function(feature){return[feature.geometry.coordinates[1],feature.geometry.coordinates[0]].join(",")});_this._addTooltips();return _this}_createClass(HeatmapMarkers,[{key:"getBounds",value:function getBounds(){return this._leafletLayer.getBounds()}},{key:"getLeafletLayer",value:function getLeafletLayer(){return this._leafletLayer}},{key:"appendLegendContents",value:function appendLegendContents(){}},{key:"movePointer",value:function movePointer(type,event){if("mousemove"===type)this._debounceMoveMoveLocation(event);else if("mouseout"===type)this.emit("hideTooltip");else if("mousedown"===type){this._disableTooltips=true;this.emit("hideTooltip")}else"mouseup"===type&&(this._disableTooltips=false)}},{key:"_addTooltips",value:function _addTooltips(){var _this2=this;var mouseMoveLocation=function mouseMoveLocation(e){if(!_this2._geojsonFeatureCollection.features.length||_this2._disableTooltips){_this2.emit("hideTooltip");return}var feature=_this2._nearestFeature(e.latlng);if(_this2._tooltipProximity(e.latlng,feature)){var content=_this2._tooltipFormatter(feature);if(!content)return;_this2.emit("showTooltip",{content:content,position:e.latlng})}else _this2.emit("hideTooltip")};this._debounceMoveMoveLocation=_lodash2.default.debounce(mouseMoveLocation.bind(this),15,{leading:true,trailing:false})}},{key:"_nearestFeature",value:function _nearestFeature(latLng){var self=this;var nearest=void 0;if(latLng.lng<-180||latLng.lng>180)return;_lodash2.default.reduce(this._geojsonFeatureCollection.features,function(distance,feature){var featureLatLng=self._getLatLng(feature);var dist=latLng.distanceTo(featureLatLng);if(dist<distance){nearest=feature;return dist}return distance},Infinity);return nearest}},{key:"_tooltipProximity",value:function _tooltipProximity(latlng,feature){if(!feature)return;var showTip=false;var featureLatLng=this._getLatLng(feature);var zoomScale=_d2.default.scale.linear().domain([1,4,7,10,13,16,18]).range([1e6,3e5,1e5,15e3,2e3,150,50]);var proximity=zoomScale(this._zoom);var distance=latlng.distanceTo(featureLatLng);var maxLngDif=40;var lngDif=Math.abs(latlng.lng-featureLatLng.lng);distance<proximity&&lngDif<maxLngDif&&(showTip=true);_d2.default.scale.pow().exponent(.2).domain([1,18]).range([15e5,50]);return showTip}}]);return HeatmapMarkers}(_events.EventEmitter);function dataToHeatArray(featureCollection,max){return featureCollection.features.map(function(feature){var lat=feature.geometry.coordinates[1];var lng=feature.geometry.coordinates[0];var heatIntensity=feature.properties.value/max;return[lat,lng,heatIntensity]})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ShadedCirclesMarkers=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _leaflet=__webpack_require__(261);var _leaflet2=_interopRequireDefault(_leaflet);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _scaled_circles=__webpack_require__(924);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.ShadedCirclesMarkers=function(_ScaledCirclesMarkers){_inherits(ShadedCirclesMarkers,_ScaledCirclesMarkers);function ShadedCirclesMarkers(){_classCallCheck(this,ShadedCirclesMarkers);return _possibleConstructorReturn(this,(ShadedCirclesMarkers.__proto__||Object.getPrototypeOf(ShadedCirclesMarkers)).apply(this,arguments))}_createClass(ShadedCirclesMarkers,[{key:"getMarkerFunction",value:function getMarkerFunction(){var _this2=this;var scaleFactor=.8;return function(feature,latlng){var radius=_this2._geohashMinDistance(feature)*scaleFactor;return _leaflet2.default.circle(latlng,radius)}}},{key:"_geohashMinDistance",value:function _geohashMinDistance(feature){var centerPoint=feature.properties.geohash_meta.center;var geohashRect=feature.properties.geohash_meta.rectangle;var east=_leaflet2.default.latLng([centerPoint[0],geohashRect[2][1]]);var north=_leaflet2.default.latLng([geohashRect[3][0],centerPoint[1]]);var center=_leaflet2.default.latLng([centerPoint[0],centerPoint[1]]);var eastRadius=Math.floor(center.distanceTo(east));var northRadius=Math.floor(center.distanceTo(north));return _lodash2.default.min([eastRadius,northRadius])}}]);return ShadedCirclesMarkers}(_scaled_circles.ScaledCirclesMarkers)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GeohashGridMarkers=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _leaflet=__webpack_require__(261);var _leaflet2=_interopRequireDefault(_leaflet);var _scaled_circles=__webpack_require__(924);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.GeohashGridMarkers=function(_ScaledCirclesMarkers){_inherits(GeohashGridMarkers,_ScaledCirclesMarkers);function GeohashGridMarkers(){_classCallCheck(this,GeohashGridMarkers);return _possibleConstructorReturn(this,(GeohashGridMarkers.__proto__||Object.getPrototypeOf(GeohashGridMarkers)).apply(this,arguments))}_createClass(GeohashGridMarkers,[{key:"getMarkerFunction",value:function getMarkerFunction(){return function(feature){var geohashRect=feature.properties.geohash_meta.rectangle;var corners=[[geohashRect[3][0],geohashRect[3][1]],[geohashRect[1][0],geohashRect[1][1]]];return _leaflet2.default.rectangle(corners)}}}]);return GeohashGridMarkers}(_scaled_circles.ScaledCirclesMarkers)},function(module,exports){},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TileMapTooltipFormatterProvider=TileMapTooltipFormatterProvider;var _jquery=__webpack_require__(13);var _jquery2=_interopRequireDefault(_jquery);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function TileMapTooltipFormatterProvider($compile,$rootScope){var $tooltipScope=$rootScope.$new();var $el=(0,_jquery2.default)("<div>").html(__webpack_require__(4744));$compile($el)($tooltipScope);return function tooltipFormatter(aggConfig,metricAgg,feature){if(!feature)return"";$tooltipScope.details=[{label:metricAgg.makeLabel(),value:metricAgg.fieldFormatter()(feature.properties.value)},{label:"Latitude",value:feature.geometry.coordinates[1]},{label:"Longitude",value:feature.geometry.coordinates[0]}];$tooltipScope.$apply();return $el.html()}}},function(module,exports){module.exports='<table>\n  <tbody>\n    <tr ng-repeat="detail in details" >\n      <td class="tooltip-label">{{detail.label}}</td>\n      <td class="tooltip-value">{{detail.value}}</td>\n    </tr>\n  </tbody>\n</table>\n'},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"f1db327547974915c7a903d2e5e9eedc.svg"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.makeGeoJsonResponseHandler=makeGeoJsonResponseHandler;var _tabify=__webpack_require__(925);var _convert_to_geojson=__webpack_require__(4751);function makeGeoJsonResponseHandler(){var lastEsResponse=void 0;var lastGeoJsonResponse=void 0;return function(vis,esResponse){if(lastEsResponse===esResponse)return lastGeoJsonResponse;lastEsResponse=esResponse;var tabifiedResponse=(0,_tabify.tabifyAggResponse)(vis.getAggConfig(),esResponse,{asAggConfigResults:false});lastGeoJsonResponse=(0,_convert_to_geojson.convertToGeoJson)(tabifiedResponse);return lastGeoJsonResponse}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TabbedAggResponseWriter=void 0;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _agg_config_result=__webpack_require__(421);var _agg_config_result2=_interopRequireDefault(_agg_config_result);var _table=__webpack_require__(1575);var _table_group=__webpack_require__(4748);var _get_columns=__webpack_require__(4749);var _legacy_class=__webpack_require__(77);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(0,_legacy_class.createLegacyClass)(SplitAcr).inherits(_agg_config_result2.default);function SplitAcr(agg,parent,key){SplitAcr.Super.call(this,agg,parent,key,key)}function TabbedAggResponseWriter(aggs,opts){this.opts=opts||{};this.rowBuffer=[];var visIsHier=opts.isHierarchical;this.canSplit=false!==this.opts.canSplit;this.partialRows=null==this.opts.partialRows?visIsHier:this.opts.partialRows;this.minimalColumns=!visIsHier||!!this.opts.minimalColumns;this.metricsForAllBuckets=visIsHier;this.asAggConfigResults=!!this.opts.asAggConfigResults;this.aggs=aggs;this.columns=(0,_get_columns.tabifyGetColumns)(aggs.getResponseAggs(),this.minimalColumns);this.aggStack=_lodash2.default.pluck(this.columns,"aggConfig");this.root=new _table_group.TabifyTableGroup;this.acrStack=[];this.splitStack=[this.root]}TabbedAggResponseWriter.prototype._table=function(group,agg,key){var Class=group?_table_group.TabifyTableGroup:_table.TabifyTable;var table=new Class;var parent=this.splitStack[0];if(group){table.aggConfig=agg;table.key=key;table.title=table.fieldFormatter()(key);agg.makeLabel()!==agg.name&&(table.title+=": "+agg.makeLabel())}table.$parent=parent;parent.tables.push(table);return table};TabbedAggResponseWriter.prototype.split=function(agg,buckets,block){var self=this;if(!self.canSplit)throw new Error("attempted to split when splitting is disabled");self._removeAggFromColumns(agg);buckets.forEach(function(bucket,key){var tableGroup=_lodash2.default.find(self.splitStack[0].tables,{aggConfig:agg,key:key});tableGroup||(tableGroup=self._table(true,agg,key));var splitAcr=false;self.asAggConfigResults&&(splitAcr=self._injectParentSplit(agg,key));self.splitStack.unshift(tableGroup);_lodash2.default.isFunction(block)&&block.call(self,bucket,key);self.splitStack.shift();splitAcr&&_lodash2.default.pull(self.acrStack,splitAcr)})};TabbedAggResponseWriter.prototype._removeAggFromColumns=function(agg){var i=_lodash2.default.findIndex(this.columns,function(col){return col.aggConfig===agg});if(-1===i)return;this.columns.splice(i,1);if(this.minimalColumns)return;var mCol=this.columns.splice(i,1).pop();var mI=_lodash2.default.findIndex(this.aggStack,function(agg){return agg===mCol.aggConfig});mI>-1&&this.aggStack.splice(mI,1)};TabbedAggResponseWriter.prototype._injectParentSplit=function(agg,key){var oldList=this.acrStack;var newList=this.acrStack=[];var injected=false;if(!oldList.length){injected=new SplitAcr(agg,null,key);newList.unshift(injected);return injected}while(oldList.length){var acr=oldList.pop();if(acr instanceof SplitAcr){newList.unshift(acr);continue}if(!injected){injected=new SplitAcr(agg,newList[0],key);newList.unshift(injected)}var newAcr=new _agg_config_result2.default(acr.aggConfig,newList[0],acr.value,acr.aggConfig.getKey(acr),acr.filters);newList.unshift(newAcr);var rowI=this.rowBuffer.indexOf(acr);rowI>-1&&(this.rowBuffer[rowI]=newAcr)}return injected};TabbedAggResponseWriter.prototype.cell=function(agg,value,block,filters){this.asAggConfigResults&&(value=new _agg_config_result2.default(agg,this.acrStack[0],value,value,filters));var stackResult=this.asAggConfigResults&&"bucket"===value.type;this.rowBuffer.push(value);stackResult&&this.acrStack.unshift(value);_lodash2.default.isFunction(block)&&block.call(this);this.rowBuffer.pop(value);stackResult&&this.acrStack.shift();return value};TabbedAggResponseWriter.prototype.row=function(buffer){var cells=buffer||this.rowBuffer.slice(0);if(!this.partialRows&&cells.length<this.columns.length)return;var split=this.splitStack[0];var table=split.tables[0]||this._table(false);while(cells.length<this.columns.length)cells.push("");table.rows.push(cells);return table};TabbedAggResponseWriter.prototype.response=function(){var columns=this.columns;columns.map(function(col){col.title=col.aggConfig.makeLabel()});(function step(table){table.tables?table.tables.forEach(step):table.columns=columns.slice(0)})(this.root);if(this.canSplit)return this.root;var table=this.root.tables[0];if(!table)return;delete table.$parent;return table};exports.TabbedAggResponseWriter=TabbedAggResponseWriter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function TabifyTableGroup(){this.aggConfig=null;this.key=null;this.title=null;this.tables=[]}TabifyTableGroup.prototype.field=function(){if(this.aggConfig)return this.aggConfig.getField()};TabifyTableGroup.prototype.fieldFormatter=function(){if(this.aggConfig)return this.aggConfig.fieldFormatter()};exports.TabifyTableGroup=TabifyTableGroup},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.tabifyGetColumns=tabifyGetColumns;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function tabifyGetColumns(aggs,minimal,hierarchical){null==minimal&&(minimal=!hierarchical);if(minimal)return aggs.map(function(agg){return{aggConfig:agg}});var columns=[];var grouped=_lodash2.default.groupBy(aggs,function(agg){return agg.type.type});if(!grouped.buckets)return grouped.metrics.map(function(agg){return{aggConfig:agg}});grouped.buckets.forEach(function(agg){columns.push({aggConfig:agg});grouped.metrics.forEach(function(metric){columns.push({aggConfig:metric})})});return columns}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TabifyBuckets=void 0;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function TabifyBuckets(aggResp,aggParams){_lodash2.default.has(aggResp,"buckets")?this.buckets=aggResp.buckets:this.buckets=aggResp?[aggResp]:[];this.objectMode=_lodash2.default.isPlainObject(this.buckets);if(this.objectMode){this._keys=_lodash2.default.keys(this.buckets);this.length=this._keys.length}else this.length=this.buckets.length;this.length&&aggParams&&this._orderBucketsAccordingToParams(aggParams)}TabifyBuckets.prototype.forEach=function(fn){var buckets=this.buckets;this.objectMode?this._keys.forEach(function(key){fn(buckets[key],key)}):buckets.forEach(function(bucket){fn(bucket,bucket.key)})};TabifyBuckets.prototype._isRangeEqual=function(range1,range2){return _lodash2.default.get(range1,"from",null)===_lodash2.default.get(range2,"from",null)&&_lodash2.default.get(range1,"to",null)===_lodash2.default.get(range2,"to",null)};TabifyBuckets.prototype._orderBucketsAccordingToParams=function(params){var _this=this;if(params.filters&&this.objectMode)this._keys=params.filters.map(function(filter){return filter.label||filter.input.query||"*"});else if(params.ranges&&this.objectMode)this._keys=params.ranges.map(function(range){return _lodash2.default.findKey(_this.buckets,function(el){return _this._isRangeEqual(el,range)})});else if(params.ranges&&"date"!==params.field.type){var ranges=params.ranges;params.ipRangeType&&(ranges="mask"===params.ipRangeType?ranges.mask:ranges.fromTo);this.buckets=ranges.map(function(range){if(range.mask)return _this.buckets.find(function(el){return el.key===range.mask});return _this.buckets.find(function(el){return _this._isRangeEqual(el,range)})})}};exports.TabifyBuckets=TabifyBuckets},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.convertToGeoJson=convertToGeoJson;var _decode_geo_hash=__webpack_require__(829);var _grid_dimensions=__webpack_require__(4752);function convertToGeoJson(tabifiedResponse){var features=void 0;var min=Infinity;var max=-Infinity;var geoAgg=void 0;if(tabifiedResponse&&tabifiedResponse.tables&&tabifiedResponse.tables[0]&&tabifiedResponse.tables[0].rows){var table=tabifiedResponse.tables[0];var geohashIndex=table.columns.findIndex(function(column){return"geohash_grid"===column.aggConfig.type.dslName});geoAgg=table.columns.find(function(column){return"geohash_grid"===column.aggConfig.type.dslName});if(-1===geohashIndex)features=[];else{var metricIndex=table.columns.findIndex(function(column){return"metrics"===column.aggConfig.type.type});var geocentroidIndex=table.columns.findIndex(function(column){return"geo_centroid"===column.aggConfig.type.dslName});features=table.rows.map(function(row){var geohash=row[geohashIndex];var geohashLocation=(0,_decode_geo_hash.decodeGeoHash)(geohash);var pointCoordinates=void 0;if(geocentroidIndex>-1){var location=row[geocentroidIndex];pointCoordinates=[location.lon,location.lat]}else pointCoordinates=[geohashLocation.longitude[2],geohashLocation.latitude[2]];var rectangle=[[geohashLocation.latitude[0],geohashLocation.longitude[0]],[geohashLocation.latitude[0],geohashLocation.longitude[1]],[geohashLocation.latitude[1],geohashLocation.longitude[1]],[geohashLocation.latitude[1],geohashLocation.longitude[0]]];var centerLatLng=[geohashLocation.latitude[2],geohashLocation.longitude[2]];if(geoAgg.aggConfig.params.useGeocentroid){pointCoordinates[0]=clampGrid(pointCoordinates[0],geohashLocation.longitude[0],geohashLocation.longitude[1]);pointCoordinates[1]=clampGrid(pointCoordinates[1],geohashLocation.latitude[0],geohashLocation.latitude[1])}var value=row[metricIndex];min=Math.min(min,value);max=Math.max(max,value);return{type:"Feature",geometry:{type:"Point",coordinates:pointCoordinates},properties:{geohash:geohash,geohash_meta:{center:centerLatLng,rectangle:rectangle},value:value}}})}}else features=[];var featureCollection={type:"FeatureCollection",features:features};return{featureCollection:featureCollection,meta:{min:min,max:max,geohashPrecision:geoAgg&&geoAgg.aggConfig.params.precision,geohashGridDimensionsAtEquator:geoAgg&&(0,_grid_dimensions.gridDimensions)(geoAgg.aggConfig.params.precision)}}}function clampGrid(val,min,max){val>max?val=max:val<min&&(val=min);return val}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.gridDimensions=gridDimensions;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var gridAtEquator={1:[5009400,4992600],2:[1252300,624100],3:[156500,156e3],4:[39100,19500],5:[4900,4900],6:[1200,609.4],7:[152.9,152.4],8:[38.2,19],9:[4.8,4.8],10:[1.2,.595],11:[.149,.149],12:[.037,.019]};function gridDimensions(precision){return _lodash2.default.get(gridAtEquator,precision)}},,function(module,exports,__webpack_require__){"use strict";var _vis_types=__webpack_require__(95);var _vis_factory=__webpack_require__(85);var _vis_category=__webpack_require__(71);var _editor_size=__webpack_require__(645);var _update_status=__webpack_require__(432);var _default_feedback_message=__webpack_require__(905);var _vega_request_handler=__webpack_require__(4755);var _vega_visualization=__webpack_require__(4778);__webpack_require__(4783);__webpack_require__(4784);__webpack_require__(1580);__webpack_require__(4785);__webpack_require__(4786);var _vega_editor_template=__webpack_require__(4787);var _vega_editor_template2=_interopRequireDefault(_vega_editor_template);var _defaultSpec=__webpack_require__(4788);var _defaultSpec2=_interopRequireDefault(_defaultSpec);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_vis_types.VisTypesRegistryProvider.register(function(Private){var VisFactory=Private(_vis_factory.VisFactoryProvider);var vegaRequestHandler=Private(_vega_request_handler.VegaRequestHandlerProvider).handler;var VegaVisualization=Private(_vega_visualization.VegaVisualizationProvider);return VisFactory.createBaseVisualization({name:"vega",title:"Vega",description:"Create custom visualizations using Vega and VegaLite",icon:"fa-code",category:_vis_category.CATEGORY.OTHER,visConfig:{defaults:{spec:_defaultSpec2.default}},editorConfig:{optionsTemplate:_vega_editor_template2.default,enableAutoApply:true,defaultSize:_editor_size.DefaultEditorSize.MEDIUM},visualization:VegaVisualization,requiresUpdateStatus:[_update_status.Status.DATA,_update_status.Status.RESIZE],requestHandler:vegaRequestHandler,responseHandler:"none",options:{showIndexSelection:false,showQueryBar:true,showFilterBar:true},stage:"lab",feedbackMessage:_default_feedback_message.defaultFeedbackMessage})})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VegaRequestHandlerProvider=VegaRequestHandlerProvider;var _vega_parser=__webpack_require__(4756);var _dashboard_context=__webpack_require__(889);var _search_cache=__webpack_require__(4772);var _time_cache=__webpack_require__(4777);var _timefilter=__webpack_require__(14);function VegaRequestHandlerProvider(Private,es,serviceSettings){var dashboardContext=Private(_dashboard_context.dashboardContextProvider);var searchCache=new _search_cache.SearchCache(es,{max:10,maxAge:4e3});var timeCache=new _time_cache.TimeCache(_timefilter.timefilter,3e3);return{name:"vega",handler:function handler(vis,_ref){var timeRange=_ref.timeRange;timeCache.setTimeRange(timeRange);var vp=new _vega_parser.VegaParser(vis.params.spec,searchCache,timeCache,dashboardContext,serviceSettings);return vp.parseAsync()}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VegaParser=void 0;var _typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"===typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _vegaLib=__webpack_require__(665);var vega=_interopRequireWildcard(_vegaLib);var _vegaLite=__webpack_require__(1576);var vegaLite=_interopRequireWildcard(_vegaLite);var _vegaSchemaUrlParser=__webpack_require__(4760);var _vegaSchemaUrlParser2=_interopRequireDefault(_vegaSchemaUrlParser);var _compareVersions=__webpack_require__(4761);var _compareVersions2=_interopRequireDefault(_compareVersions);var _es_query_parser=__webpack_require__(4762);var _hjson=__webpack_require__(1577);var _hjson2=_interopRequireDefault(_hjson);var _utils=__webpack_require__(1578);var _ems_file_parser=__webpack_require__(4768);var _url_parser=__webpack_require__(4771);var _eui=__webpack_require__(3);function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);newObj.default=obj;return newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var defaultColor=_eui.VISUALIZATION_COLORS[0];var DEFAULT_SCHEMA="https://vega.github.io/schema/vega/v3.0.json";var locToDirMap={left:"row-reverse",right:"row",top:"column-reverse",bottom:"column"};var DEFAULT_PARSER="elasticsearch";exports.VegaParser=function(){function VegaParser(spec,searchCache,timeCache,dashboardContext,serviceSettings){_classCallCheck(this,VegaParser);this.spec=spec;this.hideWarnings=false;this.error=void 0;this.warnings=[];var onWarn=this._onWarning.bind(this);this._urlParsers={elasticsearch:new _es_query_parser.EsQueryParser(timeCache,searchCache,dashboardContext,onWarn),emsfile:new _ems_file_parser.EmsFileParser(serviceSettings),url:new _url_parser.UrlParser(onWarn)}}_createClass(VegaParser,[{key:"parseAsync",value:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return this._parseAsync();case 3:_context.next=8;break;case 5:_context.prev=5;_context.t0=_context["catch"](0);this.error=_utils.Utils.formatErrorToStr(_context.t0);case 8:return _context.abrupt("return",this);case 9:case"end":return _context.stop()}},_callee,this,[[0,5]])}));function parseAsync(){return _ref.apply(this,arguments)}return parseAsync}()},{key:"_parseAsync",value:function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){return regeneratorRuntime.wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(!(void 0!==this.isVegaLite)){_context2.next=2;break}throw new Error;case 2:"string"===typeof this.spec&&(this.spec=_hjson2.default.parse(this.spec,{legacyRoot:false}));if(_lodash2.default.isPlainObject(this.spec)){_context2.next=5;break}throw new Error("Invalid Vega spec");case 5:this.isVegaLite=this._parseSchema();this.useHover=!this.isVegaLite;this._config=this._parseConfig();this.hideWarnings=!!this._config.hideWarnings;this.useMap="map"===this._config.type;this.renderer="svg"===this._config.renderer?"svg":"canvas";this.tooltips=this._parseTooltips();this._setDefaultColors();this._parseControlPlacement(this._config);this.useMap?this.mapConfig=this._parseMapConfig():void 0===this.spec.autosize&&(this.spec.autosize={type:"fit",contains:"padding"});_context2.next=17;return this._resolveDataUrls();case 17:this.isVegaLite&&this._compileVegaLite();this._calcSizing();case 19:case"end":return _context2.stop()}},_callee2,this)}));function _parseAsync(){return _ref2.apply(this,arguments)}return _parseAsync}()},{key:"_compileVegaLite",value:function _compileVegaLite(){this.vlspec=this.spec;var logger=vega.logger(vega.Warn);logger.warn=this._onWarning.bind(this);this.spec=vegaLite.compile(this.vlspec,logger).spec;if(this.useMap){var hasConfig=_lodash2.default.isPlainObject(this.vlspec.config);if(void 0===this.vlspec.config||hasConfig&&!this.vlspec.config.projection){if(!Array.isArray(this.spec.projections)||1!==this.spec.projections.length||"projection"!==this.spec.projections[0].name)throw new Error("Internal error: VL compiler should have generated a single projection object");delete this.spec.projections}this.vlspec.width||delete this.spec.width;this.vlspec.height||delete this.spec.height;this.vlspec.padding||void 0!==this.vlspec.config&&(!hasConfig||this.vlspec.config.padding)||delete this.spec.padding;this.vlspec.autosize||void 0!==this.vlspec.config&&(!hasConfig||this.vlspec.config.autosize)||delete this.spec.autosize}}},{key:"_calcSizing",value:function _calcSizing(){this.useResize=false;if(!this.useMap){var autosize=this.spec.autosize.type||this.spec.autosize;"fit"!==autosize&&("none"!==autosize||this.spec.width||this.spec.height)||(this.useResize=true)}this.paddingWidth=0;this.paddingHeight=0;if(this.useResize&&this.spec.padding&&"padding"!==this.spec.autosize.contains)if("object"===_typeof(this.spec.padding)){this.paddingWidth+=(+this.spec.padding.left||0)+(+this.spec.padding.right||0);this.paddingHeight+=(+this.spec.padding.top||0)+(+this.spec.padding.bottom||0)}else{this.paddingWidth+=2*(+this.spec.padding||0);this.paddingHeight+=2*(+this.spec.padding||0)}if(this.useResize&&(this.spec.width||this.spec.height))if(this.isVegaLite){delete this.spec.width;delete this.spec.height}else this._onWarning("The 'width' and 'height' params are ignored with autosize=fit")}},{key:"_parseControlPlacement",value:function _parseControlPlacement(){this.containerDir=locToDirMap[this._config.controlsLocation];if(void 0===this.containerDir){if(void 0!==this._config.controlsLocation)throw new Error('Unrecognized controlsLocation value. Expecting one of ["'+locToDirMap.keys().join('", "')+'"]');this.containerDir="column"}var dir=this._config.controlsDirection;if(void 0!==dir&&"horizontal"!==dir&&"vertical"!==dir)throw new Error('Unrecognized dir value. Expecting one of ["horizontal", "vertical"]');this.controlsDir="horizontal"===dir?"row":"column"}},{key:"_parseConfig",value:function _parseConfig(){var result=void 0;if(void 0!==this.spec._hostConfig){result=this.spec._hostConfig;delete this.spec._hostConfig;if(!_lodash2.default.isPlainObject(result))throw new Error("If present, _hostConfig must be an object");this._onWarning("_hostConfig has been deprecated. Use config.kibana instead.")}if(_lodash2.default.isPlainObject(this.spec.config)&&void 0!==this.spec.config.kibana){result=this.spec.config.kibana;delete this.spec.config.kibana;if(!_lodash2.default.isPlainObject(result))throw new Error("If present, config.kibana must be an object")}return result||{}}},{key:"_parseTooltips",value:function _parseTooltips(){if(false===this._config.tooltips)return false;var result=this._config.tooltips||{};if(void 0===result.position)result.position="top";else if(-1===["top","right","bottom","left"].indexOf(result.position))throw new Error("Unexpected value for the result.position configuration");if(void 0===result.padding)result.padding=16;else if("number"!==typeof result.padding)throw new Error("config.kibana.result.padding is expected to be a number");if(void 0===result.centerOnMark)result.centerOnMark=50;else if("boolean"===typeof result.centerOnMark)result.centerOnMark=result.centerOnMark?Number.MAX_VALUE:-1;else if("number"!==typeof result.centerOnMark)throw new Error("config.kibana.result.centerOnMark is expected to be true, false, or a number");return result}},{key:"_parseMapConfig",value:function _parseMapConfig(){var _this=this;var res={delayRepaint:void 0===this._config.delayRepaint||this._config.delayRepaint};var validate=function validate(name,isZoom){var val=_this._config[name];if(void 0!==val){var parsed=parseFloat(val);if(Number.isFinite(parsed)&&(!isZoom||parsed>=0&&parsed<=30)){res[name]=parsed;return}_this._onWarning("config.kibana."+name+" is not valid")}isZoom||(res[name]=0)};validate("latitude",false);validate("longitude",false);validate("zoom",true);validate("minZoom",true);validate("maxZoom",true);res.mapStyle=void 0===this._config.mapStyle?"default":this._config.mapStyle;if("default"!==res.mapStyle&&false!==res.mapStyle){this._onWarning('config.kibana.mapStyle may either be false or "default"');res.mapStyle="default"}this._parseBool("zoomControl",res,true);this._parseBool("scrollWheelZoom",res,true);var maxBounds=this._config.maxBounds;void 0!==maxBounds&&(Array.isArray(maxBounds)&&4===maxBounds.length&&maxBounds.every(function(v){return"number"===typeof v&&Number.isFinite(v)})?res.maxBounds=maxBounds:this._onWarning("config.kibana.maxBounds must be an array with four numbers"));return res}},{key:"_parseBool",value:function _parseBool(paramName,dstObj,dflt){var val=this._config[paramName];if(void 0===val)dstObj[paramName]=dflt;else if("boolean"!==typeof val){this._onWarning("config.kibana."+paramName+" must be a boolean value");dstObj[paramName]=dflt}else dstObj[paramName]=val}},{key:"_parseSchema",value:function _parseSchema(){if(!this.spec.$schema){this._onWarning('The input spec does not specify a "$schema", defaulting to "'+DEFAULT_SCHEMA+'"');this.spec.$schema=DEFAULT_SCHEMA}var schema=(0,_vegaSchemaUrlParser2.default)(this.spec.$schema);var isVegaLite="vega-lite"===schema.library;var libVersion=isVegaLite?vegaLite.version:vega.version;(0,_compareVersions2.default)(schema.version,libVersion)>0&&this._onWarning("The input spec uses "+schema.library+" "+schema.version+", but current version of "+schema.library+" is "+libVersion+".");return isVegaLite}},{key:"_resolveDataUrls",value:function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var _this2=this;var pending,pendingParsers;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:pending={};this._findObjectDataUrls(this.spec,function(obj){var url=obj.url;delete obj.url;var type=url["%type%"];delete url["%type%"];void 0===type&&(type=DEFAULT_PARSER);var parser=_this2._urlParsers[type];if(void 0===parser)throw new Error('url: {"%type%": "'+type+'"} is not supported');var pendingArr=pending[type];void 0===pendingArr&&(pending[type]=pendingArr=[]);pendingArr.push(parser.parseUrl(obj,url))});pendingParsers=Object.keys(pending);if(!(pendingParsers.length>0)){_context3.next=6;break}_context3.next=6;return Promise.all(pendingParsers.map(function(type){return _this2._urlParsers[type].populateData(pending[type])}));case 6:case"end":return _context3.stop()}},_callee3,this)}));function _resolveDataUrls(){return _ref3.apply(this,arguments)}return _resolveDataUrls}()},{key:"_findObjectDataUrls",value:function _findObjectDataUrls(obj,onFind,key){if(Array.isArray(obj)){var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=void 0;try{for(var _step,_iterator=obj[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var elem=_step.value;this._findObjectDataUrls(elem,onFind,key)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}else if(_lodash2.default.isPlainObject(obj))if("data"===key&&_lodash2.default.isPlainObject(obj.url)){if(void 0!==obj.values||void 0!==obj.source)throw new Error('Data must not have more than one of "url", "values", and "source"');onFind(obj)}else{var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=void 0;try{for(var _step2,_iterator2=Object.keys(obj)[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var k=_step2.value;this._findObjectDataUrls(obj[k],onFind,k)}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}}}},{key:"_setDefaultColors",value:function _setDefaultColors(){this._setDefaultValue({scheme:"elastic"},"config","range","category");if(this.isVegaLite)this._setDefaultValue(defaultColor,"config","mark","color");else if(!this.spec.config.mark||void 0===this.spec.config.mark.color&&void 0===this.spec.config.mark.fill){this._setDefaultValue(defaultColor,"config","arc","fill");this._setDefaultValue(defaultColor,"config","area","fill");this._setDefaultValue(defaultColor,"config","line","stroke");this._setDefaultValue(defaultColor,"config","path","stroke");this._setDefaultValue(defaultColor,"config","rect","fill");this._setDefaultValue(defaultColor,"config","rule","stroke");this._setDefaultValue(defaultColor,"config","shape","stroke");this._setDefaultValue(defaultColor,"config","symbol","fill");this._setDefaultValue(defaultColor,"config","trail","fill")}}},{key:"_setDefaultValue",value:function _setDefaultValue(value){var o=this.spec;for(var _len=arguments.length,fields=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)fields[_key-1]=arguments[_key];for(var i=0;i<fields.length-1;i++){var field=fields[i];var subObj=o[field];if(void 0===subObj)o[field]={};else if(!_lodash2.default.isPlainObject(subObj))return;o=o[field]}var lastField=fields[fields.length-1];void 0===o[lastField]&&(o[lastField]=value)}},{key:"_onWarning",value:function _onWarning(){this.hideWarnings||this.warnings.push(_utils.Utils.formatWarningToStr.apply(_utils.Utils,arguments))}}]);return VegaParser}()},function(module,exports){},function(module,exports){},function(module,exports){},,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EsQueryParser=void 0;var _typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"===typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function _defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true}):obj[key]=value;return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var TIMEFILTER="%timefilter%";var AUTOINTERVAL="%autointerval%";var MUST_CLAUSE="%dashboard_context-must_clause%";var MUST_NOT_CLAUSE="%dashboard_context-must_not_clause%";var LEGACY_CONTEXT="%context_query%";var CONTEXT="%context%";var TIMEFIELD="%timefield%";exports.EsQueryParser=function(){function EsQueryParser(timeCache,searchCache,dashboardContext,onWarning){_classCallCheck(this,EsQueryParser);this._timeCache=timeCache;this._searchCache=searchCache;this._dashboardContext=dashboardContext;this._onWarning=onWarning}_createClass(EsQueryParser,[{key:"parseUrl",value:function parseUrl(dataObject,url){var body=url.body;var context=url[CONTEXT];delete url[CONTEXT];var timefield=url[TIMEFIELD];delete url[TIMEFIELD];var usesContext=void 0!==context||void 0!==timefield;if(void 0===body)url.body=body={};else if(!_lodash2.default.isPlainObject(body))throw new Error("url.body must be an object");var legacyContext=url[LEGACY_CONTEXT];delete url[LEGACY_CONTEXT];if(void 0!==legacyContext){if(void 0!==body.query)throw new Error('Data url must not have legacy "'+LEGACY_CONTEXT+'" and "body.query" values at the same time');if(usesContext)throw new Error('Data url must not have "'+LEGACY_CONTEXT+'" together with "'+CONTEXT+'" or "'+TIMEFIELD+'"');if(true!==legacyContext&&("string"!==typeof legacyContext||0===legacyContext.length))throw new Error('Legacy "'+LEGACY_CONTEXT+'" can either be true (ignores time range picker), or it can be the name of the time field, e.g. "@timestamp"');usesContext=true;context=true;var result='"url": {"'+CONTEXT+'": true';if("string"===typeof legacyContext){timefield=legacyContext;result+=', "'+TIMEFIELD+'": '+JSON.stringify(timefield)}result+="}";this._onWarning('Legacy "url": {"'+LEGACY_CONTEXT+'": '+JSON.stringify(legacyContext)+"} should change to "+result)}if(void 0!==body.query){if(usesContext)throw new Error("url."+CONTEXT+" and url."+TIMEFIELD+" must not be used when url.body.query is set");this._injectContextVars(body.query,true)}else if(usesContext){timefield&&(body.query={range:_defineProperty({},timefield,this._createRangeFilter(_defineProperty({},TIMEFILTER,true)))});if(context){var newQuery=this._dashboardContext();timefield&&newQuery.bool.must.push(body.query);body.query=newQuery}}this._injectContextVars(body.aggs,false);return{dataObject:dataObject,url:url}}},{key:"populateData",value:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(requests){var esSearches,results,i;return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:esSearches=requests.map(function(r){return r.url});_context.next=3;return this._searchCache.search(esSearches);case 3:results=_context.sent;for(i=0;i<requests.length;i++)requests[i].dataObject.values=results[i];case 5:case"end":return _context.stop()}},_callee,this)}));function populateData(_x){return _ref.apply(this,arguments)}return populateData}()},{key:"_injectContextVars",value:function _injectContextVars(obj,isQuery){if(obj&&"object"===("undefined"===typeof obj?"undefined":_typeof(obj)))if(Array.isArray(obj))for(var pos=0;pos<obj.length;){var item=obj[pos];if(!isQuery||item!==MUST_CLAUSE&&item!==MUST_NOT_CLAUSE){this._injectContextVars(item,isQuery);pos++}else{var ctxTag=item===MUST_CLAUSE?"must":"must_not";var ctx=this._dashboardContext();if(ctx&&ctx.bool&&ctx.bool[ctxTag])if(Array.isArray(ctx.bool[ctxTag])){obj.splice.apply(obj,[pos,1].concat(_toConsumableArray(ctx.bool[ctxTag])));pos+=ctx.bool[ctxTag].length}else obj[pos++]=ctx.bool[ctxTag];else obj.splice(pos,1)}}else{var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=void 0;try{for(var _step,_iterator=Object.keys(obj)[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var prop=_step.value;var subObj=obj[prop];if(!subObj||"object"!==("undefined"===typeof obj?"undefined":_typeof(obj)))continue;if("interval"===prop&&subObj[AUTOINTERVAL]){var size=subObj[AUTOINTERVAL];if(true===size)size=50;else if("number"!==typeof size)throw new Error('"'+AUTOINTERVAL+'" must be either true or a number');var bounds=this._timeCache.getTimeBounds();obj.interval=EsQueryParser._roundInterval((bounds.max-bounds.min)/size);continue}switch(subObj[TIMEFILTER]){case"min":case"max":obj[prop]=this._getTimeBound(subObj,subObj[TIMEFILTER]);continue;case true:this._createRangeFilter(subObj);continue;case void 0:this._injectContextVars(subObj,isQuery);continue;default:throw new Error('"'+TIMEFILTER+'" property must be set to true, "min", or "max"')}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}}},{key:"_createRangeFilter",value:function _createRangeFilter(obj){obj.gte=this._getTimeBound(obj,"min");obj.lte=this._getTimeBound(obj,"max");obj.format="epoch_millis";delete obj[TIMEFILTER];delete obj.shift;delete obj.unit;return obj}},{key:"_getTimeBound",value:function _getTimeBound(opts,type){var bounds=this._timeCache.getTimeBounds();var result=bounds[type];if(opts.shift){var shift=opts.shift;if("number"!==typeof shift)throw new Error("shift must be a numeric value");var multiplier=void 0;switch(opts.unit||"d"){case"w":case"week":multiplier=6048e5;break;case"d":case"day":multiplier=864e5;break;case"h":case"hour":multiplier=36e5;break;case"m":case"minute":multiplier=6e4;break;case"s":case"second":multiplier=1e3;break;default:throw new Error("Unknown unit value. Must be one of: [week, day, hour, minute, second]")}result+=shift*multiplier}return result}}],[{key:"_roundInterval",value:function _roundInterval(interval){switch(true){case interval<=500:return"100ms";case interval<=5e3:return"1s";case interval<=7500:return"5s";case interval<=15e3:return"10s";case interval<=45e3:return"30s";case interval<=18e4:return"1m";case interval<=45e4:return"5m";case interval<=12e5:return"10m";case interval<=27e5:return"30m";case interval<=72e5:return"1h";case interval<=216e5:return"3h";case interval<=864e5:return"12h";case interval<=6048e5:return"24h";case interval<=18144e5:return"1w";case interval<36288e5:return"30d";default:return"1y"}}}]);return EsQueryParser}()},,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EmsFileParser=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _vega_base_view=__webpack_require__(927);function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.EmsFileParser=function(){function EmsFileParser(serviceSettings){_classCallCheck(this,EmsFileParser);this._serviceSettings=serviceSettings}_createClass(EmsFileParser,[{key:"parseUrl",value:function parseUrl(obj,url){if("string"!==typeof url.name)throw new Error('data.url with {"%type%": "emsfile"} is missing the "name" of the file');this._fileLayersP||(this._fileLayersP=this._serviceSettings.getFileLayers());return{obj:obj,name:url.name}}},{key:"populateData",value:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(requests){var layers,_loop,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,_ref2;return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(0===requests.length)){_context.next=2;break}return _context.abrupt("return");case 2:_context.next=4;return this._fileLayersP;case 4:layers=_context.sent;_loop=function _loop(_ref2){var obj=_ref2.obj,name=_ref2.name;var foundLayer=layers.find(function(v){return v.name===name});if(!foundLayer)throw new Error("emsfile "+JSON.stringify(name)+" does not exist");obj.url=(0,_vega_base_view.bypassExternalUrlCheck)(foundLayer.url)};_iteratorNormalCompletion=true;_didIteratorError=false;_iteratorError=void 0;_context.prev=9;for(_iterator=requests[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){_ref2=_step.value;_loop(_ref2)}_context.next=17;break;case 13:_context.prev=13;_context.t0=_context["catch"](9);_didIteratorError=true;_iteratorError=_context.t0;case 17:_context.prev=17;_context.prev=18;!_iteratorNormalCompletion&&_iterator.return&&_iterator.return();case 20:_context.prev=20;if(!_didIteratorError){_context.next=23;break}throw _iteratorError;case 23:return _context.finish(20);case 24:return _context.finish(17);case 25:case"end":return _context.stop()}},_callee,this,[[9,13,17,25],[18,,20,24]])}));function populateData(_x){return _ref.apply(this,arguments)}return populateData}()}]);return EmsFileParser}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TooltipHandler=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _eui=__webpack_require__(3);var _vegaTooltip=__webpack_require__(4770);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var tooltipId="vega-kibana-tooltip";function createRect(left,top,width,height){return{left:left,top:top,width:width,height:height,x:left,y:top,right:left+width,bottom:top+height}}exports.TooltipHandler=function(){function TooltipHandler(container,view,opts){_classCallCheck(this,TooltipHandler);this.container=container;this.position=opts.position;this.padding=opts.padding;this.centerOnMark=opts.centerOnMark;view.tooltip(this.handler.bind(this))}_createClass(TooltipHandler,[{key:"handler",value:function handler(view,event,item,value){this.hideTooltip();if(null==value||""===value)return;var el=document.createElement("div");el.setAttribute("id",tooltipId);el.classList.add("euiToolTipPopover","euiToolTip","euiToolTip--"+this.position);el.innerHTML=(0,_vegaTooltip.formatValue)(value,_lodash2.default.escape);document.body.appendChild(el);var anchorBounds=void 0;if(item.bounds.width()>this.centerOnMark||item.bounds.height()>this.centerOnMark)anchorBounds=createRect(event.pageX,event.pageY,0,0);else{var containerBox=this.container.getBoundingClientRect();anchorBounds=createRect(containerBox.left+view._origin[0]+item.bounds.x1,containerBox.top+view._origin[1]+item.bounds.y1,item.bounds.width(),item.bounds.height())}var pos=(0,_eui.calculatePopoverPosition)(anchorBounds,el.getBoundingClientRect(),this.position,this.padding);el.setAttribute("style","top: "+pos.top+"px; left: "+pos.left+"px")}},{key:"hideTooltip",value:function hideTooltip(){var el=document.getElementById(tooltipId);el&&el.remove()}}]);return TooltipHandler}()},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UrlParser=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _jquery=__webpack_require__(13);var _jquery2=_interopRequireDefault(_jquery);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.UrlParser=function(){function UrlParser(onWarning){_classCallCheck(this,UrlParser);this._onWarning=onWarning}_createClass(UrlParser,[{key:"parseUrl",value:function parseUrl(obj,urlObj){var url=urlObj.url;if(!url)throw new Error("data.url requires a url parameter in a form 'https://example.org/path/subpath'");var query=urlObj.query;query?url+=(url.includes("?")?"&":"?")+_jquery2.default.param(query):this._onWarning('Using a "url": {"%type%": "url", "url": ...} should have a "query" sub-object');obj.url=url}},{key:"populateData",value:function populateData(){}}]);return UrlParser}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SearchCache=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _lruCache=__webpack_require__(4773);var _lruCache2=_interopRequireDefault(_lruCache);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.SearchCache=function(){function SearchCache(es,cacheOpts){_classCallCheck(this,SearchCache);this._es=es;this._cache=new _lruCache2.default(cacheOpts)}_createClass(SearchCache,[{key:"search",value:function search(requests){var promises=[];var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=void 0;try{for(var _step,_iterator=requests[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var request=_step.value;var key=JSON.stringify(request);var pending=this._cache.get(key);if(void 0===pending){pending=this._es.search(request);this._cache.set(key,pending)}promises.push(pending)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return Promise.all(promises)}}]);return SearchCache}()},,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var AlwaysCacheMaxAge=40;exports.TimeCache=function(){function TimeCache(timefilter,maxAge){_classCallCheck(this,TimeCache);this._timefilter=timefilter;this._maxAge=maxAge;this._cachedBounds=null;this._cacheTS=0}_createClass(TimeCache,[{key:"_now",value:function _now(){return Date.now()}},{key:"getTimeBounds",value:function getTimeBounds(){var ts=this._now();var bounds=void 0;if(this._cachedBounds){var diff=ts-this._cacheTS;if(diff<AlwaysCacheMaxAge)return this._cachedBounds;if(diff<this._maxAge){bounds=this._getBounds();if(Math.abs(bounds.min-this._cachedBounds.min)<this._maxAge&&Math.abs(bounds.max-this._cachedBounds.max)<this._maxAge)return this._cachedBounds}}this._cacheTS=ts;this._cachedBounds=bounds||this._getBounds();return this._cachedBounds}},{key:"setTimeRange",value:function setTimeRange(timeRange){this._timeRange=timeRange}},{key:"_getBounds",value:function _getBounds(){var bounds=this._timefilter.calculateBounds(this._timeRange);return{min:bounds.min.valueOf(),max:bounds.max.valueOf()}}}]);return TimeCache}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();exports.VegaVisualizationProvider=VegaVisualizationProvider;var _notify=__webpack_require__(9);var _vega_view=__webpack_require__(4779);var _vega_map_view=__webpack_require__(4780);var _saved_objects=__webpack_require__(57);function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function VegaVisualizationProvider(Private,vegaConfig,serviceSettings,$rootScope){var savedObjectsClient=Private(_saved_objects.SavedObjectsClientProvider);var notify=new _notify.Notifier({location:"Vega"});return function(){function VegaVisualization(el,vis){_classCallCheck(this,VegaVisualization);this._el=el;this._vis=vis}_createClass(VegaVisualization,[{key:"findIndex",value:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(index){var idxObj;return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:idxObj=void 0;if(!index){_context.next=9;break}_context.next=4;return(0,_saved_objects.findObjectByTitle)(savedObjectsClient,"index-pattern",index);case 4:idxObj=_context.sent;if(idxObj){_context.next=7;break}throw new Error('Index "'+index+'" not found');case 7:_context.next=14;break;case 9:_context.next=11;return this._vis.API.indexPatterns.getDefault();case 11:idxObj=_context.sent;if(idxObj){_context.next=14;break}throw new Error("Unable to find default index");case 14:return _context.abrupt("return",idxObj.id);case 15:case"end":return _context.stop()}},_callee,this)}));function findIndex(_x){return _ref.apply(this,arguments)}return findIndex}()},{key:"render",value:function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(visData,status){return regeneratorRuntime.wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(!(!visData&&!this._vegaView)){_context2.next=3;break}_notify.toastNotifications.addWarning("Unable to render without data");return _context2.abrupt("return");case 3:_context2.prev=3;_context2.next=6;return this._render(visData,status);case 6:_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2["catch"](3);this._vegaView?this._vegaView.onError(_context2.t0):notify.error(_context2.t0);case 11:case"end":return _context2.stop()}},_callee2,this,[[3,8]])}));function render(_x2,_x3){return _ref2.apply(this,arguments)}return render}()},{key:"_render",value:function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(vegaParser,status){var vegaViewParams;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(!(vegaParser&&(status.data||!this._vegaView))){_context3.next=11;break}if(!this._vegaView){_context3.next=5;break}_context3.next=4;return this._vegaView.destroy();case 4:this._vegaView=null;case 5:vegaViewParams={vegaConfig:vegaConfig,parentEl:this._el,vegaParser:vegaParser,serviceSettings:serviceSettings,queryfilter:this._vis.API.queryFilter,timefilter:this._vis.API.timeFilter,findIndex:this.findIndex.bind(this),$rootScope:$rootScope};vegaParser.useMap?this._vegaView=new _vega_map_view.VegaMapView(vegaViewParams):this._vegaView=new _vega_view.VegaView(vegaViewParams);_context3.next=9;return this._vegaView.init();case 9:_context3.next=14;break;case 11:if(!status.resize){_context3.next=14;break}_context3.next=14;return this._vegaView.resize();case 14:case"end":return _context3.stop()}},_callee3,this)}));function _render(_x4,_x5){return _ref3.apply(this,arguments)}return _render}()},{key:"destroy",value:function destroy(){return this._vegaView&&this._vegaView.destroy()}}]);return VegaVisualization}()}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VegaView=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _vegaLib=__webpack_require__(665);var vega=_interopRequireWildcard(_vegaLib);var _vega_base_view=__webpack_require__(927);function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);newObj.default=obj;return newObj}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.VegaView=function(_VegaBaseView){_inherits(VegaView,_VegaBaseView);function VegaView(){_classCallCheck(this,VegaView);return _possibleConstructorReturn(this,(VegaView.__proto__||Object.getPrototypeOf(VegaView)).apply(this,arguments))}_createClass(VegaView,[{key:"_initViewCustomizations",value:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var view;return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(this._$container){_context.next=2;break}return _context.abrupt("return");case 2:view=new vega.View(vega.parse(this._parser.spec),this._vegaViewConfig);this.setDebugValues(view,this._parser.spec,this._parser.vlspec);view.warn=this.onWarn.bind(this);view.error=this.onError.bind(this);this._parser.useResize&&this.updateVegaSize(view);view.initialize(this._$container.get(0),this._$controls.get(0));this._parser.useHover&&view.hover();_context.next=11;return this.setView(view);case 11:case"end":return _context.stop()}},_callee,this)}));function _initViewCustomizations(){return _ref.apply(this,arguments)}return _initViewCustomizations}()}]);return VegaView}(_vega_base_view.VegaBaseView)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VegaMapView=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _kibana_map=__webpack_require__(1570);var _vegaLib=__webpack_require__(665);var vega=_interopRequireWildcard(_vegaLib);var _vega_base_view=__webpack_require__(927);var _vega_map_layer=__webpack_require__(4781);function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);newObj.default=obj;return newObj}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.VegaMapView=function(_VegaBaseView){_inherits(VegaMapView,_VegaBaseView);function VegaMapView(){_classCallCheck(this,VegaMapView);return _possibleConstructorReturn(this,(VegaMapView.__proto__||Object.getPrototypeOf(VegaMapView)).apply(this,arguments))}_createClass(VegaMapView,[{key:"_initViewCustomizations",value:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var _this2=this;var mapConfig,baseMapOpts,limitMinZ,limitMaxZ,tmsServices,mapStyle,validate,minZoom,maxZoom,_ref2,zoom,vegaMapLayer,vegaView;return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:mapConfig=this._parser.mapConfig;baseMapOpts=void 0;limitMinZ=0;limitMaxZ=25;if(!(false!==mapConfig.mapStyle)){_context.next=13;break}_context.next=7;return this._serviceSettings.getTMSServices();case 7:tmsServices=_context.sent;if(this._$container){_context.next=10;break}return _context.abrupt("return");case 10:mapStyle="default"===mapConfig.mapStyle?"road_map":mapConfig.mapStyle;baseMapOpts=tmsServices.find(function(s){return s.id===mapStyle});if(baseMapOpts){limitMinZ=baseMapOpts.minZoom;limitMaxZ=baseMapOpts.maxZoom}else this.onWarn("mapStyle "+JSON.stringify(mapStyle)+" was not found");case 13:validate=function validate(name,value,dflt,min,max){if(void 0===value)value=dflt;else if(value<min){_this2.onWarn("Resetting "+name+" to "+min);value=min}else if(value>max){_this2.onWarn("Resetting "+name+" to "+max);value=max}return value};minZoom=validate("minZoom",mapConfig.minZoom,limitMinZ,limitMinZ,limitMaxZ);maxZoom=validate("maxZoom",mapConfig.maxZoom,limitMaxZ,limitMinZ,limitMaxZ);if(minZoom>maxZoom){this.onWarn("minZoom and maxZoom have been swapped");_ref2=[maxZoom,minZoom];minZoom=_ref2[0];maxZoom=_ref2[1]}zoom=validate("zoom",mapConfig.zoom,2,minZoom,maxZoom);this._kibanaMap=new _kibana_map.KibanaMap(this._$container.get(0),{zoom:zoom,minZoom:minZoom,maxZoom:maxZoom,center:[mapConfig.latitude,mapConfig.longitude],zoomControl:mapConfig.zoomControl,scrollWheelZoom:mapConfig.scrollWheelZoom});baseMapOpts&&this._kibanaMap.setBaseLayer({baseLayerType:"tms",options:baseMapOpts});vegaMapLayer=new _vega_map_layer.VegaMapLayer(this._parser.spec,{vega:vega,bindingsContainer:this._$controls.get(0),delayRepaint:mapConfig.delayRepaint,viewConfig:this._vegaViewConfig,onWarning:this.onWarn.bind(this),onError:this.onError.bind(this)});this._kibanaMap.addLayer(vegaMapLayer);this._addDestroyHandler(function(){_this2._kibanaMap.removeLayer(vegaMapLayer);baseMapOpts&&_this2._kibanaMap.setBaseLayer(null);_this2._kibanaMap.destroy()});vegaView=vegaMapLayer.getVegaView();this.setDebugValues(vegaView,this._parser.spec,this._parser.vlspec);_context.next=27;return this.setView(vegaView);case 27:case"end":return _context.stop()}},_callee,this)}));function _initViewCustomizations(){return _ref.apply(this,arguments)}return _initViewCustomizations}()}]);return VegaMapView}(_vega_base_view.VegaBaseView)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VegaMapLayer=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _leaflet=__webpack_require__(261);var _leaflet2=_interopRequireDefault(_leaflet);__webpack_require__(4782);var _kibana_map_layer=__webpack_require__(922);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.VegaMapLayer=function(_KibanaMapLayer){_inherits(VegaMapLayer,_KibanaMapLayer);function VegaMapLayer(spec,options){_classCallCheck(this,VegaMapLayer);var _this=_possibleConstructorReturn(this,(VegaMapLayer.__proto__||Object.getPrototypeOf(VegaMapLayer)).call(this));_this._attribution=options.attribution;delete options.attribution;_this._leafletLayer=_leaflet2.default.vega(spec,options);return _this}_createClass(VegaMapLayer,[{key:"getVegaView",value:function getVegaView(){return this._leafletLayer._view}},{key:"getVegaSpec",value:function getVegaSpec(){return this._leafletLayer._spec}}]);return VegaMapLayer}(_kibana_map_layer.KibanaMapLayer)},,function(module,exports){},,function(module,exports){},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _jsonStringifyPrettyCompact=__webpack_require__(1579);var _jsonStringifyPrettyCompact2=_interopRequireDefault(_jsonStringifyPrettyCompact);var _hjson=__webpack_require__(1577);var _hjson2=_interopRequireDefault(_hjson);var _notify=__webpack_require__(9);var _modules=__webpack_require__(2);__webpack_require__(834);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var _module=_modules.uiModules.get("kibana/vega",["kibana"]);_module.controller("VegaEditorController",function($scope){var notify=new _notify.Notifier({location:"Vega"});return new(function(){function VegaEditorController(){var _this=this;_classCallCheck(this,VegaEditorController);$scope.aceLoaded=function(editor){editor.$blockScrolling=Infinity;var session=editor.getSession();session.setTabSize(2);session.setUseSoftTabs(true);_this.aceEditor=editor};$scope.formatJson=function(event){_this._format(event,_jsonStringifyPrettyCompact2.default,{maxLength:_this._getCodeWidth()})};$scope.formatHJson=function(event){_this._format(event,_hjson2.default.stringify,{condense:_this._getCodeWidth(),bracesSameLine:true,keepWsc:true})}}_createClass(VegaEditorController,[{key:"_getCodeWidth",value:function _getCodeWidth(){return this.aceEditor.getSession().getWrapLimit()}},{key:"_format",value:function _format(event,stringify,opts){var _this2=this;event.preventDefault();var newSpec=void 0;try{var spec=_hjson2.default.parse(this.aceEditor.getSession().doc.getValue(),{legacyRoot:false,keepWsc:true});newSpec=stringify(spec,opts)}catch(err){notify.error(err);return}$scope.$$postDigest(function(){_this2.aceEditor.getSession().doc.setValue(newSpec)})}}]);return VegaEditorController}())})},function(module,exports){module.exports='<div class="vegaEditor" ng-controller="VegaEditorController">\n  <div\n    kbn-ui-ace-keyboard-mode\n    ui-ace="{\n      onLoad: aceLoaded,\n      useWrapMode: true,\n      advanced: {\n        highlightActiveLine: false\n      },\n      rendererOptions: {\n        showPrintMargin: false\n      },\n      mode: \'hjson\'\n    }"\n    id="vegaAceEditor"\n    ng-model="editorState.params.spec"\n    data-test-subj="vega-editor"\n  ></div>\n\n  <div id="editor_actions">\n    <span dropdown>\n      <button\n        id="vegaHelp"\n        class="editor_action"\n        dropdown-toggle\n        aria-label="Vega help"\n      >\n        <span class="kuiIcon fa-question-circle"></span>\n      </button>\n      <ul\n        class="dropdown-menu"\n        role="menu"\n        aria-labelledby="vegaHelp"\n      >\n        <li role="menuitem">\n          <a target="_blank" rel="noopener noreferrer" href="https://www.elastic.co/guide/en/kibana/master/vega-graph.html">\n            Kibana Vega Help\n          </a>\n        </li>\n        <li role="menuitem">\n          <a target="_blank" rel="noopener noreferrer" href="https://vega.github.io/vega-lite/docs/">\n            Vega-Lite Documentation\n          </a>\n        </li>\n        <li role="menuitem">\n          <a target="_blank" rel="noopener noreferrer" href="https://vega.github.io/vega/docs/">\n            Vega Documentation\n          </a>\n        </li>\n      </ul>\n    </span>\n    <span dropdown>\n      <button\n        id="vegaOptions"\n        class="editor_action"\n        dropdown-toggle\n        aria-label="Vega editor options"\n      >\n        <span class="kuiIcon fa-wrench"></span>\n      </button>\n      <ul\n        class="dropdown-menu"\n        role="menu"\n        aria-labelledby="vegaOptions"\n      >\n        <li role="menuitem">\n          <button ng-click="formatHJson($event)">Reformat as HJSON</button>\n        </li>\n        <li role="menuitem">\n          <button ng-click="formatJson($event)">Reformat as JSON, delete comments</button>\n        </li>\n      </ul>\n    </span>\n  </div>\n\n</div>\n'},function(module,exports){module.exports='{\n/*\n\nWelcome to Vega visualizations.  Here you can design your own dataviz from scratch using a declarative language called Vega, or its simpler form Vega-Lite.  In Vega, you have the full control of what data is loaded, even from multiple sources, how that data is transformed, and what visual elements are used to show it.  Use help icon to view Vega examples, tutorials, and other docs.  Use the wrench icon to reformat this text, or to remove comments.\n\nThis example graph shows the document count in all indexes in the current time range.  You might need to adjust the time filter in the upper right corner.\n*/\n\n  $schema: https://vega.github.io/schema/vega-lite/v2.json\n  title: Event counts from all indexes\n\n  // Define the data source\n  data: {\n    url: {\n/*\nAn object instead of a string for the "url" param is treated as an Elasticsearch query. Anything inside this object is not part of the Vega language, but only understood by Kibana and Elasticsearch server. This query counts the number of documents per time interval, assuming you have a @timestamp field in your data.\n\nKibana has a special handling for the fields surrounded by "%".  They are processed before the the query is sent to Elasticsearch. This way the query becomes context aware, and can use the time range and the dashboard filters.\n*/\n\n      // Apply dashboard context filters when set\n      %context%: true\n      // Filter the time picker (upper right corner) with this field\n      %timefield%: @timestamp\n\n/*\nSee .search() documentation for :  https://www.elastic.co/guide/en/elasticsearch/client/javascript-api/current/api-reference.html#api-search\n*/\n\n      // Which index to search\n      index: _all\n      // Aggregate data by the time field into time buckets, counting the number of documents in each bucket.\n      body: {\n        aggs: {\n          time_buckets: {\n            date_histogram: {\n              // Use date histogram aggregation on @timestamp field\n              field: @timestamp\n              // The interval value will depend on the daterange picker (true), or use an integer to set an approximate bucket count\n              interval: {%autointerval%: true}\n              // Make sure we get an entire range, even if it has no data\n              extended_bounds: {\n                // Use the current time range\'s start and end\n                min: {%timefilter%: "min"}\n                max: {%timefilter%: "max"}\n              }\n              // Use this for linear (e.g. line, area) graphs.  Without it, empty buckets will not show up\n              min_doc_count: 0\n            }\n          }\n        }\n        // Speed up the response by only including aggregation results\n        size: 0\n      }\n    }\n/*\nElasticsearch will return results in this format:\n\naggregations: {\n  time_buckets: {\n    buckets: [\n      {\n        key_as_string: 2015-11-30T22:00:00.000Z\n        key: 1448920800000\n        doc_count: 0\n      },\n      {\n        key_as_string: 2015-11-30T23:00:00.000Z\n        key: 1448924400000\n        doc_count: 0\n      }\n      ...\n    ]\n  }\n}\n\nFor our graph, we only need the list of bucket values.  Use the format.property to discard everything else.\n*/\n    format: {property: "aggregations.time_buckets.buckets"}\n  }\n\n  // "mark" is the graphics element used to show our data.  Other mark values are: area, bar, circle, line, point, rect, rule, square, text, and tick.  See https://vega.github.io/vega-lite/docs/mark.html\n  mark: line\n\n  // "encoding" tells the "mark" what data to use and in what way.  See https://vega.github.io/vega-lite/docs/encoding.html\n  encoding: {\n    x: {\n      // The "key" value is the timestamp in milliseconds.  Use it for X axis.\n      field: key\n      type: temporal\n      axis: {title: false} // Customize X axis format\n    }\n    y: {\n      // The "doc_count" is the count per bucket.  Use it for Y axis.\n      field: doc_count\n      type: quantitative\n      axis: {title: "Document count"}\n    }\n  }\n}\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BuildHierarchicalDataProvider=BuildHierarchicalDataProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _extract_buckets=__webpack_require__(928);var _create_raw_data=__webpack_require__(4790);var _array_to_linked_list=__webpack_require__(4791);var _agg_config_result=__webpack_require__(421);var _agg_config_result2=_interopRequireDefault(_agg_config_result);var _build_split=__webpack_require__(4792);var _hierarchical_tooltip_formatter=__webpack_require__(4795);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function BuildHierarchicalDataProvider(Private,Notifier){var buildSplit=Private(_build_split.AggResponseHierarchicalBuildSplitProvider);var tooltipFormatter=Private(_hierarchical_tooltip_formatter.HierarchicalTooltipFormatterProvider);var notify=new Notifier({location:"Pie chart response converter"});return function(vis,resp){var buckets=vis.getAggConfig().bySchemaGroup.buckets;var metric=vis.getAggConfig().bySchemaGroup.metrics[0];buckets=(0,_array_to_linked_list.arrayToLinkedList)(buckets);var raw=(0,_create_raw_data.createRawData)(vis,resp);if(!buckets){var label=raw.columns[0].label;var value=resp.aggregations&&resp.aggregations[metric.id]&&resp.aggregations[metric.id].value||resp.hits.total;return{hits:resp.hits.total,raw:raw,names:[label],tooltipFormatter:tooltipFormatter(raw.columns),slices:{children:[{name:label,size:value}]}}}var firstAgg=buckets[0];var aggData=resp.aggregations?resp.aggregations[firstAgg.id]:null;firstAgg._next||"split"!==firstAgg.schema.name||notify.error("Splitting charts without splitting slices is not supported. Pretending that we are just splitting slices.");if(!firstAgg._next||"segment"===firstAgg.schema.name){var split=buildSplit(firstAgg,metric,aggData);split.hits=resp.hits.total;split.raw=raw;split.tooltipFormatter=tooltipFormatter(raw.columns);return split}var rows=_lodash2.default.map((0,_extract_buckets.extractBuckets)(aggData,firstAgg),function(bucket){var agg=firstAgg._next;var split=buildSplit(agg,metric,bucket[agg.id]);split.label=firstAgg.fieldFormatter()(agg.getKey(bucket));var displayName=firstAgg.getFieldDisplayName();_lodash2.default.isEmpty(displayName)||(split.label+=": "+displayName);split.tooltipFormatter=tooltipFormatter(raw.columns);var aggConfigResult=new _agg_config_result2.default(firstAgg,null,null,firstAgg.getKey(bucket),bucket.filters);split.split={aggConfig:firstAgg,aggConfigResult:aggConfigResult,key:bucket.key};_lodash2.default.each(split.slices.children,function(child){child.aggConfigResult.$parent=aggConfigResult});return split});var result={hits:resp.hits.total,raw:raw};firstAgg.params.row?result.rows=rows:result.columns=rows;return result}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createRawData=createRawData;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _extract_buckets=__webpack_require__(928);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function createRawData(vis,resp){var results={rows:[]};var metrics=vis.getAggConfig().bySchemaGroup.metrics;var buckets=vis.getAggConfig().bySchemaGroup.buckets;var aggs=[];buckets?_lodash2.default.each(buckets,function(bucket){aggs.push(bucket);aggs.push(metrics)}):aggs.push(metrics);results.columns=(0,_lodash2.default)(aggs).flattenDeep().map(function(agg){return{categoryName:agg.schema.name,id:agg.id,aggConfig:agg,aggType:agg.type,field:agg.params.field,label:agg.makeLabel()}}).value();if(!buckets){var value=resp.aggregations&&resp.aggregations[metrics[0].id]&&resp.aggregations[metrics[0].id].value||resp.hits.total;results.rows.push([value]);return results}function walkBuckets(agg,data,record){if(!data)return;Array.isArray(record)||(record=[]);_lodash2.default.each((0,_extract_buckets.extractBuckets)(data[agg.id],agg),function(bucket){var _record=_lodash2.default.flattenDeep([record,bucket.key]);_lodash2.default.each(metrics,function(metric){var value=bucket.doc_count;bucket[metric.id]&&!_lodash2.default.isUndefined(bucket[metric.id].value)&&(value=bucket[metric.id].value);_record.push(value)});if(agg._next){var nextBucket=bucket[agg._next.id];nextBucket&&nextBucket.buckets&&walkBuckets(agg._next,bucket,_record)}else results.rows.push(_record)})}walkBuckets(buckets[0],resp.aggregations);return results}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.arrayToLinkedList=arrayToLinkedList;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function arrayToLinkedList(buckets){var previous=void 0;_lodash2.default.each(buckets,function(bucket){if(previous){bucket._previous=previous;previous._next=bucket}previous=bucket});return buckets}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AggResponseHierarchicalBuildSplitProvider=AggResponseHierarchicalBuildSplitProvider;var _collect_keys=__webpack_require__(4793);var _transform_aggregation=__webpack_require__(4794);function AggResponseHierarchicalBuildSplitProvider(Private){var transformer=Private(_transform_aggregation.HierarchicalTransformAggregationProvider);return function(agg,metric,aggData){var split={label:"",slices:{children:[]}};split.slices.children=transformer(agg,metric,aggData);split.names=(0,_collect_keys.collectKeys)(split.slices.children);return split}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.collectKeys=collectKeys;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function collectKeys(children){var nextChildren=_lodash2.default.pluck(children,"children");var keys=_lodash2.default.pluck(children,"name");return(0,_lodash2.default)(nextChildren).map(collectKeys).flattenDeep().union(keys).value()}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.HierarchicalTransformAggregationProvider=HierarchicalTransformAggregationProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _extract_buckets=__webpack_require__(928);var _agg_config_result=__webpack_require__(421);var _agg_config_result2=_interopRequireDefault(_agg_config_result);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function HierarchicalTransformAggregationProvider(){return function transformAggregation(agg,metric,aggData,parent){return _lodash2.default.map((0,_extract_buckets.extractBuckets)(aggData,agg),function(bucket){var aggConfigResult=new _agg_config_result2.default(agg,parent&&parent.aggConfigResult,metric.getValue(bucket),agg.getKey(bucket),bucket.filters);var branch={name:agg.fieldFormatter()(bucket.key),size:aggConfigResult.value,aggConfig:agg,aggConfigResult:aggConfigResult};parent&&(branch.parent=parent);if(agg._next){var nextBucket=bucket[agg._next.id];nextBucket&&nextBucket.buckets&&(branch.children=transformAggregation(agg._next,metric,nextBucket,branch))}return branch})}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.HierarchicalTooltipFormatterProvider=HierarchicalTooltipFormatterProvider;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _jquery=__webpack_require__(13);var _jquery2=_interopRequireDefault(_jquery);var _collect_branch=__webpack_require__(4796);var _collect_branch2=_interopRequireDefault(_collect_branch);var _numeral=__webpack_require__(552);var _numeral2=_interopRequireDefault(_numeral);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function HierarchicalTooltipFormatterProvider($rootScope,$compile,$sce){var $tooltip=(0,_jquery2.default)(__webpack_require__(4797));var $tooltipScope=$rootScope.$new();$compile($tooltip)($tooltipScope);return function(columns){return function(event){var datum=event.datum;$tooltipScope.rows=(0,_collect_branch2.default)(datum);var metricCol=$tooltipScope.metricCol=_lodash2.default.find(columns,{categoryName:"metric"});_lodash2.default.forEachRight($tooltipScope.rows,function(row){row.spacer=$sce.trustAsHtml(_lodash2.default.repeat("&nbsp;",row.depth));var percent=void 0;null!=row.item.percentOfGroup&&(percent=row.item.percentOfGroup);row.metric=metricCol.aggConfig.fieldFormatter()(row.metric);null!=percent&&(row.metric+=" ("+(0,_numeral2.default)(percent).format("0.[00]%")+")");return row});$tooltipScope.$apply();return $tooltip[0].outerHTML}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(leaf){function walk(item,memo){var depth=item.depth-1;var aggConfig=item.aggConfig;var field=aggConfig&&aggConfig.makeLabel()||aggConfig&&aggConfig.label||"level "+item.depth;memo.unshift({aggConfig:aggConfig,depth:depth,field:field,bucket:item.name,metric:item.size,item:item});return item.parent&&item.parent.parent?walk(item.parent,memo):memo}return walk(leaf,[])};module.exports=exports["default"]},function(module,exports){module.exports='<table>\n  <thead>\n    <tr class="tooltip-label">\n      <th scope="col">field</th>\n      <th scope="col">value</th>\n      <th scope="col">{{metricCol.label}}</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="tooltip-value" ng-repeat="row in rows track by $index">\n      <td><span ng-bind-html="row.spacer"></span>{{row.field}}</td>\n      <td class="row-bucket">{{row.bucket}}</td>\n      <td>{{row.metric}}</td>\n    </tr>\n  </tbody>\n</table>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.noneResponseHandler=void 0;var _vis_response_handlers=__webpack_require__(655);var noneResponseHandler=function noneResponseHandler(){return{name:"none",handler:function handler(vis,response){return new Promise(function(resolve){resolve(response)})}}};_vis_response_handlers.VisResponseHandlersRegistryProvider.register(noneResponseHandler);exports.noneResponseHandler=noneResponseHandler},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TabifyResponseHandlerProvider=void 0;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _agg_response=__webpack_require__(667);var _vis_response_handlers=__webpack_require__(655);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var TabifyResponseHandlerProvider=function TabifyResponseHandlerProvider(Private){var aggResponse=Private(_agg_response.AggResponseIndexProvider);return{name:"tabify",handler:function handler(vis,response){return new Promise(function(resolve){var tableGroup=aggResponse.tabify(vis.getAggConfig(),response,{canSplit:true,asAggConfigResults:_lodash2.default.get(vis,"type.responseHandlerConfig.asAggConfigResults",false),isHierarchical:vis.isHierarchical()});resolve(tableGroup)})}}};_vis_response_handlers.VisResponseHandlersRegistryProvider.register(TabifyResponseHandlerProvider);exports.TabifyResponseHandlerProvider=TabifyResponseHandlerProvider},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CourierRequestHandlerProvider=void 0;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _vis_request_handlers=__webpack_require__(907);var _calculate_object_hash=__webpack_require__(1527);var _courier_inspector_utils=__webpack_require__(1323);var _tabify=__webpack_require__(925);var _adapters=__webpack_require__(609);var _get_time=__webpack_require__(809);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}var CourierRequestHandlerProvider=function CourierRequestHandlerProvider(){var buildTabularInspectorData=(_ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(vis,searchSource,aggConfigs){var table,columns,rows;return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:table=(0,_tabify.tabifyAggResponse)(aggConfigs,searchSource.finalResponse,{canSplit:false,asAggConfigResults:false,partialRows:true,isHierarchical:vis.isHierarchical()});columns=table.columns.map(function(col,index){var field=col.aggConfig.getField();var isCellContentFilterable=col.aggConfig.isFilterable()&&(!field||field.filterable);return{name:col.title,field:"col"+index,filter:isCellContentFilterable&&function(value){var filter=col.aggConfig.createFilter(value.raw);vis.API.queryFilter.addFilters(filter)},filterOut:isCellContentFilterable&&function(value){var filter=col.aggConfig.createFilter(value.raw);filter.meta=filter.meta||{};filter.meta.negate=true;vis.API.queryFilter.addFilters(filter)}}});rows=table.rows.map(function(row){return row.reduce(function(prev,cur,index){var fieldFormatter=table.columns[index].aggConfig.fieldFormatter("text");prev["col"+index]=new _adapters.FormattedData(cur,fieldFormatter(cur));return prev},{})});return _context.abrupt("return",{columns:columns,rows:rows});case 4:case"end":return _context.stop()}},_callee,this)})),function buildTabularInspectorData(_x,_x2,_x3){return _ref.apply(this,arguments)});var _ref;return{name:"courier",handler:function handler(vis,_ref2){var _this=this;var searchSource=_ref2.searchSource,aggs=_ref2.aggs,timeRange=_ref2.timeRange,query=_ref2.query,filters=_ref2.filters,forceFetch=_ref2.forceFetch;var timeFilterSearchSource=searchSource.createChild({callParentStartHandlers:true});var requestSearchSource=timeFilterSearchSource.createChild({callParentStartHandlers:true});Object.defineProperty(requestSearchSource,"history",{get:function get(){return searchSource.history},set:function set(history){return searchSource.history=history}});requestSearchSource.setField("aggs",function(){return aggs.toDsl()});requestSearchSource.onRequestStart(function(searchSource,searchRequest){return aggs.onSearchRequestStart(searchSource,searchRequest)});timeRange&&timeFilterSearchSource.setField("filter",function(){return(0,_get_time.getTime)(searchSource.getField("index"),timeRange)});requestSearchSource.setField("filter",filters);requestSearchSource.setField("query",query);var shouldQuery=function shouldQuery(requestBodyHash){if(!searchSource.lastQuery||forceFetch)return true;if(searchSource.lastQuery!==requestBodyHash)return true;return false};return new Promise(function(resolve,reject){return requestSearchSource.getSearchRequestBody().then(function(q){var queryHash=(0,_calculate_object_hash.calculateObjectHash)(q);if(shouldQuery(queryHash)){var lastAggConfig=vis.getAggConfig();vis.API.inspectorAdapters.requests.reset();var request=vis.API.inspectorAdapters.requests.start("Data",{description:"This request queries Elasticsearch to fetch the data for the visualization."});request.stats((0,_courier_inspector_utils.getRequestInspectorStats)(requestSearchSource));requestSearchSource.fetch().then(function(resp){searchSource.lastQuery=queryHash;request.stats((0,_courier_inspector_utils.getResponseInspectorStats)(searchSource,resp)).ok({json:resp});searchSource.rawResponse=resp;return _lodash2.default.cloneDeep(resp)}).then((_ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(resp){var _iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,agg;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_iteratorNormalCompletion=true;_didIteratorError=false;_iteratorError=void 0;_context2.prev=3;_iterator=aggs[Symbol.iterator]();case 5:if(_iteratorNormalCompletion=(_step=_iterator.next()).done){_context2.next=14;break}agg=_step.value;if(!_lodash2.default.has(agg,"type.postFlightRequest")){_context2.next=11;break}_context2.next=10;return agg.type.postFlightRequest(resp,aggs,agg,requestSearchSource,vis.API.inspectorAdapters);case 10:resp=_context2.sent;case 11:_iteratorNormalCompletion=true;_context2.next=5;break;case 14:_context2.next=20;break;case 16:_context2.prev=16;_context2.t0=_context2["catch"](3);_didIteratorError=true;_iteratorError=_context2.t0;case 20:_context2.prev=20;_context2.prev=21;!_iteratorNormalCompletion&&_iterator.return&&_iterator.return();case 23:_context2.prev=23;if(!_didIteratorError){_context2.next=26;break}throw _iteratorError;case 26:return _context2.finish(23);case 27:return _context2.finish(20);case 28:searchSource.finalResponse=resp;vis.API.inspectorAdapters.data.setTabularLoader(function(){return buildTabularInspectorData(vis,searchSource,lastAggConfig)},{returnsFormattedValues:true});resolve(resp);case 31:case"end":return _context2.stop()}},_callee2,_this,[[3,16,20,28],[21,,23,27]])})),function(_x4){return _ref3.apply(this,arguments)})).catch(function(e){return reject(e)});requestSearchSource.getSearchRequestBody().then(function(req){request.json(req)})}else resolve(searchSource.finalResponse);var _ref3})})}}};_vis_request_handlers.VisRequestHandlersRegistryProvider.register(CourierRequestHandlerProvider);exports.CourierRequestHandlerProvider=CourierRequestHandlerProvider},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.noneRequestHandlerProvider=void 0;var _vis_request_handlers=__webpack_require__(907);var noneRequestHandlerProvider=function noneRequestHandlerProvider(){return{name:"none",handler:function handler(){return new Promise(function(resolve){resolve()})}}};_vis_request_handlers.VisRequestHandlersRegistryProvider.register(noneRequestHandlerProvider);exports.noneRequestHandlerProvider=noneRequestHandlerProvider},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.defaultEditor=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();__webpack_require__(1585);__webpack_require__(1588);__webpack_require__(4818);__webpack_require__(4819);__webpack_require__(4820);var _jquery=__webpack_require__(13);var _jquery2=_interopRequireDefault(_jquery);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _angular=__webpack_require__(16);var _angular2=_interopRequireDefault(_angular);var _default=__webpack_require__(4821);var _default2=_interopRequireDefault(_default);var _eui=__webpack_require__(3);var _editor_size=__webpack_require__(645);var _vis_editor_types=__webpack_require__(1589);var _visualize_loader=__webpack_require__(906);var _update_editor_state=__webpack_require__(4822);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var defaultEditor=function defaultEditor($rootScope,$compile){var _class,_temp;return _temp=_class=function(){function DefaultEditor(el,savedObj){_classCallCheck(this,DefaultEditor);this.el=(0,_jquery2.default)(el);this.savedObj=savedObj;this.vis=savedObj.vis;!this.vis.type.editorConfig.optionTabs&&this.vis.type.editorConfig.optionsTemplate&&(this.vis.type.editorConfig.optionTabs=[{name:"options",title:"Options",editor:this.vis.type.editorConfig.optionsTemplate}])}_createClass(DefaultEditor,[{key:"render",value:function render(_ref){var _this=this;var uiState=_ref.uiState,timeRange=_ref.timeRange,appState=_ref.appState;var $scope=void 0;var updateScope=function updateScope(){$scope.vis=_this.vis;$scope.uiState=uiState};return new Promise(function(resolve){if(_this.$scope){$scope=_this.$scope;updateScope()}else{_this.$scope=$scope=$rootScope.$new();updateScope();$scope.state=$scope.vis.copyCurrentState(true);$scope.oldState=$scope.vis.getSerializableState($scope.state);$scope.toggleSidebar=function(){$scope.$broadcast("render")};_this.el.one("renderComplete",resolve);$scope.stageEditableVis=function(){$scope.oldState=$scope.vis.getSerializableState($scope.state);$scope.vis.setCurrentState($scope.state);$scope.vis.updateState();$scope.vis.dirty=false};$scope.resetEditableVis=function(){$scope.state=$scope.vis.copyCurrentState(true);$scope.vis.dirty=false};$scope.autoApplyEnabled=false;if($scope.vis.type.editorConfig.enableAutoApply){$scope.toggleAutoApply=function(){$scope.autoApplyEnabled=!$scope.autoApplyEnabled};$scope.$watch("vis.dirty",_lodash2.default.debounce(function(){if(!$scope.autoApplyEnabled||!$scope.vis.dirty)return;$scope.stageEditableVis()},800))}$scope.submitEditorWithKeyboard=function(event){if(event.ctrlKey&&event.keyCode===_eui.keyCodes.ENTER){event.preventDefault();event.stopPropagation();$scope.stageEditableVis()}};$scope.getSidebarClass=function(){if($scope.vis.type.editorConfig.defaultSize===_editor_size.DefaultEditorSize.SMALL)return"collapsible-sidebar--small";if($scope.vis.type.editorConfig.defaultSize===_editor_size.DefaultEditorSize.MEDIUM)return"collapsible-sidebar--medium";if($scope.vis.type.editorConfig.defaultSize===_editor_size.DefaultEditorSize.LARGE)return"collapsible-sidebar--large"};var lockDirty=false;$scope.$watch(function(){return $scope.vis.getSerializableState($scope.state)},function(newState){lockDirty?lockDirty=false:$scope.vis.dirty=!_angular2.default.equals(newState,$scope.oldState);$scope.responseValueAggs=null;try{$scope.responseValueAggs=$scope.state.aggs.getResponseAggs().filter(function(agg){return"metrics"===_lodash2.default.get(agg,"schema.group")})}catch(e){}},true);$scope.$watch(function(){return $scope.vis.getCurrentState(false)},function(newState){(0,_update_editor_state.updateEditorStateWithChanges)(newState,$scope.oldState,$scope.state)&&(lockDirty=true)},true);var template=(0,_jquery2.default)(_default2.default);_this.el.html(template);$compile(template)($scope)}if(_this._handler)_this._handler.update({timeRange:timeRange});else{var visualizationEl=_this.el.find(".vis-editor-canvas")[0];(0,_visualize_loader.getVisualizeLoader)().then(function(loader){if(!visualizationEl)return;_this._loader=loader;_this._handler=_this._loader.embedVisualizationWithSavedObject(visualizationEl,_this.savedObj,{uiState:uiState,listenOnChange:false,timeRange:timeRange,appState:appState})})}})}},{key:"resize",value:function resize(){}},{key:"destroy",value:function destroy(){if(this.$scope){this.$scope.$destroy();this.$scope=null}this._handler&&this._handler.destroy()}}]);return DefaultEditor}(),_class.key="default",_temp};_vis_editor_types.VisEditorTypesRegistryProvider.register(defaultEditor);exports.defaultEditor=defaultEditor},function(module,exports,__webpack_require__){"use strict";var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);__webpack_require__(4804);__webpack_require__(1587);__webpack_require__(4814);var _modules=__webpack_require__(2);var _agg_group=__webpack_require__(4815);var _agg_group2=_interopRequireDefault(_agg_group);var _collection=__webpack_require__(410);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("app/visualize").directive("visEditorAggGroup",function(){return{restrict:"E",template:_agg_group2.default,scope:true,link:function link($scope,$el,attr){$scope.groupName=attr.groupName;$scope.$bind("group",'state.aggs.bySchemaGroup["'+$scope.groupName+'"]');$scope.$bind("schemas",'vis.type.schemas["'+$scope.groupName+'"]');$scope.$watchMulti(["schemas","[]group"],function(){var stats=$scope.stats={min:0,max:0,count:$scope.group?$scope.group.length:0};if(!$scope.schemas)return;$scope.schemas.forEach(function(schema){stats.min+=schema.min;stats.max+=schema.max;stats.deprecate=schema.deprecate});$scope.availableSchema=$scope.schemas.filter(function(schema){var count=_lodash2.default.where($scope.group,{schema:schema}).length;if(count<schema.max)return true})});function reorderFinished(){var indexOffset=$scope.state.aggs.indexOf($scope.group[0]);_lodash2.default.forEach($scope.group,function(agg,index){(0,_collection.move)($scope.state.aggs,agg,indexOffset+index)})}$scope.$on("agg-reorder",reorderFinished);$scope.$on("agg-drag-start",function(){return $scope.dragging=true});$scope.$on("agg-drag-end",function(){$scope.dragging=false;reorderFinished()})}}})},function(module,exports,__webpack_require__){"use strict";__webpack_require__(4805);__webpack_require__(1587);var _keyboard_move=__webpack_require__(4812);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _modules=__webpack_require__(2);var _agg=__webpack_require__(4813);var _agg2=_interopRequireDefault(_agg);var _collection=__webpack_require__(410);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("app/visualize").directive("visEditorAgg",function(){return{restrict:"A",template:_agg2.default,require:"form",link:function link($scope,$el,attrs,kbnForm){$scope.editorOpen=!!$scope.agg.brandNew;$scope.$watch("editorOpen",function(open){open||kbnForm.$setTouched()});$scope.$watchMulti(["$index","group.length"],function(){$scope.aggIsTooLow=calcAggIsTooLow()});$scope.describe=function(){if(!$scope.agg.type.makeLabel)return"";var label=$scope.agg.type.makeLabel($scope.agg);return label||""};$scope.$on("drag-start",function(){$scope.editorWasOpen=$scope.editorOpen;$scope.editorOpen=false;$scope.$emit("agg-drag-start",$scope.agg)});$scope.$on("drag-end",function(){$scope.editorOpen=$scope.editorWasOpen;$scope.$emit("agg-drag-end",$scope.agg)});$scope.onPriorityReorder=function(direction){var positionOffset=direction===_keyboard_move.Direction.down?1:-1;var currentPosition=$scope.group.indexOf($scope.agg);var newPosition=Math.max(0,Math.min(currentPosition+positionOffset,$scope.group.length-1));(0,_collection.move)($scope.group,currentPosition,newPosition);$scope.$emit("agg-reorder")};$scope.remove=function(agg){var aggs=$scope.state.aggs;var index=aggs.indexOf(agg);if(-1===index)return;aggs.splice(index,1)};$scope.canRemove=function(aggregation){var metricCount=_lodash2.default.reduce($scope.group,function(count,agg){return agg.schema.name===aggregation.schema.name?++count:count},0);return metricCount>aggregation.schema.min};function calcAggIsTooLow(){if(!$scope.agg.schema.mustBeFirst)return false;var firstDifferentSchema=_lodash2.default.findIndex($scope.group,function(agg){return agg.schema!==$scope.agg.schema});if(-1===firstDifferentSchema)return false;return $scope.$index>firstDifferentSchema}}}})},function(module,exports,__webpack_require__){"use strict";var _jquery=__webpack_require__(13);var _jquery2=_interopRequireDefault(_jquery);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _agg_select=__webpack_require__(4806);var _agg_select2=_interopRequireDefault(_agg_select);var _advanced_toggle=__webpack_require__(4807);var _advanced_toggle2=_interopRequireDefault(_advanced_toggle);__webpack_require__(1404);__webpack_require__(4808);var _agg_types=__webpack_require__(364);var _modules=__webpack_require__(2);var _documentation_links=__webpack_require__(483);var _agg_params=__webpack_require__(4809);var _agg_params2=_interopRequireDefault(_agg_params);var _filter=__webpack_require__(1586);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("app/visualize").directive("visEditorAggParams",function($compile){return{restrict:"E",template:_agg_params2.default,scope:true,link:function link($scope,$el,attr){$scope.$bind("agg",attr.agg);$scope.$bind("groupName",attr.groupName);$scope.$bind("indexPattern",attr.indexPattern);$scope.aggTypeOptions=_filter.aggTypeFilters.filter(_agg_types.aggTypes.byType[$scope.groupName],$scope.indexPattern,$scope.agg);$scope.advancedToggled=false;$scope.$watch("agg.type",updateAggParamEditor);addSchemaEditor();addAggSelector();function addSchemaEditor(){var $schemaEditor=(0,_jquery2.default)("<div>").addClass("schemaEditors").appendTo($el);if($scope.agg.schema.editor){$schemaEditor.append($scope.agg.schema.editor);$compile($schemaEditor)($scope.$new())}}function addAggSelector(){var $aggSelect=(0,_jquery2.default)(_agg_select2.default).appendTo($el);$compile($aggSelect)($scope)}var $aggParamEditors=void 0;var $aggParamEditorsScope=void 0;function updateAggParamEditor(){$scope.aggHelpLink=null;_lodash2.default.has($scope,"agg.type.name")&&($scope.aggHelpLink=_lodash2.default.get(_documentation_links.documentationLinks,["aggs",$scope.agg.type.name]));if($aggParamEditors){$aggParamEditors.remove();$aggParamEditors=null}if($aggParamEditorsScope){$aggParamEditorsScope.$destroy();$aggParamEditorsScope=null}if(!$scope.agg||!$scope.agg.type)return;$aggParamEditorsScope=$scope.$new();$aggParamEditorsScope.indexedFields=$scope.agg.getFieldOptions();var aggParamHTML={basic:[],advanced:[]};$scope.agg.type.params.forEach(function(param,i){var aggParam=void 0;var fields=void 0;if($scope.agg.schema.hideCustomLabel&&"customLabel"===param.name)return;"field"===param.name?fields=$aggParamEditorsScope.indexedFields:"field"===param.type&&(fields=$aggParamEditorsScope[param.name+"Options"]=param.getFieldOptions($scope.agg));if(fields){var hasIndexedFields=fields.length>0;var isExtraParam=i>0;if(!hasIndexedFields&&isExtraParam)return}var type="basic";param.advanced&&(type="advanced");(aggParam=getAggParamHTML(param,i))&&aggParamHTML[type].push(aggParam)});var paramEditors=aggParamHTML.basic;if(aggParamHTML.advanced.length){paramEditors.push((0,_jquery2.default)(_advanced_toggle2.default).get(0));paramEditors=paramEditors.concat(aggParamHTML.advanced)}$aggParamEditors=(0,_jquery2.default)(paramEditors).appendTo($el);$compile($aggParamEditors)($aggParamEditorsScope)}function getAggParamHTML(param,idx){if(!param.editor)return;var attrs={"agg-param":"agg.type.params["+idx+"]"};param.advanced&&(attrs["ng-show"]="advancedToggled");return(0,_jquery2.default)("<vis-agg-param-editor>").attr(attrs).append(param.editor).get(0)}}}})},function(module,exports){module.exports='<div class="form-group">\n  <div>\n    <label ng-if="$index < 1 || groupName !== \'buckets\'" class="agg-select-label">Aggregation</label>\n    <label ng-if="$index >= 1 && groupName === \'buckets\'" class="agg-select-label">Sub Aggregation</label>\n    <a\n      ng-if="aggHelpLink"\n      href="{{aggHelpLink}}"\n      class="agg-select-help"\n      target="_blank"\n      rel="noopener noreferrer"\n    >\n      {{agg.type.title}} help\n    </a>\n  </div>\n  <div class="euiSpacer euiSpacer--s"></div>\n  <ui-select\n    required\n    name="agg"\n    class="vis-editor-field-ui-select agg-select"\n    data-test-subj="visEditorAggSelect"\n    ng-model="agg.type"\n  >\n    <ui-select-match placeholder="Select an aggregation">\n      {{$select.selected.title}}\n    </ui-select-match>\n    <ui-select-choices\n      repeat="agg in aggTypeOptions\n        | filter: { title: $select.search }\n        | orderBy:\'title\'\n        | sortPrefixFirst:$select.search:\'title\'"\n      group-by="\'subtype\'"\n    >\n      <div data-test-subj="{{agg.title}}" ng-bind-html="agg.title | highlight: $select.search"></div>\n    </ui-select-choices>\n  </ui-select>\n</div>\n'},function(module,exports){module.exports='<div class="vis-editor-agg-editor-advanced-toggle">\n  <a ng-click="advancedToggled = !advancedToggled">\n    <i aria-hidden="true" class="fa fa-caret-down" ng-class="{\'fa-caret-down\': advancedToggled, \'fa-caret-left\': !advancedToggled}"></i>\n    Advanced\n  </a>\n</div>'},function(module,exports,__webpack_require__){"use strict";var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _modules=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("app/visualize").directive("visAggParamEditor",function(config){return{restrict:"E",scope:true,template:function template($el){return $el.html()},link:{pre:function pre($scope,$el,attr){$scope.$bind("aggParam",attr.aggParam)},post:function post($scope){$scope.config=config;$scope.optionEnabled=function(option){if(option&&_lodash2.default.isFunction(option.enabled))return option.enabled($scope.agg);return true}}}}})},function(module,exports){module.exports='<div ng-if="aggIsTooLow" class="form-group">\n  <p class="vis-editor-agg-error">\n    "{{ agg.schema.title }}" aggs must run before all other buckets!\n  </p>\n  <input\n    type="number"\n    name="order"\n    ng-model="$index"\n    max="{{aggIsTooLow ? $index - 1 : $index}}"\n    style="display: none;">\n</div>\n\n<div ng-if="agg.error" class="form-group">\n  <p class="vis-editor-agg-error ng-binding">\n    {{agg.error}}\n  </p>\n</div>\n\n<div ng-if="agg.schema.deprecate" class="form-group">\n  <p ng-show="agg.schema.deprecateMessage" class="vis-editor-agg-error">\n    {{ agg.schema.deprecateMessage }}\n  </p>\n  <p ng-show="!agg.schema.deprecateMessage" class="vis-editor-agg-error">\n    "{{ agg.schema.title }}" has been deprecated.\n  </p>\n</div>\n\n\x3c!-- schema editors get added down here: aggSelect.html, agg_types/controls/*.html --\x3e\n'},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:true});var AggTypeFilters=function(){function AggTypeFilters(){_classCallCheck(this,AggTypeFilters);this.filters=new Set}_createClass(AggTypeFilters,[{key:"addFilter",value:function addFilter(filter){this.filters.add(filter)}},{key:"filter",value:function filter(aggTypes,indexPattern,aggConfig){var allFilters=Array.from(this.filters);var allowedAggTypes=aggTypes.filter(function(aggType){var isAggTypeAllowed=allFilters.every(function(filter){return filter(aggType,indexPattern,aggConfig)});return isAggTypeAllowed});return allowedAggTypes}}]);return AggTypeFilters}();exports.AggTypeFilters=AggTypeFilters;var aggTypeFilters=new AggTypeFilters;exports.aggTypeFilters=aggTypeFilters},function(module,exports){module.exports='<div ng-show="add.form" class="vis-editor-agg-add-schemas">\n  <label>Select {{ groupName }} type</label>\n  <div class="euiSpacer euiSpacer--s"></div>\n  <ul class="form-group list-group list-group-menu">\n    <li\n      tabindex="0"\n      id="aggSchemaListItem-{{$index}}"\n      ng-hide="schema.deprecate"\n      ng-repeat="schema in availableSchema"\n      ng-click="add.submit(schema)"\n      class="list-group-item list-group-menu-item"\n      data-test-subj="{{schema.title}}">\n      <i ng-show="schema.icon" ng-class="schema.icon"></i>\n      {{schema.title}}\n    </li>\n  </ul>\n</div>\n\n<div\n  ng-if="stats.max > stats.count"\n  ng-init="add.form = stats.count < 1 ? !add.form : add.form"\n  ng-click="add.form = !add.form"\n  class="vis-editor-agg-wide-btn">\n\n  <div ng-if="!add.form">\n    <button\n      data-test-subj="visualizeEditorAddAggregationButton"\n      class="kuiButton kuiButton--secondary kuiButton--small"\n      ng-if="groupName !== \'buckets\' || !stats.count && !stats.deprecate"\n    >\n      Add {{ groupName }}\n    </button>\n\n    <button\n      data-test-subj="visualizeEditorAddAggregationButton"\n      class="kuiButton kuiButton--secondary kuiButton--small"\n      ng-if="groupName === \'buckets\' && stats.count > 0 && !stats.deprecate"\n    >\n      Add sub-{{ groupName }}\n    </button>\n  </div>\n\n  <button\n    class="kuiButton kuiButton--danger kuiButton--small"\n    ng-if="add.form"\n  >\n    Cancel\n  </button>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Direction=void 0;var _directionMapping;var _modules=__webpack_require__(2);var _eui=__webpack_require__(3);function _defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true}):obj[key]=value;return obj}var Direction=exports.Direction={up:"up",down:"down"};var directionMapping=(_directionMapping={},_defineProperty(_directionMapping,_eui.keyCodes.UP,Direction.up),_defineProperty(_directionMapping,_eui.keyCodes.DOWN,Direction.down),_directionMapping);_modules.uiModules.get("kibana").directive("keyboardMove",function($parse,$timeout){return{restrict:"A",link:function link(scope,el,attr){var callbackFn=$parse(attr.keyboardMove);el.keydown(function(ev){if(ev.which in directionMapping){ev.preventDefault();var direction=directionMapping[ev.which];scope.$apply(function(){return callbackFn(scope,{direction:direction})});$timeout(function(){return el.focus()})}});scope.$on("$destroy",function(){el.off("keydown")})}}})},function(module,exports){module.exports='\x3c!-- header --\x3e\n<div class="vis-editor-agg-header">\n\n  \x3c!-- open/close editor --\x3e\n  <button\n    aria-label="Toggle {{agg.schema.title}} editor"\n    ng-click="editorOpen = !editorOpen"\n    aria-expanded="{{ !!editorOpen }}"\n    aria-controls="visAggEditorParams{{agg.id}}"\n    type="button"\n    data-test-subj="toggleEditor"\n    class="kuiButton kuiButton--primary kuiButton--small vis-editor-agg-header-toggle">\n    <i aria-hidden="true" ng-class="{ \'fa-caret-down\': editorOpen, \'fa-caret-right\': !editorOpen }" class="fa"></i>\n  </button>\n\n  \x3c!-- title --\x3e\n  <span class="vis-editor-agg-header-title" ng-class="{\'vis-editor-agg-header-title--grow\': editorOpen}">\n    {{ agg.schema.title }}\n  </span>\n\n  \x3c!-- description --\x3e\n  <span ng-if="!editorOpen && aggForm.$valid" class="vis-editor-agg-header-description" title="{{describe()}}">\n    {{ describe() }}\n  </span>\n\n  \x3c!-- error --\x3e\n  <span ng-if="!editorOpen && aggForm.$invalid" class="vis-editor-agg-header-description danger" title="{{aggForm.describeErrors()}}">\n    {{ aggForm.describeErrors() }}\n  </span>\n\n  \x3c!-- controls !!!actually disabling buttons will break tooltips --\x3e\n  <div class="vis-editor-agg-header-controls kuiButtonGroup kuiButtonGroup--united">\n    \x3c!-- disable aggregation --\x3e\n    <button\n      ng-if="agg.enabled && canRemove(agg)"\n      ng-click="agg.enabled = false"\n      aria-label="Disable aggregation"\n      tooltip="Disable aggregation"\n      tooltip-append-to-body="true"\n      data-test-subj="disableAggregationBtn"\n      type="button"\n      class="kuiButton kuiButton--basic kuiButton--small">\n      <i aria-hidden="true" class="fa fa-toggle-on"></i>\n    </button>\n\n    \x3c!-- enable aggregation --\x3e\n    <button\n      ng-if="!agg.enabled"\n      ng-click="agg.enabled = true"\n      aria-label="Enable aggregation"\n      tooltip="Enable aggregation"\n      tooltip-append-to-body="true"\n      data-test-subj="disableAggregationBtn"\n      type="button"\n      class="kuiButton kuiButton--basic kuiButton--small">\n      <i aria-hidden="true" class="fa fa-toggle-off"></i>\n    </button>\n\n    \x3c!-- drag handle --\x3e\n    <button\n      draggable-handle\n      ng-if="stats.count > 1"\n      tooltip="Modify Priority by Dragging"\n      tooltip-append-to-body="true"\n      type="button"\n      keyboard-move="onPriorityReorder(direction)"\n      class="kuiButton kuiButton--basic kuiButton--small">\n      <i aria-hidden="true" class="fa fa-arrows-v"></i>\n      <span class="kuiScreenReaderOnly">\n        Use up and down key on this button to move this aggregation up and down\n        in the priority order.\n      </span>\n    </button>\n\n    \x3c!-- remove button --\x3e\n    <button\n      ng-if="canRemove(agg)"\n      aria-label="Remove Dimension"\n      ng-if="stats.count > stats.min"\n      ng-click="remove(agg)"\n      tooltip="Remove Dimension"\n      tooltip-append-to-body="true"\n      type="button"\n      class="kuiButton kuiButton--danger kuiButton--small">\n      <i aria-hidden="true" class="fa fa-times"></i>\n    </button>\n\n  </div>\n\n</div>\n\n<vis-editor-agg-params\n  id="visAggEditorParams{{agg.id}}"\n  agg="agg"\n  group-name="groupName"\n  ng-show="editorOpen"\n  index-pattern="vis.indexPattern"\n  class="vis-editor-agg-editor">\n</vis-editor-agg-params>\n\n<vis-editor-agg-add\n  ng-if="$index + 1 === stats.count"\n  ng-hide="dragging"\n  class="vis-editor-agg-add vis-editor-agg-add-subagg">\n</vis-editor-agg-add>\n'},function(module,exports,__webpack_require__){"use strict";var _jquery=__webpack_require__(13);var _jquery2=_interopRequireDefault(_jquery);var _color_palette=__webpack_require__(1470);var _modules=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana").directive("nestingIndicator",function(){return{restrict:"E",scope:{item:"=",list:"="},link:function link($scope,$el){$scope.$watchCollection("list",function(){if(!$scope.list||!$scope.item)return;var index=$scope.list.indexOf($scope.item);var bars=$scope.list.slice(0,index+1);var colors=(0,_color_palette.createColorPalette)(bars.length);$el.html(bars.map(function(bar,i){return(0,_jquery2.default)(document.createElement("span")).css("background-color",colors[i])}))})}}})},function(module,exports){module.exports='<div class="sidebar-item">\n  <div class="sidebar-item-title">\n    {{ groupName }}\n  </div>\n\n  <div ng-class="groupName" draggable-container="group" class="vis-editor-agg-group">\n    \x3c!-- wrapper needed for nesting-indicator --\x3e\n    <div ng-repeat="agg in group track by agg.id" data-test-subj="aggregationEditor{{agg.id}}" draggable-item="agg" class="vis-editor-agg-wrapper">\n      \x3c!-- agg.html - controls for aggregation --\x3e\n      <ng-form vis-editor-agg name="aggForm" class="vis-editor-agg"></ng-form>\n    </div>\n\n    <vis-editor-agg-add ng-if="stats.count === 0" class="vis-editor-agg-add"></vis-editor-agg-add>\n  </div>\n</div>\n'},function(module,exports){module.exports='  \x3c!-- Visualization and other editing UI gets inserted in here. --\x3e\n  <div\n    data-visualization-options\n    class="visualization-options"\n  ></div>\n'},function(module,exports){module.exports='<div class="sidebar-container">\n  <form\n    class="sidebar-list"\n    ng-submit="visualizeEditor.$invalid ? stageEditableVis(false) : stageEditableVis()"\n    name="visualizeEditor"\n    novalidate\n    ng-keydown="submitEditorWithKeyboard($event)"\n  >\x3c!-- see http://goo.gl/9kgz5w --\x3e\n\n    <div\n      css-truncate\n      aria-label="{{:: \'Index pattern: \' + vis.indexPattern.title}}"\n      ng-if="vis.type.requiresSearch && vis.type.options.showIndexSelection"\n      class="index-pattern"\n      tabindex="0"\n      id="sidebarIndexPatternTitle"\n    >\n      {{ vis.indexPattern.title }}\n    </div>\n\n    <nav class="navbar navbar-default subnav">\n      <div class="container-fluid">\n\n        \x3c!-- tabs --\x3e\n        <ul class="nav navbar-nav" role="tablist">\n          <li\n            role="tab"\n            aria-selected="{{sidebar.section === \'data\'}}"\n            ng-class="{active: sidebar.section == \'data\'}"\n            ng-show="sidebar.showData"\n          >\n            <a\n              class="vis-editor-subnav-link"\n              ng-class="{\'is-vis-editor-sub-nav-link-selected\': sidebar.section == \'data\'}"\n              ng-click="sidebar.section=\'data\'"\n              kbn-accessible-click\n              data-test-subj="visualizeEditDataLink"\n            >\n              Data\n            </a>\n          </li>\n\n          <li\n            role="tab"\n            aria-selected="{{sidebar.section === tab.name}}"\n            ng-repeat="tab in vis.type.editorConfig.optionTabs"\n            ng-class="{active: sidebar.section == tab.name}"\n            ng-if="vis.type.editorConfig.optionTabs.length > 1 || sidebar.showData"\n          >\n            <a\n              class="vis-editor-subnav-link"\n              ng-class="{\'is-vis-editor-sub-nav-link-selected\': sidebar.section == tab.name}"\n              ng-click="sidebar.section=tab.name"\n              kbn-accessible-click\n              data-test-subj="{{ \'visEditorTab\' + tab.name }}"\n            >\n              {{tab.title}}\n            </a>\n          </li>\n        </ul>\n\n        \x3c!-- controls --\x3e\n        <ul class="nav navbar-nav navbar-right">\n          <li\n            ng-if="visualizeEditor.softErrorCount() > 0"\n            disabled\n            tooltip="{{ visualizeEditor.describeErrors() }}"\n            tooltip-placement="bottom"\n            tooltip-popup-delay="400"\n            tooltip-append-to-body="1"\n          >\n            <div\n              class="kuiButton kuiButton--danger navbar-btn-link sidebar-controls-error"\n              aria-label="{{ visualizeEditor.describeErrors() }}"\n            >\n              <span aria-hidden="true" class="kuiIcon kuiIcon--error fa-warning"></span>\n            </div>\n          </li>\n\n          <li\n            tooltip="Auto apply changes"\n            tooltip-placement="bottom"\n            tooltip-popup-delay="400"\n            tooltip-append-to-body="1"\n            ng-if="vis.type.editorConfig.enableAutoApply"\n          >\n            <button\n              data-test-subj="visualizeEditorAutoButton"\n              class="kuiButton kuiButton--basic navbar-btn-link"\n              aria-label="Auto update the visualization on every change"\n              ng-click="toggleAutoApply()"\n              ng-class="{\n                \'kuiButton--primary\': autoApplyEnabled,\n                \'kuiButton--basic\': !autoApplyEnabled\n              }"\n            >\n              <span aria-hidden="true" class="kuiIcon fa-repeat"></span>\n              <span ng-show="autoApplyEnabled">Auto Apply</span>\n            </button>\n          </li>\n\n          <li\n            tooltip="Apply changes"\n            tooltip-placement="bottom"\n            tooltip-popup-delay="400" tooltip-append-to-body="1"\n            ng-hide="autoApplyEnabled"\n          >\n            <button\n              data-test-subj="visualizeEditorRenderButton"\n              class="kuiButton kuiButton--primary navbar-btn-link"\n              type="submit"\n              ng-disabled="!vis.dirty || visualizeEditor.errorCount() > 0 || autoApplyEnabled"\n              aria-label="Update the visualization with your changes"\n            >\n              <span aria-hidden="true" class="kuiIcon fa-play"></span>\n            </button>\n          </li>\n\n          <li\n            tooltip="Discard changes"\n            tooltip-placement="bottom"\n            tooltip-popup-delay="400"\n            tooltip-append-to-body="1"\n            ng-hide="autoApplyEnabled"\n          >\n            <button\n              data-test-subj="visualizeEditorResetButton"\n              class="kuiButton kuiButton--basic navbar-btn-link"\n              ng-disabled="!vis.dirty"\n              ng-click="resetEditableVis()"\n              aria-label="Reset the visualization"\n            >\n              <span class="kuiIcon fa-close"></span>\n            </button>\n          </li>\n        </ul>\n      </div>\n    </nav>\n\n    <div class="vis-editor-config" ng-show="sidebar.section == \'data\'">\n      \x3c!-- metrics --\x3e\n      <vis-editor-agg-group ng-if="vis.type.schemas.metrics" group-name="metrics"></vis-editor-agg-group>\n\n      \x3c!-- buckets --\x3e\n      <vis-editor-agg-group ng-if="vis.type.schemas.buckets" group-name="buckets"></vis-editor-agg-group>\n    </div>\n\n    <div class="vis-editor-config" ng-repeat="tab in vis.type.editorConfig.optionTabs" ng-show="sidebar.section == tab.name">\n      <vis-editor-vis-options\n        editor-state="state"\n        vis="vis"\n        vis-data="visData"\n        ui-state="uiState"\n        visualize-editor="visualizeEditor"\n        editor="tab.editor"\n      ></vis-editor-vis-options>\n    </div>\n\n  </form>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _jquery=__webpack_require__(13);var _jquery2=_interopRequireDefault(_jquery);var _modules=__webpack_require__(2);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana").directive("visEditorResizer",function(){return{restrict:"E",link:function link($scope,$el){var $left=$el.parent();$el.on("mousedown",function(event){$el.addClass("active");var startWidth=$left.width();var startX=event.pageX;function onMove(event){var newWidth=startWidth+event.pageX-startX;$left.width(newWidth)}(0,_jquery2.default)(document.body).on("mousemove",onMove).one("mouseup",function(){$el.removeClass("active");(0,_jquery2.default)(document.body).off("mousemove",onMove);$scope.$broadcast("render")})});$el.on("keydown",function(event){var keyCode=event.keyCode;if(keyCode===_eui.keyCodes.LEFT||keyCode===_eui.keyCodes.RIGHT){event.preventDefault();var startWidth=$left.width();var newWidth=startWidth+(keyCode===_eui.keyCodes.LEFT?-15:15);$left.width(newWidth);$scope.$broadcast("render")}})}}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var filter_1=__webpack_require__(1586);var _prop_filter_1=__webpack_require__(821);var filterByName=_prop_filter_1.propFilter("name");filter_1.aggTypeFilters.addFilter(function(aggType,indexPatterns,aggConfig){var doesSchemaAllowAggType=0!==filterByName([aggType],aggConfig.schema.aggFilter).length;return doesSchemaAllowAggType})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var lodash_1=__webpack_require__(1);var filter_1=__webpack_require__(1309);var _prop_filter_1=__webpack_require__(821);var filterByType=_prop_filter_1.propFilter("type");filter_1.aggTypeFieldFilters.addFilter(function(field,fieldParamType,indexPattern,aggConfig){var onlyAggregatable=fieldParamType.onlyAggregatable,scriptable=fieldParamType.scriptable,filterFieldTypes=fieldParamType.filterFieldTypes;var filters=lodash_1.isFunction(filterFieldTypes)?filterFieldTypes.bind(fieldParamType,aggConfig.vis):filterFieldTypes;if(onlyAggregatable&&!field.aggregatable||!scriptable&&field.scripted)return false;if(!filters)return true;return 0!==filterByType([field],filters).length})},function(module,exports){module.exports='<div class="default-vis-editor">\n  <div class="collapsible-sidebar" ng-class="::getSidebarClass()">\n    <vis-editor-sidebar class="vis-editor-sidebar" />\n    <vis-editor-resizer\n      class="default-editor__resizer"\n      tabindex="0"\n      aria-label="Press left/right to resize the editor"\n      data-test-subj="visualizeEditorResizer"\n    >&#xFE19;</vis-editor-resizer>\n  </div>\n\n  <div\n    class="vis-editor-canvas"\n    data-shared-item\n    data-shared-items-container\n    render-complete\n    data-title="{{vis.title}}"\n    data-description="{{vis.description}}"\n  />\n\n</div>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.updateEditorStateWithChanges=void 0;var _typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"===typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};var _lodash=__webpack_require__(1);exports.updateEditorStateWithChanges=function updateEditorStateWithChanges(newState,oldState,editorState){var dirty=false;for(var prop in newState)if(newState.hasOwnProperty(prop)){var newStateValue=newState[prop];var oldStateValue=oldState[prop];var editorStateValue=editorState[prop];if(newStateValue&&"object"===("undefined"===typeof newStateValue?"undefined":_typeof(newStateValue))){if(editorStateValue){updateEditorStateWithChanges(newStateValue,oldStateValue,editorStateValue)&&(dirty=true);break}var newStateValueCopy=(0,_lodash.cloneDeep)(newStateValue);editorState[prop]=newStateValueCopy;oldState[prop]=newStateValueCopy;dirty=true}else if(newStateValue!==oldStateValue){oldState[prop]=newStateValue;editorState[prop]=newStateValue;dirty=true}}return dirty}},function(module,exports,__webpack_require__){"use strict";var _data_view=__webpack_require__(4824);var _requests_view=__webpack_require__(4829);var _inspector=__webpack_require__(486);_inspector.viewRegistry.register(_data_view.DataView);_inspector.viewRegistry.register(_requests_view.RequestsView)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DataView=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(3);var _inspector=__webpack_require__(486);var _data_table=__webpack_require__(4825);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var DataViewComponent=function(_Component){_inherits(DataViewComponent,_Component);function DataViewComponent(){var _ref;var _temp,_this,_ret;_classCallCheck(this,DataViewComponent);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=DataViewComponent.__proto__||Object.getPrototypeOf(DataViewComponent)).call.apply(_ref,[this].concat(args))),_this),_this._isMounted=false,_this.state={tabularData:null,tabularOptions:{},tabularLoader:null},_this.onUpdateData=function(type){"tabular"===type&&_this.setState({tabularData:null,tabularOptions:{},tabularPromise:_this.props.adapters.data.getTabular()})},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(DataViewComponent,[{key:"finishLoadingData",value:function finishLoadingData(){var _this2=this;this.state.tabularPromise&&this.state.tabularPromise.then(function(_ref2){var data=_ref2.data,options=_ref2.options;_this2._isMounted&&_this2.setState({tabularData:data,tabularOptions:options,tabularPromise:null})})}},{key:"componentDidMount",value:function componentDidMount(){this._isMounted=true;this.props.adapters.data.on("change",this.onUpdateData);this.finishLoadingData()}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._isMounted=false;this.props.adapters.data.removeListener("change",this.onUpdateData)}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.finishLoadingData()}},{key:"renderNoData",value:function renderNoData(){return _react2.default.createElement(_inspector.InspectorView,{useFlex:true},_react2.default.createElement(_eui.EuiEmptyPrompt,{title:_react2.default.createElement("h2",null,"No data available"),body:_react2.default.createElement(_react2.default.Fragment,null,_react2.default.createElement("p",null,"The element did not provide any data."))}))}},{key:"renderLoading",value:function renderLoading(){return _react2.default.createElement(_inspector.InspectorView,{useFlex:true},_react2.default.createElement(_eui.EuiFlexGroup,{justifyContent:"center",alignItems:"center"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiPanel,{className:"eui-textCenter"},_react2.default.createElement(_eui.EuiLoadingChart,{size:"m"}),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("p",null,"Gathering data"))))))}},{key:"render",value:function render(){if(this.state.tabularPromise)return this.renderLoading();if(!this.state.tabularData)return this.renderNoData();return _react2.default.createElement(_inspector.InspectorView,null,_react2.default.createElement(_data_table.DataTableFormat,{data:this.state.tabularData,isFormatted:this.state.tabularOptions.returnsFormattedValues,exportTitle:this.props.title}))}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps){return{tabularData:null,tabularOptions:{},tabularPromise:nextProps.adapters.data.getTabular()}}}]);return DataViewComponent}(_react.Component);var DataView={title:"Data",order:10,help:"View the data behind the visualization",shouldShow:function shouldShow(adapters){return Boolean(adapters.data)},component:DataViewComponent};exports.DataView=DataView},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DataTableFormat=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);__webpack_require__(4826);var _eui=__webpack_require__(3);var _download_options=__webpack_require__(4827);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var DataTableFormat=function(_Component){_inherits(DataTableFormat,_Component);function DataTableFormat(){var _ref;var _temp,_this,_ret;_classCallCheck(this,DataTableFormat);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=DataTableFormat.__proto__||Object.getPrototypeOf(DataTableFormat)).call.apply(_ref,[this].concat(args))),_this),_this.state={},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(DataTableFormat,[{key:"render",value:function render(){var _state=this.state,columns=_state.columns,rows=_state.rows;var pagination={pageSizeOptions:[10,20,50],initialPageSize:20};return _react2.default.createElement(_react2.default.Fragment,null,_react2.default.createElement(_eui.EuiFlexGroup,null,_react2.default.createElement(_eui.EuiFlexItem,{grow:true}),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_download_options.DataDownloadOptions,{columns:this.state.columns,rows:this.state.rows,isFormatted:this.props.isFormatted,title:this.props.exportTitle}))),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),_react2.default.createElement(_eui.EuiInMemoryTable,{"data-test-subj":"inspectorTable",columns:columns,items:rows,sorting:true,pagination:pagination,compressed:true}))}}],[{key:"renderCell",value:function renderCell(col,value,isFormatted){return _react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},isFormatted?value.formatted:value),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"none",alignItems:"center"},col.filter&&_react2.default.createElement(_eui.EuiToolTip,{position:"bottom",content:"Filter for value"},_react2.default.createElement(_eui.EuiButtonIcon,{iconType:"plusInCircle",color:"text","aria-label":"Filter for value",className:"inspector-table__filter",onClick:function onClick(){return col.filter(value)}})),col.filterOut&&_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiToolTip,{position:"bottom",content:"Filter out value"},_react2.default.createElement(_eui.EuiButtonIcon,{iconType:"minusInCircle",color:"text","aria-label":"Filter out value",className:"inspector-table__filter",onClick:function onClick(){return col.filterOut(value)}}))))))}},{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(_ref2){var data=_ref2.data,isFormatted=_ref2.isFormatted;if(!data)return{columns:null,rows:null};var columns=data.columns.map(function(col){return{name:col.name,field:col.field,sortable:!isFormatted||function(row){return row[col.field].raw},render:function render(value){return DataTableFormat.renderCell(col,value,isFormatted)}}});return{columns:columns,rows:data.rows}}}]);return DataTableFormat}(_react.Component);DataTableFormat.propTypes={data:_propTypes2.default.object.isRequired,exportTitle:_propTypes2.default.string.isRequired,isFormatted:_propTypes2.default.bool};exports.DataTableFormat=DataTableFormat},function(module,exports){},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DataDownloadOptions=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(3);var _export_csv=__webpack_require__(4828);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var DataDownloadOptions=function(_Component){_inherits(DataDownloadOptions,_Component);function DataDownloadOptions(){var _ref;var _temp,_this,_ret;_classCallCheck(this,DataDownloadOptions);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=DataDownloadOptions.__proto__||Object.getPrototypeOf(DataDownloadOptions)).call.apply(_ref,[this].concat(args))),_this),_this.state={isPopoverOpen:false},_this.onTogglePopover=function(){_this.setState(function(state){return{isPopoverOpen:!state.isPopoverOpen}})},_this.closePopover=function(){_this.setState({isPopoverOpen:false})},_this.exportCsv=function(){(0,_export_csv.exportAsCsv)(_this.props.title+".csv",_this.props.columns,_this.props.rows)},_this.exportFormattedCsv=function(){(0,_export_csv.exportAsCsv)(_this.props.title+".csv",_this.props.columns,_this.props.rows,function(item){return item.formatted})},_this.exportFormattedAsRawCsv=function(){(0,_export_csv.exportAsCsv)(_this.props.title+".csv",_this.props.columns,_this.props.rows,function(item){return item.raw})},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(DataDownloadOptions,[{key:"renderUnformattedDownload",value:function renderUnformattedDownload(){return _react2.default.createElement(_eui.EuiButton,{size:"s",onClick:this.exportCsv},"Download CSV")}},{key:"renderFormattedDownloads",value:function renderFormattedDownloads(){var button=_react2.default.createElement(_eui.EuiButton,{iconType:"arrowDown",iconSide:"right",size:"s",onClick:this.onTogglePopover},"Download CSV");var items=[_react2.default.createElement(_eui.EuiContextMenuItem,{key:"csv",onClick:this.exportFormattedCsv,toolTipContent:"Download the data in table format",toolTipPosition:"left"},"Formatted CSV"),_react2.default.createElement(_eui.EuiContextMenuItem,{key:"rawCsv",onClick:this.exportFormattedAsRawCsv,toolTipContent:"Download the data as provided, for example, dates as timestamps",toolTipPosition:"left"},"Raw CSV")];return _react2.default.createElement(_eui.EuiPopover,{id:"inspectorDownloadData",button:button,isOpen:this.state.isPopoverOpen,closePopover:this.closePopover,panelPaddingSize:"none"},_react2.default.createElement(_eui.EuiContextMenuPanel,{className:"eui-textNoWrap",items:items}))}},{key:"render",value:function render(){if(!this.props.isFormatted)return this.renderUnformattedDownload();return this.renderFormattedDownloads()}}]);return DataDownloadOptions}(_react.Component);exports.DataDownloadOptions=DataDownloadOptions},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.exportAsCsv=void 0;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _filesaver=__webpack_require__(923);var _chrome=__webpack_require__(8);var _chrome2=_interopRequireDefault(_chrome);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function buildCsv(columns,rows,valueFormatter){var settings=_chrome2.default.getUiSettingsClient();var csvSeparator=settings.get("csv:separator",",");var quoteValues=settings.get("csv:quoteValues",true);var nonAlphaNumRE=/[^a-zA-Z0-9]/;var allDoubleQuoteRE=/"/g;function escape(val){_lodash2.default.isObject(val)&&(val=val.valueOf());val=String(val);quoteValues&&nonAlphaNumRE.test(val)&&(val='"'+val.replace(allDoubleQuoteRE,'""')+'"');return val}var header=columns.map(function(col){return escape(col.name)});var orderedFieldNames=columns.map(function(col){return col.field});var csvRows=rows.map(function(row){return orderedFieldNames.map(function(field){return escape(valueFormatter?valueFormatter(row[field]):row[field])})});return[header].concat(_toConsumableArray(csvRows)).map(function(row){return row.join(csvSeparator)}).join("\r\n")+"\r\n"}function exportAsCsv(filename,columns,rows,valueFormatter){var csv=new Blob([buildCsv(columns,rows,valueFormatter)],{type:"text/plain;charset=utf-8"});(0,_filesaver.saveAs)(csv,filename)}exports.exportAsCsv=exportAsCsv},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RequestsView=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(3);var _inspector=__webpack_require__(486);var _adapters=__webpack_require__(609);var _request_selector=__webpack_require__(4830);var _request_details=__webpack_require__(4831);__webpack_require__(4836);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var RequestsViewComponent=function(_Component){_inherits(RequestsViewComponent,_Component);function RequestsViewComponent(props){_classCallCheck(this,RequestsViewComponent);var _this=_possibleConstructorReturn(this,(RequestsViewComponent.__proto__||Object.getPrototypeOf(RequestsViewComponent)).call(this,props));_initialiseProps.call(_this);props.adapters.requests.on("change",_this._onRequestsChange);var requests=props.adapters.requests.getRequests();_this.state={requests:requests,request:requests.length?requests[0]:null};return _this}_createClass(RequestsViewComponent,[{key:"componentWillUnmount",value:function componentWillUnmount(){this.props.adapters.requests.removeListener("change",this._onRequestsChange)}},{key:"renderEmptyRequests",value:function renderEmptyRequests(){return _react2.default.createElement(_inspector.InspectorView,{useFlex:true},_react2.default.createElement(_eui.EuiEmptyPrompt,{title:_react2.default.createElement("h2",null,"No requests logged"),body:_react2.default.createElement(_react2.default.Fragment,null,_react2.default.createElement("p",null,"The element hasn't logged any requests (yet)."),_react2.default.createElement("p",null,"This usually means that there was no need to fetch any data or that the element has not yet started fetching data."))}))}},{key:"render",value:function render(){if(!this.state.requests||!this.state.requests.length)return this.renderEmptyRequests();var failedCount=this.state.requests.filter(function(req){return req.status===_adapters.RequestStatus.ERROR}).length;return _react2.default.createElement(_inspector.InspectorView,null,_react2.default.createElement(_eui.EuiText,{size:"xs"},_react2.default.createElement("p",{role:"status","aria-live":"polite","aria-atomic":"true"},this.state.requests.length,1!==this.state.requests.length?" requests were":" request was"," made",failedCount>0&&_react2.default.createElement(_react2.default.Fragment,null,", "," ",_react2.default.createElement(_eui.EuiTextColor,{color:"danger"},failedCount," had a failure")))),_react2.default.createElement(_eui.EuiSpacer,{size:"xs"}),_react2.default.createElement(_request_selector.RequestSelector,{requests:this.state.requests,selectedRequest:this.state.request,onRequestChanged:this.selectRequest}),_react2.default.createElement(_eui.EuiSpacer,{size:"xs"}),this.state.request&&this.state.request.description&&_react2.default.createElement(_eui.EuiText,{size:"xs"},_react2.default.createElement("p",null,this.state.request.description)),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),this.state.request&&_react2.default.createElement(_request_details.RequestDetails,{request:this.state.request}))}}]);return RequestsViewComponent}(_react.Component);var _initialiseProps=function _initialiseProps(){var _this2=this;this._onRequestsChange=function(){var requests=_this2.props.adapters.requests.getRequests();var newState={requests:requests};requests.includes(_this2.state.request)||(newState.request=requests.length?requests[0]:null);_this2.setState(newState)};this.selectRequest=function(request){request!==_this2.state.request&&_this2.setState({request:request})}};RequestsViewComponent.propTypes={adapters:_propTypes2.default.object.isRequired};var RequestsView={title:"Requests",order:20,help:"View the requests that collected the data",shouldShow:function shouldShow(adapters){return Boolean(adapters.requests)},component:RequestsViewComponent};exports.RequestsView=RequestsView},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RequestSelector=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(3);var _adapters=__webpack_require__(609);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var RequestSelector=function(_Component){_inherits(RequestSelector,_Component);function RequestSelector(){var _ref;var _temp,_this,_ret;_classCallCheck(this,RequestSelector);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=RequestSelector.__proto__||Object.getPrototypeOf(RequestSelector)).call.apply(_ref,[this].concat(args))),_this),_this.state={isPopoverOpen:false},_this.togglePopover=function(){_this.setState(function(prevState){return{isPopoverOpen:!prevState.isPopoverOpen}})},_this.closePopover=function(){_this.setState({isPopoverOpen:false})},_this.renderRequestDropdownItem=function(request,index){var hasFailed=request.status===_adapters.RequestStatus.ERROR;var inProgress=request.status===_adapters.RequestStatus.PENDING;return _react2.default.createElement(_eui.EuiContextMenuItem,{key:index,icon:request===_this.props.selectedRequest?"check":"empty",onClick:function onClick(){_this.props.onRequestChanged(request);_this.closePopover()},toolTipContent:request.description,toolTipPosition:"left"},_react2.default.createElement(_eui.EuiTextColor,{color:hasFailed?"danger":"default"},request.name,hasFailed&&" (failed)",inProgress&&_react2.default.createElement(_eui.EuiLoadingSpinner,{size:"s","aria-label":"Request in progress",className:"inspector-request-chooser__menu-spinner"})))},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(RequestSelector,[{key:"renderRequestDropdown",value:function renderRequestDropdown(){var button=_react2.default.createElement(_eui.EuiButtonEmpty,{iconType:"arrowDown",iconSide:"right",size:"s",className:"inspector-request-chooser__request-title",onClick:this.togglePopover},this.props.selectedRequest.name);return _react2.default.createElement(_eui.EuiPopover,{id:"inspectorRequestChooser",button:button,isOpen:this.state.isPopoverOpen,closePopover:this.closePopover,panelPaddingSize:"none",anchorPosition:"downLeft"},_react2.default.createElement(_eui.EuiContextMenuPanel,{className:"inspector-request-chooser__menu-panel",items:this.props.requests.map(this.renderRequestDropdownItem)}))}},{key:"render",value:function render(){var _props=this.props,selectedRequest=_props.selectedRequest,requests=_props.requests;return _react2.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",gutterSize:"xs"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false,className:"inspector-request-chooser__request-title"},"Request:"),_react2.default.createElement(_eui.EuiFlexItem,{grow:true},requests.length<=1&&_react2.default.createElement("div",{className:"inspector-request-chooser__single-request"},selectedRequest.name),requests.length>1&&this.renderRequestDropdown()),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},selectedRequest.status!==_adapters.RequestStatus.PENDING&&_react2.default.createElement(_eui.EuiToolTip,{position:"left",title:selectedRequest.status===_adapters.RequestStatus.OK?"Request succeeded":"Request failed",content:"The total time the request took."},_react2.default.createElement(_eui.EuiBadge,{color:selectedRequest.status===_adapters.RequestStatus.OK?"secondary":"danger",iconType:selectedRequest.status===_adapters.RequestStatus.OK?"check":"cross"},selectedRequest.time,"ms")),selectedRequest.status===_adapters.RequestStatus.PENDING&&_react2.default.createElement(_eui.EuiLoadingSpinner,{size:"m","aria-label":"Request in progress"})))}}]);return RequestSelector}(_react.Component);RequestSelector.propTypes={requests:_propTypes2.default.array.isRequired,selectedRequest:_propTypes2.default.object.isRequired};exports.RequestSelector=RequestSelector},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RequestDetails=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(3);var _details=__webpack_require__(4832);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var DETAILS=[{name:"Statistics",component:_details.RequestDetailsStats},{name:"Request",component:_details.RequestDetailsRequest},{name:"Response",component:_details.RequestDetailsResponse}];var RequestDetails=function(_Component){_inherits(RequestDetails,_Component);function RequestDetails(){var _ref;var _temp,_this,_ret;_classCallCheck(this,RequestDetails);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=RequestDetails.__proto__||Object.getPrototypeOf(RequestDetails)).call.apply(_ref,[this].concat(args))),_this),_this.state={availableDetails:[],selectedDetail:null},_this.selectDetailsTab=function(detail){detail!==_this.state.selectedDetail&&_this.setState({selectedDetail:detail})},_this.renderDetailTab=function(detail){return _react2.default.createElement(_eui.EuiTab,{key:detail.name,isSelected:detail===_this.state.selectedDetail,onClick:function onClick(){return _this.selectDetailsTab(detail)},"data-test-subj":"inspectorRequestDetail"+detail.name},detail.name)},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(RequestDetails,[{key:"render",value:function render(){if(0===this.state.availableDetails.length)return null;var DetailComponent=this.state.selectedDetail.component;return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiTabs,{size:"s"},this.state.availableDetails.map(this.renderDetailTab)),_react2.default.createElement(DetailComponent,{request:this.props.request}))}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps,prevState){var selectedDetail=prevState&&prevState.selectedDetail;var availableDetails=DETAILS.filter(function(detail){return!detail.component.shouldShow||detail.component.shouldShow(nextProps.request)});if(selectedDetail&&availableDetails.includes(selectedDetail))return{availableDetails:availableDetails};return{availableDetails:availableDetails,selectedDetail:availableDetails[0]}}}]);return RequestDetails}(_react.Component);RequestDetails.propTypes={request:_propTypes2.default.object.isRequired};exports.RequestDetails=RequestDetails},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _req_details_request=__webpack_require__(4833);Object.keys(_req_details_request).forEach(function(key){if("default"===key||"__esModule"===key)return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _req_details_request[key]}})});var _req_details_response=__webpack_require__(4834);Object.keys(_req_details_response).forEach(function(key){if("default"===key||"__esModule"===key)return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _req_details_response[key]}})});var _req_details_stats=__webpack_require__(4835);Object.keys(_req_details_stats).forEach(function(key){if("default"===key||"__esModule"===key)return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _req_details_stats[key]}})})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RequestDetailsRequest=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function RequestDetailsRequest(props){return _react2.default.createElement(_eui.EuiCodeBlock,{language:"json",paddingSize:"s","data-test-subj":"inspectorRequestBody"},JSON.stringify(props.request.json,null,2))}RequestDetailsRequest.shouldShow=function(request){return!!request.json};exports.RequestDetailsRequest=RequestDetailsRequest},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RequestDetailsResponse=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function RequestDetailsResponse(props){return _react2.default.createElement(_eui.EuiCodeBlock,{language:"json",paddingSize:"s","data-test-subj":"inspectorResponseBody"},JSON.stringify(props.request.response.json,null,2))}RequestDetailsResponse.shouldShow=function(request){return request.response&&request.response.json};exports.RequestDetailsResponse=RequestDetailsResponse},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RequestDetailsStats=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var RequestDetailsStats=function(_Component){_inherits(RequestDetailsStats,_Component);function RequestDetailsStats(){var _ref;var _temp,_this,_ret;_classCallCheck(this,RequestDetailsStats);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=RequestDetailsStats.__proto__||Object.getPrototypeOf(RequestDetailsStats)).call.apply(_ref,[this].concat(args))),_this),_this.renderStatRow=function(stat){return[_react2.default.createElement(_eui.EuiTableRow,{key:stat.name},_react2.default.createElement(_eui.EuiTableRowCell,null,_react2.default.createElement("span",{className:"requests-stats__icon"},stat.description&&_react2.default.createElement(_eui.EuiIconTip,{"aria-label":"Description",type:"questionInCircle",color:"subdued",content:stat.description}),!stat.description&&_react2.default.createElement(_eui.EuiIcon,{type:"empty"})),stat.name),_react2.default.createElement(_eui.EuiTableRowCell,null,stat.value))]},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(RequestDetailsStats,[{key:"render",value:function render(){var stats=this.props.request.stats;var sortedStats=Object.keys(stats).sort().map(function(name){return _extends({name:name},stats[name])});return _react2.default.createElement(_eui.EuiTable,{style:{tableLayout:"auto"}},_react2.default.createElement(_eui.EuiTableBody,null,sortedStats.map(this.renderStatRow)))}}]);return RequestDetailsStats}(_react.Component);RequestDetailsStats.shouldShow=function(request){return!!request.stats&&Object.keys(request.stats).length};RequestDetailsStats.propTypes={request:_propTypes2.default.object.isRequired};exports.RequestDetailsStats=RequestDetailsStats},function(module,exports){},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.searchEmbeddableFactoryProvider=searchEmbeddableFactoryProvider;var _search_embeddable_factory=__webpack_require__(4838);var _embeddable_factories_registry=__webpack_require__(668);function searchEmbeddableFactoryProvider(Private){var SearchEmbeddableFactoryProvider=function SearchEmbeddableFactoryProvider($compile,$rootScope,savedSearches,Promise,courier){return new _search_embeddable_factory.SearchEmbeddableFactory($compile,$rootScope,savedSearches,Promise,courier)};return Private(SearchEmbeddableFactoryProvider)}_embeddable_factories_registry.EmbeddableFactoriesRegistryProvider.register(searchEmbeddableFactoryProvider)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SearchEmbeddableFactory=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();__webpack_require__(1592);var _embeddable=__webpack_require__(378);var _search_embeddable=__webpack_require__(4855);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.SearchEmbeddableFactory=function(_EmbeddableFactory){_inherits(SearchEmbeddableFactory,_EmbeddableFactory);function SearchEmbeddableFactory($compile,$rootScope,searchLoader){_classCallCheck(this,SearchEmbeddableFactory);var _this=_possibleConstructorReturn(this,(SearchEmbeddableFactory.__proto__||Object.getPrototypeOf(SearchEmbeddableFactory)).call(this));_this.$compile=$compile;_this.searchLoader=searchLoader;_this.$rootScope=$rootScope;_this.name="search";return _this}_createClass(SearchEmbeddableFactory,[{key:"getEditPath",value:function getEditPath(panelId){return this.searchLoader.urlFor(panelId)}},{key:"create",value:function create(panelMetadata,onEmbeddableStateChanged){var _this2=this;var searchId=panelMetadata.id;var editUrl=this.getEditPath(searchId);return this.searchLoader.get(searchId).then(function(savedObject){return new _search_embeddable.SearchEmbeddable({onEmbeddableStateChanged:onEmbeddableStateChanged,savedSearch:savedObject,editUrl:editUrl,loader:_this2.searchLoader,$rootScope:_this2.$rootScope,$compile:_this2.$compile})})}}]);return SearchEmbeddableFactory}(_embeddable.EmbeddableFactory)},function(module,exports,__webpack_require__){"use strict";var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _doc_table=__webpack_require__(4840);var _doc_table2=_interopRequireDefault(_doc_table);var _get_sort=__webpack_require__(1593);__webpack_require__(4841);__webpack_require__(796);__webpack_require__(1367);__webpack_require__(4842);__webpack_require__(1594);var _render_complete=__webpack_require__(507);var _modules=__webpack_require__(2);var _doc_table_strings=__webpack_require__(4852);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana").directive("docTable",function(config,Notifier,getAppState,pagerFactory,$filter,courier){return{restrict:"E",template:_doc_table2.default,scope:{sorting:"=",columns:"=",hits:"=?",indexPattern:"=?",searchSource:"=?",infiniteScroll:"=?",filter:"=?",filters:"=?",minimumVisibleRows:"=?",onAddColumn:"=?",onChangeSortOrder:"=?",onMoveColumn:"=?",onRemoveColumn:"=?"},link:function link($scope,$el){var notify=new Notifier;$scope.$watch("minimumVisibleRows",function(minimumVisibleRows){$scope.limit=Math.max(minimumVisibleRows||50,$scope.limit||50)});$scope.persist={sorting:$scope.sorting,columns:$scope.columns};var limitTo=$filter("limitTo");var calculateItemsOnPage=function calculateItemsOnPage(){$scope.pager.setTotalItems($scope.hits.length);$scope.pageOfItems=limitTo($scope.hits,$scope.pager.pageSize,$scope.pager.startIndex)};$scope.limitedResultsWarning=(0,_doc_table_strings.getLimitedSearchResultsMessage)(config.get("discover:sampleSize"));$scope.addRows=function(){$scope.limit+=50};$scope.$watch("columns",function(columns){if(0!==columns.length)return;var $state=getAppState();$scope.columns.push("_source");$state&&$state.replace()});$scope.$watchCollection("columns",function(columns,oldColumns){1===oldColumns.length&&"_source"===oldColumns[0]&&$scope.columns.length>1&&_lodash2.default.pull($scope.columns,"_source");0===$scope.columns.length&&$scope.columns.push("_source")});$scope.$watch("searchSource",function(){if(!$scope.searchSource)return;$scope.indexPattern=$scope.searchSource.getField("index");$scope.searchSource.setField("size",config.get("discover:sampleSize"));$scope.searchSource.setField("sort",(0,_get_sort.getSort)($scope.sorting,$scope.indexPattern));$scope.$watchCollection("sorting",function(newSort,oldSort){if(newSort===oldSort)return;$scope.searchSource.setField("sort",(0,_get_sort.getSort)(newSort,$scope.indexPattern));$scope.searchSource.fetchQueued()});$scope.$on("$destroy",function(){$scope.searchSource&&$scope.searchSource.destroy()});function onResults(resp){$scope.limit=50;if($scope.searchSource!==$scope.searchSource)return;$scope.hits=resp.hits.hits;0===$scope.hits.length&&(0,_render_complete.dispatchRenderComplete)($el[0]);$scope.totalHitCount=resp.hits.total;$scope.pager=pagerFactory.create($scope.hits.length,50,1);calculateItemsOnPage();return $scope.searchSource.onResults().then(onResults)}function startSearching(){$scope.searchSource.onResults().then(onResults).catch(function(error){notify.error(error);startSearching()})}startSearching();courier.fetch()});$scope.pageOfItems=[];$scope.onPageNext=function(){$scope.pager.nextPage();calculateItemsOnPage()};$scope.onPagePrevious=function(){$scope.pager.previousPage();calculateItemsOnPage()};$scope.shouldShowLimitedResultsWarning=function(){return!$scope.pager.hasNextPage&&$scope.pager.totalItems<$scope.totalHitCount}}}})},function(module,exports){module.exports='<div\n  class="doc-table-container"\n  ng-if="hits.length"\n  ng-class="{ loading: searchSource.activeFetchCount > 0 }"\n>\n  <div ng-if="!infiniteScroll">\n    <div class="kuiBar docTableBar">\n      <div class="kuiBarSection">\n        <div\n          ng-if="shouldShowLimitedResultsWarning()"\n          class="kuiToolBarText kuiSubduedText"\n        >\n          {{ limitedResultsWarning }}\n        </div>\n        \x3c!-- Pagination --\x3e\n        <tool-bar-pager-text\n          start-item="pager.startItem"\n          end-item="pager.endItem"\n          total-items="totalHitCount"\n        ></tool-bar-pager-text>\n        <tool-bar-pager-buttons\n          has-previous-page="pager.hasPreviousPage"\n          has-next-page="pager.hasNextPage"\n          on-page-next="onPageNext"\n          on-page-previous="onPagePrevious"\n        ></tool-bar-pager-buttons>\n      </div>\n    </div>\n    <table class="kbn-table table" ng-if="indexPattern">\n      <thead\n        kbn-table-header\n        columns="columns"\n        index-pattern="indexPattern"\n        sort-order="sorting"\n        on-change-sort-order="onChangeSortOrder"\n        on-move-column="onMoveColumn"\n        on-remove-column="onRemoveColumn"\n      ></thead>\n      <tbody>\n        <tr ng-repeat="row in pageOfItems|limitTo:limit track by row._index+row._type+row._id+row._score+row._version"\n          kbn-table-row="row"\n          columns="columns"\n          sorting="sorting"\n          index-pattern="indexPattern"\n          filter="filter"\n          filters="filters"\n          class="discover-table-row"\n          on-add-column="onAddColumn"\n          on-change-sort-order="onChangeSortOrder"\n          on-remove-column="onRemoveColumn"\n        ></tr>\n      </tbody>\n    </table>\n    \x3c!-- ToolBarFooter --\x3e\n    <div class="kuiBar docTableBar">\n      <div class="kuiBarSection">\n        <div\n          ng-if="shouldShowLimitedResultsWarning()"\n          class="kuiToolBarText kuiSubduedText"\n        >\n          {{ limitedResultsWarning }}\n        </div>\n        \x3c!-- Pagination --\x3e\n        <tool-bar-pager-text\n          start-item="pager.startItem"\n          end-item="pager.endItem"\n          total-items="totalHitCount"\n        ></tool-bar-pager-text>\n        <tool-bar-pager-buttons\n          has-previous-page="pager.hasPreviousPage"\n          has-next-page="pager.hasNextPage"\n          on-page-next="onPageNext"\n          on-page-previous="onPagePrevious"\n        ></tool-bar-pager-buttons>\n      </div>\n    </div>\n  </div>\n\n  <table ng-if="infiniteScroll" class="kbn-table table" ng-if="indexPattern" data-test-subj="docTable">\n    <thead\n      kbn-table-header\n      columns="columns"\n      index-pattern="indexPattern"\n      sort-order="sorting"\n      on-change-sort-order="onChangeSortOrder"\n      on-move-column="onMoveColumn"\n      on-remove-column="onRemoveColumn"\n    ></thead>\n    <tbody>\n      <tr ng-repeat="row in hits|limitTo:limit track by row._index+row._type+row._id+row._score+row._version"\n        kbn-table-row="row"\n        columns="columns"\n        sorting="sorting"\n        index-pattern="indexPattern"\n        filter="filter"\n        filters="filters"\n        class="discover-table-row"\n        ng-class="{\'discover-table-row--highlight\': row[\'$$_isAnchor\']}"\n        data-test-subj="docTableRow{{ row[\'$$_isAnchor\'] ? \' docTableAnchorRow\' : \'\'}}"\n        on-add-column="onAddColumn"\n        on-change-sort-order="onChangeSortOrder"\n        on-remove-column="onRemoveColumn"\n      ></tr>\n    </tbody>\n  </table>\n  <kbn-infinite-scroll ng-if="infiniteScroll" more="addRows"></kbn-infinite-scroll>\n</div>\n\n<div ng-if="hits != null && !hits.length" class="table-vis-error">\n  <h2><i class="fa fa-meh-o"></i></h2>\n  <h4>No results found</h4>\n</div>\n'},function(module,exports){},function(module,exports,__webpack_require__){"use strict";var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);__webpack_require__(4843);__webpack_require__(614);var _table_header=__webpack_require__(4844);var _table_header2=_interopRequireDefault(_table_header);var _modules=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("app/discover");_module.directive("kbnTableHeader",function(shortDotsFilter){return{restrict:"A",scope:{columns:"=",sortOrder:"=",indexPattern:"=",onChangeSortOrder:"=?",onRemoveColumn:"=?",onMoveColumn:"=?"},template:_table_header2.default,controller:function controller($scope){$scope.isSortableColumn=function isSortableColumn(columnName){return!!$scope.indexPattern&&_lodash2.default.isFunction($scope.onChangeSortOrder)&&_lodash2.default.get($scope,["indexPattern","fields","byName",columnName,"sortable"],false)};$scope.tooltip=function(column){if(!$scope.isSortableColumn(column))return"";return"Sort by "+shortDotsFilter(column)};$scope.canMoveColumnLeft=function canMoveColumn(columnName){return _lodash2.default.isFunction($scope.onMoveColumn)&&$scope.columns.indexOf(columnName)>0};$scope.canMoveColumnRight=function canMoveColumn(columnName){return _lodash2.default.isFunction($scope.onMoveColumn)&&$scope.columns.indexOf(columnName)<$scope.columns.length-1};$scope.canRemoveColumn=function canRemoveColumn(columnName){return _lodash2.default.isFunction($scope.onRemoveColumn)&&("_source"!==columnName||$scope.columns.length>1)};$scope.headerClass=function(column){if(!$scope.isSortableColumn(column))return;var sortOrder=$scope.sortOrder;var defaultClass=["fa","fa-sort-up","table-header-sortchange"];if(!sortOrder||column!==sortOrder[0])return defaultClass;return["fa","asc"===sortOrder[1]?"fa-sort-up":"fa-sort-down"]};$scope.moveColumnLeft=function moveLeft(columnName){var newIndex=$scope.columns.indexOf(columnName)-1;if(newIndex<0)return;$scope.onMoveColumn(columnName,newIndex)};$scope.moveColumnRight=function moveRight(columnName){var newIndex=$scope.columns.indexOf(columnName)+1;if(newIndex>=$scope.columns.length)return;$scope.onMoveColumn(columnName,newIndex)};$scope.cycleSortOrder=function cycleSortOrder(columnName){if(!$scope.isSortableColumn(columnName))return;var _$scope$sortOrder=_slicedToArray($scope.sortOrder,2),currentColumnName=_$scope$sortOrder[0],_$scope$sortOrder$=_$scope$sortOrder[1],currentDirection=void 0===_$scope$sortOrder$?"asc":_$scope$sortOrder$;var newDirection=columnName===currentColumnName&&"asc"===currentDirection?"desc":"asc";$scope.onChangeSortOrder(columnName,newDirection)};$scope.getAriaLabelForColumn=function getAriaLabelForColumn(name){if(!$scope.isSortableColumn(name))return null;var _$scope$sortOrder2=_slicedToArray($scope.sortOrder,2),currentColumnName=_$scope$sortOrder2[0],_$scope$sortOrder2$=_$scope$sortOrder2[1],currentDirection=void 0===_$scope$sortOrder2$?"asc":_$scope$sortOrder2$;if(name===currentColumnName&&"asc"===currentDirection)return"Sort "+name+" descending";return"Sort "+name+" ascending"}}}})},function(module,exports){},function(module,exports){module.exports='<tr>\n  <td width="1%"></td>\n  <th\n    ng-if="indexPattern.timeFieldName"\n    data-test-subj="docTableHeaderField"\n    scope="col"\n  >\n    <span>Time <button\n      id="docTableHeaderFieldSort{{indexPattern.timeFieldName}}"\n      tabindex="0"\n      aria-label="{{ getAriaLabelForColumn(indexPattern.timeFieldName) }}"\n      class="docTableHeaderButton"\n      ng-class="headerClass(indexPattern.timeFieldName)"\n      role="button"\n      ng-click="cycleSortOrder(indexPattern.timeFieldName)"\n      tooltip="Sort by time"\n    ></button>\n    </span>\n  </th>\n  <th\n    ng-repeat="name in columns"\n    data-test-subj="docTableHeaderField"\n    scope="col"\n  >\n    <span\n      class="table-header-name"\n      data-test-subj="docTableHeader-{{name}}"\n    >\n      {{name | shortDots}}\n      <button\n        data-test-subj="docTableHeaderFieldSort_{{name}}"\n        id="docTableHeaderFieldSort{{name}}"\n        ng-if="isSortableColumn(name)"\n        aria-label="{{ getAriaLabelForColumn(name) }}"\n        class="docTableHeaderButton"\n        ng-class="headerClass(name)"\n        ng-click="cycleSortOrder(name)"\n        tooltip="{{tooltip(name)}}"\n        tooltip-append-to-body="1"\n      ></button>\n    </span>\n    <button\n      class="fa fa-remove table-header-move"\n      ng-click="onRemoveColumn(name)"\n      ng-if="canRemoveColumn(name)"\n      tooltip-append-to-body="1"\n      tooltip="Remove column"\n      aria-label="Remove {{name}} column"\n      data-test-subj="docTableRemoveHeader-{{name}}"\n    ></button>\n    <button\n      class="fa fa-angle-double-left table-header-move"\n      ng-click="moveColumnLeft(name)"\n      ng-if="canMoveColumnLeft(name)"\n      tooltip-append-to-body="1"\n      tooltip="Move column to the left"\n      aria-label="Move {{name}} column to the left"\n    ></button>\n    <button\n      class="fa fa-angle-double-right table-header-move"\n      ng-click="moveColumnRight(name)"\n      ng-if="canMoveColumnRight(name)"\n      tooltip-append-to-body="1"\n      tooltip="Move column to the right"\n      aria-label="Move {{name}} column to the right"\n    ></button>\n  </th>\n</tr>\n'},function(module,exports,__webpack_require__){"use strict";var _jquery=__webpack_require__(13);var _jquery2=_interopRequireDefault(_jquery);var _modules=__webpack_require__(2);var _doc_views=__webpack_require__(929);__webpack_require__(1044);__webpack_require__(4846);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana").directive("docViewer",function(config,Private){var docViews=Private(_doc_views.DocViewsRegistryProvider);return{restrict:"E",scope:{hit:"=",indexPattern:"=",filter:"=?",columns:"=?",onAddColumn:"=?",onRemoveColumn:"=?"},template:function template($el){var $viewer=(0,_jquery2.default)('<div class="doc-viewer">');$el.append($viewer);var $tabs=(0,_jquery2.default)('<ul class="nav nav-tabs" role="tablist">');var $content=(0,_jquery2.default)('<div class="doc-viewer-content" role="tabpanel">');$viewer.append($tabs);$viewer.append($content);docViews.inOrder.forEach(function(view){var $tab=(0,_jquery2.default)("<li\n            ng-show=\"docViews['"+view.name+"'].shouldShow(hit)\"\n            ng-class=\"{active: mode == '"+view.name+'\'}"\n            role="tab"\n            aria-selected="{{mode === \''+view.name+"'}}\"\n          >\n            <a\n              ng-click=\"mode='"+view.name+"'\"\n              kbn-accessible-click\n            >\n              "+view.title+"\n            </a>\n          </li>");$tabs.append($tab);var $viewAttrs='\n          hit="hit"\n          index-pattern="indexPattern"\n          filter="filter"\n          columns="columns"\n          on-add-column="onAddColumn"\n          on-remove-column="onRemoveColumn"\n        ';var $ext=(0,_jquery2.default)("<render-directive "+$viewAttrs+" ng-if=\"mode == '"+view.name+"'\" definition=\"docViews['"+view.name+"'].directive\">\n          </render-directive>");$ext.html(view.directive.template);$content.append($ext)});return $el.html()},controller:function controller($scope){$scope.mode=docViews.inOrder[0].name;$scope.docViews=docViews.byName}}})},function(module,exports){},function(module,exports){},function(module,exports){module.exports='<td ng-click="toggleRow()" data-test-subj="docTableExpandToggleColumn">\n  <button\n    class="discover-table-open-button"\n    aria-label="Toggle row details"\n    aria-expanded="{{!!open}}"\n  >\n    <span\n      class="kuiIcon"\n      ng-class="{ \'fa-caret-down\': open, \'fa-caret-right\': !open }"\n    ></span>\n  </button>\n</td>\n'},function(module,exports){module.exports='<td colspan="{{ columns.length + 2 }}">\n  <div class="documentTableRow__actions">\n    <a\n      class="kuiButton kuiButton--small kuiButton--secondary"\n      data-test-subj="docTableRowAction"\n      ng-href="{{ getContextAppHref() }}"\n      ng-if="indexPattern.isTimeBased()"\n    >\n      View surrounding documents\n    </a>\n    <a\n      class="kuiButton kuiButton--small kuiButton--secondary"\n      data-test-subj="docTableRowAction"\n      ng-href="#/doc/{{indexPattern.id}}/{{row._index}}/{{row._type}}/?id={{row._id | uriescape}}"\n    >\n      View single document\n    </a>\n  </div>\n  <doc-viewer\n    columns="columns"\n    filter="filter"\n    hit="row"\n    index-pattern="indexPattern"\n    on-add-column="onAddColumn"\n    on-remove-column="onRemoveColumn"\n    data-test-subj="docViewer"\n  ></doc-viewer>\n</td>\n'},function(module,exports){module.exports='<%\nvar attributes = \'\';\nif (timefield) {\n  attributes=\'class="discover-table-timefield" width="1%"\';\n} else if (sourcefield) {\n  attributes=\'class="discover-table-sourcefield"\';\n} else {\n  attributes=\'class="discover-table-datafield"\';\n}\n%>\n<td <%= attributes %> data-test-subj="docTableField">\n  <%= formatted %>\n  <span class="table-cell-filter">\n    <% if (filterable) { %>\n      <button\n        ng-click="inlineFilter($event, \'+\')"\n        class="fa fa-search-plus docTableRowFilterButton"\n        data-column="<%- column %>"\n        tooltip="Filter for value"\n        tooltip-append-to-body="1"\n        aria-label="Filter for value"\n      ></button>\n\n      <button\n        ng-click="inlineFilter($event, \'-\')"\n        class="fa fa-search-minus docTableRowFilterButton"\n        data-column="<%- column %>"\n        tooltip="Filter out value"\n        aria-label="Filter out value"\n        tooltip-append-to-body="1"\n      ></button>\n    <% } %>\n  </span>\n</td>\n'},function(module,exports){module.exports='<div class="truncate-by-height">\n  <%= body %>\n</div>'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getLimitedSearchResultsMessage=getLimitedSearchResultsMessage;function getLimitedSearchResultsMessage(resultCount){return"Limited to "+resultCount+" results. Refine your search."}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:true});var EmbeddableFactory=function EmbeddableFactory(){_classCallCheck(this,EmbeddableFactory)};exports.EmbeddableFactory=EmbeddableFactory},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var __importStar=(void 0,function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);result["default"]=mod;return result});Object.defineProperty(exports,"__esModule",{value:true});var PropTypes=__importStar(__webpack_require__(4));exports.embeddableShape=PropTypes.shape({destroy:PropTypes.func.isRequired,metadata:PropTypes.object.isRequired,onContainerStateChanged:PropTypes.func.isRequired,render:PropTypes.func.isRequired});var Embeddable=function(){function Embeddable(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,Embeddable);this.metadata={};this.metadata=options.metadata||{};options.render&&(this.render=options.render);options.destroy&&(this.destroy=options.destroy);options.onContainerStateChanged&&(this.onContainerStateChanged=options.onContainerStateChanged)}_createClass(Embeddable,[{key:"getInspectorAdapters",value:function getInspectorAdapters(){return}},{key:"destroy",value:function destroy(){return}}]);return Embeddable}();exports.Embeddable=Embeddable},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SearchEmbeddable=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _angular=__webpack_require__(16);var _angular2=_interopRequireDefault(_angular);var _embeddable=__webpack_require__(378);var _search_template=__webpack_require__(4856);var _search_template2=_interopRequireDefault(_search_template);var _columns=__webpack_require__(1596);var columnActions=_interopRequireWildcard(_columns);var _get_time=__webpack_require__(809);function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);newObj.default=obj;return newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.SearchEmbeddable=function(_Embeddable){_inherits(SearchEmbeddable,_Embeddable);function SearchEmbeddable(_ref){var onEmbeddableStateChanged=_ref.onEmbeddableStateChanged,savedSearch=_ref.savedSearch,editUrl=_ref.editUrl,loader=_ref.loader,$rootScope=_ref.$rootScope,$compile=_ref.$compile;_classCallCheck(this,SearchEmbeddable);var _this=_possibleConstructorReturn(this,(SearchEmbeddable.__proto__||Object.getPrototypeOf(SearchEmbeddable)).call(this,{metadata:{title:savedSearch.title,editUrl:editUrl,indexPattern:savedSearch.searchSource.getField("index")}}));_this.onEmbeddableStateChanged=onEmbeddableStateChanged;_this.savedSearch=savedSearch;_this.loader=loader;_this.$rootScope=$rootScope;_this.$compile=$compile;_this.customization={};return _this}_createClass(SearchEmbeddable,[{key:"emitEmbeddableStateChange",value:function emitEmbeddableStateChange(embeddableState){this.onEmbeddableStateChanged(embeddableState)}},{key:"getEmbeddableState",value:function getEmbeddableState(){return{customization:this.customization}}},{key:"pushContainerStateParamsToScope",value:function pushContainerStateParamsToScope(){this.searchScope.columns=this.customization.columns||this.savedSearch.columns;this.searchScope.sort=this.customization.sort||this.savedSearch.sort;this.searchScope.sharedItemTitle=this.panelTitle;this.filtersSearchSource.setField("filter",this.filters);this.filtersSearchSource.setField("query",this.query)}},{key:"onContainerStateChanged",value:function onContainerStateChanged(containerState){this.customization=containerState.embeddableCustomization||{};this.filters=containerState.filters;this.query=containerState.query;this.timeRange=containerState.timeRange;this.panelTitle="";containerState.hidePanelTitles||(this.panelTitle=void 0!==containerState.customTitle?containerState.customTitle:this.savedSearch.title);this.searchScope&&this.pushContainerStateParamsToScope()}},{key:"initializeSearchScope",value:function initializeSearchScope(){var _this2=this;this.searchScope=this.$rootScope.$new();this.searchScope.description=this.savedSearch.description;this.searchScope.searchSource=this.savedSearch.searchSource;var timeRangeSearchSource=this.searchScope.searchSource.create();timeRangeSearchSource.setField("filter",function(){return(0,_get_time.getTime)(_this2.searchScope.searchSource.getField("index"),_this2.timeRange)});this.filtersSearchSource=this.searchScope.searchSource.create();this.filtersSearchSource.setParent(timeRangeSearchSource);this.searchScope.searchSource.setParent(this.filtersSearchSource);this.pushContainerStateParamsToScope();this.searchScope.setSortOrder=function(columnName,direction){_this2.searchScope.sort=_this2.customization.sort=[columnName,direction];_this2.emitEmbeddableStateChange(_this2.getEmbeddableState())};this.searchScope.addColumn=function(columnName){_this2.savedSearch.searchSource.getField("index").popularizeField(columnName,1);columnActions.addColumn(_this2.searchScope.columns,columnName);_this2.searchScope.columns=_this2.customization.columns=_this2.searchScope.columns;_this2.emitEmbeddableStateChange(_this2.getEmbeddableState())};this.searchScope.removeColumn=function(columnName){_this2.savedSearch.searchSource.getField("index").popularizeField(columnName,1);columnActions.removeColumn(_this2.searchScope.columns,columnName);_this2.customization.columns=_this2.searchScope.columns;_this2.emitEmbeddableStateChange(_this2.getEmbeddableState())};this.searchScope.moveColumn=function(columnName,newIndex){columnActions.moveColumn(_this2.searchScope.columns,columnName,newIndex);_this2.customization.columns=_this2.searchScope.columns;_this2.emitEmbeddableStateChange(_this2.getEmbeddableState())};this.searchScope.filter=function(field,value,operator){var index=_this2.savedSearch.searchSource.getField("index").id;var stagedFilter={field:field,value:value,operator:operator,index:index};_this2.emitEmbeddableStateChange(_extends({},_this2.getEmbeddableState(),{stagedFilter:stagedFilter}))}}},{key:"render",value:function render(domNode,containerState){this.onContainerStateChanged(containerState);this.domNode=domNode;this.initializeSearchScope();this.searchInstance=this.$compile(_search_template2.default)(this.searchScope);var rootNode=_angular2.default.element(domNode);rootNode.append(this.searchInstance)}},{key:"destroy",value:function destroy(){this.savedSearch.destroy();if(this.searchScope){this.searchInstance.remove();this.searchScope.$destroy();delete this.searchScope}}}]);return SearchEmbeddable}(_embeddable.Embeddable)},function(module,exports){module.exports='<doc-table\n  search-source="searchSource"\n  sorting="sort"\n  columns="columns"\n  data-shared-item\n  data-title="{{sharedItemTitle}}"\n  data-description="{{description}}"\n  render-complete\n  class="panel-content"\n  filter="filter"\n  on-add-column="addColumn"\n  on-change-sort-order="setSortOrder"\n  on-move-column="moveColumn"\n  on-remove-column="removeColumn"\n  data-test-subj="embeddedSavedSearchDocTable"\n>\n</doc-table>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.visualizeEmbeddableFactoryProvider=visualizeEmbeddableFactoryProvider;var _visualize_embeddable_factory=__webpack_require__(4858);var _embeddable_factories_registry=__webpack_require__(668);function visualizeEmbeddableFactoryProvider(Private){var VisualizeEmbeddableFactoryProvider=function VisualizeEmbeddableFactoryProvider(savedVisualizations,config){return new _visualize_embeddable_factory.VisualizeEmbeddableFactory(savedVisualizations,config)};return Private(VisualizeEmbeddableFactoryProvider)}_embeddable_factories_registry.EmbeddableFactoriesRegistryProvider.register(visualizeEmbeddableFactoryProvider)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VisualizeEmbeddableFactory=void 0;var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _jquery=__webpack_require__(13);var _jquery2=_interopRequireDefault(_jquery);var _loader=__webpack_require__(930);var _embeddable=__webpack_require__(378);var _visualize_embeddable=__webpack_require__(4859);var _visualize_lab_disabled=__webpack_require__(4860);var _visualize_lab_disabled2=_interopRequireDefault(_visualize_lab_disabled);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.VisualizeEmbeddableFactory=function(_EmbeddableFactory){_inherits(VisualizeEmbeddableFactory,_EmbeddableFactory);function VisualizeEmbeddableFactory(savedVisualizations,config){_classCallCheck(this,VisualizeEmbeddableFactory);var _this=_possibleConstructorReturn(this,(VisualizeEmbeddableFactory.__proto__||Object.getPrototypeOf(VisualizeEmbeddableFactory)).call(this));_this._config=config;_this.savedVisualizations=savedVisualizations;_this.name="visualization";return _this}_createClass(VisualizeEmbeddableFactory,[{key:"getEditPath",value:function getEditPath(panelId){return this.savedVisualizations.urlFor(panelId)}},{key:"create",value:function create(panelMetadata,onEmbeddableStateChanged){var _this2=this;var visId=panelMetadata.id;var editUrl=this.getEditPath(visId);var waitFor=[(0,_loader.getVisualizeLoader)(),this.savedVisualizations.get(visId)];return Promise.all(waitFor).then(function(_ref){var _ref2=_slicedToArray(_ref,2),loader=_ref2[0],savedObject=_ref2[1];var isLabsEnabled=_this2._config.get("visualize:enableLabs");return isLabsEnabled||"lab"!==savedObject.vis.type.stage?new _visualize_embeddable.VisualizeEmbeddable({onEmbeddableStateChanged:onEmbeddableStateChanged,savedVisualization:savedObject,editUrl:editUrl,loader:loader}):new _embeddable.Embeddable({metadata:{title:savedObject.title},render:function render(domNode){var template=(0,_jquery2.default)(_visualize_lab_disabled2.default);template.find(".disabledLabVisualization__title").text(savedObject.title);(0,_jquery2.default)(domNode).html(template)}})})}}]);return VisualizeEmbeddableFactory}(_embeddable.EmbeddableFactory)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VisualizeEmbeddable=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _persisted_state=__webpack_require__(800);var _embeddable=__webpack_require__(378);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.VisualizeEmbeddable=function(_Embeddable){_inherits(VisualizeEmbeddable,_Embeddable);function VisualizeEmbeddable(_ref){var onEmbeddableStateChanged=_ref.onEmbeddableStateChanged,savedVisualization=_ref.savedVisualization,editUrl=_ref.editUrl,loader=_ref.loader;_classCallCheck(this,VisualizeEmbeddable);var _this=_possibleConstructorReturn(this,(VisualizeEmbeddable.__proto__||Object.getPrototypeOf(VisualizeEmbeddable)).call(this,{metadata:{title:savedVisualization.title,editUrl:editUrl,indexPattern:savedVisualization.vis.indexPattern}}));_this._uiStateChangeHandler=function(){_this.customization=_this.uiState.toJSON();_this._onEmbeddableStateChanged(_this.getEmbeddableState())};_this._onEmbeddableStateChanged=onEmbeddableStateChanged;_this.savedVisualization=savedVisualization;_this.loader=loader;var parsedUiState=savedVisualization.uiStateJSON?JSON.parse(savedVisualization.uiStateJSON):{};_this.uiState=new _persisted_state.PersistedState(parsedUiState);_this.uiState.on("change",_this._uiStateChangeHandler);return _this}_createClass(VisualizeEmbeddable,[{key:"getInspectorAdapters",value:function getInspectorAdapters(){return this.savedVisualization.vis.API.inspectorAdapters}},{key:"getEmbeddableState",value:function getEmbeddableState(){return{customization:this.customization}}},{key:"transferCustomizationsToUiState",value:function transferCustomizationsToUiState(containerState){var _this2=this;var customization=containerState.embeddableCustomization;if(!_lodash2.default.isEqual(this.customization,customization)){this.uiState.off("change",this._uiStateChangeHandler);this.uiState.clearAllKeys();Object.getOwnPropertyNames(customization).forEach(function(key){_this2.uiState.set(key,customization[key])});this.customization=customization;this.uiState.on("change",this._uiStateChangeHandler)}}},{key:"getPanelTitle",value:function getPanelTitle(containerState){var derivedPanelTitle="";containerState.hidePanelTitles||(derivedPanelTitle=void 0!==containerState.customTitle?containerState.customTitle:this.savedVisualization.title);return derivedPanelTitle}},{key:"onContainerStateChanged",value:function onContainerStateChanged(containerState){this.transferCustomizationsToUiState(containerState);var updatedParams={};if(containerState.timeRange!==this.timeRange){updatedParams.timeRange=containerState.timeRange;this.timeRange=containerState.timeRange}if(containerState.filters!==this.filters){updatedParams.filters=containerState.filters;this.filters=containerState.filters}if(containerState.query!==this.query){updatedParams.query=containerState.query;this.query=containerState.query}var derivedPanelTitle=this.getPanelTitle(containerState);if(this.panelTitle!==derivedPanelTitle){updatedParams.dataAttrs={title:derivedPanelTitle};this.panelTitle=derivedPanelTitle}this.handler&&!_lodash2.default.isEmpty(updatedParams)&&this.handler.update(updatedParams)}},{key:"render",value:function render(domNode,containerState){this.panelTitle=this.getPanelTitle(containerState);this.timeRange=containerState.timeRange;this.query=containerState.query;this.filters=containerState.filters;this.transferCustomizationsToUiState(containerState);var handlerParams={uiState:this.uiState,append:true,timeRange:containerState.timeRange,query:containerState.query,filters:containerState.filters,cssClass:"panel-content panel-content--fullWidth",dataAttrs:{"shared-item":"",title:this.panelTitle,description:this.savedVisualization.description}};this.handler=this.loader.embedVisualizationWithSavedObject(domNode,this.savedVisualization,handlerParams)}},{key:"destroy",value:function destroy(){this.uiState.off("change",this._uiStateChangeHandler);this.savedVisualization.destroy();if(this.handler){this.handler.destroy();this.handler.getElement().remove()}}}]);return VisualizeEmbeddable}(_embeddable.Embeddable)},function(module,exports){module.exports='<div class="disabledLabVisualization">\n  <div class="kuiVerticalRhythm disabledLabVisualization__icon kuiIcon fa-flask" aria-hidden="true"></div>\n  <div class="kuiVerticalRhythm"><em class="disabledLabVisualization__title"></em> is a lab visualization.</div>\n  <div class="kuiVerticalRhythm">Please turn on lab-mode in the advanced settings to see lab visualizations.</div>\n</div>\n'},,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";__webpack_require__(4883);__webpack_require__(4885)},function(module,exports,__webpack_require__){"use strict";var _typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"===typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _doc_views=__webpack_require__(929);var _table=__webpack_require__(4884);var _table2=_interopRequireDefault(_table);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_doc_views.DocViewsRegistryProvider.register(function(){return{title:"Table",order:10,directive:{template:_table2.default,scope:{hit:"=",indexPattern:"=",filter:"=",columns:"=",onAddColumn:"=",onRemoveColumn:"="},controller:function controller($scope){$scope.mapping=$scope.indexPattern.fields.byName;$scope.flattened=$scope.indexPattern.flattenHit($scope.hit);$scope.formatted=$scope.indexPattern.formatHit($scope.hit);$scope.fields=_lodash2.default.keys($scope.flattened).sort();$scope.canToggleColumns=function canToggleColumn(){return _lodash2.default.isFunction($scope.onAddColumn)&&_lodash2.default.isFunction($scope.onRemoveColumn)};$scope.toggleColumn=function toggleColumn(columnName){$scope.columns.includes(columnName)?$scope.onRemoveColumn(columnName):$scope.onAddColumn(columnName)};$scope.isColumnActive=function isColumnActive(columnName){return $scope.columns.includes(columnName)};$scope.showArrayInObjectsWarning=function(row,field){var value=$scope.flattened[field];return Array.isArray(value)&&"object"===_typeof(value[0])}}}}})},function(module,exports){module.exports='<table class="table table-condensed">\n  <tbody>\n    <tr ng-repeat="field in fields" data-test-subj="tableDocViewRow-{{ field }}">\n      <td field-name="field"\n          field-type="mapping[field].type"\n          width="1%"\n          class="doc-viewer-field">\n      </td>\n      <td width="1%" class="doc-viewer-buttons" ng-if="filter">\n        <span ng-if="mapping[field].filterable">\n          <button\n            class="doc-viewer-button"\n            aria-label="Filter for value"\n            ng-click="filter(mapping[field], flattened[field], \'+\')"\n            data-test-subj="addInclusiveFilterButton"\n            tooltip="Filter for value"\n            tooltip-append-to-body="1"\n          >\n            <i\n              class="fa fa-search-plus"></i>\n          </button>\n\n          <button\n            class="doc-viewer-button"\n            aria-label="Filter out value"\n            ng-click="filter(mapping[field], flattened[field],\'-\')"\n            tooltip="Filter out value"\n            tooltip-append-to-body="1"\n          >\n            <i\n              class="fa fa-search-minus"></i>\n          </button>\n        </span>\n        <span ng-if="!mapping[field].filterable" tooltip="Unindexed fields can not be searched">\n          <i class="fa fa-search-plus text-muted"></i>\n          <i class="fa fa-search-minus text-muted"></i>\n        </span>\n        <span ng-if="canToggleColumns()">\n          <button\n            class="doc-viewer-button"\n            aria-label="Toggle column in table"\n            aria-pressed="{{isColumnActive(field)}}"\n            ng-click="toggleColumn(field)"\n            tooltip-append-to-body="1"\n            tooltip="Toggle column in table"\n          >\n            <i\n              class="fa fa-columns"\n            ></i>\n          </button>\n        </span>\n        <span ng-if="!indexPattern.metaFields.includes(field) && !mapping[field].scripted">\n          <button\n            class="doc-viewer-button"\n            aria-label="Filter for field present"\n            ng-click="filter(\'_exists_\', field, \'+\')"\n            tooltip="Filter for field present"\n            tooltip-append-to-body="1"\n          >\n            <i\n              class="fa fa-asterisk"></i>\n          </button>\n        </span>\n        <span ng-if="indexPattern.metaFields.includes(field)" tooltip="Unable to filter for presence of meta fields">\n          <i class="fa fa-asterisk text-muted"></i>\n        </span>\n        <span ng-if="mapping[field].scripted" tooltip="Unable to filter for presence of scripted fields">\n          <i class="fa fa-asterisk text-muted"></i>\n        </span>\n      </td>\n\n      <td>\n        <i ng-if="!mapping[field] && field[0] === \'_\'"\n          tooltip-placement="top"\n          tooltip="Field names beginning with _ are not supported"\n          class="fa fa-warning text-color-warning doc-viewer-underscore"></i>\n        <i ng-if="!mapping[field] && field[0] !== \'_\' && !showArrayInObjectsWarning(doc, field)"\n          tooltip-placement="top"\n          tooltip="No cached mapping for this field. Refresh field list from the Management > Index Patterns page"\n          class="fa fa-warning text-color-warning doc-viewer-no-mapping"></i>\n        <i ng-if="showArrayInObjectsWarning(doc, field)"\n          tooltip-placement="top"\n          tooltip="Objects in arrays are not well supported."\n          class="fa fa-warning text-color-warning doc-viewer-object-array"></i>\n        <div class="doc-viewer-value" ng-bind-html="typeof(formatted[field]) === \'undefined\' ? hit[field] : formatted[field] | trustAsHtml"></div>\n      </td>\n    </tr>\n  </tbody>\n</table>\n'},function(module,exports,__webpack_require__){"use strict";var _angular=__webpack_require__(16);var _angular2=_interopRequireDefault(_angular);__webpack_require__(118);var _doc_views=__webpack_require__(929);var _json=__webpack_require__(4886);var _json2=_interopRequireDefault(_json);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_doc_views.DocViewsRegistryProvider.register(function(){return{title:"JSON",order:20,directive:{template:_json2.default,scope:{hit:"="},controller:function controller($scope){$scope.hitJson=_angular2.default.toJson($scope.hit,true);$scope.aceLoaded=function(editor){editor.$blockScrolling=Infinity}}}}})},function(module,exports){module.exports='<div\n  id="json-ace"\n  ng-model="hitJson"\n  readonly\n  ui-ace="{\n    useWrapMode: true,\n    onLoad: aceLoaded,\n    advanced: {\n      highlightActiveLine: false\n    },\n    rendererOptions: {\n      showPrintMargin: false,\n      maxLines: 4294967296\n    },\n    mode: \'json\'\n  }"></div>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.defaultSearchStrategy=void 0;var serializeAllFetchParams=(_ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(fetchParams,searchRequests,serializeFetchParams){var searcRequestsWithFetchParams,failedSearchRequests;return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:searcRequestsWithFetchParams=[];failedSearchRequests=[];fetchParams.forEach(function(result,index){if(result.resolved)searcRequestsWithFetchParams.push(result.resolved);else{var searchRequest=searchRequests[index];searchRequest.handleFailure(result.rejected);failedSearchRequests.push(searchRequest)}});_context.next=5;return serializeFetchParams(searcRequestsWithFetchParams);case 5:_context.t0=_context.sent;_context.t1=failedSearchRequests;return _context.abrupt("return",{serializedFetchParams:_context.t0,failedSearchRequests:_context.t1});case 8:case"end":return _context.stop()}},_callee,this)})),function serializeAllFetchParams(_x,_x2,_x3){return _ref.apply(this,arguments)});var _ref;var _search_strategy_registry=__webpack_require__(1283);var _is_default_type_index_pattern=__webpack_require__(1284);function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function getAllFetchParams(searchRequests,Promise){return Promise.map(searchRequests,function(searchRequest){return Promise.try(searchRequest.getFetchParams,void 0,searchRequest).then(function(fetchParams){return searchRequest.fetchParams=fetchParams}).then(function(value){return{resolved:value}}).catch(function(error){return{rejected:error}})})}var defaultSearchStrategy=exports.defaultSearchStrategy={id:"default",search:function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(_ref2){var searchRequests=_ref2.searchRequests,es=_ref2.es,Promise=_ref2.Promise,serializeFetchParams=_ref2.serializeFetchParams;var allFetchParams,_ref4,serializedFetchParams,failedSearchRequests,searching;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getAllFetchParams(searchRequests,Promise);case 2:allFetchParams=_context2.sent;_context2.next=5;return serializeAllFetchParams(allFetchParams,searchRequests,serializeFetchParams);case 5:_ref4=_context2.sent;serializedFetchParams=_ref4.serializedFetchParams;failedSearchRequests=_ref4.failedSearchRequests;searching=es.msearch({body:serializedFetchParams});return _context2.abrupt("return",{searching:searching.then(function(_ref5){var responses=_ref5.responses;return responses}),abort:searching.abort,failedSearchRequests:failedSearchRequests});case 10:case"end":return _context2.stop()}},_callee2,void 0)}));function search(_x4){return _ref3.apply(this,arguments)}return search}(),isViable:function isViable(indexPattern){if(!indexPattern)return false;return(0,_is_default_type_index_pattern.isDefaultTypeIndexPattern)(indexPattern)}};(0,_search_strategy_registry.addSearchStrategy)(defaultSearchStrategy)},,,,,,function(module,exports,__webpack_require__){"use strict";var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _angular=__webpack_require__(16);var _angular2=_interopRequireDefault(_angular);var _modules=__webpack_require__(2);var _chrome=__webpack_require__(8);var _chrome2=_interopRequireDefault(_chrome);var _theme=__webpack_require__(1408);var _notify=__webpack_require__(9);__webpack_require__(936);var _panel_actions_store=__webpack_require__(1602);var _dashboard_strings=__webpack_require__(4899);var _dashboard_view_mode=__webpack_require__(122);var _top_nav_ids=__webpack_require__(1603);var _confirm_modal=__webpack_require__(837);var _query_filter=__webpack_require__(274);var _doc_title=__webpack_require__(365);var _get_top_nav_config=__webpack_require__(4900);var _dashboard_constants=__webpack_require__(251);var _visualize_constants=__webpack_require__(415);var _dashboard_state_manager=__webpack_require__(4903);var _lib=__webpack_require__(1639);var _show_clone_modal=__webpack_require__(5015);var _show_save_modal=__webpack_require__(5017);var _show_add_panel=__webpack_require__(5019);var _migrateLegacyQuery=__webpack_require__(600);var _filter=__webpack_require__(1640);var filterActions=_interopRequireWildcard(_filter);var _filter_manager=__webpack_require__(612);var _embeddable_factories_registry=__webpack_require__(668);var _dashboard_panel_actions_registry=__webpack_require__(1638);var _vis_types=__webpack_require__(95);var _timefilter=__webpack_require__(14);var _dashboard_viewport_provider=__webpack_require__(5023);function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);newObj.default=obj;return newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var app=_modules.uiModules.get("app/dashboard",["elasticsearch","ngRoute","react","kibana/courier","kibana/config","kibana/typeahead"]);app.directive("dashboardViewportProvider",function(reactDirective){return reactDirective(_dashboard_viewport_provider.DashboardViewportProvider)});app.directive("dashboardApp",function($injector){var courier=$injector.get("courier");var AppState=$injector.get("AppState");var kbnUrl=$injector.get("kbnUrl");var confirmModal=$injector.get("confirmModal");var config=$injector.get("config");var Private=$injector.get("Private");return{restrict:"E",controllerAs:"dashboardApp",controller:function controller($scope,$rootScope,$route,$routeParams,$location,getAppState,dashboardConfig,localStorage){var _this=this;var filterManager=Private(_filter_manager.FilterManagerProvider);var filterBar=Private(_query_filter.FilterBarQueryFilterProvider);var docTitle=Private(_doc_title.DocTitleProvider);var embeddableFactories=Private(_embeddable_factories_registry.EmbeddableFactoriesRegistryProvider);var panelActionsRegistry=Private(_dashboard_panel_actions_registry.DashboardPanelActionsRegistryProvider);_panel_actions_store.panelActionsStore.initializeFromRegistry(panelActionsRegistry);var visTypes=Private(_vis_types.VisTypesRegistryProvider);$scope.getEmbeddableFactory=function(panelType){return embeddableFactories.byName[panelType]};var dash=$scope.dash=$route.current.locals.dash;dash.id&&docTitle.change(dash.title);var dashboardStateManager=new _dashboard_state_manager.DashboardStateManager({savedDashboard:dash,AppState:AppState,hideWriteControls:dashboardConfig.getHideWriteControls(),addFilter:function addFilter(_ref){var field=_ref.field,value=_ref.value,operator=_ref.operator,index=_ref.index;filterActions.addFilter(field,value,operator,index,dashboardStateManager.getAppState(),filterManager)}});$scope.getDashboardState=function(){return dashboardStateManager};$scope.appState=dashboardStateManager.getAppState();dashboardStateManager.getIsTimeSavedWithDashboard()&&!getAppState.previouslyStored()&&dashboardStateManager.syncTimefilterWithDashboard(_timefilter.timefilter,config.get("timepicker:quickRanges"));var updateState=function updateState(){$scope.model={query:dashboardStateManager.getQuery(),useMargins:dashboardStateManager.getUseMargins(),hidePanelTitles:dashboardStateManager.getHidePanelTitles(),darkTheme:dashboardStateManager.getDarkTheme(),timeRestore:dashboardStateManager.getTimeRestore(),title:dashboardStateManager.getTitle(),description:dashboardStateManager.getDescription()};$scope.panels=dashboardStateManager.getPanels();$scope.indexPatterns=dashboardStateManager.getPanelIndexPatterns()};this.appStatus={dirty:!dash.id};this.getSharingTitle=function(){return dash.title};this.getSharingType=function(){return"dashboard"};dashboardStateManager.registerChangeListener(function(status){_this.appStatus.dirty=status.dirty||!dash.id;updateState()});dashboardStateManager.applyFilters(dashboardStateManager.getQuery()||{query:"",language:localStorage.get("kibana.userQueryLanguage")||config.get("search:queryLanguage")},filterBar.getFilters());_timefilter.timefilter.enableAutoRefreshSelector();_timefilter.timefilter.enableTimeRangeSelector();updateState();$scope.refresh=function(){$rootScope.$broadcast("fetch");courier.fetch()};dashboardStateManager.handleTimeChange(_timefilter.timefilter.getTime());$scope.expandedPanel=null;$scope.dashboardViewMode=dashboardStateManager.getViewMode();$scope.landingPageUrl=function(){return"#"+_dashboard_constants.DashboardConstants.LANDING_PAGE_PATH};$scope.hasExpandedPanel=function(){return null!==$scope.expandedPanel};$scope.getDashTitle=function(){return(0,_dashboard_strings.getDashboardTitle)(dashboardStateManager.getTitle(),dashboardStateManager.getViewMode(),dashboardStateManager.getIsDirty(_timefilter.timefilter))};$scope.newDashboard=function(){kbnUrl.change(_dashboard_constants.DashboardConstants.CREATE_NEW_DASHBOARD_URL,{})};$scope.saveState=function(){return dashboardStateManager.saveState()};$scope.getShouldShowEditHelp=function(){return!dashboardStateManager.getPanels().length&&dashboardStateManager.getIsEditMode()&&!dashboardConfig.getHideWriteControls()};$scope.getShouldShowViewHelp=function(){return!dashboardStateManager.getPanels().length&&dashboardStateManager.getIsViewMode()&&!dashboardConfig.getHideWriteControls()};$scope.minimizeExpandedPanel=function(){$scope.expandedPanel=null};$scope.expandPanel=function(panelIndex){$scope.expandedPanel=dashboardStateManager.getPanels().find(function(panel){return panel.panelIndex===panelIndex})};$scope.updateQueryAndFetch=function(query){$scope.model.query=(0,_migrateLegacyQuery.migrateLegacyQuery)(query);dashboardStateManager.applyFilters($scope.model.query,filterBar.getFilters());$scope.refresh()};$scope.$watch("model.hidePanelTitles",function(){dashboardStateManager.setHidePanelTitles($scope.model.hidePanelTitles)});$scope.$watch("model.useMargins",function(){dashboardStateManager.setUseMargins($scope.model.useMargins)});$scope.$watch("model.darkTheme",function(){dashboardStateManager.setDarkTheme($scope.model.darkTheme);updateTheme()});$scope.indexPatterns=[];$scope.onPanelRemoved=function(panelIndex){dashboardStateManager.removePanel(panelIndex);$scope.indexPatterns=dashboardStateManager.getPanelIndexPatterns()};$scope.$watch("model.query",$scope.updateQueryAndFetch);$scope.$listenAndDigestAsync(_timefilter.timefilter,"fetch",function(){dashboardStateManager.handleTimeChange(_timefilter.timefilter.getTime());$scope.refresh()});function updateViewMode(newMode){$scope.topNavMenu=(0,_get_top_nav_config.getTopNavConfig)(newMode,navActions,dashboardConfig.getHideWriteControls());dashboardStateManager.switchViewMode(newMode);$scope.dashboardViewMode=newMode}var onChangeViewMode=function onChangeViewMode(newMode){var isPageRefresh=newMode===dashboardStateManager.getViewMode();var isLeavingEditMode=!isPageRefresh&&newMode===_dashboard_view_mode.DashboardViewMode.VIEW;var willLoseChanges=isLeavingEditMode&&dashboardStateManager.getIsDirty(_timefilter.timefilter);if(!willLoseChanges){updateViewMode(newMode);return}function revertChangesAndExitEditMode(){dashboardStateManager.resetState();kbnUrl.change(dash.id?(0,_dashboard_constants.createDashboardEditUrl)(dash.id):_dashboard_constants.DashboardConstants.CREATE_NEW_DASHBOARD_URL);updateViewMode(_dashboard_view_mode.DashboardViewMode.VIEW);dashboardStateManager.getIsTimeSavedWithDashboard()&&dashboardStateManager.syncTimefilterWithDashboard(_timefilter.timefilter,config.get("timepicker:quickRanges"))}confirmModal("Once you discard your changes, there's no getting them back.",{onConfirm:revertChangesAndExitEditMode,onCancel:_lodash2.default.noop,confirmButtonText:"Discard changes",cancelButtonText:"Continue editing",defaultFocusedButton:_confirm_modal.ConfirmationButtonTypes.CANCEL,title:"Discard changes to dashboard?"})};function save(saveOptions){return(0,_lib.saveDashboard)(_angular2.default.toJson,_timefilter.timefilter,dashboardStateManager,saveOptions).then(function(id){$scope.kbnTopNav.close("save");if(id){_notify.toastNotifications.addSuccess({title:"Dashboard '"+dash.title+"' was saved","data-test-subj":"saveDashboardSuccess"});if(dash.id!==$routeParams.id)kbnUrl.change((0,_dashboard_constants.createDashboardEditUrl)(dash.id));else{docTitle.change(dash.lastSavedTitle);updateViewMode(_dashboard_view_mode.DashboardViewMode.VIEW)}}return{id:id}}).catch(function(error){_notify.toastNotifications.addDanger({title:"Dashboard '"+dash.title+"' was not saved. Error: "+error.message,"data-test-subj":"saveDashboardFailure"});return{error:error}})}$scope.showFilterBar=function(){return filterBar.getFilters().length>0||!dashboardStateManager.getFullScreenMode()};$scope.showAddPanel=function(){dashboardStateManager.setFullScreenMode(false);$scope.kbnTopNav.click(_top_nav_ids.TopNavIds.ADD)};$scope.enterEditMode=function(){dashboardStateManager.setFullScreenMode(false);$scope.kbnTopNav.click("edit")};var navActions={};navActions[_top_nav_ids.TopNavIds.FULL_SCREEN]=function(){return dashboardStateManager.setFullScreenMode(true)};navActions[_top_nav_ids.TopNavIds.EXIT_EDIT_MODE]=function(){return onChangeViewMode(_dashboard_view_mode.DashboardViewMode.VIEW)};navActions[_top_nav_ids.TopNavIds.ENTER_EDIT_MODE]=function(){return onChangeViewMode(_dashboard_view_mode.DashboardViewMode.EDIT)};navActions[_top_nav_ids.TopNavIds.SAVE]=function(){var currentTitle=dashboardStateManager.getTitle();var currentDescription=dashboardStateManager.getDescription();var currentTimeRestore=dashboardStateManager.getTimeRestore();var onSave=function onSave(_ref2){var newTitle=_ref2.newTitle,newDescription=_ref2.newDescription,newCopyOnSave=_ref2.newCopyOnSave,newTimeRestore=_ref2.newTimeRestore,isTitleDuplicateConfirmed=_ref2.isTitleDuplicateConfirmed,onTitleDuplicate=_ref2.onTitleDuplicate;dashboardStateManager.setTitle(newTitle);dashboardStateManager.setDescription(newDescription);dashboardStateManager.savedDashboard.copyOnSave=newCopyOnSave;dashboardStateManager.setTimeRestore(newTimeRestore);var saveOptions={confirmOverwrite:false,isTitleDuplicateConfirmed:isTitleDuplicateConfirmed,onTitleDuplicate:onTitleDuplicate};return save(saveOptions).then(function(_ref3){var id=_ref3.id,error=_ref3.error;if(!id||error){dashboardStateManager.setTitle(currentTitle);dashboardStateManager.setDescription(currentDescription);dashboardStateManager.setTimeRestore(currentTimeRestore)}return{id:id,error:error}})};(0,_show_save_modal.showSaveModal)({onSave:onSave,title:currentTitle,description:currentDescription,timeRestore:currentTimeRestore,showCopyOnSave:!!dash.id})};navActions[_top_nav_ids.TopNavIds.CLONE]=function(){var currentTitle=dashboardStateManager.getTitle();var onClone=function onClone(newTitle,isTitleDuplicateConfirmed,onTitleDuplicate){dashboardStateManager.savedDashboard.copyOnSave=true;dashboardStateManager.setTitle(newTitle);var saveOptions={confirmOverwrite:false,isTitleDuplicateConfirmed:isTitleDuplicateConfirmed,onTitleDuplicate:onTitleDuplicate};return save(saveOptions).then(function(_ref4){var id=_ref4.id,error=_ref4.error;id&&!error||dashboardStateManager.setTitle(currentTitle);return{id:id,error:error}})};(0,_show_clone_modal.showCloneModal)(onClone,currentTitle)};navActions[_top_nav_ids.TopNavIds.ADD]=function(){var addNewVis=function addNewVis(){kbnUrl.change(_visualize_constants.VisualizeConstants.WIZARD_STEP_1_PAGE_PATH+"?"+_dashboard_constants.DashboardConstants.ADD_VISUALIZATION_TO_DASHBOARD_MODE_PARAM);$scope.$apply()};var isLabsEnabled=config.get("visualize:enableLabs");var listingLimit=config.get("savedObjects:listingLimit");(0,_show_add_panel.showAddPanel)(_chrome2.default.getSavedObjectsClient(),dashboardStateManager.addNewPanel,addNewVis,listingLimit,isLabsEnabled,visTypes)};updateViewMode(dashboardStateManager.getViewMode());$scope.$listen(filterBar,"update",function(){dashboardStateManager.applyFilters($scope.model.query,filterBar.getFilters())});$scope.$listen(filterBar,"fetch",$scope.refresh);$scope.$on("$destroy",function(){dashboardStateManager.destroy();setLightTheme()});function updateTheme(){dashboardStateManager.getDarkTheme()?setDarkTheme():setLightTheme()}function setDarkTheme(){_chrome2.default.removeApplicationClass(["theme-light"]);_chrome2.default.addApplicationClass("theme-dark");(0,_theme.applyTheme)("dark")}function setLightTheme(){_chrome2.default.removeApplicationClass(["theme-dark"]);_chrome2.default.addApplicationClass("theme-light");(0,_theme.applyTheme)("light")}if($route.current.params&&$route.current.params[_dashboard_constants.DashboardConstants.NEW_VISUALIZATION_ID_PARAM]){dashboardStateManager.addNewPanel($route.current.params[_dashboard_constants.DashboardConstants.NEW_VISUALIZATION_ID_PARAM],"visualization");kbnUrl.removeParam(_dashboard_constants.DashboardConstants.ADD_VISUALIZATION_TO_DASHBOARD_MODE_PARAM);kbnUrl.removeParam(_dashboard_constants.DashboardConstants.NEW_VISUALIZATION_ID_PARAM)}$scope.opts={dashboard:dash}}}})},function(module,exports,__webpack_require__){"use strict";var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _lodash=__webpack_require__(1);var _modules=__webpack_require__(2);var _compat=__webpack_require__(70);var _query_bar=__webpack_require__(4895);var _query_bar2=_interopRequireDefault(_query_bar);var _suggestion=__webpack_require__(4896);var _suggestion2=_interopRequireDefault(_suggestion);var _autocomplete_providers=__webpack_require__(935);__webpack_require__(4897);__webpack_require__(1400);__webpack_require__(4898);var _static_utils=__webpack_require__(934);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}var _module=_modules.uiModules.get("kibana");_module.directive("queryBar",function(){return{restrict:"E",template:_query_bar2.default,scope:{query:"=",appName:"=?",onSubmit:"&",disableAutoFocus:"=",indexPatterns:"="},controllerAs:"queryBar",bindToController:true,controller:(0,_compat.callAfterBindingsWorkaround)(function($scope,$element,$http,$timeout,config,PersistedLog,indexPatterns){var _this=this;this.appName=this.appName||"global";this.getIndexPatterns=function(){if((0,_lodash.compact)(_this.indexPatterns).length)return Promise.resolve(_this.indexPatterns);return Promise.all([indexPatterns.getDefault()])};this.submit=function(){_this.localQuery.query&&_this.persistedLog.add(_this.localQuery.query);_this.onSubmit({$query:_this.localQuery});_this.suggestions=[]};this.selectLanguage=function(language){_this.localQuery.language=language;_this.localQuery.query="";_this.submit()};this.suggestionTemplate=_suggestion2.default;this.handleKeyDown=function(event){["ArrowLeft","ArrowRight","Home","End"].includes(event.key)&&_this.updateSuggestions()};this.updateSuggestions=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var suggestions;return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return _this.getSuggestions();case 2:suggestions=_context.sent;$scope.$apply(function(){return _this.suggestions=suggestions});case 4:case"end":return _context.stop()}},_callee,_this)}));this.getSuggestions=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var _localQuery,query,language,recentSearchSuggestions,autocompleteProvider,legacyIndexPatterns,indexPatterns,getAutocompleteSuggestions,_$element$find$,selectionStart,selectionEnd,suggestions;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_localQuery=_this.localQuery,query=_localQuery.query,language=_localQuery.language;recentSearchSuggestions=_this.getRecentSearchSuggestions(query);autocompleteProvider=(0,_autocomplete_providers.getAutocompleteProvider)(language);if(autocompleteProvider){_context2.next=5;break}return _context2.abrupt("return",recentSearchSuggestions);case 5:_context2.next=7;return _this.getIndexPatterns();case 7:legacyIndexPatterns=_context2.sent;indexPatterns=(0,_static_utils.getFromLegacyIndexPattern)(legacyIndexPatterns);getAutocompleteSuggestions=autocompleteProvider({config:config,indexPatterns:indexPatterns});_$element$find$=$element.find("input")[0],selectionStart=_$element$find$.selectionStart,selectionEnd=_$element$find$.selectionEnd;_context2.next=13;return getAutocompleteSuggestions({query:query,selectionStart:selectionStart,selectionEnd:selectionEnd});case 13:suggestions=_context2.sent;return _context2.abrupt("return",[].concat(_toConsumableArray(suggestions),_toConsumableArray(recentSearchSuggestions)));case 15:case"end":return _context2.stop()}},_callee2,_this)}));this.onSuggestionSelect=function(_ref3){var type=_ref3.type,text=_ref3.text,start=_ref3.start,end=_ref3.end;var query=_this.localQuery.query;var inputEl=$element.find("input")[0];var selectionStart=inputEl.selectionStart,selectionEnd=inputEl.selectionEnd;var value=query.substr(0,selectionStart)+query.substr(selectionEnd);_this.localQuery.query=inputEl.value=value.substr(0,start)+text+value.substr(end);inputEl.setSelectionRange(start+text.length,start+text.length);"recentSearch"===type?_this.submit():_this.updateSuggestions()};this.getRecentSearchSuggestions=function(query){if(!_this.persistedLog)return[];var recentSearches=_this.persistedLog.get();var matchingRecentSearches=recentSearches.filter(function(search){return search.includes(query)});return matchingRecentSearches.map(function(recentSearch){var text=recentSearch;var start=0;var end=query.length;return{type:"recentSearch",text:text,start:start,end:end}})};$scope.$watch("queryBar.localQuery.language",function(language){if(!language)return;_this.persistedLog=new PersistedLog("typeahead:"+_this.appName+"-"+language,{maxLength:config.get("history:limit"),filterDuplicates:true});_this.updateSuggestions()});$scope.$watch("queryBar.query",function(newQuery){_this.localQuery=_extends({},newQuery)},true);$scope.$watch("queryBar.indexPatterns",function(){_this.updateSuggestions()})})}})},function(module,exports){module.exports='<form\n  role="form"\n  name="queryBarForm"\n  ng-submit="queryBar.submit()"\n>\n  <kbn-typeahead\n    items="queryBar.suggestions"\n    item-template="queryBar.suggestionTemplate"\n    on-select="queryBar.onSuggestionSelect(item)"\n    class="suggestionTypeahead"\n  >\n    <div\n      class="kuiLocalSearch"\n      role="search"\n    >\n\n      <div class="kuiLocalSearchAssistedInput">\n        \x3c!-- Lucene input --\x3e\n        <input\n          ng-if="queryBar.localQuery.language === \'lucene\'"\n          parse-query\n          input-focus\n          disable-input-focus="queryBar.disableAutoFocus"\n          kbn-typeahead-input\n          ng-change="queryBar.updateSuggestions()"\n          ng-model="queryBar.localQuery.query"\n          placeholder="Search... (e.g. status:200 AND extension:PHP)"\n          aria-label="Search input"\n          type="text"\n          class="kuiLocalSearchInput"\n          ng-class="{\'kuiLocalSearchInput-isInvalid\': queryBarForm.$invalid}"\n          data-test-subj="queryInput"\n        >\n\n        \x3c!-- kuery input --\x3e\n        <input\n          ng-if="queryBar.localQuery.language === \'kuery\'"\n          ng-model="queryBar.localQuery.query"\n          ng-model-options="{ debounce: 100 }"\n          ng-trim="false"\n          ng-keydown="queryBar.handleKeyDown($event)"\n          ng-change="queryBar.updateSuggestions()"\n          ng-click="queryBar.updateSuggestions()"\n          input-focus\n          match-pairs\n          disable-input-focus="queryBar.disableAutoFocus"\n          kbn-typeahead-input\n          placeholder="Search... (e.g. status:200 AND extension:PHP)"\n          aria-label="Search input"\n          type="text"\n          class="kuiLocalSearchInput"\n          ng-class="{\'kuiLocalSearchInput-isInvalid\': queryBarForm.$invalid}"\n          data-test-subj="queryInput"\n        />\n        <div class="kuiLocalSearchAssistedInput__assistance">\n            <query-popover\n              language="queryBar.localQuery.language"\n              on-select-language="queryBar.selectLanguage($language)"\n            ></query-popover>\n        </div>\n      </div>\n\n      <button\n        type="submit"\n        aria-label="Search"\n        class="kuiLocalSearchButton"\n        ng-disabled="queryBarForm.$invalid"\n        data-test-subj="querySubmitButton"\n      >\n        <span class="fa fa-search" aria-hidden="true"></span>\n      </button>\n    </div>\n  </kbn-typeahead>\n</form>\n'},function(module,exports){module.exports='<div class="suggestionItem suggestionItem--{{item.type}}">\n  <div class="suggestionItem__type">\n    <div ng-switch="item.type">\n      <div ng-switch-when="field">\n        <icon type="\'kqlField\'"></icon>\n      </div>\n      <div ng-switch-when="value">\n        <icon type="\'kqlValue\'"></icon>\n      </div>\n      <div ng-switch-when="recentSearch">\n        <icon type="\'search\'"></icon>\n      </div>\n      <div ng-switch-when="conjunction">\n        <icon type="\'kqlSelector\'"></icon>\n      </div>\n      <div ng-switch-when="operator">\n        <icon type="\'kqlOperand\'"></icon>\n      </div>\n    </div>\n  </div>\n  <div class="suggestionItem__text">{{item.text}}</div>\n  <div class="suggestionItem__description" ng-bind-html="item.description"></div>\n</div>\n'},function(module,exports){},function(module,exports,__webpack_require__){"use strict";var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _reactDom=__webpack_require__(15);var _reactDom2=_interopRequireDefault(_reactDom);var _modules=__webpack_require__(2);var _documentation_links=__webpack_require__(483);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var luceneQuerySyntaxDocs=_documentation_links.documentationLinks.query.luceneQuerySyntax;var kueryQuerySyntaxDocs=_documentation_links.documentationLinks.query.kueryQuerySyntax;var _module=_modules.uiModules.get("app/kibana",["react"]);_module.directive("queryPopover",function(localStorage){return{restrict:"E",scope:{language:"<",onSelectLanguage:"&"},link:function link($scope,$element){$scope.isPopoverOpen=false;function togglePopover(){$scope.$evalAsync(function(){$scope.isPopoverOpen=!$scope.isPopoverOpen})}function closePopover(){$scope.$evalAsync(function(){$scope.isPopoverOpen=false})}function onSwitchChange(){$scope.$evalAsync(function(){var newLanguage="lucene"===$scope.language?"kuery":"lucene";localStorage.set("kibana.userQueryLanguage",newLanguage);$scope.onSelectLanguage({$language:newLanguage})})}function render(){var button=_react2.default.createElement(_eui.EuiButtonEmpty,{size:"xs",onClick:togglePopover},"Options");var popover=_react2.default.createElement(_eui.EuiPopover,{id:"popover",ownFocus:true,anchorPosition:"downRight",button:button,isOpen:$scope.isPopoverOpen,closePopover:closePopover,withTitle:true},_react2.default.createElement(_eui.EuiPopoverTitle,null,"Syntax options"),_react2.default.createElement("div",{style:{width:"350px"}},_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("p",null,"Our experimental autocomplete and simple syntax features can help you create your queries. Just start typing and youll see matches related to your data. See docs ",_react2.default.createElement(_eui.EuiLink,{href:kueryQuerySyntaxDocs,target:"_blank"},"here"),".")),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiForm,null,_react2.default.createElement(_eui.EuiFormRow,null,_react2.default.createElement(_eui.EuiSwitch,{id:"queryEnhancementOptIn",name:"popswitch",label:"Turn on query features",checked:"kuery"===$scope.language,onChange:onSwitchChange}))),_react2.default.createElement(_eui.EuiHorizontalRule,{margin:"s"}),_react2.default.createElement(_eui.EuiText,{size:"xs"},_react2.default.createElement("p",null,"Not ready yet? Find our lucene docs ",_react2.default.createElement(_eui.EuiLink,{href:luceneQuerySyntaxDocs,target:"_blank"},"here"),"."))));_reactDom2.default.render(popover,$element[0])}$scope.$watch("isPopoverOpen",render);$scope.$watch("language",render)}}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getDashboardTitle=getDashboardTitle;var _dashboard_view_mode=__webpack_require__(122);function getDashboardTitle(title,viewMode,isDirty){var isEditMode=viewMode===_dashboard_view_mode.DashboardViewMode.EDIT;var unsavedSuffix=isEditMode&&isDirty?" (unsaved)":"";var displayTitle=""+title+unsavedSuffix;return isEditMode?"Editing "+displayTitle:displayTitle}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getTopNavConfig=getTopNavConfig;var _dashboard_view_mode=__webpack_require__(122);var _top_nav_ids=__webpack_require__(1603);function getTopNavConfig(dashboardMode,actions,hideWriteControls){switch(dashboardMode){case _dashboard_view_mode.DashboardViewMode.VIEW:return hideWriteControls?[getFullScreenConfig(actions[_top_nav_ids.TopNavIds.FULL_SCREEN])]:[getFullScreenConfig(actions[_top_nav_ids.TopNavIds.FULL_SCREEN]),getShareConfig(),getCloneConfig(actions[_top_nav_ids.TopNavIds.CLONE]),getEditConfig(actions[_top_nav_ids.TopNavIds.ENTER_EDIT_MODE])];case _dashboard_view_mode.DashboardViewMode.EDIT:return[getSaveConfig(actions[_top_nav_ids.TopNavIds.SAVE]),getViewConfig(actions[_top_nav_ids.TopNavIds.EXIT_EDIT_MODE]),getAddConfig(actions[_top_nav_ids.TopNavIds.ADD]),getOptionsConfig(),getShareConfig()];default:return[]}}function getFullScreenConfig(action){return{key:"full screen",description:"Full Screen Mode",testId:"dashboardFullScreenMode",run:action}}function getEditConfig(action){return{key:"edit",description:"Switch to edit mode",testId:"dashboardEditMode",run:action}}function getSaveConfig(action){return{key:_top_nav_ids.TopNavIds.SAVE,description:"Save your dashboard",testId:"dashboardSaveMenuItem",run:action}}function getViewConfig(action){return{key:"cancel",description:"Cancel editing and switch to view-only mode",testId:"dashboardViewOnlyMode",run:action}}function getCloneConfig(action){return{key:_top_nav_ids.TopNavIds.CLONE,description:"Create a copy of your dashboard",testId:"dashboardClone",run:action}}function getAddConfig(action){return{key:_top_nav_ids.TopNavIds.ADD,description:"Add a panel to the dashboard",testId:"dashboardAddPanelButton",run:action}}function getShareConfig(){return{key:_top_nav_ids.TopNavIds.SHARE,description:"Share Dashboard",testId:"dashboardShareButton",template:__webpack_require__(4901)}}function getOptionsConfig(){return{key:_top_nav_ids.TopNavIds.OPTIONS,description:"Options",testId:"dashboardOptionsButton",template:__webpack_require__(4902)}}},function(module,exports){module.exports='<share\n  object-type="dashboard"\n  object-id="{{opts.dashboard.id}}">\n</share>\n'},function(module,exports){module.exports='<form role="form">\n  <h2 class="kuiLocalDropdownTitle">\n    Options\n  </h2>\n\n  <div class="kuiLocalDropdownSection">\n    <label class="kuiCheckBoxLabel">\n      <input\n        class="kuiCheckBox"\n        type="checkbox"\n        ng-model="model.darkTheme"\n        ng-checked="model.darkTheme"\n        data-test-subj="dashboardDarkThemeCheckbox"\n      >\n\n      <span class="kuiCheckBoxLabel__text">\n        Use dark theme\n      </span>\n    </label>\n    <label class="kuiCheckBoxLabel">\n      <input\n        class="kuiCheckBox"\n        type="checkbox"\n        ng-model="model.useMargins"\n        ng-checked="model.useMargins"\n        data-test-subj="dashboardMarginsCheckbox"\n      >\n      <span class="kuiCheckBoxLabel__text">\n        Use margins between panels\n      </span>\n    </label>\n    <label class="kuiCheckBoxLabel">\n      <input\n        class="kuiCheckBox"\n        type="checkbox"\n        ng-model="model.hidePanelTitles"\n        ng-checked="model.hidePanelTitles"\n        data-test-subj="dashboardPanelTitlesCheckbox"\n      >\n      <span class="kuiCheckBoxLabel__text">\n        Hide all panel titles\n      </span>\n    </label>\n  </div>\n</form>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardStateManager=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _moment=__webpack_require__(10);var _moment2=_interopRequireDefault(_moment);var _dashboard_view_mode=__webpack_require__(122);var _filter_utils=__webpack_require__(937);var _panel_utils=__webpack_require__(1604);var _store=__webpack_require__(1605);var _actions=__webpack_require__(303);var _state_monitor_factory=__webpack_require__(669);var _panel=__webpack_require__(1631);var _lib=__webpack_require__(1639);var _selectors=__webpack_require__(1630);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.DashboardStateManager=function(){function DashboardStateManager(_ref){var _this=this;var savedDashboard=_ref.savedDashboard,AppState=_ref.AppState,hideWriteControls=_ref.hideWriteControls,addFilter=_ref.addFilter;_classCallCheck(this,DashboardStateManager);this.addNewPanel=function(id,type){var maxPanelIndex=_panel_utils.PanelUtils.getMaxPanelIndex(_this.getPanels());var newPanel=(0,_panel.createPanelState)(id,type,maxPanelIndex,_this.getPanels());_this.getPanels().push(newPanel);_this.saveState()};this.savedDashboard=savedDashboard;this.hideWriteControls=hideWriteControls;this.addFilter=addFilter;this.stateDefaults=(0,_lib.getAppStateDefaults)(this.savedDashboard,this.hideWriteControls);this.appState=new AppState(this.stateDefaults);(0,_lib.migrateAppState)(this.appState);this.isDirty=false;this.lastSavedDashboardFilters=this.getFilterState();this.panelIndexPatternMapping={};_panel_utils.PanelUtils.initPanelIndexes(this.getPanels());this.createStateMonitor();_store.store.dispatch((0,_actions.minimizePanel)());this._pushAppStateChangesToStore();this.changeListeners=[];this.unsubscribe=_store.store.subscribe(function(){return _this._handleStoreChanges()});this.stateMonitor.onChange(function(status){_this.changeListeners.forEach(function(listener){return listener(status)});_this._pushAppStateChangesToStore()})}_createClass(DashboardStateManager,[{key:"registerChangeListener",value:function registerChangeListener(callback){this.changeListeners.push(callback)}},{key:"_areStoreAndAppStatePanelsEqual",value:function _areStoreAndAppStatePanelsEqual(){var state=_store.store.getState();var storePanels=(0,_selectors.getPanels)(_store.store.getState());var appStatePanels=this.getPanels();if(Object.values(storePanels).length!==appStatePanels.length)return false;return appStatePanels.every(function(appStatePanel){var storePanel=(0,_selectors.getPanel)(state,appStatePanel.panelIndex);return _lodash2.default.isEqual(appStatePanel,storePanel)})}},{key:"handleTimeChange",value:function handleTimeChange(newTimeFilter){_store.store.dispatch((0,_actions.updateTimeRange)({from:_filter_utils.FilterUtils.convertTimeToUTCString(newTimeFilter.from),to:_filter_utils.FilterUtils.convertTimeToUTCString(newTimeFilter.to),mode:newTimeFilter.mode}))}},{key:"_pushAppStateChangesToStore",value:function _pushAppStateChangesToStore(){if(!this._areStoreAndAppStatePanelsEqual()){var panelsMap=this.getPanels().reduce(function(acc,panel){acc[panel.panelIndex]=_lodash2.default.cloneDeep(panel);return acc},{});_store.store.dispatch((0,_actions.setPanels)(panelsMap))}var state=_store.store.getState();(0,_selectors.getTitle)(state)!==this.getTitle()&&_store.store.dispatch((0,_actions.updateTitle)(this.getTitle()));(0,_selectors.getDescription)(state)!==this.getDescription()&&_store.store.dispatch((0,_actions.updateDescription)(this.getDescription()));(0,_selectors.getViewMode)(state)!==this.getViewMode()&&_store.store.dispatch((0,_actions.updateViewMode)(this.getViewMode()));(0,_selectors.getUseMargins)(state)!==this.getUseMargins()&&_store.store.dispatch((0,_actions.updateUseMargins)(this.getUseMargins()));(0,_selectors.getHidePanelTitles)(state)!==this.getHidePanelTitles()&&_store.store.dispatch((0,_actions.updateHidePanelTitles)(this.getHidePanelTitles()));(0,_selectors.getFullScreenMode)(state)!==this.getFullScreenMode()&&_store.store.dispatch((0,_actions.updateIsFullScreenMode)(this.getFullScreenMode()));(0,_selectors.getTitle)(state)!==this.getTitle()&&_store.store.dispatch((0,_actions.updateTitle)(this.getTitle()));(0,_selectors.getDescription)(state)!==this.getDescription()&&_store.store.dispatch((0,_actions.updateDescription)(this.getDescription()));(0,_selectors.getQuery)(state)!==this.getQuery()&&_store.store.dispatch((0,_actions.updateQuery)(this.getQuery()));this._pushFiltersToStore()}},{key:"_pushFiltersToStore",value:function _pushFiltersToStore(){var state=_store.store.getState();var dashboardFilters=this.getDashboardFilterBars();_lodash2.default.isEqual(_filter_utils.FilterUtils.cleanFiltersForComparison(dashboardFilters),_filter_utils.FilterUtils.cleanFiltersForComparison((0,_selectors.getFilters)(state)))||_store.store.dispatch((0,_actions.updateFilters)(dashboardFilters))}},{key:"_handleStoreChanges",value:function _handleStoreChanges(){var _this2=this;var dirty=false;if(!this._areStoreAndAppStatePanelsEqual()){var panels=(0,_selectors.getPanels)(_store.store.getState());this.appState.panels=[];this.panelIndexPatternMapping={};Object.values(panels).map(function(panel){_this2.appState.panels.push(_lodash2.default.cloneDeep(panel))});dirty=true}_lodash2.default.forEach((0,_selectors.getEmbeddables)(_store.store.getState()),function(embeddable,panelId){if(embeddable.initialized&&!_this2.panelIndexPatternMapping.hasOwnProperty(panelId)){var indexPattern=(0,_selectors.getEmbeddableMetadata)(_store.store.getState(),panelId).indexPattern;if(indexPattern){_this2.panelIndexPatternMapping[panelId]=indexPattern;_this2.dirty=true}}});var stagedFilters=(0,_selectors.getStagedFilters)(_store.store.getState());stagedFilters.forEach(function(filter){_this2.addFilter(filter)});if(stagedFilters.length>0){this.saveState();_store.store.dispatch((0,_actions.clearStagedFilters)())}var fullScreen=(0,_selectors.getFullScreenMode)(_store.store.getState());fullScreen!==this.getFullScreenMode()&&this.setFullScreenMode(fullScreen);this.changeListeners.forEach(function(listener){return listener({dirty:dirty})});this.saveState()}},{key:"getFullScreenMode",value:function getFullScreenMode(){return this.appState.fullScreenMode}},{key:"setFullScreenMode",value:function setFullScreenMode(fullScreenMode){this.appState.fullScreenMode=fullScreenMode;this.saveState()}},{key:"getPanelIndexPatterns",value:function getPanelIndexPatterns(){return _lodash2.default.uniq(Object.values(this.panelIndexPatternMapping))}},{key:"resetState",value:function resetState(){this.savedDashboard.title=this.savedDashboard.lastSavedTitle;this.stateDefaults=(0,_lib.getAppStateDefaults)(this.savedDashboard,this.hideWriteControls);this.stateDefaults.query=this.lastSavedDashboardFilters.query;this.stateDefaults.filters=[].concat(_toConsumableArray(this.getLastSavedFilterBars()));this.isDirty=false;this.appState.setDefaults(this.stateDefaults);this.appState.reset();this.stateMonitor.setInitialState(this.appState.toJSON())}},{key:"getFilterState",value:function getFilterState(){return{timeTo:this.savedDashboard.timeTo,timeFrom:this.savedDashboard.timeFrom,filterBars:this.getDashboardFilterBars(),query:this.getDashboardQuery()}}},{key:"getTitle",value:function getTitle(){return this.appState.title}},{key:"getDescription",value:function getDescription(){return this.appState.description}},{key:"setDescription",value:function setDescription(description){this.appState.description=description;this.saveState()}},{key:"setTitle",value:function setTitle(title){this.appState.title=title;this.savedDashboard.title=title;this.saveState()}},{key:"getAppState",value:function getAppState(){return this.appState}},{key:"getQuery",value:function getQuery(){return this.appState.query}},{key:"getUseMargins",value:function getUseMargins(){return void 0!==this.appState.options.useMargins&&this.appState.options.useMargins}},{key:"setUseMargins",value:function setUseMargins(useMargins){this.appState.options.useMargins=useMargins;this.saveState()}},{key:"getHidePanelTitles",value:function getHidePanelTitles(){return this.appState.options.hidePanelTitles}},{key:"setHidePanelTitles",value:function setHidePanelTitles(hidePanelTitles){this.appState.options.hidePanelTitles=hidePanelTitles;this.saveState()}},{key:"getDarkTheme",value:function getDarkTheme(){return this.appState.options.darkTheme}},{key:"setDarkTheme",value:function setDarkTheme(darkTheme){this.appState.options.darkTheme=darkTheme;this.saveState()}},{key:"getTimeRestore",value:function getTimeRestore(){return this.appState.timeRestore}},{key:"setTimeRestore",value:function setTimeRestore(timeRestore){this.appState.timeRestore=timeRestore;this.saveState()}},{key:"getIsTimeSavedWithDashboard",value:function getIsTimeSavedWithDashboard(){return this.savedDashboard.timeRestore}},{key:"getDashboardFilterBars",value:function getDashboardFilterBars(){return _filter_utils.FilterUtils.getFilterBarsForDashboard(this.savedDashboard)}},{key:"getDashboardQuery",value:function getDashboardQuery(){return _filter_utils.FilterUtils.getQueryFilterForDashboard(this.savedDashboard)}},{key:"getLastSavedFilterBars",value:function getLastSavedFilterBars(){return this.lastSavedDashboardFilters.filterBars}},{key:"getLastSavedQuery",value:function getLastSavedQuery(){return this.lastSavedDashboardFilters.query}},{key:"getQueryChanged",value:function getQueryChanged(){var currentQuery=this.appState.query;var lastSavedQuery=this.getLastSavedQuery();var isLegacyStringQuery=_lodash2.default.isString(lastSavedQuery)&&_lodash2.default.isPlainObject(currentQuery)&&_lodash2.default.has(currentQuery,"query");if(isLegacyStringQuery)return lastSavedQuery!==currentQuery.query;return!_lodash2.default.isEqual(currentQuery,lastSavedQuery)}},{key:"getFilterBarChanged",value:function getFilterBarChanged(){return!_lodash2.default.isEqual(_filter_utils.FilterUtils.cleanFiltersForComparison(this.appState.filters),_filter_utils.FilterUtils.cleanFiltersForComparison(this.getLastSavedFilterBars()))}},{key:"getTimeChanged",value:function getTimeChanged(timeFilter){return!_filter_utils.FilterUtils.areTimesEqual(this.lastSavedDashboardFilters.timeFrom,timeFilter.getTime().from)||!_filter_utils.FilterUtils.areTimesEqual(this.lastSavedDashboardFilters.timeTo,timeFilter.getTime().to)}},{key:"getViewMode",value:function getViewMode(){return this.hideWriteControls?_dashboard_view_mode.DashboardViewMode.VIEW:this.appState.viewMode}},{key:"getIsViewMode",value:function getIsViewMode(){return this.getViewMode()===_dashboard_view_mode.DashboardViewMode.VIEW}},{key:"getIsEditMode",value:function getIsEditMode(){return this.getViewMode()===_dashboard_view_mode.DashboardViewMode.EDIT}},{key:"getIsDirty",value:function getIsDirty(timeFilter){return this.isDirty||this.getFiltersChanged(timeFilter)}},{key:"getPanels",value:function getPanels(){return this.appState.panels}},{key:"updatePanel",value:function updatePanel(panelIndex,panelAttributes){var panel=this.getPanels().find(function(panel){return panel.panelIndex===panelIndex});Object.assign(panel,panelAttributes);this.saveState();return panel}},{key:"removePanel",value:function removePanel(panelIndex){var _this3=this;_lodash2.default.remove(this.getPanels(),function(panel){if(panel.panelIndex===panelIndex){delete _this3.panelIndexPatternMapping[panelIndex];return true}return false});this.saveState()}},{key:"getChangedFilterTypes",value:function getChangedFilterTypes(timeFilter){var changedFilters=[];this.getFilterBarChanged()&&changedFilters.push("filter");this.getQueryChanged()&&changedFilters.push("query");this.savedDashboard.timeRestore&&this.getTimeChanged(timeFilter)&&changedFilters.push("time range");return changedFilters}},{key:"getFiltersChanged",value:function getFiltersChanged(timeFilter){return this.getChangedFilterTypes(timeFilter).length>0}},{key:"syncTimefilterWithDashboard",value:function syncTimefilterWithDashboard(timeFilter,quickTimeRanges){var _this4=this;if(!this.getIsTimeSavedWithDashboard())throw new Error("The time is not saved with this dashboard so should not be synced.");var mode=void 0;var isMoment=(0,_moment2.default)(this.savedDashboard.timeTo).isValid();if(isMoment)mode="absolute";else{var quickTime=_lodash2.default.find(quickTimeRanges,function(timeRange){return timeRange.from===_this4.savedDashboard.timeFrom&&timeRange.to===_this4.savedDashboard.timeTo});mode=quickTime?"quick":"relative"}timeFilter.setTime({from:this.savedDashboard.timeFrom,to:this.savedDashboard.timeTo,mode:mode});this.savedDashboard.refreshInterval&&timeFilter.setRefreshInterval(this.savedDashboard.refreshInterval)}},{key:"saveState",value:function saveState(){this.appState.save()}},{key:"applyFilters",value:function applyFilters(query,filters){this.appState.query=query;this.savedDashboard.searchSource.setField("query",query);this.savedDashboard.searchSource.setField("filter",filters);this.saveState();this._pushFiltersToStore()}},{key:"createStateMonitor",value:function createStateMonitor(){var _this5=this;this.stateMonitor=_state_monitor_factory.stateMonitorFactory.create(this.appState,this.stateDefaults);this.stateMonitor.ignoreProps("viewMode");this.stateMonitor.ignoreProps("filters");this.stateMonitor.ignoreProps("query");this.stateMonitor.onChange(function(status){_this5.isDirty=status.dirty})}},{key:"switchViewMode",value:function switchViewMode(newMode){this.appState.viewMode=newMode;this.saveState()}},{key:"destroy",value:function destroy(){this.stateMonitor&&this.stateMonitor.destroy();this.savedDashboard.destroy();this.unsubscribe()}}]);return DashboardStateManager}()},,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var redux_1=__webpack_require__(670);var reducers_1=__webpack_require__(4918);exports.reducers=redux_1.combineReducers({dashboard:reducers_1.dashboard})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var redux_1=__webpack_require__(670);var embeddables_1=__webpack_require__(4919);var panels_1=__webpack_require__(4969);var view_1=__webpack_require__(4970);var metadata_1=__webpack_require__(4971);exports.dashboard=redux_1.combineReducers({embeddables:embeddables_1.embeddablesReducer,metadata:metadata_1.metadataReducer,panels:panels_1.panelsReducer,view:view_1.viewReducer})},function(module,exports,__webpack_require__){"use strict";var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true}):obj[key]=value;return obj}var __importDefault=(void 0,function(mod){return mod&&mod.__esModule?mod:{default:mod}});Object.defineProperty(exports,"__esModule",{value:true});var lodash_1=__importDefault(__webpack_require__(1));var actions_1=__webpack_require__(303);var embeddableIsInitializing=function embeddableIsInitializing(embeddables,panelId){return _extends({},embeddables,_defineProperty({},panelId,{error:void 0,initialized:false,metadata:{},stagedFilter:void 0}))};var embeddableIsInitialized=function embeddableIsInitialized(embeddables,_ref){var panelId=_ref.panelId,metadata=_ref.metadata;return _extends({},embeddables,_defineProperty({},panelId,_extends({},embeddables[panelId],{initialized:true,metadata:_extends({},metadata)})))};var setStagedFilter=function setStagedFilter(embeddables,_ref2){var panelId=_ref2.panelId,stagedFilter=_ref2.stagedFilter;return _extends({},embeddables,_defineProperty({},panelId,_extends({},embeddables[panelId],{stagedFilter:stagedFilter})))};var embeddableError=function embeddableError(embeddables,payload){return _extends({},embeddables,_defineProperty({},payload.panelId,_extends({},embeddables[payload.panelId],{error:payload.error})))};var clearStagedFilters=function clearStagedFilters(embeddables){var omitStagedFilters=function omitStagedFilters(embeddable){return lodash_1.default.omit(_extends({},embeddable),["stagedFilter"])};return lodash_1.default.mapValues(embeddables,omitStagedFilters)};var deleteEmbeddable=function deleteEmbeddable(embeddables,panelId){var embeddablesCopy=_extends({},embeddables);delete embeddablesCopy[panelId];return embeddablesCopy};exports.embeddablesReducer=function(){var embeddables=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var action=arguments[1];switch(action.type){case actions_1.EmbeddableActionTypeKeys.EMBEDDABLE_IS_INITIALIZING:return embeddableIsInitializing(embeddables,action.payload);case actions_1.EmbeddableActionTypeKeys.EMBEDDABLE_IS_INITIALIZED:return embeddableIsInitialized(embeddables,action.payload);case actions_1.EmbeddableActionTypeKeys.SET_STAGED_FILTER:return setStagedFilter(embeddables,action.payload);case actions_1.EmbeddableActionTypeKeys.CLEAR_STAGED_FILTERS:return clearStagedFilters(embeddables);case actions_1.EmbeddableActionTypeKeys.EMBEDDABLE_ERROR:return embeddableError(embeddables,action.payload);case actions_1.PanelActionTypeKeys.DELETE_PANEL:return deleteEmbeddable(embeddables,action.payload);default:return embeddables}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var redux_actions_1=__webpack_require__(31);var ViewActionTypeKeys;(function(ViewActionTypeKeys){ViewActionTypeKeys["UPDATE_VIEW_MODE"]="UPDATE_VIEW_MODE";ViewActionTypeKeys["SET_VISIBLE_CONTEXT_MENU_PANEL_ID"]="SET_VISIBLE_CONTEXT_MENU_PANEL_ID";ViewActionTypeKeys["MAXIMIZE_PANEl"]="MAXIMIZE_PANEl";ViewActionTypeKeys["MINIMIZE_PANEL"]="MINIMIZE_PANEL";ViewActionTypeKeys["UPDATE_IS_FULL_SCREEN_MODE"]="UPDATE_IS_FULL_SCREEN_MODE";ViewActionTypeKeys["UPDATE_USE_MARGINS"]="UPDATE_USE_MARGINS";ViewActionTypeKeys["UPDATE_HIDE_PANEL_TITLES"]="UPDATE_HIDE_PANEL_TITLES";ViewActionTypeKeys["UPDATE_TIME_RANGE"]="UPDATE_TIME_RANGE";ViewActionTypeKeys["UPDATE_FILTERS"]="UPDATE_FILTERS";ViewActionTypeKeys["UPDATE_QUERY"]="UPDATE_QUERY"})(ViewActionTypeKeys=exports.ViewActionTypeKeys||(exports.ViewActionTypeKeys={}));exports.updateViewMode=redux_actions_1.createAction(ViewActionTypeKeys.UPDATE_VIEW_MODE);exports.setVisibleContextMenuPanelId=redux_actions_1.createAction(ViewActionTypeKeys.SET_VISIBLE_CONTEXT_MENU_PANEL_ID);exports.maximizePanel=redux_actions_1.createAction(ViewActionTypeKeys.MAXIMIZE_PANEl);exports.minimizePanel=redux_actions_1.createAction(ViewActionTypeKeys.MINIMIZE_PANEL);exports.updateIsFullScreenMode=redux_actions_1.createAction(ViewActionTypeKeys.UPDATE_IS_FULL_SCREEN_MODE);exports.updateUseMargins=redux_actions_1.createAction(ViewActionTypeKeys.UPDATE_USE_MARGINS);exports.updateHidePanelTitles=redux_actions_1.createAction(ViewActionTypeKeys.UPDATE_HIDE_PANEL_TITLES);exports.updateTimeRange=redux_actions_1.createAction(ViewActionTypeKeys.UPDATE_TIME_RANGE);exports.updateFilters=redux_actions_1.createAction(ViewActionTypeKeys.UPDATE_FILTERS);exports.updateQuery=redux_actions_1.createAction(ViewActionTypeKeys.UPDATE_QUERY)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var __importDefault=(void 0,function(mod){return mod&&mod.__esModule?mod:{default:mod}});Object.defineProperty(exports,"__esModule",{value:true});var lodash_1=__importDefault(__webpack_require__(1));var redux_actions_1=__webpack_require__(31);var selectors_1=__webpack_require__(1630);var panels_1=__webpack_require__(1629);var EmbeddableActionTypeKeys;(function(EmbeddableActionTypeKeys){EmbeddableActionTypeKeys["EMBEDDABLE_IS_INITIALIZING"]="EMBEDDABLE_IS_INITIALIZING";EmbeddableActionTypeKeys["EMBEDDABLE_IS_INITIALIZED"]="EMBEDDABLE_IS_INITIALIZED";EmbeddableActionTypeKeys["SET_STAGED_FILTER"]="SET_STAGED_FILTER";EmbeddableActionTypeKeys["CLEAR_STAGED_FILTERS"]="CLEAR_STAGED_FILTERS";EmbeddableActionTypeKeys["EMBEDDABLE_ERROR"]="EMBEDDABLE_ERROR"})(EmbeddableActionTypeKeys=exports.EmbeddableActionTypeKeys||(exports.EmbeddableActionTypeKeys={}));exports.embeddableIsInitializing=redux_actions_1.createAction(EmbeddableActionTypeKeys.EMBEDDABLE_IS_INITIALIZING);exports.embeddableIsInitialized=redux_actions_1.createAction(EmbeddableActionTypeKeys.EMBEDDABLE_IS_INITIALIZED);exports.setStagedFilter=redux_actions_1.createAction(EmbeddableActionTypeKeys.SET_STAGED_FILTER);exports.clearStagedFilters=redux_actions_1.createAction(EmbeddableActionTypeKeys.CLEAR_STAGED_FILTERS);exports.embeddableError=redux_actions_1.createAction(EmbeddableActionTypeKeys.EMBEDDABLE_ERROR);function embeddableStateChanged(changeData){var panelId=changeData.panelId,embeddableState=changeData.embeddableState;return function(dispatch,getState){var customization=selectors_1.getEmbeddableCustomization(getState(),panelId);if(!lodash_1.default.isEqual(embeddableState.customization,customization)){var originalPanelState=selectors_1.getPanel(getState(),panelId);var newPanelState=_extends({},originalPanelState,{embeddableConfig:lodash_1.default.cloneDeep(embeddableState.customization)});dispatch(panels_1.updatePanel(newPanelState))}embeddableState.stagedFilter&&dispatch(exports.setStagedFilter({stagedFilter:embeddableState.stagedFilter,panelId:panelId}))}}exports.embeddableStateChanged=embeddableStateChanged},function(module,exports,__webpack_require__){"use strict";var __importStar=(void 0,function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);result["default"]=mod;return result});Object.defineProperty(exports,"__esModule",{value:true});var DashboardSelectors=__importStar(__webpack_require__(438));exports.getDashboard=function(state){return state.dashboard};exports.getPanels=function(state){return DashboardSelectors.getPanels(exports.getDashboard(state))};exports.getPanel=function(state,panelId){return DashboardSelectors.getPanel(exports.getDashboard(state),panelId)};exports.getPanelType=function(state,panelId){return DashboardSelectors.getPanelType(exports.getDashboard(state),panelId)};exports.getEmbeddables=function(state){return DashboardSelectors.getEmbeddables(exports.getDashboard(state))};exports.getEmbeddableError=function(state,panelId){return DashboardSelectors.getEmbeddableError(exports.getDashboard(state),panelId)};exports.getEmbeddableInitialized=function(state,panelId){return DashboardSelectors.getEmbeddableInitialized(exports.getDashboard(state),panelId)};exports.getEmbeddableCustomization=function(state,panelId){return DashboardSelectors.getEmbeddableCustomization(exports.getDashboard(state),panelId)};exports.getEmbeddableStagedFilter=function(state,panelId){return DashboardSelectors.getEmbeddableStagedFilter(exports.getDashboard(state),panelId)};exports.getEmbeddableMetadata=function(state,panelId){return DashboardSelectors.getEmbeddableMetadata(exports.getDashboard(state),panelId)};exports.getStagedFilters=function(state){return DashboardSelectors.getStagedFilters(exports.getDashboard(state))};exports.getViewMode=function(state){return DashboardSelectors.getViewMode(exports.getDashboard(state))};exports.getFullScreenMode=function(state){return DashboardSelectors.getFullScreenMode(exports.getDashboard(state))};exports.getMaximizedPanelId=function(state){return DashboardSelectors.getMaximizedPanelId(exports.getDashboard(state))};exports.getUseMargins=function(state){return DashboardSelectors.getUseMargins(exports.getDashboard(state))};exports.getHidePanelTitles=function(state){return DashboardSelectors.getHidePanelTitles(exports.getDashboard(state))};exports.getTimeRange=function(state){return DashboardSelectors.getTimeRange(exports.getDashboard(state))};exports.getFilters=function(state){return DashboardSelectors.getFilters(exports.getDashboard(state))};exports.getQuery=function(state){return DashboardSelectors.getQuery(exports.getDashboard(state))};exports.getTitle=function(state){return DashboardSelectors.getTitle(exports.getDashboard(state))};exports.getDescription=function(state){return DashboardSelectors.getDescription(exports.getDashboard(state))}},function(module,exports,__webpack_require__){"use strict";var __importDefault=(void 0,function(mod){return mod&&mod.__esModule?mod:{default:mod}});Object.defineProperty(exports,"__esModule",{value:true});var lodash_1=__importDefault(__webpack_require__(1));exports.getPanels=function(dashboard){return dashboard.panels};exports.getPanel=function(dashboard,panelId){return exports.getPanels(dashboard)[panelId]};exports.getPanelType=function(dashboard,panelId){return exports.getPanel(dashboard,panelId).type};exports.getEmbeddables=function(dashboard){return dashboard.embeddables};exports.getEmbeddableCustomization=function(dashboard,panelId){return exports.getPanel(dashboard,panelId).embeddableConfig};exports.getEmbeddable=function(dashboard,panelId){return dashboard.embeddables[panelId]};exports.getEmbeddableError=function(dashboard,panelId){return exports.getEmbeddable(dashboard,panelId).error};exports.getEmbeddableTitle=function(dashboard,panelId){var embeddable=exports.getEmbeddable(dashboard,panelId);return embeddable&&embeddable.initialized&&embeddable.metadata?embeddable.metadata.title:""};exports.getEmbeddableInitialized=function(dashboard,panelId){return exports.getEmbeddable(dashboard,panelId).initialized};exports.getEmbeddableStagedFilter=function(dashboard,panelId){return exports.getEmbeddable(dashboard,panelId).stagedFilter};exports.getEmbeddableMetadata=function(dashboard,panelId){return exports.getEmbeddable(dashboard,panelId).metadata};exports.getEmbeddableEditUrl=function(dashboard,panelId){var embeddable=exports.getEmbeddable(dashboard,panelId);return embeddable&&embeddable.initialized&&embeddable.metadata?embeddable.metadata.editUrl:""};exports.getVisibleContextMenuPanelId=function(dashboard){return dashboard.view.visibleContextMenuPanelId};exports.getUseMargins=function(dashboard){return dashboard.view.useMargins};exports.getViewMode=function(dashboard){return dashboard.view.viewMode};exports.getFullScreenMode=function(dashboard){return dashboard.view.isFullScreenMode};exports.getHidePanelTitles=function(dashboard){return dashboard.view.hidePanelTitles};exports.getMaximizedPanelId=function(dashboard){return dashboard.view.maximizedPanelId};exports.getTimeRange=function(dashboard){return dashboard.view.timeRange};exports.getFilters=function(dashboard){return dashboard.view.filters};exports.getQuery=function(dashboard){return dashboard.view.query};exports.getMetadata=function(dashboard){return dashboard.metadata};exports.getTitle=function(dashboard){return dashboard.metadata.title};exports.getDescription=function(dashboard){return dashboard.metadata.description};exports.getContainerState=function(dashboard,panelId){var time=exports.getTimeRange(dashboard);return{customTitle:exports.getPanel(dashboard,panelId).title,embeddableCustomization:lodash_1.default.cloneDeep(exports.getEmbeddableCustomization(dashboard,panelId)||{}),filters:exports.getFilters(dashboard),hidePanelTitles:exports.getHidePanelTitles(dashboard),isPanelExpanded:exports.getMaximizedPanelId(dashboard)===panelId,query:exports.getQuery(dashboard),timeRange:{from:time.from,to:time.to},viewMode:exports.getViewMode(dashboard)}};exports.getStagedFilters=function(dashboard){return lodash_1.default.compact(lodash_1.default.map(dashboard.embeddables,"stagedFilter"))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var redux_actions_1=__webpack_require__(31);var MetadataActionTypeKeys;(function(MetadataActionTypeKeys){MetadataActionTypeKeys["UPDATE_DESCRIPTION"]="UPDATE_DESCRIPTION";MetadataActionTypeKeys["UPDATE_TITLE"]="UPDATE_TITLE"})(MetadataActionTypeKeys=exports.MetadataActionTypeKeys||(exports.MetadataActionTypeKeys={}));exports.updateDescription=redux_actions_1.createAction(MetadataActionTypeKeys.UPDATE_DESCRIPTION);exports.updateTitle=redux_actions_1.createAction(MetadataActionTypeKeys.UPDATE_TITLE)},function(module,exports,__webpack_require__){"use strict";var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true}):obj[key]=value;return obj}var __importDefault=(void 0,function(mod){return mod&&mod.__esModule?mod:{default:mod}});Object.defineProperty(exports,"__esModule",{value:true});var lodash_1=__importDefault(__webpack_require__(1));var actions_1=__webpack_require__(303);var deletePanel=function deletePanel(panels,panelId){var panelsCopy=_extends({},panels);delete panelsCopy[panelId];return panelsCopy};var updatePanel=function updatePanel(panels,panelState){return _extends({},panels,_defineProperty({},panelState.panelIndex,panelState))};var updatePanels=function updatePanels(panels,updatedPanels){var panelsCopy=_extends({},panels);Object.values(updatedPanels).forEach(function(panel){panelsCopy[panel.panelIndex]=panel});return panelsCopy};var resetPanelTitle=function resetPanelTitle(panels,panelId){return _extends({},panels,_defineProperty({},panelId,_extends({},panels[panelId],{title:void 0})))};var setPanelTitle=function setPanelTitle(panels,payload){return _extends({},panels,_defineProperty({},payload.panelId,_extends({},panels[payload.panelId],{title:payload.title})))};var setPanels=function setPanels(panels,newPanels){return lodash_1.default.cloneDeep(newPanels)};exports.panelsReducer=function(){var panels=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var action=arguments[1];switch(action.type){case actions_1.PanelActionTypeKeys.DELETE_PANEL:return deletePanel(panels,action.payload);case actions_1.PanelActionTypeKeys.UPDATE_PANEL:return updatePanel(panels,action.payload);case actions_1.PanelActionTypeKeys.UPDATE_PANELS:return updatePanels(panels,action.payload);case actions_1.PanelActionTypeKeys.RESET_PANEl_TITLE:return resetPanelTitle(panels,action.payload);case actions_1.PanelActionTypeKeys.SET_PANEl_TITLE:return setPanelTitle(panels,action.payload);case actions_1.PanelActionTypeKeys.SET_PANELS:return setPanels(panels,action.payload);default:return panels}}},function(module,exports,__webpack_require__){"use strict";var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};Object.defineProperty(exports,"__esModule",{value:true});var lodash_1=__webpack_require__(1);var actions_1=__webpack_require__(303);var types_1=__webpack_require__(1612);var dashboard_view_mode_1=__webpack_require__(122);var setVisibleContextMenuPanelId=function setVisibleContextMenuPanelId(view,panelId){return _extends({},view,{visibleContextMenuPanelId:panelId})};var updateHidePanelTitles=function updateHidePanelTitles(view,hidePanelTitles){return _extends({},view,{hidePanelTitles:hidePanelTitles})};var minimizePanel=function minimizePanel(view){return _extends({},view,{maximizedPanelId:void 0})};var maximizePanel=function maximizePanel(view,panelId){return _extends({},view,{maximizedPanelId:panelId})};var updateIsFullScreenMode=function updateIsFullScreenMode(view,isFullScreenMode){return _extends({},view,{isFullScreenMode:isFullScreenMode})};var updateTimeRange=function updateTimeRange(view,timeRange){return _extends({},view,{timeRange:timeRange})};var updateFilters=function updateFilters(view,filters){return _extends({},view,{filters:lodash_1.cloneDeep(filters)})};var updateQuery=function updateQuery(view,query){return _extends({},view,{query:query})};var updateUseMargins=function updateUseMargins(view,useMargins){return _extends({},view,{useMargins:useMargins})};var updateViewMode=function updateViewMode(view,viewMode){return _extends({},view,{viewMode:viewMode})};exports.viewReducer=function(){var view=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{filters:[],hidePanelTitles:false,isFullScreenMode:false,query:{language:types_1.QueryLanguageType.LUCENE,query:""},timeRange:{to:"now",from:"now-15m"},useMargins:true,viewMode:dashboard_view_mode_1.DashboardViewMode.VIEW};var action=arguments[1];switch(action.type){case actions_1.ViewActionTypeKeys.MINIMIZE_PANEL:return minimizePanel(view);case actions_1.ViewActionTypeKeys.MAXIMIZE_PANEl:return maximizePanel(view,action.payload);case actions_1.ViewActionTypeKeys.SET_VISIBLE_CONTEXT_MENU_PANEL_ID:return setVisibleContextMenuPanelId(view,action.payload);case actions_1.ViewActionTypeKeys.UPDATE_HIDE_PANEL_TITLES:return updateHidePanelTitles(view,action.payload);case actions_1.ViewActionTypeKeys.UPDATE_TIME_RANGE:return updateTimeRange(view,action.payload);case actions_1.ViewActionTypeKeys.UPDATE_USE_MARGINS:return updateUseMargins(view,action.payload);case actions_1.ViewActionTypeKeys.UPDATE_VIEW_MODE:return updateViewMode(view,action.payload);case actions_1.ViewActionTypeKeys.UPDATE_IS_FULL_SCREEN_MODE:return updateIsFullScreenMode(view,action.payload);case actions_1.ViewActionTypeKeys.UPDATE_FILTERS:return updateFilters(view,action.payload);case actions_1.ViewActionTypeKeys.UPDATE_QUERY:return updateQuery(view,action.payload);default:return view}}},function(module,exports,__webpack_require__){"use strict";var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};Object.defineProperty(exports,"__esModule",{value:true});var actions_1=__webpack_require__(303);var updateTitle=function updateTitle(metadata,title){return _extends({},metadata,{title:title})};var updateDescription=function updateDescription(metadata,description){return _extends({},metadata,{description:description})};exports.metadataReducer=function(){var metadata=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{description:"",title:""};var action=arguments[1];switch(action.type){case actions_1.MetadataActionTypeKeys.UPDATE_TITLE:return updateTitle(metadata,action.payload);case actions_1.MetadataActionTypeKeys.UPDATE_DESCRIPTION:return updateDescription(metadata,action.payload);default:return metadata}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardPanelContainer=void 0;var _reactRedux=__webpack_require__(27);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _dashboard_panel=__webpack_require__(4993);var _dashboard_view_mode=__webpack_require__(122);var _actions=__webpack_require__(303);var _selectors=__webpack_require__(438);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var mapStateToProps=function mapStateToProps(_ref,_ref2){var dashboard=_ref.dashboard;var embeddableFactory=_ref2.embeddableFactory,panelId=_ref2.panelId;var embeddable=(0,_selectors.getEmbeddable)(dashboard,panelId);var error=null;if(embeddableFactory)error=embeddable&&(0,_selectors.getEmbeddableError)(dashboard,panelId)||"";else{var panelType=(0,_selectors.getPanelType)(dashboard,panelId);error="No embeddable factory found for panel type "+panelType}var initialized=!!embeddable&&(0,_selectors.getEmbeddableInitialized)(dashboard,panelId);return{error:error,viewOnlyMode:(0,_selectors.getFullScreenMode)(dashboard)||(0,_selectors.getViewMode)(dashboard)===_dashboard_view_mode.DashboardViewMode.VIEW,containerState:(0,_selectors.getContainerState)(dashboard,panelId),initialized:initialized,panel:(0,_selectors.getPanel)(dashboard,panelId)}};var mapDispatchToProps=function mapDispatchToProps(dispatch,_ref3){var panelId=_ref3.panelId;return{destroy:function destroy(){return dispatch((0,_actions.deletePanel)(panelId))},embeddableIsInitializing:function embeddableIsInitializing(){return dispatch((0,_actions.embeddableIsInitializing)(panelId))},embeddableIsInitialized:function embeddableIsInitialized(metadata){return dispatch((0,_actions.embeddableIsInitialized)({panelId:panelId,metadata:metadata}))},embeddableStateChanged:function embeddableStateChanged(embeddableState){return dispatch((0,_actions.embeddableStateChanged)({panelId:panelId,embeddableState:embeddableState}))},embeddableError:function embeddableError(errorMessage){return dispatch((0,_actions.embeddableError)({panelId:panelId,error:errorMessage}))}}};var DashboardPanelContainer=exports.DashboardPanelContainer=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(_dashboard_panel.DashboardPanel);DashboardPanelContainer.propTypes={panelId:_propTypes2.default.string.isRequired,embeddableFactory:_propTypes2.default.shape({create:_propTypes2.default.func.isRequired}).isRequired}},,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardPanel=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _classnames=__webpack_require__(5);var _classnames2=_interopRequireDefault(_classnames);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _panel_header=__webpack_require__(4994);var _panel_error=__webpack_require__(5009);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var DashboardPanel=exports.DashboardPanel=function(_React$Component){_inherits(DashboardPanel,_React$Component);function DashboardPanel(props){_classCallCheck(this,DashboardPanel);var _this=_possibleConstructorReturn(this,(DashboardPanel.__proto__||Object.getPrototypeOf(DashboardPanel)).call(this,props));_this.onFocus=function(){var _this$props=_this.props,onPanelFocused=_this$props.onPanelFocused,panel=_this$props.panel;onPanelFocused&&onPanelFocused(panel.panelIndex)};_this.onBlur=function(){var _this$props2=_this.props,onPanelBlurred=_this$props2.onPanelBlurred,panel=_this$props2.panel;onPanelBlurred&&onPanelBlurred(panel.panelIndex)};_this.state={error:props.embeddableFactory?null:"No factory found for embeddable"};_this.mounted=false;return _this}_createClass(DashboardPanel,[{key:"componentDidMount",value:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var _this2=this;var _props,initialized,embeddableFactory,embeddableIsInitializing,panel,embeddableStateChanged,embeddableIsInitialized,embeddableError;return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:this.mounted=true;_props=this.props,initialized=_props.initialized,embeddableFactory=_props.embeddableFactory,embeddableIsInitializing=_props.embeddableIsInitializing,panel=_props.panel,embeddableStateChanged=_props.embeddableStateChanged,embeddableIsInitialized=_props.embeddableIsInitialized,embeddableError=_props.embeddableError;if(!initialized){embeddableIsInitializing();embeddableFactory.create(panel,embeddableStateChanged).then(function(embeddable){if(_this2.mounted){_this2.embeddable=embeddable;embeddableIsInitialized(embeddable.metadata);_this2.embeddable.render(_this2.panelElement,_this2.props.containerState)}else embeddable.destroy()}).catch(function(error){_this2.mounted&&embeddableError(error.message)})}case 3:case"end":return _context.stop()}},_callee,this)}));function componentDidMount(){return _ref.apply(this,arguments)}return componentDidMount}()},{key:"componentWillUnmount",value:function componentWillUnmount(){this.props.destroy();this.mounted=false;this.embeddable&&this.embeddable.destroy()}},{key:"renderEmbeddableViewport",value:function renderEmbeddableViewport(){var _this3=this;return _react2.default.createElement("div",{id:"embeddedPanel",className:"panel-content",ref:function ref(panelElement){return _this3.panelElement=panelElement}},!this.props.initialized&&"loading...")}},{key:"shouldComponentUpdate",value:function shouldComponentUpdate(nextProps){this.embeddable&&!_lodash2.default.isEqual(nextProps.containerState,this.props.containerState)&&this.embeddable.onContainerStateChanged(nextProps.containerState);return nextProps.error!==this.props.error||nextProps.initialized!==this.props.initialized}},{key:"renderEmbeddedError",value:function renderEmbeddedError(){return _react2.default.createElement(_panel_error.PanelError,{error:this.props.error})}},{key:"renderContent",value:function renderContent(){var error=this.props.error;return error?this.renderEmbeddedError(error):this.renderEmbeddableViewport()}},{key:"render",value:function render(){var _props2=this.props,viewOnlyMode=_props2.viewOnlyMode,panel=_props2.panel;var classes=(0,_classnames2.default)("panel panel-default",this.props.className,{"panel--edit-mode":!viewOnlyMode});return _react2.default.createElement("div",{className:"dashboard-panel",onFocus:this.onFocus,onBlur:this.onBlur},_react2.default.createElement("div",{className:classes,"data-test-subj":"dashboardPanel"},_react2.default.createElement(_panel_header.PanelHeader,{panelId:panel.panelIndex,embeddable:this.embeddable}),this.renderContent()))}}]);return DashboardPanel}(_react2.default.Component);DashboardPanel.propTypes={viewOnlyMode:_propTypes2.default.bool.isRequired,onPanelFocused:_propTypes2.default.func,onPanelBlurred:_propTypes2.default.func,error:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.object]),destroy:_propTypes2.default.func.isRequired,containerState:_propTypes2.default.shape({timeRange:_propTypes2.default.object,filters:_propTypes2.default.array,query:_propTypes2.default.object,embeddableCustomization:_propTypes2.default.object,hidePanelTitles:_propTypes2.default.bool.isRequired}),embeddableFactory:_propTypes2.default.shape({create:_propTypes2.default.func}).isRequired,embeddableStateChanged:_propTypes2.default.func.isRequired,embeddableIsInitialized:_propTypes2.default.func.isRequired,embeddableError:_propTypes2.default.func.isRequired,embeddableIsInitializing:_propTypes2.default.func.isRequired,initialized:_propTypes2.default.bool.isRequired,panel:_propTypes2.default.shape({panelIndex:_propTypes2.default.string}).isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _panel_header_container=__webpack_require__(4995);Object.defineProperty(exports,"PanelHeader",{enumerable:true,get:function get(){return _panel_header_container.PanelHeaderContainer}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PanelHeaderContainer=void 0;var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _reactRedux=__webpack_require__(27);var _embeddable=__webpack_require__(378);var _panel_header=__webpack_require__(4996);var _dashboard_view_mode=__webpack_require__(122);var _selectors=__webpack_require__(438);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var mapStateToProps=function mapStateToProps(_ref,_ref2){var dashboard=_ref.dashboard;var panelId=_ref2.panelId;var panel=(0,_selectors.getPanel)(dashboard,panelId);var embeddableTitle=(0,_selectors.getEmbeddableTitle)(dashboard,panelId);return{title:void 0===panel.title?embeddableTitle:panel.title,isExpanded:(0,_selectors.getMaximizedPanelId)(dashboard)===panelId,isViewOnlyMode:(0,_selectors.getFullScreenMode)(dashboard)||(0,_selectors.getViewMode)(dashboard)===_dashboard_view_mode.DashboardViewMode.VIEW,hidePanelTitles:(0,_selectors.getHidePanelTitles)(dashboard)}};var PanelHeaderContainer=exports.PanelHeaderContainer=(0,_reactRedux.connect)(mapStateToProps)(_panel_header.PanelHeader);PanelHeaderContainer.propTypes={panelId:_propTypes2.default.string.isRequired,embeddable:_embeddable.embeddableShape}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PanelHeader=PanelHeader;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _embeddable=__webpack_require__(378);var _panel_options_menu_container=__webpack_require__(4997);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function PanelHeader(_ref){var title=_ref.title,panelId=_ref.panelId,embeddable=_ref.embeddable,isViewOnlyMode=_ref.isViewOnlyMode,hidePanelTitles=_ref.hidePanelTitles;if(isViewOnlyMode&&(!title||hidePanelTitles))return _react2.default.createElement("div",{className:"panel-heading-floater"},_react2.default.createElement("div",{className:"kuiMicroButtonGroup"},_react2.default.createElement(_panel_options_menu_container.PanelOptionsMenuContainer,{panelId:panelId,embeddable:embeddable})));return _react2.default.createElement("div",{className:"panel-heading","data-test-subj":"dashboardPanelHeading-"+title.replace(/\s/g,"")},_react2.default.createElement("span",{"data-test-subj":"dashboardPanelTitle",className:"panel-title",title:title,"aria-label":"Dashboard panel: "+title},hidePanelTitles?"":title),_react2.default.createElement("div",{className:"kuiMicroButtonGroup"},_react2.default.createElement(_panel_options_menu_container.PanelOptionsMenuContainer,{panelId:panelId,embeddable:embeddable})))}PanelHeader.propTypes={isViewOnlyMode:_propTypes2.default.bool,title:_propTypes2.default.string,hidePanelTitles:_propTypes2.default.bool.isRequired,embeddable:_embeddable.embeddableShape,panelId:_propTypes2.default.string.isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PanelOptionsMenuContainer=void 0;var _reactRedux=__webpack_require__(27);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _panel_actions_store=__webpack_require__(1602);var _embeddable=__webpack_require__(378);var _panel_options_menu=__webpack_require__(4998);var _panel_actions=__webpack_require__(4999);var _actions=__webpack_require__(303);var _selectors=__webpack_require__(438);var _dashboard_panel_actions=__webpack_require__(439);var _dashboard_view_mode=__webpack_require__(122);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var mapStateToProps=function mapStateToProps(_ref,_ref2){var dashboard=_ref.dashboard;var panelId=_ref2.panelId;var embeddable=(0,_selectors.getEmbeddable)(dashboard,panelId);var panel=(0,_selectors.getPanel)(dashboard,panelId);var embeddableTitle=(0,_selectors.getEmbeddableTitle)(dashboard,panelId);var containerState=(0,_selectors.getContainerState)(dashboard,panelId);var visibleContextMenuPanelId=(0,_selectors.getVisibleContextMenuPanelId)(dashboard);var viewMode=(0,_selectors.getViewMode)(dashboard);return{panelTitle:void 0===panel.title?embeddableTitle:panel.title,editUrl:embeddable?(0,_selectors.getEmbeddableEditUrl)(dashboard,panelId):null,isExpanded:(0,_selectors.getMaximizedPanelId)(dashboard)===panelId,containerState:containerState,visibleContextMenuPanelId:visibleContextMenuPanelId,isViewMode:viewMode===_dashboard_view_mode.DashboardViewMode.VIEW}};var mapDispatchToProps=function mapDispatchToProps(dispatch,_ref3){var panelId=_ref3.panelId;return{onDeletePanel:function onDeletePanel(){dispatch((0,_actions.deletePanel)(panelId))},closeContextMenu:function closeContextMenu(){return dispatch((0,_actions.setVisibleContextMenuPanelId)())},openContextMenu:function openContextMenu(){return dispatch((0,_actions.setVisibleContextMenuPanelId)(panelId))},onMaximizePanel:function onMaximizePanel(){return dispatch((0,_actions.maximizePanel)(panelId))},onMinimizePanel:function onMinimizePanel(){return dispatch((0,_actions.minimizePanel)())},onResetPanelTitle:function onResetPanelTitle(){return dispatch((0,_actions.resetPanelTitle)(panelId))},onUpdatePanelTitle:function onUpdatePanelTitle(newTitle){return dispatch((0,_actions.setPanelTitle)({title:newTitle,panelId:panelId}))}}};var mergeProps=function mergeProps(stateProps,dispatchProps,ownProps){var isExpanded=stateProps.isExpanded,panelTitle=stateProps.panelTitle,containerState=stateProps.containerState,visibleContextMenuPanelId=stateProps.visibleContextMenuPanelId,isViewMode=stateProps.isViewMode;var isPopoverOpen=visibleContextMenuPanelId===ownProps.panelId;var onMaximizePanel=dispatchProps.onMaximizePanel,onMinimizePanel=dispatchProps.onMinimizePanel,onDeletePanel=dispatchProps.onDeletePanel,onResetPanelTitle=dispatchProps.onResetPanelTitle,onUpdatePanelTitle=dispatchProps.onUpdatePanelTitle,closeContextMenu=dispatchProps.closeContextMenu,openContextMenu=dispatchProps.openContextMenu;var toggleContextMenu=function toggleContextMenu(){return isPopoverOpen?closeContextMenu():openContextMenu()};var closeMyContextMenuPanel=function closeMyContextMenuPanel(){isPopoverOpen&&closeContextMenu()};var toggleExpandedPanel=function toggleExpandedPanel(){isExpanded?onMinimizePanel():onMaximizePanel();closeMyContextMenuPanel()};var panels=[];if(isPopoverOpen){var contextMenuPanel=new _dashboard_panel_actions.DashboardContextMenuPanel({title:"Options",id:"mainMenu"});var actions=[(0,_panel_actions.getInspectorPanelAction)({closeContextMenu:closeMyContextMenuPanel,panelTitle:panelTitle}),(0,_panel_actions.getEditPanelAction)(),(0,_panel_actions.getCustomizePanelAction)({onResetPanelTitle:onResetPanelTitle,onUpdatePanelTitle:onUpdatePanelTitle,title:panelTitle,closeContextMenu:closeMyContextMenuPanel}),(0,_panel_actions.getToggleExpandPanelAction)({isExpanded:isExpanded,toggleExpandedPanel:toggleExpandedPanel}),(0,_panel_actions.getRemovePanelAction)(onDeletePanel)].concat(_panel_actions_store.panelActionsStore.actions);panels=(0,_panel_actions.buildEuiContextMenuPanels)({contextMenuPanel:contextMenuPanel,actions:actions,embeddable:ownProps.embeddable,containerState:containerState})}return{panels:panels,toggleContextMenu:toggleContextMenu,closeContextMenu:closeMyContextMenuPanel,isPopoverOpen:isPopoverOpen,isViewMode:isViewMode}};var PanelOptionsMenuContainer=exports.PanelOptionsMenuContainer=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps,mergeProps)(_panel_options_menu.PanelOptionsMenu);PanelOptionsMenuContainer.propTypes={panelId:_propTypes2.default.string.isRequired,embeddable:_embeddable.embeddableShape}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PanelOptionsMenu=PanelOptionsMenu;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function PanelOptionsMenu(_ref){var toggleContextMenu=_ref.toggleContextMenu,isPopoverOpen=_ref.isPopoverOpen,closeContextMenu=_ref.closeContextMenu,panels=_ref.panels,isViewMode=_ref.isViewMode;var button=_react2.default.createElement(_eui.EuiButtonIcon,{iconType:isViewMode?"boxesHorizontal":"gear",color:"text",className:isViewMode&&!isPopoverOpen?"viewModeOpenContextMenuIcon":"","aria-label":"Panel options","data-test-subj":"dashboardPanelToggleMenuIcon",onClick:toggleContextMenu});return _react2.default.createElement(_eui.EuiPopover,{id:"dashboardPanelContextMenu",className:"dashboardPanelPopOver",button:button,isOpen:isPopoverOpen,closePopover:closeContextMenu,panelPaddingSize:"none",anchorPosition:"downRight",withTitle:true},_react2.default.createElement(_eui.EuiContextMenu,{initialPanelId:"mainMenu",panels:panels}))}PanelOptionsMenu.propTypes={panels:_propTypes2.default.array,toggleContextMenu:_propTypes2.default.func,closeContextMenu:_propTypes2.default.func,isPopoverOpen:_propTypes2.default.bool,isViewMode:_propTypes2.default.bool.isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _get_edit_panel_action=__webpack_require__(5e3);Object.defineProperty(exports,"getEditPanelAction",{enumerable:true,get:function get(){return _get_edit_panel_action.getEditPanelAction}});var _get_remove_panel_action=__webpack_require__(5003);Object.defineProperty(exports,"getRemovePanelAction",{enumerable:true,get:function get(){return _get_remove_panel_action.getRemovePanelAction}});var _build_context_menu=__webpack_require__(5004);Object.defineProperty(exports,"buildEuiContextMenuPanels",{enumerable:true,get:function get(){return _build_context_menu.buildEuiContextMenuPanels}});var _get_customize_panel_action=__webpack_require__(5005);Object.defineProperty(exports,"getCustomizePanelAction",{enumerable:true,get:function get(){return _get_customize_panel_action.getCustomizePanelAction}});var _get_toggle_expand_panel_action=__webpack_require__(5007);Object.defineProperty(exports,"getToggleExpandPanelAction",{enumerable:true,get:function get(){return _get_toggle_expand_panel_action.getToggleExpandPanelAction}});var _get_inspector_panel_action=__webpack_require__(5008);Object.defineProperty(exports,"getInspectorPanelAction",{enumerable:true,get:function get(){return _get_inspector_panel_action.getInspectorPanelAction}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getEditPanelAction=getEditPanelAction;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(3);var _dashboard_panel_actions=__webpack_require__(439);var _dashboard_view_mode=__webpack_require__(122);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getEditPanelAction(){return new _dashboard_panel_actions.DashboardPanelAction({displayName:"Edit visualization",id:"editPanel",parentPanelId:"mainMenu"},{icon:_react2.default.createElement(_eui.EuiIcon,{type:"pencil"}),onClick:function onClick(_ref){var embeddable=_ref.embeddable;window.location=embeddable.metadata.editUrl},isVisible:function isVisible(_ref2){var containerState=_ref2.containerState;return containerState.viewMode===_dashboard_view_mode.DashboardViewMode.EDIT},isDisabled:function isDisabled(_ref3){var embeddable=_ref3.embeddable;return!embeddable||!embeddable.metadata||!embeddable.metadata.editUrl}})}},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:true});var DashboardContextMenuPanel=function(){function DashboardContextMenuPanel(config){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,DashboardContextMenuPanel);this.id=config.id;this.title=config.title;options.getContent&&(this.getContent=options.getContent)}_createClass(DashboardContextMenuPanel,[{key:"getContent",value:function getContent(panelActionAPI){return}}]);return DashboardContextMenuPanel}();exports.DashboardContextMenuPanel=DashboardContextMenuPanel},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:true});var DashboardPanelAction=function(){function DashboardPanelAction(config){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,DashboardPanelAction);this.id=config.id;this.displayName=config.displayName;this.parentPanelId=config.parentPanelId;this.icon=options.icon;this.childContextMenuPanel=options.childContextMenuPanel;options.onClick&&(this.onClick=options.onClick);options.isDisabled&&(this.isDisabled=options.isDisabled);options.isVisible&&(this.isVisible=options.isVisible)}_createClass(DashboardPanelAction,[{key:"onClick",value:function onClick(panelActionAPI){return}},{key:"isVisible",value:function isVisible(panelActionAPI){return true}},{key:"isDisabled",value:function isDisabled(panelActionAPI){return false}}]);return DashboardPanelAction}();exports.DashboardPanelAction=DashboardPanelAction},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getRemovePanelAction=getRemovePanelAction;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(3);var _dashboard_panel_actions=__webpack_require__(439);var _dashboard_view_mode=__webpack_require__(122);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getRemovePanelAction(onDeletePanel){return new _dashboard_panel_actions.DashboardPanelAction({displayName:"Delete from dashboard",id:"deletePanel",parentPanelId:"mainMenu"},{icon:_react2.default.createElement(_eui.EuiIcon,{type:"trash"}),isVisible:function isVisible(_ref){var containerState=_ref.containerState;return containerState.viewMode===_dashboard_view_mode.DashboardViewMode.EDIT&&!containerState.isPanelExpanded},onClick:onDeletePanel})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildEuiContextMenuPanels=buildEuiContextMenuPanels;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function getActionsForPanel(contextMenuPanelId,allActions){return allActions.filter(function(action){return action.parentPanelId===contextMenuPanelId})}function buildEuiContextMenuPanelItemsAndChildPanels(_ref){var contextMenuPanelId=_ref.contextMenuPanelId,actions=_ref.actions,embeddable=_ref.embeddable,containerState=_ref.containerState;var items=[];var childPanels=[];var actionsForPanel=getActionsForPanel(contextMenuPanelId,actions);actionsForPanel.forEach(function(action){var isVisible=action.isVisible({embeddable:embeddable,containerState:containerState});if(!isVisible)return;action.childContextMenuPanel&&childPanels.push.apply(childPanels,_toConsumableArray(buildEuiContextMenuPanels({contextMenuPanel:action.childContextMenuPanel,actions:actions,embeddable:embeddable,containerState:containerState})));items.push(convertPanelActionToContextMenuItem({action:action,containerState:containerState,embeddable:embeddable}))});return{items:items,childPanels:childPanels}}function buildEuiContextMenuPanels(_ref2){var contextMenuPanel=_ref2.contextMenuPanel,actions=_ref2.actions,embeddable=_ref2.embeddable,containerState=_ref2.containerState;var euiContextMenuPanel={id:contextMenuPanel.id,title:contextMenuPanel.title,items:[],content:contextMenuPanel.getContent({embeddable:embeddable,containerState:containerState})};var contextMenuPanels=[euiContextMenuPanel];var _buildEuiContextMenuP=buildEuiContextMenuPanelItemsAndChildPanels({contextMenuPanelId:contextMenuPanel.id,actions:actions,embeddable:embeddable,containerState:containerState}),items=_buildEuiContextMenuP.items,childPanels=_buildEuiContextMenuP.childPanels;euiContextMenuPanel.items=items;return contextMenuPanels.concat(childPanels)}function convertPanelActionToContextMenuItem(_ref3){var action=_ref3.action,containerState=_ref3.containerState,embeddable=_ref3.embeddable;return{id:action.id||action.displayName.replace(/\s/g,""),name:action.displayName,icon:action.icon,panel:_lodash2.default.get(action,"childContextMenuPanel.id"),onClick:function onClick(){return action.onClick({embeddable:embeddable,containerState:containerState})},disabled:action.isDisabled({embeddable:embeddable,containerState:containerState}),"data-test-subj":"dashboardPanelAction-"+action.id}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getCustomizePanelAction=getCustomizePanelAction;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(3);var _panel_options_menu_form=__webpack_require__(5006);var _dashboard_panel_actions=__webpack_require__(439);var _dashboard_view_mode=__webpack_require__(122);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getCustomizePanelAction(_ref){var onResetPanelTitle=_ref.onResetPanelTitle,onUpdatePanelTitle=_ref.onUpdatePanelTitle,title=_ref.title,closeContextMenu=_ref.closeContextMenu;return new _dashboard_panel_actions.DashboardPanelAction({id:"customizePanel",displayName:"Customize panel",parentPanelId:"mainMenu"},{icon:_react2.default.createElement(_eui.EuiIcon,{type:"pencil"}),isVisible:function isVisible(_ref2){var containerState=_ref2.containerState;return containerState.viewMode===_dashboard_view_mode.DashboardViewMode.EDIT},childContextMenuPanel:new _dashboard_panel_actions.DashboardContextMenuPanel({id:"panelSubOptionsMenu",title:"Customize panel"},{getContent:function getContent(){return _react2.default.createElement(_panel_options_menu_form.PanelOptionsMenuForm,{onReset:onResetPanelTitle,onUpdatePanelTitle:onUpdatePanelTitle,title:title,onClose:closeContextMenu})}})})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PanelOptionsMenuForm=PanelOptionsMenuForm;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _components=__webpack_require__(33);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function PanelOptionsMenuForm(_ref){var title=_ref.title,onReset=_ref.onReset,onUpdatePanelTitle=_ref.onUpdatePanelTitle,onClose=_ref.onClose;function onInputChange(event){onUpdatePanelTitle(event.target.value)}function onKeyDown(event){event.keyCode===_eui.keyCodes.ENTER&&onClose()}return _react2.default.createElement("div",{className:"kuiVerticalRhythm dashboardPanelMenuOptionsForm","data-test-subj":"dashboardPanelTitleInputMenuItem"},_react2.default.createElement("label",{className:"kuiFormLabel",htmlFor:"panelTitleInput"},"Panel title"),_react2.default.createElement("input",{id:"panelTitleInput","data-test-subj":"customDashboardPanelTitleInput",name:"min",type:"text",className:"kuiTextInput",value:title,onChange:onInputChange,onKeyDown:onKeyDown,"aria-label":"Changes to this input are applied immediately. Press enter to exit."}),_react2.default.createElement(_components.KuiButton,{buttonType:"hollow","data-test-subj":"resetCustomDashboardPanelTitle",onClick:onReset},"Reset title"))}PanelOptionsMenuForm.propTypes={title:_propTypes2.default.string,onUpdatePanelTitle:_propTypes2.default.func.isRequired,onReset:_propTypes2.default.func.isRequired,onClose:_propTypes2.default.func.isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getToggleExpandPanelAction=getToggleExpandPanelAction;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(3);var _dashboard_panel_actions=__webpack_require__(439);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getToggleExpandPanelAction(_ref){var isExpanded=_ref.isExpanded,toggleExpandedPanel=_ref.toggleExpandedPanel;return new _dashboard_panel_actions.DashboardPanelAction({displayName:isExpanded?"Minimize":"Full screen",id:"togglePanel",parentPanelId:"mainMenu"},{icon:_react2.default.createElement(_eui.EuiIcon,{type:(isExpanded,"expand")}),onClick:toggleExpandedPanel})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getInspectorPanelAction=getInspectorPanelAction;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(3);var _inspector=__webpack_require__(486);var _dashboard_panel_actions=__webpack_require__(439);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getInspectorPanelAction(_ref){var closeContextMenu=_ref.closeContextMenu,panelTitle=_ref.panelTitle;return new _dashboard_panel_actions.DashboardPanelAction({id:"openInspector",displayName:"Inspect",parentPanelId:"mainMenu"},{icon:_react2.default.createElement(_eui.EuiIcon,{type:"inspect"}),onClick:function onClick(_ref2){var embeddable=_ref2.embeddable;closeContextMenu();var session=_inspector.Inspector.open(embeddable.getInspectorAdapters(),{title:panelTitle});var originalDestroy=embeddable.destroy;embeddable.destroy=function(){session.close();originalDestroy&&originalDestroy.call(embeddable)};session.on("closed",function(){embeddable.destroy=originalDestroy})},isVisible:function isVisible(_ref3){var embeddable=_ref3.embeddable;return embeddable&&_inspector.Inspector.isAvailable(embeddable.getInspectorAdapters())}})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PanelError=PanelError;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function PanelError(_ref){var error=_ref.error;return _react2.default.createElement("div",{className:"load-error"},_react2.default.createElement("span",{"aria-hidden":"true",className:"kuiIcon fa-exclamation-triangle"}),_react2.default.createElement("span",null,error))}PanelError.propTypes={error:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.node])}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createPanelState=createPanelState;var _dashboard_constants=__webpack_require__(251);var _chrome=__webpack_require__(8);var _chrome2=_interopRequireDefault(_chrome);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function findTopLeftMostOpenSpace(width,height,currentPanels){var maxY=-1;for(var i=0;i<currentPanels.length;i++){var panel=currentPanels[i];maxY=Math.max(panel.gridData.y+panel.gridData.h,maxY)}if(maxY<0)return{x:0,y:0};var grid=new Array(maxY);for(var y=0;y<maxY;y++)grid[y]=new Array(_dashboard_constants.DASHBOARD_GRID_COLUMN_COUNT).fill(0);for(var _i=0;_i<currentPanels.length;_i++){var _panel=currentPanels[_i];for(var x=_panel.gridData.x;x<_panel.gridData.x+_panel.gridData.w;x++)for(var _y=_panel.gridData.y;_y<_panel.gridData.y+_panel.gridData.h;_y++)grid[_y][x]=1}for(var _y2=0;_y2<maxY;_y2++)for(var _x=0;_x<_dashboard_constants.DASHBOARD_GRID_COLUMN_COUNT;_x++){if(1===grid[_y2][_x])continue;for(var h=_y2;h<Math.min(_y2+height,maxY);h++)for(var w=_x;w<Math.min(_x+width,_dashboard_constants.DASHBOARD_GRID_COLUMN_COUNT);w++){var spaceIsEmpty=0===grid[h][w];var fitsPanelWidth=w===_x+width-1;var fitsPanelHeight=h===Math.min(_y2+height-1,maxY-1);if(spaceIsEmpty&&fitsPanelWidth&&fitsPanelHeight)return{x:_x,y:_y2};if(1===grid[h][w])break}}return{x:0,y:Infinity}}function createPanelState(id,type,panelIndex,currentPanels){var _findTopLeftMostOpenS=findTopLeftMostOpenSpace(_dashboard_constants.DEFAULT_PANEL_WIDTH,_dashboard_constants.DEFAULT_PANEL_HEIGHT,currentPanels),x=_findTopLeftMostOpenS.x,y=_findTopLeftMostOpenS.y;return{gridData:{w:_dashboard_constants.DEFAULT_PANEL_WIDTH,h:_dashboard_constants.DEFAULT_PANEL_HEIGHT,x:x,y:y,i:panelIndex.toString()},version:_chrome2.default.getKibanaVersion(),panelIndex:panelIndex.toString(),type:type,id:id,embeddableConfig:{}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.saveDashboard=saveDashboard;var _update_saved_dashboard=__webpack_require__(5012);function saveDashboard(toJson,timeFilter,dashboardStateManager,saveOptions){dashboardStateManager.saveState();var savedDashboard=dashboardStateManager.savedDashboard;var appState=dashboardStateManager.appState;(0,_update_saved_dashboard.updateSavedDashboard)(savedDashboard,appState,timeFilter,toJson);return savedDashboard.save(saveOptions).then(function(id){dashboardStateManager.lastSavedDashboardFilters=dashboardStateManager.getFilterState();dashboardStateManager.resetState();return id})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.updateSavedDashboard=updateSavedDashboard;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _filter_utils=__webpack_require__(937);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function updateSavedDashboard(savedDashboard,appState,timeFilter,toJson){savedDashboard.title=appState.title;savedDashboard.description=appState.description;savedDashboard.timeRestore=appState.timeRestore;savedDashboard.panelsJSON=toJson(appState.panels);savedDashboard.optionsJSON=toJson(appState.options);savedDashboard.timeFrom=savedDashboard.timeRestore?_filter_utils.FilterUtils.convertTimeToUTCString(timeFilter.getTime().from):void 0;savedDashboard.timeTo=savedDashboard.timeRestore?_filter_utils.FilterUtils.convertTimeToUTCString(timeFilter.getTime().to):void 0;var timeRestoreObj=_lodash2.default.pick(timeFilter.getRefreshInterval(),["display","pause","section","value"]);savedDashboard.refreshInterval=savedDashboard.timeRestore?timeRestoreObj:void 0}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.getAppStateDefaults=getAppStateDefaults;var _dashboard_view_mode=__webpack_require__(122);var _filter_utils=__webpack_require__(937);function getAppStateDefaults(savedDashboard,hideWriteControls){var appState={fullScreenMode:false,title:savedDashboard.title,description:savedDashboard.description,timeRestore:savedDashboard.timeRestore,panels:savedDashboard.panelsJSON?JSON.parse(savedDashboard.panelsJSON):[],options:savedDashboard.optionsJSON?JSON.parse(savedDashboard.optionsJSON):{},query:_filter_utils.FilterUtils.getQueryFilterForDashboard(savedDashboard),filters:_filter_utils.FilterUtils.getFilterBarsForDashboard(savedDashboard),viewMode:savedDashboard.id||hideWriteControls?_dashboard_view_mode.DashboardViewMode.VIEW:_dashboard_view_mode.DashboardViewMode.EDIT};if(savedDashboard.uiStateJSON){var uiState=JSON.parse(savedDashboard.uiStateJSON);appState.panels.forEach(function(panel){panel.embeddableConfig=uiState["P-"+panel.panelIndex]});delete savedDashboard.uiStateJSON}appState.panels.forEach(function(panel){if(panel.columns||panel.sort){panel.embeddableConfig=_extends({},panel.embeddableConfig,{columns:panel.columns,sort:panel.sort});delete panel.columns;delete panel.sort}});return appState}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.migrateAppState=migrateAppState;function migrateAppState(appState){if(appState.uiState){appState.panels.forEach(function(panel){panel.embeddableConfig=appState.uiState["P-"+panel.panelIndex]});delete appState.uiState;appState.save()}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.showCloneModal=showCloneModal;var _clone_modal=__webpack_require__(5016);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _reactDom=__webpack_require__(15);var _reactDom2=_interopRequireDefault(_reactDom);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function showCloneModal(onClone,title){var container=document.createElement("div");var closeModal=function closeModal(){_reactDom2.default.unmountComponentAtNode(container);document.body.removeChild(container)};var onCloneConfirmed=function onCloneConfirmed(newTitle,isTitleDuplicateConfirmed,onTitleDuplicate){onClone(newTitle,isTitleDuplicateConfirmed,onTitleDuplicate).then(function(_ref){var id=_ref.id,error=_ref.error;(id||error)&&closeModal()})};document.body.appendChild(container);var element=_react2.default.createElement(_clone_modal.DashboardCloneModal,{onClone:onCloneConfirmed,onClose:closeModal,title:title+" Copy"});_reactDom2.default.render(element,container)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardCloneModal=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var DashboardCloneModal=exports.DashboardCloneModal=function(_React$Component){_inherits(DashboardCloneModal,_React$Component);function DashboardCloneModal(props){var _this2=this;_classCallCheck(this,DashboardCloneModal);var _this=_possibleConstructorReturn(this,(DashboardCloneModal.__proto__||Object.getPrototypeOf(DashboardCloneModal)).call(this,props));_this.onTitleDuplicate=function(){_this.setState({isTitleDuplicateConfirmed:true,hasTitleDuplicate:true})};_this.cloneDashboard=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_this.setState({isLoading:true});_context.next=3;return _this.props.onClone(_this.state.newDashboardName,_this.state.isTitleDuplicateConfirmed,_this.onTitleDuplicate);case 3:_this._isMounted&&_this.setState({isLoading:false});case 4:case"end":return _context.stop()}},_callee,_this2)}));_this.onInputChange=function(event){_this.setState({newDashboardName:event.target.value,isTitleDuplicateConfirmed:false,hasTitleDuplicate:false})};_this.renderDuplicateTitleCallout=function(){if(!_this.state.hasTitleDuplicate)return;return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_eui.EuiCallOut,{title:"A Dashboard with the title '"+_this.state.newDashboardName+"' already exists.",color:"warning","data-test-subj":"titleDupicateWarnMsg"},_react2.default.createElement("p",null,"Click ",_react2.default.createElement("strong",null,"Confirm Clone")," to clone the dashboard with the duplicate title.")),_react2.default.createElement(_eui.EuiSpacer,null))};_this.state={newDashboardName:props.title,isTitleDuplicateConfirmed:false,hasTitleDuplicate:false,isLoading:false};return _this}_createClass(DashboardCloneModal,[{key:"componentDidMount",value:function componentDidMount(){this._isMounted=true}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._isMounted=false}},{key:"render",value:function render(){return _react2.default.createElement(_eui.EuiOverlayMask,null,_react2.default.createElement(_eui.EuiModal,{"data-test-subj":"dashboardCloneModal",className:"dashboardModal",onClose:this.props.onClose},_react2.default.createElement(_eui.EuiModalHeader,null,_react2.default.createElement(_eui.EuiModalHeaderTitle,null,"Clone Dashboard")),_react2.default.createElement(_eui.EuiModalBody,null,_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("p",null,"Please enter a new name for your dashboard.")),_react2.default.createElement(_eui.EuiSpacer,null),this.renderDuplicateTitleCallout(),_react2.default.createElement(_eui.EuiFieldText,{autoFocus:true,"data-test-subj":"clonedDashboardTitle",value:this.state.newDashboardName,onChange:this.onInputChange,isInvalid:this.state.hasTitleDuplicate})),_react2.default.createElement(_eui.EuiModalFooter,null,_react2.default.createElement(_eui.EuiButton,{"data-test-subj":"cloneCancelButton",onClick:this.props.onClose},"Cancel"),_react2.default.createElement(_eui.EuiButton,{fill:true,"data-test-subj":"cloneConfirmButton",onClick:this.cloneDashboard,isLoading:this.state.isLoading},"Confirm Clone"))))}}]);return DashboardCloneModal}(_react2.default.Component);DashboardCloneModal.propTypes={onClone:_propTypes2.default.func,onClose:_propTypes2.default.func,title:_propTypes2.default.string}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.showSaveModal=showSaveModal;var _save_modal=__webpack_require__(5018);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _reactDom=__webpack_require__(15);var _reactDom2=_interopRequireDefault(_reactDom);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function showSaveModal(_ref){var onSave=_ref.onSave,title=_ref.title,description=_ref.description,timeRestore=_ref.timeRestore,showCopyOnSave=_ref.showCopyOnSave;var container=document.createElement("div");var closeModal=function closeModal(){_reactDom2.default.unmountComponentAtNode(container);document.body.removeChild(container)};var onSaveConfirmed=function onSaveConfirmed(){onSave.apply(void 0,arguments).then(function(_ref2){var id=_ref2.id,error=_ref2.error;(id||error)&&closeModal()})};document.body.appendChild(container);var element=_react2.default.createElement(_save_modal.DashboardSaveModal,{onSave:onSaveConfirmed,onClose:closeModal,title:title,description:description,timeRestore:timeRestore,showCopyOnSave:showCopyOnSave});_reactDom2.default.render(element,container)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardSaveModal=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var DashboardSaveModal=exports.DashboardSaveModal=function(_React$Component){_inherits(DashboardSaveModal,_React$Component);function DashboardSaveModal(props){var _this2=this;_classCallCheck(this,DashboardSaveModal);var _this=_possibleConstructorReturn(this,(DashboardSaveModal.__proto__||Object.getPrototypeOf(DashboardSaveModal)).call(this,props));_this.onTitleDuplicate=function(){_this.setState({isLoading:false,isTitleDuplicateConfirmed:true,hasTitleDuplicate:true})};_this.saveDashboard=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!_this.state.isLoading){_context.next=2;break}return _context.abrupt("return");case 2:_this.setState({isLoading:true});_context.next=5;return _this.props.onSave({newTitle:_this.state.title,newDescription:_this.state.description,newCopyOnSave:_this.state.copyOnSave,newTimeRestore:_this.state.timeRestore,isTitleDuplicateConfirmed:_this.state.isTitleDuplicateConfirmed,onTitleDuplicate:_this.onTitleDuplicate});case 5:case"end":return _context.stop()}},_callee,_this2)}));_this.onTitleChange=function(event){_this.setState({title:event.target.value,isTitleDuplicateConfirmed:false,hasTitleDuplicate:false})};_this.onDescriptionChange=function(event){_this.setState({description:event.target.value})};_this.onCopyOnSaveChange=function(event){_this.setState({copyOnSave:event.target.checked})};_this.onTimeRestoreChange=function(event){_this.setState({timeRestore:event.target.checked})};_this.renderDuplicateTitleCallout=function(){if(!_this.state.hasTitleDuplicate)return;return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_eui.EuiCallOut,{title:"A Dashboard with the title '"+_this.state.title+"' already exists.",color:"warning","data-test-subj":"titleDupicateWarnMsg"},_react2.default.createElement("p",null,"Click ",_react2.default.createElement("strong",null,"Confirm Save")," to save the dashboard with the duplicate title.")),_react2.default.createElement(_eui.EuiSpacer,null))};_this.renderCopyOnSave=function(){if(!_this.props.showCopyOnSave)return;return _react2.default.createElement(_eui.EuiFormRow,{label:"Save as a new dashboard"},_react2.default.createElement(_eui.EuiSwitch,{"data-test-subj":"saveAsNewCheckbox",checked:_this.state.copyOnSave,onChange:_this.onCopyOnSaveChange}))};_this.state={title:props.title,description:props.description,copyOnSave:false,timeRestore:props.timeRestore,isTitleDuplicateConfirmed:false,hasTitleDuplicate:false,isLoading:false};return _this}_createClass(DashboardSaveModal,[{key:"componentDidMount",value:function componentDidMount(){this._isMounted=true}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._isMounted=false}},{key:"render",value:function render(){return _react2.default.createElement(_eui.EuiOverlayMask,null,_react2.default.createElement(_eui.EuiModal,{"data-test-subj":"dashboardSaveModal",className:"dashboardModal",onClose:this.props.onClose},_react2.default.createElement(_eui.EuiModalHeader,null,_react2.default.createElement(_eui.EuiModalHeaderTitle,null,"Save Dashboard")),_react2.default.createElement(_eui.EuiModalBody,null,this.renderDuplicateTitleCallout(),_react2.default.createElement(_eui.EuiForm,null,this.renderCopyOnSave(),_react2.default.createElement(_eui.EuiFormRow,{label:"Title"},_react2.default.createElement(_eui.EuiFieldText,{autoFocus:true,"data-test-subj":"dashboardTitle",value:this.state.title,onChange:this.onTitleChange,isInvalid:this.state.hasTitleDuplicate})),_react2.default.createElement(_eui.EuiFormRow,{label:"Description"},_react2.default.createElement(_eui.EuiTextArea,{"data-test-subj":"dashboardDescription",value:this.state.description,onChange:this.onDescriptionChange,compressed:true})),_react2.default.createElement(_eui.EuiFormRow,{label:"Store time with dashboard",helpText:"This changes the time filter to the currently selected time each time this dashboard is loaded."},_react2.default.createElement(_eui.EuiSwitch,{"data-test-subj":"storeTimeWithDashboard",checked:this.state.timeRestore,onChange:this.onTimeRestoreChange})))),_react2.default.createElement(_eui.EuiModalFooter,null,_react2.default.createElement(_eui.EuiButton,{"data-test-subj":"saveCancelButton",onClick:this.props.onClose},"Cancel"),_react2.default.createElement(_eui.EuiButton,{fill:true,"data-test-subj":"confirmSaveDashboardButton",onClick:this.saveDashboard,isLoading:this.state.isLoading},"Confirm Save"))))}}]);return DashboardSaveModal}(_react2.default.Component);DashboardSaveModal.propTypes={onSave:_propTypes2.default.func.isRequired,onClose:_propTypes2.default.func.isRequired,title:_propTypes2.default.string.isRequired,description:_propTypes2.default.string.isRequired,timeRestore:_propTypes2.default.bool.isRequired,showCopyOnSave:_propTypes2.default.bool.isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.showAddPanel=showAddPanel;var _add_panel=__webpack_require__(5020);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _reactDom=__webpack_require__(15);var _reactDom2=_interopRequireDefault(_reactDom);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}var isOpen=false;function showAddPanel(savedObjectsClient,addNewPanel,addNewVis,listingLimit,isLabsEnabled,visTypes){var _this=this;if(isOpen)return;isOpen=true;var container=document.createElement("div");var onClose=function onClose(){_reactDom2.default.unmountComponentAtNode(container);document.body.removeChild(container);isOpen=false};var find=(_ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(type,search){var resp;return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return savedObjectsClient.find({type:type,fields:["title","visState"],search:search?search+"*":void 0,page:1,perPage:listingLimit,searchFields:["title^3","description"]});case 2:resp=_context.sent;"visualization"!==type||isLabsEnabled||(resp.savedObjects=resp.savedObjects.filter(function(savedObject){var typeName=JSON.parse(savedObject.attributes.visState).type;var visType=visTypes.byName[typeName];return"lab"!==visType.stage}));return _context.abrupt("return",resp);case 5:case"end":return _context.stop()}},_callee,_this)})),function find(_x,_x2){return _ref.apply(this,arguments)});var _ref;var addNewVisWithCleanup=function addNewVisWithCleanup(){onClose();addNewVis()};document.body.appendChild(container);var element=_react2.default.createElement(_add_panel.DashboardAddPanel,{onClose:onClose,find:find,addNewPanel:addNewPanel,addNewVis:addNewVisWithCleanup});_reactDom2.default.render(element,container)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardAddPanel=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();__webpack_require__(5021);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _notify=__webpack_require__(9);var _saved_object_finder=__webpack_require__(5022);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var VIS_TAB_ID="vis";var SAVED_SEARCH_TAB_ID="search";var DashboardAddPanel=exports.DashboardAddPanel=function(_React$Component){_inherits(DashboardAddPanel,_React$Component);function DashboardAddPanel(props){_classCallCheck(this,DashboardAddPanel);var _this=_possibleConstructorReturn(this,(DashboardAddPanel.__proto__||Object.getPrototypeOf(DashboardAddPanel)).call(this,props));_this.onSelectedTabChanged=function(tab){_this.setState({selectedTab:tab})};_this.onAddPanel=function(id,type){_this.props.addNewPanel(id,type);_this.lastToast&&_notify.toastNotifications.remove(_this.lastToast);_this.lastToast=_notify.toastNotifications.addSuccess({title:_this.state.selectedTab.name+" was added to your dashboard","data-test-subj":_this.state.selectedTab.toastDataTestSubj})};var addNewVisBtn=_react2.default.createElement(_eui.EuiButton,{onClick:_this.props.addNewVis,"data-test-subj":"addNewSavedObjectLink"},"Add new Visualization");var tabs=[{id:VIS_TAB_ID,name:"Visualization",dataTestSubj:"addVisualizationTab",toastDataTestSubj:"addVisualizationToDashboardSuccess",savedObjectFinder:_react2.default.createElement(_saved_object_finder.SavedObjectFinder,{key:"visSavedObjectFinder",callToActionButton:addNewVisBtn,onChoose:_this.onAddPanel,find:_this.props.find,noItemsMessage:"No matching visualizations found.",savedObjectType:"visualization"})},{id:SAVED_SEARCH_TAB_ID,name:"Saved Search",dataTestSubj:"addSavedSearchTab",toastDataTestSubj:"addSavedSearchToDashboardSuccess",savedObjectFinder:_react2.default.createElement(_saved_object_finder.SavedObjectFinder,{key:"searchSavedObjectFinder",onChoose:_this.onAddPanel,find:_this.props.find,noItemsMessage:"No matching saved searches found.",savedObjectType:"search"})}];_this.state={tabs:tabs,selectedTab:tabs[0]};return _this}_createClass(DashboardAddPanel,[{key:"renderTabs",value:function renderTabs(){var _this2=this;return this.state.tabs.map(function(tab){return _react2.default.createElement(_eui.EuiTab,{onClick:function onClick(){return _this2.onSelectedTabChanged(tab)},isSelected:tab.id===_this2.state.selectedTab.id,key:tab.id,"data-test-subj":tab.dataTestSubj},tab.name)})}},{key:"render",value:function render(){return _react2.default.createElement(_eui.EuiFlyout,{ownFocus:true,className:"addPanelFlyout",onClose:this.props.onClose,size:"s","data-test-subj":"dashboardAddPanel"},_react2.default.createElement(_eui.EuiFlyoutBody,null,_react2.default.createElement(_eui.EuiFlexGroup,null,_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiTitle,null,_react2.default.createElement("h2",null,"Add Panels")))),_react2.default.createElement(_eui.EuiTabs,null,this.renderTabs()),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),this.state.selectedTab.savedObjectFinder))}}]);return DashboardAddPanel}(_react2.default.Component);DashboardAddPanel.propTypes={onClose:_propTypes2.default.func.isRequired,find:_propTypes2.default.func.isRequired,addNewPanel:_propTypes2.default.func.isRequired,addNewVis:_propTypes2.default.func.isRequired}},function(module,exports){},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SavedObjectFinder=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var SavedObjectFinder=exports.SavedObjectFinder=function(_React$Component){_inherits(SavedObjectFinder,_React$Component);function SavedObjectFinder(props){var _this2=this;_classCallCheck(this,SavedObjectFinder);var _this=_possibleConstructorReturn(this,(SavedObjectFinder.__proto__||Object.getPrototypeOf(SavedObjectFinder)).call(this,props));_this.onTableChange=function(_ref){var page=_ref.page,_ref$sort=_ref.sort,sort=void 0===_ref$sort?{}:_ref$sort;var sortField=sort.field,sortDirection=sort.direction;if(_this.state.sortField===sortField&&"desc"===_this.state.sortDirection&&"asc"===sortDirection){sortField=null;sortDirection=null}_this.setState({page:page.index,perPage:page.size,sortField:sortField,sortDirection:sortDirection})};_this.getPageOfItems=function(){var items=_this.state.items.slice();_this.state.sortField&&items.sort(function(a,b){var fieldA=_lodash2.default.get(a,_this.state.sortField,"");var fieldB=_lodash2.default.get(b,_this.state.sortField,"");var order=1;"desc"===_this.state.sortDirection&&(order=-1);return order*fieldA.toLowerCase().localeCompare(fieldB.toLowerCase())});var startIndex=_this.state.page*_this.state.perPage;var lastIndex=startIndex+_this.state.perPage;return items.slice(startIndex,lastIndex)};_this.debouncedFetch=_lodash2.default.debounce((_ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee(filter){var response;return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return _this.props.find(_this.props.savedObjectType,filter);case 2:response=_context.sent;if(_this._isMounted){_context.next=5;break}return _context.abrupt("return");case 5:filter===_this.state.filter&&_this.setState({isFetchingItems:false,items:response.savedObjects.map(function(savedObject){return{title:savedObject.attributes.title,id:savedObject.id,type:savedObject.type}})});case 6:case"end":return _context.stop()}},_callee,_this2)})),function(_x){return _ref2.apply(this,arguments)}),300);var _ref2;_this.fetchItems=function(){_this.setState({isFetchingItems:true},_this.debouncedFetch.bind(null,_this.state.filter))};_this.state={items:[],isFetchingItems:false,page:0,perPage:10,filter:""};return _this}_createClass(SavedObjectFinder,[{key:"componentWillUnmount",value:function componentWillUnmount(){this._isMounted=false;this.debouncedFetch.cancel()}},{key:"componentDidMount",value:function componentDidMount(){this._isMounted=true;this.fetchItems()}},{key:"renderSearchBar",value:function renderSearchBar(){var _this3=this;var actionBtn=void 0;this.props.callToActionButton&&(actionBtn=_react2.default.createElement(_eui.EuiFlexItem,{grow:false},this.props.callToActionButton));return _react2.default.createElement(_eui.EuiFlexGroup,null,_react2.default.createElement(_eui.EuiFlexItem,{grow:true},_react2.default.createElement(_eui.EuiFieldSearch,{placeholder:"Search...",fullWidth:true,value:this.state.filter,onChange:function onChange(e){_this3.setState({filter:e.target.value},_this3.fetchItems)},"data-test-subj":"savedObjectFinderSearchInput"})),actionBtn)}},{key:"renderTable",value:function renderTable(){var _this4=this;var pagination={pageIndex:this.state.page,pageSize:this.state.perPage,totalItemCount:this.state.items.length,pageSizeOptions:[5,10]};var sorting={};this.state.sortField&&(sorting.sort={field:this.state.sortField,direction:this.state.sortDirection});var tableColumns=[{field:"title",name:"Title",sortable:true,render:function render(field,record){return _react2.default.createElement(_eui.EuiLink,{onClick:function onClick(){_this4.props.onChoose(record.id,record.type)},"data-test-subj":"addPanel"+field.split(" ").join("-")},field)}}];var items=0===this.state.items.length?[]:this.getPageOfItems();return _react2.default.createElement(_eui.EuiBasicTable,{items:items,loading:this.state.isFetchingItems,columns:tableColumns,pagination:pagination,sorting:sorting,onChange:this.onTableChange,noItemsMessage:this.props.noItemsMessage})}},{key:"render",value:function render(){return _react2.default.createElement(_react2.default.Fragment,null,this.renderSearchBar(),this.renderTable())}}]);return SavedObjectFinder}(_react2.default.Component);SavedObjectFinder.propTypes={callToActionButton:_propTypes2.default.node,onChoose:_propTypes2.default.func.isRequired,find:_propTypes2.default.func.isRequired,noItemsMessage:_propTypes2.default.node,savedObjectType:_propTypes2.default.oneOf(["visualization","search"]).isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardViewportProvider=DashboardViewportProvider;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _store=__webpack_require__(1605);var _reactRedux=__webpack_require__(27);var _dashboard_viewport_container=__webpack_require__(5024);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function DashboardViewportProvider(props){return _react2.default.createElement(_reactRedux.Provider,{store:_store.store},_react2.default.createElement(_dashboard_viewport_container.DashboardViewportContainer,props))}DashboardViewportProvider.propTypes={getEmbeddableFactory:_propTypes2.default.func.isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardViewportContainer=void 0;var _reactRedux=__webpack_require__(27);var _dashboard_viewport=__webpack_require__(5025);var _actions=__webpack_require__(303);var _selectors=__webpack_require__(438);var mapStateToProps=function mapStateToProps(_ref){var dashboard=_ref.dashboard;var maximizedPanelId=(0,_selectors.getMaximizedPanelId)(dashboard);return{maximizedPanelId:maximizedPanelId,panelCount:Object.keys((0,_selectors.getPanels)(dashboard)).length,description:(0,_selectors.getDescription)(dashboard),title:(0,_selectors.getTitle)(dashboard),useMargins:(0,_selectors.getUseMargins)(dashboard),isFullScreenMode:(0,_selectors.getFullScreenMode)(dashboard)}};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{onExitFullScreenMode:function onExitFullScreenMode(){return dispatch((0,_actions.updateIsFullScreenMode)(false))}}};exports.DashboardViewportContainer=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(_dashboard_viewport.DashboardViewport)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardViewport=DashboardViewport;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _grid=__webpack_require__(5026);var _exit_full_screen_button=__webpack_require__(5063);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function DashboardViewport(_ref){var maximizedPanelId=_ref.maximizedPanelId,getEmbeddableFactory=_ref.getEmbeddableFactory,panelCount=_ref.panelCount,title=_ref.title,description=_ref.description,useMargins=_ref.useMargins,isFullScreenMode=_ref.isFullScreenMode,onExitFullScreenMode=_ref.onExitFullScreenMode;return _react2.default.createElement("div",{"data-shared-items-count":panelCount,"data-shared-items-container":true,"data-title":title,"data-description":description,className:useMargins?"dashboard-viewport-with-margins":"dashboard-viewport"},isFullScreenMode&&_react2.default.createElement(_exit_full_screen_button.ExitFullScreenButton,{onExitFullScreenMode:onExitFullScreenMode}),_react2.default.createElement(_grid.DashboardGrid,{getEmbeddableFactory:getEmbeddableFactory,maximizedPanelId:maximizedPanelId}))}DashboardViewport.propTypes={getEmbeddableFactory:_propTypes2.default.func,maximizedPanelId:_propTypes2.default.string,panelCount:_propTypes2.default.number,title:_propTypes2.default.string,description:_propTypes2.default.string,useMargins:_propTypes2.default.bool.isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _dashboard_grid_container=__webpack_require__(5027);Object.defineProperty(exports,"DashboardGrid",{enumerable:true,get:function get(){return _dashboard_grid_container.DashboardGridContainer}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardGridContainer=void 0;var _reactRedux=__webpack_require__(27);var _dashboard_grid=__webpack_require__(5028);var _actions=__webpack_require__(303);var _selectors=__webpack_require__(438);var mapStateToProps=function mapStateToProps(_ref){var dashboard=_ref.dashboard;return{panels:(0,_selectors.getPanels)(dashboard),dashboardViewMode:(0,_selectors.getViewMode)(dashboard),useMargins:(0,_selectors.getUseMargins)(dashboard)}};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{onPanelsUpdated:function onPanelsUpdated(updatedPanels){return dispatch((0,_actions.updatePanels)(updatedPanels))}}};exports.DashboardGridContainer=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(_dashboard_grid.DashboardGrid)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardGrid=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _reactGridLayout=__webpack_require__(5029);var _reactGridLayout2=_interopRequireDefault(_reactGridLayout);var _classnames=__webpack_require__(5);var _classnames2=_interopRequireDefault(_classnames);var _panel_utils=__webpack_require__(1604);var _dashboard_view_mode=__webpack_require__(122);var _panel=__webpack_require__(1631);var _notify=__webpack_require__(9);var _dashboard_constants=__webpack_require__(251);var _reactSizeme=__webpack_require__(5040);var _reactSizeme2=_interopRequireDefault(_reactSizeme);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var config={monitorWidth:true};var lastValidGridSize=0;function ensureWindowScrollsToBottom(layout,oldResizeItem,l,placeholder,event){var WINDOW_BUFFER=10;event.clientY>window.innerHeight-WINDOW_BUFFER&&window.scrollTo(0,event.pageY+WINDOW_BUFFER-window.innerHeight)}function ResponsiveGrid(_ref){var size=_ref.size,isViewMode=_ref.isViewMode,layout=_ref.layout,onLayoutChange=_ref.onLayoutChange,children=_ref.children,maximizedPanelId=_ref.maximizedPanelId,useMargins=_ref.useMargins;lastValidGridSize=size.width>0?size.width:lastValidGridSize;var classes=(0,_classnames2.default)({"layout-view":isViewMode,"layout-edit":!isViewMode,"layout-maximized-panel":void 0!==maximizedPanelId,"layout-with-margins":useMargins});var MARGINS=useMargins?8:0;return _react2.default.createElement(_reactGridLayout2.default,{width:lastValidGridSize,className:classes,isDraggable:true,isResizable:true,useCSSTransforms:false,margin:[MARGINS,MARGINS],cols:_dashboard_constants.DASHBOARD_GRID_COLUMN_COUNT,rowHeight:_dashboard_constants.DASHBOARD_GRID_HEIGHT,draggableHandle:isViewMode?".doesnt-exist":".panel-title",layout:layout,onLayoutChange:onLayoutChange,measureBeforeMount:false,onResize:ensureWindowScrollsToBottom},children)}var ResponsiveSizedGrid=(0,_reactSizeme2.default)(config)(ResponsiveGrid);var DashboardGrid=exports.DashboardGrid=function(_React$Component){_inherits(DashboardGrid,_React$Component);function DashboardGrid(props){_classCallCheck(this,DashboardGrid);var _this=_possibleConstructorReturn(this,(DashboardGrid.__proto__||Object.getPrototypeOf(DashboardGrid)).call(this,props));_initialiseProps.call(_this);_this.gridItems={};var isLayoutInvalid=false;var layout=void 0;try{layout=_this.buildLayoutFromPanels()}catch(error){isLayoutInvalid=true;_notify.toastNotifications.addDanger({title:"Unable to load dashboard.",text:error.message});window.location="#"+_dashboard_constants.DashboardConstants.LANDING_PAGE_PATH}_this.state={focusedPanelIndex:void 0,layout:layout,isLayoutInvalid:isLayoutInvalid};_this.embeddableFactoryMap={};return _this}_createClass(DashboardGrid,[{key:"buildLayoutFromPanels",value:function buildLayoutFromPanels(){var _this2=this;return _lodash2.default.map(this.props.panels,function(panel){var panelVersion=panel.version?_panel_utils.PanelUtils.parseVersion(panel.version):_panel_utils.PanelUtils.parseVersion("6.0.0");(panelVersion.major<6||6===panelVersion.major&&panelVersion.minor<1)&&_panel_utils.PanelUtils.convertPanelDataPre_6_1(panel);(panelVersion.major<6||6===panelVersion.major&&panelVersion.minor<3)&&_panel_utils.PanelUtils.convertPanelDataPre_6_3(panel,_this2.props.useMargins);return panel.gridData})}},{key:"createEmbeddableFactoriesMap",value:function createEmbeddableFactoriesMap(panels){var _this3=this;Object.values(panels).map(function(panel){_this3.embeddableFactoryMap[panel.type]||(_this3.embeddableFactoryMap[panel.type]=_this3.props.getEmbeddableFactory(panel.type))})}},{key:"componentWillMount",value:function componentWillMount(){this.createEmbeddableFactoriesMap(this.props.panels)}},{key:"componentWillReceiveProps",value:function componentWillReceiveProps(nextProps){this.createEmbeddableFactoriesMap(nextProps.panels)}},{key:"renderDOM",value:function renderDOM(){var _this4=this;var _props=this.props,panels=_props.panels,maximizedPanelId=_props.maximizedPanelId;var focusedPanelIndex=this.state.focusedPanelIndex;var panelsInOrder=Object.keys(panels).map(function(key){return panels[key]});panelsInOrder.sort(function(panelA,panelB){return panelA.gridData.y===panelB.gridData.y?panelA.gridData.x-panelB.gridData.x:panelA.gridData.y-panelB.gridData.y});return _lodash2.default.map(panelsInOrder,function(panel){var expandPanel=void 0!==maximizedPanelId&&maximizedPanelId===panel.panelIndex;var hidePanel=void 0!==maximizedPanelId&&maximizedPanelId!==panel.panelIndex;var classes=(0,_classnames2.default)({"grid-item--expanded":expandPanel,"grid-item--hidden":hidePanel});return _react2.default.createElement("div",{style:{zIndex:focusedPanelIndex===panel.panelIndex?"2":"auto"},className:classes,key:panel.panelIndex,ref:function ref(reactGridItem){_this4.gridItems[panel.panelIndex]=reactGridItem}},_react2.default.createElement(_panel.DashboardPanel,{panelId:panel.panelIndex,embeddableFactory:_this4.embeddableFactoryMap[panel.type],onPanelFocused:_this4.onPanelFocused,onPanelBlurred:_this4.onPanelBlurred}))})}},{key:"render",value:function render(){if(this.state.isLayoutInvalid)return null;var _props2=this.props,dashboardViewMode=_props2.dashboardViewMode,maximizedPanelId=_props2.maximizedPanelId,useMargins=_props2.useMargins;var isViewMode=dashboardViewMode===_dashboard_view_mode.DashboardViewMode.VIEW;return _react2.default.createElement(ResponsiveSizedGrid,{isViewMode:isViewMode,layout:this.buildLayoutFromPanels(),onLayoutChange:this.onLayoutChange,maximizedPanelId:maximizedPanelId,useMargins:useMargins},this.renderDOM())}}]);return DashboardGrid}(_react2.default.Component);var _initialiseProps=function _initialiseProps(){var _this5=this;this.onLayoutChange=function(layout){var _props3=_this5.props,onPanelsUpdated=_props3.onPanelsUpdated,panels=_props3.panels;var updatedPanels=layout.reduce(function(updatedPanelsAcc,panelLayout){updatedPanelsAcc[panelLayout.i]=_extends({},panels[panelLayout.i],{panelIndex:panelLayout.i,gridData:_lodash2.default.pick(panelLayout,["x","y","w","h","i"])});return updatedPanelsAcc},[]);onPanelsUpdated(updatedPanels)};this.onPanelFocused=function(focusedPanelIndex){_this5.setState({focusedPanelIndex:focusedPanelIndex})};this.onPanelBlurred=function(blurredPanelIndex){_this5.state.focusedPanelIndex===blurredPanelIndex&&_this5.setState({focusedPanelIndex:void 0})}};DashboardGrid.propTypes={panels:_propTypes2.default.object.isRequired,getEmbeddableFactory:_propTypes2.default.func.isRequired,dashboardViewMode:_propTypes2.default.oneOf([_dashboard_view_mode.DashboardViewMode.EDIT,_dashboard_view_mode.DashboardViewMode.VIEW]).isRequired,onPanelsUpdated:_propTypes2.default.func.isRequired,maximizedPanelId:_propTypes2.default.string,useMargins:_propTypes2.default.bool.isRequired}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ExitFullScreenButton=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _chrome=__webpack_require__(8);var _chrome2=_interopRequireDefault(_chrome);var _components=__webpack_require__(33);var _eui=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var ExitFullScreenButton=exports.ExitFullScreenButton=function(_PureComponent){_inherits(ExitFullScreenButton,_PureComponent);function ExitFullScreenButton(){var _ref;var _temp,_this,_ret;_classCallCheck(this,ExitFullScreenButton);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=ExitFullScreenButton.__proto__||Object.getPrototypeOf(ExitFullScreenButton)).call.apply(_ref,[this].concat(args))),_this),_this.onKeyDown=function(e){e.keyCode===_eui.keyCodes.ESCAPE&&_this.props.onExitFullScreenMode()},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(ExitFullScreenButton,[{key:"componentWillMount",value:function componentWillMount(){document.addEventListener("keydown",this.onKeyDown,false);_chrome2.default.setVisible(false)}},{key:"componentWillUnmount",value:function componentWillUnmount(){document.removeEventListener("keydown",this.onKeyDown,false);_chrome2.default.setVisible(true)}},{key:"render",value:function render(){return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiScreenReaderOnly,null,_react2.default.createElement("p",{"aria-live":"polite"},"In full screen mode, press ESC to exit.")),_react2.default.createElement("div",{className:"exitFullScreenButton"},_react2.default.createElement(_components.KuiButton,{type:"hollow","aria-label":"Exit full screen mode",className:"exitFullScreenMode",onClick:this.props.onExitFullScreenMode},_react2.default.createElement("span",{className:"exitFullScreenModeLogo","data-test-subj":"exitFullScreenModeLogo"}),_react2.default.createElement("span",{className:"exitFullScreenModeText","data-test-subj":"exitFullScreenModeText"},"Exit full screen",_react2.default.createElement("span",{className:"kuiIcon fa fa-angle-left"})))))}}]);return ExitFullScreenButton}(_react.PureComponent);ExitFullScreenButton.propTypes={onExitFullScreenMode:_propTypes2.default.func.isRequired}},function(module,exports){},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(2);_modules.uiModules.get("kibana").provider("dashboardConfig",function(){var hideWriteControls=false;return{turnHideWriteControlsOn:function turnHideWriteControlsOn(){hideWriteControls=true},$get:function $get(){return{getHideWriteControls:function getHideWriteControls(){return hideWriteControls}}}}})},function(module,exports){module.exports='<dashboard-app\n  class="app-container dashboard-container"\n  ng-class="{\'dashboard-container-with-margins\': model.useMargins}"\n>\n  \x3c!-- Local nav. --\x3e\n  <kbn-top-nav name="dashboard" config="topNavMenu">\n    \x3c!-- Transcluded elements. --\x3e\n    <div data-transclude-slots>\n      \x3c!-- Title. --\x3e\n      <div\n        data-transclude-slot="topLeftCorner"\n        class="kuiLocalBreadcrumbs"\n        data-test-subj="breadcrumbs"\n        role="heading"\n        aria-level="1"\n      >\n        <div class="kuiLocalBreadcrumb">\n          <a class="kuiLocalBreadcrumb__link" href="{{landingPageUrl()}}">Dashboard</a>\n        </div>\n        <div class="kuiLocalBreadcrumb">\n          {{ getDashTitle() }}\n        </div>\n      </div>\n\n      \x3c!-- Search. --\x3e\n      <div ng-show="chrome.getVisible()" class="fullWidth" data-transclude-slot="bottomRow">\n        <query-bar\n          query="model.query"\n          app-name="\'dashboard\'"\n          on-submit="updateQueryAndFetch($query)"\n          index-patterns="indexPatterns"\n        >\n        </query-bar>\n      </div>\n    </div>\n  </kbn-top-nav>\n\n  \x3c!-- Filters. --\x3e\n  <filter-bar\n    ng-show="showFilterBar()"\n    state="state"\n    index-patterns="indexPatterns"\n  ></filter-bar>\n\n  <div\n    ng-show="getShouldShowEditHelp()"\n    class="text-center start-screen"\n  >\n    <h2 class="kuiTitle kuiVerticalRhythm">\n      This dashboard is empty. Let&rsquo;s fill it up!\n    </h2>\n\n    <p class="kuiText kuiVerticalRhythm">\n      Click the <a kbn-accessible-click class="kuiButton kuiButton--primary kuiButton--small" ng-click="showAddPanel()" aria-label="Add visualization">Add</a> button in the menu bar above to add a visualization to the dashboard. <br/>If you haven\'t set up any visualizations yet, <a class="kuiLink" href="#/visualize">visit the Visualize app</a> to create your first visualization.\n    </p>\n  </div>\n\n  <div ng-show="getShouldShowViewHelp()" class="text-center start-screen">\n    <h2 class="kuiTitle kuiVerticalRhythm">\n      This dashboard is empty. Let&rsquo;s fill it up!\n    </h2>\n\n    <p class="kuiText kuiVerticalRhythm">\n      Click the <a kbn-accessible-click class="kuiButton kuiButton--primary kuiButton--small" ng-click="enterEditMode()">Edit</a> button in the menu bar above to start working on your new dashboard.\n    </p>\n  </div>\n\n  <dashboard-viewport-provider\n    get-embeddable-factory="getEmbeddableFactory"\n  >\n  </dashboard-viewport-provider>\n\n</dashboard-app>'},function(module,exports){module.exports='<dashboard-listing\n  find="find"\n  delete="delete"\n  listing-limit="listingLimit"\n  hide-write-controls="hideWriteControls"\n  initial-filter="initialFilter"\n/>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardListing=exports.EMPTY_FILTER=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _notify=__webpack_require__(9);var _eui=__webpack_require__(3);var _dashboard_constants=__webpack_require__(251);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var EMPTY_FILTER=exports.EMPTY_FILTER="";var DashboardListing=exports.DashboardListing=function(_React$Component){_inherits(DashboardListing,_React$Component);function DashboardListing(props){var _this2=this;_classCallCheck(this,DashboardListing);var _this=_possibleConstructorReturn(this,(DashboardListing.__proto__||Object.getPrototypeOf(DashboardListing)).call(this,props));_this.debouncedFetch=_lodash2.default.debounce((_ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(filter){var response;return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return _this.props.find(filter);case 2:response=_context.sent;if(_this._isMounted){_context.next=5;break}return _context.abrupt("return");case 5:filter===_this.state.filter&&_this.setState({hasInitialFetchReturned:true,isFetchingItems:false,dashboards:response.hits,totalDashboards:response.total,showLimitError:response.total>_this.props.listingLimit});case 6:case"end":return _context.stop()}},_callee,_this2)})),function(_x){return _ref.apply(this,arguments)}),300);var _ref;_this.fetchItems=function(){_this.setState({isFetchingItems:true},_this.debouncedFetch.bind(null,_this.state.filter))};_this.deleteSelectedItems=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){return regeneratorRuntime.wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return _this.props.delete(_this.state.selectedIds);case 3:_context2.next=8;break;case 5:_context2.prev=5;_context2.t0=_context2["catch"](0);_notify.toastNotifications.addDanger({title:"Unable to delete dashboard(s)",text:""+_context2.t0});case 8:_this.fetchItems();_this.setState({selectedIds:[]});_this.closeDeleteModal();case 11:case"end":return _context2.stop()}},_callee2,_this2,[[0,5]])}));_this.closeDeleteModal=function(){_this.setState({showDeleteModal:false})};_this.openDeleteModal=function(){_this.setState({showDeleteModal:true})};_this.onTableChange=function(_ref3){var page=_ref3.page,_ref3$sort=_ref3.sort,sort=void 0===_ref3$sort?{}:_ref3$sort;var pageIndex=page.index,pageSize=page.size;var sortField=sort.field,sortDirection=sort.direction;if(_this.state.sortField===sortField&&"desc"===_this.state.sortDirection&&"asc"===sortDirection){sortField=null;sortDirection=null}_this.setState({page:pageIndex,perPage:pageSize,sortField:sortField,sortDirection:sortDirection})};_this.getPageOfItems=function(){var dashboardsCopy=_this.state.dashboards.slice();_this.state.sortField&&dashboardsCopy.sort(function(a,b){var fieldA=_lodash2.default.get(a,_this.state.sortField,"");var fieldB=_lodash2.default.get(b,_this.state.sortField,"");var order=1;"desc"===_this.state.sortDirection&&(order=-1);return order*fieldA.toLowerCase().localeCompare(fieldB.toLowerCase())});var startIndex=_this.state.page*_this.state.perPage;var lastIndex=startIndex+_this.state.perPage;return dashboardsCopy.slice(startIndex,lastIndex)};_this.state={hasInitialFetchReturned:false,isFetchingItems:false,showDeleteModal:false,showLimitError:false,filter:_this.props.initialFilter,dashboards:[],selectedIds:[],page:0,perPage:20};return _this}_createClass(DashboardListing,[{key:"componentWillMount",value:function componentWillMount(){this._isMounted=true}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._isMounted=false;this.debouncedFetch.cancel()}},{key:"componentDidMount",value:function componentDidMount(){this.fetchItems()}},{key:"hasNoDashboards",value:function hasNoDashboards(){if(!this.state.isFetchingItems&&0===this.state.dashboards.length&&!this.state.filter)return true;return false}},{key:"renderConfirmDeleteModal",value:function renderConfirmDeleteModal(){return _react2.default.createElement(_eui.EuiOverlayMask,null,_react2.default.createElement(_eui.EuiConfirmModal,{title:"Delete selected dashboards?",onCancel:this.closeDeleteModal,onConfirm:this.deleteSelectedItems,cancelButtonText:"Cancel",confirmButtonText:"Delete",defaultFocusedButton:"cancel"},_react2.default.createElement("p",null,"You can't recover deleted dashboards.")))}},{key:"renderListingLimitWarning",value:function renderListingLimitWarning(){if(this.state.showLimitError)return _react2.default.createElement(_react2.default.Fragment,null,_react2.default.createElement(_eui.EuiCallOut,{title:"Listing limit exceeded",color:"warning",iconType:"help"},_react2.default.createElement("p",null,"You have ",this.state.totalDashboards," dashboards, but your ",_react2.default.createElement("strong",null,"listingLimit")," setting prevents the table below from displaying more than ",this.props.listingLimit,". You can change this setting under ",_react2.default.createElement(_eui.EuiLink,{href:"#/management/kibana/settings"},"Advanced Settings"),".")),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}))}},{key:"renderNoResultsMessage",value:function renderNoResultsMessage(){if(this.state.isFetchingItems)return"";return"No dashboards matched your search."}},{key:"renderNoItemsMessage",value:function renderNoItemsMessage(){if(this.props.hideWriteControls)return _react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("h2",null,_react2.default.createElement(_eui.EuiTextColor,{color:"subdued"},"Looks like you don't have any dashboards.")));return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiEmptyPrompt,{iconType:"dashboardApp",title:_react2.default.createElement("h2",null,"Create your first dashboard"),body:_react2.default.createElement(_react.Fragment,null,_react2.default.createElement("p",null,"You can combine data views from any Kibana app into one dashboard and see everything in one place."),_react2.default.createElement("p",null,"New to Kibana? ",_react2.default.createElement(_eui.EuiLink,{href:"#/home/tutorial_directory/sampleData"},"Install some sample data")," to take a test drive.")),actions:_react2.default.createElement(_eui.EuiButton,{href:"#"+_dashboard_constants.DashboardConstants.CREATE_NEW_DASHBOARD_URL,fill:true,iconType:"plusInCircle","data-test-subj":"createDashboardPromptButton"},"Create new dashboard")}))}},{key:"renderSearchBar",value:function renderSearchBar(){var _this3=this;var deleteBtn=void 0;this.state.selectedIds.length>0&&(deleteBtn=_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButton,{color:"danger",onClick:this.openDeleteModal,"data-test-subj":"deleteSelectedDashboards",key:"delete"},"Delete selected")));return _react2.default.createElement(_eui.EuiFlexGroup,null,deleteBtn,_react2.default.createElement(_eui.EuiFlexItem,{grow:true},_react2.default.createElement(_eui.EuiFieldSearch,{"aria-label":"Filter dashboards",placeholder:"Search...",fullWidth:true,value:this.state.filter,onChange:function onChange(e){_this3.setState({filter:e.target.value},_this3.fetchItems)},"data-test-subj":"searchFilter"})))}},{key:"renderTable",value:function renderTable(){var _this4=this;var tableColumns=[{field:"title",name:"Title",sortable:true,render:function render(field,record){return _react2.default.createElement(_eui.EuiLink,{className:"dashboardLink",href:"#"+(0,_dashboard_constants.createDashboardEditUrl)(record.id),"data-test-subj":"dashboardListingTitleLink-"+record.title.split(" ").join("-")},field)}},{field:"description",name:"Description",dataType:"string",sortable:true}];this.props.hideWriteControls||tableColumns.push({name:"Actions",actions:[{render:function render(record){return _react2.default.createElement(_eui.EuiLink,{href:"#"+(0,_dashboard_constants.createDashboardEditUrl)(record.id)+"?_a=(viewMode:edit)"},"Edit")}}]});var pagination={pageIndex:this.state.page,pageSize:this.state.perPage,totalItemCount:this.state.dashboards.length,pageSizeOptions:[10,20,50]};var selection={onSelectionChange:function onSelectionChange(selection){_this4.setState({selectedIds:selection.map(function(item){return item.id})})}};var sorting={};this.state.sortField&&(sorting.sort={field:this.state.sortField,direction:this.state.sortDirection});var items=0===this.state.dashboards.length?[]:this.getPageOfItems();return _react2.default.createElement(_eui.EuiBasicTable,{itemId:"id",items:items,loading:this.state.isFetchingItems,columns:tableColumns,selection:selection,noItemsMessage:this.renderNoResultsMessage(),pagination:pagination,sorting:sorting,onChange:this.onTableChange})}},{key:"renderListingOrEmptyState",value:function renderListingOrEmptyState(){if(this.hasNoDashboards())return this.renderNoItemsMessage();return this.renderListing()}},{key:"renderListing",value:function renderListing(){var createButton=void 0;this.props.hideWriteControls||(createButton=_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButton,{href:"#"+_dashboard_constants.DashboardConstants.CREATE_NEW_DASHBOARD_URL,"data-test-subj":"newDashboardLink"},"Create new dashboard")));return _react2.default.createElement("div",null,this.state.showDeleteModal&&this.renderConfirmDeleteModal(),_react2.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"flexEnd","data-test-subj":"top-nav"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiTitle,{size:"l"},_react2.default.createElement("h1",null,"Dashboards"))),createButton),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),this.renderListingLimitWarning(),this.renderSearchBar(),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),this.renderTable())}},{key:"renderPageContent",value:function renderPageContent(){if(!this.state.hasInitialFetchReturned)return;return _react2.default.createElement(_eui.EuiPageContent,{className:"dashboardLandingPageContent",horizontalPosition:"center"},this.renderListingOrEmptyState())}},{key:"render",value:function render(){return _react2.default.createElement(_eui.EuiPage,{"data-test-subj":"dashboardLandingPage",className:"dashboardLandingPage",restrictWidth:true},_react2.default.createElement(_eui.EuiPageBody,null,this.renderPageContent()))}}]);return DashboardListing}(_react2.default.Component);DashboardListing.propTypes={find:_propTypes2.default.func.isRequired,delete:_propTypes2.default.func.isRequired,listingLimit:_propTypes2.default.number.isRequired,hideWriteControls:_propTypes2.default.bool.isRequired,initialFilter:_propTypes2.default.string};DashboardListing.defaultProps={initialFilter:EMPTY_FILTER}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"4eae70b44c4e3b69f2357bff8f1e67f1.svg"},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"a04c09b6eda01f84b583ed59e958afdc.svg"},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"6199ab7146b1eb859db9ffd2b9b786d3.svg"},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"9ad9ca7ab44828ee57b75fdd76a84567.svg"}]);